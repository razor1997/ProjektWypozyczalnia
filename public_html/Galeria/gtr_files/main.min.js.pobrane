/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});

Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1}),HELIOS.config.common.logging={level:"silent"},HELIOS.config.common.countryCode=$("meta[name='geo.country']").attr("content"),HELIOS.config.common.api.scripts={facebook:{url:"//connect.facebook.net/en_US/all.js",root:"fb-root",parameters:["appId"]},google:{url:"//apis.google.com/js/platform.js"},twitter:{url:"//platform.twitter.com/widgets.js"},youtube:{url:"//www.youtube.com/iframe_api"},gigya:{url:"",parameters:["apiKey"],scriptText:null},youku:{url:"//player.youku.com/jsapi"},iqiyi:{url:"https://openapi.iqiyi.com/api/iqiyi/authorize"}},function(a,b,c){HELIOS.config.common.mediaQuery.raw={small:a-c,mediumMin:a,mediumMax:b-c,large:b,smallOrMediumMax:b-c,mediumOrLargeMin:a}}(36.3125,60,1e-4),function(a){HELIOS.config.common.mediaQuery.is={small:"(max-width:"+a.small+"em)",medium:"(min-width: "+a.mediumMin+"em) and (max-width: "+a.mediumMax+"em)",large:"(min-width: "+a.large+"em)",smallOrMedium:"(max-width: "+a.smallOrMediumMax+"em)",mediumOrLarge:"(min-width: "+a.mediumOrLargeMin+"em)"}}(HELIOS.config.common.mediaQuery.raw),function(a){var b,c,d=[];for(b in a)c=a[b]+"em",-1===d.indexOf(c)&&d.push(c);HELIOS.config.common.mediaQuery.breakpoints=d}(HELIOS.config.common.mediaQuery.raw),function(a,b,c){HELIOS.config.common.mediaQuery.breakpointsPx={small:a-c,mediumMin:a,mediumMax:b-c,large:b,smallOrMediumMax:b-c,mediumOrLargeMin:a}}(581,960,1),HELIOS.config.common.api.gigya&&HELIOS.config.common.api.gigya.url&&(HELIOS.config.common.api.scripts.gigya.url=HELIOS.config.common.api.gigya.url),function(){function _handleMultipleEvents(a,b,c,d){vjs.arr.forEach(c,function(c){a(b,c,d)})}function _logType(a,b){var c,d,e;c=Array.prototype.slice.call(b),d=function(){},e=window.console||{log:d,warn:d,error:d},a?c.unshift(a.toUpperCase()+":"):a="log",vjs.log.history.push(c),c.unshift("VIDEOJS:"),e[a].apply?e[a].apply(e,c):e[a](c.join(" "))}var requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){!c&&hasProp(a,e)||(!d||"object"!=typeof b||!b||isArray(b)||isFunction(b)||b instanceof RegExp?a[e]=b:(a[e]||(a[e]={}),mixin(a[e],b,c,d)))}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;b<a.length;b++)if("."===(c=a[b]))a.splice(b,1),b-=1;else if(".."===c){if(0===b||1===b&&".."===a[2]||".."===a[b-1])continue;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=c&&c.split("/"),q=y.map,r=q&&q["*"];if(a&&(a=a.split("/"),j=a.length-1,y.nodeIdCompat&&jsSuffixRegExp.test(a[j])&&(a[j]=a[j].replace(jsSuffixRegExp,"")),"."===a[0].charAt(0)&&p&&(o=p.slice(0,p.length-1),a=o.concat(a)),b(a),a=a.join("/")),d&&q&&(p||r)){f=a.split("/");a:for(g=f.length;g>0;g-=1){if(i=f.slice(0,g).join("/"),p)for(h=p.length;h>0;h-=1)if((e=getOwn(q,p.slice(0,h).join("/")))&&(e=getOwn(e,i))){k=e,l=g;break a}!m&&r&&getOwn(r,i)&&(m=getOwn(r,i),n=g)}!k&&m&&(k=m,l=n),k&&(f.splice(0,l,k),a=f.join("/"))}return getOwn(y.pkgs,a)||a}function d(a){isBrowser&&each(scripts(),function(b){if(b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===v.contextName)return b.parentNode.removeChild(b),!0})}function f(a){var b=getOwn(y.paths,a);if(b&&isArray(b)&&b.length>1)return b.shift(),v.require.undef(a),v.makeRequire(null,{skipMap:!0})([a]),!0}function g(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function h(a,b,d,e){var f,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(G+=1)),j=g(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(D,k)),a&&(k?o=h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):-1===a.indexOf("!")?c(a,l,e):a:(o=c(a,l,e),j=g(o),k=j[0],o=j[1],d=!0,f=v.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(H+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:f,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function i(a){var b=a.id,c=getOwn(z,b);return c||(c=z[b]=new v.Module(a)),c}function j(a,b,c){var d=a.id,e=getOwn(z,d);!hasProp(D,d)||e&&!e.defineEmitComplete?(e=i(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(D[d])}function k(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(z,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function l(){globalDefQueue.length&&(apsp.apply(C,[C.length,0].concat(globalDefQueue)),globalDefQueue=[])}function m(a){delete z[a],delete A[a]}function n(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(z,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,D[f]),a.check()):n(g,b,c))}),c[d]=!0)}function o(){var a,b,c=1e3*y.waitSeconds,e=c&&v.startTime+c<(new Date).getTime(),g=[],h=[],i=!1,j=!0;if(!t){if(t=!0,eachProp(A,function(a){var c=a.map,k=c.id;if(a.enabled&&(c.isDefine||h.push(a),!a.error))if(!a.inited&&e)f(k)?(b=!0,i=!0):(g.push(k),d(k));else if(!a.inited&&a.fetched&&c.isDefine&&(i=!0,!c.prefix))return j=!1}),e&&g.length)return a=makeError("timeout","Load timeout for modules: "+g,null,g),a.contextName=v.contextName,k(a);j&&each(h,function(a){n(a,{},{})}),e&&!b||!i||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,o()},50)),t=!1}}function p(a){hasProp(D,a[0])||i(h(a[0],null,!0)).init(a[1],a[2])}function q(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function r(a){var b=a.currentTarget||a.srcElement;return q(b,v.onScriptLoad,"load","onreadystatechange"),q(b,v.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function s(){var a;for(l();C.length;){if(a=C.shift(),null===a[0])return k(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));p(a)}}var t,u,v,w,x,y={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},z={},A={},B={},C=[],D={},E={},F={},G=1,H=1;return w={require:function(a){return a.require?a.require:a.require=v.makeRequire(a.map)},exports:function(a){if(a.usingExports=!0,a.map.isDefine)return a.exports?D[a.map.id]=a.exports:a.exports=D[a.map.id]={}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return getOwn(y.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}},u=function(a){this.events=getOwn(B,a.id)||{},this.map=a,this.shim=getOwn(y.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},u.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,v.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();v.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;E[a]||(E[a]=!0,v.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,f=this.exports,g=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(g)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{f=v.execCb(c,g,d,f)}catch(e){a=e}else f=v.execCb(c,g,d,f);if(this.map.isDefine&&void 0===f&&(b=this.module,b?f=b.exports:this.usingExports&&(f=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",k(this.error=a)}else f=g;this.exports=f,this.map.isDefine&&!this.ignore&&(D[c]=f,req.onResourceLoad&&req.onResourceLoad(v,this.map,this.depMaps)),m(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=h(a.prefix);this.depMaps.push(d),j(d,"defined",bind(this,function(d){var f,g,l,n=getOwn(F,this.map.id),o=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,q=v.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(o=d.normalize(o,function(a){return c(a,p,!0)})||""),g=h(a.prefix+"!"+o,this.map.parentMap),j(g,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),void((l=getOwn(z,g.id))&&(this.depMaps.push(g),this.events.error&&l.on("error",bind(this,function(a){this.emit("error",a)})),l.enable()))):n?(this.map.url=v.nameToUrl(n),void this.load()):(f=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),f.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(z,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&m(a.map.id)}),k(a)}),f.fromText=bind(this,function(c,d){var g=a.name,j=h(g),l=useInteractive;d&&(c=d),l&&(useInteractive=!1),i(j),hasProp(y.config,b)&&(y.config[g]=y.config[b]);try{req.exec(c)}catch(e){return k(makeError("fromtexteval","fromText eval for "+b+" failed: "+e,e,[b]))}l&&(useInteractive=!0),this.depMaps.push(j),v.completeLoad(g),q([g],f)}),void d.load(a.name,q,f,y))})),v.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){A[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=h(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(w,a.id))return void(this.depExports[b]=e(this));this.depCount+=1,j(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback?j(a,"error",bind(this,this.errback)):this.events.error&&j(a,"error",bind(this,function(a){this.emit("error",a)}))}c=a.id,d=z[c],hasProp(w,c)||!d||d.enabled||v.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(z,a.id);b&&!b.enabled&&v.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},v={config:y,contextName:a,registry:z,defined:D,urlFetched:E,defQueue:C,Module:u,makeModuleMap:h,nextTick:req.nextTick,onError:k,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=y.shim,c={paths:!0,bundles:!0,config:!0,map:!0};eachProp(a,function(a,b){c[b]?(y[b]||(y[b]={}),mixin(y[b],a,!0,!0)):y[b]=a}),a.bundles&&eachProp(a.bundles,function(a,b){each(a,function(a){a!==b&&(F[a]=b)})}),a.shim&&(eachProp(a.shim,function(a,c){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=v.makeShimExports(a)),b[c]=a}),y.shim=b),a.packages&&each(a.packages,function(a){var b,c;a="string"==typeof a?{name:a}:a,c=a.name,b=a.location,b&&(y.paths[c]=a.location),y.pkgs[c]=a.name+"/"+(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(z,function(a,b){a.inited||a.map.unnormalized||(a.map=h(b))}),(a.deps||a.callback)&&v.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,e){function f(c,d,g){var j,l,m;return e.enableBuildCallback&&d&&isFunction(d)&&(d.__requireJsBuild=!0),"string"==typeof c?isFunction(d)?k(makeError("requireargs","Invalid require call"),g):b&&hasProp(w,c)?w[c](z[b.id]):req.get?req.get(v,c,b,f):(l=h(c,b,!1,!0),j=l.id,hasProp(D,j)?D[j]:k(makeError("notloaded",'Module name "'+j+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(s(),v.nextTick(function(){s(),m=i(h(null,b)),m.skipMap=e.skipMap,m.init(c,d,g,{enabled:!0}),o()}),f)}return e=e||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),v.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(D,h(a,b,!1,!0).id)},specified:function(a){return a=h(a,b,!1,!0).id,hasProp(D,a)||hasProp(z,a)}}),b||(f.undef=function(a){l();var c=h(a,b,!0),e=getOwn(z,a);d(a),delete D[a],delete E[c.url],delete B[a],eachReverse(C,function(b,c){b[0]===a&&C.splice(c,1)}),e&&(e.events.defined&&(B[a]=e.events),m(a))}),f},enable:function(a){getOwn(z,a.id)&&i(a).enable()},completeLoad:function(a){var b,c,d,e=getOwn(y.shim,a)||{},g=e.exports;for(l();C.length;){if(c=C.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);p(c)}if(d=getOwn(z,a),!b&&!hasProp(D,a)&&d&&!d.inited){if(!(!y.enforceDefine||g&&getGlobal(g)))return f(a)?void 0:k(makeError("nodefine","No define call for "+a,null,[a]));p([a,e.deps||[],e.exportsFn])}o()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k=getOwn(y.pkgs,a);if(k&&(a=k),j=getOwn(F,a))return v.nameToUrl(j,b,c);if(req.jsExtRegExp.test(a))h=a+(b||"");else{for(d=y.paths,e=a.split("/"),f=e.length;f>0;f-=1)if(g=e.slice(0,f).join("/"),i=getOwn(d,g)){isArray(i)&&(i=i[0]),e.splice(0,f,i);break}h=e.join("/"),h+=b||(/^data\:|\?/.test(h)||c?"":".js"),h=("/"===h.charAt(0)||h.match(/^[\w\+\.\-]+:/)?"":y.baseUrl)+h}return y.urlArgs?h+(-1===h.indexOf("?")?"?":"&")+y.urlArgs:h},load:function(a,b){req.load(v,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=r(a);v.completeLoad(b.id)}},onScriptError:function(a){var b=r(a);if(!f(b.id))return k(makeError("scripterror","Script error for: "+b.id,a,[b.id]))}},v.require=v.makeRequire(),v}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){if("interactive"===a.readyState)return interactiveScript=a}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.17",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a,b,c){var d=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return d.type=a.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d},req.load=function(a,b,c){var d,f=a&&a.config||{};if(isBrowser)return d=req.createNode(f,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(e){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,e,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){if(head||(head=a.parentNode),dataMain=a.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript())&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")]),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("vendor/requirejs/require",function(){}),define("jquery",[],function(){return jQuery}),define("pictureFill",[],function(){"use strict";function a(a){var b=[];return a.getElementsByClassName?b=a.getElementsByClassName(f):a.querySelectorAll&&(b=a.querySelectorAll("."+f)),b}function b(a,b){var c=new RegExp("(^| )"+b+"($| )"),d=a.className;return c.test(d)}var c,d,e=window,f="picture-element";return e.picturefill=function(g){var h,i=e.document;g&&g.nodeName&&(i=g),h=a(i),c="function"==typeof e.matchMedia,d=e.devicePixelRatio?Math.ceil(e.devicePixelRatio):1;for(var j=0,k=h.length;j<k;j++){var l=h[j].getElementsByTagName("span"),m=[],n=h[j].getAttribute("data-picture-lazy");if(0!==l.length){if(!1===c)m.push(l[l.length-1]);else for(var o=0,p=l.length;o<p;o++){var q=l[o].getAttribute("data-density");if(!q||""===q||1*q<=d){var r=l[o].getAttribute("data-media");(!r||c&&e.matchMedia(r).matches)&&m.push(l[o])}}var s=h[j].getElementsByTagName("img")[0];if(m.length){var t=m.pop();if(!t.getAttribute("data-src"))continue;if(s&&"NOSCRIPT"!==s.parentNode.nodeName){if(t===s.parentNode)continue}else s=e.document.createElement("img"),s.alt=h[j].getAttribute("data-alt")||"",s.title=h[j].getAttribute("data-title")||"",s.className=h[j].className.replace(f,"");n&&!s.src?(b(s,"lazyLoad")||(s.className+=" lazyLoad"),s.setAttribute("src",t.getAttribute("data-src"))):s.src=t.getAttribute("data-src"),t.appendChild(s),s.removeAttribute("width"),s.removeAttribute("height")}else s&&s.parentNode.removeChild(s)}}return e.picturefill},e.addEventListener&&(e.addEventListener("resize",e.picturefill,!1),e.addEventListener("orientationchange",e.picturefill,!1)),e.picturefill()}),function(a){"use strict";var b,c=0,d=function(){window.picturefillLatest&&a(window.picturefillLatest),(window.picturefillLatest||c>9999)&&clearInterval(b),c++};b=setInterval(d,8),d()}(function(a,b){"use strict";var c=window.document,d=a._,e={},f=d.cfg,g="currentSrc",h=function(a,b,c){var d=c.curCan;a&&b.setAttribute("width",parseInt(a/d.res,10))},i=function(a,b,d){var f,i,j;a in e?h(e[a],b,d):(j=function(){d.pendingURLSize=null,f.onload=null,f.onerror=null,b=null,f=null},d.pendingURLSize=a,i=d.curCan,i.w&&h(i.w,b,d),f=c.createElement("img"),f.onload=function(){if(e[a]=f.naturalWidth||f.width,!e[a])try{c.body.appendChild(f),e[a]=f.offsetWidth||f.naturalWidth||f.width,c.body.removeChild(f)}catch(e){}a===b[g]&&h(e[a],b,d),j()},f.onerror=j,f.src=a,f&&f.complete&&f.onload())},j=function(){var a,b,e=function(){var e,f,g,h=c.getElementsByTagName("img"),i={elements:[]};for(d.setupRun(i),a=!1,clearTimeout(b),e=0,f=h.length;e<f;e++)(g=h[e][d.ns])&&g.curCan&&(d.setRes.res(g.curCan,g.curCan.set.sizes),d.setSize(h[e]));d.teardownRun(i)};return function(){!a&&f.addSize&&(a=!0,clearTimeout(b),b=setTimeout(e))}}();g in c.createElement("img")||(g="src"),d.setSize=function(a){var c,e=a[d.ns],h=e.curCan;e.dims===b&&(e.dims=a.getAttribute("height")&&a.getAttribute("width")),f.addSize&&h&&!e.dims&&(c=d.makeUrl(h.url))===a[g]&&c!==e.pendingURLSize&&i(c,a,e)},window.addEventListener&&!d.supPicture&&addEventListener("resize",j,!1),f.addSize=!("addSize"in f)||!!f.addSize,j()}),function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){"use strict";function d(a){return" "===a||"\t"===a||"\n"===a||"\f"===a||"\r"===a}function e(b,c){var d=new a.Image;return d.onerror=function(){z[b]=!1,_()},d.onload=function(){z[b]=1===d.width,_()},d.src=c,"pending"}function f(){K=!1,N=a.devicePixelRatio,L={},M={},r.DPR=N||1,O.width=Math.max(a.innerWidth||0,y.clientWidth),O.height=Math.max(a.innerHeight||0,y.clientHeight),O.vw=O.width/100,O.vh=O.height/100,q=[O.height,O.width,N].join("-"),O.em=r.getEmValue(),O.rem=O.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===A.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=r.getSet(a),d=!1;"pending"!==c&&(d=q,c&&(b=r.setRes(c),r.applySetCandidate(b,a))),a[r.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[r.ns].sets,c=c&&c[c.length-1]),d=k(b,c),d&&(b=r.makeUrl(b),a[r.ns].curSrc=b,a[r.ns].curCan=d,d.res||$(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=r.parseSet(b),a=r.makeUrl(a),c=0;c<e.length;c++)if(a===r.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;c<d;c++)e=g[c],e[r.ns]=!0,(f=e.getAttribute("srcset"))&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));if(d)return c=d[0],m+=c.length,c}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),V.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):W.test(j)&&"x"===i?((a||c||d)&&(m=!0),l<0?m=!0:c=l):V.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}function f(){for(c(R),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(S),m>=l)return n;g=c(T),h=[],","===g.slice(-1)?(g=g.replace(U,""),e()):f()}}function n(a){function b(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(""===(e=a.charAt(j)))return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}function c(a){return!!(k.test(a)&&parseFloat(a)>=0)||(!!l.test(a)||("0"===a||"-0"===a||"+0"===a))}var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=b(a),g=f.length,e=0;e<g;e++)if(h=f[e],i=h[h.length-1],c(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),r.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var o,p,q,r={},s=!1,t=function(){},u=b.createElement("img"),v=u.getAttribute,w=u.setAttribute,x=u.removeAttribute,y=b.documentElement,z={},A={algorithm:""},B="data-pfsrc",C=B+"set",D=navigator.userAgent,E=/rident/.test(D)||/ecko/.test(D)&&D.match(/rv\:(\d+)/)&&RegExp.$1>35,F="currentSrc",G=/\s+\+?\d+(e\d+)?w/,H=/(\([^)]+\))?\s*(.+)/,I=a.picturefillCFG,J="font-size:100%!important;",K=!0,L={},M={},N=a.devicePixelRatio,O={px:1,in:96},P=b.createElement("a"),Q=!1,R=/^[ \t\n\r\u000c]+/,S=/^[, \t\n\r\u000c]+/,T=/^[^ \t\n\r\u000c]+/,U=/[,]+$/,V=/^\d+$/,W=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,X=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},Y=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},Z=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=Y(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in L))if(L[b]=!1,d&&(e=b.match(a)))L[b]=e[1]*O[e[2]];else try{L[b]=new Function("e",c(b))(O)}catch(e){}return L[b]}}(),$=function(a,b){return a.w?(a.cWidth=r.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},_=function(a){if(s){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||r.qsa(f.context||b,f.reevaluate||f.reselect?r.sel:r.selShort),e=c.length){for(r.setupRun(f),Q=!0,d=0;d<e;d++)r.fillImg(c[d],f);r.teardownRun(f)}}};a.console&&console.warn,F in u||(F="src"),z["image/jpeg"]=!0,z["image/gif"]=!0,z["image/png"]=!0,z["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),r.ns=("pf"+(new Date).getTime()).substr(0,9),r.supSrcset="srcset"in u,r.supSizes="sizes"in u,r.supPicture=!!a.HTMLPictureElement,r.supSrcset&&r.supPicture&&!r.supSizes&&function(a){u.srcset="data:,a",a.src="data:,a",r.supSrcset=u.complete===a.complete,r.supPicture=r.supSrcset&&r.supPicture}(b.createElement("img")),r.supSrcset&&!r.supSizes?function(){var a="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c=b.createElement("img"),d=function(){2===c.width&&(r.supSizes=!0),p=r.supSrcset&&!r.supSizes,s=!0,setTimeout(_)};c.onload=d,c.onerror=d,c.setAttribute("sizes","9px"),c.srcset=a+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",c.src=a}():s=!0,r.selShort="picture>img,img[srcset]",r.sel=r.selShort,r.cfg=A,r.DPR=N||1,r.u=O,r.types=z,r.setSize=t,r.makeUrl=Y(function(a){return P.href=a,P.href}),r.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},r.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?r.matchesMedia=function(a){return!a||matchMedia(a).matches}:r.matchesMedia=r.mMQ,r.matchesMedia.apply(this,arguments)},r.mMQ=function(a){return!a||Z(a)},r.calcLength=function(a){var b=Z(a,!0)||!1;return b<0&&(b=!1),b},r.supportsType=function(a){return!a||z[a]},r.parseSize=Y(function(a){var b=(a||"").match(H);return{media:b&&b[1],length:b&&b[2]}}),r.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},r.getEmValue=function(){var a;if(!o&&(a=b.body)){var c=b.createElement("div"),d=y.style.cssText,e=a.style.cssText;c.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",y.style.cssText=J,a.style.cssText=J,a.appendChild(c),o=c.offsetWidth,a.removeChild(c),o=parseFloat(o,10),y.style.cssText=d,a.style.cssText=e}return o||16},r.calcListLength=function(a){if(!(a in M)||A.uT){var b=r.calcLength(n(a));M[a]=b||O.width}return M[a]},r.setRes=function(a){var b;if(a){b=r.parseSet(a);for(var c=0,d=b.length;c<d;c++)$(b[c],a.sizes)}return b},r.setRes.res=$,r.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[r.ns],p=r.DPR;if(k=o.curSrc||b[F],l=o.curCan||j(b,k,a[0].set),l&&l.set===a[0].set&&((n=E&&!b.complete&&l.res-.1>p)||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;d<f;d++)if(c=a[d],c.res>=p){e=d-1,h=a[e]&&(n||k!==r.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=r.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&r.setSrc(b,h),r.setSize(b))}},r.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},r.getSet=function(a){var b,c,d,e=!1,f=a[r.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&r.matchesMedia(c.media)&&(d=r.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},r.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[r.ns];(j.src===c||d.src)&&(j.src=v.call(a,"src"),j.src?w.call(a,B,j.src):x.call(a,B)),(j.srcset===c||d.srcset||!r.supSrcset||a.srcset)&&(e=v.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:v.call(a,"sizes")},j.sets.push(f),(g=(p||j.src)&&G.test(j.srcset||""))||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!r.supSrcset||g&&!r.supSizes),h&&r.supSrcset&&!j.supported&&(e?(w.call(a,C,e),a.srcset=""):x.call(a,C)),
j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==r.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},r.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[r.ns]||(a[r.ns]={}),c=a[r.ns],(d||c.evaled!==q)&&(c.parsed&&!b.reevaluate||r.parseSets(a,a.parentNode,b),c.supported?c.evaled=q:h(a))},r.setupRun=function(){Q&&!K&&N===a.devicePixelRatio||f()},r.supPicture?(_=t,r.fillImg=t):function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(r.fillImgs(),(c=c||d.test(a))&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),g=function(a,b){var c,d,e=function(){var f=new Date-d;f<b?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}},h=y.clientHeight;X(a,"resize",g(function(){K=Math.max(a.innerWidth||0,y.clientWidth)!==O.width||y.clientHeight!==h,h=y.clientHeight,K&&r.fillImgs()},99)),X(b,"readystatechange",e)}(),r.picturefillLatest=_,r.fillImgs=_,r.teardownRun=t,_._=r,a.picturefillCFG={pf:r,push:function(a){var b=a.shift();"function"==typeof r[b]?r[b].apply(r,a):(A[b]=a[0],Q&&r.fillImgs({reselect:!0}))}};for(;I&&I.length;)a.picturefillCFG.push(I.shift());a.picturefillLatest=_,"object"==typeof module&&"object"==typeof module.exports?module.exports=_:"function"==typeof define&&define.amd&&define("picturefillLatest",[],function(){return _}),r.supPicture||(z["image/webp"]=e("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document),define("pictureFillLatest",function(){}),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=u(d,f,4);var g=!B(c)&&t.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=v(c,d);for(var e=A(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=A(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(l.call(d,g,h),t.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=G.length,d=a.constructor,e=t.isFunction(d)&&d.prototype||i,f="constructor";for(t.has(a,f)&&!t.contains(b,f)&&b.push(f);c--;)(f=G[c])in a&&a[f]!==e[f]&&!t.contains(b,f)&&b.push(f)}var f=this,g=f._,h=Array.prototype,i=Object.prototype,j=Function.prototype,k=h.push,l=h.slice,m=i.toString,n=i.hasOwnProperty,o=Array.isArray,p=Object.keys,q=j.bind,r=Object.create,s=function(){},t=function(a){return a instanceof t?a:this instanceof t?void(this._wrapped=a):new t(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports._=t):f._=t,t.VERSION="1.8.3";var u=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},v=function(a,b,c){return null==a?t.identity:t.isFunction(a)?u(a,b,c):t.isObject(a)?t.matcher(a):t.property(a)};t.iteratee=function(a,b){return v(a,b,1/0)};var w=function(a,b){return function(c){var d=arguments.length;if(d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},x=function(a){if(!t.isObject(a))return{};if(r)return r(a);s.prototype=a;var b=new s;return s.prototype=null,b},y=function(a){return function(b){return null==b?void 0:b[a]}},z=Math.pow(2,53)-1,A=y("length"),B=function(a){var b=A(a);return"number"==typeof b&&b>=0&&b<=z};t.each=t.forEach=function(a,b,c){b=u(b,c);var d,e;if(B(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=t.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},t.map=t.collect=function(a,b,c){b=v(b,c);for(var d=!B(a)&&t.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},t.reduce=t.foldl=t.inject=a(1),t.reduceRight=t.foldr=a(-1),t.find=t.detect=function(a,b,c){var d;if(void 0!==(d=B(a)?t.findIndex(a,b,c):t.findKey(a,b,c))&&-1!==d)return a[d]},t.filter=t.select=function(a,b,c){var d=[];return b=v(b,c),t.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},t.reject=function(a,b,c){return t.filter(a,t.negate(v(b)),c)},t.every=t.all=function(a,b,c){b=v(b,c);for(var d=!B(a)&&t.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},t.some=t.any=function(a,b,c){b=v(b,c);for(var d=!B(a)&&t.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},t.contains=t.includes=t.include=function(a,b,c,d){return B(a)||(a=t.values(a)),("number"!=typeof c||d)&&(c=0),t.indexOf(a,b,c)>=0},t.invoke=function(a,b){var c=l.call(arguments,2),d=t.isFunction(b);return t.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},t.pluck=function(a,b){return t.map(a,t.property(b))},t.where=function(a,b){return t.filter(a,t.matcher(b))},t.findWhere=function(a,b){return t.find(a,t.matcher(b))},t.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=B(a)?a:t.values(a);for(var h=0,i=a.length;h<i;h++)(d=a[h])>f&&(f=d)}else b=v(b,c),t.each(a,function(a,c,d){((e=b(a,c,d))>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},t.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=B(a)?a:t.values(a);for(var h=0,i=a.length;h<i;h++)(d=a[h])<f&&(f=d)}else b=v(b,c),t.each(a,function(a,c,d){((e=b(a,c,d))<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},t.shuffle=function(a){for(var b,c=B(a)?a:t.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=t.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},t.sample=function(a,b,c){return null==b||c?(B(a)||(a=t.values(a)),a[t.random(a.length-1)]):t.shuffle(a).slice(0,Math.max(0,b))},t.sortBy=function(a,b,c){return b=v(b,c),t.pluck(t.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={};return c=v(c,d),t.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};t.groupBy=C(function(a,b,c){t.has(a,c)?a[c].push(b):a[c]=[b]}),t.indexBy=C(function(a,b,c){a[c]=b}),t.countBy=C(function(a,b,c){t.has(a,c)?a[c]++:a[c]=1}),t.toArray=function(a){return a?t.isArray(a)?l.call(a):B(a)?t.map(a,t.identity):t.values(a):[]},t.size=function(a){return null==a?0:B(a)?a.length:t.keys(a).length},t.partition=function(a,b,c){b=v(b,c);var d=[],e=[];return t.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},t.first=t.head=t.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:t.initial(a,a.length-b)},t.initial=function(a,b,c){return l.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},t.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:t.rest(a,Math.max(0,a.length-b))},t.rest=t.tail=t.drop=function(a,b,c){return l.call(a,null==b||c?1:b)},t.compact=function(a){return t.filter(a,t.identity)};var D=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=A(a);g<h;g++){var i=a[g];if(B(i)&&(t.isArray(i)||t.isArguments(i))){b||(i=D(i,b,c));var j=0,k=i.length;for(e.length+=k;j<k;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};t.flatten=function(a,b){return D(a,b,!1)},t.without=function(a){return t.difference(a,l.call(arguments,1))},t.uniq=t.unique=function(a,b,c,d){t.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=v(c,d));for(var e=[],f=[],g=0,h=A(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?t.contains(f,j)||(f.push(j),e.push(i)):t.contains(e,i)||e.push(i)}return e},t.union=function(){return t.uniq(D(arguments,!0,!0))},t.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=A(a);d<e;d++){var f=a[d];if(!t.contains(b,f)){for(var g=1;g<c&&t.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},t.difference=function(a){var b=D(arguments,!0,!0,1);return t.filter(a,function(a){return!t.contains(b,a)})},t.zip=function(){return t.unzip(arguments)},t.unzip=function(a){for(var b=a&&t.max(a,A).length||0,c=Array(b),d=0;d<b;d++)c[d]=t.pluck(a,d);return c},t.object=function(a,b){for(var c={},d=0,e=A(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},t.findIndex=b(1),t.findLastIndex=b(-1),t.sortedIndex=function(a,b,c,d){c=v(c,d,1);for(var e=c(b),f=0,g=A(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},t.indexOf=c(1,t.findIndex,t.sortedIndex),t.lastIndexOf=c(-1,t.findLastIndex),t.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var E=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=x(a.prototype),g=a.apply(f,e);return t.isObject(g)?g:f};t.bind=function(a,b){if(q&&a.bind===q)return q.apply(a,l.call(arguments,1));if(!t.isFunction(a))throw new TypeError("Bind must be called on a function");var c=l.call(arguments,2),d=function(){return E(a,d,b,this,c.concat(l.call(arguments)))};return d},t.partial=function(a){var b=l.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===t?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return E(a,c,this,this,f)};return c},t.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=t.bind(a[c],a);return a},t.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return t.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},t.delay=function(a,b){var c=l.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},t.defer=t.partial(t.delay,t,1),t.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:t.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=t.now();h||!1!==c.leading||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(i,k)),f}},t.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=t.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=t.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},t.wrap=function(a,b){return t.partial(b,a)},t.negate=function(a){return function(){return!a.apply(this,arguments)}},t.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},t.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},t.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},t.once=t.partial(t.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),G=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];t.keys=function(a){if(!t.isObject(a))return[];if(p)return p(a);var b=[];for(var c in a)t.has(a,c)&&b.push(c);return F&&d(a,b),b},t.allKeys=function(a){if(!t.isObject(a))return[];var b=[];for(var c in a)b.push(c);return F&&d(a,b),b},t.values=function(a){for(var b=t.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},t.mapObject=function(a,b,c){b=v(b,c);for(var d,e=t.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},t.pairs=function(a){for(var b=t.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},t.invert=function(a){for(var b={},c=t.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},t.functions=t.methods=function(a){var b=[];for(var c in a)t.isFunction(a[c])&&b.push(c);return b.sort()},t.extend=w(t.allKeys),t.extendOwn=t.assign=w(t.keys),t.findKey=function(a,b,c){b=v(b,c);for(var d,e=t.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},t.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;t.isFunction(b)?(e=t.allKeys(g),d=u(b,c)):(e=D(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},t.omit=function(a,b,c){if(t.isFunction(b))b=t.negate(b);else{var d=t.map(D(arguments,!1,!1,1),String);b=function(a,b){return!t.contains(d,b)}}return t.pick(a,b,c)},t.defaults=w(t.allKeys,!0),t.create=function(a,b){var c=x(a);return b&&t.extendOwn(c,b),c},t.clone=function(a){return t.isObject(a)?t.isArray(a)?a.slice():t.extend({},a):a},t.tap=function(a,b){return b(a),a},t.isMatch=function(a,b){var c=t.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var H=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof t&&(a=a._wrapped),b instanceof t&&(b=b._wrapped);var e=m.call(a);if(e!==m.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(t.isFunction(g)&&g instanceof g&&t.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if((i=a.length)!==b.length)return!1;for(;i--;)if(!H(a[i],b[i],c,d))return!1}else{var j,k=t.keys(a);if(i=k.length,t.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!t.has(b,j)||!H(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};t.isEqual=function(a,b){return H(a,b)},t.isEmpty=function(a){return null==a||(B(a)&&(t.isArray(a)||t.isString(a)||t.isArguments(a))?0===a.length:0===t.keys(a).length)},t.isElement=function(a){return!(!a||1!==a.nodeType)},t.isArray=o||function(a){return"[object Array]"===m.call(a)},t.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},t.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){t["is"+a]=function(b){return m.call(b)==="[object "+a+"]"}}),t.isArguments(arguments)||(t.isArguments=function(a){return t.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(t.isFunction=function(a){return"function"==typeof a||!1}),t.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},t.isNaN=function(a){return t.isNumber(a)&&a!==+a},t.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===m.call(a)},t.isNull=function(a){return null===a},t.isUndefined=function(a){return void 0===a},t.has=function(a,b){return null!=a&&n.call(a,b)},t.noConflict=function(){return f._=g,this},t.identity=function(a){return a},t.constant=function(a){return function(){return a}},t.noop=function(){},t.property=y,t.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},t.matcher=t.matches=function(a){return a=t.extendOwn({},a),function(b){return t.isMatch(b,a)}},t.times=function(a,b,c){var d=Array(Math.max(0,a));b=u(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},t.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},t.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},J=t.invert(I),K=function(a){var b=function(b){return a[b]},c="(?:"+t.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};t.escape=K(I),t.unescape=K(J),t.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),t.isFunction(d)?d.call(a):d};var L=0;t.uniqueId=function(a){var b=++L+"";return a?a+b:b},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,P=function(a){return"\\"+N[a]};t.template=function(a,b,c){!b&&c&&(b=c),b=t.defaults({},b,t.templateSettings);var d=RegExp([(b.escape||M).source,(b.interpolate||M).source,(b.evaluate||M).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(d,function(b,c,d,e,h){return g+=a.slice(f,h).replace(O,P),f=h+b.length,c?g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?g+="'+\n((__t=("+d+"))==null?'':__t)+\n'":e&&(g+="';\n"+e+"\n__p+='"),b}),g+="';\n",b.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{var h=new Function(b.variable||"obj","_",g)}catch(e){throw e.source=g,e}var i=function(a){return h.call(this,a,t)},j=b.variable||"obj";return i.source="function("+j+"){\n"+g+"}",i},t.chain=function(a){var b=t(a);return b._chain=!0,b};var Q=function(a,b){return a._chain?t(b).chain():b};t.mixin=function(a){t.each(t.functions(a),function(b){var c=t[b]=a[b];t.prototype[b]=function(){var a=[this._wrapped];return k.apply(a,arguments),Q(this,c.apply(t,a))}})},t.mixin(t),t.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=h[a];t.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],Q(this,c)}}),t.each(["concat","join","slice"],function(a){var b=h[a];t.prototype[a]=function(){return Q(this,b.apply(this._wrapped,arguments))}}),t.prototype.value=function(){return this._wrapped},t.prototype.valueOf=t.prototype.toJSON=t.prototype.value,t.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return t})}.call(this),function(a,b){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){return j(this,"on",a,[b,c])&&b?(this._events||(this._events={}),(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this}),this):this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;i<k;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;l<m;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){return(this._listeningTo||(this._listeningTo={}))[b._listenId||(b._listenId=c.uniqueId("l"))]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;m<n;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){if(!b.set(b.parse(c,a),a))return!1;d&&d(b,c,a),b.trigger("sync",b,c,a)},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);if(d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d))return!1;j&&j(i,a,d),i.trigger("sync",i,a,d)},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1)}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;e<f;e++)(h=a[e]=this.get(a[e]))&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&!1!==b.sort,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!(o||!u||!w)&&[];for(e=0,f=a.length;e<f;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(!(h=a[e]=this._prepareModel(i,b)))continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;e<f;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;e<f;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;e<f;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;e<f;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],!1!==c&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a.class=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)}
;var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();if(b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!D.started)return!1;b&&!0!==b||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),define("underscoreContrib",["underscore"],function(a){(function(){function b(a){for(var b,c=/\[("|')(.+)\1\]|([^.\[\]]+)/g,d=[];null!==(b=c.exec(a));)d.push(b[2]||b[3]);return d}"object"==typeof exports&&(a=module.exports=require("underscore"));var c=Array.prototype.concat,d=Array.prototype;d.slice;a.mixin({accessor:function(a){return function(b){return b&&b[a]}},dictionary:function(a){return function(b){return a&&b&&a[b]}},selectKeys:function(b,d){return a.pick.apply(null,c.call([b],d))},kv:function(b,c){if(a.has(b,c))return[c,b[c]]},getPath:function(a,c){c="string"==typeof c?b(c):c;for(var d=-1,e=c.length;++d<e&&null!=a;)a=a[c[d]];return d===e?a:void 0},hasPath:function(c,d){d="string"==typeof d?b(d):d;for(var e=-1,f=d.length;++e<f&&a.isObject(c);){if(!(d[e]in c))return!1;c=c[d[e]]}return e===f},keysFromPath:b,pickWhen:function(b,c){var d={};return a.each(b,function(a,e){c(b[e])&&(d[e]=b[e])}),d},omitWhen:function(b,c){return a.pickWhen(b,function(a){return!c(a)})}})}).call(this)}),define("objectFactory",[],function(){"use strict";return{getObject:function(a){function b(b){return a.apply(this,b)}if(void 0!==a)return b.prototype=a.prototype,new b(_.rest(arguments))}}}),define("pricingConstants",[],function(){"use strict";return{FINANCE_PROVIDERS:{NONE:"None",OTHER:"Other",RCI:"RCI"},REPRESENTED_AS:{BEST_MONTHLY:"bestMonthly",FINANCE:"finance",FULL_PRICE:"fullPrice",LEASE:"lease"},PRICE_ITEM_ROLES:{PRIMARY:"primary",SECONDARY:"secondary"}}}),define("priceItem",["underscore","pricingConstants"],function(a,b){"use strict";var c=function(b){this.properties=a.pick(b,"priceCode","representedAs","showCalculatorLink")};return c.prototype.getPriceCode=function(){return this.properties.priceCode},c.prototype.getRepresentedAs=function(){return this.properties.representedAs},c.prototype.getShowCalculatorLink=function(){return this.properties.showCalculatorLink},c.prototype.isBestMonthlyPrice=function(){return this.getRepresentedAs()===b.REPRESENTED_AS.BEST_MONTHLY},c.prototype.isFinancePrice=function(){return this.getRepresentedAs()===b.REPRESENTED_AS.FINANCE},c.prototype.isFullPrice=function(){return this.getRepresentedAs()===b.REPRESENTED_AS.FULL_PRICE},c.prototype.isLeasePrice=function(){return this.getRepresentedAs()===b.REPRESENTED_AS.LEASE},c.prototype.toJSON=function(){return a.mapObject(this.properties,function(b){return a.isFunction(b&&b.toJSON)?b.toJSON():b})},c}),define("priceGroup",["underscore","objectFactory","priceItem"],function(a,b,c){"use strict";var d=function(d){this.properties=a.pick(d,"description","id","name"),d&&d.primaryPrice&&(this.properties.primaryPrice=b.getObject(c,d.primaryPrice)),d&&d.secondaryPrice&&d.secondaryPriceEnabled&&(this.properties.secondaryPrice=b.getObject(c,d.secondaryPrice)),d&&d.secondaryPriceEnabled&&(this.properties.secondaryPriceEnabled=d.secondaryPriceEnabled||!1)};return d.prototype.getDescription=function(){return this.properties.description},d.prototype.getId=function(){return this.properties.id},d.prototype.getName=function(){return this.properties.name},d.prototype.getPrimaryPriceItem=function(){return this.properties.primaryPrice},d.prototype.isSecondaryPriceItemEnabled=function(){return this.properties.secondaryPriceEnabled},d.prototype.getSecondaryPriceItem=function(){return this.isSecondaryPriceItemEnabled&&this.properties.secondaryPrice||{}},d.prototype.toJSON=function(){return a.mapObject(this.properties,function(b){return a.isFunction(b&&b.toJSON)?b.toJSON():b})},d}),define("priceGroups",["objectFactory","priceGroup"],function(a,b){"use strict";var c=function(c){this.items=_.map(c,function(c,d){var e=a.getObject(b,c);return _.has(e.properties,"id")||(e.properties.id=d),e})};return c.prototype.count=function(){return this.items.length},c.prototype.getById=function(a){return _.find(this.items,function(b){return b.getId()===a})},c.prototype.getByName=function(a){return _.find(this.items,function(b){return b.getName()===a})},c.prototype.toJSON=function(){return _.map(this.items,function(a){return a.toJSON()})},c}),define("storageManagerKeys",[],function(){"use strict";return{preferredDealerCity:{itemKey:"PreferredDealerCity"},preferredDealerState:{itemKey:"PreferredDealerState"},offerData:{itemKey:"offerData",dataKeys:{offerApplicability:"offerApplicability",offerCaveat:"offerCaveat",offerDetails:"offerDetails",offerHeadline:"offerHeadline",offerHighlight:"offerHighlight",offerHighlightedLegalNotice:"offerHighlightedLegalNotice",offerId:"offerId",offerLegalDetails:"offerLegalDetails",offerLegalDetailsHeadline:"offerLegalDetailsHeadline",offerModelName:"offerModelName",offerRegion:"offerRegion",offerStatus:"offerStatus",offerStrapline:"offerStrapline",offerTypeTitle:"offerTypeTitle",offerUrl:"offerUrl",offerValidity:"offerValidity"}},priceGroup:{itemKey:"priceGroup"},priceItem:{profileDataSession:"ProfileDataSession"},selectedBatteryLeaseOption:"SelectedBatteryLeaseOption",stickyFooterOpen:"StickyFooterOpen",loginWidgetData:{currentUrl:"currentUrl",loginSuccess:"loginSuccess",profileDataSession:"ProfileDataSession"},priceManager:{priceWarningReadStatus:"c_180-priceWarningRead"},vehicleDetails:{data:"c_160-localVehicleData"},dwsPreselectedDealer:{itemKey:"dwsPreselectedDealer",dataKeys:{dealerId:"dealerId",dealerUrl:"dealerUrl"}},multipleBrochures:{itemKey:"c_130"},vehicleDetailInformation:{itemKey:"c_141"},c_081_3:{statusKey:"c_081-3_Status"},inlineForm:{itemKey:"formSubmission",brochuresData:"brochuresData"},c_cfg:{itemKey:"c_cfg",profileDataSession:"ProfileDataSession"}}}),define("storageManager",["underscore"],function(a){"use strict";function b(a){y=$.extend({},x,a),y.localStorageAvailable=v(),y.sessionStorageAvailable=w()}function c(a,b,c){var c=c||{},d="",e="",f=c.customExpiryDate,j=c.mode,k={status:z.fail};switch(d=t(f),"sessionStorage"===j&&(d=null),j=r(j)){case"localStorage":e=s(b,d),k.status=g(a,e);break;case"sessionStorage":e=s(b),k.status=h(a,e);break;case"cookie":e=s(b),k.status=i(a,e,d)}return k}function d(b,c){var c=c||{},d=c.mode;if(u(b),a.isUndefined(d)||a.isNull(d))return e(b);switch(d){case"localStorage":return j(b);case"sessionStorage":return k(b);case"cookie":return l(b);default:return null}}function e(a){var b=j(a);return b||(b=k(a))||(b=l(a)),b}function f(a,b){var b=b||{};switch(r(b.mode)){case"localStorage":n(a);break;case"sessionStorage":o(a);break;case"cookie":p(a);break;default:return null}}function g(a,b){try{return localStorage.setItem(a,b),z.success}catch(e){return z.fail}}function h(a,b){try{return sessionStorage.setItem(a,b),z.success}catch(e){return z.fail}}function i(b,c,d){var e,f="";a.isNull(d)||(e=new Date,e.setTime(d),f=e.toUTCString());try{return document.cookie=encodeURI(b)+"="+c+"; expires="+f+"; path=/",z.success}catch(e){return z.fail}}function j(b){var c=localStorage.getItem(b),d=null;if(a.isNull(c))return null;try{d=JSON.parse(c)}catch(e){return null}return d.value}function k(b){var c=sessionStorage.getItem(b),d=null;if(a.isNull(c))return null;try{d=JSON.parse(c)}catch(e){return null}return d.value}function l(b){var c,d={};if(!b||!q(b))return null;c=decodeURI(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+encodeURI(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"));try{d=JSON.parse(c),a.isString(d)&&(d=m(d)?JSON.parse(d):{value:d})}catch(e){return null}return d.value}function m(a){try{JSON.parse(a)}catch(e){return!1}return!0}function n(a){localStorage.removeItem(a)}function o(a){sessionStorage.removeItem(a)}function p(a){var b=new Date(0);if(!a||!q(a))return null;document.cookie=encodeURI(a)+"=; expires="+b.toUTCString()+"; path=/"}function q(a){return new RegExp("(?:^|;\\s*)"+encodeURI(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}function r(b){return(a.isUndefined(b)||a.isNull(b))&&(b="localStorage"),"localStorage"!==b||y.localStorageAvailable?"sessionStorage"!==b||y.sessionStorageAvailable||(b="cookie"):b="cookie",b}function s(b,c){var d={};return d.value=b,a.isUndefined(c)||(d.expiryDate=c),JSON.stringify(d)}function t(b){var c=new Date,d=new Date;return b instanceof Date?b.getTime():a.isNull(b)?null:d.setDate(c.getDate()+y.defaultLifetime)}function u(b){var c=(new Date).getTime(),d={};if(!y.localStorageAvailable)return null;(d=localStorage[b])&&(d=JSON.parse(d),!a.isUndefined(d.expiryDate)&&d.expiryDate<c&&n(b))}function v(){return Modernizr.localstorage}function w(){return Modernizr.sessionstorage}var x={localStorageAvailable:null,sessionStorageAvailable:null,defaultLifetime:14},y=null,z={success:"success",fail:"fail"};return{init:b,saveItem:c,loadItem:d,deleteItem:f}}),define("heliosAppContext",["objectFactory","priceGroups","storageManagerKeys","storageManager","pricingConstants"],function(a,b,c,d,e){"use strict";var f=function(a){if(!a)throw"Argument null exception: you must define `options` for `HeliosAppContext`";if(!a.HELIOS)throw"Invalid argument exception: you must define `options.HELIOS` for `HeliosAppContext`";this.options=a};return f.prototype.getCountryCode=function(){return this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.countryCode},f.prototype.getPriceGroups=function(){var c;return this._priceGroups||(c=this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&this.options.HELIOS.config.common.pricing.priceGroups,this._priceGroups=a.getObject(b,c)),this._priceGroups},f.prototype.getPriceLabel=function(){var a;return this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&this.options.HELIOS.config.common.pricing.strings&&(a=this.options.HELIOS.config.common.pricing.strings.priceLabel),a},f.prototype.getUserSelectedPriceGroup=function(){var a,b,e;return this.isPriceGroupSwitchingEnabled()&&(e=d.loadItem(c.priceGroup.itemKey)),e&&(a=this.getPriceGroups()),a&&(b=a.getByName(e)),b},f.prototype.isPriceGroupSwitchingEnabled=function(){return!!(this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&this.options.HELIOS.config.common.pricing.isPriceGroupSwitchingEnabled)},f.prototype.getFinanceProvider=function(){if(this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&this.options.HELIOS.config.common.pricing.financeProvider)return this.options.HELIOS.config.common.pricing.financeProvider},f.prototype.isFinanceProviderRci=function(){return this.getFinanceProvider()===e.FINANCE_PROVIDERS.RCI},f.prototype.isFinanceProviderOther=function(){return this.getFinanceProvider()===e.FINANCE_PROVIDERS.OTHER},f.prototype.isFinanceProviderNone=function(){return this.getFinanceProvider()===e.FINANCE_PROVIDERS.NONE},f.prototype.getExternalCalculatorErrorMessage=function(){if(this.options.HELIOS&&this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&this.options.HELIOS.config.common.pricing.strings&&this.options.HELIOS.config.common.pricing.strings.externalCalculatorErrorTitle&&this.options.HELIOS.config.common.pricing.strings.externalCalculatorErrorContent)return"<h2>"+this.options.HELIOS.config.common.pricing.strings.externalCalculatorErrorTitle+"</h2><h3>"+this.options.HELIOS.config.common.pricing.strings.externalCalculatorErrorContent+"</h3>"},f.prototype.getCurrencyCode=function(){if(this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.currencyCode)return this.options.HELIOS.config.common.currencyCode},f.prototype.getAemAdminResourcePath=function(){if(this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.api&&this.options.HELIOS.config.common.api.aem&&this.options.HELIOS.config.common.api.aem.secureResourcePath)return this.options.HELIOS.config.common.api.aem.secureResourcePath},f}),define("jqueryUtilityPlugins",["jquery"],function(a){"use strict";a.fn.isElementVisible=function(){var a,b,c=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,e=function(a,b){return document.elementFromPoint(a,b)};return 0!==this.length&&(a=this.get(0),b=a.getBoundingClientRect(),!(b.right<0||b.bottom<0||b.left>c||b.top>d)&&(a.contains(e(b.left,b.top))||a.contains(e(b.right,b.top))||a.contains(e(b.right,b.bottom))||a.contains(e(b.left,b.bottom))))},a.fn.serializeObject=function(){var b,c,d={};return a.each(this.serializeArray(),function(e,f){b=f.name,c=f.value,d[b]=void 0===d[b]?c:a.isArray(d[b])?d[b].concat(c):[d[b],c]}),d},a.escapeHtml=function(a){var b={"&":"&amp;",'"':"&quot;","'":"&#039;","<":"&lt;",">":"&gt;"};return(a+"").replace(/[<>&"']/g,function(a){return b[a]})},a.padWithZeros=function(b,c){var d=b+"";return d.length<c?a.padWithZeros("0"+d,c):d},a.uniqueElementId=function(b){var c,d,e,f="";return void 0!==b&&b.length&&(b,c=[],e=a("[id^="+b+"]"),e.each(function(){c.push(a(this).attr("id"))}),d=a.map(c,function(a){var b=a.split("-").pop();return parseInt(b,10)}),d.length||(d=[0]),f=b+(_.max(d)+1)),f},a.isNestedProp=function(a,b){var c,d;for(c=0;c<b.length;c++){if(d=b[c],!a||!a.hasOwnProperty(d))return!1;a=a[d]}return!0},a.getDataFromObject=function(b,c){var d;return a.each(c,function(a,c){if(0===a&&(d=b),!d.hasOwnProperty(c))return d=void 0,!1;d=d[c]}),d}}),function(a,b){"$:nomunge";function c(a){return"string"==typeof a}function d(a){var b=r.call(arguments,1);return function(){return a.apply(this,b.concat(r.call(arguments)))}}function e(a){return a.replace(/^[^#]*#?(.*)$/,"$1")}function f(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(d,e,f,g,h){var i,k,m,n,o;return g!==j?(m=f.match(d?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),o=m[3]||"",2===h&&c(g)?k=g.replace(d?E:D,""):(n=l(m[2]),g=c(g)?l[d?y:x](g):g,k=2===h?g:1===h?a.extend({},g,n):a.extend({},n,g),k=t(k,!0),d&&(k=k.replace(q,s))),i=m[1]+(d?"#":k||!m[1]?"?":"")+k+o):i=e(f!==j?f:b[A][B]),i}function h(a,b,d){return b===j||"boolean"==typeof b?(d=b,b=t[a?y:x]()):b=c(b)?b.replace(a?E:D,""):b,l(b,d)}function i(b,d,e,f){return c(e)||"object"==typeof e||(f=e,e=d,d=j),this.each(function(){var c=a(this),g=d||p()[(this.nodeName||"").toLowerCase()]||"",h=g&&c.attr(g)||"";c.attr(g,t[b](h,e,f))})}var j,k,l,m,n,o,p,q,r=Array.prototype.slice,s=decodeURIComponent,t=a.param,u=a.bbq=a.bbq||{},v=a.event.special,w="hashchange",x="querystring",y="fragment",z="elemUrlAttr",A="location",B="href",C="src",D=/^.*\?|#.*$/g,E=/^.*\#/,F={};t[x]=d(g,0,f),t[y]=k=d(g,1,e),k.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);q=new RegExp(c.join("|"),"g")},k.noEscape(",/"),a.deparam=l=function(b,c){var d={},e={true:!0,false:!1,null:null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=s(h[0]),k=d,l=0,m=i.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===h.length)if(g=s(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?j:e[g]!==j?e[g]:g),n)for(;l<=n;l++)i=""===m[l]?k.length:m[l],k=k[i]=l<n?k[i]||(m[l+1]&&isNaN(m[l+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):d[i]!==j?d[i]=[d[i],g]:d[i]=g;else i&&(d[i]=c?j:"")}),d},l[x]=d(h,0),l[y]=m=d(h,1),a[z]||(a[z]=function(b){return a.extend(F,b)})({a:B,base:B,iframe:C,img:C,input:C,form:"action",link:B,script:C}),p=a[z],a.fn[x]=d(i,x),a.fn[y]=d(i,y),u.pushState=n=function(a,d){c(a)&&/^#/.test(a)&&d===j&&(d=2);var e=a!==j,f=k(b[A][B],e?a:{},e?d:2);b[A][B]=f+(/#/.test(f)?"":"#")},u.getState=o=function(a,b){return a===j||"boolean"==typeof a?m(a):m(b)[a]},u.removeState=function(b){var c={};b!==j&&(c=o(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]})),n(c,2)},v[w]=a.extend(v[w],{add:function(b){function c(a){var b=a[y]=k();a.getState=function(a,c){return a===j||"boolean"==typeof a?l(b,a):l(b,c)[a]},d.apply(this,arguments)}var d;if(a.isFunction(b))return d=b,c;d=b.handler,b.handler=c}})}(jQuery,this),function(a,b,c){"$:nomunge";function d(a){return a=a||b[g][i],a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f=a.event.special,g="location",h="hashchange",i="href",j=(a.browser,document.documentMode,!1),k="on"+h in b&&!j;a[h+"Delay"]=100,f[h]=a.extend(f[h],{setup:function(){if(k)return!1;a(e.start)},teardown:function(){if(k)return!1;a(e.stop)}}),e=function(){function c(){k=l=function(a){return a},j&&(f=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,l=function(){return d(f.document[g][i])},(k=function(a,b){if(a!==b){var c=f.document;c.open().close(),c[g].hash="#"+a}})(d()))}var e,f,k,l,m={};return m.start=function(){if(!e){var f=d();k||c(),function c(){var j=d(),m=l(f);j!==f?(k(f=j,m),a(b).trigger(h)):m!==f&&(b[g][i]=b[g][i].replace(/#.*/,"")+"#"+m),e=setTimeout(c,a[h+"Delay"])}()}},m.stop=function(){f||(e&&clearTimeout(e),e=0)},m}()}(jQuery,this),define("jqueryBbq",["jquery"],function(){}),define("keyCodeConstants",[],function(){"use strict";return{ALT:18,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,BACKSPACE:8,CAPS_LOCK:20,CTRL:17,DELETE:46,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,PAGE_DOWN:34,PAGE_UP:33,PAUSE_BREAK:19,SHIFT:16,SPACE:32,TAB:9}}),define("customSelect",["jquery","keyCodeConstants"],function(a,b){function c(a){a.on("change",d).on("focus",e).on("blur",f).on("keyup",h)}function d(){var b,c,d=a(this);b=d.find("option:selected"),c=b.html()||d.attr("data-defaulttext")||"&nbsp;",d.siblings(j).html(c)}function e(){a(this).parent().addClass(k)}function f(){a(this).parent().removeClass(k)}function g(b){var e=a(i,b).find("select");c(e),e.each(d)}function h(a){a.which!==b.ARROW_DOWN&&a.which!==b.ARROW_UP||d.call(this)}var i=".custom-selectbox",j=".selectedValue",k="has-focus";return{init:g}}),define("customTooltip",["jquery"],function(a){"use strict";function b(b){var h={};g=a.extend({},e,b),h={tooltipButtonText:g.tooltipButton.replace(".",""),tooltipContentText:g.tooltipContent.replace(".","")},a.extend(g,h),a(g.tooltip).each(function(){new d(a.extend({$tooltip:a(this)},g))}),"ontouchstart"in document.documentElement&&(f="touchstart"),a("body").on("click touchstart",function(b){!a(b.target).hasClass(g.tooltipButtonText)&&a(g.tooltip).hasClass("active")&&(a(b.target).parent().hasClass(g.tooltipContentText)||a(b.target).hasClass(g.tooltipContentText)||c(g))})}function c(b){a(b.tooltipButton).removeClass("active"),a(b.tooltip).removeClass("active"),a(b.tooltipContent).attr("data-open",!1)}var d,e={tooltip:".c_042B , .helios-tooltip",tooltipButton:".tooltip-button",tooltipContent:".tooltip-content"},f="click",g=null;return d=function(b){if(!(this instanceof d))return new d(b);this.options=b,this.options.$tooltip.find(this.options.tooltipButton).each(_.bind(function(b,c){a(c).on(f,_.bind(this.onClickTooltipHandler,this))},this))},d.prototype.onClickTooltipHandler=function(b){if(a(b.target).hasClass("active"))return b.preventDefault(),c(this.options),!1;c(this.options),this.options.$tooltip.find(this.options.tooltipButton).addClass("active"),this.options.$tooltip.addClass("active"),this.options.$tooltip.find(this.options.tooltipContent).each(function(b,c){var d="true"===a(c).attr("data-open");a(c).attr("data-open",!d)})},d.prototype.onMouseoutTooltipHandler=function(b){this.options.$tooltip.find(this.options.tooltipButton).removeClass("active"),this.options.$tooltip.removeClass("active"),this.options.$tooltip.find(this.options.tooltipContent).each(function(b,c){a(c).attr("data-open",!1)})},{init:b}}),define("priceCode",[],function(){"use strict";var a=function(a){this.properties=_.pick(a,"currency","description","disclaimer","id","includesTax","label")};return a.prototype.getCurrency=function(){return this.properties.currency},a.prototype.getDescription=function(){return this.properties.description},a.prototype.getDisclaimer=function(){return this.properties.disclaimer},a.prototype.getId=function(){return this.properties.id},a.prototype.getIncludesTax=function(){return this.properties.includesTax},a.prototype.getLabel=function(){return this.properties.label},a}),define("priceCodes",["underscore","objectFactory","priceCode"],function(a,b,c){"use strict";var d=function(d){this.items=a.map(d,function(d,e){var f=b.getObject(c,d);return a.has(f.properties,"id")||(f.properties.id=e),f})};return d.prototype.getById=function(b){return a.find(this.items,function(a){return a.getId()===b})},d}),function(a,b){"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define("loglevel",b):a.log=b()}(this,function(){function a(a){return typeof console!==i&&(void 0!==console[a]?b(console,a):void 0!==console.log?b(console,"log"):h)}function b(a,b){var c=a[b];if("function"==typeof c.bind)return c.bind(a);try{return Function.prototype.bind.call(c,a)}catch(e){return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}function c(a,b){return function(){typeof console!==i&&(d(b),g[a].apply(g,arguments))}}function d(a){for(var b=0;b<j.length;b++){var c=j[b];g[c]=b<a?h:g.methodFactory(c,a)}}function e(a){var b=(j[a]||"silent").toUpperCase();try{return void(window.localStorage.loglevel=b)}catch(c){}try{window.document.cookie="loglevel="+b+";"}catch(c){}}function f(){var a;try{a=window.localStorage.loglevel}catch(b){}if(typeof a===i)try{a=/loglevel=([^;]+)/.exec(window.document.cookie)[1]}catch(b){}void 0===g.levels[a]&&(a="SILENT"),g.setLevel(g.levels[a])}var g={},h=function(){},i="undefined",j=["table","trace","debug","info","warn","error"];g.levels={TABLE:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,SILENT:6},g.methodFactory=function(b,d){return a(b)||c(b,d)},g.setLevel=function(a){if("string"==typeof a&&void 0!==g.levels[a.toUpperCase()]&&(a=g.levels[a.toUpperCase()]),!("number"==typeof a&&a>=0&&a<=g.levels.SILENT))throw"log.setLevel() called with invalid level: "+a;if(e(a),d(a),typeof console===i&&a<g.levels.SILENT)return"No console available for logging"},g.enableAll=function(){g.setLevel(g.levels.TRACE)},g.disableAll=function(){g.setLevel(g.levels.SILENT)};var k=typeof window!==i?window.log:void 0;return g.noConflict=function(){return typeof window!==i&&window.log===g&&(window.log=k),g},f(),g}),define("heliosObject",[],function(){"use strict";return window&&window.HELIOS}),define("logger",["loglevel","heliosObject"],function(a,b){"use strict";function c(a){if(!(this instanceof c))return new c(a);this.defaults={level:b.config.common.logging.level,prefix:"HELIOS Log",separator:" "},this.options=a||{},this.settings=$.extend(!0,{},this.defaults,this.options),this.init()}return c.prototype.init=function(){},c.prototype._prefixAndLogMessage=function(b,c){var d="["+this.settings.prefix+"]";"object"!=typeof b?c(d+this.settings.separator+b):(a.table===c?a.debug(d):c(d),c(b))},c.prototype.trace=function(b){return this._prefixAndLogMessage(b,a.trace),this},c.prototype.info=function(b){return this._prefixAndLogMessage(b,a.info),this},c.prototype.table=function(b){return this._prefixAndLogMessage(b,a.table),this},c.prototype.debug=function(b){return this._prefixAndLogMessage(b,a.debug),this},c.prototype.warn=function(b){return this._prefixAndLogMessage(b,a.warn),this},c.prototype.error=function(b){return this._prefixAndLogMessage(b,a.error),this},c}),define("profileManager",["jquery","underscore","storageManager","logger"],function(a,b,c,d){"use strict";function e(b){w=a.extend({},v,b),u=w.HELIOS.config.common.api.storageSettings||{},c.init(),t=new d({prefix:"ProfileManager"})}function f(a){return k("storageData",u,a)}function g(a,b){return a.dealerLocation||a.location||a.postalCode?l("storageData",u,a,b,w.events.locationChange):l("storageData",u,a,b)}function h(d){var e;d?(b.isArray(d)||(d=[d]),a.each(d,function(a,d){if(u.hasOwnProperty(d))switch(u[d]){case"LOCAL_STORAGE":e=c.loadItem(w.storageKeyLocal,{mode:"localStorage"}),b.isNull(e)||(e.hasOwnProperty("storageData")&&delete e.storageData[d],s(e));break;case"SESSION_STORAGE":e=c.loadItem(w.storageKeySession,{mode:"sessionStorage"}),b.isNull(e)||(e.hasOwnProperty("storageData")&&delete e.storageData[d],q(e))}})):(s(),q())}function i(a,b){return k("storageData",b,a)}function j(a){m(a,w.events.locationChange)}function k(b,d,e){var f,g=a.Deferred(),h=[],i=c.loadItem(w.storageKeySession,{mode:"sessionStorage"})||{},j=c.loadItem(w.storageKeyLocal,{mode:"localStorage"})||{},k=c.loadItem(w.storageKeySession,{mode:"cookie"})||{},l=c.loadItem(w.storageKeyLocal,{mode:"cookie"})||{},i=i[b]||{},j=j[b]||{},k=k[b]||{},l=l[b]||{},m=a.extend(!0,{},k,l),o={};for(f in d)if(d.hasOwnProperty(f))switch(d[f]){case"SESSION_STORAGE":i.hasOwnProperty(f)?o[f]=i[f]:m.hasOwnProperty(f)&&(o[f]=m[f]);break;case"LOCAL_STORAGE":j.hasOwnProperty(f)?o[f]=j[f]:m.hasOwnProperty(f)&&(o[f]=m[f]);break;case"SERVER_STORAGE":h.push(f)}return e&&h.length?n(e,h).done(function(b){o=a.extend({},o,b),g.resolve(o)}):g.resolve(o),!e&&h.length&&t.warn("URL required to get data from SERVER_STORAGE but was not passed"),g.promise()}function l(c,d,e,f,g){function h(){n.resolve(j[c]),a(HELIOS).trigger(g,[j[c],c])}var i,j,k={},l={},m={},g=g||w.events.dataChange,n=a.Deferred();k[c]={},l[c]={},m[c]={};for(i in e)if(e.hasOwnProperty(i)&&d.hasOwnProperty(i))switch(d[i]){case"SESSION_STORAGE":k[c][i]=e[i];break;case"LOCAL_STORAGE":l[c][i]=e[i];break;case"SERVER_STORAGE":m[c][i]=e[i]}return b.isEmpty(k[c])||p(k),b.isEmpty(l[c])||r(l),j=a.extend(!0,{},k,l),!f||b.isEmpty(m[c])?h():o(f,m[c]).done(function(b){j=a.extend(!0,{},j,b),h()}),f||b.isEmpty(m[c])||t.warn("URL required to save data to SERVER_STORAGE but was not passed"),n.promise()}function m(b,c){c=c||w.events.dataChange,a(HELIOS).on(c,b)}function n(b,c){var d,e="";return a.each(c,function(a,b){e+="_hls_key="+encodeURIComponent(b)+"&"}),/[?]/.test(b)?b+="&"+e:b+="?"+e,d=b.substr(b.length-1),"&"===d&&(b=b.substr(0,b.length-1)),a.get(b)}function o(b,c){return a.ajax({url:b,type:"post",data:c,dataType:"json"})}function p(b){var d=c.loadItem(w.storageKeySession,{mode:"sessionStorage"});return b=a.extend(!0,{},d,b),q(b)}function q(a){return c.saveItem(w.storageKeySession,a,{mode:"sessionStorage"})}function r(b){var d=c.loadItem(w.storageKeyLocal,{mode:"localStorage"});return b=a.extend(!0,{},d,b),s(b)}function s(a){return c.saveItem(w.storageKeyLocal,a,{mode:"localStorage"})}var t,u,v={HELIOS:HELIOS,storageKeyLocal:"ProfileDataLocal",storageKeySession:"ProfileDataSession",events:{locationChange:"profileManager.locationChange",dataChange:"profileManager.dataChange"}},w=null;return{init:e,getData:k,setData:l,onChange:m,onLocationChange:j,getSavedData:f,getDataFallback:i,saveData:g,deleteData:h}}),define("placeholderShim",["jquery"],function(a){function b(){return"placeholder"in document.createElement("input")}function c(a,b){var c=a;b?(a.on("focus",b,d).on("blur",b,e),c=a.find(b)):a.on("focus",d).on("blur",e),c.each(function(a,b){e.call(b)})}function d(b){var c=a(this),d=c.attr("placeholder");c.val()===d&&c.val("").removeClass(h)}function e(b){var c=a(this),d=c.attr("placeholder")
;""===c.val()&&c.val(d).addClass(h)}function f(a,d){return void 0===g&&(g=b()),!1===g&&c(a,d),g}var g,h="showing-placeholder";return{init:f}}),function(a,b){var c=b(a,a.document);a.lazySizes=c,"object"==typeof module&&module.exports?module.exports=c:"function"==typeof define&&define.amd&&define("lazysizes",c)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d=b.documentElement,e=a.Date,f=a.HTMLPictureElement,g="addEventListener",h="getAttribute",i=a[g],j=a.setTimeout,k=a.requestAnimationFrame||j,l=a.requestIdleCallback,m=/^picture$/i,n=["load","error","lazyincluded","_lazyloaded"],o={},p=Array.prototype.forEach,q=function(a,b){return o[b]||(o[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),o[b].test(a[h]("class")||"")&&o[b]},r=function(a,b){q(a,b)||a.setAttribute("class",(a[h]("class")||"").trim()+" "+b)},s=function(a,b){var c;(c=q(a,b))&&a.setAttribute("class",(a[h]("class")||"").replace(c," "))},t=function(a,b,c){var d=c?g:"removeEventListener";c&&t(a,b),n.forEach(function(c){a[d](c,b)})},u=function(a,c,d,e,f){var g=b.createEvent("CustomEvent");return g.initCustomEvent(c,!e,!f,d||{}),a.dispatchEvent(g),g},v=function(b,d){var e;!f&&(e=a.picturefillLatest||c.pf)?e({reevaluate:!0,elements:[b]}):d&&d.src&&(b.src=d.src)},w=function(a,b){return(getComputedStyle(a,null)||{})[b]},x=function(a,b,d){for(d=d||a.offsetWidth;d<c.minSize&&b&&!a._lazysizesWidth;)d=b.offsetWidth,b=b.parentNode;return d},y=function(){var a,c,d=[],e=[],f=d,g=function(){var b=f;for(f=d.length?e:d,a=!0,c=!1;b.length;)b.shift()();a=!1},h=function(d,e){a&&!e?d.apply(this,arguments):(f.push(d),c||(c=!0,(b.hidden?j:k)(g)))};return h._lsFlush=g,h}(),z=function(a,b){return b?function(){y(a)}:function(){var b=this,c=arguments;y(function(){a.apply(b,c)})}},A=function(a){var b,c=0,d=666,f=d,g=function(){b=!1,c=e.now(),a()},h=l?function(){l(g,{timeout:f}),f!==d&&(f=d)}:z(function(){j(g)},!0);return function(a){var d;(a=!0===a)&&(f=44),b||(b=!0,d=125-(e.now()-c),d<0&&(d=0),a||d<9&&l?h():j(h,d))}},B=function(a){var b,c,d=99,f=function(){b=null,a()},g=function(){var a=e.now()-c;a<d?j(g,d-a):(l||f)(f)};return function(){c=e.now(),b||(b=j(g,d))}},C=function(){var f,k,l,n,o,x,C,E,F,G,H,I,J,K,L,M=/^img$/i,N=/^iframe$/i,O="onscroll"in a&&!/glebot/.test(navigator.userAgent),P=0,Q=0,R=0,S=-1,T=function(a){R--,a&&a.target&&t(a.target,T),(!a||R<0||!a.target)&&(R=0)},U=function(a,c){var e,f=a,g="hidden"==w(b.body,"visibility")||"hidden"!=w(a,"visibility");for(F-=c,I+=c,G-=c,H+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=d;)(g=(w(f,"opacity")||1)>0)&&"visible"!=w(f,"overflow")&&(e=f.getBoundingClientRect(),g=H>e.left&&G<e.right&&I>e.top-1&&F<e.bottom+1);return g},V=function(){var a,e,g,i,j,m,n,p,q;if((o=c.loadMode)&&R<8&&(a=f.length)){e=0,S++,null==K&&("expand"in c||(c.expand=d.clientHeight>500&&d.clientWidth>500?500:370),J=c.expand,K=J*c.expFactor),Q<K&&R<1&&S>2&&o>2&&!b.hidden?(Q=K,S=0):Q=o>1&&S>1&&R<6?J:P;for(;e<a;e++)if(f[e]&&!f[e]._lazyRace)if(O)if((p=f[e][h]("data-expand"))&&(m=1*p)||(m=Q),q!==m&&(C=innerWidth+m*L,E=innerHeight+m,n=-1*m,q=m),g=f[e].getBoundingClientRect(),(I=g.bottom)>=n&&(F=g.top)<=E&&(H=g.right)>=n*L&&(G=g.left)<=C&&(I||H||G||F)&&(l&&R<3&&!p&&(o<3||S<4)||U(f[e],m))){if(ba(f[e]),j=!0,R>9)break}else!j&&l&&!i&&R<4&&S<4&&o>2&&(k[0]||c.preloadAfterLoad)&&(k[0]||!p&&(I||H||G||F||"auto"!=f[e][h](c.sizesAttr)))&&(i=k[0]||f[e]);else ba(f[e]);i&&!j&&ba(i)}},W=A(V),X=function(a){r(a.target,c.loadedClass),s(a.target,c.loadingClass),t(a.target,Z)},Y=z(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(e){a.src=b}},_=function(a){var b,d,e=a[h](c.srcsetAttr);(b=c.customMedia[a[h]("data-media")||a[h]("media")])&&a.setAttribute("media",b),e&&a.setAttribute("srcset",e),b&&(d=a.parentNode,d.insertBefore(a.cloneNode(),a),d.removeChild(a))},aa=z(function(a,b,d,e,f){var g,i,k,l,o,q;(o=u(a,"lazybeforeunveil",b)).defaultPrevented||(e&&(d?r(a,c.autosizesClass):a.setAttribute("sizes",e)),i=a[h](c.srcsetAttr),g=a[h](c.srcAttr),f&&(k=a.parentNode,l=k&&m.test(k.nodeName||"")),q=b.firesLoad||"src"in a&&(i||g||l),o={target:a},q&&(t(a,T,!0),clearTimeout(n),n=j(T,2500),r(a,c.loadingClass),t(a,Z,!0)),l&&p.call(k.getElementsByTagName("source"),_),i?a.setAttribute("srcset",i):g&&!l&&(N.test(a.nodeName)?$(a,g):a.src=g),(i||l)&&v(a,{src:g})),a._lazyRace&&delete a._lazyRace,s(a,c.lazyClass),y(function(){(!q||a.complete&&a.naturalWidth>1)&&(q?T(o):R--,X(o))},!0)}),ba=function(a){var b,d=M.test(a.nodeName),e=d&&(a[h](c.sizesAttr)||a[h]("sizes")),f="auto"==e;(!f&&l||!d||!a.src&&!a.srcset||a.complete||q(a,c.errorClass))&&(b=u(a,"lazyunveilread").detail,f&&D.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,R++,aa(a,b,f,e,d))},ca=function(){if(!l){if(e.now()-x<999)return void j(ca,999);var a=B(function(){c.loadMode=3,W()});l=!0,c.loadMode=3,W(),i("scroll",function(){3==c.loadMode&&(c.loadMode=2),a()},!0)}};return{_:function(){x=e.now(),f=b.getElementsByClassName(c.lazyClass),k=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),L=c.hFac,i("scroll",W,!0),i("resize",W,!0),a.MutationObserver?new MutationObserver(W).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d[g]("DOMNodeInserted",W,!0),d[g]("DOMAttrModified",W,!0),setInterval(W,999)),i("hashchange",W,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b[g](a,W,!0)}),/d$|^c/.test(b.readyState)?ca():(i("load",ca),b[g]("DOMContentLoaded",W),j(ca,2e4)),f.length?(V(),y._lsFlush()):W()},checkElems:W,unveil:ba}}(),D=function(){var a,d=z(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),m.test(b.nodeName||""))for(e=b.getElementsByTagName("source"),f=0,g=e.length;f<g;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||v(a,c.detail)}),e=function(a,b,c){var e,f=a.parentNode;f&&(c=x(a,f,c),e=u(a,"lazybeforesizes",{width:c,dataAttr:!!b}),e.defaultPrevented||(c=e.detail.width)&&c!==a._lazysizesWidth&&d(a,f,e,c))},f=function(){var b,c=a.length;if(c)for(b=0;b<c;b++)e(a[b])},g=B(f);return{_:function(){a=b.getElementsByClassName(c.autosizesClass),i("resize",g)},checkElems:g,updateElem:e}}(),E=function(){E.i||(E.i=!0,D._(),C._())};return function(){var b,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2};c=a.lazySizesConfig||a.lazysizesConfig||{};for(b in d)b in c||(c[b]=d[b]);a.lazySizesConfig=c,j(function(){c.init&&E()})}(),{cfg:c,autoSizer:D,loader:C,init:E,uP:v,aC:r,rC:s,hC:q,fire:u,gW:x,rAF:y}}}),define("objCreateShim",[],function(){"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b})}),define("touchFixedPositionShim",["jquery"],function(a){"use strict";function b(){c()&&(i=a("body"),d())}function c(){return Modernizr.touch}function d(){i.on("focus."+j,":input",f),i.on("blur."+j,":input",g)}function e(){i&&(i.off("focus."+j,":input"),i.off("blur."+j,":input"))}function f(){i.trigger(h().inputFocus)}function g(){i.trigger(h().inputBlur)}function h(){var a,b={};for(a in k)b[a]=k[a]+"."+j;return b}var i,j="touch-fixed-position-shim",k={inputFocus:"input-focus",inputBlur:"input-blur"};return{init:b,getEventNames:h,unbindEvents:e}}),define("locationOriginShim",[],function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}),define("shimLoader",["jquery","placeholderShim","pictureFill","pictureFillLatest","lazysizes","objCreateShim","touchFixedPositionShim","locationOriginShim"],function(a,b,c,d,e,f,g,h){return{init:function(){b.init(a("input:text")),g.init()}}}),define("stateStore",["storageManager","underscore"],function(a,b){"use strict";function c(a){this.settings=b.extend({},d,a),this.namespace=this.settings.namespace}var d={namespace:"state"};return c.prototype.init=function(){return!!this.settings.HELIOS&&(this.settings.HELIOS[this.namespace]=this.settings.HELIOS[this.namespace]||{},a.init(),this.currentStateData=this.get(),this.hydrate(),this)},c.prototype.get=function(){return a.loadItem(this.namespace)||{}},c.prototype.set=function(b){return a.saveItem(this.namespace,b)},c.prototype.update=function(){this.set(this.currentStateData)},c.prototype.hydrate=function(){b.extend(this.settings.HELIOS[this.namespace],this.currentStateData)},c.prototype.save=function(a,c){if(b.isUndefined(a)||!a.length||!b.isObject(c))return!1;this.currentStateData[a]=this.currentStateData[a]||{},b.extend(this.currentStateData[a],c),this.update(),this.hydrate()},c.prototype.remove=function(a){if(!a)return!1;this.currentStateData[a]={},this.update(),this.hydrate()},c}),define("stateStoreFactory",["stateStore","underscore"],function(a,b){"use strict";var c={namespace:"state"};return{instances:[],create:function(d,e){var f,g=b.extend({},c,d),h=b.findWhere(this.instances,{id:g.namespace});return b.isObject(h)?h.instance:(f=new a(g),(e||b.isUndefined(e))&&f.init(),this.instances.push({id:g.namespace,instance:f}),f)}}}),define("apigeeConfig",["jquery","underscore","storageManager","logger","heliosObject"],function(a,b,c,d,e){var f=new d({prefix:"ApigeeConfig"});c.init();var g="apigeeConfig",h={},i={};return i.saveConfigToLocalStorage=function(){return f.debug("Saving config to local storage"),c.saveItem(g,{apiKey:h.apiKey,languageCode:h.languageCode,countryCode:h.countryCode}),this},i.clearConfigFromLocalStorage=function(){return f.debug("Clearing config from local storage"),c.deleteItem(g,"localStorage"),this},i.loadConfigFromLocal=function(){var a=c.loadItem(g);return!(!a||!a.hasOwnProperty("apiKey"))&&(f.debug("Loading config from local storage"),h.apiKey=a.apiKey,h.languageCode=a.languageCode,h.countryCode=a.countryCode,!0)},i.getApigeeUrl=function(){return this.getUseProxy()?h.apigeeUrl+h.proxyPrefix:h.apigeeUrl},i.setApigeeUrl=function(a){return h.apigeeUrl=this.transformApigeeUrl(a),this},i.getApiKey=function(){return h.apiKey},i.setApiKey=function(a){return h.apiKey=a,this},i.getClientKey=function(){return h.clientKey},i.setClientKey=function(a){return h.clientKey=a,this},i.getCountryCode=function(){return h.countryCode},i.setCountryCode=function(a){return h.countryCode=a,this},i.getLanguageCode=function(){return h.languageCode},i.setLanguageCode=function(a){return h.languageCode=a,this},i.isAuthorised=function(){return Boolean(h.apiKey)},i.getUseProxy=function(){return this.useProxy},i.setUseProxy=function(a){return this.useProxy=a,this},i.setProxyPrefix=function(a){return h.proxyPrefix=a,this},i.getProxyPrefix=function(){return h.proxyPrefix},i.transformApigeeUrl=function(a){return"/"===a.slice(-1)?a.slice(0,-1):a},i.isStale=function(a,b){return h.countryCode!==a||h.languageCode!==b},(a("html").hasClass("ltie9")||a("html").hasClass("ie9"))&&i.setUseProxy(!0),i.clearConfigFromLocalStorage(),i.setProxyPrefix("/v2/proxy"),i.setApiKey(e.config.common.api.apigee.apiKey),i.setClientKey(e.config.common.api.apigee.clientKey),i.setCountryCode(e.config.common.api.apigee.countryCode),i.setLanguageCode(e.config.common.api.apigee.languageCode),i.getUseProxy()&&!b.isEmpty(e.config.common.api.apigee.aemProxyUrl)?i.setApigeeUrl(e.config.common.api.apigee.aemProxyUrl):i.setApigeeUrl(e.config.common.api.apigee.url),(a("html").hasClass("ltie9")||a("html").hasClass("ie9"))&&i.setUseProxy(!0),b.create(i)}),define("apigeeAuthoriser",["jquery","underscore","stateStoreFactory","apigeeConfig","logger"],function(a,b,c,d,e){var f=new e({prefix:"ApigeeAuthoriser"}),g=401,h={authInProgress:!1,authorisationUrlPath:"/v2/authorisation"};return h.authorise=function(){var b=this;return this.authInProgress?(f.debug("Authorisation request blocked - request already in progress"),this.dfd.promise()):(f.debug("Authorisation request not blocked - continuing"),this.authInProgress=!0,this.dfd=a.Deferred().done(function(){b.authInProgress=!1}),this.getConfig().isAuthorised()?(f.debug("Config suggests we are already authorised"),b.dfd.resolveWith(b)):(f.debug("Making call to authorisation end point"),b.requestRemoteAuthorisation().fail(function(a){a.status===g?f.debug("Client key not accepted by authorisation end point."):(f.debug("Unexpected HTTP status code from authorisation end point: "+a.status),b.dfd.rejectWith(b))})),this.dfd)},h.requestRemoteAuthorisation=function(){var c=this;return a.ajax(c.getAuthorisationUrl(),c.getAjaxSettings()).done(function(a,d,e){200==e.status?(f.debug("Successfully authorised against end point. Setting apiKey locally: "+(a.apigeeKeys?a.apigeeKeys[0].apiKey:"")),b.isArray(a.apigeeKeys)?1!==a.apigeeKeys.length?(f.error('Expecting "apigeeKeys" property to be array with 1 item. It contains '+a.apigeeKeys.length+" items"),c.dfd.rejectWith(c)):(c.getConfig().setApiKey(a.apigeeKeys[0].apiKey),c.dfd.resolveWith(c)):(f.error('Missing or invalid "apigeeKeys" property in response'),c.dfd.rejectWith(c))):(f.debug("Unexpected HTTP status code from re-authorisation end point: "+e.status),c.dfd.rejectWith(c))})},h.isReauthorisationRequired=function(a){return a.status===g},h.reauthorise=function(){return this.getConfig().setApiKey(""),this.authorise()},h.getAjaxSettings=function(){return this.getConfig().getUseProxy()?{data:{clientKey:this.getConfig().getClientKey(),apiKey:this.getConfig().getClientKey()}}:{headers:{clientKey:this.getConfig().getClientKey()}}},h.getAuthorisationUrl=function(){return this.getConfig().getApigeeUrl()+this.authorisationUrlPath+"/"+this.getConfig().getCountryCode()+"/"+this.getConfig().getLanguageCode()},h.setConfig=function(a){this._config=a},h.getConfig=function(){return this._config},h.setConfig(d),h}),define("remoteServicesIface",[],function(){var a={};return a.getModelPrice=function(a,b,c){},a}),define("apigeeServiceCalls",["jquery","underscore","pricingConstants","stateStoreFactory","apigeeAuthoriser","remoteServicesIface","storageManager","logger"],function(a,b,c,d,e,f,g,h){"use strict";var i,j=new h({prefix:"ApigeeServiceCalls"});return i=b.create(f),i.getModelPrice=function(a,b,c){return j.debug("Calling makeCall in getModelPrice"),this.makeCall({url:"/v2/models/{modelCode}/prices/{priceCode}",pathParams:{modelCode:a,priceCode:c},headers:{model:b}})},i.getTaxes=function(a,b){return j.debug("Calling makeCall in getTaxes"),this.makeCall({url:"/v2/finance/models/{modelCode}/taxes",pathParams:{modelCode:a},queryParams:{configurationURL:b}})},i.getGradePrice=function(a,b,c,d){return j.debug("Calling makeCall in getGradePrice"),this.makeCall({url:"/v2/models/{modelCode}/grades/{gradeId}/prices/{priceCode}",pathParams:{modelCode:a,priceCode:d,gradeId:c},headers:{model:b}})},i.getVersionPrice=function(a,b,c,d,e){return j.debug("Calling makeCall in getVersionPrice"),this.makeCall({url:"/v2/models/{modelCode}/grades/{gradeId}/versions/{versionId}/prices/{priceCode}",pathParams:{modelCode:a,priceCode:e,gradeId:c,versionId:d},headers:{model:b}})},i.getOffersFilters=function(a,c,d,e){var f=!1;return j.debug("Calling makeCall in getOffersFilters"),c&&(f=!0),this.makeCall({url:"/v2/offers",queryParams:b.extend(e||{},{category:c,location:d,model:a,includeResults:!1,includeFilteredFacets:f,includePreFilteredFacets:!0})})},i.getOffersFiltersModelName=function(a,c,d,e){var f=!1;return j.debug("Calling makeCall in getOffersFilters"),c&&(f=!0),this.makeCall({url:"/v2/offers",queryParams:b.extend(e||{},{category:c,location:d,modelName:a,includeResults:!1,includeFilteredFacets:f,includePreFilteredFacets:!0})})},i.getOffers=function(a,c,d,e,f,g){j.debug("Calling makeCall in getOffers"),!0!==f&&(f=!1),b.isUndefined(g)&&b.has(e,"location")&&(g=e.location);var h=b.extend({},e,{start:c,size:d,model:a,includeResults:!0,includeFilteredFacets:f,includePreFilteredFacets:!1,location:g});return this.makeCall({url:"/v2/offers",queryParams:h})},i.getOffersModelName=function(a,c,d,e,f){j.debug("Calling makeCall in getOffers"),!0!==f&&(f=!1);var g=b.extend({},e,{start:c,size:d,modelName:a,includeResults:!0,includeFilteredFacets:f,includePreFilteredFacets:!1});return this.makeCall({url:"/v2/offers",queryParams:g})},i.getOffer=function(a){return j.debug("Calling makeCall in getOffers"),this.makeCall({url:"/v2/offers/{offerId}",pathParams:{offerId:a}})},i.getOffersByQuery=function(b){return j.debug("Calling makeCall in getOffersByQuery"),this.makeCall({url:"/v2/offers?"+a.trim(b)})},i.getCarsInventory=function(a,c,d,e){var f;switch(d){case"uci":f="/v2/models/inventory/usedcars";break;default:f="/v2/models/inventory/newcars"}return b.isEmpty(c)||(c.dealerId?f+="?dealerId="+window.encodeURIComponent(c.dealerId):(c.lat&&c.lng&&(f+="?lat="+window.encodeURIComponent(c.lat)+"&long="+window.encodeURIComponent(c.lng)),c.radius&&(f+="&radius="+window.encodeURIComponent(c.radius)))),j.debug("Calling makeCall in getInventory"),this.makeCall({url:f,queryParams:a,ajaxSettings:{type:"POST"},headers:e})},i.getExternalFinanceLink=function(a,c,d,e,f,g,h,i){j.debug("Calling makeCall in getExternalFinanceLink");var k={model:g},l="/v2/finance/models/"+a,m={priceCode:c,location:d,postalCode:e,currency:f};return h=h||{},i=i||{},b.isEmpty(h.gradeId)||(l+="/grades/"+h.gradeId),b.isEmpty(h.versionId)||(l+="/versions/"+h.versionId),l+="/calculatorLink",i.price&&(m.price=i.price),h.componentUrl&&(m.configurationURL=h.componentUrl),i.referrerURL&&(m.referrerURL=i.referrerURL),i.destinationURL&&(m.destinationURL=i.destinationURL),this.makeCall({headers:k,queryParams:m,url:l})},i.getFinanceOffer=function(a,d,e,f){var g={model:d},h={},i="/v2/finance/models/"+a;switch(f=f||{},b.isEmpty(f.gradeId)||(i+="/grades/"+f.gradeId),b.isEmpty(f.versionId)||(i+="/versions/"+f.versionId),i+="/offer",b.isEmpty(f.configurationUrl)||(h.configurationURL=f.configurationUrl),b.isEmpty(f.currencyCode)||(h.currency=f.currencyCode),e){case c.REPRESENTED_AS.BEST_MONTHLY:h.financeType="best";break;case c.REPRESENTED_AS.FINANCE:h.financeType="finance";break;case c.REPRESENTED_AS.LEASE:h.financeType="lease";break;default:j.warn("Invalid `priceRepresentedAs` value used when requesting finance offer: "+e)}return b.isEmpty(f.totalPrice)||(h.price=f.totalPrice),b.isEmpty(f.priceCode)||(h.priceCode=f.priceCode),j.debug("Calling makeCall in getFinanceOffer"),this.makeCall({headers:g,queryParams:h,url:i})},i.getDealers=function(a,c){var d={},e="/v2/dealers";if(d.size=a||1,b.has(c,"canAcceptLeads")){if(!b.isBoolean(c.canAcceptLeads))throw new Error("canAcceptLeads must be a boolean");d.canAcceptLeads=c.canAcceptLeads}return c.lat&&(c.long||c.lng)?(d.lat=c.lat,d.long=c.long||c.lng):c.location&&(d.location=c.location),b.has(c,"serviceId")&&c.serviceId&&(d.serviceId=c.serviceId),b.has(c,"filterConditionType")&&(d.serviceFilterType=c.filterConditionType),b.has(c,"testDriveModel")&&(d.testDriveModel=c.testDriveModel),j.debug("Calling makeCall in getDealers"),this.makeCall({url:e,queryParams:d,ajaxSettings:{type:"GET"}})},i.getDealerReviews=function(a,b,c,d,e,f){return j.debug("Calling makeCall in getDealerReviews"),this.makeCall({url:"/v2/dealers/{dealerId}/reviews",queryParams:{start:b,size:c,type:d,sortField:e,sortOrder:f},pathParams:{dealerId:a},ajaxSettings:{type:"GET"}})},i.getDealerByIdentifier=function(a){return j.debug("Calling makeCall in getDealerByIdentifier"),this.makeCall({url:"/v2/dealers/{dealerId}",pathParams:{dealerId:a},ajaxSettings:{type:"GET"}})},i.getLocationByIP=function(){return this.makeCall({url:"/v2/utils/location"})},i.getDealerByIP=function(){return this.getDealers()},i.postFileUploadFormData=function(a){return j.debug("Calling makeCall in postFileUploadFormData"),a=a||{},this.makeCall({ajaxSettings:a.ajaxSettings,queryParams:a.queryParams,url:a.url})},i.postFileUploadForProofOfOwnership=function(a,b){j.debug('Post requestParams to Apigee by calling makeCall method to Apigee directly or through Secure call, based on the "callViaProxy" flag.');var c="/v2/users/vehicles/proofOfOwnership",d="POST",e=!1,f={mode:"cookie"},h={};return a=a||{},b?this.doSecureCallToApigee(a,d,c,e):(h.Authorization="Bearer "+g.loadItem("HH427c6f9f26e",f)||"",this.makeCall({ajaxSettings:{type:d,contentType:e,processData:!1},queryParams:a,url:c,headers:h}))},i.doSecureCallToApigee=function(b,c,d,e){j.debug('Calling Secure call to Apigee for postFileUploadFormData when "callViaProxy" is set to True flag in "postFileUploadForProofOfOwnership" method');var f,g,h=a.getDataFromObject(window.HELIOS,["config","common","api","apigee"])||{},i=a.getDataFromObject(window.HELIOS,["config","common","api","aem"])||{},k=a.Deferred(),l={};return f=a.ajax({url:(i.secureResourcePath||"")+".authcookie.json",type:"POST",contentType:"application/x-www-form-urlencoded",Accept:"*/*"}),f.done(function(f,i,j){l.apiKey=h.apiKey||"",l.clientKey=h.clientKey||"",l.serviceHostname=h.url||"",d=(h.securePrefix||"")+d,g=a.ajax({type:c,contentType:e,processData:!1,headers:l,data:b,url:d}),g.then(function(a){k.resolve(a)}),g.fail(function(a,b,c){k.reject(a,b,c)})}),f.fail(function(a,b,c){k.reject(a,b,c)}),k.abort=function(){(g||f).abort()},k},i.getOfferConfiguratorCode=function(a,b,c,d){var e;return j.debug("Calling makeCall in getConfiguratorCode"),e=c?"/v2/models/{modelCode}/grades/{gradeId}/versions/{versionId}/configurationCode":"/v2/models/{modelCode}/grades/{gradeId}/configurationCode",this.makeCall({url:e,pathParams:{modelCode:a,gradeId:b,versionId:c},headers:{model:d},ajaxSettings:{type:"GET"}})},i.getConfiguratorCode=function(a,b){return j.debug("Calling makeCall in getConfiguratorCode"),this.makeCall({url:a,headers:{model:b},ajaxSettings:{type:"GET"}})},i.getDealersForBATD=function(a){return a=a||{},this.makeCall({url:"/v2/models/inventory/batd/cars",queryParams:a,ajaxSettings:{type:"GET"}})},i}),define("apigeeServices",["jquery","underscore","stateStoreFactory","apigeeConfig","apigeeAuthoriser","apigeeServiceCalls","logger"],function(a,b,c,d,e,f,g){var h=new g({prefix:"ApigeeServices"}),i=0,j=b.create(f,{useProxy:!1});return j.MAX_CALL_RECURSION_LEVEL=2,j.setAuthoriser=function(a){this.authoriser=a},j.getAuthoriser=function(){return this.authoriser},j.makeCall=function(c){var d,e=this,f=b.extend({},c.ajaxSettings);return h.debug("Call number: "+i++),d=this.replacePathPlaceholders(c.url,c.pathParams),f.url=this.buildFullRequestUrl(d),f.data=c.queryParams,f.beforeSend=function(a,b){b.url=b.url.replace(/%5B%5D=/g,"=")},this.applyStaticHeaders(f,c.headers),e.makeRecursiveCall(f,a.Deferred(),1)},j.makeRecursiveCall=function(b,c,d){var e,f,g=this,i=!1;return e=this.getAuthoriser().authorise(),e=e.then(function(){var e=this;return i?h.debug("Request aborted"):(h.debug("Initial authorisation confirmed"),f=a.ajax(g.applyDynamicHeaders(b)),f.then(function(a){h.debug("Got successful response from AJAX call"),c.resolve(a)},function(a){return e.isReauthorisationRequired(a)?(h.debug("AJAX call response indicates reauthorisation required"),d<3?(h.debug("Requesting reauthorisation"),e.reauthorise(a).then(function(){return h.debug("Reauthorisation complete - calling API again"),g.makeRecursiveCall(b,c,d+1)})):void h.debug("Too many levels of recursion in makeCall")):(h.debug("AJAX call failed with unexpected HTTP status code: "+a.status),c.reject(a).promise())})),c}),e.abort=function(){i=!0,f&&f.abort()},e},j.applyDynamicHeaders=function(a){return this.getConfig().getUseProxy()?(a.data=a.data||{},a.data.apiKey=this.getConfig().getApiKey(),a.data.clientKey=this.getConfig().getClientKey()):(a.headers=a.headers||{},a.headers.apiKey=this.getConfig().getApiKey(),a.headers.clientKey=this.getConfig().getClientKey()),a},j.buildFullRequestUrl=function(a){return this.getConfig().getApigeeUrl()+a},j.replacePathPlaceholders=function(a,c){var d;if(c)for(b.each(c,function(b,c,d){a=a.replace("{"+c+"}",encodeURIComponent(b))}),d=0;d<c.length;d++)a=a.replace("{"+(d+1)+"}",c[d]);return a},j.applyStaticHeaders=function(a,c){b.isObject(c)&&(this.getConfig().getUseProxy()?(a.data=a.data||{},b.each(c,function(b,c){a.data["header."+c]=b})):(a.headers=a.headers||{},b.extendOwn(a.headers,c)))},j.setConfig=function(a){this._config=a},j.getConfig=function(){return this._config},j.setConfig(d),j.setAuthoriser(b.create(e)),j}),define("remoteServices",["apigeeServices"],function(a){return a}),define("heliosLocation",["underscore","remoteServices"],function(a,b){"use strict";var c=function(a){a=a||{},this.dealerLocation=a.dealerLocation||{},this.location=a.location||{},this.postalCode=a.postalCode,this.ip=a.ip};return c.prototype.getDealerNameAddress=function(){return this.dealerLocation&&this.dealerLocation.dealerName+", "+this.dealerLocation.address},c.prototype.getDealerAddress=function(){return this.dealerLocation&&this.dealerLocation.address},c.prototype.getDealerPhoneNumber=function(){return this.dealerLocation&&this.dealerLocation.phone},c.prototype.getDealerId=function(){return this.dealerLocation&&this.dealerLocation.dealerId},c.prototype.getDealerType=function(){return this.dealerLocation&&this.dealerLocation.type},c.prototype.getDealerLat=function(){return this.dealerLocation&&this.dealerLocation.lat},c.prototype.getDealerLng=function(){return this.dealerLocation&&this.dealerLocation.lng},c.prototype.getDealerWebsite=function(){return this.dealerLocation&&this.dealerLocation.website},c.prototype.getDealerName=function(){return this.dealerLocation&&this.dealerLocation.dealerName},c.prototype.getDealerStateCode=function(){return this.dealerLocation&&this.dealerLocation.stateCode},c.prototype.getDealerStatePostalCode=function(){return this.dealerLocation&&this.dealerLocation.statePostalCode},c.prototype.getDealerPostalCode=function(){return this.dealerLocation&&this.dealerLocation.postalCode},c.prototype.getPostalCode=function(){return this.postalCode},c.prototype.getIp=function(){return this.ip},c.prototype.getUserAddress=function(){return this.location&&this.location.address},c.prototype.getUserLat=function(){return this.location&&this.location.lat},c.prototype.getUserLng=function(){return this.location&&this.location.lng},c.prototype.getUserMapId=function(){return this.location&&this.location.locationId},c.prototype.setDealerId=function(a){return this.dealerLocation.dealerId=a,this},c.prototype.setUserLocationFromGooglePlaceResult=function(b){var c,d;return b&&(d=b.postalCode,d||(c=a.find(b.address_components,function(b){return a.contains(b.types,"postal_code")}),d=c&&c.long_name),this.location={address:b.formatted_address,lat:b.geometry.location.lat(),lng:b.geometry.location.lng(),locationId:b.place_id},this.postalCode=a.isUndefined(d)?"":d),this},c.prototype.toJSON=function(){return{dealerLocation:this.dealerLocation,location:this.location,postalCode:this.postalCode,ip:this.ip?this.ip:""}},c.prototype.setUserAddress=function(a){return this.location.address=a,this},c}),define("languageUtilities",["underscore","heliosObject"],function(a,b){"use strict";function c(a){if(!(this instanceof c))return new c(a);this.defaults={multiLanguageCountryCodes:["ar-AE","ar-BH","ar-DZ","ar-KW","ar-MA","ar-OM","ar-QA","ar-SA","de-CH","en-AE","en-AU","en-BH","en-GB","en-KW","en-OM","en-QA","en-SA","fr-CH","fr-DZ","fr-MA","it-CH","pt-BR","pt-PT","ru-UA","uk-UA","zh-CN","zh-TW"]},this.options=a||{},this.settings=$.extend(!0,{},this.defaults,this.options)}return c.prototype.getLanguageCode=function(){var c,d=b.config.common.locale;return d.length&&(c=a.contains(this.settings.multiLanguageCountryCodes,d)?d:d.split("-")[0]),c},c}),define("markerwithlabel",[],function(){var a=!1;return{init:function(b){b&&!a&&(a=!0,b.done(function(){function a(a,b){function c(){}c.prototype=b.prototype,a.superClass_=b.prototype,a.prototype=new c,a.prototype.constructor=a}function b(a,c,d){this.marker_=a,this.handCursorURL_=a.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=b.getSharedCross(c)}function c(a){a=a||{},a.labelContent=a.labelContent||"",a.labelAnchor=a.labelAnchor||new google.maps.Point(0,0),a.labelClass=a.labelClass||"markerLabels",a.labelStyle=a.labelStyle||{},a.labelInBackground=a.labelInBackground||!1,void 0===a.labelVisible&&(a.labelVisible=!0),void 0===a.raiseOnDrag&&(a.raiseOnDrag=!0),void 0===a.clickable&&(a.clickable=!0),void 0===a.draggable&&(a.draggable=!1),void 0===a.optimized&&(a.optimized=!1),a.crossImage=a.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",a.handCursor=a.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",a.optimized=!1,this.label=new b(this,a.crossImage,a.handCursor),google.maps.Marker.apply(this,arguments)}a(b,google.maps.OverlayView),b.getSharedCross=function(a){var c;return void 0===b.getSharedCross.crossDiv&&(c=document.createElement("img"),c.style.cssText="position: absolute; z-index: 1000002; display: none;",c.style.marginLeft="-8px",c.style.marginTop="-9px",c.src=a,b.getSharedCross.crossDiv=c),b.getSharedCross.crossDiv},b.prototype.onAdd=function(){var a,c,d,e,f,g,h,i=this,j=!1,k=!1,l=20,m="url("+this.handCursorURL_+")",n=function(a){a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},o=function(){i.marker_.setAnimation(null)};this.getPanes().markerLayer.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),void 0===b.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),b.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(a){(i.marker_.getDraggable()||i.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(i.marker_,"mouseover",a))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(a){!i.marker_.getDraggable()&&!i.marker_.getClickable()||k||(this.style.cursor=i.marker_.getCursor(),google.maps.event.trigger(i.marker_,"mouseout",a))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(a){k=!1,i.marker_.getDraggable()&&(j=!0,this.style.cursor=m),(i.marker_.getDraggable()||i.marker_.getClickable())&&(google.maps.event.trigger(i.marker_,"mousedown",a),n(a))}),google.maps.event.addDomListener(document,"mouseup",function(b){var c;if(j&&(j=!1,i.eventDiv_.style.cursor="pointer",google.maps.event.trigger(i.marker_,"mouseup",b)),k){if(f){c=i.getProjection().fromLatLngToDivPixel(i.marker_.getPosition()),c.y+=l,i.marker_.setPosition(i.getProjection().fromDivPixelToLatLng(c));try{i.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(o,1406)}catch(e){}}i.crossDiv_.style.display="none",i.marker_.setZIndex(a),e=!0,k=!1,b.latLng=i.marker_.getPosition(),google.maps.event.trigger(i.marker_,"dragend",b)}}),google.maps.event.addListener(i.marker_.getMap(),"mousemove",function(b){var e;j&&(k?(b.latLng=new google.maps.LatLng(b.latLng.lat()-c,b.latLng.lng()-d),e=i.getProjection().fromLatLngToDivPixel(b.latLng),f&&(i.crossDiv_.style.left=e.x+"px",i.crossDiv_.style.top=e.y+"px",i.crossDiv_.style.display="",e.y-=l),i.marker_.setPosition(i.getProjection().fromDivPixelToLatLng(e)),f&&(i.eventDiv_.style.top=e.y+l+"px"),google.maps.event.trigger(i.marker_,"drag",b)):(c=b.latLng.lat()-i.marker_.getPosition().lat(),d=b.latLng.lng()-i.marker_.getPosition().lng(),a=i.marker_.getZIndex(),g=i.marker_.getPosition(),h=i.marker_.getMap().getCenter(),f=i.marker_.get("raiseOnDrag"),k=!0,i.marker_.setZIndex(1e6),b.latLng=i.marker_.getPosition(),google.maps.event.trigger(i.marker_,"dragstart",b)))}),google.maps.event.addDomListener(document,"keydown",function(a){k&&27===a.keyCode&&(f=!1,i.marker_.setPosition(g),i.marker_.getMap().setCenter(h),
google.maps.event.trigger(document,"mouseup",a))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(a){(i.marker_.getDraggable()||i.marker_.getClickable())&&(e?e=!1:(google.maps.event.trigger(i.marker_,"click",a),n(a)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(a){(i.marker_.getDraggable()||i.marker_.getClickable())&&(google.maps.event.trigger(i.marker_,"dblclick",a),n(a))}),google.maps.event.addListener(this.marker_,"dragstart",function(a){k||(f=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(a){k||f&&(i.setPosition(l),i.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(a){k||f&&i.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){i.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){i.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){i.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){i.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){i.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){i.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){i.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){i.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){i.setStyles()})]},b.prototype.onRemove=function(){var a;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),a=0;a<this.listeners_.length;a++)google.maps.event.removeListener(this.listeners_[a])},b.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},b.prototype.setContent=function(){var a=this.marker_.get("labelContent");void 0===a.nodeType?(this.labelDiv_.innerHTML=a,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(a),a=a.cloneNode(!0),this.eventDiv_.appendChild(a))},b.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},b.prototype.setStyles=function(){var a,b;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",b=this.marker_.get("labelStyle");for(a in b)b.hasOwnProperty(a)&&(this.labelDiv_.style[a]=b[a],this.eventDiv_.style[a]=b[a]);this.setMandatoryStyles()},b.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden",void 0!==this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},b.prototype.setAnchor=function(){var a=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-a.x+"px",this.labelDiv_.style.marginTop=-a.y+"px",this.eventDiv_.style.marginLeft=-a.x+"px",this.eventDiv_.style.marginTop=-a.y+"px"},b.prototype.setPosition=function(a){var b=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());void 0===a&&(a=0),this.labelDiv_.style.left=Math.round(b.x)+"px",this.labelDiv_.style.top=Math.round(b.y-a)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},b.prototype.setZIndex=function(){var a=this.marker_.get("labelInBackground")?-1:1;void 0===this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+a,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+a,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},b.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},a(c,google.maps.Marker),c.prototype.setMap=function(a){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(a)},window.MarkerWithLabel=c}))}}}),define("googleMaps",["underscore","jquery","languageUtilities","logger","markerwithlabel"],function(a,b,c,d,e){"use strict";var f,g="___googleMapsCallback",h=new d({prefix:"GoogleMaps"});return f=function(b){if(a.isUndefined(b))throw"InvalidArgumentException: You must pass an `options` argument to the `GoogleMaps` constructor";if(a.isUndefined(b.window))throw"InvalidArgumentException: You must pass `options.window` to the `GoogleMaps` constructor";if(a.isUndefined(b.window.document))throw"InvalidArgumentException: You must pass `options.window.document` to the `GoogleMaps` constructor";if(a.isUndefined(b.HELIOS))throw"InvalidArgumentException: You must pass `option.HELIOS` to the `GoogleMaps` constructor";this.options=b},f.prototype.getDeferred=function(){return this._deferred||this.initDeferred(),this._deferred},f.prototype.getIdKey=function(){return this.isMapOnPage()?"client":"key"},f.prototype.getIdValue=function(){var a;return this.options.HELIOS&&this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.api&&this.options.HELIOS.config.common.api.googleMaps&&(a=this.isMapOnPage()?this.options.HELIOS.config.common.api.googleMaps.clientID:this.options.HELIOS.config.common.api.googleMaps.apiKey),a},f.prototype.getLibrariesValue=function(){return"geometry,places"},f.prototype.getScriptSrc=function(){var a,b,d,e,f=this.options.HELIOS,h=(new c).getLanguageCode();return f&&(a=f.config.brand,b=f.config.common.countryCode,d=f.config.common.api.googleMaps.useRegion),e="//maps.googleapis.com/maps/api/js?v=3.31&"+this.getIdKey()+"="+this.getIdValue()+"&channel="+a+"-"+b+"&libraries="+this.getLibrariesValue()+"&callback="+g+"&language="+h,d&&(e+="&region="+b),e},f.prototype.initDeferred=function(){this._deferred=b.Deferred(),this.options.window[g]=this._deferred.resolve,this.onDeferredCreate()},f.prototype.initMarkerWithLabel=function(){e.init(this.getDeferred())},f.prototype.injectScript=function(){var a,b;this._isScriptInjected||(h.debug("Injecting Google Maps script"),a=this.options.window.document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=this.getScriptSrc(),b=this.options.window.document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b),this.onScriptInject())},f.prototype.isMapOnPage=function(){var c,d=this.options.HELIOS;return d&&d.config&&d.config.common&&d.config.common.api&&d.config.common.api.googleMaps&&a.isArray(d.config.common.api.googleMaps.hasMapComponentSelectorWhitelist)&&(c=b(d.config.common.api.googleMaps.hasMapComponentSelectorWhitelist.join()).length>0),c||!1},f.prototype.onDeferredCreate=function(){this.injectScript()},f.prototype.onScriptInject=function(){this._isScriptInjected=!0,this.initMarkerWithLabel()},f}),define("googleMapsSingleton",["googleMaps"],function(a){"use strict";return new a({HELIOS:HELIOS,window:window})}),define("autocompleteContext",["jquery","underscore","objectFactory","heliosLocation","jqueryUtilityPlugins","googleMapsSingleton"],function(a,b,c,d,e,f){"use strict";var g,h={heliosLocationProperties:{postalCode:"postal_code"}};return g=function(b){if(!b)throw new Error("ArgumentException: You must specify `options`.");if(!b.COUNTRY_CODE)throw new Error("ArgumentException: You must specify a `COUNTRY_CODE` property within `options`.");if(!b.window)throw new Error("ArgumentException: You must specify a `window` property within `options`.");this.settings=a.extend({},h,b),this.initializeGoogle(),this.COUNTRY_CODE=b.COUNTRY_CODE,this.heliosObject=b.heliosObject},g.prototype.initializeGoogle=function(){f.getDeferred().done(b.bind(function(){this.isGooglePlacesScriptInjected()&&this.init()},this))},g.prototype.isGooglePlacesScriptInjected=function(){return a.isNestedProp(this.settings.window,["google","maps","places"])},g.prototype.init=function(){this.autocompleteService=c.getObject(this.settings.window.google.maps.places.AutocompleteService),this.geocoder=c.getObject(this.settings.window.google.maps.Geocoder)},g.prototype.getPlaces=function(e){var f,g=a.Deferred();return this.autocompleteService.getPlacePredictions({input:e,componentRestrictions:{country:this.COUNTRY_CODE},types:["geocode"]},b.bind(function(a,e){e===this.settings.window.google.maps.places.PlacesServiceStatus.OK?(f=b.map(a,function(a){return c.getObject(d,{location:{locationId:a.place_id,address:a.description}})}),g.resolve(f)):g.reject(e)},this)),g},g.prototype.getPostalCodeByAddressName=function(a){return this._isPostalCodeSearchEnabled()?this._searchReverseGeocode({address:a}).pipe(b.bind(this._retrievePostalCode,this)).then(b.bind(function(b){return this._setOriginalAddress(b,a)},this)):this._searchReverseGeocode({address:a}).then(b.bind(function(b){return this._setOriginalAddress(b,a)},this))},g.prototype.getPostalCodeByPlaceId=function(a){return this._isPostalCodeSearchEnabled()?this._searchReverseGeocode({placeId:a}).pipe(b.bind(this._retrievePostalCode,this)):this._searchReverseGeocode({placeId:a})},g.prototype.getPostalCodeByCoordinates=function(a,b){var c={lat:a,lng:b};return this._searchReverseGeocode({location:c})},g.prototype.getPostalCodeByCoordinatesAndCountry=function(a,b){var c={lat:a,lng:b};return this._searchReverseGeocode({location:c},this.COUNTRY_CODE)},g.prototype._setOriginalAddress=function(a,b){return a.setUserAddress(b),a},g.prototype._searchReverseGeocode=function(c,d){var e=a.Deferred();return f.getDeferred().done(b.bind(function(){this.geocoder.geocode(c,b.bind(function(a,b){b===this.settings.window.google.maps.GeocoderStatus.OK?this._resolveLocationFromPlace(a,e,d):e.reject(b)},this))},this)),e},g.prototype._resolveLocationFromPlace=function(a,e,f){var g,h,i,j;return i=b.find(a,function(a){return b.contains(a.types,this.settings.heliosLocationProperties.postalCode)},this),j=this._getPostalCodeFromPlace(i),h=b.first(a),!f||b.find(h.address_components,function(a){return b.contains(a.types,"country")}).short_name===this.COUNTRY_CODE?(h.postalCode=j,g=c.getObject(d),g.setUserLocationFromGooglePlaceResult(h),e.resolve(g),e):(e.reject(this.settings.window.google.maps.GeocoderStatus.INVALID_REQUEST),e)},g.prototype._getPostalCodeFromPlace=function(a){var c;if(a)return(c=b.find(a.address_components,function(a){return b.contains(a.types,this.settings.heliosLocationProperties.postalCode)},this))&&c.long_name},g.prototype._retrievePostalCode=function(b){var c;return b.postalCode?(c=a.Deferred(),c.resolve(b),c):this.getPostalCodeByCoordinates(b.location.lat,b.location.lng)},g.prototype._isPostalCodeSearchEnabled=function(){return!!a.isNestedProp(this.heliosObject,["config","common","smartLocation"])&&this.heliosObject.config.common.smartLocation.postalCodeSearch},g}),define("smartLocationContext",["jquery","underscore","logger","objectFactory","remoteServices","autocompleteContext","heliosLocation"],function(a,b,c,d,e,f,g){"use strict";function h(){(i||(i=new c({prefix:"SmartLocationContext"}))).debug(Array.prototype.join.call(arguments," | "))}var i,j;return j=function(a){if(!a)throw"ArgumentException: You must specify `options`.";if(!a.countryCode)throw"ArgumentException: You must specify a `countryCode` property within `options`.";if(!a.profileManager)throw"ArgumentException: You must specify a `profileManager` property within `options`.";this.countryCode=a.countryCode,this.profileManager=a.profileManager,this.window=a.window,this.heliosObject=a.heliosObject},j.prototype._getCountryCode=function(){return this.countryCode},j.prototype._getDeferred=function(){return a.Deferred()},j.prototype.clearPostalCode=function(){return this.profileManager.deleteData("postalCode"),this},j.prototype.clearUserLocation=function(){return this.profileManager.deleteData("location"),this},j.prototype.get=function(){var a=this._getDeferred();return h("get"),this._getHeliosLocationFromProfileManager(a),a},j.prototype._getHeliosLocationByIP=function(a){var c=e.getLocationByIP();h("_getHeliosLocationByIP"),c.done(b.bind(b.partial(this._onGetHeliosLocationByIPDone,b,a),this)),c.fail(b.bind(b.partial(this._onGetHeliosLocationByIPFail,b,a),this))},j.prototype._getHeliosLocationFromProfileManager=function(a){h("_getHeliosLocationFromProfileManager"),this.profileManager.getSavedData().done(b.bind(b.partial(this._onGetHeliosLocationFromProfileManagerDone,b,a),this))},j.prototype._onGetHeliosLocationByIPDone=function(a,c){var d;h("_onGetHeliosLocationByIPDone",JSON.stringify(a)),this._getCountryCode()===a.country?this._isPostalCodeSearchEnabled()&&b.isEmpty(a.postalCode)?this._setPostalCode(a,c):(d=this._createHeliosLocationFromRemoteServices(a),this.set(d),c.resolve(d)):(d=this._createEmptyHeliosLocation(),c.reject(d))},j.prototype._onGetHeliosLocationByIPFail=function(a,b){var c;h("_onGetHeliosLocationByIPFail",JSON.stringify(a)),c=this._createEmptyHeliosLocation(),b.reject(c)},j.prototype._createHeliosLocationFromRemoteServices=function(a){return d.getObject(g,{location:{address:b.compact([a.city,a.region,a.country]).join(", "),lat:a.latitude,lng:a.longitude},postalCode:a.postalCode,ip:a.ip})},j.prototype._createHeliosDealerLocationFromRemoteServices=function(a){return d.getObject(g,{dealerLocation:{address:b.compact([a.address.addressLine1,a.address.addressLine2,a.address.addressLine3,a.address.city]).join(", "),statePostalCode:b.compact([a.address.stateCode,a.address.postalCode]).join(", "),dealerId:a.dealerId,dealerName:a.name,stateCode:a.address.stateCode,postalCode:a.address.postalCode,lat:a.geolocation.latitude,lng:a.geolocation.longitude,phone:a.contact.phone,website:b.first(a.contact.websites).url,type:a.type}})},j.prototype._createEmptyHeliosLocation=function(){return d.getObject(g)},j.prototype._onGetHeliosLocationFromProfileManagerDone=function(a,c){h("_onGetHeliosLocationFromProfileManagerDone",JSON.stringify(a)),b.isEmpty(a)?this._getHeliosLocationByIP(c):c.resolve(d.getObject(g,a))},j.prototype._setPostalCode=function(a,c){var d;d=new f({COUNTRY_CODE:this.countryCode,window:this.window}),d.getPostalCodeByCoordinates(a.latitude,a.longitude).done(b.bind(function(a){this.set(a),c.resolve(a)},this)).fail(b.bind(function(){var b=this._createHeliosLocationFromRemoteServices(a);c.resolve(b)},this))},j.prototype.set=function(a){h("set",JSON.stringify(a)),a&&a.toJSON&&this.profileManager.saveData(a.toJSON())},j.prototype._isPostalCodeSearchEnabled=function(){return!!a.isNestedProp(this.heliosObject,["config","common","smartLocation"])&&this.heliosObject.config.common.smartLocation.postalCodeSearch},j}),define("storeLastInteraction",["jquery","storageManager"],function(a,b){"use strict";function c(c){var e,f=a.extend(!0,{},d,c),g=a("["+f.attributes.vehicleId+"]");g.length&&(e=g.first().attr(f.attributes.vehicleId))&&(b.init(),b.saveItem(f.session.vehicleVisited,e))}var d={attributes:{vehicleId:"data-vehicle-id"},session:{vehicleVisited:"lastVisitedVehicle"}};return{init:c}}),define("storeDealerReferrer",["jquery","storageManager","storageManagerKeys"],function(a,b,c){"use strict";function d(d){var e=d.HELIOS;e&&e.dws&&e.dws.dealerId?b.saveItem(c.dwsPreselectedDealer.itemKey,{dealerId:e.dws.dealerId,dealerUrl:d.window.location.href},{mode:"sessionStorage"}):a(".c_019, .c_056").length||b.deleteItem(c.dwsPreselectedDealer.itemKey)}return{init:d}}),define("handlebars",[],function(){return function(){var a=function(){"use strict";function a(a){this.string=a}return a.prototype.toString=function(){return""+this.string},a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return!a&&0!==a||!(!m(a)||0!==a.length)}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===k.call(a)};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,c){var d;c&&c.firstLine&&(d=c.firstLine,a+=" - "+d+":"+c.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<b.length;f++)this[b[f]]=e[b[f]];d&&(this.lineNumber=d,this.column=c.firstColumn)}var b=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2!==arguments.length)throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return k(b)&&(b=b.call(this)),!0===b?e(this):!1===b||null==b?d(this):j(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(k(a)&&(a=a.call(this)),b.data&&(c=o(b.data)),a&&"object"==typeof a)if(j(a))for(var h=a.length;f<h;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return k(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers.if.call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){if(k(a)&&(a=a.call(this)),!g.isEmpty(a))return b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){n.log(a,b)}var f={},g=a,h=b;f.VERSION="1.3.0",f.COMPILER_REVISION=4;var i={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=i;var j=g.isArray,k=g.isFunction,l=g.toString,m="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:n,log:e,registerHelper:function(a,b,c){if(l.call(a)===m){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){l.call(a)===m?g.extend(this.partials,a):this.partials[a]=b}};var n={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(n.level<=a){var c=n.methodMap[a];"undefined"!=typeof console&&console[c]}}};f.logger=n,f.log=e;var o=function(a){var b={};return g.extend(b,a),b};return f.createFrame=o,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(b<c){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g)}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f=a,g=b,h=c,i=d,j=e,k=function(){var a=new f.HandlebarsEnvironment;return i.extend(a,f),a.SafeString=g,a.Exception=h,a.Utils=i,a.VM=j,a.template=function(b){return j.template(b,a)},a},l=k();return l.create=k,l}(d,a,c,b,e),g=function(a){"use strict";function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c=a,d={ProgramNode:function(a,c,e,f){var g,h;3===arguments.length?(f=e,e=null):2===arguments.length&&(f=c,c=null),b.call(this,f),this.type="program",this.statements=a,this.strip={},e?(h=e[0],h?(g={first_line:h.firstLine,last_line:h.lastLine,last_column:h.lastColumn,first_column:h.firstColumn},this.inverse=new d.ProgramNode(e,c,g)):this.inverse=new d.ProgramNode(e,c),this.strip.right=c.left):c&&(this.strip.left=c.right)},MustacheNode:function(a,c,e,f,g){if(b.call(this,g),this.type="mustache",this.strip=f,null!=e&&e.charAt){var h=e.charAt(3)||e.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!e;a instanceof d.SexprNode?this.sexpr=a:this.sexpr=new d.SexprNode(a,c),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type="sexpr",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1),g=this.eligibleHelper=e.isSimple;this.isHelper=g&&(f.length||c)},PartialNode:function(a,c,d,e){b.call(this,e),this.type="partial",this.partialName=a,this.context=c,this.strip=d},BlockNode:function(a,d,e,f,g){if(b.call(this,g),a.sexpr.id.original!==f.path.original)throw new c(a.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block",this.mustache=a,this.program=d,this.inverse=e,this.strip={left:a.strip.left,right:f.strip.right},(d||e).strip.left=a.strip.right,(e||d).strip.right=f.strip.left,e&&!d&&(this.isInverse=!0)},ContentNode:function(a,c){b.call(this,c),this.type="content",this.string=a},HashNode:function(a,c){b.call(this,c),this.type="hash",this.pairs=a},IdNode:function(a,d){b.call(this,d),this.type="ID";for(var e="",f=[],g=0,h=0,i=a.length;h<i;h++){var j=a[h].part;if(e+=(a[h].separator||"")+j,".."===j||"."===j||"this"===j){if(f.length>0)throw new c("Invalid path: "+e,this);".."===j?g++:this.isScoped=!0}else f.push(j)}this.original=e,this.parts=f,this.string=f.join("."),this.depth=g,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type="DATA",this.id=a},StringNode:function(a,c){b.call(this,c),this.type="STRING",this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,c){b.call(this,c),this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,c){b.call(this,c),this.type="comment",this.comment=a}};return d}(c),h=function(){"use strict";return function(){function a(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(0)||"~"===b.charAt(1)}}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return new e.ProgramNode(g[i-1],this._$);case 2:return new e.ProgramNode([],this._$);case 3:this.$=new e.ProgramNode([],g[i-1],g[i],this._$);break;case 4:this.$=new e.ProgramNode(g[i-2],g[i-1],g[i],this._$);break;case 5:this.$=new e.ProgramNode(g[i-1],g[i],[],this._$);break;case 6:this.$=new e.ProgramNode(g[i],this._$);break;case 7:case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[g[i]];break;case 10:g[i-1].push(g[i]),this.$=g[i-1];break;case 11:this.$=new e.BlockNode(g[i-2],g[i-1].inverse,g[i-1],g[i],this._$);break;case 12:this.$=new e.BlockNode(g[i-2],g[i-1],g[i-1].inverse,g[i],this._$);break;case 13:case 14:this.$=g[i];break;case 15:this.$=new e.ContentNode(g[i],this._$);break;case 16:this.$=new e.CommentNode(g[i],this._$);break;case 17:case 18:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 19:this.$={path:g[i-1],strip:a(g[i-2],g[i])};break;case 20:case 21:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 22:this.$=new e.PartialNode(g[i-2],g[i-1],a(g[i-3],g[i]),this._$);break;case 23:this.$=a(g[i-1],g[i]);break;case 24:this.$=new e.SexprNode([g[i-2]].concat(g[i-1]),g[i],this._$);break;case 25:this.$=new e.SexprNode([g[i]],null,this._$);break;case 26:this.$=g[i];break;case 27:this.$=new e.StringNode(g[i],this._$);break;case 28:this.$=new e.IntegerNode(g[i],this._$);break;case 29:this.$=new e.BooleanNode(g[i],this._$);break;case 30:this.$=g[i];break;case 31:g[i-1].isHelper=!0,this.$=g[i-1];break;case 32:this.$=new e.HashNode(g[i],this._$);break;case 33:this.$=[g[i-2],g[i]];break;case 34:this.$=new e.PartialNameNode(g[i],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(g[i],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(g[i],this._$));break;case 37:this.$=new e.DataNode(g[i],this._$);break;case 38:this.$=new e.IdNode(g[i],this._$);break;case 39:g[i-2].push({part:g[i],separator:g[i-1]}),this.$=g[i-2];break;case 40:this.$=[{part:g[i]}];break;case 43:this.$=[];break;case 44:g[i-1].push(g[i]);break;case 47:this.$=[g[i]];break;case 48:g[i-1].push(g[i])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],
42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&void 0!==n||(n=b()),q=g[p]&&g[p][n]),void 0===q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),void 0!==(r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f)))return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];return this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a,a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(!(c=this._input.match(this.rules[f[g]]))||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return void 0!==a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return e(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return b.yytext=e(1,2).replace(/\\"/g,'"'),32;case 24:return b.yytext=e(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:case 27:return 34;case 28:return 33;case 29:return 40;case 30:return b.yytext=e(1,2),40;case 31:return"INVALID";case 32:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},a}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}()}(),i=function(a,b){"use strict";function c(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var d={},e=a,f=b;return d.parser=e,d.parse=c,d}(h,g),j=function(a){"use strict";function b(){}function c(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);"data"in(b=b||{})||(b.data=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function d(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);"data"in(b=b||{})||(b.data=!0);var e;return function(a,b){return e||(e=d()),e.call(this,a,b)}}var e={},f=a;return e.Compiler=b,b.prototype={compiler:b,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;f<g;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode("strip"),b=this[a.type](a),c.right&&this.opcode("strip"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;c<d;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;e<f;e++)(b=c.depths.list[e])<2||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;e<f;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new f("You specified knownHelpersOnly, but used the unknown helper "+e,a);this.opcode("invokeHelper",d.length,e,a.isRoot)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth),a.parts[0]?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var b=1,c=a.parts.length;b<c;b++)this.opcode("lookup",a.parts[b])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new f("Scoped data references are not supported: "+a.original,a);this.opcode("lookupData");for(var b=a.id.parts,c=0,d=b.length;c<d;c++)this.opcode("lookup",b[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b)):this[b.type](b)},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},e.precompile=c,e.compile=d,e}(c),k=function(a,b){"use strict";function c(a){this.value=a}function d(){}var e=a.COMPILER_REVISION,f=a.REVISION_CHANGES,g=a.log,h=b;d.prototype={nameLookup:function(a,b){var c,e;return 0===a.indexOf("depth")&&(c=!0),e=/^[0-9]+$/.test(b)?a+"["+b+"]":d.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']",c?"("+a+" && "+e+")":e},compilerInfo:function(){var a=e;return"this.compilerInfo = ["+a+",'"+f[a]+"'];\n"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},g("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var i=f.length;this.i<i;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h("Compile completed with content left on stack");return this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;e<f;e++)d.push("depth"+this.environment.depths.list[e]);var h=this.mergeSource();if(this.isChild||(h=this.compilerInfo()+h),a)return d.push(h),Function.apply(this,d);var i="function "+(this.name||"")+"("+d.join(",")+") {\n  "+h+"}";return g("debug",i+"\n\n"),i},mergeSource:function(){for(var a,b="",c=0,d=this.source.length;c<d;c++){var e=this.source[c];e.appendToBuffer?a=a?a+"\n    + "+e.content:e.content:(a&&(b+="buffer += "+a+";\n  ",a=void 0),b+=e+"\n  ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\s+/,"")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var d=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context"),f="helper = "+d.name+" || "+e;d.paramsInit&&(f+=","+d.paramsInit),this.push("("+f+",helper ? helper.call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+"))"),c||this.flushInline()},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();c.paramsInit&&this.pushSource(c.paramsInit),this.pushSource("if (helper = "+d+") { "+f+" = helper.call("+c.callParams+"); }"),this.pushSource("else { helper = "+e+"; "+f+" = typeof helper === functionType ? helper.call("+c.callParams+") : helper; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;f<g;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;f<g;f++)b=d[f],1===b?e.push("depth0"):e.push("depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.pushSource(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,d,e,f="",g=this.isInline();if(g){var h=this.popStack(!0);if(h instanceof c)b=h.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+h+"),",b=this.topStack()}}else b=this.topStack();var j=a.call(this,b);return g?(e||this.popStack(),d&&this.stackSlot--,this.push("("+f+j+")")):(/^stack/.test(b)||(b=this.nextStack()),this.pushSource(b+" = ("+f+j+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;b<d;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new h("Invalid stack pop");this.stackSlot--}return d},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,d=b[b.length-1];return!a&&d instanceof c?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[];return{params:d,paramsInit:this.setupParams(a,d,c),name:this.nameLookup("helpers",b,"helper"),callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupOptions:function(a,b){var c,d,e,f=[],g=[],h=[];f.push("hash:"+this.popStack()),this.options.stringParams&&(f.push("hashTypes:"+this.popStack()),f.push("hashContexts:"+this.popStack())),d=this.popStack(),((e=this.popStack())||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),f.push("inverse:"+d),f.push("fn:"+e));for(var i=0;i<a;i++)c=this.popStack(),b.push(c),this.options.stringParams&&(h.push(this.popStack()),g.push(this.popStack()));return this.options.stringParams&&(f.push("contexts:["+g.join(",")+"]"),f.push("types:["+h.join(",")+"]")),this.options.data&&f.push("data:data"),f},setupParams:function(a,b,c){var d="{"+this.setupOptions(a,b).join(",")+"}";return c?(this.useRegister("options"),b.push("options"),"options="+d):(b.push(d),"")}};for(var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),j=d.RESERVED_WORDS={},k=0,l=i.length;k<l;k++)j[i[k]]=!0;return d.isValidJavaScriptVariableName=function(a){return!(d.RESERVED_WORDS[a]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a))},d}(d,c);return function(a,b,c,d,e){"use strict";var f=a,g=b,h=c.parser,i=c.parse,j=d.Compiler,k=d.compile,l=d.precompile,m=e,n=f.create,o=function(){var a=n();return a.compile=function(b,c){return k(b,c,a)},a.precompile=function(b,c){return l(b,c,a)},a.AST=g,a.Compiler=j,a.JavaScriptCompiler=m,a.Parser=h,a.parse=i,a};return f=o(),f.create=o,f}(f,g,i,j,k)}()}),function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define("qTip",["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)}(function(d){"use strict";function e(a,b,c,e){this.id=c,this.target=a,this.tooltip=D,this.elements={target:a},this._id=Q+"-"+c,this.timers={img:{}},this.options=b,this.plugins={},this.cache={event:{},target:d(),disabled:C,attr:e,onTooltip:C,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=C}function f(a){return a===D||"object"!==d.type(a)}function g(a){return!(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then))}function h(a){var b,c,e,h;return f(a)?C:(f(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&(b=a.content,f(b)||b.jquery||b.done?b=a.content={text:c=g(b)?C:b}:c=b.text,"ajax"in b&&(e=b.ajax,h=e&&e.once!==C,delete b.ajax,b.text=function(a,b){var f=c||d(this).attr(b.options.content.attr)||"Loading...",g=d.ajax(d.extend({},e,{context:b})).then(e.success,D,e.error).then(function(a){return a&&h&&b.set("content.text",a),a},function(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d)});return h?f:(b.set("content.text",f),g)}),"title"in b&&(d.isPlainObject(b.title)&&(b.button=b.title.button,b.title=b.title.text),g(b.title||C)&&(b.title=C))),"position"in a&&f(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&f(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===B?{ready:B}:{event:a.show}),"hide"in a&&f(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in a&&f(a.style)&&(a.style={classes:a.style}),d.each(P,function(){this.sanitize&&this.sanitize(a)}),a)}function i(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)d<f.length&&(c=e);return[c||a,f.pop()]}function j(a,b){var c,d,e;for(c in this.checks)for(d in this.checks[c])(e=new RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b))}function k(a){return T.concat("").join(a?"-"+a+" ":" ")}function l(a,b){if(b>0)return setTimeout(d.proxy(a,this),b);a.call(this)}function m(a){this.tooltip.hasClass($)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=l.call(this,function(){this.toggle(B,a)},this.options.show.delay))}function n(a){if(!this.tooltip.hasClass($)&&!this.destroyed){var b=d(a.relatedTarget),c=b.closest(U)[0]===this.tooltip[0],e=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation()}catch(e){}else this.timers.hide=l.call(this,function(){this.toggle(C,a)},this.options.hide.delay,this)}}function o(a){!this.tooltip.hasClass($)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=l.call(this,function(){this.hide(a)},this.options.hide.inactive))}function p(a){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(a)}function q(a,c,e){d(b.body).delegate(a,(c.split?c:c.join("."+Q+" "))+"."+Q,function(){var a=w.api[d.attr(this,S)];a&&!a.disabled&&e.apply(a,arguments)})}function r(a,c,f){var g,i,j,k,l,m=d(b.body),n=a[0]===b?m:a,o=a.metadata?a.metadata(f.metadata):D,p="html5"===f.metadata.type&&o?o[f.metadata.name]:D,q=a.data(f.metadata.name||"qtipopts");try{q="string"==typeof q?d.parseJSON(q):q}catch(e){}if(k=d.extend(B,{},w.defaults,f,"object"==typeof q?h(q):D,h(p||o)),i=k.position,k.id=c,"boolean"==typeof k.content.text){if(j=a.attr(k.content.attr),k.content.attr===C||!j)return C;k.content.text=j}if(i.container.length||(i.container=m),i.target===C&&(i.target=n),k.show.target===C&&(k.show.target=n),k.show.solo===B&&(k.show.solo=i.container.closest("body")),k.hide.target===C&&(k.hide.target=n),k.position.viewport===B&&(k.position.viewport=i.container),i.container=i.container.eq(0),i.at=new y(i.at,B),i.my=new y(i.my),a.data(Q))if(k.overwrite)a.qtip("destroy",!0);else if(k.overwrite===C)return C;return a.attr(R,c),k.suppress&&(l=a.attr("title"))&&a.removeAttr("title").attr(aa,l).attr("title",""),g=new e(a,k,c,!!j),a.data(Q,g),g}function s(a){return a.charAt(0).toUpperCase()+a.slice(1)}function t(a,b){var d,e,f=b.charAt(0).toUpperCase()+b.slice(1),g=(b+" "+pa.join(f+" ")+f).split(" "),h=0;if(oa[b])return a.css(oa[b]);for(;d=g[h++];)if((e=a.css(d))!==c)return oa[b]=d,e}function u(a,b){return Math.ceil(parseFloat(t(a,b)))}function v(a,b){this._ns="tip",this.options=b,this.offset=b.offset,this.size=[b.width,b.height],this.init(this.qtip=a)}var w,x,y,z,A,B=!0,C=!1,D=null,E="x",F="y",G="width",H="height",I="top",J="left",K="bottom",L="right",M="center",N="flipinvert",O="shift",P={},Q="qtip",R="data-hasqtip",S="data-qtip-id",T=["ui-widget","ui-tooltip"],U="."+Q,V="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),W=Q+"-fixed",X=Q+"-default",Y=Q+"-focus",Z=Q+"-hover",$=Q+"-disabled",_="_replacedByqTip",aa="oldtitle",ba={ie:function(){for(var a=4,c=b.createElement("div");(c.innerHTML="\x3c!--[if gt IE "+a+"]><i></i><![endif]--\x3e")&&c.getElementsByTagName("i")[0];a+=1);return a>4?a:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||C};x=e.prototype,x._when=function(a){return d.when.apply(d,a)},x.render=function(a){
if(this.rendered||this.destroyed)return this;var b=this,c=this.options,e=this.cache,f=this.elements,g=c.content.text,h=c.content.title,i=c.content.button,j=c.position,k=(this._id,[]);return d.attr(this.target[0],"aria-describedby",this._id),e.posClass=this._createPosClass((this.position={my:j.my,at:j.at}).my),this.tooltip=f.tooltip=d("<div/>",{id:this._id,class:[Q,X,c.style.classes,e.posClass].join(" "),width:c.style.width||"",height:c.style.height||"",tracking:"mouse"===j.target&&j.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":C,"aria-describedby":this._id+"-content","aria-hidden":B}).toggleClass($,this.disabled).attr(S,this.id).data(Q,this).appendTo(j.container).append(f.content=d("<div />",{class:Q+"-content",id:this._id+"-content","aria-atomic":B})),this.rendered=-1,this.positioning=B,h&&(this._createTitle(),d.isFunction(h)||k.push(this._updateTitle(h,C))),i&&this._createButton(),d.isFunction(g)||k.push(this._updateContent(g,C)),this.rendered=B,this._setWidget(),d.each(P,function(a){var c;"render"===this.initialize&&(c=this(b))&&(b.plugins[a]=c)}),this._unassignEvents(),this._assignEvents(),this._when(k).then(function(){b._trigger("render"),b.positioning=C,b.hiddenDuringWait||!c.show.ready&&!a||b.toggle(B,e.event,C),b.hiddenDuringWait=C}),w.api[this.id]=this,this},x.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=B;var a,b=this.target,c=b.attr(aa);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),d.each(this.plugins,function(a){this.destroy&&this.destroy()});for(a in this.timers)clearTimeout(this.timers[a]);b.removeData(Q).removeAttr(S).removeAttr(R).removeAttr("aria-describedby"),this.options.suppress&&c&&b.attr("title",c).removeAttr(aa),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=D,delete w.api[this.id]}}return this.destroyed?this.target:(a===B&&"hide"!==this.triggering||!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target)},z=x.checks={builtin:{"^id$":function(a,b,c,e){var f=c===B?w.nextid:c,g=Q+"-"+f;f!==C&&f.length>0&&!d("#"+g).length?(this._id=g,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,c){if(!c)return this._removeTitle();c&&!this.elements.title&&this._createTitle(),this._updateTitle(c)},"^content.button$":function(a,b,c){this._updateButton(c)},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(this.position[b]=a[b]=new y(c,"at"===b))},"^position.container$":function(a,b,c){this.rendered&&this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(B)||this.toggle(B))},"^style.classes$":function(a,b,c,d){this.rendered&&this.tooltip.removeClass(d).addClass(c)},"^style.(width|height)":function(a,b,c){this.rendered&&this.tooltip.css(b,c)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(a,b,c){this.rendered&&this.tooltip.toggleClass(X,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){this.rendered&&this.tooltip[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},x.get=function(a){if(this.destroyed)return this;var b=i(this.options,a.toLowerCase()),c=b[0][b[1]];return c.precedance?c.string():c};var ca=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,da=/^prerender|show\.ready/i;x.set=function(a,b){if(this.destroyed)return this;var c,e=this.rendered,f=C,g=this.options;this.checks;return"string"==typeof a?(c=a,a={},a[c]=b):a=d.extend({},a),d.each(a,function(b,c){if(e&&da.test(b))return void delete a[b];var h,j=i(g,b.toLowerCase());h=j[0][j[1]],j[0][j[1]]=c&&c.nodeType?d(c):c,f=ca.test(b)||f,a[b]=[j[0],j[1],c,h]}),h(g),this.positioning=B,d.each(a,d.proxy(j,this)),this.positioning=C,this.rendered&&this.tooltip[0].offsetWidth>0&&f&&this.reposition("mouse"===g.position.target?D:this.cache.event),this},x._update=function(a,b,c){var e=this,f=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,f.event,this)||""),d.isFunction(a.then)?(f.waiting=B,a.then(function(a){return f.waiting=C,e._update(a,b)},D,function(a){return e._update(a,b)})):a===C||!a&&""!==a?C:(a.jquery&&a.length>0?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){e.rendered&&e.tooltip[0].offsetWidth>0&&e.reposition(f.event,!a.length)}))):C},x._waitForContent=function(a){var b=this.cache;return b.waiting=B,(d.fn.imagesLoaded?a.imagesLoaded():d.Deferred().resolve([])).done(function(){b.waiting=C}).promise()},x._updateContent=function(a,b){this._update(a,this.elements.content,b)},x._updateTitle=function(a,b){this._update(a,this.elements.title,b)===C&&this._removeTitle(C)},x._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle(),a.titlebar=d("<div />",{class:Q+"-titlebar "+(this.options.style.widget?k("header"):"")}).append(a.title=d("<div />",{id:b,class:Q+"-title","aria-atomic":B})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)}),this.options.content.button&&this._createButton()},x._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=D,a!==C&&this.reposition())},x._createPosClass=function(a){return Q+"-pos-"+(a||this.options.position.my).abbrev()},x.reposition=function(c,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=B;var f,g,h,i,j=this.cache,k=this.tooltip,l=this.options.position,m=l.target,n=l.my,o=l.at,p=l.viewport,q=l.container,r=l.adjust,s=r.method.split(" "),t=k.outerWidth(C),u=k.outerHeight(C),v=0,w=0,x=k.css("position"),y={left:0,top:0},z=k[0].offsetWidth>0,A=c&&"scroll"===c.type,D=d(a),E=q[0].ownerDocument,F=this.mouse;if(d.isArray(m)&&2===m.length)o={x:J,y:I},y={left:m[0],top:m[1]};else if("mouse"===m)o={x:J,y:I},(!r.mouse||this.options.hide.distance)&&j.origin&&j.origin.pageX?c=j.origin:!c||c&&("resize"===c.type||"scroll"===c.type)?c=j.event:F&&F.pageX&&(c=F),"static"!==x&&(y=q.offset()),E.body.offsetWidth!==(a.innerWidth||E.documentElement.clientWidth)&&(g=d(b.body).offset()),y={left:c.pageX-y.left+(g&&g.left||0),top:c.pageY-y.top+(g&&g.top||0)},r.mouse&&A&&F&&(y.left-=(F.scrollX||0)-D.scrollLeft(),y.top-=(F.scrollY||0)-D.scrollTop());else{if("event"===m?c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?j.target=d(c.target):c.target||(j.target=this.elements.target):"event"!==m&&(j.target=d(m.jquery?m:this.elements.target)),m=j.target,m=d(m).eq(0),0===m.length)return this;m[0]===b||m[0]===a?(v=ba.iOS?a.innerWidth:m.width(),w=ba.iOS?a.innerHeight:m.height(),m[0]===a&&(y={top:(p||m).scrollTop(),left:(p||m).scrollLeft()})):P.imagemap&&m.is("area")?f=P.imagemap(this,m,o,P.viewport?s:C):P.svg&&m&&m[0].ownerSVGElement?f=P.svg(this,m,o,P.viewport?s:C):(v=m.outerWidth(C),w=m.outerHeight(C),y=m.offset()),f&&(v=f.width,w=f.height,g=f.offset,y=f.position),y=this.reposition.offset(m,y,q),(ba.iOS>3.1&&ba.iOS<4.1||ba.iOS>=4.3&&ba.iOS<4.33||!ba.iOS&&"fixed"===x)&&(y.left-=D.scrollLeft(),y.top-=D.scrollTop()),(!f||f&&f.adjustable!==C)&&(y.left+=o.x===L?v:o.x===M?v/2:0,y.top+=o.y===K?w:o.y===M?w/2:0)}return y.left+=r.x+(n.x===L?-t:n.x===M?-t/2:0),y.top+=r.y+(n.y===K?-u:n.y===M?-u/2:0),P.viewport?(h=y.adjusted=P.viewport(this,y,l,v,w,t,u),g&&h.left&&(y.left+=g.left),g&&h.top&&(y.top+=g.top),h.my&&(this.position.my=h.my)):y.adjusted={left:0,top:0},j.posClass!==(i=this._createPosClass(this.position.my))&&k.removeClass(j.posClass).addClass(j.posClass=i),this._trigger("move",[y,p.elem||p],c)?(delete y.adjusted,e===C||!z||isNaN(y.left)||isNaN(y.top)||"mouse"===m||!d.isFunction(l.effect)?k.css(y):d.isFunction(l.effect)&&(l.effect.call(k,this,d.extend({},y)),k.queue(function(a){d(this).css({opacity:"",height:""}),ba.ie&&this.style.removeAttribute("filter"),a()})),this.positioning=C,this):this},x.reposition.offset=function(a,c,e){function f(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}if(!e[0])return c;var g,h,i,j,k=d(a[0].ownerDocument),l=!!ba.ie&&"CSS1Compat"!==b.compatMode,m=e[0];do{"static"!==(h=d.css(m,"position"))&&("fixed"===h?(i=m.getBoundingClientRect(),f(k,-1)):(i=d(m).position(),i.left+=parseFloat(d.css(m,"borderLeftWidth"))||0,i.top+=parseFloat(d.css(m,"borderTopWidth"))||0),c.left-=i.left+(parseFloat(d.css(m,"marginLeft"))||0),c.top-=i.top+(parseFloat(d.css(m,"marginTop"))||0),g||"hidden"===(j=d.css(m,"overflow"))||"visible"===j||(g=d(m)))}while(m=m.offsetParent);return g&&(g[0]!==k[0]||l)&&f(g,1),c};var ea=(y=x.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,M).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?F:E}).prototype;ea.invert=function(a,b){this[a]=this[a]===J?L:this[a]===L?J:b||this[a]},ea.string=function(a){var b=this.x,c=this.y,d=b!==c?"center"===b||"center"!==c&&(this.precedance===F||this.forceY)?[c,b]:[b,c]:[b];return!1!==a?d.join(" "):d},ea.abbrev=function(){var a=this.string(!1);return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")},ea.clone=function(){return new y(this.string(),this.forceY)},x.toggle=function(a,c){var e=this.cache,f=this.options,g=this.tooltip;if(c){if(/over|enter/.test(c.type)&&e.event&&/out|leave/.test(e.event.type)&&f.show.target.add(c.target).length===f.show.target.length&&g.has(c.relatedTarget).length)return this;e.event=d.event.fix(c)}if(this.waiting&&!a&&(this.hiddenDuringWait=B),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var h,i,j,k=a?"show":"hide",l=this.options[k],m=(this.options[a?"hide":"show"],this.options.position),n=this.options.content,o=this.tooltip.css("width"),p=this.tooltip.is(":visible"),q=a||1===l.target.length,r=!c||l.target.length<2||e.target[0]===c.target;return(typeof a).search("boolean|number")&&(a=!p),h=!g.is(":animated")&&p===a&&r,i=h?D:!!this._trigger(k,[90]),this.destroyed?this:(i!==C&&a&&this.focus(c),!i||h?this:(d.attr(g[0],"aria-hidden",!a),a?(this.mouse&&(e.origin=d.event.fix(this.mouse)),d.isFunction(n.text)&&this._updateContent(n.text,C),d.isFunction(n.title)&&this._updateTitle(n.title,C),!A&&"mouse"===m.target&&m.adjust.mouse&&(d(b).bind("mousemove."+Q,this._storeMouse),A=B),o||g.css("width",g.outerWidth(C)),this.reposition(c,arguments[2]),o||g.css("width",""),l.solo&&("string"==typeof l.solo?d(l.solo):d(U,l.solo)).not(g).not(l.target).qtip("hide",d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete e.origin,A&&!d(U+'[tracking="true"]:visible',l.solo).not(g).length&&(d(b).unbind("mousemove."+Q),A=C),this.blur(c)),j=d.proxy(function(){a?(ba.ie&&g[0].style.removeAttribute("filter"),g.css("overflow",""),"string"==typeof l.autofocus&&d(this.options.show.autofocus,g).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):g.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(a?"visible":"hidden")},this),l.effect===C||q===C?(g[k](),j()):d.isFunction(l.effect)?(g.stop(1,1),l.effect.call(g,this),g.queue("fx",function(a){j(),a()})):g.fadeTo(90,a?1:0,j),a&&l.target.trigger("qtip-"+this.id+"-inactive"),this))},x.show=function(a){return this.toggle(B,a)},x.hide=function(a){return this.toggle(C,a)},x.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(U),c=this.tooltip,e=parseInt(c[0].style.zIndex,10),f=w.zindex;return c.hasClass(Y)||this._trigger("focus",[f],a)&&(e!==f&&(b.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1)}),b.filter("."+Y).qtip("blur",a)),c.addClass(Y)[0].style.zIndex=f),this},x.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(Y),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)},x.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass($):this.disabled):"boolean"!=typeof a&&(a=B),this.rendered&&this.tooltip.toggleClass($,a).attr("aria-disabled",a),this.disabled=!!a,this)},x.enable=function(){return this.disable(C)},x._createButton=function(){var a=this,b=this.elements,c=b.tooltip,e=this.options.content.button,f="string"==typeof e,g=f?e:"Close tooltip";b.button&&b.button.remove(),e.jquery?b.button=e:b.button=d("<a />",{class:"qtip-close "+(this.options.style.widget?"":Q+"-icon"),title:g,"aria-label":g}).prepend(d("<span />",{class:"ui-icon ui-icon-close",html:"&times;"})),b.button.appendTo(b.titlebar||c).attr("role","button").click(function(b){return c.hasClass($)||a.hide(b),C})},x._updateButton=function(a){if(!this.rendered)return C;var b=this.elements.button;a?this._createButton():b.remove()},x._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass($);c.removeClass($),$=a?"ui-state-disabled":"qtip-disabled",c.toggleClass($,d),c.toggleClass("ui-helper-reset "+k(),a).toggleClass(X,this.options.style.def&&!a),b.content&&b.content.toggleClass(k("content"),a),b.titlebar&&b.titlebar.toggleClass(k("header"),a),b.button&&b.button.toggleClass(Q+"-icon",!a)},x._storeMouse=function(a){return(this.mouse=d.event.fix(a)).type="mousemove",this},x._bind=function(a,b,c,e,f){if(a&&c&&b.length){var g="."+this._id+(e?"-"+e:"");return d(a).bind((b.split?b:b.join(g+" "))+g,d.proxy(c,f||this)),this}},x._unbind=function(a,b){return a&&d(a).unbind("."+this._id+(b?"-"+b:"")),this},x._trigger=function(a,b,c){var e=d.Event("tooltip"+a);return e.originalEvent=c&&d.extend({},c)||this.cache.event||D,this.triggering=a,this.tooltip.trigger(e,[this].concat(b||[])),this.triggering=C,!e.isDefaultPrevented()},x._bindEvents=function(a,b,c,e,f,g){var h=c.filter(e).add(e.filter(c)),i=[];h.length&&(d.each(b,function(b,c){var e=d.inArray(c,a);e>-1&&i.push(a.splice(e,1)[0])}),i.length&&(this._bind(h,i,function(a){(!!this.rendered&&this.tooltip[0].offsetWidth>0?g:f).call(this,a)}),c=c.not(h),e=e.not(h))),this._bind(c,a,f),this._bind(e,b,g)},x._assignInitialEvents=function(a){function b(a){if(this.disabled||this.destroyed)return C;this.cache.event=a&&d.event.fix(a),this.cache.target=a&&d(a.target),clearTimeout(this.timers.show),this.timers.show=l.call(this,function(){this.render("object"==typeof a||c.show.ready)},c.prerender?0:c.show.delay)}var c=this.options,e=c.show.target,f=c.hide.target,g=c.show.event?d.trim(""+c.show.event).split(" "):[],h=c.hide.event?d.trim(""+c.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(a){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(c.show.event)&&!/mouse(out|leave)/i.test(c.hide.event)&&h.push("mouseleave"),this._bind(e,"mousemove",function(a){this._storeMouse(a),this.cache.onTarget=B}),this._bindEvents(g,h,e,f,b,function(){if(!this.timers)return C;clearTimeout(this.timers.show)}),(c.show.ready||c.prerender)&&b.call(this,a)},x._assignEvents=function(){var c=this,e=this.options,f=e.position,g=this.tooltip,h=e.show.target,i=e.hide.target,j=f.container,k=f.viewport,l=d(b),q=(d(b.body),d(a)),r=e.show.event?d.trim(""+e.show.event).split(" "):[],s=e.hide.event?d.trim(""+e.hide.event).split(" "):[];d.each(e.events,function(a,b){c._bind(g,"toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a],b,null,g)}),/mouse(out|leave)/i.test(e.hide.event)&&"window"===e.hide.leave&&this._bind(l,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a)}),e.hide.fixed?i=i.add(g.addClass(W)):/mouse(over|enter)/i.test(e.show.event)&&this._bind(i,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+e.hide.event).indexOf("unfocus")>-1&&this._bind(j.closest("html"),["mousedown"],function(a){var b=d(a.target),c=this.rendered&&!this.tooltip.hasClass($)&&this.tooltip[0].offsetWidth>0,e=b.parents(U).filter(this.tooltip[0]).length>0;b[0]===this.target[0]||b[0]===this.tooltip[0]||e||this.target.has(b[0]).length||!c||this.hide(a)}),"number"==typeof e.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",o,"inactive"),this._bind(i.add(g),w.inactiveEvents,o)),this._bindEvents(r,s,h,i,m,n),this._bind(h.add(g),"mousemove",function(a){if("number"==typeof e.hide.distance){var b=this.cache.origin||{},c=this.options.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&this.hide(a)}this._storeMouse(a)}),"mouse"===f.target&&f.adjust.mouse&&(e.hide.event&&this._bind(h,["mouseenter","mouseleave"],function(a){if(!this.cache)return C;this.cache.onTarget="mouseenter"===a.type}),this._bind(l,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass($)&&this.tooltip[0].offsetWidth>0&&this.reposition(a)})),(f.adjust.resize||k.length)&&this._bind(d.event.special.resize?k:q,"resize",p),f.adjust.scroll&&this._bind(q.add(f.container),"scroll",p)},x._unassignEvents=function(){var c=this.options,e=c.show.target,f=c.hide.target,g=d.grep([this.elements.target[0],this.rendered&&this.tooltip[0],c.position.container[0],c.position.viewport[0],c.position.container.closest("html")[0],a,b],function(a){return"object"==typeof a});e&&e.toArray&&(g=g.concat(e.toArray())),f&&f.toArray&&(g=g.concat(f.toArray())),this._unbind(g)._unbind(g,"destroy")._unbind(g,"inactive")},d(function(){q(U,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,c=d(a.currentTarget),e=d(a.relatedTarget||a.target),f=this.options;b?(this.focus(a),c.hasClass(W)&&!c.hasClass($)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.position.adjust.mouse&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(a),c.toggleClass(Z,b)}),q("["+S+"]",V,o)}),w=d.fn.qtip=function(a,b,e){var f=(""+a).toLowerCase(),g=D,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],Q):D;return!arguments.length&&k||"api"===f?k:"string"==typeof a?(this.each(function(){var a=d.data(this,Q);if(!a)return B;if(j&&j.timeStamp&&(a.cache.event=j),!b||"option"!==f&&"options"!==f)a[f]&&a[f].apply(a,i);else{if(e===c&&!d.isPlainObject(b))return g=a.get(b),C;a.set(b,e)}}),g!==D?g:this):"object"!=typeof a&&arguments.length?void 0:(k=h(d.extend(B,{},a)),this.each(function(a){var b,c;if(c=d.isArray(k.id)?k.id[a]:k.id,c=!c||c===C||c.length<1||w.api[c]?w.nextid++:c,(b=r(d(this),c,k))===C)return B;w.api[c]=b,d.each(P,function(){"initialize"===this.initialize&&this(b)}),b._assignInitialEvents(j)}))},d.qtip=e,w.api={},d.each({attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?d.attr(c,aa):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(aa,b))}return d.fn["attr"+_].apply(this,arguments)},clone:function(a){var b=(d([]),d.fn["clone"+_].apply(this,arguments));return a||b.filter("["+aa+"]").attr("title",function(){return d.attr(this,aa)}).removeAttr(aa),b}},function(a,b){if(!b||d.fn[a+_])return B;var c=d.fn[a+_]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}}),d.ui||(d["cleanData"+_]=d.cleanData,d.cleanData=function(a){for(var b,c=0;(b=d(a[c])).length;c++)if(b.attr(R))try{b.triggerHandler("removeqtip")}catch(e){}d["cleanData"+_].apply(this,arguments)}),w.version="2.2.1",w.nextid=0,w.inactiveEvents=V,w.defaults={prerender:C,id:C,overwrite:B,suppress:B,content:{text:B,attr:"title",title:C,button:C},position:{my:"top left",at:"bottom right",target:C,container:C,viewport:C,adjust:{x:0,y:0,mouse:B,scroll:B,resize:B,method:"flipinvert flipinvert"},effect:function(a,b,c){d(this).animate(b,{duration:200,queue:C})}},show:{target:C,event:"mouseenter",effect:B,delay:90,solo:C,ready:C,autofocus:C},hide:{target:C,event:"mouseleave",effect:B,delay:0,fixed:C,inactive:C,leave:"window",distance:C},style:{classes:"",widget:C,width:C,height:C,def:B},events:{render:D,move:D,show:D,hide:D,toggle:D,visible:D,hidden:D,focus:D,blur:D}};var fa,ga="margin",ha="border",ia="color",ja="background-color",ka="transparent",la=" !important",ma=!!b.createElement("canvas").getContext,na=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,oa={},pa=["Webkit","O","Moz","ms"];if(ma)var qa=a.devicePixelRatio||1,ra=function(){var a=b.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1}(),sa=qa/ra;else var ta=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'};d.extend(v.prototype,{init:function(a){var b,c;c=this.element=a.elements.tip=d("<div />",{class:Q+"-tip"}).prependTo(a.tooltip),ma?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1e5,b.save()):(b=ta("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",c).add(c),["click","mousedown"],function(a){a.stopPropagation()},this._ns)),a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&(a.y===I||a.y===M&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(B))},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===C||b===C?a=C:a===B?a=new y(b.string()):a.string||(a=new y(a),a.fixed=B),a},_parseWidth:function(a,b,c){var d=this.qtip.elements,e=ha+s(b)+"Width";return(c?u(c,e):u(d.content,e)||u(this._useTitle(a)&&d.titlebar||d.content,e)||u(d.tooltip,e))||0},_parseRadius:function(a){var b=this.qtip.elements,c=ha+s(a.y)+s(a.x)+"Radius";return ba.ie<9?0:u(this._useTitle(a)&&b.titlebar||b.content,c)||u(b.tooltip,c)||0},_invalidColour:function(a,b,c){var d=a.css(b);return!d||c&&d===a.css(c)||na.test(d)?C:d},_parseColours:function(a){var b=this.qtip.elements,c=this.element.css("cssText",""),e=ha+s(a[a.precedance])+s(ia),f=this._useTitle(a)&&b.titlebar||b.content,g=this._invalidColour,h=[];return h[0]=g(c,ja)||g(f,ja)||g(b.content,ja)||g(b.tooltip,ja)||c.css(ja),h[1]=g(c,e,ia)||g(f,e,ia)||g(b.content,e,ia)||g(b.tooltip,e,ia)||b.tooltip.css(e),d("*",c).add(c).css("cssText",ja+":"+ka+la+";"+ha+":0"+la+";"),h},_calculateSize:function(a){var b,c,d,e=a.precedance===F,f=this.options.width,g=this.options.height,h="c"===a.abbrev(),i=(e?f:g)*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[this.border/i*l,this.border/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(this.border,2)),m[3]=Math.sqrt(j(m[1],2)-j(this.border,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*f),k(c*g)],e?d:d.reverse()},_calculateTip:function(a,b,c){c=c||1,b=b||this.size;var d=b[0]*c,e=b[1]*c,f=Math.ceil(d/2),g=Math.ceil(e/2),h={br:[0,0,d,e,d,0],bl:[0,0,d,0,0,e],tr:[0,e,d,0,d,e],tl:[0,0,0,e,d,e],tc:[0,e,f,0,d,e],bc:[0,0,d,0,f,e],rc:[0,0,d,g,0,e],lc:[d,0,d,e,0,g]};return h.lt=h.br,h.rt=h.bl,h.lb=h.tr,h.rb=h.tl,h[a.abbrev()]},_drawCoords:function(a,b){a.beginPath(),a.moveTo(b[0],b[1]),a.lineTo(b[2],b[3]),a.lineTo(b[4],b[5]),a.closePath()},create:function(){var a=this.corner=(ma||ba.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(b,c){if(!this.enabled)return this;var e,f,g,h,i,j,k,l,m=this.qtip.elements,n=this.element,o=n.children(),p=this.options,q=this.size,r=p.mimic,s=Math.round;b||(b=this.qtip.cache.corner||this.corner),r===C?r=b:(r=new y(r),r.precedance=b.precedance,"inherit"===r.x?r.x=b.x:"inherit"===r.y?r.y=b.y:r.x===r.y&&(r[b.precedance]=b[b.precedance])),f=r.precedance,b.precedance===E?this._swapDimensions():this._resetDimensions(),e=this.color=this._parseColours(b),e[1]!==ka?(l=this.border=this._parseWidth(b,b[b.precedance]),p.border&&l<1&&!na.test(e[1])&&(e[0]=e[1]),this.border=l=p.border!==B?p.border:l):this.border=l=0,k=this.size=this._calculateSize(b),n.css({width:k[0],height:k[1],lineHeight:k[1]+"px"}),j=b.precedance===F?[s(r.x===J?l:r.x===L?k[0]-q[0]-l:(k[0]-q[0])/2),s(r.y===I?k[1]-q[1]:0)]:[s(r.x===J?k[0]-q[0]:0),s(r.y===I?l:r.y===K?k[1]-q[1]-l:(k[1]-q[1])/2)],ma?(g=o[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,6e3,6e3),h=this._calculateTip(r,q,sa),i=this._calculateTip(r,this.size,sa),o.attr(G,k[0]*sa).attr(H,k[1]*sa),o.css(G,k[0]).css(H,k[1]),this._drawCoords(g,i),g.fillStyle=e[1],g.fill(),g.translate(j[0]*sa,j[1]*sa),this._drawCoords(g,h),g.fillStyle=e[0],g.fill()):(h=this._calculateTip(r),h="m"+h[0]+","+h[1]+" l"+h[2]+","+h[3]+" "+h[4]+","+h[5]+" xe",j[2]=l&&/^(r|b)/i.test(b.string())?8===ba.ie?2:1:0,o.css({coordsize:k[0]+l+" "+(k[1]+l),antialias:""+(r.string().indexOf(M)>-1),left:j[0]-j[2]*Number(f===E),top:j[1]-j[2]*Number(f===F),width:k[0]+l,height:k[1]+l}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k[0]+l+" "+(k[1]+l),path:h,fillcolor:e[0],filled:!!a,stroked:!a}).toggle(!(!l&&!a)),!a&&b.html(ta("stroke",'weight="'+2*l+'px" color="'+e[1]+'" miterlimit="1000" joinstyle="miter"'))})),a.opera&&setTimeout(function(){m.tip.css({display:"inline-block",visibility:"visible"})},1),c!==C&&this.calculate(b,k)},calculate:function(a,b){if(!this.enabled)return C;var c,e,f=this,g=this.qtip.elements,h=this.element,i=this.options.offset,j=(g.tooltip.hasClass("ui-widget"),{});return a=a||this.corner,c=a.precedance,b=b||this._calculateSize(a),e=[a.x,a.y],c===E&&e.reverse(),d.each(e,function(d,e){var h,k,l;e===M?(h=c===F?J:I,j[h]="50%",j[ga+"-"+h]=-Math.round(b[c===F?0:1]/2)+i):(h=f._parseWidth(a,e,g.tooltip),k=f._parseWidth(a,e,g.content),l=f._parseRadius(a),j[e]=Math.max(-f.border,d?k:i+(l>h?l:-h)))}),j[a[c]]-=b[c===E?0:1],h.css({margin:"",top:"",bottom:"",left:"",right:""}).css(j),j},reposition:function(a,b,d,e){function f(a,b,c,d,e){a===O&&k.precedance===b&&l[d]&&k[c]!==M?k.precedance=k.precedance===E?F:E:a!==O&&l[d]&&(k[b]=k[b]===M?l[d]>0?d:e:k[b]===d?e:d)}function g(a,b,e){k[a]===M?q[ga+"-"+b]=p[a]=h[ga+"-"+b]-l[b]:(i=h[e]!==c?[l[b],-h[b]]:[-l[b],h[b]],(p[a]=Math.max(i[0],i[1]))>i[0]&&(d[b]-=l[b],p[b]=C),q[h[e]!==c?e:b]=p[a])}if(this.enabled){var h,i,j=b.cache,k=this.corner.clone(),l=d.adjusted,m=b.options.position.adjust.method.split(" "),n=m[0],o=m[1]||m[0],p={left:C,top:C,x:0,y:0},q={};this.corner.fixed!==B&&(f(n,E,F,J,L),f(o,F,E,I,K),k.string()===j.corner.string()&&j.cornerTop===l.top&&j.cornerLeft===l.left||this.update(k,C)),h=this.calculate(k),h.right!==c&&(h.left=-h.right),h.bottom!==c&&(h.top=-h.bottom),h.user=this.offset,(p.left=n===O&&!!l.left)&&g(E,J,L),(p.top=o===O&&!!l.top)&&g(F,I,K),this.element.css(q).toggle(!(p.x&&p.y||k.x===M&&p.y||k.y===M&&p.x)),d.left-=h.left.charAt?h.user:n!==O||p.top||!p.left&&!p.top?h.left+this.border:0,d.top-=h.top.charAt?h.user:o!==O||p.left||!p.left&&!p.top?h.top+this.border:0,j.cornerLeft=l.left,j.cornerTop=l.top,j.corner=k.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),fa=P.tip=function(a){return new v(a,a.options.style.tip)},fa.initialize="render",fa.sanitize=function(a){if(a.style&&"tip"in a.style){var b=a.style.tip;"object"!=typeof b&&(b=a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=B)}},z.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},d.extend(B,w.defaults,{style:{tip:{corner:B,mimic:C,width:6,height:6,border:B,offset:0}}}),P.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,j){var k=d[f],s=u[a],t=v[a],w=c===O,x=s===f?j:s===g?-j:-j/2,y=t===f?i:t===g?-i:-i/2,z=q[f]+r[f]-(n?0:m[f]),A=z-k,B=k+j-(h===G?o:p)-z,C=x-(u.precedance===a||s===u[b]?y:0)-(t===M?i/2:0);return w?(C=(s===f?1:-1)*x,d[f]+=A>0?A:B>0?-B:0,d[f]=Math.max(-m[f]+r[f],k-C,Math.min(Math.max(-m[f]+r[f]+(h===G?o:p),k+C),d[f],"center"===s?k-x:1e9))):(e*=c===N?2:0,A>0&&(s!==f||B>0)?(d[f]-=C+e,l.invert(a,f)):B>0&&(s!==g||A>0)&&(d[f]-=(s===M?-C:C)+e,l.invert(a,g)),d[f]<q&&-d[f]>B&&(d[f]=k,l=u.clone())),d[f]-k}var k,l,m,n,o,p,q,r,s=e.target,t=c.elements.tooltip,u=e.my,v=e.at,w=e.adjust,x=w.method.split(" "),y=x[0],z=x[1]||x[0],A=e.viewport,B=e.container,D=(c.cache,{left:0,top:0});return A.jquery&&s[0]!==a&&s[0]!==b.body&&"none"!==w.method?(m=B.offset()||D,n="static"===B.css("position"),k="fixed"===t.css("position"),o=A[0]===a?A.width():A.outerWidth(C),p=A[0]===a?A.height():A.outerHeight(C),q={left:k?0:A.scrollLeft(),top:k?0:A.scrollTop()},r=A.offset()||D,"shift"===y&&"shift"===z||(l=u.clone()),D={left:"none"!==y?j(E,F,y,w.x,J,L,G,f,h):0,top:"none"!==z?j(F,E,z,w.y,I,K,H,g,i):0,my:l}):D}})}(window,document),function(a){"function"==typeof define&&define.amd?define("jqueryui",["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,!(!b.href||!f||"map"!==e.nodeName.toLowerCase())&&(!!(g=a("img[usemap=#"+f+"]")[0])&&c(g))):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}function d(a){for(var b,c;a.length&&a[0]!==document;){if(("absolute"===(b=a.css("position"))||"relative"===b||"fixed"===b)&&(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c))return c;a=a.parent()}return 0}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.regional.en=a.extend(!0,{},this.regional[""]),this.regional["en-US"]=a.extend(!0,{},this.regional.en),this.dpDiv=f(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function f(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(k.inline?b.parent()[0]:k.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function g(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(){var b=this.css("position"),c="absolute"===b,d=this.parents().filter(function(){var b=a(this);return(!c||"static"!==b.css("position"))&&/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==b&&d.length?d:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(("absolute"===(c=e.css("position"))||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var h=0,i=Array.prototype.slice;a.cleanData=function(b){return function(c){for(var d,e=0;null!=(d=c[e]);e++)try{a(d).triggerHandler("remove")}catch(e){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){if(!a.isFunction(d))return void(i[b]=d);i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,e=i.call(arguments,1),f=0,g=e.length;f<g;f++)for(c in e[f])d=e[f][c],e[f].hasOwnProperty(c)&&void 0!==d&&(a.isPlainObject(d)?b[c]=a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):b[c]=d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(e){var f="string"==typeof e,g=i.call(arguments,1),h=this;return e=!f&&g.length?a.widget.extend.apply(null,[e].concat(g)):e,f?this.each(function(){var c,f=a.data(this,d);return"instance"===e?(h=f,!1):f?a.isFunction(f[e])&&"_"!==e.charAt(0)?(c=f[e].apply(f,g),c!==f&&void 0!==c?(h=c&&c.jquery?h.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+e+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var b=a.data(this,d);b?(b.option(e||{}),b._init&&b._init()):a.data(this,d,new c(e,this))}),h}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=h++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){if(b||!0!==f.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"==typeof g?f[g]:g).apply(f,arguments)}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&!1===g.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?!0===e||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});var j=(a.widget,!1);a(document).mouseup(function(){j=!1});a.widget("ui.mouse",{version:"1.11.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!j){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return!(d&&!e&&this._mouseCapture(b))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),j=!0,!0))}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):b.which?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),j=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});a.extend(a.ui,{datepicker:{version:"1.11.0"}});var k;a.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return g(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?f(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),"focus"!==d&&"both"!==d||b.focus(this._showDatepicker),"button"!==d&&"both"!==d||(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;e<a.length;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,e,f){var h,i,j,k,l,m=this._dialogInst;return m||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},a.data(this._dialogInput[0],"datepicker",m)),g(m.settings,e||{}),c=c&&c.constructor===Date?this._formatDate(m,c):c,this._dialogInput.val(c),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(i=document.documentElement.clientWidth,j=document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[i/2-100+k,j/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",m),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==c&&"span"!==c||d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==c&&"span"!==c||(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==c&&"span"!==c||(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,c,d){var e,f,h,i,j=this._getInst(b);if(2===arguments.length&&"string"==typeof c)return"defaults"===c?a.extend({},a.datepicker._defaults):j?"all"===c?a.extend({},j.settings):this._get(j,c):null;e=c||{},"string"==typeof c&&(e={},e[c]=d),j&&(this._curInst===j&&this._hideDatepicker(),f=this._getDateDatepicker(b,!0),h=this._getMinMaxDate(j,"min"),i=this._getMinMaxDate(j,"max"),g(j.settings,e),null!==h&&void 0!==e.dateFormat&&void 0===e.minDate&&(j.settings.minDate=this._formatDate(j,h)),null!==i&&void 0!==e.dateFormat&&void 0===e.maxDate&&(j.settings.maxDate=this._formatDate(j,i)),"disabled"in e&&(e.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),j),this._autoSize(j),this._setDate(j,f),this._updateAlternate(j),this._updateDatepicker(j))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);if(a.datepicker._get(e,"constrainInput"))return c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||d<" "||!c||c.indexOf(d)>-1},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,e,f,h,i,j,k;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),e=a.datepicker._get(c,"beforeShow"),f=e?e.apply(b,[b,c]):{},!1!==f&&(g(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),h=!1,a(b).parents().each(function(){return!(h|="fixed"===a(this).css("position"))}),i={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),i=a.datepicker._checkOffset(c,i,h),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":h?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),c.inline||(j=a.datepicker._get(c,"showAnim"),k=a.datepicker._get(c,"duration"),c.dpDiv.css("z-index",d(a(b))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[j]?c.dpDiv.show(j,a.datepicker._get(c,"showOptions"),k):c.dpDiv[j||"show"](j?k:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,k=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a");var c,d=this._getNumberOfMonths(b),e=d[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),d=this._get(g,"duration"),e=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(g,"onClose"),f&&f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id===a.datepicker._mainDivId||0!==c.parents("#"+a.datepicker._mainDivId).length||c.hasClass(a.datepicker.markerClassName)||c.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)&&(!c.hasClass(a.datepicker.markerClassName)||a.datepicker._curInst===d)||a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(""===(c="object"==typeof c?c.toString():c+""))return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=c.substring(i).match(e);if(!f)throw"Missing number at position "+i;return i+=f[0].length,parseInt(f[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];if(c.substr(i,d.length).toLowerCase()===d.toLowerCase())return f=b[0],i+=d.length,!1}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=k?0:-100)),s>-1)for(q=1,r=s;;){if(f=this._getDaysInMonth(p,q-1),r<=f)break;q++,r-=f}if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),
h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;d.length<c;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;d<a.length;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(e){}for(var d=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(c);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,a.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,a.datepicker._getDaysInMonth(e,f))}i=h.exec(c)}return new Date(e,f,g)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"===g.toString()?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(_<0&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&b<Z?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)--_<0&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;w<U[0];w++){for(x="",this.maxRows=4,y=0;y<U[1];y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;v<7;v++)D=(v+k)%7,C+="<th scope='col'"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;J<H;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;v<7;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&I<Z||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;k<12;k++)(!i||k>=d.getMonth())&&(!j||k<=e.getMonth())&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";o<=p;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new e,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.11.0";a.datepicker,a.widget("ui.slider",a.ui.mouse,{version:"1.11.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;b<c;b++)f.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=e.add(a(f.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j=this,k=this.options;return!k.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-j.values(b));(e>c||e===c&&(b===j._lastChangedValue||j.values(b)===k.min))&&(e=c,f=a(this),g=b)}),!1!==this._start(b,g)&&(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),h=f.offset(),i=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=i?{left:0,top:0}:{left:b.pageX-h.left-f.width()/2,top:b.pageY-h.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),d<0&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&!0===this.options.range&&(0===b&&c>d||1===b&&c<d)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),!1!==f&&this.values(b,c))):c!==this.value()&&!1!==(f=this._trigger("slide",a,{handle:this.handles[b],value:c}))&&this.value(c)},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&!0===this.options.range&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),"disabled"===b&&this.element.toggleClass("ui-state-disabled",!!c),this._super(b,c),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=!this._animateOff&&h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),!0===i.options.range&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(b){var c,d,e,f=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),!1===this._start(b,f)))return}switch(e=this.options.step,c=d=this.options.values&&this.options.values.length?this.values(f):this.value(),b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-e)}this._slide(b,f,d)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}),define("c_008",["jquery","qTip","underscore","jqueryui"],function(a,b,c,d){"use strict";function e(b){o=a.extend({},n,b)}function f(b){var c,d=o.selectors.tooltipPanel+"["+o.selectors.tooltipDataId+'="'+b.tooltipID+'"]',e=b.$trigger.parents(o.selectors.componentRoot).find(d).first().clone();c=o.tooltips.tooltipContainer?o.tooltips.tooltipContainer:o.tooltips.useQtipContainer?b.$trigger.parents(o.selectors.componentRoot):a(o.selectors.body),b.$trigger.qtip({content:{text:e,button:a("<a />").attr("href","#").addClass(o.classes.tooltipClose)},position:{my:b.tooltipMy,at:b.tooltipAt,target:b.$trigger,adjust:{y:b.tooltipYOffset,x:b.tooltipXOffset,method:o.tooltips.viewportFlipMethod},viewport:o.tooltips.viewport,container:c},events:{toggle:function(a){"tooltiphide"===a.type?b.$trigger.removeClass(o.classes.tooltipTriggerActive):b.$trigger.addClass(o.classes.tooltipTriggerActive)},visible:function(a,b){var c=b.tooltip.find(":tabbable"),d=c.eq(0),e=c.eq(-1),f=!1;d.focus(),b.heliosEventsLoaded||(b.tooltip.keyup(function(a){16===a.keyCode&&(f=!1)}),b.tooltip.keydown(function(a){if(16===a.keyCode&&(f=!0),9===a.keyCode){if(a.target===e[0]&&!f)return d.focus(1),!1;if(a.target===d[0]&&f)return e.focus(1),!1}27===a.keyCode&&b.hide()}),b.heliosEventsLoaded=!0)},hidden:function(a,b){b.target.isElementVisible()&&b.target.focus()},show:function(a,b){o.events.onShow&&o.events.onShow(a,b),o.analyticsManager&&l(b.target)}},show:{event:o.events.tooltipEvent,delay:0,solo:!0,effect:!1},hide:{event:o.tooltips.hideEvent,fixed:!0,target:!1}}).on(o.events.tooltipEvent,function(b){b.preventDefault(),a(".qtip").trigger("focus")})}function g(a){return!(!a.hasClass(o.classes.tooltipLabelCentral)&&!a.hasClass(o.classes.tooltipLabelHidden))}function h(a){return g(a)?0:o.tooltips.xOffsetCentral}function i(a){var b=a.data(o.selectors.tooltipDataAt)||o.tooltips.at;return g(a)?"top left"===b||"top center"===b?"top center":"bottom center":b}function j(a){var b={$trigger:a,tooltipDefaults:o.tooltips,tooltipID:a.attr(o.selectors.tooltipDataId),tooltipAt:i(a),tooltipMy:a.data(o.selectors.tooltipDataMy)||o.tooltips.my,tooltipYOffset:o.tooltips.yOffsetTop,tooltipXOffset:h(a)};"top "===b.tooltipAt.substring(0,4)?b.tooltipYOffset=o.tooltips.yOffsetTop:"bottom "===b.tooltipAt.substring(0,7)&&(b.tooltipYOffset=o.tooltips.yOffsetBottom),f(b)}function k(b,d){b.length&&(o=a.extend(!0,{},o,n,b,d),b.each(function(b){var d=a(this),e=d.attr("data-tooltip-id"),f=c.uniqueId("tooltip-input-element-id-");e||d.parents(o.selectors.componentRoot).find('[data-tooltip-id="'+e+'"]').attr("data-tooltip-id",f),j(d)}))}function l(b){var c,d,e,f=b.siblings(o.selectors.tooltipPanel).eq(0),g="tooltipDisplay";f.length||(c=b.data(o.data.tooltipId),f=a(o.selectors.tooltipContainer).find("[data-tooltip-id="+c+"]")),e=f.find(o.selectors.tooltipHeading).text(),b.hasClass(o.classes.tooltipTriggerActive)||(e.length||(e=f.data(o.data.tooltipId)),d={componentId:"C8_Tooltip",tooltipTitle:""+e},b.data("parentComponent")&&(d.parentComponent=b.data("parentComponent")),o.analyticsManager.tag(g,d))}function m(b){if(!b.length)return!1;b.each(function(){var b=a(this).data("hasqtip");a("#qtip-"+b+"-content").remove()})}var n={selectors:{body:"body",componentRoot:".c_008",root:".has-tooltip",tooltipTrigger:".has-tooltip",tooltipDataId:"data-tooltip-id",tooltipDataAt:"tooltip-at",tooltipDataMy:"tooltip-my",tooltipPanel:".tooltip-panel",tooltipContainer:".qtip",tooltipHeading:".tooltip-heading"},tooltips:{my:"top center",at:"bottom left",yOffsetTop:-14,yOffsetBottom:14,xOffsetCentral:8,hideEvent:"click unfocus",viewportFlipMethod:"shift flipinvert",viewport:a(document)},classes:{tooltipTriggerActive:"tooltip-active",tooltipLabelCentral:"tooltip-label-central",tooltipLabelHidden:"tooltip-label-hidden",tooltipClose:"qtip-close"},events:{tooltipEvent:"click"},data:{tooltipId:"tooltip-id"}},o=null;return{init:e,createTooltips:k,flushTooltips:m}}),define("disclaimers",["jquery","handlebars","underscore","logger","c_008"],function(a,b,c,d,e){"use strict";function f(b){w=a.extend({},v,b),x.info("init"),r=a(w.selectors.body),p()}function g(b,c,d){var e=a("#"+w.selectors.disclaimerContainer);e.length||(e=a("<div/>").attr("id",w.selectors.disclaimerContainer).css("display","none"),r.append(e)),e.html(b),u=m(),u?(i(c.disclaimerData,d),k(c.disclaimerNodes)):x.warn("Error extracting disclaimer JSON data")}function h(){var a=w.urls.disclaimerContentUrl;return a&&-1===a.indexOf("common-assets")&&(a.slice(-1)!==w.delimiter&&(a+=w.delimiter),a+=t.join(w.delimiter)),a}function i(d,f){var g=r.find(w.selectors.tooltipTemplate).html(),h=b.compile(g),i=[],k=0;x.info("injectTooltips"),a.each(d,function(b,e){a.each(e.disclaimers,function(a,b){var d,f=new RegExp("\\[\\["+b+"\\]\\]","g");c.has(u,b)?(d=c.uniqueId("disclaimer-"+b+"-tooltip-"),u[b].disclaimerId=d,c.has(u[b],"tooltipLabel")||(u[b].tooltipLabel=w.tooltipMarker),e.text=e.text.replace(f,h(u[b])),i.push(d)):j(e,b)}),e.$element.replaceWith(a.parseHTML(e.text)),k++,Object.keys(d).length===k&&C.trigger(w.events.disclaimersRendered,f)}),a.each(i,function(b,c){e.createTooltips(a('.has-tooltip[data-tooltip-id="'+c+'"]'),w.tooltipOptions)}),a('html[dir="rtl"]').length&&a(".c_008 .has-tooltip span").attr("dir","rtl"),q()}function j(a,b){var c=new RegExp("\\[\\["+b+"\\]\\]","g");x.info("Removing unrendered disclaimer "+b),a.text=a.text.replace(c,""),a.$element.get(0).nodeValue=a.text}function k(b){var c=b||s;x.warn("Removing all unrendered disclaimers"),a.each(c,function(b,c){var d=a(c);d&&d.length&&(d.get(0).nodeValue=d.text().replace(z,""))})}function l(){a.each(B,function(a,b){(b.$element.parents("a").length||b.$element.parents("button").length)&&(b.text=b.text.replace(z,""),b.$element.get(0).nodeValue=b.text,x.warn("Disclaimers cannot be inserted into clickable elements. Removing all unrendered disclaimers from this node"))})}function m(){var a=HELIOS.components.disclaimers;return(c.isUndefined(a)||c.isEmpty(a))&&(x.warn("Cannot find disclaimer JSON in the AJAX response - removing all unrendered disclaimers"),k()),a}function n(){w.urls.disclaimerContentUrl?x.warn("Call to disclaimer data source failed"):x.warn("Disclaimer data source URL not set"),k()}function o(b){return s=a(),b.find("*:not(iframe)").each(function(){var b=a(this).contents().filter(function(){return 3===this.nodeType&&y.test(this.nodeValue)});b.length&&(s=s.add(b))}),s}function p(b,d){var e,f,i={},j=b||r;if(x.info("renderDisclaimers"),j){if(s=o(j),!s.length)return void j.trigger(w.events.onDisclaimerCompleted);if(d&&j&&(w.tooltipOptions.tooltips.useQtipContainer=j,w.tooltipOptions.tooltips.viewport=j),l(),!a(w.selectors.tooltipTemplate).length)return x.warn("Tooltip template not found. Hiding all disclaimers"),k(),void j.trigger(w.events.onDisclaimerCompleted);j&&(t=[],s.each(function(b,d){var e=a(d),f=e.text(),g=f.match(z),h=[];c.each(g,function(a){var b=a.replace(A,"");t.push(b),h.push(b)}),i[b]={$element:e,text:f,disclaimers:h},B[b]=c.extend({},i[b])}),t=c.uniq(t),e=h(),f={disclaimerNodes:s,disclaimerData:i,scope:j},e?a.ajax({url:e,dataType:"html"}).done(function(a){g(a,f,j)}).fail(n).complete(function(){
j.trigger(w.events.onDisclaimerCompleted)}):(n(),j.trigger(w.events.onDisclaimerCompleted)))}}function q(){var b,c,d={},e=0;a(w.selectors.disclaimerTooltipWrapper).each(function(){b=a(this).find(w.selectors.tooltipHeading+" + div").text(),d[b]=a(this).find(w.selectors.tooltipHeading).text()}),a(w.selectors.printDisclaimersWrapper).empty();for(c in d)a(w.selectors.printDisclaimersWrapper).append("<p><span>"+d[c]+(d[c]?":":"")+" </span> "+c+"</p>"),e++;e>0?a(w.selectors.printDisclaimersHeader).show():a(w.selectors.printDisclaimersHeader).hide()}var r,s,t,u,v={tooltipMarker:"[*]",delimiter:"/",events:{disclaimersRendered:"disclaimersRendered",onDisclaimerCompleted:"disclaimers.onDisclaimerCompleted"},selectors:{body:"body",disclaimerContainer:"get-disclaimers-html",tooltipTemplate:"script[data-name='template-tooltip']",printDisclaimersHeader:"div.print-disclaimers h3",printDisclaimersWrapper:"div.print-disclaimers div",disclaimerTooltipWrapper:".disclaimer-tooltip",tooltipHeading:".tooltip-heading"},urls:{disclaimerContentUrl:HELIOS.config.common.api.disclaimers||!1},tooltipOptions:{tooltips:{viewport:a(document)}}},w=null,x=new d({prefix:"Disclaimers"}),y=/\[\[(\w+)\]\]/,z=/\[\[(\w+)\]\]/g,A=/\]\]|\[\[/g,B={},C=a({});return{init:f,eventAggregator:C,renderDisclaimers:p,getDisclaimerNodes:o,removeAllDisclaimers:k}}),define("skiplinks",["jquery"],function(a){"use strict";function b(){var b="#container";a(".skiplinks").on("click",function(c){c.preventDefault(),a("html, body").animate({scrollTop:a(b).offset().top},"fast"),a("button:visible, a:visible, input:visible, select:visible, textarea:visible, *[tabindex=0]",b).first().focus()})}return{init:b}}),define("urlParameterDecoder",["jquery"],function(a){"use strict";function b(b){f=a.extend({},e,b)}function c(a){return decodeURIComponent(a.replace(f.pl," "))}function d(a){var b,d={};for(void 0!==a&&(f.query=a),b=f.search.exec(f.query);b;)d[c(b[1])]=c(b[2]),b=f.search.exec(f.query);return d}var e={pl:/\+/g,search:/([^&=]+)=?([^&]*)/g,query:window.location.search.substring(1),pathname:window.location.pathname},f=null;return{init:b,getUrlParams:d}}),define("queryStringStore",["jquery","storageManager","urlParameterDecoder"],function(a,b,c){function d(){if(c.init(),e=c.getUrlParams(),a.isEmptyObject(e))return!1;b.init(),b.saveItem(f.keyName,e,f)}var e,f={keyName:"queryParamsData",mode:"sessionStorage"};return{init:d}}),define("personalisation",["jquery","logger"],function(a,b){"use strict";function c(c){f=new b({prefix:"Personalisation"}),h=a.extend({},g,c),d()}function d(){a(document).on(h.eventName,function(){e()})}function e(){f.info("reInit PictureFill"),window.picturefill()}var f,g={eventName:"adobe.personalisation"},h=null;return{init:c}}),define("trackingCodes",["underscore"],function(a){"use strict";var b={accessories:"accessories",engines:"engines",equipment:"equipment",exteriorColours:"exteriorColours",grades:"grades",stylePacks:"stylePacks",totalPrice:"totalPrice",trims:"trims",wheels:"wheels",upholstery:"upholstery"},c={interactionType:"interactionType",interactionValue:"interactionValue"},d={VIN:"VIN",vehicleModel:"vehicleModel",vehicleId:"vehicleId",vehicleCategory:"vehicleCategory"};return{eventTypes:{accordionExpansion:"accordionExpansion",configuratorCompletion:"configuratorCompletion",configuratorLeave:"configuratorLeave",configuratorSelect:"configuratorSelect",configuratorExpansion:"configuratorExpansion",financeCalculator:"financeCalculator",genericClick:"genericClick",navigationClick:"navigationClick",pageLoad:"pageLoad",buttonNoCookie:"buttonNoCookie",panInteraction:"panInteraction",search:"search",socialShare:"socialShare",toggle:"toggle",ranking:"ranking",tooltipDisplay:"tooltipDisplay",virtualPage:"virtualPage",contentDisplayed:"contentDisplayed",dealerInteraction:"dealerInteraction",fileUpload:"fileUpload"},trackingVars:{accordionExpansion:{accordionText:"accordionText",accordionType:"accordionType",componentId:"componentId",completionStep:"completionStep",vehicleModel:"vehicleModel",vehicleId:"vehicleId",vehicleCategory:"vehicleCategory",vehicleEngine:"vehicleEngine",vehicleEngineId:"vehicleEngineId",status:"status",price:"price",errorMessage:"errorMessage"},modalAccordionExpansion:{accordionText:"accordionText",accordionType:"accordionType",componentId:"componentId"},breakpoint:{screenSize:"screenSize"},buttonClick:{componentId:"componentId",destination:"destination",locationInPage:"locationInPage",buttonText:"buttonText"},colourPicker:{vehicleModel:"vehicleModel",vehicleCategory:"vehicleCategory",interactionType:"interactionType",vehicleId:"vehicleId",colour:"colour"},carouselButtonClick:{promoText:"promoText",locationInPage:"locationInPage",buttonText:"buttonText",destination:"destination"},carouselInteraction:{promoId:"promoId",interactionType:"interactionType",promoText:"promoText",itemNumber:"itemNumber",carouselType:"carouselType",vehicleCategory:"vehicleCategory",vehicleId:"vehicleId",vehicleModel:"vehicleModel"},configuratorCompletion:a.extend(b,{completionStep:"completionStep",interactionType:"interactionType",interactionValue:"interactionValue",navigationStep:"navigationStep"}),configuratorExpansion:{expansionType:"expansionType",expansionText:"expansionText",totalPrice:"totalPrice"},configuratorCompletionInventoryLink:a.extend(b,{completionStep:"completionStep",completionType:"completionType",locationInPage:"locationInPage",destination:"destination",buttonText:"buttonText"}),configuratorInteraction:c,configuratorSelect:a.extend(c,{interactionPrice:"interactionPrice",totalPrice:"totalPrice",vehicleModel:"vehicleModel",MCD:"MCD",grade:"grade",removeSelection:"removeSelection",removeSelectionPrice:"removeSelectionPrice",action:"action"}),configuratorConflictSelect:a.extend(c,{interactionPrice:"interactionPrice",totalPrice:"totalPrice",priceDifference:"priceDifference",removeSelection:"removeSelection",removeSelectionPrice:"removeSelectionPrice"}),configuratorLeave:a.extend(c,{destination:"destination",locationInPage:"locationInPage",buttonText:"buttonText",impactPrice:"impactPrice"}),configuratorOffersOverlay:{offerId:"offerId",offerText:"offerText",locationInPage:"locationInPage",componentId:"componentId"},configuratorOffersCta:{offerId:"offerId",offerText:"offerText",locationInPage:"locationInPage",componentId:"componentId",destination:"destination",buttonText:"buttonText"},contentAction:{offerId:"offerId",offerText:"offerText"},contentDisplayed:{offerId:"offerId",offerText:"offerText",unreadMessages:"unreadMessages",locationInPage:"locationInPage",status:"status",componentId:"componentId",vehicleModel:"vehicleModel",vehicleId:"vehicleId",vin:"vin",vehicleCategory:"vehicleCategory",formCategory:"formCategory",formName:"formName",formStepName:"formStepName",formStepNumber:"formStepNumber",formType:"formType",pageName:"pageName",templateName:"templateName",MCD:"MCD",grade:"grade",buttonText:"buttonText",destination:"destination"},dealerInteraction:{componentId:"componentId",dealerName:"dealerName",dealerId:"dealerId",dealerAddress:"dealerAddress",dealerAction:"dealerAction",dealerType:"dealerType",buttonText:"buttonText"},download:{brochureName:"brochureName",brochureType:"brochureType",locationInPage:"locationInPage",vehicleModel:"vehicleModel",vehicleId:"vehicleId",vehicleCategory:"vehicleCategory",brochureAmount:"brochureAmount"},financeCalculator:a.extend(b,a.extend(d,{vehicleName:"vehicleName",vehicleGrade:"vehicleGrade",vehicleCategory:"vehicleCategory",vehicleId:"vehicleId",financeCalculatorStep:"financeCalculatorStep",state:"state",city:"city",downPayment:"downPayment",tenure:"tenure",monthlyInstalments:"monthlyInstalments",interactionCount:"interactionCount",slidersUsed:"slidersUsed",destination:"destination",locationInPage:"locationInPage",buttonText:"buttonText"})),formSteps:{formName:"formName",formStepName:"formStepName",formStepNumber:"formStepNumber",formType:"formType",formSubmission:"formSubmission",formSubmissionSuccess:"formSubmissionSuccess",templateName:"templateName",formCategory:"formCategory",errorMessage:"errorMessage",leadCategory:"leadCategory",leadId:"leadId",dealerId:"dealerId",dealerName:"dealerName",dealerType:"dealerType",dealerAddress:"dealerAddress",destination:"destination",vehicleId:"vehicleId",vehicleModel:"vehicleModel",vehicleCategory:"vehicleCategory",serviceType:"serviceType",serviceValue:"serviceValue",bookingDate:"bookingDate",bookingTime:"bookingTime",buttonText:"buttonText",locationLong:"locationLong",locationLat:"locationLat",locationInPage:"locationInPage",offerId:"offerId",offerTypeTitle:"offerTypeTitle",offerHeadline:"offerHeadline",offerStrapline:"offerStrapline",offerHighlight:"offerHighlight",pageType:"pageType",brochureName:"brochureName",brochureType:"brochureType",brochureAmount:"brochureAmount",allOptIn:"allOptIn"},pageLoad:{componentId:"componentId",formCount:"formCount",formName:"formName",templateName:"templateName",formStepName:"formStepName",formStepNumber:"formStepNumber",serviceType:"serviceType",serviceValue:"serviceValue",pageType:"pageType",formCategory:"formCategory",formType:"formType",leadId:"leadId",brochureName:"brochureName",brochureAmount:"brochureAmount",vehicleModel:"vehicleModel",vehicleCategory:"vehicleCategory",vehicleId:"vehicleId",fileType:"fileType",acceptFile:"acceptFile"},fileUpload:{componentId:"componentId",fileType:"fileType",errorMessage:"errorMessage"},vehicleSelector:{formName:"formName",formStepName:"formStepName",parentComponent:"parentComponent",selectDropdown:"selectDropdown",selectModel:"selectModel",selectGrade:"selectGrade",selectEngine:"selectEngine",selectVersion:"selectVersion",selectColour:"selectColour"},genericProperties:{componentId:"componentId",completionStep:"completionStep",pageName:"pageName"},genericClick:a.extend(d,a.extend(b,{componentId:"componentId",destination:"destination",financeCalculatorStep:"financeCalculatorStep",locationInPage:"locationInPage",buttonText:"buttonText",errorMessage:"errorMessage",urlSelect:"urlSelect",contentAction:"contentAction",vehicleId:"vehicleId",vehicleCategory:"vehicleCategory",vehicleEngine:"vehicleEngine",vehicleEngineId:"vehicleEngineId",vehicleVersion:"vehicleVersion",vehicleVersionId:"vehicleVersionId",vehicleGrade:"vehicleGrade",vehicleGradeId:"vehicleGradeId",vehiclePrice:"vehiclePrice",priceType:"priceType",priceCurrency:"priceCurrency",contentInteraction:"contentInteraction",signupType:"signupType",signupSuccess:"signupSuccess",loginType:"loginType",loginSuccess:"loginSuccess",loginPersistence:"loginPersistence",offerId:"offerId",offerText:"offerText",vehicleModel:"vehicleModel",vehicleYear:"vehicleYear",completionType:"completionType",dealerAddress:"dealerAddress",dealerName:"dealerName",dealerId:"dealerId"})),buttonNoCookie:a.extend(d,a.extend(b,{componentId:"componentId",destination:"destination",financeCalculatorStep:"financeCalculatorStep",locationInPage:"locationInPage",buttonText:"buttonText",errorMessage:"errorMessage",urlSelect:"urlSelect",contentAction:"contentAction",vehicleId:"vehicleId",vehicleCategory:"vehicleCategory",contentInteraction:"contentInteraction",signupType:"signupType",signupSuccess:"signupSuccess",loginType:"loginType",loginSuccess:"loginSuccess",loginPersistence:"loginPersistence"})),liveChat:{},navigationClick:{destination:"destination",locationInPage:"locationInPage",buttonText:"buttonText"},ownerServicesInteraction:{componentId:"componentId",interactionType:"interactionType",vehicleModel:"vehicleModel",vehicleCategory:"vehicleCategory",vehicleId:"vehicleId",locationInPage:"locationInPage",status:"status",errorMessage:"errorMessage",orderIdentifier:"orderIdentifier",loginStatus:"loginStatus",orderStatus:"orderStatus",orderId:"orderId",orderDate:"orderDate",dealerId:"dealerId",deliveryDate:"deliveryDate",registrationType:"registrationType",fileType:"fileType"},ownerServicesUpdate:{profileItemUpdate:"profileItemUpdate",profileItemState:"profileItemState",profileItemGroup:"profileItemGroup",errorMessage:"errorMessage"},panInteraction:{interactionType:"interactionType",vehicleModel:"vehicleModel",vehicleId:"vehicleId",vehicleCategory:"vehicleCategory"},popIn:{promptId:"promptId",promptText:"promptText",promptAction:"promptAction"},postcodeLookup:{errorMessage:"errorMessage"},reviewDisplayed:{reviewScore:"reviewScore",VehicleModel:"VehicleModel",vehicleID:"vehicleID",vehicleCategory:"vehicleCategory"},search:{componentId:"componentId",searchType:"searchType",searchTerm:"searchTerm",searchTermType:{userSearch:"userSearch",geolocation:"geolocation",autoAdjust:"autoadjust"},searchFilter:"searchFilter",searchFilterValue:"searchFilterValue",searchFilterResults:"searchFilterResults",searchResults:"searchResults",offerCount:"offerCount",pageType:"pageType",action:"action",errorMessage:"errorMessage",vehicleId:"vehicleId",vehicleModel:"vehicleModel",vehicleYear:"vehicleYear",locationInPage:"locationInPage",buttonText:"buttonText",contentAction:"contentAction",dealerSearchTerm:"dealerSearchTerm",locationSearchTerm:"locationSearchTerm"},sliderInteraction:{sliderType:"sliderType",VehicleModel:"VehicleModel",vehicleId:"vehicleId",vehicleCategory:"vehicleCategory"},socialShare:a.extend(b,{contentShown:"contentShown",networkNames:"networkNames",numberNetworks:"numberNetworks",socialNetwork:"socialNetwork",urlShared:"urlShared"}),spinnerViewer:{interactionType:"interactionType",VehicleModel:"VehicleModel",vehicleId:"vehicleId",vehicleCategory:"vehicleCategory"},toggle:a.extend(d,{componentId:"componentId",toggleType:"toggleType",toggleText:"toggleText",toggleValue:"toggleValue",parentComponent:"parentComponent"}),tooltipDisplay:{tooltipTitle:"tooltipTitle",parentComponent:"parentComponent",componentId:"componentId"},formCount:{formCount:"formCount",componentId:"componentId"},formType:{formType:"formType"},formCategory:{formCategory:"formCategory"},vehicleCompare:{vehicleModel:"vehicleModel",vehicleId:"vehicleId",vehicleCompare:"vehicleCompare",vehicleGrade:"vehicleGrade",vehicleGradeId:"vehicleGradeId",vehicleGradeCompare:"vehicleGradeCompare",vehicleVersion:"vehicleVersion",vehicleVersionId:"vehicleVersionId",vehicleVersionCompare:"vehicleVersionCompare",VehicleIdCompare:"VehicleIdCompare",numVehicles:"numVehicles",interactionType:"interactionType"},videoInteraction:{videoName:"videoName",videoInteraction:"videoInteraction",autoplay:"autoplay"},virtualPage:a.extend(b,{componentId:"componentId",configuratorVersion:"configuratorVersion",templateId:"templateId",pageName:"pageName",pageType:"pageType",pageUrl:"pageUrl",locationInPage:"locationInPage",buttonText:"buttonText",unreadMessages:"unreadMessages",navigationStep:"navigationStep",vehicleCategory:"vehicleCategory",vehicleId:"vehicleId",vehicleModel:"vehicleModel",vehiclePrice:"vehiclePrice"}),virtualPageError:{pageName:"pageName",pageType:"pageType",pageUrl:"pageUrl"},print:{buttonText:"buttonText"},switchVersion:{versionId:"versionId",gradeId:"gradeId",section:"section"},ranking:{ranking:"ranking",componentId:"componentId",rankingText:"rankingText",rankingType:"rankingType",parentComponent:"parentComponent"},cfgLinearNavigation:{navigationStep:"navigationStep"}},noId:["breakpoint","formCount"],caseExclusions:["componentId","vehicleModel","vehicleId","vehicleCategory"],hyphenated:["formStepName","formStepNumber"],persistentProperties:["adobeAccount","googleAccount","targetCode","pageName","pageType","loginStatus","vehicleModel","vehicleId","dealerId","vehicleCategory","screenSize","customerId","countryCode","languageCode","testDriveDealerId","testDriveDealerLocationLat","testDriveDealerLocationLong","testDriveDealerTradingName","testDriveLeadId","testDriveVehicleModelCode","testDriveVehicleModelName","offerCount","formCount","userLocation","configuratorVersion"],componentIds:{c19_25_Dealer_Locator:"C19.25_Dealer_Locator",c023_2Anchor_Links_Panel:"C23-2_Anchor_Links_Panel",c084ConfiguratorMenu:"C84_Configurator_Menu",c085EngineTrayFilter:"C85_Engine_Tray_Filter",c085_2CategoryTrays:"C85.2_Category_Trays",c085_2_21EvCards:"C85.2.21_EV_Cards",c86ConfiguratorDoubleCategory:"C86_Configurator_Double_Category",C86_Configurator_Tray:"C86_Configurator_Tray",c86VersionTrayFilter:"C86_Version_Tray_Filter",c86View:"C86_View",c86_2ConfiguratorOptionSelect:"C86_2_Configurator_Option_Select",c86_2ConfiguratorConflicts:"C86_2_Configurator_Conflicts",c86_2ConfiguratorFeaturesToggle:"C86_2_Configurator_Features_Toggle",c087ConfiguratorStage:"C87_Configurator_Stage",c088ConfiguratorFullWidth:"C88_Configurator_Full_Width",c090ConfiguratorFooter:"C90_Configurator_Footer",c091ImFinished:"C91_Im_Finished",c92ConfiguratorSaveOverlay:"C92_Configurator_Save_Overlay",c103ConfiguratorSocialShare:"C103_Configurator_Social_Share",c105FinanceCalculator:"C105_Finance_Calculator",c106ConfiguratorResetOverlay:"C106_Configurator_Reset_Overlay",c148_1ConfiguratorCarSummaryOptions:"c148_1ConfiguratorCarSummaryOptions",c148_2ConfiguratorCarSummary:"C148_2_Configurator_Car_Summary",c148_5ConfiguratorCarSummary:"C148_5_Configurator_Car_Summary",c148_1SummaryEditButton:"C_148_1_Summary_Edit_Button",c148_1ConfiguratorCarSummary:"C148_Car_Summary",c158ConfiguratorEngineInformationOverlay:"C158_Configurator_Engine_Information_Overlay",C181InventoryContainer:"C181_Inventory_Container",c187ConfiguratorSignpostingCtas:"C187_Configurator_Signposting_CTAs",c192_AConfiguratorVersionConflictOverlay:"C192-A_Configurator_Version_Conflict_Overlay",c192_BConfiguratorAllFeaturesOverlay:"C192-B_Configurator_All_Features_Overlay",c197ModelSpecificOffersListing:"C197_Model_Specific_Offers_Listing",c199LeaseOfferOverlay:"C199_Lease_Offer_Overlay",c200InventoryIntegration:"C200_Inventory_Integration",C200ConfiguratorLocation:"C200_Configurator_Location",c200_1ConfiguratorLocation:"C200-1_Configurator_Location",c201ConfiguratorLocationCapture:"C201_Configurator_Location_Capture",c201_1ConfiguratoLocationCapture:"C201-1_Configurator_Location_Capture",c201_2ConfiguratoLocation:"C201-2_Configurator_Location",c202_1GradeOffers:"C202.1_Grade_Version_Overview_Offers",c202_1VersionOffers:"version-card",c202_2MainOffers:"C202.2_Main_Offers",c202_2VersionOffers:"version-card",c202_3SummaryOffers:"C202.3_Summary_Offers",c202_3VersionOffers:"version-card",c202_4ConfiguratorOffersOverlay:"C202.4_Configurator_Offers_Overlay",c201_0LocationCaptureOverlayContent:"C201.0_Location_Capture_Overlay_Content",c201_0ConfiguratorLocation:"C201.0_Configurator_Location",c201_1ConfiguratorLocationOverlay:"C201-1_Configurator_Location_Overlay",c201_3ConfiguratorLocationOverlay:"C201-3_Configurator_Location_Overlay",C119_1_Servicing_Dashboard:"C119-1_Servicing_Dashboard",C120_2_Signpost:"C120-2_Signpost",C118_My_Car:"C118_My_Car",C160_0B_Basic_Specifications_Highlight:"C160.0B_Basic_Specifications_Highlight",C161_0A_Basic_Specifications_Highlight:"C161.0A_Basic_Specifications_Highlight",C208_Content_Caption:"C208_Content_Caption",C211_split_model:"C211_split_model",C215_Linked_Dropdowns:"C215_Linked_Dropdowns",C216_Listed_Links:"C216_Listed_Links",C207_1_Location_Input:"C207-1_Location_Input",C207_2_Results_List:"C207-2_Results_List",C207_2_Dealer_Details:"C207-2_Dealer_Details",C207_5_Legal_Footer:"C207_5_Legal_Footer",C207_3_Map:"C207-3_Map",C207_6_Filter:"C207-6_Filter",C236_Reviews:"C236_Reviews",c_085_2_Configurator_Navbar:"c_085-2-Configurator_Navbar",c_085_2_Configurator_Sub_Navbar:"c_085-2-Configurator_Sub_Navbar",c_085_4_Configurator_Nextbutton:"c_085-4-Configurator_Nextbutton",c_085_2_Configurator_Urlchange:"c_085-2-Configurator_Urlchange",c_086_X_AutoContinue:"c_086_X_AutoContinue",browser:"browser",c_090_Configurator_Navbar:"c_090-Configurator_Navbar",direct:"direct"}}}),define("analyticsManager",["jquery","underscore","storageManager","logger","trackingCodes"],function(a,b,c,d,e){"use strict";function f(a){this.initd=!1,a&&a.window&&a.HELIOS&&a._satellite&&a._satellite.setVar&&a._satellite.track&&(this.init(a),this.initd=!0),c.init(),this.initTrackingVars()}var g,h,i={events:{analyticsEvent:"analyticsEvent"},properties:{adobeTagging:"adobeTagging",adobeTaggingComponent:"adobeTaggingComponent",sessionId:"sessionId"},journeyStorageKey:"analyticsJourneyData",journeyStorageMode:"sessionStorage",formCount:"formCount"};return f.prototype.init=function(b){h=new d({prefix:"AnalyticsManager"}),this.HELIOS=b.HELIOS,this.satellite=b._satellite,this.window=b.window,this.componentId=b.componentId||"",b.eventEl&&(this.$eventEl=a(b.eventEl),this.bindEvents()),this.HELIOS.adobe&&this.HELIOS.adobe.tagging&&(this.taggingObject=this.HELIOS.adobe.tagging),h.info("Init AnalyticsManager")},f.prototype.initTrackingVars=function(){this.trackingVars=function(){var a,b=e.trackingVars,c={};for(a in b)b.hasOwnProperty(a)&&(c[a]=a);return c}()},f.prototype.setNewSession=function(a){var c={};b.isString(a)&&(c.sessionId=a,this.taggingObject=c)},f.prototype.getSession=function(){if(!b.isEmpty(this.taggingObject))return this.taggingObject},f.prototype.submitTracking=function(c,d){var e,f,g=!1,j=a(c);return b.isEmpty(this.taggingObject)||(d&&(this.updateTaggingObject(d),this.updateGlobalTrackingObject()),j.data(i.properties.adobeTagging)?(e=j.data(i.properties.adobeTagging),f=this.componentId+"."+e,this.satellite.track(f),this.window.googleDataLayer.push(this.HELIOS.adobe.tagging,{event:f}),h.debug("Satellite.track() "+f)):j.data(i.properties.adobeTaggingComponent)?(e=j.data(i.properties.adobeTaggingComponent),f=e,this.satellite.track(f),this.window.googleDataLayer.push(this.HELIOS.adobe.tagging,{event:f}),h.debug("Satellite.track() "+f)):"string"==typeof c?(f=c,this.satellite.track(f),this.window.googleDataLayer.push(this.HELIOS.adobe.tagging,{event:f}),h.debug("Satellite.track() "+f)):h.error("Missing adobe-data-tagging attr"),g=!0),g},f.prototype.setVar=f.prototype.updateTaggingObject=function(a){var c;if(this.satellite&&b.isFunction(this.satellite.setVar)&&b.isFunction(this.satellite.track)&&b.isObject(a))return b.extend(this.taggingObject,a),c=JSON.stringify(this.taggingObject),this.taggingObject.hasOwnProperty(i.properties.sessionId)&&(this.satellite.setVar(this.taggingObject.sessionId,c),this.satellite.track(this.taggingObject.sessionId)),!0},f.prototype.updateGlobalTrackingObject=function(){!b.isEmpty(this.taggingObject)&&this.initd&&(HELIOS.adobe.tagging=this.taggingObject,this.HELIOS.adobe.tagging=this.taggingObject,h.info("Update HELIOS.adobe.tagging"))},f.prototype.bindEvents=function(){this.$eventEl.on(i.events.analyticsEvent,this.setVar,this)},f.prototype.unbindEvents=function(){this.$eventEl.off(i.events.analyticsEvent)},f.prototype.saveLocalStorage=function(){this.HELIOS&&this.HELIOS.adobe&&this.HELIOS.adobe.tagging&&(c.saveItem(i.properties.adobeTagging,this.HELIOS.adobe.tagging),h.info("Save adobeTagging to localStorage"))},f.prototype.readLocalStorage=function(){this.HELIOS&&this.HELIOS.adobe&&this.HELIOS.adobe.tagging&&(g=c.loadItem(i.properties.adobeTagging),this.HELIOS.adobe.tagging=a.extend({},g,this.HELIOS.adobe.tagging),h.info("Extend HELIOS obj with adobeTagging localStorage"))},f.prototype.trackComponent=function(a){this.updateTaggingObject(a),this.updateGlobalTrackingObject()},f.prototype.emptyHeliosTaggingObject=function(){this.initd&&(this.HELIOS.adobe.tagging=b.pick(this.HELIOS.adobe.tagging,e.persistentProperties))},f.prototype.updateHeliosTaggingObject=function(b){this.initd&&(this.HELIOS.adobe.tagging=a.extend(this.HELIOS.adobe.tagging,b))},f.prototype.submit=function(a,c){var d,e=!1;if(this.initd)return b.isEmpty(this.taggingObject)||(c&&(this.emptyHeliosTaggingObject(),this.updateHeliosTaggingObject(c)),this.satellite.track(a),"navigationClick"===a&&c.buttonText&&c.destination&&c.locationInPage&&(d=this.satellite.getVar("Short Page Name")||"",d.toLowerCase(),this.satellite.setCookie("satNavigation",c.buttonText+"|"+c.destination+"|"+d+"|"+c.locationInPage)),this.window.googleDataLayer.push(this.HELIOS.adobe.tagging,{event:a}),h.debug("Satellite.track() "+a),e=!0),e},f.prototype.getTrackingVar=function(a){if(e.trackingVars.hasOwnProperty(a))return a;h.warn("Error. Invalid trackingVar: "+a)},f.prototype.getTrackingObjectProperties=function(a){return b.contains(e.noId,a)||(e.trackingVars[a].componentId="componentId"),e.trackingVars[a]||!1},f.prototype.track=function(c,d,f){var g,i=function(a){var b=document.createElement("a");return b.href=a,b.protocol+"//"+b.host+b.pathname+b.search+b.hash};if(this.initd){if(!d.hasOwnProperty("componentId")&&!b.contains(e.noId,c))return h.warn("Error. The 'componentId' property is missing from the trackingObj for the '"+c+"'"),!1;for(g in d)d.hasOwnProperty(g)&&("string"==typeof d[g]?(d[g]=a.trim(d[g]),"destination"===g&&(d[g]=i(d[g])),-1===e.caseExclusions.indexOf(g)&&(d[g]=d[g].toLowerCase()),-1!==e.hyphenated.indexOf(g)&&(d[g]=d[g].replace(/\s+/g,"-"))):h.warn("Error. TrackingObj property: '"+g+"', used with the trackingVar of '"+c+"' is not of type string"));if(f)for(g in d)this.HELIOS.adobe.tagging[g]=d[g];else this.submit(c,d);return h.table(d),!0}},f.prototype.append=function(a,b){this.tag(a,b,!0)},f.prototype.tag=function(b,c,d){var e=this.getTrackingVar(b),f=this.getTrackingObjectProperties(e),g={};this.initd&&(a.each(c,function(a,b){f.hasOwnProperty(a)?g[f[a]]=b:h.warn("Error. Invalid property in trackingObj: "+a)}),this.track(e,g,d))},f.prototype.trackViewPortSize=function(){var a="small";this.initd&&(!window.matchMedia||window.matchMedia(this.HELIOS.config.common.mediaQuery.is.large).matches?a="large":window.matchMedia(this.HELIOS.config.common.mediaQuery.is.medium).matches&&(a="medium"),this.track("breakpoint",{screenSize:a},!0))},f.prototype.trackFormCount=function(){this.getFormCount()&&this.track("formCount",{formCount:this.getFormCount()},!0)},f.prototype.addCustomerId=function(a){this.initd&&(this.HELIOS.adobe.tagging.customerId=a)},f.prototype.removeCustomerId=function(){this.initd&&delete this.HELIOS.adobe.tagging.customerId},f.prototype.storeJourneyData=function(a,b,d){c.saveItem(i.journeyStorageKey,{name:a,id:b,data:d},{mode:i.journeyStorageMode})},f.prototype.getJourneyDataById=function(a){var b=c.loadItem(i.journeyStorageKey,{mode:i.journeyStorageMode});return!(!b||b.id!=a)&&b},f.prototype.getJourneyDataByName=function(a){var b=c.loadItem(i.journeyStorageKey,{mode:i.journeyStorageMode});return!(!b||b.name!==a)&&b},f.prototype.clearJourneyData=function(){return c.deleteItem(i.journeyStorageKey,{mode:i.journeyStorageMode}),!0},f.prototype.getFormCount=function(){var a=c.loadItem(i.formCount,{mode:i.journeyStorageMode});return a||!1},f}),define("getConfiguratorCode",["jquery","underscore","remoteServices"],function(a,b,c){"use strict";function d(a,b,d,e,f,g){var h="/v2/models/"+a+"/grades/"+b;return d&&(h+="/versions/"+d),h+="/configurationCode",c.getConfiguratorCode(h,e).then(function(a){var b;return a=a,a&&a.configurationCode?(b=f.split("#configure/"),f=b&&b.length?b[0]:f,f=f.indexOf(".html")>-1?f:f+".html",f+="#configure/"+a.configurationCode+(g?"/"+g:"")):f})}return{configureRemoteServices:d}}),define("c_001",["jquery","underscore","getConfiguratorCode"],function(a,b,c){"use strict";function d(b,c){this.settings=a.extend({},e,c),this.$el=b,this._bindEvents()}var e={selectors:{ctaButton:".cta-list a",configureButton:".cta-configure",accordionPanel:".accordion-panel"},data:{modelCode:"model-code",gradeCode:"grade-code",versionCode:"version-code",urlExtension:"url-extension",serviceDataPath:"service-datapath"},attr:{target:"target",href:"href"},CONSTANTS:{TARGETBLANK:"_blank",TARGETPARENT:"_parent"}};return d.prototype._bindEvents=function(){var a=this;this.$el.find(this.settings.selectors.ctaButton).on("click",function(){a._handleClick(this)}),this.$el.find(this.settings.selectors.configureButton).on("click",function(b){b.preventDefault(),a._configureCall(this)})},d.prototype._handleClick=function(b){var c=a(b),d=c.text(),e=b.href,f=this.settings.analyticsManager,g={componentId:"C1-A_Text",destination:e,locationInPage:"action-panel",buttonText:d};f.tag(f.trackingVars.genericClick,g)},d.prototype.destroy=function(){this.$el.find(this.settings.selectors.ctaButton).off("click"),this.$el.remove(),delete this.settings},d.prototype._configureCall=function(b){var d=a(b),e=this.settings,f=d.data(e.data.modelCode),g=d.data(e.data.gradeCode),h=d.data(e.data.versionCode),i=d.data(e.data.urlExtension),j=d.data(e.data.serviceDataPath),k=d.attr(e.attr.href),l=d.attr(e.attr.target);l!==e.CONSTANTS.TARGETBLANK&&(l=e.CONSTANTS.TARGETPARENT),f&&g&&j&&k?c.configureRemoteServices(f,g,h,j,k,i).done(function(a){d.attr(e.attr.href,a),e.window.open(a,l)}).fail(function(){e.window.open(k,l)}):e.window.open(k,l)},d}),function(){"use strict";function a(d){if(!d)throw new Error("No options passed to Waypoint constructor");if(!d.element)throw new Error("No element option passed to Waypoint constructor");if(!d.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+b,this.options=a.Adapter.extend({},a.defaults,d),this.element=this.options.element,this.adapter=new a.Adapter(this.element),this.callback=d.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=a.Context.findOrCreateByElement(this.options.context),a.offsetAliases[this.options.offset]&&(this.options.offset=a.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),c[this.key]=this,b+=1}var b=0,c={};a.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)},a.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)},a.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete c[this.key]},a.prototype.disable=function(){return this.enabled=!1,this},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},a.prototype.next=function(){return this.group.next(this)},a.prototype.previous=function(){return this.group.previous(this)},a.invokeAll=function(a){var b=[];for(var d in c)b.push(c[d]);for(var e=0,f=b.length;e<f;e++)b[e][a]()},a.destroyAll=function(){a.invokeAll("destroy")},a.disableAll=function(){a.invokeAll("disable")},a.enableAll=function(){a.invokeAll("enable")},a.refreshAll=function(){a.Context.refreshAll()},a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},a.viewportWidth=function(){return document.documentElement.clientWidth},a.adapters=[],a.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=a}(),function(){"use strict";function a(a){window.setTimeout(a,1e3/60)}function b(a){this.element=a,this.Adapter=e.Adapter,this.adapter=new this.Adapter(a),this.key="waypoint-context-"+c,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},a.waypointContextKey=this.key,d[a.waypointContextKey]=this,c+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var c=0,d={},e=window.Waypoint,f=window.onload;b.prototype.add=function(a){var b=a.options.horizontal?"horizontal":"vertical";this.waypoints[b][a.key]=a,this.refresh()},b.prototype.checkEmpty=function(){var a=this.Adapter.isEmptyObject(this.waypoints.horizontal),b=this.Adapter.isEmptyObject(this.waypoints.vertical);a&&b&&(this.adapter.off(".waypoints"),delete d[this.key])},b.prototype.createThrottledResizeHandler=function(){function a(){b.handleResize(),b.didResize=!1}var b=this;this.adapter.on("resize.waypoints",function(){b.didResize||(b.didResize=!0,e.requestAnimationFrame(a))})},b.prototype.createThrottledScrollHandler=function(){function a(){b.handleScroll(),b.didScroll=!1}var b=this
;this.adapter.on("scroll.waypoints",function(){b.didScroll&&!e.isTouch||(b.didScroll=!0,e.requestAnimationFrame(a))})},b.prototype.handleResize=function(){e.Context.refreshAll()},b.prototype.handleScroll=function(){var a={},b={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var c in b){var d=b[c],e=d.newScroll>d.oldScroll,f=e?d.forward:d.backward;for(var g in this.waypoints[c]){var h=this.waypoints[c][g],i=d.oldScroll<h.triggerPoint,j=d.newScroll>=h.triggerPoint,k=i&&j,l=!i&&!j;(k||l)&&(h.queueTrigger(f),a[h.group.id]=h.group)}}for(var m in a)a[m].flushTriggers();this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}},b.prototype.innerHeight=function(){return this.element==this.element.window?e.viewportHeight():this.adapter.innerHeight()},b.prototype.remove=function(a){delete this.waypoints[a.axis][a.key],this.checkEmpty()},b.prototype.innerWidth=function(){return this.element==this.element.window?e.viewportWidth():this.adapter.innerWidth()},b.prototype.destroy=function(){var a=[];for(var b in this.waypoints)for(var c in this.waypoints[b])a.push(this.waypoints[b][c]);for(var d=0,e=a.length;d<e;d++)a[d].destroy()},b.prototype.refresh=function(){var a,b=this.element==this.element.window,c=this.adapter.offset(),d={};this.handleScroll(),a={horizontal:{contextOffset:b?0:c.left,contextScroll:b?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:b?0:c.top,contextScroll:b?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var e in a){var f=a[e];for(var g in this.waypoints[e]){var h,i,j,k,l,m=this.waypoints[e][g],n=m.options.offset,o=m.triggerPoint,p=0,q=null==o;m.element!==m.element.window&&(p=m.adapter.offset()[f.offsetProp]),"function"==typeof n?n=n.apply(m):"string"==typeof n&&(n=parseFloat(n),m.options.offset.indexOf("%")>-1&&(n=Math.ceil(f.contextDimension*n/100))),h=f.contextScroll-f.contextOffset,m.triggerPoint=p+h-n,i=o<f.oldScroll,j=m.triggerPoint>=f.oldScroll,k=i&&j,l=!i&&!j,!q&&k?(m.queueTrigger(f.backward),d[m.group.id]=m.group):!q&&l?(m.queueTrigger(f.forward),d[m.group.id]=m.group):q&&f.oldScroll>=m.triggerPoint&&(m.queueTrigger(f.forward),d[m.group.id]=m.group)}}for(var r in d)d[r].flushTriggers();return this},b.findOrCreateByElement=function(a){return b.findByElement(a)||new b(a)},b.refreshAll=function(){for(var a in d)d[a].refresh()},b.findByElement=function(a){return d[a.waypointContextKey]},window.onload=function(){f&&f(),b.refreshAll()},e.requestAnimationFrame=function(b){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||a).call(window,b)},e.Context=b}(),function(){"use strict";function a(a,b){return a.triggerPoint-b.triggerPoint}function b(a,b){return b.triggerPoint-a.triggerPoint}function c(a){this.name=a.name,this.axis=a.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),d[this.axis][this.name]=this}var d={vertical:{},horizontal:{}},e=window.Waypoint;c.prototype.add=function(a){this.waypoints.push(a)},c.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},c.prototype.flushTriggers=function(){for(var c in this.triggerQueues){var d=this.triggerQueues[c],e="up"===c||"left"===c;d.sort(e?b:a);for(var f=0,g=d.length;f<g;f+=1){var h=d[f];(h.options.continuous||f===d.length-1)&&h.trigger([c])}}this.clearTriggerQueues()},c.prototype.next=function(b){this.waypoints.sort(a);var c=e.Adapter.inArray(b,this.waypoints);return c===this.waypoints.length-1?null:this.waypoints[c+1]},c.prototype.previous=function(b){this.waypoints.sort(a);var c=e.Adapter.inArray(b,this.waypoints);return c?this.waypoints[c-1]:null},c.prototype.queueTrigger=function(a,b){this.triggerQueues[b].push(a)},c.prototype.remove=function(a){var b=e.Adapter.inArray(a,this.waypoints);b>-1&&this.waypoints.splice(b,1)},c.prototype.first=function(){return this.waypoints[0]},c.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},c.findOrCreate=function(a){return d[a.axis][a.name]||new c(a)},e.Group=c}(),function(){"use strict";function a(a){this.$element=b(a)}var b=window.jQuery,c=window.Waypoint;b.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(b,c){a.prototype[c]=function(){var a=Array.prototype.slice.call(arguments);return this.$element[c].apply(this.$element,a)}}),b.each(["extend","inArray","isEmptyObject"],function(c,d){a[d]=b[d]}),c.adapters.push({name:"jquery",Adapter:a}),c.Adapter=a}(),function(){"use strict";function a(a){return function(){var c=[],d=arguments[0];return a.isFunction(arguments[0])&&(d=a.extend({},arguments[1]),d.handler=arguments[0]),this.each(function(){var e=a.extend({},d,{element:this});"string"==typeof e.context&&(e.context=a(this).closest(e.context)[0]),c.push(new b(e))}),c}}var b=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=a(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=a(window.Zepto))}(),define("waypoints",function(){}),define("c_004",["jquery","waypoints"],function(a,b){"use strict";function c(b){var c;if(k=a.extend({},j,b),f=a(k.selectors.root),!f.length)return!1;i=a(k.selectors.linkZone),g=a(k.selectors.navLinks),h=g.find(k.selectors.dockedNav),c=i.index(a(k.selectors.contentDividerHidden)),-1!==c&&(a(i[c]).removeClass(k.classes.contentDividerHidden),a(i[c]).find(k.selectors.hr).remove(),a(k.selectors.contentDividerHidden).not(function(){return a(this).parent().hasClass(k.classes.tabZone)}).removeClass(k.classes.contentDividerHidden).addClass(k.classes.contentDivider)),a(window).on("resize, load",d)}function d(){if(!i.length)return!1;for(var b=0;b<i.length;b++)a(i[b]).attr("id")&&(new Waypoint({element:i[b],handler:e,offset:h.height()+k.headerAdjustmentDown}),new Waypoint({element:i[b],handler:e,offset:-a(i[b]).height()+h.height()+k.headerAdjustmentUp}))}function e(){var b=a(this.element).attr("id"),c=g.find('a[href="#'+b+'"]');c.hasClass(k.classes.active)||(g.find("a").removeClass(k.classes.active),c.addClass(k.classes.active))}var f,g,h,i,j={classes:{active:"active",contentDividerHidden:"content-divider-hidden",contentDivider:"content-divider",tabZone:"tabZone"},selectors:{navLinks:".c_023-2",linkZone:".c_002",root:".c_004",contentDividerHidden:".content-divider-hidden",contentDivider:".content-divider",hr:"> hr:first",dockedNav:".docked-nav-wrapper"},headerAdjustmentDown:100,headerAdjustmentUp:150},k=null;return{init:c}}),define("storeDealer",["storageManager","underscore"],function(a,b){"use strict";function c(a){this.settings=b.extend({},d,a),this.namespace=this.settings.namespace}var d={namespace:"dealerID",expiryTime:12e4};return c.prototype.init=function(){return!!this.settings.HELIOS&&(this.settings.HELIOS[this.namespace]=this.settings.HELIOS[this.namespace]||{},a.init(),this)},c.prototype.save=function(c){if(b.isUndefined(c)||!c.length)return!1;var d=(new Date).getTime(),e=this.settings.expiryTime+d;a.saveItem(this.settings.namespace,{dealerID:c},{customExpiryDate:new Date(e)})},c}),define("goTo",[],function(){"use strict";var a={};return a.run=function(a,b){a?window.open(b,a):window.location.href=b},a}),define("c_005",["jquery","underscore","storeDealer","goTo"],function(a,b,c,d){"use strict";function e(b,d){var e,f=a.extend(!0,{},g);this.settings=a.extend({},f,d),this.$elements={},this.HELIOS=this.settings.HELIOS,this.window=this.settings.window,e=this.settings.selectors,b.find(e.listItems).length||b.find(e.linkList).hide(),this.$elements.$links=b.find(e.videoLinks),this.$elements.$bodyLinks=b.find(e.textLinks),this.$elements.$imageSelector=b.find(e.imageSelector),this.isVideo="video"===b.find(e.videoSelector).attr(this.settings.attrs.itemprop),this.isClickable="true"===b.attr(this.settings.attrs.dataClickable),this.$elements.$firstLink=b.find(e.firstLink),this.$el=b,this._bindEvents(),this.storeDealer=new c({HELIOS:this.HELIOS}),this.storeDealer.init()}var f=".c_005",g={events:{click:"click"+f},attrs:{dealerID:"data-dealer-id",target:"target",itemprop:"itemprop",dataClickable:"data-clickable"},selectors:{picture:".picture-element",linkList:".no-bullet",listItems:".no-bullet ul li",videoLinks:".c_028.content-half a",textLinks:".content-group a",videoSelector:".c_028",imageSelector:".picture-element",firstLink:".content-group a:first"},classes:{clickableImage:"clickable-image"}};return e.prototype._bindEvents=function(){var a=this.$elements,c=this.settings.events;a.$links.on(c.click,b.bind(this._handleClick,this)),a.$bodyLinks.on(c.click,b.bind(this._handleTextClick,this)),a.$firstLink.length&&!this.isVideo&&this.isClickable&&(a.$imageSelector.addClass(this.settings.classes.clickableImage),a.$imageSelector.on(c.click,{$firstLink:a.$firstLink},b.bind(this._handleClickImage,this)))},e.prototype._handleClick=function(c){var e=a(c.currentTarget),f=e.attr("href"),g=e.text(),h=e.attr(this.settings.attrs.dealerID),i=this.settings.analyticsManager,j=i.trackingVars.genericClick,k=i.getTrackingObjectProperties(j),l=e.attr(this.settings.attrs.target),m={};e.find(this.settings.selectors.picture)?(m[k.locationInPage]="image-link",m[k.buttonText]="image"):(m[k.locationInPage]="image-text-link",m[k.buttonText]=g),m[k.componentId]="C5_Image_Text_link",m[k.destination]=f,i.track(j,m),void 0!==h&&!1!==h&&(c.preventDefault(),this.storeDealer.save(h),b.isString(f)&&f.length&&d.run(l,f))},e.prototype._handleTextClick=function(b){var c=a(b.currentTarget),d=c.text(),e=c.attr("href"),f=this.settings.analyticsManager,g={componentId:"C5-A_Image_Text_link",destination:e,locationInPage:"image-text-link",buttonText:d};f.tag(f.trackingVars.genericClick,g)},e.prototype._handleClickImage=function(a){var c=a.data.$firstLink.attr("href"),e=a.data.$firstLink.attr("target"),f=this.settings.analyticsManager,g={componentId:"C5-A_Image_Text_link",destination:c,locationInPage:"image-link",buttonText:"image"};f.tag(f.trackingVars.genericClick,g),b.isString(c)&&c.length&&d.run(e,c)},e.prototype.destroy=function(){this.$el.remove(),delete this.settings},e}),define("c_005_0B",["jquery","underscore"],function(a,b){"use strict";function c(b,c){var e=a.extend(!0,{},d);this.settings=a.extend({},e,c),this.$el=b,this._bindEvents()}var d={selectors:{picture:".c_028-3 button",link:"a"}};return c.prototype._bindEvents=function(){var a=this;this.$el.find(this.settings.selectors.link).on("click",function(){a._handleClick(this)}),this.$el.find(this.settings.selectors.picture).on("click",function(){a._handleClickImage(this)})},c.prototype._handleClick=function(b){var c=a(b),d=c.attr("href"),e=c.text(),f=this.settings.analyticsManager.trackingVars.genericClick,g=this.settings.analyticsManager.getTrackingObjectProperties(f),h={};h[g.locationInPage]="image-link",h[g.buttonText]=e,h[g.componentId]="C5-B_Text_Video_Promo",h[g.destination]=d,this.settings.analyticsManager.track(f,h)},c.prototype._handleClickImage=function(b){var c=a(b),d=c.attr("data-videoid"),e="https://player.youku.com/embed/"+d,f=(c.text(),this.settings.analyticsManager.trackingVars.genericClick),g=this.settings.analyticsManager.getTrackingObjectProperties(f),h={};h[g.locationInPage]="image-link",h[g.buttonText]="image",h[g.componentId]="C5-B_Text_Video_Promo",h[g.destination]=e,this.settings.analyticsManager.track(f,h)},c.prototype.destroy=function(){this.$el.find(this.settings.selectors.link).off("click"),this.$el.find(this.settings.selectors.picture).off("click"),this.$el.remove(),delete this.settings},c}),function(a){"use strict";"function"==typeof define&&define.amd?define("slick",["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function b(b,d){var e,f,g=this;if(g.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(b),appendDots:a(b),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next"></button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,onSetPosition:null,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},g.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},a.extend(g,g.initials),g.activeBreakpoint=null,g.animType=null,g.animProp=null,g.breakpoints=[],g.breakpointSettings=[],g.cssTransitions=!1,g.paused=!1,g.positionProp=null,g.respondTo=null,g.shouldClick=!0,g.$slider=a(b),g.$slidesCache=null,g.transformType=null,g.transitionType=null,g.windowWidth=0,g.windowTimer=null,g.options=a.extend({},g.defaults,d),g.currentSlide=g.options.initialSlide,g.originalSettings=g.options,(e=g.options.responsive||null)&&e.length>-1){g.respondTo=g.options.respondTo||"window";for(f in e)e.hasOwnProperty(f)&&(g.breakpoints.push(e[f].breakpoint),g.breakpointSettings[e[f].breakpoint]=e[f].settings);g.breakpoints.sort(function(a,b){return b-a})}g.autoPlay=a.proxy(g.autoPlay,g),g.autoPlayClear=a.proxy(g.autoPlayClear,g),g.changeSlide=a.proxy(g.changeSlide,g),g.clickHandler=a.proxy(g.clickHandler,g),g.selectHandler=a.proxy(g.selectHandler,g),g.setPosition=a.proxy(g.setPosition,g),g.swipeHandler=a.proxy(g.swipeHandler,g),g.dragHandler=a.proxy(g.dragHandler,g),g.keyHandler=a.proxy(g.keyHandler,g),g.autoPlayIterator=a.proxy(g.autoPlayIterator,g),g.instanceUid=c++,g.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,g.init(),g.checkResponsive()}var c=0;return b}(),b.prototype.addSlide=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(c<0||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):!0===d?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateSlide=function(b,c){var d={},e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var f=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:f},e.options.speed)}!0===e.options.rtl&&!1===e.options.vertical&&(b=-b),!1===e.transformsEnabled?!1===e.options.vertical?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):!1===e.cssTransitions?(!0===e.options.rtl&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){!1===e.options.vertical?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),!1===e.options.vertical?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.asNavFor=function(b){var c=this,d=null!=c.options.asNavFor?a(c.options.asNavFor).getSlick():null;null!=d&&d.slideHandler(b,!0)},b.prototype.applyTransition=function(a){var b=this,c={};!1===b.options.fade?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,!1===b.options.fade?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer),a.slideCount>a.options.slidesToShow&&!0!==a.paused&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this;!1===a.options.infinite?1===a.direction?(a.currentSlide+1===a.slideCount-1&&(a.direction=0),a.slideHandler(a.currentSlide+a.options.slidesToScroll)):(a.currentSlide-1==0&&(a.direction=1),a.slideHandler(a.currentSlide-a.options.slidesToScroll)):a.slideHandler(a.currentSlide+a.options.slidesToScroll)},b.prototype.buildArrows=function(){var b=this;!0===b.options.arrows&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow=a(b.options.prevArrow),b.$nextArrow=a(b.options.nextArrow),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.appendTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),!0!==b.options.infinite&&b.$prevArrow.addClass("slick-disabled"))},b.prototype.buildDots=function(){var b,c,d=this;if(!0===d.options.dots&&d.slideCount>d.options.slidesToShow){for(c='<ul class="'+d.options.dotsClass+'">',b=0;b<=d.getDotCount();b+=1)c+="<li>"+d.options.customPaging.call(this,d,b)+"</li>";c+="</ul>",d.$dots=a(c).appendTo(d.options.appendDots),d.$dots.find("li").first().addClass("slick-active")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("index",b)}),b.$slidesCache=b.$slides,b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),!0===b.options.centerMode&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),!0===b.options.accessibility&&b.$list.prop("tabIndex",0),b.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),!0===b.options.draggable&&b.$list.addClass("draggable")},b.prototype.checkResponsive=function(){var b,c,d,e=this,f=e.$slider.width(),g=window.innerWidth||a(window).width();if("window"===e.respondTo?d=g:"slider"===e.respondTo?d=f:"min"===e.respondTo&&(d=Math.min(g,f)),e.originalSettings.responsive&&e.originalSettings.responsive.length>-1&&null!==e.originalSettings.responsive){c=null;for(b in e.breakpoints)e.breakpoints.hasOwnProperty(b)&&d<e.breakpoints[b]&&(c=e.breakpoints[b]);null!==c?null!==e.activeBreakpoint?c!==e.activeBreakpoint&&(e.activeBreakpoint=c,e.options=a.extend({},e.originalSettings,e.breakpointSettings[c]),e.refresh()):(e.activeBreakpoint=c,e.options=a.extend({},e.originalSettings,e.breakpointSettings[c]),e.refresh()):null!==e.activeBreakpoint&&(e.activeBreakpoint=null,e.options=e.originalSettings,e.refresh())}},b.prototype.changeSlide=function(b,c){var d,e,f,g,h,i=this,j=a(b.target);switch(i.$slider.trigger("stopAutoPlay.slick"),j.is("a")&&b.preventDefault(),j.is("li")||(j=j.closest("li")),f=i.slideCount%i.options.slidesToScroll!=0,d=f?0:(i.slideCount-i.currentSlide)%i.options.slidesToScroll,b.data.message){case"previous":e=0===d?i.options.slidesToScroll:i.options.slidesToShow-d,i.slideCount>i.options.slidesToShow&&i.slideHandler(i.currentSlide-e,!1,c);break;case"next":e=0===d?i.options.slidesToScroll:d,i.slideCount>i.options.slidesToShow&&i.slideHandler(i.currentSlide+e,!1,c);break;case"index":var k=0===b.data.index?0:b.data.index||j.index()*i.options.slidesToScroll;if(g=i.getNavigableIndexes(),h=0,g[k]&&g[k]===k)if(k>g[g.length-1])k=g[g.length-1];else for(var l in g){if(k<g[l]){k=h;break}h=g[l]}i.slideHandler(k,!1,c);default:return}},b.prototype.clickHandler=function(a){!1===this.shouldClick&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(){var b=this;b.autoPlayClear(),b.touchObject={},a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&"object"!=typeof b.options.prevArrow&&b.$prevArrow.remove(),b.$nextArrow&&"object"!=typeof b.options.nextArrow&&b.$nextArrow.remove(),b.$slides.parent().hasClass("slick-track")&&b.$slides.unwrap().unwrap(),b.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),b.$slider.removeClass("slick-slider"),b.$slider.removeClass("slick-initialized"),b.$list.off(".slick"),a(window).off(".slick-"+b.instanceUid),a(document).off(".slick-"+b.instanceUid)},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",!1===b.options.fade?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b,c){var d=this;!1===d.cssTransitions?(d.$slides.eq(b).css({zIndex:1e3}),d.$slides.eq(b).animate({opacity:1},d.options.speed,d.options.easing,c),d.$slides.eq(a).animate({opacity:0},d.options.speed,d.options.easing)):(d.applyTransition(b),d.applyTransition(a),d.$slides.eq(b).css({opacity:1,zIndex:1e3}),d.$slides.eq(a).css({opacity:0}),c&&setTimeout(function(){d.disableTransition(b),d.disableTransition(a),c.call()},d.options.speed))},b.prototype.filterSlides=function(a){var b=this;null!==a&&(b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.getCurrent=function(){return this.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(!0===a.options.infinite)d=Math.ceil(a.slideCount/a.options.slidesToScroll);else for(;b<a.slideCount;)++d,b=c+a.options.slidesToShow,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d-1},b.prototype.getLeft=function(a){var b,c,d,e=this,f=0;return e.slideOffset=0,c=e.$slides.first().outerHeight(),!0===e.options.infinite?(e.slideCount>e.options.slidesToShow&&(e.slideOffset=e.slideWidth*e.options.slidesToShow*-1,f=c*e.options.slidesToShow*-1),e.slideCount%e.options.slidesToScroll!=0&&a+e.options.slidesToScroll>e.slideCount&&e.slideCount>e.options.slidesToShow&&(a>e.slideCount?(e.slideOffset=(e.options.slidesToShow-(a-e.slideCount))*e.slideWidth*-1,f=(e.options.slidesToShow-(a-e.slideCount))*c*-1):(e.slideOffset=e.slideCount%e.options.slidesToScroll*e.slideWidth*-1,f=e.slideCount%e.options.slidesToScroll*c*-1))):a+e.options.slidesToShow>e.slideCount&&(e.slideOffset=(a+e.options.slidesToShow-e.slideCount)*e.slideWidth,f=(a+e.options.slidesToShow-e.slideCount)*c),e.slideCount<=e.options.slidesToShow&&(e.slideOffset=0,f=0),!0===e.options.centerMode&&!0===e.options.infinite?e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)-e.slideWidth:!0===e.options.centerMode&&(e.slideOffset=0,e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)),b=!1===e.options.vertical?a*e.slideWidth*-1+e.slideOffset:a*c*-1+f,!0===e.options.variableWidth&&(d=e.slideCount<=e.options.slidesToShow||!1===e.options.infinite?e.$slideTrack.children(".slick-slide").eq(a):e.$slideTrack.children(".slick-slide").eq(a+e.options.slidesToShow),b=d[0]?-1*d[0].offsetLeft:0,!0===e.options.centerMode&&(d=!1===e.options.infinite?e.$slideTrack.children(".slick-slide").eq(a):e.$slideTrack.children(".slick-slide").eq(a+e.options.slidesToShow+1),b=d[0]?-1*d[0].offsetLeft:0,b+=(e.$list.width()-d.outerWidth())/2)),b},b.prototype.getNavigableIndexes=function(){for(var a=this,b=0,c=0,d=[];b<a.slideCount;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlideCount=function(){var b=this;if(!0===b.options.swipeToSlide){var c=null;return b.$slideTrack.find(".slick-slide").each(function(d,e){if(e.offsetLeft+a(e).outerWidth()/2>-1*b.swipeLeft)return c=e,!1}),Math.abs(a(c).attr("index")-b.currentSlide)}return b.options.slidesToScroll},b.prototype.init=function(){var b=this;a(b.$slider).hasClass("slick-initialized")||(a(b.$slider).addClass("slick-initialized"),b.buildOut(),b.setProps(),b.startLoad(),b.loadSlider(),b.initializeEvents(),b.updateArrows(),b.updateDots()),null!==b.options.onInit&&b.options.onInit.call(this,b)},b.prototype.initArrowEvents=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;!0===b.options.dots&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),!0===b.options.dots&&!0===b.options.pauseOnDotsHover&&!0===b.options.autoplay&&a("li",b.$dots).on("mouseenter.slick",function(){b.paused=!0,b.autoPlayClear()}).on("mouseleave.slick",function(){b.paused=!1,b.autoPlay()})},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),!0===b.options.pauseOnHover&&!0===b.options.autoplay&&(b.$list.on("mouseenter.slick",function(){b.paused=!0,b.autoPlayClear()}),b.$list.on("mouseleave.slick",function(){b.paused=!1,b.autoPlay(),b.$slider.trigger("stopAutoPlay.slick")})),!0===b.options.accessibility&&b.$list.on("keydown.slick",b.keyHandler),!0===b.options.focusOnSelect&&a(b.options.slide,b.$slideTrack).on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,function(){b.checkResponsive(),b.setPosition()}),a(window).on("resize.slick.slick-"+b.instanceUid,function(){a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.setPosition()},50))}),a("*[draggable!=true]",b.$slideTrack).on("dragstart",function(a){a.preventDefault()}),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),!0===a.options.dots&&a.slideCount>a.options.slidesToShow&&a.$dots.show(),!0===a.options.autoplay&&a.autoPlay()},b.prototype.keyHandler=function(a){var b=this;37===a.keyCode&&!0===b.options.accessibility?b.changeSlide({data:{message:"previous"}}):39===a.keyCode&&!0===b.options.accessibility&&b.changeSlide({data:{message:"next"}})},b.prototype.lazyLoad=function(){function b(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy");b.load(function(){b.animate({opacity:1},200)}).css({opacity:0}).attr("src",c).removeAttr("data-lazy").removeClass("slick-loading")})}var c,d,e,f,g=this;!0===g.options.centerMode?!0===g.options.infinite?(e=g.currentSlide+(g.options.slidesToShow/2+1),f=e+g.options.slidesToShow+2):(e=Math.max(0,g.currentSlide-(g.options.slidesToShow/2+1)),f=g.options.slidesToShow/2+1+2+g.currentSlide):(e=g.options.infinite?g.options.slidesToShow+g.currentSlide:g.currentSlide,f=e+g.options.slidesToShow,!0===g.options.fade&&(e>0&&e--,f<=g.slideCount&&f++)),c=g.$slider.find(".slick-slide").slice(e,f),b(c),g.slideCount<=g.options.slidesToShow?(d=g.$slider.find(".slick-slide"),b(d)):g.currentSlide>=g.slideCount-g.options.slidesToShow?(d=g.$slider.find(".slick-cloned").slice(0,g.options.slidesToShow),b(d)):0===g.currentSlide&&(d=g.$slider.find(".slick-cloned").slice(-1*g.options.slidesToShow),b(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.postSlide=function(a){var b=this;null!==b.options.onAfterChange&&b.options.onAfterChange.call(this,b,a),b.animating=!1,b.setPosition(),b.swipeLeft=null,!0===b.options.autoplay&&!1===b.paused&&b.autoPlay()},b.prototype.progressiveLazyLoad=function(){var b,c,d=this;(b=a("img[data-lazy]",d.$slider).length)>0&&(c=a("img[data-lazy]",d.$slider).first(),c.attr("src",c.attr("data-lazy")).removeClass("slick-loading").load(function(){c.removeAttr("data-lazy"),d.progressiveLazyLoad()}).error(function(){c.removeAttr("data-lazy"),d.progressiveLazyLoad()}))},b.prototype.refresh=function(){var b=this,c=b.currentSlide;b.destroy(),a.extend(b,b.initials),b.init(),b.changeSlide({data:{message:"index",index:c}},!0)},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),!0===b.options.focusOnSelect&&a(b.options.slide,b.$slideTrack).on("click.slick",b.selectHandler),b.setSlideClasses(0),b.setPosition(),null!==b.options.onReInit&&b.options.onReInit.call(this,b)},b.prototype.removeSlide=function(a,b,c){var d=this;if("boolean"==typeof a?(b=a,a=!0===b?0:d.slideCount-1):a=!0===b?--a:a,d.slideCount<1||a<0||a>d.slideCount-1)return!1;d.unload(),!0===c?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,d.reinit()},b.prototype.setCSS=function(a){var b,c,d=this,e={};!0===d.options.rtl&&(a=-a),b="left"==d.positionProp?a+"px":"0px",c="top"==d.positionProp?a+"px":"0px",e[d.positionProp]=a,!1===d.transformsEnabled?d.$slideTrack.css(e):(e={},!1===d.cssTransitions?(e[d.animType]="translate("+b+", "+c+")",d.$slideTrack.css(e)):(e[d.animType]="translate3d("+b+", "+c+", 0px)",d.$slideTrack.css(e)))},b.prototype.setDimensions=function(){var b=this;if(!1===b.options.vertical?!0===b.options.centerMode&&b.$list.css({padding:"0px "+b.options.centerPadding}):(b.$list.height(b.$slides.first().outerHeight(!0)*b.options.slidesToShow),!0===b.options.centerMode&&b.$list.css({padding:b.options.centerPadding+" 0px"})),b.listWidth=b.$list.width(),b.listHeight=b.$list.height(),!1===b.options.vertical&&!1===b.options.variableWidth)b.slideWidth=Math.ceil(b.listWidth/b.options.slidesToShow),b.$slideTrack.width(Math.ceil(b.slideWidth*b.$slideTrack.children(".slick-slide").length));else if(!0===b.options.variableWidth){var c=0;b.slideWidth=Math.ceil(b.listWidth/b.options.slidesToShow),b.$slideTrack.children(".slick-slide").each(function(){c+=Math.ceil(a(this).outerWidth(!0))}),b.$slideTrack.width(Math.ceil(c)+1)}else b.slideWidth=Math.ceil(b.listWidth),b.$slideTrack.height(Math.ceil(b.$slides.first().outerHeight(!0)*b.$slideTrack.children(".slick-slide").length));var d=b.$slides.first().outerWidth(!0)-b.$slides.first().width();!1===b.options.variableWidth&&b.$slideTrack.children(".slick-slide").width(b.slideWidth-d)},b.prototype.setFade=function(){var b,c=this
;c.$slides.each(function(d,e){b=c.slideWidth*d*-1,!0===c.options.rtl?a(e).css({position:"relative",right:b,top:0,zIndex:800,opacity:0}):a(e).css({position:"relative",left:b,top:0,zIndex:800,opacity:0})}),c.$slides.eq(c.currentSlide).css({zIndex:900,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&!0===a.options.adaptiveHeight&&!1===a.options.vertical){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),!1===a.options.fade?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),null!==a.options.onSetPosition&&a.options.onSetPosition.call(this,a)},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=!0===a.options.vertical?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),void 0===b.WebkitTransition&&void 0===b.MozTransition&&void 0===b.msTransition||!0===a.options.useCSS&&(a.cssTransitions=!0),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&!1!==a.animType&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=null!==a.animType&&!1!==a.animType},b.prototype.setSlideClasses=function(a){var b,c,d,e,f=this;f.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),c=f.$slider.find(".slick-slide"),!0===f.options.centerMode?(b=Math.floor(f.options.slidesToShow/2),!0===f.options.infinite&&(a>=b&&a<=f.slideCount-1-b?f.$slides.slice(a-b,a+b+1).addClass("slick-active"):(d=f.options.slidesToShow+a,c.slice(d-b+1,d+b+2).addClass("slick-active")),0===a?c.eq(c.length-1-f.options.slidesToShow).addClass("slick-center"):a===f.slideCount-1&&c.eq(f.options.slidesToShow).addClass("slick-center")),f.$slides.eq(a).addClass("slick-center")):a>=0&&a<=f.slideCount-f.options.slidesToShow?f.$slides.slice(a,a+f.options.slidesToShow).addClass("slick-active"):c.length<=f.options.slidesToShow?c.addClass("slick-active"):(e=f.slideCount%f.options.slidesToShow,d=!0===f.options.infinite?f.options.slidesToShow+a:a,f.options.slidesToShow==f.options.slidesToScroll&&f.slideCount-a<f.options.slidesToShow?c.slice(d-(f.options.slidesToShow-e),d+e).addClass("slick-active"):c.slice(d,d+f.options.slidesToShow).addClass("slick-active")),"ondemand"===f.options.lazyLoad&&f.lazyLoad()},b.prototype.setupInfinite=function(){var b,c,d,e=this;if(!0===e.options.fade&&(e.options.centerMode=!1),!0===e.options.infinite&&!1===e.options.fade&&(c=null,e.slideCount>e.options.slidesToShow)){for(d=!0===e.options.centerMode?e.options.slidesToShow+1:e.options.slidesToShow,b=e.slideCount;b>e.slideCount-d;b-=1)c=b-1,a(e.$slides[c]).clone(!0).attr("id","").attr("index",c-e.slideCount).prependTo(e.$slideTrack).addClass("slick-cloned");for(b=0;b<d;b+=1)c=b,a(e.$slides[c]).clone(!0).attr("id","").attr("index",c+e.slideCount).appendTo(e.$slideTrack).addClass("slick-cloned");e.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.selectHandler=function(b){var c=this,d=parseInt(a(b.target).parents(".slick-slide").attr("index"));if(d||(d=0),c.slideCount<=c.options.slidesToShow)return c.$slider.find(".slick-slide").removeClass("slick-active"),c.$slides.eq(d).addClass("slick-active"),!0===c.options.centerMode&&(c.$slider.find(".slick-slide").removeClass("slick-center"),c.$slides.eq(d).addClass("slick-center")),void c.asNavFor(d);c.slideHandler(d)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h=null,i=this;if(b=b||!1,(!0!==i.animating||!0!==i.options.waitForAnimate)&&!(!0===i.options.fade&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow)){if(!1===b&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,!1===i.options.infinite&&!1===i.options.centerMode&&(a<0||a>i.getDotCount()*i.options.slidesToScroll))return void(!1===i.options.fade&&(d=i.currentSlide,!0!==c?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d)));if(!1===i.options.infinite&&!0===i.options.centerMode&&(a<0||a>i.slideCount-i.options.slidesToScroll))return void(!1===i.options.fade&&(d=i.currentSlide,!0!==c?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d)));if(!0===i.options.autoplay&&clearInterval(i.autoPlayTimer),e=d<0?i.slideCount%i.options.slidesToScroll!=0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?i.slideCount%i.options.slidesToScroll!=0?0:d-i.slideCount:d,i.animating=!0,null!==i.options.onBeforeChange&&a!==i.currentSlide&&i.options.onBeforeChange.call(this,i,i.currentSlide,e),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.updateDots(),i.updateArrows(),!0===i.options.fade)return void(!0!==c?i.fadeSlide(f,e,function(){i.postSlide(e)}):i.postSlide(e));!0!==c?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e)}},b.prototype.startLoad=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),!0===a.options.dots&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),d<0&&(d=360-Math.abs(d)),d<=45&&d>=0?!1===e.options.rtl?"left":"right":d<=360&&d>=315?!1===e.options.rtl?"left":"right":d>=135&&d<=225?!1===e.options.rtl?"right":"left":"vertical"},b.prototype.swipeEnd=function(a){var b=this;if(b.$slider.trigger("stopAutoPlay.slick"),"touchend"==a.type&&b.$slider.trigger("sliderSwipe.slick"),b.dragging=!1,b.shouldClick=!(b.touchObject.swipeLength>10),void 0===b.touchObject.curX)return!1;if(b.touchObject.swipeLength>=b.touchObject.minSwipe)switch(b.swipeDirection()){case"left":b.slideHandler(b.currentSlide+b.getSlideCount()),b.currentDirection=0,b.touchObject={};break;case"right":b.slideHandler(b.currentSlide-b.getSlideCount()),b.currentDirection=1,b.touchObject={}}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(b){var c=this;if(!(!1===c.options.swipe||"ontouchend"in document&&!1===c.options.swipe||!1===c.options.draggable&&-1!==b.type.indexOf("mouse")))switch(c.touchObject.fingerCount=b.originalEvent&&void 0!==b.originalEvent.touches?b.originalEvent.touches.length:1,c.touchObject.minSwipe=c.listWidth/c.options.touchThreshold,b.data.action){case"start":!a(b.target).hasClass("js-no-swipe-slick")&&c.swipeStart(b);break;case"move":c.swipeMove(b);break;case"end":c.swipeEnd(b)}},b.prototype.swipeMove=function(a){var b,c,d,e=this;return d=void 0!==a.originalEvent?a.originalEvent.touches:null,!(!e.dragging||d&&1!==d.length)&&(b=e.getLeft(e.currentSlide),e.touchObject.curX=void 0!==d?d[0].pageX:a.clientX,e.touchObject.curY=void 0!==d?d[0].pageY:a.clientY,e.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(e.touchObject.curX-e.touchObject.startX,2))),"vertical"!==e.swipeDirection()?(void 0!==a.originalEvent&&e.touchObject.swipeLength>4&&a.preventDefault(),c=(!1===e.options.rtl?1:-1)*(e.touchObject.curX>e.touchObject.startX?1:-1),!1===e.options.vertical?e.swipeLeft=b+e.touchObject.swipeLength*c:e.swipeLeft=b+e.touchObject.swipeLength*(e.$list.height()/e.listWidth)*c,!0!==e.options.fade&&!1!==e.options.touchMove&&(!0===e.animating?(e.swipeLeft=null,!1):void e.setCSS(e.swipeLeft))):void 0)},b.prototype.swipeStart=function(a){var b,c=this;if(1!==c.touchObject.fingerCount||c.slideCount<=c.options.slidesToShow)return c.touchObject={},!1;void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(b=a.originalEvent.touches[0]),c.touchObject.startX=c.touchObject.curX=void 0!==b?b.pageX:a.clientX,c.touchObject.startY=c.touchObject.curY=void 0!==b?b.pageY:a.clientY,c.dragging=!0},b.prototype.unfilterSlides=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&"object"!=typeof b.options.prevArrow&&b.$prevArrow.remove(),b.$nextArrow&&"object"!=typeof b.options.nextArrow&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")},b.prototype.updateArrows=function(){var a,b=this;a=Math.floor(b.options.slidesToShow/2),!0===b.options.arrows&&!0!==b.options.infinite&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow.removeClass("slick-disabled"),b.$nextArrow.removeClass("slick-disabled"),0===b.currentSlide?(b.$prevArrow.addClass("slick-disabled"),b.$nextArrow.removeClass("slick-disabled")):b.currentSlide>=b.slideCount-b.options.slidesToShow&&!1===b.options.centerMode?(b.$nextArrow.addClass("slick-disabled"),b.$prevArrow.removeClass("slick-disabled")):b.currentSlide>b.slideCount-b.options.slidesToShow+a&&!0===b.options.centerMode&&(b.$nextArrow.addClass("slick-disabled"),b.$prevArrow.removeClass("slick-disabled")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active"))},a.fn.slick=function(a){return this.each(function(c,d){d.slick=new b(d,a)})},a.fn.slickAdd=function(a,b,c){return this.each(function(d,e){e.slick.addSlide(a,b,c)})},a.fn.slickCurrentSlide=function(){return this.get(0).slick.getCurrent()},a.fn.slickFilter=function(a){return this.each(function(b,c){c.slick.filterSlides(a)})},a.fn.slickGoTo=function(a,b){return this.each(function(c,d){d.slick.changeSlide({data:{message:"index",index:parseInt(a)}},b)})},a.fn.slickNext=function(){return this.each(function(a,b){b.slick.changeSlide({data:{message:"next"}})})},a.fn.slickPause=function(){return this.each(function(a,b){b.slick.autoPlayClear(),b.slick.paused=!0})},a.fn.slickPlay=function(){return this.each(function(a,b){b.slick.paused=!1,b.slick.autoPlay()})},a.fn.slickPrev=function(){return this.each(function(a,b){b.slick.changeSlide({data:{message:"previous"}})})},a.fn.slickRemove=function(a,b){return this.each(function(c,d){d.slick.removeSlide(a,b)})},a.fn.slickRemoveAll=function(){return this.each(function(a,b){b.slick.removeSlide(null,null,!0)})},a.fn.slickGetOption=function(a){return this.get(0).slick.options[a]},a.fn.slickSetOption=function(a,b,c){return this.each(function(d,e){e.slick.options[a]=b,!0===c&&(e.slick.unload(),e.slick.reinit())})},a.fn.slickUnfilter=function(){return this.each(function(a,b){b.slick.unfilterSlides()})},a.fn.unslick=function(){return this.each(function(a,b){b.slick&&b.slick.destroy()})},a.fn.getSlick=function(){var a=null;return this.each(function(b,c){a=c.slick}),a}}),define("contentCarousel",["jquery","underscore","slick"],function(a,b){var c=580,d={},e={cDefaults:"ContentCarousel",addFiller:!1,"slick ":{accessibility:!0,"cssEase ":"ease-in-out",onInit:d.onInstanceInit,onBeforeChange:d.onBeforeChangeHandler,onAfterChange:d.onAfterChangeHandler,"dots ":!0,"speed ":400,slidesToShow:1,slidesToScroll:1,focusOnSelect:!1,responsive:[{breakpoint:c,settings:{"cssEase ":"ease-in-out",onInit:d.onInstanceInit,onBeforeChange:d.onBeforeChangeHandler,onAfterChange:d.onAfterChangeHandler,"dots ":!0,"speed ":300,slidesToShow:1,slidesToScroll:1}}]}},f={};return d.onInstanceInit=function(b,e){var g=d,h=!1,i=b.slideCount,j=["a","button","input"];a(".slick-slide",b.$slider).find(j.join()).attr("tabindex","-1"),g.toggleTabIndex(b.$slides,b.currentSlide,null),b.activeBreakpoint===c&&(h=!0),f.slideLimit&&g.customPaging(b,h),!0===f.setItemHeight&&g.equalizeHeights(b.$slideTrack.children(".slick-slide"),f.contentSelect,h),f.addFiller&&i%2||b.$slider.find(".slick-spacer").length>0&&!0===h&&b.removeSlide(i-1),d.updateCustomNavigation(b,b.currentSlide||0)},d.onBeforeChangeHandler=function(a,b,c){this.toggleTabIndex(a.$slides,b,c),a.$slider.trigger("beforeChange",a)},d.onAfterChangeHandler=function(a,b){d.updateCustomNavigation(a,b),a.$slider.trigger("afterChange",a)},d.toggleTabIndex=function(b,c,d){for(var e=b,f=b.length,g=["a","button","input"],h=0;h<f;h++){var i=e.eq(h);a(g.join(", "),i).each(function(b,c){var e=a(c);h===d?e.attr("tabindex","0"):e.attr("tabindex","-1")})}},d.equalizeHeights=function(b,c,d){var e=0,f="min-height",g=b.find(c);return 0!==g.length&&(d?g.css(f,""):(g.each(function(b,c){var d,g=a(c);g.css(f,""),(d=g.height())>e&&(e=d)}),0===e&&(e=""),g.css(f,e)))},d.customPaging=function(a,b){var c,d,e,g,h,i="",j=a.$slider,k=j.next(f.customPagingSelect),l=a.$dots;g=a.getCurrent()+1,h=a.getDotCount()+1,b&&h>=f.slideLimit?(c=k.attr(f.attr.prefix)||"",d=k.attr(f.attr.separator)||"",e=k.attr(f.attr.suffix)||"",i=c+" "+g+" "+d+" "+h+" "+e,l.hide()):l.show(),k.html(i)},d.initCarouselInstance=function(b,c){b.slick(c.slick),a(c.window).on("orientationchange",function(){b.slick("resize")})},d.reInit=function(a,b){a.unslick(),a.slick(b.slick)},d.pause=function(a){a.slickPause()},d.init=function(c,d){var g=a.Deferred(),h=this;return f=a.extend(!0,{},e,d),b.delay(function(a){h.initCarouselInstance(c,a),g.resolve()},250,f),g},d.getSettings=function(){return f},d.getDefaults=function(){return e},d.destroyCarouselInstance=function(a){a.unslick()},d.goTo=function(a,b,c){void 0===c&&(c=!1),a.slickGoTo(b,c)},d.updateCustomNavigation=function(a,b){var c=a.$slider.find(f.customNavigationSelect),d=c.find("li");d.removeClass("slick-active"),d.eq(b).addClass("slick-active")},d.slickFilter=function(a,b){a.slickFilter(b)},d.slickUnfilter=function(a){a.slickUnfilter()},d}),define("c_007",["jquery","underscore","contentCarousel"],function(a,b,c){"use strict";function d(b){x=a.extend(!0,{},t,b),q=a(x.root),r=a(x.html),q.length&&(q.data(x.dataAttr.enableAutoplay)&&(x.slick.autoplay=q.data(x.dataAttr.enableAutoplay),v="auto-advance",q.data(x.dataAttr.autoplaySpeed)&&(x.slick.autoplaySpeed=q.data(x.dataAttr.autoplaySpeed))),"rtl"===r.attr("dir")&&(x.slick.rtl=!0),q.each(function(b,d){var e=a(this).find(x.el);e&&(c.init(e,x),a(document).on(x.events.personalisationEventName,function(){x.slick.onInit=p,c.reInit(e,x)}),e.on(x.events.pauseAutoPlay,function(){v="normal",c.pause(e)}))}),!0===w&&(f(),w=!1),i(),e())}function e(){var b=location.pathname,c="/index.html"===b||"/"===b||"/test-c7.html"===b,d=a(".c_007").length;b&&c&&2===d&&a(".c_007").first().addClass("left-align-layout-fix")}function f(){a(x.selectors.outsideButtons).each(function(b,c){var d=a(c),e=d.clone();d.parents(x.selectors.carouselSlide).find(x.selectors.firstAction).append(e)})}function g(b){var c=x.analyticsManager,d=a(x.selectors.slidesCarousel,q).length,e=parseInt(a(x.selectors.slideActive,q).attr("index"),10)+1,f={componentId:u,promoText:b,carouselType:v,itemNumber:e+"/"+d,interactionType:"hero slider"};c.tag("carouselInteraction",f)}function h(b){var c=a(b.target),d=c.text(),e=c.attr("href"),f=c.closest(".content-details").find("h2 span").text(),g=x.analyticsManager,h={componentId:u,promoText:f,locationInPage:"hero",buttonText:d,destination:e};g.tag("carouselButtonClick",h)}function i(){q.find(x.cta).on(x.events.click,h),a(x.window).on("resize",b.debounce(k,200))}function j(a){return a.length?a[0].scrollHeight:0}function k(){a(x.el).each(function(){var b=a(x.selectors.slideActive,this),c=b.find(x.selectors.outsideContent+":visible"),d=b.find(x.selectors.disclaimer+":visible"),e=j(c)+j(d),f=b.height()-(e+50)+"px",g=40*b.height()/100+"px";x.positionSlickDotsWithJS&&a(x.selectors.carouselDots,this).css("top",f),a(x.selectors.carouselArrows,this).css("top",g)})}function l(b,c){g(a.trim(a(b.$slides.get(c)).find("h2 span").text()))}function m(a,b,c){b!==c&&l(a,b)}function n(b,c,d){a(document).trigger("afterSlickSlideChange")}function o(b){b.$slider.find(x.selectors.carouselSlide).removeClass(x.classes.isHidden),a(document).trigger("slickReady"),k()}function p(){a(document).trigger("slickReInit")}var q,r,s="c_007",t={root:".c_007",html:"html",el:".carousel",cta:".cta-link",slickTrack:".slick-track",slideLimit:!1,setItemHeight:!0,positionSlickDotsWithJS:!0,classes:{isHidden:"hidden"},selectors:{slidesCarousel:".slick-slide:not(.slick-cloned)",slideActive:".slick-active",child_C007_1:".c_007-1",disclaimer:".disclaimer",outsideContent:".outside-content-details",outsideButtons:".outside-content-details ul li",contentDetails:".content-details",carouselSlide:".carousel-slide",firstAction:"ul.first-action",carouselDots:".slick-dots",carouselArrows:".slick-prev, .slick-next"},attr:{prefix:"data-prefix",separator:"data-separator",suffix:"data-suffix"},dataAttr:{autoplaySpeed:"autoplaySpeed",enableAutoplay:"autoplay"},events:{click:"click."+s,personalisationEventName:"adobe.personalisation",pauseAutoPlay:"playVideo"},addFiller:!1,slick:{cssEase:"ease-in-out",onInit:o,onBeforeChange:m,onAfterChange:n,dots:!0,speed:400,infinite:!0,rtl:!1,slidesToShow:1,adaptiveHeight:!0,slidesToScroll:1,lazyLoad:"progressive",responsive:!1}},u="C7_Hero_Area",v="normal",w=!0,x=null;return{init:d}}),define("c_007B",["jquery","underscore","contentCarousel"],function(a,b,c){"use strict";function d(b){if(y=a.extend(!0,{},u,b),q=a(y.root),r=a(y.html),!q.length)return!1;q.data(y.dataAttr.enableAutoplay)&&(y.slick.autoplay=q.data(y.dataAttr.enableAutoplay),w="autoplay",q.data(y.dataAttr.autoplaySpeed)&&(y.slick.autoplaySpeed=q.data(y.dataAttr.autoplaySpeed))),"rtl"===r.attr("dir")&&(y.slick.rtl=!0),q.each(function(b,d){var e=a(this),f=e.find(y.el);f&&(c.init(f,y),a(document).on(y.events.personalisationEventName,function(){y.slick.onInit=o,c.reInit(f,y)}),f.on(y.events.pauseAutoPlay,function(){w="normal",c.pause(f)}),s=a(y.selectors.buttonMore,e),s.on(y.events.click,p))}),!0===x&&(e(),x=!1),h()}function e(){a(y.selectors.outsideButtons).each(function(b,c){var d=a(c);d.parents(y.selectors.carouselSlide).find(y.selectors.firstAction).append(d.clone())})}function f(b){var c=y.analyticsManager,d=a(y.selectors.slidesCarousel,q).length,e=parseInt(a(y.selectors.slideActive,q).attr("index"),10)+1,f={componentId:v,carouselType:w,interactionType:"homepage-hero",itemNumber:e+"/"+d,promoText:a.trim(b)};c.tag("carouselInteraction",f)}function g(b){var c=a(b.currentTarget),d=c.text(),e=c.attr("href"),f=c.closest(".content-details").find("h2 span").text(),g=y.analyticsManager,h={componentId:v,destination:e,locationInPage:"homepage-hero",buttonText:d,promoText:f};g.tag("carouselButtonClick",h)}function h(){q.find(y.cta).on(y.events.click,g),a(y.window).on("resize",b.debounce(j,200))}function i(a){return a.length?a[0].scrollHeight:0}function j(){a(y.el).each(function(){var b=a(y.selectors.slideActive,this),c=b.find(y.selectors.outsideContent+":visible"),d=b.find(y.selectors.disclaimer+":visible"),e=i(c)+i(d),f=b.height()-(e+50)+"px",g=40*b.height()/100+"px";y.positionSlickDotsWithJS&&a(y.selectors.carouselDots,this).css("top",f),a(y.selectors.carouselArrows,this).css("top",g)})}function k(b,c){f(a.trim(a(b.$slides.get(c)).find("h2 span").text()))}function l(a,b,c){b!==c&&k(a,b)}function m(b,c,d){a(document).trigger("afterSlickSlideChange"),j()}function n(b){b.$slider.find(y.selectors.carouselSlide).removeClass(y.classes.isHidden),a(document).trigger("slickReady"),j()}function o(){a(document).trigger("slickReInit")}function p(b){b.preventDefault();var c=parseInt(q.offset().top,10),d=parseInt(q.height(),10),e=c+d-50;a("html, body").animate({scrollTop:e+"px"})}var q,r,s,t="c_007B",u={root:".c_007B",html:"html",el:".carousel",cta:".cta-link",slickTrack:".slick-track",slideLimit:!1,setItemHeight:!0,positionSlickDotsWithJS:!0,classes:{isHidden:"hidden"},selectors:{slidesCarousel:".slick-slide:not(.slick-cloned)",slideActive:".slick-active",child_C007_1:".c_007-1",disclaimer:".disclaimer",outsideContent:".outside-content-details",outsideButtons:".outside-content-details ul li",contentDetails:".content-details",carouselSlide:".carousel-slide",firstAction:"ul.first-action",carouselDots:".slick-dots",carouselArrows:".slick-prev, .slick-next",buttonMore:"button.more-content"},attr:{prefix:"data-prefix",separator:"data-separator",suffix:"data-suffix"},dataAttr:{autoplaySpeed:"autoplaySpeed",enableAutoplay:"autoplay"},events:{click:"click."+t,personalisationEventName:"adobe.personalisation",pauseAutoPlay:"playVideo"},addFiller:!1,slick:{cssEase:"ease-in-out",onInit:n,onBeforeChange:l,onAfterChange:m,dots:!0,speed:400,infinite:!0,rtl:!1,slidesToShow:1,adaptiveHeight:!0,slidesToScroll:1,lazyLoad:"progressive",responsive:!1},sections:{content:".contentZone"}},v="C7B_Homepage_Hero",w="normal",x=!0,y=null;return{init:d}}),define("scriptLoader",["jquery","underscore"],function(a,b){"use strict";function c(a,c,e,f){var i,j=f.url;if(!a.getElementById(c+h)){if(void 0!==e){if(void 0!==f&&void 0!==f.parameters)for(i=f.parameters.length,g=0;g<i;g++)void 0!==e[f.parameters[g]]&&(-1!==j.indexOf("?")?j+="&"+encodeURIComponent(f.parameters[g])+"="+encodeURIComponent(e[f.parameters[g]]):j+="?"+encodeURIComponent(f.parameters[g])+"="+encodeURIComponent(e[f.parameters[g]]));b.isString(e.scriptText)&&(f.scriptText=e.scriptText)}return d(a,c,f,j)}}function d(a,c,d,e){var f,g,j=a.body,k=a.getElementsByTagName("script")[0];return i.push(c),void 0!==d.root&&(a.getElementById(d.root)||(g=a.createElement("div"),g.id=d.root,j.insertBefore(g,j.firstChild))),f=a.createElement("script"),f.id=c+h,f.src=e,void 0!==d&&b.isString(d.scriptText)&&(f.text=d.scriptText),k.parentNode.insertBefore(f,k),f}function e(a,b){var d=document,e=b.HELIOS.config.common.api.scripts[a];return c(d,a,b,e)}function f(a,c){return void 0!==c.HELIOS.config.common.api.scripts[a]&&(!b.contains(i,a)&&e(a,c))}var g,h="-jssdk",i=[];return{writeElements:d,loadedScripts:i,include:f}}),define("c_007_2",["jquery","scriptLoader","contentCarousel"],function(a,b,c){"use strict";function d(){a(".c_007-2").length}return{init:d}}),define("c_009",["jquery","underscore","contentCarousel"],function(a,b,c){"use strict";function d(b){j=a.extend(!0,{},i,b),g=a(j.html),void 0===b&&(b={}),"rtl"===g.attr("dir")&&(j.slick.rtl=!0),a(j.root).each(function(b,d){var e=a(d).find(j.el);e.length>0&&c.init(e,j)}),a(j.el,j.root).on("click",j.analyticSliderButton,function(){f(this,a(this).attr("class"))}),a(j.el,j.root).on("sliderSwipe.slick",function(){f(this,a(this).attr("class"))})}function e(){return!0===j.slick.autoplay||!0===j.slick.responsive[0].settings.autoplay}function f(b,c){var d,f=b,g=(a(f),e()),h=j.analyticsManager.trackingVars.carouselInteraction,i=HELIOS.adobe.tagging.vehicleCategory||"not found",k=HELIOS.adobe.tagging.vehicleId||"not found",l=HELIOS.adobe.tagging.vehicleModel||"not found",m=HELIOS.adobe.tagging.vehicleModel||"not found",n=j.analyticsManager.getTrackingObjectProperties(h),o={};d=!0===g?"auto-played":"normal",o[n.componentId]="C9_Grade_Carousel",o[n.interactionType]="carousel slider",o[n.promoText]=m,o[n.carouselType]=d,o[n.vehicleCategory]=i,o[n.vehicleId]=k,o[n.vehicleModel]=l,j.analyticsManager.track(h,o)}var g,h=580,i={cDefaults:"c_009",root:".c_009",html:"html",el:".slick-carousel",contentSelect:".c_13-content",customPagingSelect:".slick-custom-paging",analyticSliderButton:"button",slideLimit:!1,setItemHeight:!0,attr:{prefix:"data-prefix",separator:"data-separator",suffix:"data-suffix"},addFiller:!0,slick:{dots:!0,slidesToShow:2,slidesToScroll:2,onInit:c.onInstanceInit,rtl:!1,responsive:[{breakpoint:h,settings:{onInit:c.onInstanceInit,slidesToShow:1,slidesToScroll:1}}]}},j=null;return{init:d}}),function(a){"function"==typeof define&&define.amd?define("jqueryCookie",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(e){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;n<o;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)&&(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),define("scrollLock",["jquery"],function(a){"use strict";function b(b){a(b.target).closest(h.selectors.touchMoveEnabled).length||b.preventDefault()}function c(){var b=a("<div>").css({overflow:"scroll",visibility:"hidden",width:100}).appendTo("body"),c=a("<div>").width("100%").appendTo(b).outerWidth();return b.remove(),100-c}function d(){f=a(document.getElementsByTagName("*")).filter(":visible").filter(function(){return"fixed"===a(this).css("position")}),i.addClass(h.classes.scrollDisabled).add(f).addClass(h.classes.scrollbarOffsetActive).css(g,c()),a(document).off(h.events.touchmove,b).on(h.events.touchmove,b)}function e(){i.add(f).removeClass([h.classes.scrollbarOffsetActive,h.classes.scrollDisabled].join(" ")).css(g,""),a(document).off(h.events.touchmove,b)}var f,g,h={events:{touchmove:"touchmove"},selectors:{touchMoveEnabled:".touchmove-enabled"},classes:{scrollDisabled:"scroll-disabled",scrollbarOffsetActive:"js-scrollbar-offset-active"}},i=a("html");return g="rtl"===i.attr("dir")?"padding-left":"padding-right",{getScrollbarWidth:c,disableGlobalScrolling:d,enableGlobalScrolling:e}}),define("text",["module"],function(a){"use strict";var b,c,d=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],e=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,f=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,g="undefined"!=typeof location&&location.href,h=g&&location.protocol&&location.protocol.replace(/\:/,""),i=g&&location.hostname,j=g&&(location.port||void 0),k=[],l=a.config&&a.config()||{};return b={version:"2.0.5",strip:function(a){if(a){a=a.replace(e,"");var b=a.match(f);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:l.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;b<3;b+=1){c=d[b];try{a=new ActiveXObject(c)}catch(e){}if(a){d=[c];break}}return a},parseName:function(a){var b,c,d,e,f=!1,g=a.indexOf("."),h=0===a.indexOf("./")||0===a.indexOf("../");-1!==g&&(!h||g>1)?(b=a.substring(0,g),c=a.substring(g+1,a.length)):b=a,d=c||b,-1!==(g=d.indexOf("!"))&&(f="strip"===d.substring(g+1),d=d.substring(0,g),c?c=d:b=d);var i=i||{environmentBase:"../.."};return e=i.environmentBase||"",b=e+b,{moduleName:b,ext:c,strip:f}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return!i||(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e))},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,l.isBuild&&(k[a]=d),e(d)},load:function(a,c,d,e){if(e.isBuild&&!e.inlineText)return void d();l.isBuild=e.isBuild;var f=b.parseName(a),k=f.moduleName+(f.ext?"."+f.ext:""),m=c.toUrl(k),n=l.useXhr||b.useXhr;!g||n(m,h,i,j)?b.get(m,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([k],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)})},write:function(a,c,d,e){if(k.hasOwnProperty(c)){var f=b.jsEscape(k[c]);d.asModule(a+"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(c){var d=function(a){return e(j,a)};d.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,d,f)},f)}},"node"===l.env||!l.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(c=require.nodeRequire("fs"),b.get=function(a,b){var d=c.readFileSync(a,"utf8");0===d.indexOf("\ufeff")&&(d=d.substring(1)),b(d)}):"xhr"===l.env||!l.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);l.onXhr&&l.onXhr(g,a),g.onreadystatechange=function(b){var e,f;4===g.readyState&&(e=g.status,e>399&&e<600?(f=new Error(a+" HTTP status: "+e),f.xhr=g,d(f)):c(g.responseText))},g.send(null)}:("rhino"===l.env||!l.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}),b}),define("hbars",["text","handlebars"],function(a,b){"use strict";var c={};return{version:"0.0.2",load:function(d,e,f,g){if(c[d])f(c[d]);else{var h=g.hbars&&g.hbars.extension||".html",i=g.hbars&&g.hbars.path||"",j=g.hbars&&g.hbars.compileOptions||{};a.load(i+d+h,e,function(a){g.isBuild?(c[d]=b.precompile(a,j),f()):(c[d]=b.compile(a),f(c[d]))},g)}},write:function(a,b,d,e){var f=c[b];f&&d.asModule(a+"!"+b,"define('{pluginName}!{moduleName}', ['handlebars'], function (Handlebars) { return Handlebars.template({content}); });\n".replace("{pluginName}",a).replace("{moduleName}",b).replace("{content}",f))}}}),define("hbars!/common-assets/scripts/libs/modal/html/modalTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.modalId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.modalId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="c_129 modal animate ',(g=c.customClass)?f=g.call(b,{hash:{},data:e}):(g=b&&b.customClass,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+" ",(g=c.touchMoveEnabledClass)?f=g.call(b,{hash:{},data:e}):(g=b&&b.touchMoveEnabledClass,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" tabindex="-1" role="dialog">\n    <div class="modal-dialog-container">\n        <div class="modal-dialog" role="document">\n            <h2 class="modal-title"></h2>\n            <div class="modal-close-wrapper">\n                <button type="button" class="modal-close" aria-label="close"><span aria-hidden="true">Close</span></button>\n            </div>\n            <div class="modal-content"></div>\n        </div>\n    </div>\n</div>\n<div class="modal-overlay ',(g=c.customOverlayClass)?f=g.call(b,{hash:{},data:e}):(g=b&&b.customOverlayClass,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'"></div>\n'})}),
define("modal",["jquery","underscore","jqueryUtilityPlugins","scrollLock","hbars!/common-assets/scripts/libs/modal/html/modalTemplate"],function(a,b,c,d,e){"use strict";function f(c){if(!(this instanceof f))return new f(c);this.options=b.extend({component:"c_129",overlaySelector:"."+g+"overlay",dialogSelector:"."+g+"dialog",dialogContainerSelector:"."+g+"dialog-container",modalTitle:"."+g+"title",contentSelector:"."+g+"content",closeSelector:"."+g+"close",openSelector:null,target:null,title:null,iframe:!1,closeButton:!0,clearOnClose:!0,customClass:null,customOverlayClass:null,touchMoveEnabled:!1,defaultInstance:!1,displayType:this.TYPE_RIGHTSLIDE,centeredClass:"centered",modalSize:null},c||{}),this.options.displayType===f.TYPE_CENTERED&&(this.options.customClass+=" "+this.options.centeredClass),this.options.touchMoveEnabled&&(this.options.touchMoveEnabledClass="touchmove-enabled"),this.$body=a("body"),this.$html=a("html"),this.$root=null,this.$overlay=null,this.$dialog=null,this.$dialogContainer=null,this.$content=null,this.$openButton=null,this.$closeButton=null,this.modalId=a.uniqueElementId(g),this.events={transitionend:"transitionend MSTransitionEnd"},this._cacheBodyWidth(),this.modalClosedPaddingRight=parseInt(this.$body.css("padding-right"),10),a(window).on("resize",b.bind(b.debounce(this._cacheBodyWidth,200),this)),this.currentTarget=!1,this._createModalContainer().then(b.bind(function(){this._bindListeners()},this)),HELIOS.modals.push(this)}var g="modal-";return HELIOS.modals=[],f.prototype._cacheBodyWidth=function(){this.modalClosedWidth=this.$body.width()},f.prototype._createModalContainer=function(){return this._getComponentHtml().then(b.bind(function(b){this.$body.append(a(b)),this.$root=a("#"+this.modalId),this.$dialog=this.$root.find(this.options.dialogSelector),this.$dialogContainer=this.$root.find(this.options.dialogContainerSelector),this.$content=this.$root.find(this.options.contentSelector),this.$closeButton=this.$root.find(this.options.closeSelector),this.$overlay=this.$body.find(this.options.overlaySelector)},this))},f.prototype._getComponentHtml=function(){var b,c;return b=a.Deferred(),c=e({modalId:this.modalId,customClass:this.getOption("customClass"),customOverlayClass:this.getOption("customOverlayClass"),touchMoveEnabledClass:this.getOption("touchMoveEnabledClass")}),b.resolve(c),b},f.prototype._bindListeners=function(){a(this.options.openSelector).on("click.modal",b.bind(function(c){var d=a(c.target);c.preventDefault(),this.$openButton=d,this.currentTarget!==this.getOption("target",null,["href"])||this.getOption("clearOnClose")?b.throttle(this.open(),500):this.animateIn()},this)),this.$closeButton.on("click.modal",b.bind(this.close,this)),this.$body.on("keydown.modal",b.bind(function(a){27===a.which&&this.close()},this)),this.$overlay.on("click.modal",b.throttle(b.bind(this.close,this),500)),b.isFunction(this.options.onScrollToBottom)&&this.$root.scroll(b.debounce(b.bind(function(){var a=this.$dialog.height(),b=this.$root.height(),c=.1*a,d=Math.abs(this.$dialog.position().top),e=a-(d+b);e<=c&&this.options.onScrollToBottom(Math.max(e,0))},this),100))},f.prototype.open=function(c){var d;return c=this.currentTarget=this.getOption("target",c||!1,["href"]),this.currentScrollPos=a(document).scrollTop(),d=b.isEmpty(c)?this.setContent(this.getOption("content")):this.setTarget(c),this._enforceFocus(),d.then(b.bind(function(){var a=this.getOption("title");b.isEmpty(a)?this.$dialog.children("."+g+"title").hide(0).text(""):this.$dialog.children("."+g+"title").show(0).text(a)},this)).then(b.bind(function(){return this.animateIn()},this)).then(b.bind(function(){this.$root.trigger("modal.open",this).focus()},this)),this.$overlay.css("zIndex",1),b.defer(b.bind(function(){this.$overlay.css("zIndex","")},this)),d},f.prototype.show=function(){this._enforceFocus(),this.animateIn().then(b.bind(function(){this.$root.trigger("modal.show",this).focus()},this)),this.$overlay.css("zIndex",1),b.defer(b.bind(function(){this.$overlay.css("zIndex","")},this))},f.prototype.close=function(){var c;return a(window).off(".modal"),a(document).off(".modal"),this.$root.off(".modal"),c=this.animateOut(),c=c.then(b.bind(function(){if(this.getOption("clearOnClose"))return this.clear()},this)).then(b.bind(function(){this.$root.trigger("modal.close",this)},this))},f.prototype.clear=function(){return this.$content.html("").promise()},f.prototype.setTarget=function(c){var d,e,f;if(c=this.getOption("target",c,["href"]),e=this.getOption("iframe"),d=this.clear(),e)d.then(b.bind(function(){this.setContent('<iframe src="'+c+'" frameBorder="0"></iframe>')},this)).then(b.bind(function(){var b=a.Deferred();return this.$content.find("iframe").load(function(){b.resolve()}),b},this));else{if(this.$root.removeClass(g+"iframe"),this.$content.height("auto"),/^[.#]/.test(c))return f=a(c).html(),this.setContent(f);d.then(b.bind(function(){return a.ajax({url:c,type:"GET",success:b.bind(function(a){return this.setContent(a)},this)})},this))}return d},f.prototype.setContent=function(a){return this.$content.html(a).promise()},f.prototype.setAllContent=function(a){var b=this.$dialog.children(this.options.modalTitle);return a.title&&a.title.length?b.text(a.title).show():b.hide(),this.setContent(a.content)},f.prototype.delay=function(b){var c=a.Deferred();return setTimeout(function(){c.resolve()},b),c},f.prototype.animateIn=function(){var c,e,f,h,i=a.Deferred();return d.disableGlobalScrolling(),this.$body.addClass(g+"open"),this.$root.addClass("open"),c=this.$body.width(),this.$body.css("padding-right",this.modalClosedPaddingRight+(c-this.modalClosedWidth)),e=this.getOption("iframe"),f=this.$root.hasClass("animate"),h=!this.$root.hasClass("animate-in"),e&&this.$root.addClass(g+"iframe"),f&&h?(this.$root.addClass("animate-in"),this._transitionEnd(i)):i.resolve(),e?i.then(b.bind(function(){var b,c=this;c.$dialogContainer.height("100%"),c.$content.height(c.$dialogContainer.height()+20),a(window).resize(function(){clearTimeout(b),b=setTimeout(function(){c.$content.height(c.$dialogContainer.height()+20)},200)})},this)):i.then(b.bind(function(){this.getOption("type")===this.TYPE_CENTERED&&this._setCenteredModalHeightAndMargin(),this.getOption("type")===this.TYPE_CENTERED&&a(window).on("resize",b.bind(b.debounce(function(){this._setCenteredModalHeightAndMargin()},200),this))},this)),i.then(b.bind(function(){this.$root.trigger("modal.animateIn",this)},this)),i},f.prototype.recalculateHeight=function(){this._setCenteredModalHeightAndMargin()},f.prototype._setCenteredModalHeightAndMargin=function(){var b,c=this.$root.filter(".modal"),d=this.options.modalSize;d?this.$content.height(d):(this.$dialogContainer.height("auto"),b=c[0].getBoundingClientRect().height||c.outerHeight(),b>=a(window).height()?(c.css("top",0),c.css("margin-top",0)):(c.css("top","50%"),c.css("margin-top",-.5*b)),this.$dialogContainer.height(b))},f.prototype.animateOut=function(){var c,e,f=a.Deferred();return c=this.$root.hasClass("animate"),e=this.$root.hasClass("animate-in"),c&&e?(this.$root.removeClass("animate-in"),this._transitionEnd(f)):f.resolve(),f.then(b.bind(function(){d.enableGlobalScrolling(),this.$body.removeClass(g+"open").css("padding-right",""),this.$root.removeClass(g+"iframe open")},this)),f.then(b.bind(function(){this.$root.trigger("modal.animateOut",this)},this)),f},f.prototype.getOption=function(a,c,d){var e,f,g;if(e=c,b.isUndefined(this.options[a])||b.isNull(this.options[a])||(e=this.options[a]),!b.isNull(this.$openButton)){f=a.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),g=["data-modal-"+f],b.isUndefined(d)||(g=b.union(g,d));for(var h=0,i=g.length;h<i;h++)b.isUndefined(this.$openButton.attr(g[h]))||(e=this.$openButton.attr(g[h]),b.isEmpty(e)&&(e=!0),"false"===e&&(e=!1))}return e},f.prototype.remove=function(){return this.$root.remove().promise()},f.getDefaultModal=function(){for(var a=0,b=HELIOS.modals.length;a<b;a++)if(HELIOS.modals[a].options.defaultInstance)return HELIOS.modals[a];throw new Error("No default modal has been set")},f.prototype._transitionEnd=function(a){var b=!1;this.$html.hasClass("ie9")||this.$html.hasClass("ltie9")?a.resolve():this.$root.one(this.events.transitionend,function(){b=!0,a.resolve()}),!b&&this.$root.hasClass("open")&&a.resolve()},f.prototype._enforceFocus=function(){a(document).off("focusin.modal").on("focusin.modal",b.bind(function(a){document===a.target||this.$root.is(a.target)||this.$root.has(a.target).length||this.$root.focus()},this))},f.prototype._enforceTop=function(b,c,d,e){setTimeout(function(){a(b).animate({scrollTop:c},d)},e)},f.prototype.setDisplayType=function(a){this.options.displayType=a,this.options.displayType===f.TYPE_CENTERED?(this.options.customClass+=" "+this.options.centeredClass,this.$root.addClass(this.options.centeredClass)):(this.options.customClass=this.options.customClass.replace(this.options.centeredClass,""),this.$root.removeClass(this.options.centeredClass))},f.TYPE_RIGHTSLIDE=1,f.TYPE_CENTERED=2,f}),function(a){"function"==typeof define&&define.amd?define("jqueryvalidation",["jquery"],a):a(jQuery)}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console);var c=a.data(this[0],"validator");return c||(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){c.settings.submitHandler&&(c.submitButton=b.target),a(b.target).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(b.target).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.submit(function(b){function d(){var d;return!c.settings.submitHandler||(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),!1)}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c;return a(this[0]).is("form")?b=this.validate().form():(b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b})),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d,e,f,g,h,i,j=this[0];if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(b,c){i[c]=f[c],delete f[c],"required"===c&&a(j).removeAttr("aria-required")}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,delete g.required,g=a.extend({required:h},g),a(j).attr("aria-required","true")),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){return!!a.trim(""+a(b).val())},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,b){9===b.which&&""===this.elementValue(a)||(a.name in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,""),e=c.settings;e[d]&&!this.is(e.ignore)&&e[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){d[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",b).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c=this.clean(b),d=this.validationTargetFor(c),e=!0;return this.lastElement=d,void 0===d?delete this.invalid[c.name]:(this.prepareElement(d),this.currentElements=a(d),e=!1!==this.check(d),e?delete this.invalid[d.name]:this.invalid[d.name]=!0),a(b).attr("aria-invalid",!e),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console,!(this.name in c||!b.objectLength(a(this).rules()))&&(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d=a(b),e=b.type;return"radio"===e||"checkbox"===e?a("input[name='"+b.name+"']:checked").val():"number"===e&&void 0!==b.validity?!b.validity.badInput&&d.val():(c=d.val(),"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,f,g=a(b).rules(),h=a.map(g,function(a,b){return b}).length,i=!1,j=this.elementValue(b);for(d in g){f={method:d,parameters:g[d]};try{if("dependency-mismatch"===(c=a.validator.methods[d].call(this,j,b,f.parameters))&&1===h){i=!0;continue}if(i=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,f),!1}catch(e){throw this.settings.debug&&window.console,e}}if(!i)return this.objectLength(g)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,c){var d=this.defaultMessage(b,c.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),this.errorList.push({message:d,element:b,method:c.method}),this.errorMap[b.name]=d,this.submitted[b.name]=d},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g=this.errorsFor(b),h=this.idOrName(b),i=a(b).attr("aria-describedby");g.length?(g.removeClass(this.settings.validClass).addClass(this.settings.errorClass),g.html(c)):(g=a("<"+this.settings.errorElement+">").attr("id",h+"-error").addClass(this.settings.errorClass).html(c||""),d=g,this.settings.wrapper&&(d=g.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b),g.is("label")?g.attr("for",h):0===g.parents("label[for='"+h+"']").length&&(f=g.attr("id"),i?i.match(new RegExp("\b"+f+"\b"))||(i+=" "+f):i=f,a(b).attr("aria-describedby",i),(e=this.groups[b.name])&&a.each(this.groups,function(b,c){c===e&&a("[name='"+b+"']",this.currentForm).attr("aria-describedby",g.attr("id"))}))),!c&&this.settings.success&&(g.text(""),"string"==typeof this.settings.success?g.addClass(this.settings.success):this.settings.success(g,b)),this.toShow=this.toShow.add(g)},errorsFor:function(b){var c=this.idOrName(b),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+d.replace(/\s+/g,", #")),this.errors().filter(e)},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return!this.dependTypes[typeof a]||this.dependTypes[typeof a](a,b)},dependTypes:{boolean:function(a){return a},string:function(b,c){return!!a(b,c.form).length},function:function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),/min|max/.test(c)&&(null===g||/number|range|text/.test(g))&&(d=Number(d)),d||0===d?e[c]=d:g===c&&"range"!==g&&(e[c]=!0);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b);for(c in a.validator.methods)void 0!==(d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()))&&(e[c]=d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(!1===e)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0===e.param||e.param:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:a.trim(b).length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var c,d,e=0,f=0,g=!1;if(a=a.replace(/\D/g,""),a.length<13||a.length>19)return!1;for(c=a.length-1;c>=0;c--)d=a.charAt(c),f=parseInt(d,10),g&&(f*=2)>9&&(f-=9),e+=f,g=!g;return e%10==0},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e<=d},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e,f,g=this.previousValue(c);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),g.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=g.message,d="string"==typeof d&&{url:d}||d,g.old===b?g.valid:(g.old=b,e=this,this.startRequest(c),f={},f[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:f,context:e.currentForm,success:function(d){var f,h,i,j=!0===d||"true"===d;e.settings.messages[c.name].remote=g.originalMessage,j?(i=e.formSubmitted,e.prepareElement(c),e.formSubmitted=i,e.successList.push(c),delete e.invalid[c.name],e.showErrors()):(f={},h=d||e.defaultMessage(c,"remote"),f[c.name]=g.message=a.isFunction(h)?h(b):h,e.invalid[c.name]=!0,e.showErrors(f)),g.valid=j,e.stopRequest(c,j)}},d)),"pending")}}}),a.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var b,c={};a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);if(e.is(b))return d.apply(e,arguments)})}})}),define("validation",["underscore","jquery","jqueryvalidation"],function(a,b){"use strict";function c(d,e){if(!(this instanceof c))return new c(d,e);if(this.$form="object"==typeof d?d:b(d),0!==this.$form.size()){this.current={$formGroup:null,$formElement:null,errors:{}},this.errors={};var f="!-+/:-@[-`{-",g=" -¿";this.patterns={"generic-alpha":"[^"+f+g+"0-9]*","simple-numeric":"^\\d*$","generic-numeric":"[0-9 -]*","simple-alphanumeric":"^[0-9a-zA-Z]*$","generic-alphanumeric":"^([0-9a-zA-ZÀ-ÿ()+ -_]){0,20}$","long-alphanumeric":"^([0-9a-zA-ZÀ-ÿ()+ -_]){0,100}$","international-alphanumeric":"[^"+f+g+"]*",email:".+@.+",date:"^[0-9]{2}-[0-9]{2}-[0-9]{4}$",password:"^(?=.*?[A-Z])(?=(.*[a-z]){1,})(?=(.*[\\d]){1,})(?=(.*[\\W_]){1,})(?!.*\\s).{8,}$","generic-vin":"^[0-9a-hA-Hj-nJ-NpPr-zR-Z]{17}$"},this.uiConstants={prefix:"helios_",classBtnDisabled:"btn-disabled",classHasValidation:"hasValidation",classElementError:"error",classElementRequired:"required",classElementComplete:"complete",classFormGroup:"form-group",classFormSubmitButton:"submit-form-button",classErrorMessage:"error-message",classGroupErrors:"error-group",classTooltip:"tooltip",classShowError:"show-error",groupCheckboxChecked:"group-checkbox:checked"},this.$groupErrors=this.$form.find("."+this.uiConstants.classGroupErrors),this.customRoutines=["notblank","required","invalid","past-date","equal-to","max-length","vin-or-registration","customregex","postcode-regex","brazilian-cpf","min-checkbox-required","max-checkbox-required"],this._elIndex=[],this.addCustomValidators(),this.customRoutines=this._fetchCustomErrors(),this.defaults={showGroupErrors:!0,groupErrorsSelector:".error-group",groupErrorsPlacement:"submit",submitButtonEnabled:!0,submitButtonSelector:null,validation:{debug:!1,ignore:[],errorPlacement:a.bind(this._formElementErrorPlacementHandler,this),
invalidHandler:a.bind(this._formInvalidHandler,this),showErrors:a.bind(this._formErrorsShowHandler,this),highlight:a.bind(this._formElementHighlightHandler,this),unhighlight:a.bind(this._formElementUnhighlightHandler,this),success:a.bind(this._formValidHandler,this),submitHandler:a.bind(this._formSubmitHandler,this),rules:this.customRoutines.rules,messages:this.customRoutines.messages}},this.options=e||{},this.settings=b.extend(!0,{},this.defaults,this.options),this.init()}}b.validator.prototype.ruleValidationStatus=function(a){if(!a)return{error:"element not defined",element:a};a=b(a);var c=a.rules(),d={};for(var e in c){var f={method:e,parameters:c[e]},g=b.validator.methods[e].call(this,a.value.replace(/\r/g,""),a,f.parameters);d[f.method]=g}return d},c.prototype.init=function(){this.validator=this.$form.validate(this.settings.validation),this._placeGroupErrors(),this._bindHandlers(),this.$form.addClass(this.uiConstants.classHasValidation)},c.prototype.getElementIndex=function(){for(;this._elIndex.length>0;)this._elIndex.pop();this.$form.find("input, select, textarea").each(a.bind(function(c,d){var e=b(d).attr("id")?b(d).attr("id"):b(d).attr("name");e&&a.indexOf(this._elIndex,e)<0&&this._elIndex.push(e)},this))},c.prototype.reset=function(){this.validator.resetForm(),this.$form.find(".error").removeClass("error")},c.prototype.getValidationRoutines=function(a){var b={};for(var c in this.customRoutines){var d=a.attr("data-validation-"+this.customRoutines[c]);d&&d.length>0&&(b[this.customRoutines[c]]=d)}return b},c.prototype._fetchCustomErrors=function(){var c=this,d={},e=d;return b("input, select, textarea, radio",this.$form).each(function(f,g){var h,i,j,k=b(g),l=k.attr("name"),m=c.getValidationRoutines(k);if(a.size(m)>0){e[l]={},d[l]={};for(h in m)i="helios_"+h.replace("validation","").toLowerCase(),j=m[h],b.validator.methods.hasOwnProperty(i)&&(e[l][i]=!0,d[l][i]=j)}}),{rules:e,messages:d}},c.prototype.getRuleStatus=function(a){return a?this.$form.validate().ruleValidationStatus(a):{}},c.prototype.getRules=function(a){return a?a.rules():this.$form.rules()},c.prototype._setCurrent=function(a){if(a){var c=b(a,this.$form),d=c.parents("."+this.uiConstants.classFormGroup);this.current={$formElement:c,$formGroup:d}}},c.prototype._bindHandlers=function(){var b=this.settings.formSubmitButton||"."+this.uiConstants.classFormSubmitButton;this.$form.on("click",b,a.bind(this._submitButtonClickHandler,this)),this.$form.on("change","select",a.bind(this._formElementChangeHandler,this))},c.prototype._formElementChangeHandler=function(a){b(a.currentTarget).valid()},c.prototype._submitButtonClickHandler=function(a){a.preventDefault();var c=b(a.currentTarget);this.$form.trigger("validation.submit.form"),c.hasClass(this.uiConstants.classBtnDisabled)||("function"==typeof this.settings.formSubmitHandler?this.settings.formSubmitHandler(a.currentTarget,this.$form):this.$form.valid()?this.$form.trigger("submit"):this._toggleGroupErrors(this.errors))},c.prototype._formInvalidHandler=function(a,b){},c.prototype._formValidHandler=function(a,b){},c.prototype._formSubmitHandler=function(a){a.submit(),this.toggleFormSubmitButton()},c.prototype._onFormElementFocusoutHandler=function(a,b){this._setCurrent(a)},c.prototype._formErrorsShowHandler=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];this._updateError(d.element,d.message,d.method),this.errors[d.element.name]=d.message}this.$form.validate().defaultShowErrors()},c.prototype._updateError=function(a,b,c){var d,e,f=!1;this._setCurrent(a),d=this.current.$formElement.is(":visible")||this.current.$formElement.hasClass(this.uiConstants.classShowError),e=this.current.$formElement.css("clip"),((f=this.current.$formElement.is('[type="checkbox"], [type="radio"]'))||d&&("auto"===e||void 0===e))&&this._displayError(b)},c.prototype._formElementErrorPlacementHandler=function(a,b){this._setCurrent(b)},c.prototype._formElementHighlightHandler=function(a,b,c){this._setCurrent(a),this.current.$formElement.addClass(this.uiConstants.classElementError),this.current.$formGroup.removeClass(this.uiConstants.classElementComplete).addClass(this.uiConstants.classElementError)},c.prototype._formElementUnhighlightHandler=function(c,d,e){this._setCurrent(c),this.errors=a.omit(this.errors,c.name),this.current.$formGroup.removeClass(this.uiConstants.classElementError),b.trim(this.current.$formElement.val()).length>0?this.current.$formGroup.addClass(this.uiConstants.classElementComplete):this.current.$formGroup.removeClass(this.uiConstants.classElementComplete),this._removeError()},c.prototype._displayError=function(a){this.errors[this.current.$formElement.attr("name")]=a;var c,d=this.current.$formGroup,e=d.find("."+this.uiConstants.classErrorMessage);0===e.size()?(c=b('<span class="'+this.uiConstants.classErrorMessage+'">'+a+"</span>"),this.current.$formElement.is("select")?this.current.$formElement.next().after(c):this.current.$formElement.parent().append(c)):e.text(a)},c.prototype._removeError=function(a){(a?b(a).parents("."+this.uiConstants.classFormGroup):this.current.$formGroup).removeClass(this.uiConstants.classElementError)},c.prototype.fetchCurrentErrors=function(a){var c={},d=this.$form;return b("input, select, textarea",this.$form).each(function(){c[b(this).attr("name")]||(c[b(this).attr("name")]=[]),c[b(this).attr("name")].push(d.validate().ruleValidationStatus(this))}),c},c.prototype._placeGroupErrors=function(){var a,c=b(this.settings.groupErrorsSelector,this.$form),d=c.first().clone();switch(c.remove(),this.settings.groupErrorsPlacement){case"submit":a=this.settings.formSubmitButton||"."+this.uiConstants.classFormSubmitButton,b(a,this.$form).before(d);break;case"submit-tooltip":d.addClass(this.uiConstants.classTooltip),a=this.settings.formSubmitButton||"."+this.uiConstants.classFormSubmitButton,b(a,this.$form).before(d);break;default:this.$form.prepend(d)}this.$groupErrors=d,this.$groupErrorList=d.find("ul:eq(0)")},c.prototype.hideGroupErrors=function(){this.$groupErrors.fadeOut("fast")},c.prototype.showGroupErrors=function(){var a=this;this.$groupErrors.show(),this.$groupErrors.hasClass(this.uiConstants.classTooltip)&&setTimeout(function(){b(document).one("click",function(c){b(c.target).is("."+a.uiConstants.classFormSubmitButton)?a.showGroupErrors():a.hideGroupErrors()})},25)},c.prototype._toggleGroupErrors=function(b){this.getElementIndex();var c=[];if(this.$form.removeClass(this.uiConstants.classElementError),this.$groupErrorList.children().remove(),this.settings.showGroupErrors){if(1===this.$groupErrors.size()){for(var d in this._elIndex)this.errors.hasOwnProperty(this._elIndex[d])&&(this.$groupErrorList.append("<li>"+this.errors[this._elIndex[d]]+"</li>"),c.push(this._elIndex[d]));for(var e in this.errors)a.indexOf(c,e)<0&&this.$groupErrorList.append("<li>"+this.errors[e]+"</li>")}a.size(this.errors)>0?(this.settings.showGroupErrors&&this.showGroupErrors(),this.$form.addClass(this.uiConstants.classElementError)):(this.hideGroupErrors(),this.$form.removeClass(this.uiConstants.classElementError))}},c.prototype.toggleGroupErrors=function(){this.settings.showGroupErrors=!this.settings.showGroupErrors},c.prototype.enableGroupErrors=function(){this.settings.showGroupErrors=!0},c.prototype.disableGroupErrors=function(){this.settings.showGroupErrors=!1},c.prototype._getSubmitButton=function(){return null!==this.settings.submitButtonSelector?b(this.settings.submitButtonSelector,this.$form):b("."+this.uiConstants.classFormSubmitButton,this.$form)},c.prototype.toggleFormSubmitButton=function(){this.settings.submitButtonEnabled?this.disableFormSubmitButton():this.enableFormSubmitButton()},c.prototype.enableFormSubmitButton=function(){this.settings.submitButtonEnabled=!0,this._getSubmitButton().removeClass(this.uiConstants.classBtnDisabled).prop("disabled",!1)},c.prototype.disableFormSubmitButton=function(){this.settings.showGroupsubmitButtonEnabledErrors=!1,this._getSubmitButton().addClass(this.uiConstants.classBtnDisabled).prop("disabled",!0)},c.prototype.addCustomValidators=function(){b.validator.addMethod(this.uiConstants.prefix+"invalid",a.bind(d,this)),b.validator.addMethod(this.uiConstants.prefix+"notblank",a.bind(g,this)),b.validator.addMethod(this.uiConstants.prefix+"compound",a.bind(h,this)),b.validator.addMethod(this.uiConstants.prefix+"either_or",a.bind(i,this)),b.validator.addMethod(this.uiConstants.prefix+"past-date",a.bind(k,this)),b.validator.addMethod(this.uiConstants.prefix+"equal-to",a.bind(l,this)),b.validator.addMethod(this.uiConstants.prefix+"max-length",a.bind(m,this)),b.validator.addMethod(this.uiConstants.prefix+"vin-or-registration",a.bind(e,this)),b.validator.addMethod(this.uiConstants.prefix+"customregex",a.bind(n,this)),b.validator.addMethod(this.uiConstants.prefix+"postcode-regex",a.bind(o,this)),b.validator.addMethod(this.uiConstants.prefix+"brazilian-cpf",a.bind(p,this)),b.validator.addMethod(this.uiConstants.prefix+"min-checkbox-required",a.bind(q,this)),b.validator.addMethod(this.uiConstants.prefix+"max-checkbox-required",a.bind(r,this))};var d=function(a,c,d){if(!a||0===a.length)return!0;var e=b(c),g=e.data("validation-invalid-pattern"),h=!0;if(this.patterns.hasOwnProperty(g))switch("string"==typeof this.patterns[g]&&(this.patterns[g]=new RegExp(this.patterns[g])),g){case"date":h=this.patterns[g].test(a)&&f(a);break;case"email":case"telephone":case"password":h=this.patterns[g].test(a);break;default:h=0===a.replace(this.patterns[g],"").length}return h},e=function(a){var b,c=this.patterns["generic-alphanumeric"],d=this.patterns["generic-vin"];return b=17===a.length?new RegExp(d):new RegExp(c),0===a.replace(b,"").length},f=function(a,b){return!!j(a,b)},g=function(a,c,d){var e,f,g=b(c);return g.is('[type="checkbox"]')?g.is(":checked"):g.is('[type="radio"]')?(e=g.attr("name"),f=!1,b('input[name="'+e+'"]').each(function(){if(b(this).is(":checked"))return f=!0,!1}),f):b.trim(a).length>0},h=function(a,c,d){var e=this.validator,f=d[0];if(!(f instanceof Array))return!1;b(f.join(", "),c.form).filter(function(){return e.elementValue(this)});return b(f.join(", "),c.form).filter(function(){return e.elementValue(this)}).length===f.length},i=function(c,d,e){var f=this,g=this.validator,h=e[0],i=e[1];if(!(i instanceof Array))return!1;var j="#"+b(d).attr("id");a.indexOf(i,j)<0&&i.push(j);var k=b(i.join(", "),d.form);return k.each(function(){f._removeError(b(this))}),k.filter(function(){return g.elementValue(this)}).length>=h},j=function(a,b){b=b||"dd-mm-yyyy";for(var c,d,e,f=/[^mdy]/.exec(b)[0],g=b.split(f),h=a.split(f),i=g.length,j=0;j<i;j+=1)/m/.test(g[j])&&(c=parseInt(h[j])-1),/d/.test(g[j])&&(d=parseInt(h[j])),/y/.test(g[j])&&(e=parseInt(h[j]));return!!(c>=0&&c<12&&e&&e>999&&d>0&&d<=new Date(e,c,d).getDate())&&new Date(e,c,d)},k=function(a,b,c,d){var e=!0,f=new Date,g=j(a,d);return g&&new Date(f).getTime()<=g.getTime()&&(e=!1),e},l=function(a,c,d){var e=b(c),f=e.data("validation-equal-to-element"),g=b(f),h=g.val();return g.data("boundEqualValidator")||(g.data("boundEqualValidator","true"),g.bind("input",function(){e.valid()}),g.bind("propertychange",function(){e.closest("form").valid()})),h===a},m=function(a,c){var d=b(c),e=d.data("validation-max-length-value");return!a||0===a.length||a.length<=e},n=function(a,c,d){var e=b(c),f=e.data("validation-customregex-pattern");return!a||0===a.length||!f||0===f.length||"string"!=typeof f||new RegExp(f).test(a)},o=function(a,c){var d=!0,e=b(c),f=e.data("validation-postcode-regex-pattern");return b.trim(a).length&&(d=new RegExp(f,"i").test(a)),d},p=function(a,c){var d=/^0+$|^1+$|^2+$|^3+$|^4+$|^5+$|^6+$|^7+$|^8+$|^9+$/,e=[],f=0,g=0,h=11,i=h,j=0,k="",l=0,m=0;if(a=b.trim(a),a=a.replace(/\./g,""),!(k=a.replace("-",""))||0===k.length)return!1;for(;k.length<h;)k="0"+k;for(m=0;m<h;m++)e[m]=k.charAt(m),m<9&&(i--,f+=e[m]*i);for(j=f%h,e[9]=j<2?0:h-j,i=h,l=0;l<10;l++)g+=e[l]*i,i--;return j=g%h,e[10]=j<2?0:h-j,parseInt(k.charAt(9))===e[9]&&parseInt(k.charAt(10))===e[10]&&!k.match(d)},q=function(a,c){var d=b(c),e=d.parents("[data-min-required]"),f=e.data("min-required");return e.find("."+this.uiConstants.groupCheckboxChecked).length>=f||0===f},r=function(a,c){var d=b(c),e=d.parents("[data-max-required]"),f=e.data("max-required");return e.find("."+this.uiConstants.groupCheckboxChecked).length<=f||0===f};return c}),define("c_080",["jquery","underscore","validation","urlParameterDecoder","storageManager","storageManagerKeys"],function(a,b,c,d,e,f){"use strict";function g(b){if(hb=a.extend({},gb,b),ca=a(hb.selectors.component),!ca.length)return!1;Ba=hb.window.location!==hb.window.parent.location,_=a("html, body"),aa=a("body"),da=ca.find("form"),ea=a(hb.selectors.loggedInStateSelector),p(),fa=ca.find(hb.selectors.formElements),la=ca.find(hb.selectors.signupSection),ga=da.find(hb.selectors.loginSubmitButton),ha=da.find(hb.selectors.signUpSubmitButton),ia=ca.find(hb.selectors.loginLink),ja=ca.find(hb.selectors.signupLink),ka=ca.find(hb.selectors.activationLink),ma=da.find(hb.selectors.postcodeSection),na=da.find(hb.selectors.postcodeLink),oa=da.find(hb.selectors.searchPostcodeButton),pa=ca.find(hb.selectors.mainError),ta=da.find(hb.selectors.pageId),qa=ca.find(hb.selectors.formGroup),Fa=da.attr("action"),Ga=ga.data(hb.attributes.successUrl),Ha=ga.data(hb.attributes.accountPendingUrl),Ia=ga.data(hb.attributes.loggedOut),Ja=ga.data(hb.attributes.activationSuccess),Ka=ga.data(hb.attributes.activationExpired),La=ga.data(hb.attributes.activationError),Ma=ha.data(hb.attributes.successUrl),Na=oa.data(hb.attributes.searchPostcodeUrl),Pa=da.data(hb.attributes.noResponse),ra=da.find(hb.selectors.password),sa=da.find(hb.selectors.confirmPassword),ua=da.find(hb.selectors.postcode),xa=da.find(hb.selectors.title),ya=xa.parent().find(hb.selectors.selectedValue),va=da.find(hb.selectors.address),wa=va.parent().find(hb.selectors.selectedValue),Da=va.data(hb.attributes.defaultText),za=ca.find(hb.selectors.ajaxLoading),Ea=ua.data(hb.attributes.emptyAddress),Aa=ca.find(hb.selectors.statusMessage),Ta=da.data(hb.attributes.customerInfoUrl),Ua=da.find(hb.selectors.manualAddressLink),Va=da.find(hb.selectors.firstName),Wa=da.find(hb.selectors.lastName),Xa=da.find(hb.selectors.secondLastName),Ya=da.find(hb.selectors.nationalId),Za=da.find(hb.selectors.email),$a=da.find(hb.selectors.city),_a=da.find(hb.selectors.addressLine1),ab=da.find(hb.selectors.vin),bb=a(hb.classes.dockNavigationWrapperClass),db=ca.data(hb.attributes.logoutUrl),"#register"===hb.window.location.hash&&J(null,hb.classes.signupSectionSuffix),e.init(),e.deleteItem("c_141"),d.init(),ib=d.getUrlParams(),X(),T(),q(),M(),L(),n(),m(),U(),W(),h()&&i().done(k).fail(l)}function h(){return!b.isUndefined(ca)&&ca.get(0).hasAttribute(hb.data.gigyaValidationCustomRegexPattern)}function i(){var b=a.Deferred(),c=0,d=setInterval(function(){c+=1,hb.window.gigya?(clearInterval(d),b.resolve()):c>=hb.config.maxAttempts&&(clearInterval(d),b.reject())},hb.config.readyInterval);return b.promise()}function j(a){b.isEmpty(a.passwordComplexity.regExp)||ra.attr(hb.data.validationCustomRegexPattern,a.passwordComplexity.regExp)}function k(){var a={sections:"passwordComplexity",callback:j};hb.window.gigya.accounts.getPolicies(a)}function l(){ca.remove()}function m(){ca.addClass("ready")}function n(){switch(ta.val()){case hb.classes.signupSectionSuffix:ja.trigger(hb.events.click);break;case hb.classes.activationSectionSuffix:ka.trigger(hb.events.click);break;default:ia.trigger(hb.events.click)}}function o(b,c){var d,e=b.closest(hb.selectors.formGroup),f=e.find(hb.selectors.errorMessage);e.addClass(hb.classes.error),f.length?f.text(c):(d=hb.attributes.templateErrorMessage,d=d.replace(hb.attributes.keyReplaceMessage,c),a(d).insertAfter(b))}function p(){Oa=new c(da,{validation:{rules:{email:{email:!1}}}})}function q(){ca.on(hb.events.click,hb.selectors.loginLink,function(b){a(hb.selectors.signupPassword).removeData(hb.data.validationInvalidPattern),J(b,hb.classes.loginSectionSuffix),b.isTrigger||D(this)}),ca.on(hb.events.click,hb.selectors.activationNext,function(a){da.valid()&&J(a,hb.classes.activationConfirmationSectionSuffix)}),ca.on(hb.events.click,hb.selectors.lookupPostcodeLink,function(a){K(a,hb.classes.enterPostcodeSectionSuffix)}),ca.on(hb.events.click,hb.selectors.manualAddressLink,function(a){ua.val()&&ua.valid(),K(a,hb.classes.enterManuallyAddressSectionSuffix)}),ca.on(hb.events.click,hb.selectors.postcodeLink,function(a){K(a,hb.classes.enterPostcodeSectionSuffix)}),aa.on(hb.events.click,[hb.selectors.signupLink,hb.selectors.gobackLink].join(),function(b){a(hb.selectors.signupPassword).data(hb.data.validationInvalidPattern,hb.data.passwordPattern),J(b,hb.classes.signupSectionSuffix),D(this)}),aa.on(hb.events.click,[hb.selectors.activationLink,hb.selectors.confirmGobackLink].join(),function(a){J(a,hb.classes.activationSectionSuffix)}),fa.on(hb.events.keyPress,r),ga.on(hb.events.click,y),ha.on(hb.events.click,F),oa.on(hb.events.click,u),va.on(hb.events.change,s)}function r(c){var d,e;8===c.which||46===c.which?(d=a(c.target),e=d.val(),e.length||b.defer(function(){d.parent().removeClass(hb.classes.complete),Oa._removeError(c.target)})):13===c.which&&(c.preventDefault(),ua.is(":focus")?oa.trigger(hb.events.click):(cb=da.find(hb.selectors.submitVisibleButton),cb.trigger(hb.events.click)))}function s(b){var c=a(b.target).val();Ca[c]&&(a.each(Ca[c],t),K(null,hb.classes.enterManuallyAddressSectionSuffix)),eb&&ma.find("input[data-address-key=AddressLine1]").val(function(a,b){return b+" "+eb})}function t(a,b){var c=ma.find("input[data-address-key="+a+"]");"AddressLine2"===a&&(eb=b),c.val(b),c.closest(hb.selectors.formGroup).removeClass(hb.classes.error)}function u(b){b.preventDefault(),ua.valid()?(O(),pa.removeClass(hb.classes.errorGroup).empty(),za.addClass(hb.classes.active),Qa=a.ajax({url:Na+"/postcode/"+encodeURIComponent(ua.val())+"/data.json",dataType:"json"}).done(w).fail(x)):(ua.focus(),Z({errorMessage:da.validate().errorMap[ua.attr("name")]}))}function v(a){return a||null}function w(b){var c,d,e="<option>";if(za.removeClass(hb.classes.active),b.status_code===hb.statusCodes.lookupSuccess){for(wa.text(Da),Ca=b.addresses,va.closest(hb.selectors.formGroup).removeClass(hb.classes.error),va.empty(),va.append(a(e)),c=0;c<Ca.length;c++)d=a.map(Ca[c],v).join(", "),d=d.limitLineCharacters(50),va.append(a(e,{value:c}).html(d));K(null,hb.classes.selectAddressSectionSuffix),va.focus(),Z()}else pa.addClass(hb.classes.errorGroup),R(pa),pa.empty().append(b.status_message),Z({errorMessage:b.status_message})}function x(a){za.removeClass(hb.classes.active),pa.addClass(hb.classes.errorGroup),R(pa),pa.empty().append(Pa),Z({errorMessage:Pa})}function y(b){b.preventDefault(),da.valid()?(O(),za.addClass(hb.classes.active),Qa=a.ajax({type:"POST",url:Fa,data:da.serialize(),dataType:"json"}).done(A).fail(B)):(ba=da.find(hb.selectors.errorMessageVisible).first().closest(hb.selectors.formGroup).find("label"),R(ba))}function z(a){pa.addClass(hb.classes.errorGroup),Aa.hide(),la.addClass("section-"+hb.classes.loginSectionSuffix),R(pa),pa.empty().append(a)}function A(a){var b;switch(za.removeClass(hb.classes.active),a.status_code){case hb.statusCodes.loginSuccess:C(!0,Ga),Ba?hb.window.top.location.href=Ga:hb.window.location.href=Ga;break;case hb.statusCodes.accountPending:a.email&&(b="email="+a.email,Ha=I(Ha,b)),C(!1,Ha,a.status_message),Ba?hb.window.top.location.href=Ha:hb.window.location.href=Ha;break;default:z(a.status_message),ra.val(""),C(!1,Ga,a.status_message)}}function B(a){za.removeClass(hb.classes.active),z(Pa),ra.val(""),C(!1,Ga,Pa)}function C(a,b,c){var d={componentId:"C80.1_Login",destination:b,locationInPage:"login",buttonText:ga.text(),contentAction:"login",loginType:"standard",loginSuccess:a?"yes":"no"};a||(d.errorMessage=c),hb.analyticsManager.tag("buttonNoCookie",d)}function D(b){var c,d,e=a(b),f=e.parent(),g="toggle";f.hasClass(hb.classes.loginLink)?c="log-in":f.hasClass(hb.classes.signupLink)&&(c="sign-up"),d={componentId:"C80_Toggle_Form",toggleType:"segmentation",toggleValue:c},hb.analyticsManager.tag(g,d)}function E(){return!ua.length||(!!ma.hasClass(hb.classes.sectionPrefix+hb.classes.enterManuallyAddressSectionSuffix)||(pa.removeClass(hb.classes.errorGroup).empty(),o(ua,Ea),!1))}function F(b){b.preventDefault(),da.valid()&&E()?(O(),za.addClass(hb.classes.active),Qa=a.ajax({type:"POST",url:Fa,data:da.serialize(),dataType:"json"}).done(G).fail(H)):(ba=da.find(hb.selectors.errorMessageVisible).first().closest(hb.selectors.formGroup).find("label"),R(ba))}function G(a){var b;switch(za.removeClass(hb.classes.active),a.status_code){case hb.statusCodes.accountPending:a.email&&(b="email="+a.email,Ma=I(Ma,b)),N(),Ba?hb.window.top.location.href=Ma:hb.window.location.href=Ma;break;case hb.statusCodes.accountActivated:ia.trigger(hb.events.click),pa.addClass(hb.classes.errorGroup),R(pa),pa.empty().append(a.status_message);break;default:pa.addClass(hb.classes.errorGroup),R(pa),pa.empty().append(a.status_message),ra.val(""),sa.val("")}$(a.status_code===hb.statusCodes.accountPending?{signupSuccess:"yes",destination:Ma,errorMessage:""}:{signupSuccess:"no",errorMessage:a.status_message,destination:""})}function H(a){za.removeClass(hb.classes.active),pa.addClass(hb.classes.errorGroup),R(pa),pa.empty().append(Pa),ra.val(""),sa.val(""),$({signupSuccess:"no",errorMessage:Pa,destination:""})}function I(a,b){return/[?]/.test(a)?a+"&"+b:a+"?"+b}function J(a,b){a&&a.preventDefault(),O(),pa.empty(),Oa.reset(),P(),N(),ca.addClass(hb.classes.sectionPrefix+b),M(),L(),ta.val(b),qa.removeClass(hb.classes.complete),pa.removeClass(hb.classes.errorGroup),K(null,hb.classes.enterPostcodeSectionSuffix)}function K(a,b){a&&a.preventDefault(),Q(),ma.addClass(hb.classes.sectionPrefix+b),L()}function L(){var b,c;da.find(hb.selectors.formElements).each(function(){b=a(this),c=b.is(":visible"),b.prop("disabled",!c)})}function M(){var a;kb||b.defer(function(){a=fa.filter(":visible:first"),a.focus()})}function N(){da.trigger("reset"),ya.text(xa.data(hb.attributes.defaultText))}function O(){Qa&&Qa.abort&&Qa.abort()}function P(){hb.window.scrollTo(0,0),ca.removeClass(function(a,b){return(b.match(new RegExp("(^|\\s)"+hb.classes.sectionPrefix+"\\S+","g"))||[]).join(" ")})}function Q(){ma.removeClass(function(a,b){return(b.match(new RegExp("(^|\\s)"+hb.classes.sectionPrefix+"\\S+","g"))||[]).join(" ")})}function R(a){_.animate({scrollTop:a.offset().top-jb},"slow")}function S(a){if(ib[a])return ib[a]}function T(){var a,c=e.loadItem(f.c_081_3.statusKey);if(c&&c.status_message)e.deleteItem(f.c_081_3.statusKey),Aa.html(c.status_message);else if(ib&&ib[hb.urlParams.errorCode]&&(a=ib[hb.urlParams.errorCode].split(" ")[0]),b.isString(a))switch(a){case"0":Aa.text(Ja);break;case"403":Aa.text(Ia),la.addClass(hb.classes.sectionLogIn);break;case"403002":Aa.text(Ka),la.addClass(hb.classes.sectionLogIn);break;default:Aa.text(La),la.addClass(hb.classes.sectionLogIn)}else la.addClass(hb.classes.sectionLogIn)}function U(){if(Ra=S(hb.urlParams.sessionToken),Sa=S(hb.urlParams.id),!Ra||!Sa)return!1;za.addClass(hb.classes.active),ja.trigger(hb.events.click),a.ajax({url:Ta,type:"GET",dataType:"json",data:{sessionToken:Ra,id:Sa}}).done(V).fail(function(){return za.removeClass(hb.classes.active),!1})}function V(a){Ua.trigger(hb.events.click),xa.val(a.result.title).trigger("change"),Va.val(a.result.firstName),Wa.val(a.result.lastName),Za.val(a.result.email),_a.val(a.result.addressLine1),$a.val(a.result.city),ua.val(a.result.postalCode),ab.val(a.result.vin),a.result.secondLastName&&Xa.val(a.result.secondLastName),a.result.nationalId&&Ya.val(a.result.nationalId),za.removeClass(hb.classes.active)}function W(){bb.length&&(jb=bb.height())}function X(){"0"===S(hb.urlParams.errorCode)&&a.ajax({url:db,async:!1,data:{redirect:!1},statusCode:{200:Y}})}function Y(){var c=a.cookie(hb.cookie.ownerServicesLoggedInCookie);(b.isUndefined(c)||b.isNull(c))&&ea.removeClass(hb.classes.isLoggedInClass).find(hb.selectors.loggedInStateNameSelector).text("")}function Z(a){var b;a=a||{},b={componentId:hb.analytics.componentId,errorMessage:a.errorMessage||""},hb.analyticsManager.tag("postcodeLookup",b)}function $(b){var c={componentId:hb.analytics.componentId,locationInPage:hb.analytics.locationInPage,signupType:hb.analytics.signupType,buttonText:ha.text(),contentAction:hb.analytics.contentAction};hb.analyticsManager.tag("buttonNoCookie",a.extend({},c,b))}var _,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb="c_080",gb={selectors:{formElements:"input:not([type=hidden]),select",formGroup:".form-group",component:".c_080",signupSection:".sign-up-link",signupLink:".sign-up-link a",loginLink:".log-in-link a",activationLink:".have-activation-code",lookupPostcodeLink:".lookup-postcode-link",manualAddressLink:".manual-address-link",postcodeLink:".postcode-link",searchPostcodeButton:".search-postcode",loginSubmitButton:".log-in-cta",signUpSubmitButton:".sign-up-cta",gobackLink:".select-section-activation .go-back-link",confirmGobackLink:".select-section-confirm-activation .go-back-link",activationNext:".activation-next-cta",mainError:".main-error",title:".title",pageId:".page",password:".password",confirmPassword:".confirm-password",postcode:".postcode",address:".address",selectedValue:".selectedValue",postcodeSection:".postcode-section",ajaxLoading:".ajax-loading",errorMessage:".error-message",errorMessageVisible:".error-message:visible",firstName:".first-name",lastName:".last-name",secondLastName:".second-last-name",nationalId:".national-id",email:".email",city:".town-city",addressLine1:".address-line-1",vin:".vin",statusMessage:".activated-message",submitVisibleButton:'button[type="submit"]:visible',tandcLink:".agree-to-tandc-group a",loggedInStateSelector:".login",loggedInStateNameSelector:".logged-in-state.see-profile span",signupPassword:"#signup-password"},classes:{sectionPrefix:"select-section-",signupSectionSuffix:"sign-up",loginSectionSuffix:"log-in",loginLink:"log-in-link",signupLink:"sign-up-link",sectionLogIn:"section-log-in",activationSectionSuffix:"activation",activationConfirmationSectionSuffix:"confirm-activation",enterPostcodeSectionSuffix:"enter-postcode",selectAddressSectionSuffix:"select-address",enterManuallyAddressSectionSuffix:"manually-address",complete:"complete",ajaxBtnLoading:"ajax-btn-loading",errorGroup:"error-group",active:"active",error:"error",dockNavigationWrapperClass:".docked-nav-outer",isLoggedInClass:"logged-in"},events:{click:"click."+fb,keyPress:"keypress."+fb,change:"change."+fb},attributes:{apiUrl:"url",successUrl:"success-url",accountPendingUrl:"account-pending-url",loggedOut:"logged-out",activationSuccess:"activation-success",activationExpired:"activation-expired",activationError:"activation-error",defaultText:"defaulttext",checked:"checked",noResponse:"no-response",searchPostcodeUrl:"search-postcode-url",templateErrorMessage:'<span class="error-message">MessageValue</span>',keyReplaceMessage:"MessageValue",emptyAddress:"empty-address",customerInfoUrl:"customer-info-url",logoutUrl:"logout-url"},statusCodes:{loginSuccess:"login_success",accountPending:"account_pending",accountActivated:"account_activated",lookupSuccess:"lookup_success"},urlParams:{statusMessage:"status_message",sessionToken:"sessionToken",id:"id",errorCode:"errorCode"},cookie:{ownerServicesLoggedInCookie:"OwnerServicesLoggedInName"},analytics:{componentId:"C80.2_Sign_Up",locationInPage:"sign up",contentAction:"sign-up",signupType:"standard"},data:{passwordPattern:"password",validationInvalidPattern:"validationInvalidPattern",validationCustomRegexPattern:"data-validation-customregex-pattern",gigyaValidationCustomRegexPattern:"data-gigya-is-active"},config:{readyInterval:500,maxAttempts:6},state:"login"},hb=null,ib={},jb=0,kb=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);return{init:g}}),define("c_010",["jquery","jqueryCookie","storageManager","storeDealer","modal","scriptLoader","logger","c_080","underscore","goTo"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(){return!window.matchMedia||window.matchMedia("(min-width: 60em)").matches}function l(b){b.preventDefault();var c=a(ua.logoContainerSelector),d=c.parent();!1===va&&(ra.addClass(ua.isActivatedClass),ra.css({height:ra.scrollHeight,"overflow-y":"scroll"})),va=!va,d.on(ua.transitionEndEvent,m),setTimeout(function(){d.toggleClass(ua.isOpenClass,!0===va)},1)}function m(b){b.stopImmediatePropagation();var c,d=a(b.target),e=d.parent();return va?(c=k(),d.focus(),c||window.scrollTo(0,0)):(ra.removeClass(ua.isActivatedClass),ra.removeAttr("style")),e.off(ua.transitionEndEvent,m),!1}function n(b){var c=a(b.target),d=c.closest("."+ua.classes.triggerMenu),e=a("."+ua.classes.triggerMenu).parent();c.hasClass(ua.classes.triggerMenu)||d.length>0||!e.hasClass(ua.isSubOpenedClass)||e.removeClass(ua.isSubOpenedClass)}function o(b){var c=a(b.currentTarget).parent().hasClass(ua.isSubOpenedClass);a(b.currentTarget).parent().toggleClass(ua.isSubOpenedClass,!1===c).toggleClass(ua.isSubClosedClass,c)}function p(b){a(ua.selectors.dropdown).hasClass(ua.classes.expanded)&&(s(!0),n(b),ra.hasClass(ua.isActivatedClass)||(va=!1)),fa.hasClass(ua.classes.expanded)&&fa.trigger("click")}function q(b){var c=a(b.target).closest(ua.selectors.dropdown),d=c.parent(),e=c.hasClass(ua.isSubOpenedClass),f=c.parent().hasClass(ua.classes.login),g=c.next(),h=k(),i=!(e&&h);a(ua.globalNavSelector).find("li."+ua.dropdownClass+"."+ua.isSubOpenedClass).removeClass(ua.isSubOpenedClass),!f&&g.length&&(b.preventDefault(),s(!1),h||ra.toggleClass(ua.isActivatedClass,i),setTimeout(function(){c.toggleClass(ua.isSubOpenedClass,!1===e).toggleClass(ua.isSubClosedClass,e),!0===sa&&d.addClass("redraw").removeClass("redraw")},10),d.on(ua.transitionEndEvent,r))}function r(b){b.stopImmediatePropagation();var c,d=a(b.target),e=d.parent();return!0===d.prev().hasClass(ua.isSubOpenedClass)&&(d.addClass(ua.isSubOpenCompleteClass),c=d.offset(),c.left<0&&d.css("right",parseFloat(d.css("right"))+c.left)),e.off(ua.transitionEndEvent,r),!1}function s(b){var c=a(ua.subNavItemContainerSelector),d=c.find("li"),e=d.find("a."+ua.dropdownClass+"."+ua.isSubOpenedClass),f=d.find("button."+ua.dropdownClass+"."+ua.isSubOpenedClass),g=d.find("."+ua.expandContainerClass+"."+ua.isSubOpenCompleteClass);e.removeClass(ua.isSubOpenedClass),f.removeClass(ua.isSubOpenedClass),g.removeClass(ua.isSubOpenCompleteClass),b||ra.removeClass(ua.isActivatedClass)}function t(a){var b=k();!sa&&b&&(clearTimeout(xa),xa=setTimeout(u(b),10))}function u(b){var c=a(ua.navItemContainerSelector),d=R.find(ua.selectors.clearSearch),e=a(ua.logoContainerSelector).parent();va=!1,e.removeClass(ua.isOpenClass),v(c,b),s(!1),J(d)}function v(a,b){var c=0;!b&&ta&&(c="auto"),a.css("min-height",c)}function w(b){ua=a.extend({},qa,b);var g,h=a(ua.navItemContainerSelector),i=a("html");if(R=a(ua.rootSelector),!R.length)return!1;M(),ca=new d({HELIOS:ua.HELIOS}),ca.init(),T=a(ua.wrapperSelector),U=a(ua.messageCentre),S=a(ua.loggedInStateSelector),fa=R.find(ua.selectors.customSelectbox),X=R.find(ua.selectors.searchForm),$=R.find(ua.selectors.clearSearch),Y=R.find(ua.selectors.searchBarContainer),Z=R.find(ua.selectors.searchListItem),_=R.find("a["+ua.attributes.dealerId+"]"),aa=R.find(ua.selectors.messageCentreLink),ia=R.find(ua.selectors.unread),h.length&&((i.hasClass("ie9")||i.hasClass("ltie9"))&&(ta=!1),F(),a(ua.logoContainerSelector).find(ua.openSelector).on("click",l),a(ua.navItemContainerSelector).find(ua.closeSelector).on("click",l),a(ua.maskSelector).on("click",l),c.init(),T.on("nameChange",E),h.attr("tabindex","-1"),a(ua.subNavItemContainerSelector).on("click.toggleSubNav",ua.subNavItemSelector,q),a(ua.subNavSelector).on("click",ua.subNavItemSelector,q),a("li."+ua.dropdownClass).find("button.menu-trigger").on("click",o),a(document).on("click",p),a(ua.maskSelector).on("click.maskDesktop",function(){
var b=ua.navItemContainerSelector+" .nav-primary "+ua.subNavItemSelector+"."+ua.isSubOpenedClass;a(b).trigger("click.toggleSubNav")}),g=k(),v(h,g),a(window).resize(t),a(window).on("orientationchange",u),sa=i.hasClass("ltie9")),V=R.find(ua.selectors.logInCTA),W=R.find(ua.selectors.logOutCTA),ja=W.data(ua.data.gigyaApiKey),ka=W.data(ua.data.gigyaGlobalConfig),ma=W.data(ua.data.gigyaLoadErrorMsg),pa=W.data(ua.data.redirectUrl),na=R.find(ua.selectors.languageSelector),oa=R.find(ua.selectors.languageSelected),ya={apiKey:null,scriptText:null,HELIOS:b.HELIOS},ja&&ka&&(ya.apiKey=ja,ya.scriptText=ka,la=f.include("gigya",ya)),ba=new e({iframe:!0,customClass:ua.classes.modalContainer}),O(),L(),C(),x()}function x(){V.on("click",function(){ea=a(this).data("state"),G(this,ea)}),W.on(ua.events.click,z),R.find(ua.selectors.globalNavTrackedElements).find("a, button").on("click",function(){K(this)}),fa.on("click",function(b){b.stopPropagation(),s(!1),D(a(this))}),_.on("click",B),aa.on("click",y),a(ua.rootSelector).on("unreadMessages",function(){L()}),R.find(".nav-global-batd, .nav-global-small-batd").find("a").on("click",function(){c.deleteItem("lastVisitedVehicle")}),R.find(ua.selectors.languageSelector+" li").length<3?na.addClass(ua.classes.languages):na.addClass(ua.classes.dropdown),na.on(ua.events.click,P),oa.on(ua.events.click,Q)}function y(a){c.saveItem("msgCentre",{msgState:"open"},{mode:"localStorage"})}function z(a){ja&&ka&&ua.window.gigya?ua.window.gigya.accounts.logout({callback:A}):ua.window.location=pa}function A(a){var b=function(a){var b=document.createElement("a");return b.href=a,b.href};0===a.errorCode?ua.window.location=b(pa):za.warn(a.errorMessage)}function B(b){var c=b.currentTarget,d=c.href,e=a(c).attr(ua.attributes.dealerId),f=a(c).attr(ua.attributes.target);e.length&&d.length&&(b.preventDefault(),ca.save(e),i.isString(d)&&d.length&&j.run(f,d))}function C(){Z.on("click",H),a.each(X,function(b,c){a(c).find("input").on("keyup",function(){I(a(c))})}),a.each($,function(b,c){a(c).on("click",function(){J($)})})}function D(a){a.toggleClass(ua.isSubOpenedClass)}function E(a,b){F()}function F(){var b=a.cookie(ua.ownerServicesLoggedInCookie);b&&(S.find(ua.loggedInStateNameSelector).text(b),S.addClass(ua.isLoggedInClass))}function G(b,c){da=a(b).data("target"),s(!1),ba.open(da+"#"+c)}function H(a){Z.parent().toggleClass(ua.classes.active),Y.toggleClass(ua.classes.expanded),Y.hasClass(ua.classes.expanded)&&X.find("input").focus()}function I(b){var c=a(b),d=c.find("input").val();if(d.length&&!c.hasClass(ua.classes.active))return void X.addClass(ua.classes.active);d.length||c.removeClass(ua.classes.active)}function J(b){a.each(b,function(b,c){var d=a(c).siblings("input"),e=a(c).closest(ua.selectors.searchForm);d.is(":visible")&&d.val("").focus(),I(e)})}function K(b){var c=a(b),d=c.parent();if(!c.hasClass(ua.classes.dropdown)&&!d.hasClass(ua.classes.dropdown)&&!d.hasClass(ua.classes.search)){var e=c.attr("href")||"",f="nav global",g=c.parents().hasClass("logo")?"logo":c.text(),h={componentId:wa,destination:e,locationInPage:f,buttonText:g};c.parent().hasClass(ua.isLoggedInClass)&&(h.buttonText="owner services"),ua.analyticsManager.tag("navigationClick",h)}}function L(){if(!ia)return!1;ga=c.loadItem("c_110"),ha=ga?ga.totalUnread:"",ha&&ia.html(ha),ha<1?ia.addClass("hidden"):ia.removeClass("hidden")}function M(){var a=new Date;R.find(ua.selectors.printInfoCreatedDate).text(a.toLocaleDateString(ua.HELIOS.config.common.locale)),R.find(ua.selectors.printInfoUrl).text(location.href)}function N(a){0===a.errorCode&&a.data&&a.data.accountSfdcId&&(ua.analyticsManager.addCustomerId(a.data.accountSfdcId),ua.HELIOS.adobe.tagging.loginStatus="logged in")}function O(){var a=ua.window.onGigyaServiceReady;ua.window.onGigyaServiceReady=function(b){i.isFunction(a)&&a.apply(this,arguments),ua.window.gigya.accounts.getAccountInfo({callback:N})}}function P(b){var c=a(b.currentTarget);c.find("ul").is(":hidden")?c.addClass(ua.classes.active):c.removeClass(ua.classes.active)}function Q(b){var c,d,e=a(b.currentTarget),f=e.attr("href");b.preventDefault(),d=f.replace(/.*?:\/\//g,"").split("/")[0],c="//"+d+ua.window.location.pathname,a.ajax({url:c,type:"HEAD",success:function(){ua.window.location.assign(c)},error:function(){ua.window.location.assign(f)}})}var R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa={rootSelector:".c_010",wrapperSelector:".c_127",messageCentre:".c_109",logoContainerSelector:".title-logo-container",navItemContainerSelector:".nav-container",globalNavSelector:".nav-global",subNavSelector:".sub-nav",subNavItemContainerSelector:".nav-primary, .nav-global-small",subNavItemSelector:" > li > a, > li > button",maskSelector:".nav-mask",openSelector:".show-menu",closeSelector:".close-menu",loggedInStateSelector:".login",loggedInStateNameSelector:".logged-in-state.see-profile span",isLoggedInClass:"logged-in",isActivatedClass:"nav-is-activated",isOpenClass:"nav-is-open",dropdownClass:"dropdown",expandContainerClass:"expand-container",isSubOpenedClass:"expanded",isSubOpenCompleteClass:"is-expanded",isSubClosedClass:"closed",transitionEndEvent:"webkitTransitionEnd mozTransitionEnd MSTransitionEnd otransitionend transitionend",ownerServicesLoggedInCookie:"OwnerServicesLoggedInName",storageMode:"cookie",AnalyticsStateIn:"in",AnalyticsStateOut:"out",events:{changeTab:"click.c_080",click:"click"},attributes:{dealerId:"data-dealer-id",target:"target"},selectors:{loginLink:".c_080 .log-in-link a",signupLink:".c_080 .sign-up-link a",signupLoginComponent:".c_080",searchListItem:"li.search button",searchForm:".search-js",searchBarContainer:".search-bar-container",clearSearch:".clear-search",logInCTA:".login button.login-button",logOutCTA:".logout",iframe:".signup-login iframe",dropdown:".dropdown",customSelectbox:".custom-selectbox",globalNavTrackedElements:".nav-global-small, .nav-global, .nav-primary, .logo",messageCentreLink:".logged-in-state.see-message-centre",unread:".message-count",printInfoCreatedDate:".print-info-date span",printInfoUrl:".print-info-url",languageSelector:"li.language-selector",languageSelected:".language-selector a"},classes:{modalContainer:"signup-login",logout:"logout",login:"login",expanded:"expanded",active:"active",dropdown:"dropdown",search:"search",languages:"basic-languages",triggerMenu:"menu-trigger"},config:{maxAttempts:10,readyInterval:500},data:{gigyaApiKey:"gigyaApiKey",gigyaGlobalConfig:"gigyaGlobalConfig",gigyaLoadErrorMsg:"gigyaLoadErrorMsg",redirectUrl:"redirectUrl"}},ra=a("html, body"),sa=!1,ta=!0,ua=null,va=!1,wa="C10_Global_Navigation",xa=-1,ya={},za=new g({prefix:"C10"});return{init:w}}),define("c_010B_meganav",["jquery","heliosObject"],function(a,b){"use strict";var c,d,e={events:{clickTouch:"touchstart click",mouseOver:"mouseover click focus",mouseDown:"mousedown touchstart",clearDropdowns:"c_10B_clearDropdowns",closeMeganav:"'c_10B_closeMeganav'",click:"click",scroll:"scroll",focusOut:"focusout",keyUp:"keyup",tabPressed:!1},classes:{hidden:"hidden",visible:"is-visible",fixed:"meganav-fixed",navInner:"nav-inner",active:"active",isExpanded:"is-expanded",expanded:"expanded"},selectors:{html:"html",body:"body",root:".c_010B",navItem:".sub-nav-item",expandContainer:".expand-container",dropdown:".dropdown",megaNav:{container:".vehicles-container",ctaFlyoutContainer:".cta-flyout-container",panel:{screen:".sliding-panel-fade-screen",close:".sliding-panel-close",content:".sliding-panel-content",scroll:".panel-scroll"},trigger:".vehicles-trigger",ctaFlyoutTrigger:".cta-flyout-trigger",noTrigger:".no-trigger",item:".vehicle-block",seeAll:".vehicles-see-all",allItems:".vehicles-container, .vehicle-block, .vehicles-see-all"},navInner:".nav-inner",closeMenu:".close-menu",cookieBanner:".c_128"},data:{mega:"mega",megaNav:"meganav"},attributes:{direction:"dir"},operator:1,animationDelay:300,tabKeyCode:9},f=a(e.selectors.html),g=a(e.selectors.body),h=a(e.selectors.root),i=window.matchMedia(b.config.common.mediaQuery.is.small),j=window.matchMedia(b.config.common.mediaQuery.is.medium),k=window.matchMedia(b.config.common.mediaQuery.is.large),l=!1;return c=function(){var b=this;b.renderGrid(),this.tabPressed=e.events.tabPressed,this.tabDirection=e.operator,this.isSingleItem=l,a(document).on(e.events.clearDropdowns,b.clear.bind(this))},c.prototype.toggleMobilePanel=function(b){a(e.selectors.megaNav.panel.content+","+e.selectors.megaNav.panel.screen).toggleClass(e.classes.visible),g.toggleClass(e.classes.fixed),b.preventDefault()},c.prototype.checkForBreakpoint=function(){d=a(e.selectors.megaNav.panel.close+","+e.selectors.megaNav.panel.screen+","+e.selectors.megaNav.trigger),(i.matches||j.matches)&&d.unbind().on(e.events.click,this.toggleMobilePanel)},c.prototype.isTextLeftToRight=function(){var a=!0;return"ltr"!==f.attr(e.attributes.direction)&&(a=!1),a},c.prototype.setDisplayDirection=function(a,b,c,d){var e;this.isTextLeftToRight()?(e=b.right-this.getLayoutBleed(),this.setContainerPosition(a,"left",e,d)):(e=b.left-a.outerWidth(),this.setContainerPosition(a,"left",e,d))},c.prototype.getLayoutBleed=function(){return(f.outerWidth()-h.outerWidth())/2},c.prototype.setContainerHeight=function(b){var c=e.selectors.megaNav.item,d=a(b).find(c),f=parseInt(d.last().outerHeight(),10),g=a(b).find(e.selectors.megaNav.seeAll),j=d.length*f+h.find(e.selectors.megaNav.panel.scroll).offset().top;return g.length>0&&(j+=parseInt(g.outerHeight(),10)),i.matches?j:null},c.prototype.setContainerPosition=function(b,c,d,e){var f=this;a(b).css({left:d,top:e,height:f.setContainerHeight(b)})},c.prototype.bindEvents=function(){h.off(e.events.mouseOver,e.selectors.megaNav.trigger).on(e.events.mouseOver,e.selectors.megaNav.trigger,this.displayOnlyIfExpanded.bind(this)),h.off(e.events.mouseOver,e.selectors.megaNav.ctaFlyoutTrigger).on(e.events.mouseOver,e.selectors.megaNav.ctaFlyoutTrigger,this.displayOnlyIfExpanded.bind(this)),h.off(e.events.mouseOver,e.selectors.megaNav.noTrigger).on(e.events.mouseOver,e.selectors.megaNav.noTrigger,this.hideIfNoMaganav.bind(this)),h.off(e.events.clickTouch,e.selectors.megaNav.trigger).on(e.events.clickTouch,e.selectors.megaNav.trigger,this.displayFlyout.bind(this)),h.off(e.events.mouseDown,e.selectors.megaNav.item).on(e.events.mouseDown,e.selectors.megaNav.item,this.focusContainer.bind(this)),h.off(e.events.mouseDown,e.selectors.megaNav.seeAll).on(e.events.mouseDown,e.selectors.megaNav.seeAll,this.focusContainer.bind(this)),h.off(e.events.clickTouch,e.selectors.megaNav.ctaFlyoutTrigger).on(e.events.clickTouch,e.selectors.megaNav.ctaFlyoutTrigger,this.displayFlyout.bind(this)),h.off(e.events.clickTouch,e.selectors.closeMenu).on(e.events.clickTouch,e.selectors.closeMenu,this.closeMobilePanel.bind(this)),h.off(e.events.focusOut,e.selectors.megaNav.item).on(e.events.focusOut,e.selectors.megaNav.item,this.focusNextTab.bind(this)),a(window).off(e.events.keyUp).on(e.events.keyUp,this.getTabbingDirection.bind(this)),a(window).on(e.events.scroll,this.hideOnScrollOut.bind(this))},c.prototype.focusContainer=function(b){var c=a(b.target),d=c.closest(e.selectors.megaNav.container).find(e.selectors.megaNav.item).last().index(),f=c.index();(d===f&&1===this.tabDirection||0===f&&-1===this.tabDirection)&&(l=!0)},c.prototype.focusNextTab=function(b){var c=e.selectors.navItem,d=a(b.target),f=d.parent().data(e.data.megaNav),g=d.parent().find(e.selectors.megaNav.item).last().index(),h=d.index(),i=a('[data-mega="'+f+'"]').parent().index(),j=i+this.tabDirection,k=g===h&&1===this.tabDirection,l=0===h&&-1===this.tabDirection;this.tabPressed&&(!k&&!l||this.isSingleItem||a(c).eq(j).find("a").focus(),this.isSingleItem=!1,this.tabPressed=!1)},c.prototype.getTabbingDirection=function(a){(a.keyCode?a.keyCode:a.which)===e.tabKeyCode&&(a.shiftKey?this.tabDirection=-1:this.tabDirection=1,this.tabPressed=!0)},c.prototype.displayFlyout=function(c){var d,f=h.find(e.selectors.megaNav.container),g=h.find(e.selectors.megaNav.ctaFlyoutContainer),i=a(c.target),j=i.data(e.data.mega),l=c.target.getBoundingClientRect(),m=document.getElementsByClassName(e.classes.navInner),n=m[0].getBoundingClientRect(),o=a(a('[data-meganav="'+j+'"]').length>0?'[data-meganav="'+j+'"]':'[data-cta-flyout="'+j+'"]'),p=Math.round(h.height())+6,q=b;k.matches&&"click"===c.type&&(c.preventDefault(),c.stopImmediatePropagation()),d=this.hasCookieBanner&&q&&q.config&&"t201"!==q.config.siteTemplate?this.removeCookieBannerHeight(this.getCookieBannerHeight(),p):p,i.blur(),a(e.selectors.megaNav.trigger).removeClass(e.classes.active),a(e.selectors.megaNav.ctaFlyoutTrigger).removeClass(e.classes.active),i.addClass(e.classes.active),i.data(e.data.mega)&&(f.addClass(e.classes.hidden),g.addClass(e.classes.hidden),o.toggleClass(e.classes.hidden),k.matches&&a(e.selectors.megaNav.panel.screen).addClass(e.classes.visible).fadeIn(300),this.setDisplayDirection(o,l,n,d),o.find(e.selectors.megaNav.item).eq(0).focus())},c.prototype.displayOnlyIfExpanded=function(b){a(e.selectors.expandContainer).hasClass(e.classes.isExpanded)&&this.displayFlyout(b)},c.prototype.removeCookieBannerHeight=function(a,b){return this.isInt(a)&&this.isInt(b)?b-a:b},c.prototype.hasCookieBanner=function(){if(!a(e.selectors.cookieBanner).length)return!1},c.prototype.getCookieBannerHeight=function(){var b=e.selectors.cookieBanner;return this.hasCookieBanner?a(b).height():0},c.prototype.isInt=function(a){if(isNaN(a))return!1;var b=parseFloat(a);return(0|b)===b},c.prototype.hideOnScrollOut=function(){var b,c=h.find(e.selectors.megaNav.container+":not(."+e.classes.hidden+")");c.length&&(b=c.offset().top+50),b&&a(window).scrollTop()>b+c.height()&&(a(e.selectors.expandContainer).removeClass(e.classes.isExpanded),a(e.selectors.dropdown).removeClass(e.classes.expanded),h.find(e.selectors.megaNav.container).addClass(e.classes.hidden),a(e.selectors.megaNav.trigger).removeClass(e.classes.active),a(e.selectors.megaNav.ctaFlyoutTrigger).removeClass(e.classes.active),this.clearFadeScreen())},c.prototype.hide=function(){h.find(e.selectors.megaNav.container).addClass(e.classes.hidden),h.find(e.selectors.megaNav.ctaFlyoutContainer).addClass(e.classes.hidden)},c.prototype.hasMaganav=function(){var b=a(e.selectors.megaNav.trigger),c=a(e.selectors.megaNav.ctaFlyoutTrigger);if(b.length!==b.parent().siblings().length||c.length!==c.parent().siblings().length)return!1},c.prototype.hideIfNoMaganav=function(){this.hasMaganav()||(a(e.selectors.megaNav.trigger).removeClass(e.classes.active),a(e.selectors.megaNav.ctaFlyoutTrigger).removeClass(e.classes.active),this.hide(),this.clearFadeScreen())},c.prototype.clearFadeScreen=function(){a(e.selectors.megaNav.panel.screen).fadeOut(300),setTimeout(function(){a(e.selectors.megaNav.panel.screen).removeClass(e.classes.visible)},300)},c.prototype.renderGrid=function(){this.checkForBreakpoint(),this.bindEvents()},c.prototype.clear=function(){var a=h.find(e.selectors.megaNav.container),b=h.find(e.selectors.megaNav.ctaFlyoutContainer);a.addClass(e.classes.hidden),b.addClass(e.classes.hidden),h.find(e.selectors.megaNav.trigger).removeClass(e.classes.active),h.find(e.selectors.megaNav.ctaFlyoutTrigger).removeClass(e.classes.active),h.find(e.selectors.megaNav.panel.screen).fadeOut(e.animationDelay,this.closeMobilePanel.bind(this))},c.prototype.closeMobilePanel=function(){a(e.selectors.megaNav.panel.content+","+e.selectors.megaNav.panel.screen).removeClass(e.classes.visible),g.removeClass(e.classes.fixed)},c}),define("c_010B",["jquery","jqueryCookie","storageManager","storeDealer","modal","scriptLoader","logger","c_080","underscore","goTo","c_010B_meganav","trackingCodes"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(){return!window.matchMedia||window.matchMedia("(min-width: 60em)").matches}function n(b){var c=m(),d=a(ya.logoContainerSelector),e=d.parent();b.preventDefault(),!1!==za||c?!0!==za||c||va.removeClass(ya.isNavigationActivatedClass):(va.addClass(ya.isNavigationActivatedClass),va.css({height:va.scrollHeight,"overflow-y":"scroll"})),za=!za,e.on(ya.transitionEndEvent,o),setTimeout(function(){e.toggleClass(ya.isOpenClass,!0===za)},1),za&&a(document).trigger(ua.events.clearDropdowns)}function o(b){b.stopImmediatePropagation();var c,d=a(b.target),e=d.parent();return za?(c=m(),d.focus(),c||window.scrollTo(0,0)):va.removeAttr("style"),e.off(ya.transitionEndEvent,o),!1}function p(b){a(ya.selectors.dropdown).hasClass(ya.classes.expanded)&&!a(b.target).hasClass("vehicles-trigger")&&s(),ja.hasClass(ya.classes.expanded)&&ja.trigger("click")}function q(b){var c=a(b.target),d=c.closest(ya.selectors.dropdown),e=d.parent(),f=d.hasClass(ya.isSubOpenedClass),g=d.hasClass(ya.classes.active),h=d.parent().hasClass(ya.classes.login),i=c.hasClass("sublinks")?c.next():d.next(),j=m();!h&&i.length&&(b.preventDefault(),s(),setTimeout(function(){d.toggleClass(ya.isSubOpenedClass,!1===f).toggleClass(ya.isSubClosedClass,f),d.toggleClass(ya.classes.active,!1===g).toggleClass(ya.classes.active,g),!0!==j||g&&f||a(document).one(ya.events.click,p),!0===wa&&e.addClass(ya.classes.redraw).removeClass(ya.classes.redraw)},10),e.on(ya.transitionEndEvent,r))}function r(b){b.stopImmediatePropagation();var c=a(b.target),d=c.parent(),e=V.width(),f=c.offset(),g=c.width();return!0===c.prev().hasClass(ya.isSubOpenedClass)&&(c.addClass(ya.isSubOpenCompleteClass),f.left<0?c.css("right",parseFloat(c.css("right"))+f.left):f.left+g>e&&c.css("right",parseFloat(c.css("right"))+f.left+g-e)),d.off(ya.transitionEndEvent,r),!1}function s(){var b=a(ya.subNavItemContainerSelector),c=b.find("li"),d=c.find("a."+ya.classes.dropdown+"."+ya.isSubOpenedClass),e=c.find("button."+ya.classes.dropdown+"."+ya.isSubOpenedClass),f=c.find("."+ya.expandContainerClass+"."+ya.isSubOpenCompleteClass);c.removeClass(ya.classes.expanded),a(document).trigger(ua.events.clearDropdowns),d.removeClass(ya.isSubOpenedClass),e.removeClass(ya.isSubOpenedClass),f.removeClass(ya.isSubOpenCompleteClass)}function t(a){var b=m();b&&U(),!wa&&b&&(clearTimeout(Ba),Ba=setTimeout(u,10))}function u(){var b=m(),c=a(ya.navItemContainerSelector),d=a(ya.logoContainerSelector).parent();za=!1,d.removeClass(ya.isOpenClass),va.removeClass(ya.isNavigationActivatedClass),v(c,b),s()}function v(b,c){var d=0;!c&&xa&&(d=a(window).height()),b.css("min-height",d)}function w(a,b){a.addClass(ya.classes.picturefillHandler),ya.window.picturefill(b)}function x(b){ya=a.extend({},ua,b);var g,h,i=a(ya.navItemContainerSelector),j=a("html"),l=a(ya.rootSelector).find(ya.selectors.slidingPanel)[0],o=a(ya.rootSelector).find(ya.selectors.vehicleImage);if(V=a(ya.rootSelector),!V.length)return!1;P(),ga=new d({HELIOS:ya.HELIOS}),ga.init(),X=a(ya.wrapperSelector),Y=a(ya.messageCentre),W=a(ya.loggedInStateSelector),ja=V.find(ya.selectors.customSelectbox),_=V.find(ya.selectors.searchForm),ca=V.find(ya.selectors.clearSearch),aa=V.find(ya.selectors.searchBarContainer),ba=V.find(ya.selectors.searchListItem),da=V.find("a["+ya.attributes.dealerId+"]"),ea=V.find(ya.selectors.messageCentreLink),ma=V.find(ya.selectors.unread),i.length&&((j.hasClass("ie9")||j.hasClass("ltie9"))&&(xa=!1),L(),a(ya.logoContainerSelector).find(ya.openSelector).on(ya.events.click,n),a(ya.navItemContainerSelector).find(ya.closeSelector).on(ya.events.click,n),a(ya.maskSelector).on(ya.events.click,n),c.init(),X.on("nameChange",K),i.attr("tabindex","-1"),a(ya.selectors.globalNavTrackedElements).on(ya.events.click,"a, button",z),a(document).on(ya.events.closeMeganav,s),a(ya.maskSelector).on("click.maskDesktop",function(){var b=m(),c=ya.navItemContainerSelector+" .nav-primary "+ya.subNavItemSelector+"."+ya.isSubOpenedClass;b&&a(c).trigger("click.toggleNavLinkButton")}),g=m(),v(i,g),g&&U(),a(window).resize(t),a(window).on("orientationchange",u),wa=j.hasClass("ltie9")),Z=V.find(ya.selectors.logInCTA),$=V.find(ya.selectors.logOutCTA),na=$.data(ya.data.gigyaApiKey),oa=$.data(ya.data.gigyaGlobalConfig),qa=$.data(ya.data.gigyaLoadErrorMsg),ta=$.data(ya.data.redirectUrl),ra=V.find(ya.selectors.languageSelector),sa=V.find(ya.selectors.languageSelected),Ca={apiKey:null,scriptText:null,HELIOS:b.HELIOS},na&&oa&&(Ca.apiKey=na,Ca.scriptText=oa,pa=f.include("gigya",Ca)),fa=new e({iframe:!0,customClass:ya.classes.modalContainer}),R(),O(),w(o,l),y(),E(),h=new k,h.renderGrid()}function y(){Z.on(ya.events.click,function(){ia=a(this).data("state"),M(this,ia)}),$.on(ya.events.click,C),ja.on(ya.events.click,function(b){b.stopPropagation(),s(),J(a(this))}),da.on(ya.events.click,I),ea.on(ya.events.click,B),a(ya.rootSelector).on("unreadMessages",function(){O()}),A(),V.find(ya.selectors.batdLinks).find("a").on(ya.events.click,function(){c.deleteItem("lastVisitedVehicle")}),V.find(ya.selectors.languageSelector+" li").length<3?ra.addClass(ya.classes.languages):ra.addClass(ya.classes.dropdown),ra.on(ya.events.click,S),sa.on(ya.events.click,T)}function z(b){var c=a(b.currentTarget),d=c.parent(),e=d.parent();(c.hasClass(ya.classes.dropdown)||d.hasClass(ya.classes.dropdown)||e.hasClass(ya.classes.dropdown))&&q(b)}function A(){var b=["primary","secondary"];a.each(b,function(a,b){var c=b+"NavTrackedElements",d=ya.selectors[c];V.find(d).find("a, button").on(ya.events.click,function(){N(this,b)})}),V.find(ya.selectors.logo).find("a, button").on(ya.events.click,function(){N(this,"global")})}function B(a){c.saveItem("msgCentre",{msgState:"open"},{mode:"localStorage"})}function C(a){na&&oa&&ya.window.gigya?ya.window.gigya.accounts.logout({callback:D}):ya.window.location=ta}function D(a){var b=function(a){var b=document.createElement("a");return b.href=a,b.href};0===a.errorCode?ya.window.location=b(ta):Da.warn(a.errorMessage)}function E(){ba.on("click",F),a.each(_,function(b,c){a(c).find("input").on("keyup",function(){H(a(c))})}),a.each(ca,function(b,c){a(c).on("click",function(){G(ca)})})}function F(a){ba.parent().toggleClass(ya.classes.active),_.toggleClass(ya.classes.expanded),_.hasClass(ya.classes.expanded)&&_.find("input").focus()}function G(b){a.each(b,function(b,c){var d=a(c).siblings("input"),e=a(c).closest(ya.selectors.searchForm);d.is(":visible")&&d.val("").focus(),H(e)})}function H(b){var c=a(b),d=c.find("input").val();if(d.length&&!c.hasClass(ya.classes.active))return void _.addClass(ya.classes.active);d.length||c.removeClass(ya.classes.active)}function I(b){var c=b.currentTarget,d=c.href,e=a(c).attr(ya.attributes.dealerId),f=a(c).attr(ya.attributes.target);e.length&&d.length&&(b.preventDefault(),ga.save(e),i.isString(d)&&d.length&&j.run(f,d))}function J(a){a.toggleClass(ya.isSubOpenedClass)}function K(a,b){L()}function L(){var b=a.cookie(ya.ownerServicesLoggedInCookie);b&&(W.find(ya.loggedInStateNameSelector).text(b),W.addClass(ya.isLoggedInClass))}function M(b,c){ha=a(b).data("target"),s(),fa.open(ha+"#"+c)}function N(b,c){var d=a(b),e=d.parent(),f=d.parent().parent(),g=d.hasClass("vehicle-block"),h=d.parents().hasClass("logo"),i=d.attr("href")||"",j=c+"-nav",k=d.find(ya.selectors.vehicleName).first(),n=a.trim(d.data("analytics-button-text")),o=h?"logo":n.length?n:g?a.trim(k.text()):a.trim(d.text()),p=l.eventTypes,q={},r=d.hasClass(ya.classes.ctaFlyoutTrigger)&&!m();d.hasClass(ya.classes.dropdown)&&!r||e.hasClass(ya.classes.dropdown)||f.hasClass(ya.classes.dropdown)||e.hasClass(ya.classes.search)||f.hasClass(ya.classes.search)||(q={componentId:Aa,destination:i,locationInPage:j,buttonText:o},e.hasClass(ya.isLoggedInClass)&&!d.hasClass(ya.classes.logout)&&(q.buttonText="owner services"),ya.analyticsManager.tag(p.navigationClick,q))}function O(){if(!ma)return!1;ka=c.loadItem("c_110"),la=ka?ka.totalUnread:"",la&&ma.html(la),la<1?ma.addClass("hidden"):ma.removeClass("hidden")}function P(){var a=new Date;V.find(ya.selectors.printInfoCreatedDate).text(a.toLocaleDateString(ya.HELIOS.config.common.locale)),V.find(ya.selectors.printInfoUrl).text(location.href)}function Q(a){0===a.errorCode&&a.data&&a.data.accountSfdcId&&(ya.analyticsManager.addCustomerId(a.data.accountSfdcId),ya.HELIOS.adobe.tagging.loginStatus="logged in")}function R(){var a=ya.window.onGigyaServiceReady;ya.window.onGigyaServiceReady=function(b){i.isFunction(a)&&a.apply(this,arguments),ya.window.gigya.accounts.getAccountInfo({callback:Q})}}function S(b){var c=a(b.currentTarget);c.find("ul").is(":hidden")?c.addClass(ya.classes.active):c.removeClass(ya.classes.active)}function T(b){var c,d,e=a(b.currentTarget),f=e.attr("href");b.preventDefault(),d=f.replace(/.*?:\/\//g,"").split("/")[0],c="//"+d+ya.window.location.pathname,a.ajax({url:c,type:"HEAD",success:function(){ya.window.location.assign(c)},error:function(){ya.window.location.assign(f)}})}function U(){var b=a(ya.globalNavContainer).width(),c=(a(ya.selectors.navInner).width()-b)/2;_.css({width:b,left:c})}var V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua={rootSelector:".c_010B",wrapperSelector:".c_127",messageCentre:".c_109",globalNavContainer:".global-nav-container",logoContainerSelector:".title-logo-container",navItemContainerSelector:".nav-container",globalNavSelector:".nav-global",subNavItemContainerSelector:".nav-primary, .nav-global, .nav-global-small",subNavItemSelector:" > li > a, > li > button",maskSelector:".nav-mask",openSelector:".show-menu",closeSelector:".close-menu",loggedInStateSelector:".login",loggedInStateNameSelector:".logged-in-state.see-profile span",isLoggedInClass:"logged-in",isNavigationActivatedClass:"nav-is-activated",isOpenClass:"nav-is-open",expandContainerClass:"expand-container",isSubOpenedClass:"expanded",isSubOpenCompleteClass:"is-expanded",isSubClosedClass:"closed",transitionEndEvent:"webkitTransitionEnd mozTransitionEnd MSTransitionEnd otransitionend transitionend",ownerServicesLoggedInCookie:"OwnerServicesLoggedInName",storageMode:"cookie",AnalyticsStateIn:"in",AnalyticsStateOut:"out",events:{changeTab:"click.c_080",click:"click",clickTouch:"click touchstart",mouseOver:"mouseover",clearDropdowns:"c_10B_clearDropdowns",closeMeganav:"c_10B_closeMeganav"},attributes:{dealerId:"data-dealer-id",target:"target"},selectors:{subNav:".sub-nav",loginLink:".c_080 .log-in-link a",signupLink:".c_080 .sign-up-link a",signupLoginComponent:".c_080",searchListItem:"li.search button",searchForm:".search-js",searchBarContainer:".search-bar-container",clearSearch:".clear-search",logInCTA:".login button.login-button",logOutCTA:".logout",iframe:".signup-login iframe",dropdown:".dropdown",customSelectbox:".custom-selectbox",primaryNavTrackedElements:".nav-global-small, .nav-global",secondaryNavTrackedElements:".nav-primary, .vehicles-container, .cta-flyout-container",globalNavTrackedElements:".nav-primary, .nav-global-small, .nav-global",messageCentreLink:".logged-in-state.see-message-centre",unread:".message-count",printInfoCreatedDate:".print-info-date span",printInfoUrl:".print-info-url",languageSelector:"li.language-selector",languageSelected:".language-selector a",navInner:".nav-inner",vehicleName:".vehicle-in-category-name-inner",vehicleImage:".vehicle-in-category-img",batdLinks:".nav-global-batd, .nav-global-small-batd",slidingPanel:".sliding-panel-content",logo:".logo"},classes:{modalContainer:"signup-login",logout:"logout",login:"login",expanded:"expanded",active:"active",dropdown:"dropdown",search:"search",languages:"basic-languages",hidden:"hidden",redraw:"redraw",picturefillHandler:"picture-element",ctaFlyoutTrigger:"cta-flyout-trigger"},config:{maxAttempts:10,readyInterval:500},data:{gigyaApiKey:"gigyaApiKey",gigyaGlobalConfig:"gigyaGlobalConfig",gigyaLoadErrorMsg:"gigyaLoadErrorMsg",redirectUrl:"redirectUrl"}},va=a("html, body"),wa=!1,xa=!0,ya=null,za=!1,Aa="C10B_Global_Navigation",Ba=-1,Ca={},Da=new g({prefix:"C10"});return{init:x}}),define("cookiesManager",["jquery","logger","jqueryCookie"],function(a,b){function c(a){if(void 0===window.cookies&&(window.cookies=[]),void 0!==window.cookies[a])return window.cookies[a];window.cookies[a]=this,this.cookieName=a,this.stack=[],this.expire=864e5,this.domaine=null,this.eventList={},this.init()}return log=new b({prefix:"cookiesManager"}),c.prototype.init=function(){var a=this.get(this.cookieName);if(void 0!==a)try{this.stack=JSON.parse(this.get(this.cookieName))}catch(b){log.warn("JSON.parse failed on cookie: "+a)}},c.prototype.getByItem=function(a,b){for(var c=[],d=0;d<this.stack.length;d++)this.stack[d][a]===b&&c.push(d);return c},c.prototype.focus=function(a){return this.cookieName=a,this},c.prototype.addItem=function(a){return this.stack.push(a),this.updateItems(),this},c.prototype.setItem=function(a){return this.stack=a,this.updateItems(),this},c.prototype.set=function(b,c){var d=null===c?-1:this.expire,e=null===c?-1:this.domain;return this.trigger("change"),a.cookie(b,c,{expires:d,domain:e,path:"/"}),this},c.prototype.trigger=function(a){if(void 0!==this.eventList[a])for(var b=0;b<this.eventList[a].length;b++)this.eventList[a][b]()},c.prototype.off=function(a,b){void 0!==this.eventList[a]&&delete this.eventList[a]},c.prototype.on=function(a,b){void 0===this.eventList[a]&&(this.eventList[a]=[]),this.eventList[a].push(b)},c.prototype.get=function(){return a.cookie(this.cookieName)},c.prototype.deleteCookie=function(){return a.cookie(this.cookieName,null,{path:"/"}),this.stack=[],this},c.prototype.deleteItem=function(a){return this.stack.splice(a,1),this.updateItems(),this},c.prototype.deleteItemByItem=function(a,b){for(var c=this.getByItem(a,b),d=0;d<c.length;d++)this.deleteItem(c[d]);return this},c.prototype.updateItems=function(){return this.set(this.cookieName,JSON.stringify(this.stack)),this},c.prototype.getAll=function(){for(var b=document.cookie.split(";"),c={},d=0;d<b.length;d++){var e=b[d].split("=");e[0]=a.trim(e[0]),c[e[0]]=JSON.parse(window.unescape(e[1]))}return c},c}),define("c_011",["jquery","disclaimers","cookiesManager","handlebars"],function(a,b,c,d){"use strict";function e(b){n=a.extend({},p,b),k=a(n.moduleSelect),l=new q(k),l.activeTabs(),h=k.find(".tabs"),i=h.find("[data-tab]"),j=a(n.moduleSelect).find("select[data-tab]"),f()}function f(){i.on("click",g),j.on("change",g)}function g(b){b.preventDefault();var c=a(b.currentTarget),d=c.is("select")?c.val():c.data("tab");k.find("[data-tabwrapper]").removeClass("in").siblings('[data-tabwrapper="'+d+'"]').addClass("in"),i.removeClass("current"),h.find('[data-tab="'+d+'"]').addClass("current"),j.val(d),"updateViewed"===d&&l.updateRecently(c)}var h,i,j,k,l,m,n,o,p={moduleSelect:".c_011",vehiclesWrapper:"[data-lastview]",template:"script[data-template=c_011_1]"},q=function(a){var b=this;this.$currentModule=a,this.cookie=new c("recentlyView"),this.cookie.on("change",function(){b.activeTabs()})};return q.prototype.activeTabs=function(){this.cookie.stack.length&&this.$currentModule.find(".navigation-tabs").addClass("in")},q.prototype.constructElement=function(c,e){var f={vehicles:c},g=e.$currentModule.find(n.vehiclesWrapper);m=d.compile(a(n.template).html(),{noEscape:!0}),g.html(m(f)),b.renderDisclaimers(g),window.picturefill()},q.prototype.formatVehicle=function(a){var b=a.basicModelInformation,c=a.modelImage;return{car_name:b.name,starting_price:b.startingPrice,price_per_month:b.emiPrice,content_image_alt_text:c.desktopImage.alt,images:[{src:c.desktopImage.source,media:"(max-width: 768px)",density:!1},{src:c.mobileImage.source,media:!1,density:!1}]}},q.prototype.formatResponse=function(a){for(var b=[],c=0;c<a.models.length;c++)b.push(this.formatVehicle(a.models[c]));return b},q.prototype.formatData=function(a){return a.join(",")},q.prototype.updateRecently=function(b){var c=this,d=b.parents(n.moduleSelect).data("recentVehiclesUrl");this.cookie.stack!==o&&a.ajax({url:d,data:{arrModelName:c.formatData(this.cookie.stack)},success:function(a){o=c.cookie.stack,c.constructElement(c.formatResponse(a),c)}})},{init:e}}),define("c_012",["jquery","underscore","storeDealer","goTo"],function(a,b,c,d){"use strict";function e(d){var f;return this instanceof e?(this.settings=b.extend({},i,d),this.$element=d.$element,!!this.$element.length&&(this.HELIOS=this.settings.HELIOS,this.window=this.settings.window,this.analyticsManager=this.settings.analyticsManager,
this.$links=a("a",this.$element),this.$dashboard=a(this.settings.selectors.dashboardRoot),this.$carProfile=a(this.settings.selectors.carProfileRoot),g=new c({HELIOS:this.settings.HELIOS}),g.init(),this.$element.closest(this.$dashboard).length?this.componentId="C12-C_Quick_Links_Dashboard":this.$element.closest(this.$carProfile).length?this.componentId="C12-D_Quick_Links_Car_Profile":this.componentId="C12-A_Links_Panel",this.bindEvents(),this.HELIOS&&this.HELIOS.dws&&this.HELIOS.dws.dealerId&&(f=this.HELIOS.dws.dealerId),void this.$links.each(b.bind(function(b,c){this.appendDealerIdToUrl(a(c),f)},this)))):new e(d)}function f(b){a(i.selectors.root).each(function(){new e(a.extend({},b,{$element:a(this)}))})}var g,h=".c_012",i={events:{click:"click"+h},attrs:{dealerId:"data-dealer-id",appendDealerId:"appendDealerId",target:"target"},selectors:{root:".c_012",dashboardRoot:".c_127",carProfileRoot:".c_141"}};return e.prototype.bindEvents=function(){this.$links.on(this.settings.events.click,b.bind(this.handleClick,this))},e.prototype.appendDealerIdToUrl=function(a,b){var c=a.attr("href");a.data(this.settings.attrs.appendDealerId)&&b&&b.length&&a.attr("href",c+"?dealerId="+b)},e.prototype.trackClick=function(a,b){var c=this.analyticsManager.trackingVars.genericClick,d=this.analyticsManager.getTrackingObjectProperties(c),e={};e[d.componentId]=this.componentId,e[d.destination]=b,e[d.locationInPage]="links panel",e[d.buttonText]=a,this.analyticsManager.track(c,e)},e.prototype.handleClick=function(c){var e=a(c.currentTarget),f=e.attr("href"),h=e.text().toLowerCase(),i=e.attr(this.settings.attrs.dealerId),j=e.attr(this.settings.attrs.target);c.preventDefault(),this.trackClick(h,f),i&&g.save(i),b.isString(f)&&f.length&&d.run(j,f)},{init:f,LinksPanel:e}}),define("c_013",["jquery","getConfiguratorCode"],function(a,b){"use strict";function c(b){i=a.extend({},h,b),g=a(i.selectors.root),d()}function d(){a(i.selectors.ctaButton,g).on(i.events.click,function(){f(this)}),a(i.selectors.configureButton,g).on("click",function(b){var c=a(this),d=c.data(i.data.modelCode),f=c.data(i.data.gradeCode),g=c.data(i.data.versionCode),h=c.data(i.data.urlExtension),j=c.data(i.data.serviceDataPath),k=c.attr(i.attr.href),l=c.attr(i.attr.target);b.preventDefault(),l!==i.CONSTANTS.TARGETBLANK&&(l=i.CONSTANTS.TARGETPARENT),d&&f&&j&&k?e(d,f,g,j,k,h,c,l):i.window.open(k,l)})}function e(a,c,d,e,f,g,h,j){b.configureRemoteServices(a,c,d,e,f,g).done(function(a){h.attr(i.attr.href,a),i.window.open(a,j)}).fail(function(){i.window.open(f,j)})}function f(b){var c=b,d=a(c),e=d.parents().eq(2),f=e.find(i.selectors.priceSelector),g=c.href,h=d.text(),j=e.find(i.selectors.fullPrice).text(),k=f.data(i.data.priceTypeData),l=f.data(i.data.priceCurrencyData),m=f.data(i.data.modelCode),n=f.data(i.data.versionIdData),o=e.find(i.selectors.carTitle).text(),p=f.data(i.data.gradeIdData),q=i.analyticsManager.trackingVars.genericClick,r=i.analyticsManager.getTrackingObjectProperties(q),s={};s[r.componentId]=i.trackers.componentIdTrack,s[r.destination]=g,s[r.locationInPage]=i.trackers.locationInPageTrack,s[r.buttonText]=h,s[r.vehiclePrice]=j,s[r.priceType]=k,s[r.priceCurrency]=l,s[r.vehicleVersion]=m,s[r.vehicleVersionId]=n,s[r.vehicleGrade]=o,s[r.vehicleGradeId]=p,i.analyticsManager.track(q,s)}var g,h={selectors:{root:".c_013",mainContent:".c_13-content",priceSelector:".c_184",financeSelector:".c_133B",fullPrice:".full-price",carTitle:".car-title",ctaButton:".cta > li > a.btn",configureButton:".btn.icon-configure"},data:{priceTypeData:"force-display-type",priceCurrencyData:"price-currency",versionIdData:"model-version",gradeIdData:"model-grade",modelCode:"model-code",gradeCode:"grade-code",versionCode:"version-code",urlExtension:"url-extension",serviceDataPath:"service-datapath"},attr:{target:"target",href:"href"},trackers:{componentIdTrack:"C13_Grade_Summary",locationInPageTrack:"Grade-summary"},events:{click:"click"},CONSTANTS:{TARGETBLANK:"_blank",TARGETPARENT:"_parent"}},i=null;return{init:c}}),document.createElement("video"),document.createElement("audio"),document.createElement("track");var vjs=function(a,b,c){var d;if("string"==typeof a){if(0===a.indexOf("#")&&(a=a.slice(1)),vjs.players[a])return vjs.players[a];d=vjs.el(a)}else d=a;if(!d||!d.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs) "+a);return d.player||new vjs.Player(d,b,c)},videojs=window.videojs=vjs;vjs.CDN_VERSION="4.9",vjs.ACCESS_PROTOCOL="https:"==document.location.protocol?"https://":"http://",vjs.options={techOrder:["html5","flash"],html5:{},flash:{},width:"100%",height:"100%",defaultVolume:0,playbackRates:[],inactivityTimeout:2e3,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{},errorDisplay:{}},language:document.getElementsByTagName("html")[0].getAttribute("lang")||navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this video."},"GENERATED_CDN_VSN"!==vjs.CDN_VERSION&&(videojs.options.flash.swf=vjs.ACCESS_PROTOCOL+"vjs.zencdn.net/"+vjs.CDN_VERSION+"/video-js.swf"),vjs.addLanguage=function(a,b){return void 0!==vjs.options.languages[a]?vjs.options.languages[a]=vjs.util.mergeOptions(vjs.options.languages[a],b):vjs.options.languages[a]=b,vjs.options.languages},vjs.players={},"function"==typeof define&&define.amd?define("vjs",[],function(){return videojs}):"object"==typeof exports&&"object"==typeof module&&(module.exports=videojs),vjs.CoreObject=vjs.CoreObject=function(){},vjs.CoreObject.extend=function(a){var b,c;a=a||{},b=a.init||a.init||this.prototype.init||this.prototype.init||function(){},c=function(){b.apply(this,arguments)},c.prototype=vjs.obj.create(this.prototype),c.prototype.constructor=c,c.extend=vjs.CoreObject.extend,c.create=vjs.CoreObject.create;for(var d in a)a.hasOwnProperty(d)&&(c.prototype[d]=a[d]);return c},vjs.CoreObject.create=function(){var a=vjs.obj.create(this.prototype);return this.apply(a,arguments),a},vjs.on=function(a,b,c){if(vjs.obj.isArray(b))return _handleMultipleEvents(vjs.on,a,b,c);var d=vjs.getData(a);d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=vjs.guid++),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b){if(!d.disabled){b=vjs.fixEvent(b);var c=d.handlers[b.type];if(c)for(var e=c.slice(0),f=0,g=e.length;f<g&&!b.isImmediatePropagationStopped();f++)e[f].call(a,b)}}),1==d.handlers[b].length&&(a.addEventListener?a.addEventListener(b,d.dispatcher,!1):a.attachEvent&&a.attachEvent("on"+b,d.dispatcher))},vjs.off=function(a,b,c){if(vjs.hasData(a)){var d=vjs.getData(a);if(d.handlers){if(vjs.obj.isArray(b))return _handleMultipleEvents(vjs.off,a,b,c);var e=function(b){d.handlers[b]=[],vjs.cleanUpEvents(a,b)};if(b){var f=d.handlers[b];if(f){if(!c)return void e(b);if(c.guid)for(var g=0;g<f.length;g++)f[g].guid===c.guid&&f.splice(g--,1);vjs.cleanUpEvents(a,b)}}else for(var h in d.handlers)e(h)}}},vjs.cleanUpEvents=function(a,b){var c=vjs.getData(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),vjs.isEmpty(c.handlers)&&(delete c.handlers,delete c.dispatcher,delete c.disabled),vjs.isEmpty(c)&&vjs.removeData(a)},vjs.fixEvent=function(a){function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped){var d=a||window.event;a={};for(var e in d)"layerX"!==e&&"layerY"!==e&&"keyboardEvent.keyLocation"!==e&&("returnValue"==e&&d.preventDefault||(a[e]=d[e]));if(a.target||(a.target=a.srcElement||document),a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement,a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,a.isDefaultPrevented=b,a.defaultPrevented=!0},a.isDefaultPrevented=c,a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!=a.clientX){var f=document.documentElement,g=document.body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!=a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a},vjs.trigger=function(a,b){var c=vjs.hasData(a)?vjs.getData(a):{},d=a.parentNode||a.ownerDocument;if("string"==typeof b&&(b={type:b,target:a}),b=vjs.fixEvent(b),c.dispatcher&&c.dispatcher.call(a,b),d&&!b.isPropagationStopped()&&!1!==b.bubbles)vjs.trigger(d,b);else if(!d&&!b.defaultPrevented){var e=vjs.getData(b.target);b.target[b.type]&&(e.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),e.disabled=!1)}return!b.defaultPrevented},vjs.one=function(a,b,c){if(vjs.obj.isArray(b))return _handleMultipleEvents(vjs.one,a,b,c);var d=function(){vjs.off(a,b,d),c.apply(this,arguments)};d.guid=c.guid=c.guid||vjs.guid++,vjs.on(a,b,d)};var hasOwnProp=Object.prototype.hasOwnProperty;vjs.createEl=function(a,b){var c;return a=a||"div",b=b||{},c=document.createElement(a),vjs.obj.each(b,function(a,b){-1!==a.indexOf("aria-")||"role"==a?c.setAttribute(a,b):c[a]=b}),c},vjs.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},vjs.obj={},vjs.obj.create=Object.create||function(a){function b(){}return b.prototype=a,new b},vjs.obj.each=function(a,b,c){for(var d in a)hasOwnProp.call(a,d)&&b.call(c||this,d,a[d])},vjs.obj.merge=function(a,b){if(!b)return a;for(var c in b)hasOwnProp.call(b,c)&&(a[c]=b[c]);return a},vjs.obj.deepMerge=function(a,b){var c,d,e;a=vjs.obj.copy(a);for(c in b)hasOwnProp.call(b,c)&&(d=a[c],e=b[c],vjs.obj.isPlain(d)&&vjs.obj.isPlain(e)?a[c]=vjs.obj.deepMerge(d,e):a[c]=b[c]);return a},vjs.obj.copy=function(a){return vjs.obj.merge({},a)},vjs.obj.isPlain=function(a){return!!a&&"object"==typeof a&&"[object Object]"===a.toString()&&a.constructor===Object},vjs.obj.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},vjs.isNaN=function(a){return a!==a},vjs.bind=function(a,b,c){b.guid||(b.guid=vjs.guid++);var d=function(){return b.apply(a,arguments)};return d.guid=c?c+"_"+b.guid:b.guid,d},vjs.cache={},vjs.guid=1,vjs.expando="vdata"+(new Date).getTime(),vjs.getData=function(a){var b=a[vjs.expando];return b||(b=a[vjs.expando]=vjs.guid++,vjs.cache[b]={}),vjs.cache[b]},vjs.hasData=function(a){var b=a[vjs.expando];return!(!b||vjs.isEmpty(vjs.cache[b]))},vjs.removeData=function(a){var b=a[vjs.expando];if(b){delete vjs.cache[b];try{delete a[vjs.expando]}catch(e){a.removeAttribute?a.removeAttribute(vjs.expando):a[vjs.expando]=null}}},vjs.isEmpty=function(a){for(var b in a)if(null!==a[b])return!1;return!0},vjs.hasClass=function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},vjs.addClass=function(a,b){vjs.hasClass(a,b)||(a.className=""===a.className?b:a.className+" "+b)},vjs.removeClass=function(a,b){var c,d;if(vjs.hasClass(a,b)){for(c=a.className.split(" "),d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);a.className=c.join(" ")}},vjs.TEST_VID=vjs.createEl("video"),vjs.USER_AGENT=navigator.userAgent,vjs.IS_IPHONE=/iPhone/i.test(vjs.USER_AGENT),vjs.IS_IPAD=/iPad/i.test(vjs.USER_AGENT),vjs.IS_IPOD=/iPod/i.test(vjs.USER_AGENT),vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD,vjs.IOS_VERSION=function(){var a=vjs.USER_AGENT.match(/OS (\d+)_/i);if(a&&a[1])return a[1]}(),vjs.IS_ANDROID=/Android/i.test(vjs.USER_AGENT),vjs.ANDROID_VERSION=function(){var a,b,c=vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return c?(a=c[1]&&parseFloat(c[1]),b=c[2]&&parseFloat(c[2]),a&&b?parseFloat(c[1]+"."+c[2]):a||null):null}(),vjs.IS_OLD_ANDROID=vjs.IS_ANDROID&&/webkit/i.test(vjs.USER_AGENT)&&vjs.ANDROID_VERSION<2.3,vjs.IS_FIREFOX=/Firefox/i.test(vjs.USER_AGENT),vjs.IS_CHROME=/Chrome/i.test(vjs.USER_AGENT),vjs.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),vjs.setElementAttributes=function(a,b){vjs.obj.each(b,function(b,c){null===c||void 0===c||!1===c?a.removeAttribute(b):a.setAttribute(b,!0===c?"":c)})},vjs.getElementAttributes=function(a){var b,c,d,e,f;if(b={},c=",autoplay,controls,loop,muted,default,",a&&a.attributes&&a.attributes.length>0){d=a.attributes;for(var g=d.length-1;g>=0;g--)e=d[g].name,f=d[g].value,"boolean"!=typeof a[e]&&-1===c.indexOf(","+e+",")||(f=null!==f),b[e]=f}return b},vjs.getComputedDimension=function(a,b){var c="";return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(c=a["client"+b.substr(0,1).toUpperCase()+b.substr(1)]+"px"),c},vjs.insertFirst=function(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)},vjs.browser={},vjs.el=function(a){return 0===a.indexOf("#")&&(a=a.slice(1)),document.getElementById(a)},vjs.formatTime=function(a,b){b=b||a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&d<10?"0"+d:d)+":",c=c<10?"0"+c:c,e+d+c},vjs.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},vjs.unblockTextSelection=function(){document.onselectstart=function(){return!0}},vjs.trim=function(a){return(a+"").replace(/^\s+|\s+$/g,"")},vjs.round=function(a,b){return b||(b=0),Math.round(a*Math.pow(10,b))/Math.pow(10,b)},vjs.createTimeRange=function(a,b){return{length:1,start:function(){return a},end:function(){return b}}},vjs.get=function(a,b,c,d){var f,g,h,i,j;c=c||function(){},"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(b){}throw new Error("This browser does not support XMLHttpRequest.")}),g=new XMLHttpRequest,h=vjs.parseUrl(a),i=window.location,j=h.protocol+h.host!==i.protocol+i.host,!j||!window.XDomainRequest||"withCredentials"in g?(f="file:"==h.protocol||"file:"==i.protocol,g.onreadystatechange=function(){4===g.readyState&&(200===g.status||f&&0===g.status?b(g.responseText):c(g.responseText))}):(g=new window.XDomainRequest,g.onload=function(){b(g.responseText)},g.onerror=c,g.onprogress=function(){},g.ontimeout=c);try{g.open("GET",a,!0),d&&(g.withCredentials=!0)}catch(e){return void c(e)}try{g.send()}catch(e){c(e)}},vjs.setLocalStorage=function(a,b){try{var c=window.localStorage||!1;if(!c)return;c[a]=b}catch(e){22==e.code||1014==e.code?vjs.log("LocalStorage Full (VideoJS)",e):18==e.code?vjs.log("LocalStorage not allowed (VideoJS)",e):vjs.log("LocalStorage Error (VideoJS)",e)}},vjs.getAbsoluteURL=function(a){return a.match(/^https?:\/\//)||(a=vjs.createEl("div",{innerHTML:'<a href="'+a+'">x</a>'}).firstChild.href),a},vjs.parseUrl=function(a){var b,c,d,e,f;e=["protocol","hostname","port","pathname","search","hash","host"],c=vjs.createEl("a",{href:a}),d=""===c.host&&"file:"!==c.protocol,d&&(b=vjs.createEl("div"),b.innerHTML='<a href="'+a+'"></a>',c=b.firstChild,b.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(b)),f={};for(var g=0;g<e.length;g++)f[e[g]]=c[e[g]];return d&&document.body.removeChild(b),f},vjs.log=function(){_logType(null,arguments)},vjs.log.history=[],vjs.log.error=function(){_logType("error",arguments)},vjs.log.warn=function(){_logType("warn",arguments)},vjs.findPosition=function(a){var b,c,d,e,f,g,h,i,j;return a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect()),b?(c=document.documentElement,d=document.body,e=c.clientLeft||d.clientLeft||0,f=window.pageXOffset||d.scrollLeft,g=b.left+f-e,h=c.clientTop||d.clientTop||0,i=window.pageYOffset||d.scrollTop,j=b.top+i-h,{left:vjs.round(g),top:vjs.round(j)}):{left:0,top:0}},vjs.arr={},vjs.arr.forEach=function(a,b,c){if(vjs.obj.isArray(a)&&b instanceof Function)for(var d=0,e=a.length;d<e;++d)b.call(c||vjs,a[d],d,a);return a},vjs.util={},vjs.util.mergeOptions=function(a,b){var c,d,e;a=vjs.obj.copy(a);for(c in b)b.hasOwnProperty(c)&&(d=a[c],e=b[c],vjs.obj.isPlain(d)&&vjs.obj.isPlain(e)?a[c]=vjs.util.mergeOptions(d,e):a[c]=b[c]);return a},vjs.Component=vjs.CoreObject.extend({init:function(a,b,c){this.player_=a,this.options_=vjs.obj.copy(this.options_),b=this.options(b),this.id_=b.id||(b.el&&b.el.id?b.el.id:a.id()+"_component_"+vjs.guid++),this.name_=b.name||null,this.el_=b.el||this.createEl(),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.initChildren(),this.ready(c),!1!==b.reportTouchActivity&&this.enableTouchActivity()}}),vjs.Component.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),vjs.removeData(this.el_),this.el_=null},vjs.Component.prototype.player_=!0,vjs.Component.prototype.player=function(){return this.player_},vjs.Component.prototype.options_,vjs.Component.prototype.options=function(a){return void 0===a?this.options_:this.options_=vjs.util.mergeOptions(this.options_,a)},vjs.Component.prototype.el_,vjs.Component.prototype.createEl=function(a,b){return vjs.createEl(a,b)},vjs.Component.prototype.localize=function(a){var b=this.player_.language(),c=this.player_.languages();return c&&c[b]&&c[b][a]?c[b][a]:a},vjs.Component.prototype.el=function(){return this.el_},vjs.Component.prototype.contentEl_,vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_},vjs.Component.prototype.id_,vjs.Component.prototype.id=function(){return this.id_},vjs.Component.prototype.name_,vjs.Component.prototype.name=function(){return this.name_},vjs.Component.prototype.children_,vjs.Component.prototype.children=function(){return this.children_},vjs.Component.prototype.childIndex_,vjs.Component.prototype.getChildById=function(a){return this.childIndex_[a]},vjs.Component.prototype.childNameIndex_,vjs.Component.prototype.getChild=function(a){return this.childNameIndex_[a]},vjs.Component.prototype.addChild=function(a,b){var c,d,e;return"string"==typeof a?(e=a,b=b||{},d=b.componentClass||vjs.capitalize(e),b.name=e,c=new window.videojs[d](this.player_||this,b)):c=a,this.children_.push(c),"function"==typeof c.id&&(this.childIndex_[c.id()]=c),e=e||c.name&&c.name(),e&&(this.childNameIndex_[e]=c),"function"==typeof c.el&&c.el()&&this.contentEl().appendChild(c.el()),c},vjs.Component.prototype.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){this.childIndex_[a.id]=null,this.childNameIndex_[a.name]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},vjs.Component.prototype.initChildren=function(){var a,b,c,d,e;if(a=this,b=this.options().children)if(vjs.obj.isArray(b))for(var f=0;f<b.length;f++)c=b[f],"string"==typeof c?(d=c,e={}):(d=c.name,e=c),a[d]=a.addChild(d,e);else vjs.obj.each(b,function(b,c){!1!==c&&(a[b]=a.addChild(b,c))})},vjs.Component.prototype.buildCSSClass=function(){return""},vjs.Component.prototype.on=function(a,b){return vjs.on(this.el_,a,vjs.bind(this,b)),this},vjs.Component.prototype.off=function(a,b){return vjs.off(this.el_,a,b),this},vjs.Component.prototype.one=function(a,b){return vjs.one(this.el_,a,vjs.bind(this,b)),this},vjs.Component.prototype.trigger=function(a){return vjs.trigger(this.el_,a),this},vjs.Component.prototype.isReady_,vjs.Component.prototype.isReadyOnInitFinish_=!0,vjs.Component.prototype.readyQueue_,vjs.Component.prototype.ready=function(a){return a&&(this.isReady_?a.call(this):(void 0===this.readyQueue_&&(this.readyQueue_=[]),this.readyQueue_.push(a))),this},vjs.Component.prototype.triggerReady=function(){this.isReady_=!0;var a=this.readyQueue_;if(a&&a.length>0){for(var b=0,c=a.length;b<c;b++)a[b].call(this);this.readyQueue_=[],this.trigger("ready")}},vjs.Component.prototype.hasClass=function(a){return vjs.hasClass(this.el_,a)},vjs.Component.prototype.addClass=function(a){return vjs.addClass(this.el_,a),this},vjs.Component.prototype.removeClass=function(a){return vjs.removeClass(this.el_,a),this},vjs.Component.prototype.show=function(){return this.el_.style.display="block",this},vjs.Component.prototype.hide=function(){return this.el_.style.display="none",this},vjs.Component.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},vjs.Component.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},vjs.Component.prototype.disable=function(){this.hide(),this.show=function(){}},vjs.Component.prototype.width=function(a,b){return this.dimension("width",a,b)},vjs.Component.prototype.height=function(a,b){return this.dimension("height",a,b)},vjs.Component.prototype.dimensions=function(a,b){return this.width(a,!0).height(b)},vjs.Component.prototype.dimension=function(a,b,c){if(void 0!==b)return(null===b||vjs.isNaN(b))&&(b=0),-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px",c||this.trigger("resize"),this;if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return-1!==e?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+vjs.capitalize(a)],10)},vjs.Component.prototype.onResize,vjs.Component.prototype.emitTapEvents=function(){var a,b,c,d,e,f,g,h,i;a=0,b=null,i=22,this.on("touchstart",function(c){1===c.touches.length&&(b=c.touches[0],a=(new Date).getTime(),d=!0)}),this.on("touchmove",function(a){a.touches.length>1?d=!1:b&&(f=a.touches[0].pageX-b.pageX,g=a.touches[0].pageY-b.pageY,(h=Math.sqrt(f*f+g*g))>i&&(d=!1))}),e=function(){d=!1},this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){b=null,!0===d&&(c=(new Date).getTime()-a)<250&&(e.preventDefault(),this.trigger("tap"))})},vjs.Component.prototype.enableTouchActivity=function(){var a,b,c;a=vjs.bind(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){a(),clearInterval(b),b=setInterval(a,250)}),c=function(c){a(),clearInterval(b)},this.on("touchmove",a),this.on("touchend",c),this.on("touchcancel",c)},vjs.Button=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.emitTapEvents(),this.on("tap",this.onClick),this.on("click",this.onClick),this.on("focus",this.onFocus),this.on("blur",this.onBlur)}}),vjs.Button.prototype.createEl=function(a,b){var c;return b=vjs.obj.merge({className:this.buildCSSClass(),role:"button","aria-live":"polite",tabIndex:0},b),c=vjs.Component.prototype.createEl.call(this,a,b),b.innerHTML||(this.contentEl_=vjs.createEl("div",{className:"vjs-control-content"}),this.controlText_=vjs.createEl("span",{className:"vjs-control-text",innerHTML:this.localize(this.buttonText)||"Need Text"}),this.contentEl_.appendChild(this.controlText_),c.appendChild(this.contentEl_)),c},vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)},vjs.Button.prototype.onClick=function(){},vjs.Button.prototype.onFocus=function(){vjs.on(document,"keydown",vjs.bind(this,this.onKeyPress))},vjs.Button.prototype.onKeyPress=function(a){32!=a.which&&13!=a.which||(a.preventDefault(),this.onClick())},vjs.Button.prototype.onBlur=function(){vjs.off(document,"keydown",vjs.bind(this,this.onKeyPress))},vjs.Slider=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.bar=this.getChild(this.options_.barName),this.handle=this.getChild(this.options_.handleName),this.on("mousedown",this.onMouseDown),this.on("touchstart",this.onMouseDown),this.on("focus",this.onFocus),this.on("blur",this.onBlur),this.on("click",this.onClick),this.player_.on("controlsvisible",vjs.bind(this,this.update)),a.on(this.playerEvent,vjs.bind(this,this.update)),this.boundEvents={},this.boundEvents.move=vjs.bind(this,this.onMouseMove),this.boundEvents.end=vjs.bind(this,this.onMouseUp)}}),vjs.Slider.prototype.dispose=function(){vjs.off(document,"mousemove",this.boundEvents.move,!1),vjs.off(document,"mouseup",this.boundEvents.end,!1),vjs.off(document,"touchmove",this.boundEvents.move,!1),vjs.off(document,"touchend",this.boundEvents.end,!1),vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress)),vjs.Component.prototype.dispose.call(this)},vjs.Slider.prototype.createEl=function(a,b){return b=b||{},b.className=b.className+" vjs-slider",b=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},b),vjs.Component.prototype.createEl.call(this,a,b)},vjs.Slider.prototype.onMouseDown=function(a){a.preventDefault(),vjs.blockTextSelection(),this.addClass("vjs-sliding"),vjs.on(document,"mousemove",this.boundEvents.move),vjs.on(document,"mouseup",this.boundEvents.end),vjs.on(document,"touchmove",this.boundEvents.move),vjs.on(document,"touchend",this.boundEvents.end),this.onMouseMove(a)},vjs.Slider.prototype.onMouseMove=function(){},vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection(),this.removeClass("vjs-sliding"),vjs.off(document,"mousemove",this.boundEvents.move,!1),vjs.off(document,"mouseup",this.boundEvents.end,!1),vjs.off(document,"touchmove",this.boundEvents.move,!1),vjs.off(document,"touchend",this.boundEvents.end,!1),this.update()},vjs.Slider.prototype.update=function(){if(this.el_){var a,b=this.getPercent(),c=this.handle,d=this.bar;if(isNaN(b)&&(b=0),a=b,c){var e=this.el_,f=e.offsetWidth,g=c.el().offsetWidth,h=g?g/f:0,i=1-h,j=b*i;a=j+h/2,c.el().style.left=vjs.round(100*j,2)+"%"}d&&(d.el().style.width=vjs.round(100*a,2)+"%")}},vjs.Slider.prototype.calculateDistance=function(a){var b,c,d,e,f,g,h,i,j;if(b=this.el_,c=vjs.findPosition(b),f=g=b.offsetWidth,h=this.handle,this.options().vertical){if(e=c.top,j=a.changedTouches?a.changedTouches[0].pageY:a.pageY,h){var k=h.el().offsetHeight;e+=k/2,g-=k}return Math.max(0,Math.min(1,(e-j+g)/g))}if(d=c.left,i=a.changedTouches?a.changedTouches[0].pageX:a.pageX,h){var l=h.el().offsetWidth;d+=l/2,f-=l}return Math.max(0,Math.min(1,(i-d)/f))},vjs.Slider.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider.prototype.onKeyPress=function(a){37==a.which||40==a.which?(a.preventDefault(),this.stepBack()):38!=a.which&&39!=a.which||(a.preventDefault(),this.stepForward())},vjs.Slider.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider.prototype.onClick=function(a){a.stopImmediatePropagation(),a.preventDefault()},vjs.SliderHandle=vjs.Component.extend(),vjs.SliderHandle.prototype.defaultValue=0,vjs.SliderHandle.prototype.createEl=function(a,b){return b=b||{},b.className=b.className+" vjs-slider-handle",b=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},b),vjs.Component.prototype.createEl.call(this,"div",b)},vjs.Menu=vjs.Component.extend(),vjs.Menu.prototype.addItem=function(a){this.addChild(a),a.on("click",vjs.bind(this,function(){this.unlockShowing()}))},vjs.Menu.prototype.createEl=function(){var a=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(a,{className:"vjs-menu-content"});var b=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return b.appendChild(this.contentEl_),vjs.on(b,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),b},vjs.MenuItem=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),this.selected(b.selected)}}),vjs.MenuItem.prototype.createEl=function(a,b){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.options_.label},b))},vjs.MenuItem.prototype.onClick=function(){this.selected(!0)},vjs.MenuItem.prototype.selected=function(a){a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-selected",!0)):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-selected",!1))},vjs.MenuButton=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),this.menu=this.createMenu(),this.addChild(this.menu),this.items&&0===this.items.length&&this.hide(),this.on("keyup",this.onKeyPress),this.el_.setAttribute("aria-haspopup",!0),this.el_.setAttribute("role","button")}}),vjs.MenuButton.prototype.buttonPressed_=!1,vjs.MenuButton.prototype.createMenu=function(){var a=new vjs.Menu(this.player_);if(this.options().title&&a.contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.options().title),tabindex:-1})),this.items=this.createItems(),this.items)for(var b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a},vjs.MenuButton.prototype.createItems=function(){},vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.MenuButton.prototype.onFocus=function(){},vjs.MenuButton.prototype.onBlur=function(){},vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},vjs.MenuButton.prototype.onKeyPress=function(a){a.preventDefault(),32==a.which||13==a.which?this.buttonPressed_?this.unpressButton():this.pressButton():27==a.which&&this.buttonPressed_&&this.unpressButton()},vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-pressed",!0),this.items&&this.items.length>0&&this.items[0].el().focus()},vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-pressed",!1)},vjs.MediaError=function(a){"number"==typeof a?this.code=a:"string"==typeof a?this.message=a:"object"==typeof a&&vjs.obj.merge(this,a),this.message||(this.message=vjs.MediaError.defaultMessages[this.code]||"")},vjs.MediaError.prototype.code=0,vjs.MediaError.prototype.message="",vjs.MediaError.prototype.status=null,vjs.MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],vjs.MediaError.defaultMessages={1:"You aborted the video playback",2:"A network error caused the video download to fail part-way.",3:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",4:"The video could not be loaded, either because the server or network failed or because the format is not supported.",5:"The video is encrypted and we do not have the keys to decrypt it."};for(var errNum=0;errNum<vjs.MediaError.errorTypes.length;errNum++)vjs.MediaError[vjs.MediaError.errorTypes[errNum]]=errNum,vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]]=errNum;!function(){var a,b,c,d;for(vjs.browser.fullscreenAPI,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],b=a[0],d=0;d<a.length;d++)if(a[d][1]in document){c=a[d];break}if(c)for(vjs.browser.fullscreenAPI={},d=0;d<c.length;d++)vjs.browser.fullscreenAPI[b[d]]=c[d]
}(),vjs.Player=vjs.Component.extend({init:function(a,b,c){this.tag=a,a.id=a.id||"vjs_video_"+vjs.guid++,this.tagAttributes=a&&vjs.getElementAttributes(a),b=vjs.obj.merge(this.getTagSettings(a),b),this.language_=b.language||vjs.options.language,this.languages_=b.languages||vjs.options.languages,this.cache_={},this.poster_=b.poster,this.controls_=b.controls,a.controls=!1,b.reportTouchActivity=!1,this.isAudio("audio"===this.tag.nodeName.toLowerCase()),vjs.Component.call(this,this,b,c),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.isAudio()&&this.addClass("vjs-audio"),vjs.players[this.id_]=this,b.plugins&&vjs.obj.each(b.plugins,function(a,b){this[a](b)},this),this.listenForUserActivity()}}),vjs.Player.prototype.language_,vjs.Player.prototype.language=function(a){return void 0===a?this.language_:(this.language_=a,this)},vjs.Player.prototype.languages_,vjs.Player.prototype.languages=function(){return this.languages_},vjs.Player.prototype.options_=vjs.options,vjs.Player.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),vjs.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech&&this.tech.dispose(),vjs.Component.prototype.dispose.call(this)},vjs.Player.prototype.getTagSettings=function(a){var b,c,d={sources:[],tracks:[]};if(b=vjs.getElementAttributes(a),c=b["data-setup"],null!==c&&vjs.obj.merge(b,vjs.JSON.parse(c||"{}")),vjs.obj.merge(d,b),a.hasChildNodes()){var e,f,g,h,i;for(e=a.childNodes,h=0,i=e.length;h<i;h++)f=e[h],g=f.nodeName.toLowerCase(),"source"===g?d.sources.push(vjs.getElementAttributes(f)):"track"===g&&d.tracks.push(vjs.getElementAttributes(f))}return d},vjs.Player.prototype.createEl=function(){var a,b=this.el_=vjs.Component.prototype.createEl.call(this,"div"),c=this.tag;if(c.removeAttribute("width"),c.removeAttribute("height"),c.hasChildNodes()){var d,e,f,g,h;for(d=c.childNodes,e=d.length,h=[];e--;)g=d[e],"track"===g.nodeName.toLowerCase()&&h.push(g);for(f=0;f<h.length;f++)c.removeChild(h[f])}return a=vjs.getElementAttributes(c),vjs.obj.each(a,function(c){"class"==c?b.className=a[c]:b.setAttribute(c,a[c])}),c.id+="_html5_api",c.className="vjs-tech",c.player=b.player=this,this.addClass("vjs-paused"),this.width(this.options_.width,!0),this.height(this.options_.height,!0),c.parentNode&&c.parentNode.insertBefore(b,c),vjs.insertFirst(c,b),this.el_=b,this.on("loadstart",this.onLoadStart),this.on("waiting",this.onWaiting),this.on(["canplay","canplaythrough","playing","ended"],this.onWaitEnd),this.on("seeking",this.onSeeking),this.on("seeked",this.onSeeked),this.on("ended",this.onEnded),this.on("play",this.onPlay),this.on("firstplay",this.onFirstPlay),this.on("pause",this.onPause),this.on("progress",this.onProgress),this.on("durationchange",this.onDurationChange),this.on("fullscreenchange",this.onFullscreenChange),b},vjs.Player.prototype.loadTech=function(a,b){this.tech&&this.unloadTech(),"Html5"!==a&&this.tag&&(vjs.Html5.disposeMediaElement(this.tag),this.tag=null),this.techName=a,this.isReady_=!1;var c=function(){this.player_.triggerReady()},d=vjs.obj.merge({source:b,parentEl:this.el_},this.options_[a.toLowerCase()]);b&&(this.currentType_=b.type,b.src==this.cache_.src&&this.cache_.currentTime>0&&(d.startTime=this.cache_.currentTime),this.cache_.src=b.src),this.tech=new window.videojs[a](this,d),this.tech.ready(c)},vjs.Player.prototype.unloadTech=function(){this.isReady_=!1,this.tech.dispose(),this.tech=!1},vjs.Player.prototype.onLoadStart=function(){this.error(null),this.paused()?(this.hasStarted(!1),this.one("play",function(){this.hasStarted(!0)})):this.trigger("firstplay")},vjs.Player.prototype.hasStarted_=!1,vjs.Player.prototype.hasStarted=function(a){return void 0!==a?(this.hasStarted_!==a&&(this.hasStarted_=a,a?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):this.hasStarted_},vjs.Player.prototype.onLoadedMetaData,vjs.Player.prototype.onLoadedData,vjs.Player.prototype.onLoadedAllData,vjs.Player.prototype.onPlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing")},vjs.Player.prototype.onWaiting=function(){this.addClass("vjs-waiting")},vjs.Player.prototype.onWaitEnd=function(){this.removeClass("vjs-waiting")},vjs.Player.prototype.onSeeking=function(){this.addClass("vjs-seeking")},vjs.Player.prototype.onSeeked=function(){this.removeClass("vjs-seeking")},vjs.Player.prototype.onFirstPlay=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started")},vjs.Player.prototype.onPause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused")},vjs.Player.prototype.onTimeUpdate,vjs.Player.prototype.onProgress=function(){1==this.bufferedPercent()&&this.trigger("loadedalldata")},vjs.Player.prototype.onEnded=function(){this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause()},vjs.Player.prototype.onDurationChange=function(){var a=this.techGet("duration");a&&(a<0&&(a=1/0),this.duration(a),a===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"))},vjs.Player.prototype.onVolumeChange,vjs.Player.prototype.onFullscreenChange=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},vjs.Player.prototype.cache_,vjs.Player.prototype.getCache=function(){return this.cache_},vjs.Player.prototype.techCall=function(a,b){if(this.tech&&!this.tech.isReady_)this.tech.ready(function(){this[a](b)});else try{this.tech[a](b)}catch(e){throw vjs.log(e),e}},vjs.Player.prototype.techGet=function(a){if(this.tech&&this.tech.isReady_)try{return this.tech[a]()}catch(e){throw void 0===this.tech[a]?vjs.log("Video.js: "+a+" method not defined for "+this.techName+" playback technology.",e):"TypeError"==e.name?(vjs.log("Video.js: "+a+" unavailable on "+this.techName+" playback technology element.",e),this.tech.isReady_=!1):vjs.log(e),e}},vjs.Player.prototype.play=function(){return this.techCall("play"),this},vjs.Player.prototype.pause=function(){return this.techCall("pause"),this},vjs.Player.prototype.paused=function(){return!1!==this.techGet("paused")},vjs.Player.prototype.currentTime=function(a){return void 0!==a?(this.techCall("setCurrentTime",a),this):this.cache_.currentTime=this.techGet("currentTime")||0},vjs.Player.prototype.duration=function(a){return void 0!==a?(this.cache_.duration=parseFloat(a),this):(void 0===this.cache_.duration&&this.onDurationChange(),this.cache_.duration||0)},vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()},vjs.Player.prototype.buffered=function(){var a=this.techGet("buffered");return a&&a.length||(a=vjs.createTimeRange(0,0)),a},vjs.Player.prototype.bufferedPercent=function(){var a,b,c=this.duration(),d=this.buffered(),e=0;if(!c)return 0;for(var f=0;f<d.length;f++)a=d.start(f),b=d.end(f),b>c&&(b=c),e+=b-a;return e/c},vjs.Player.prototype.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c},vjs.Player.prototype.volume=function(a){var b;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall("setVolume",b),vjs.setLocalStorage("volume",b),this):(b=parseFloat(this.techGet("volume")),isNaN(b)?1:b)},vjs.Player.prototype.muted=function(a){return void 0!==a?(this.techCall("setMuted",a),this):this.techGet("muted")||!1},vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||!1},vjs.Player.prototype.isFullscreen_=!1,vjs.Player.prototype.isFullscreen=function(a){return void 0!==a?(this.isFullscreen_=!!a,this):this.isFullscreen_},vjs.Player.prototype.isFullScreen=function(a){return vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")'),this.isFullscreen(a)},vjs.Player.prototype.requestFullscreen=function(){var a=vjs.browser.fullscreenAPI;return this.isFullscreen(!0),a?(vjs.on(document,a.fullscreenchange,vjs.bind(this,function(b){this.isFullscreen(document[a.fullscreenElement]),!1===this.isFullscreen()&&vjs.off(document,a.fullscreenchange,arguments.callee),this.trigger("fullscreenchange")})),this.el_[a.requestFullscreen]()):this.tech.supportsFullScreen()?this.techCall("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.requestFullScreen=function(){return vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")'),this.requestFullscreen()},vjs.Player.prototype.exitFullscreen=function(){var a=vjs.browser.fullscreenAPI;return this.isFullscreen(!1),a?document[a.exitFullscreen]():this.tech.supportsFullScreen()?this.techCall("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.cancelFullScreen=function(){return vjs.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()"),this.exitFullscreen()},vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey)),document.documentElement.style.overflow="hidden",vjs.addClass(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},vjs.Player.prototype.fullWindowOnEscKey=function(a){27===a.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=!1,vjs.off(document,"keydown",this.fullWindowOnEscKey),document.documentElement.style.overflow=this.docOrigOverflow,vjs.removeClass(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},vjs.Player.prototype.selectSource=function(a){for(var b=0,c=this.options_.techOrder;b<c.length;b++){var d=vjs.capitalize(c[b]),e=window.videojs[d];if(e){if(e.isSupported())for(var f=0,g=a;f<g.length;f++){var h=g[f];if(e.canPlaySource(h))return{source:h,tech:d}}}else vjs.log.error('The "'+d+'" tech is undefined. Skipped browser support check for that tech.')}return!1},vjs.Player.prototype.src=function(a){return void 0===a?this.techGet("src"):(vjs.obj.isArray(a)?this.sourceList_(a):"string"==typeof a?this.src({src:a}):a instanceof Object&&(a.type&&!window.videojs[this.techName].canPlaySource(a)?this.sourceList_([a]):(this.cache_.src=a.src,this.currentType_=a.type||"",this.ready(function(){this.techCall("src",a.src),"auto"==this.options_.preload&&this.load(),this.options_.autoplay&&this.play()}))),this)},vjs.Player.prototype.sourceList_=function(a){var b,c=this.selectSource(a);c?c.tech===this.techName?this.src(c.source):this.loadTech(c.tech,c.source):(b=setTimeout(vjs.bind(this,function(){this.error({code:4,message:this.localize(this.options().notSupportedMessage)})}),0),this.triggerReady(),this.on("dispose",function(){clearTimeout(b)}))},vjs.Player.prototype.load=function(){return this.techCall("load"),this},vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""},vjs.Player.prototype.currentType=function(){return this.currentType_||""},vjs.Player.prototype.preload=function(a){return void 0!==a?(this.techCall("setPreload",a),this.options_.preload=a,this):this.techGet("preload")},vjs.Player.prototype.autoplay=function(a){return void 0!==a?(this.techCall("setAutoplay",a),this.options_.autoplay=a,this):this.techGet("autoplay",a)},vjs.Player.prototype.loop=function(a){return void 0!==a?(this.techCall("setLoop",a),this.options_.loop=a,this):this.techGet("loop")},vjs.Player.prototype.poster_,vjs.Player.prototype.poster=function(a){return void 0===a?this.poster_:(this.poster_=a,this.techCall("setPoster",a),this.trigger("posterchange"),this)},vjs.Player.prototype.controls_,vjs.Player.prototype.controls=function(a){return void 0!==a?(a=!!a,this.controls_!==a&&(this.controls_=a,a?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled")):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"))),this):this.controls_},vjs.Player.prototype.usingNativeControls_,vjs.Player.prototype.usingNativeControls=function(a){return void 0!==a?(a=!!a,this.usingNativeControls_!==a&&(this.usingNativeControls_=a,a?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):this.usingNativeControls_},vjs.Player.prototype.error_=null,vjs.Player.prototype.error=function(a){return void 0===a?this.error_:null===a?(this.error_=a,this.removeClass("vjs-error"),this):(a instanceof vjs.MediaError?this.error_=a:this.error_=new vjs.MediaError(a),this.trigger("error"),this.addClass("vjs-error"),vjs.log.error("(CODE:"+this.error_.code+" "+vjs.MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this)},vjs.Player.prototype.ended=function(){return this.techGet("ended")},vjs.Player.prototype.seeking=function(){return this.techGet("seeking")},vjs.Player.prototype.userActivity_=!0,vjs.Player.prototype.reportUserActivity=function(a){this.userActivity_=!0},vjs.Player.prototype.userActive_=!0,vjs.Player.prototype.userActive=function(a){return void 0!==a?(a=!!a,a!==this.userActive_&&(this.userActive_=a,a?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech&&this.tech.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},vjs.Player.prototype.listenForUserActivity=function(){var a,b,c,d,e,f,g,h,i;a=vjs.bind(this,this.reportUserActivity),b=function(b){b.screenX==h&&b.screenY==i||(h=b.screenX,i=b.screenY,a())},c=function(){a(),clearInterval(d),d=setInterval(a,250)},e=function(b){a(),clearInterval(d)},this.on("mousedown",c),this.on("mousemove",b),this.on("mouseup",e),this.on("keydown",a),this.on("keyup",a),f=setInterval(vjs.bind(this,function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),clearTimeout(g);var a=this.options().inactivityTimeout;a>0&&(g=setTimeout(vjs.bind(this,function(){this.userActivity_||this.userActive(!1)}),a))}}),250),this.on("dispose",function(){clearInterval(f),clearTimeout(g)})},vjs.Player.prototype.playbackRate=function(a){return void 0!==a?(this.techCall("setPlaybackRate",a),this):this.tech&&this.tech.featuresPlaybackRate?this.techGet("playbackRate"):1},vjs.Player.prototype.isAudio_=!1,vjs.Player.prototype.isAudio=function(a){return void 0!==a?(this.isAudio_=!!a,this):this.isAudio_},vjs.ControlBar=vjs.Component.extend(),vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},liveDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{},playbackRateMenuButton:{}}},vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{className:"vjs-control-bar"})},vjs.LiveDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.LiveDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-live-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE"),"aria-live":"off"}),a.appendChild(this.contentEl_),a},vjs.PlayToggle=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),a.on("play",vjs.bind(this,this.onPlay)),a.on("pause",vjs.bind(this,this.onPause))}}),vjs.PlayToggle.prototype.buttonText="Play",vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.PlayToggle.prototype.onClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},vjs.PlayToggle.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused"),vjs.addClass(this.el_,"vjs-playing"),this.el_.children[0].children[0].innerHTML=this.localize("Pause")},vjs.PlayToggle.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing"),vjs.addClass(this.el_,"vjs-paused"),this.el_.children[0].children[0].innerHTML=this.localize("Play")},vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),a.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.CurrentTimeDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),a.appendChild(this.contentEl_),a},vjs.CurrentTimeDisplay.prototype.updateContent=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Current Time")+"</span> "+vjs.formatTime(a,this.player_.duration())},vjs.DurationDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),a.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.DurationDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00","aria-live":"off"}),a.appendChild(this.contentEl_),a},vjs.DurationDisplay.prototype.updateContent=function(){var a=this.player_.duration();a&&(this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> "+vjs.formatTime(a))},vjs.TimeDivider=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},vjs.RemainingTimeDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),a.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.RemainingTimeDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00","aria-live":"off"}),a.appendChild(this.contentEl_),a},vjs.RemainingTimeDisplay.prototype.updateContent=function(){this.player_.duration()&&(this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -"+vjs.formatTime(this.player_.remainingTime()))},vjs.FullscreenToggle=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b)}}),vjs.FullscreenToggle.prototype.buttonText="Fullscreen",vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.FullscreenToggle.prototype.onClick=function(){this.player_.isFullscreen()?(this.player_.exitFullscreen(),this.controlText_.innerHTML=this.localize("Fullscreen")):(this.player_.requestFullscreen(),this.controlText_.innerHTML=this.localize("Non-Fullscreen"))},vjs.ProgressControl=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.ProgressControl.prototype.options_={children:{seekBar:{}}},vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},vjs.SeekBar=vjs.Slider.extend({init:function(a,b){vjs.Slider.call(this,a,b),a.on("timeupdate",vjs.bind(this,this.updateARIAAttributes)),a.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},vjs.SeekBar.prototype.playerEvent="timeupdate",vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})},vjs.SeekBar.prototype.updateARIAAttributes=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",vjs.formatTime(a,this.player_.duration()))},vjs.SeekBar.prototype.getPercent=function(){return this.player_.currentTime()/this.player_.duration()},vjs.SeekBar.prototype.onMouseDown=function(a){vjs.Slider.prototype.onMouseDown.call(this,a),this.player_.scrubbing=!0,this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},vjs.SeekBar.prototype.onMouseMove=function(a){var b=this.calculateDistance(a)*this.player_.duration();b==this.player_.duration()&&(b-=.1),this.player_.currentTime(b)},vjs.SeekBar.prototype.onMouseUp=function(a){vjs.Slider.prototype.onMouseUp.call(this,a),this.player_.scrubbing=!1,this.videoWasPlaying&&this.player_.play()},vjs.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},vjs.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},vjs.LoadProgressBar=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),a.on("progress",vjs.bind(this,this.update))}}),vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},vjs.LoadProgressBar.prototype.update=function(){var a,b,c,d,e=this.player_.buffered(),f=this.player_.duration(),g=this.player_.bufferedEnd(),h=this.el_.children,i=function(a,b){return 100*(a/b||0)+"%"};for(this.el_.style.width=i(g,f),a=0;a<e.length;a++)b=e.start(a),c=e.end(a),d=h[a],d||(d=this.el_.appendChild(vjs.createEl())),d.style.left=i(b,g),d.style.width=i(c-b,g);for(a=h.length;a>e.length;a--)this.el_.removeChild(h[a-1])},vjs.PlayProgressBar=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},vjs.SeekHandle=vjs.SliderHandle.extend({init:function(a,b){vjs.SliderHandle.call(this,a,b),a.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.SeekHandle.prototype.defaultValue="00:00",vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle","aria-live":"off"})},vjs.SeekHandle.prototype.updateContent=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.innerHTML='<span class="vjs-control-text">'+vjs.formatTime(a,this.player_.duration())+"</span>"},vjs.VolumeControl=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),a.tech&&!1===a.tech.featuresVolumeControl&&this.addClass("vjs-hidden"),a.on("loadstart",vjs.bind(this,function(){!1===a.tech.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}))}}),vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}},vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},vjs.VolumeBar=vjs.Slider.extend({init:function(a,b){vjs.Slider.call(this,a,b),a.on("volumechange",vjs.bind(this,this.updateARIAAttributes)),a.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(100*this.player_.volume(),2)),this.el_.setAttribute("aria-valuetext",vjs.round(100*this.player_.volume(),2)+"%")},vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},vjs.VolumeBar.prototype.playerEvent="volumechange",vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})},vjs.VolumeBar.prototype.onMouseMove=function(a){this.player_.muted()&&this.player_.muted(!1),this.player_.volume(this.calculateDistance(a))},vjs.VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)},vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)},vjs.VolumeLevel=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},vjs.VolumeHandle=vjs.SliderHandle.extend(),vjs.VolumeHandle.prototype.defaultValue="00:00",vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})},vjs.MuteToggle=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),a.on("volumechange",vjs.bind(this,this.update)),a.tech&&!1===a.tech.featuresVolumeControl&&this.addClass("vjs-hidden"),a.on("loadstart",vjs.bind(this,function(){!1===a.tech.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}))}}),vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.localize("Mute")+"</span></div>"})},vjs.MuteToggle.prototype.onClick=function(){this.player_.muted(!this.player_.muted())},vjs.MuteToggle.prototype.update=function(){var a=this.player_.volume(),b=3;0===a||this.player_.muted()?b=0:a<.33?b=1:a<.67&&(b=2),this.player_.muted()?this.el_.children[0].children[0].innerHTML!=this.localize("Unmute")&&(this.el_.children[0].children[0].innerHTML=this.localize("Unmute")):this.el_.children[0].children[0].innerHTML!=this.localize("Mute")&&(this.el_.children[0].children[0].innerHTML=this.localize("Mute"));for(var c=0;c<4;c++)vjs.removeClass(this.el_,"vjs-vol-"+c);vjs.addClass(this.el_,"vjs-vol-"+b)},vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(a,b){vjs.MenuButton.call(this,a,b),a.on("volumechange",vjs.bind(this,this.update)),a.tech&&!1===a.tech.featuresVolumeControl&&this.addClass("vjs-hidden"),a.on("loadstart",vjs.bind(this,function(){!1===a.tech.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})),this.addClass("vjs-menu-button")}}),vjs.VolumeMenuButton.prototype.createMenu=function(){var a=new vjs.Menu(this.player_,{contentElType:"div"}),b=new vjs.VolumeBar(this.player_,vjs.obj.merge({vertical:!0},this.options_.volumeBar));return b.on("focus",function(){a.lockShowing()}),b.on("blur",function(){a.unlockShowing()}),a.addChild(b),a},vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this),vjs.MenuButton.prototype.onClick.call(this)},vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.localize("Mute")+"</span></div>"})},vjs.VolumeMenuButton.prototype.update=vjs.MuteToggle.prototype.update,vjs.PlaybackRateMenuButton=vjs.MenuButton.extend({init:function(a,b){vjs.MenuButton.call(this,a,b),this.updateVisibility(),this.updateLabel(),a.on("loadstart",vjs.bind(this,this.updateVisibility)),a.on("ratechange",vjs.bind(this,this.updateLabel))}}),vjs.PlaybackRateMenuButton.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-playback-rate vjs-menu-button vjs-control",innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+this.localize("Playback Rate")+"</span></div>"});return this.labelEl_=vjs.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),a.appendChild(this.labelEl_),a},vjs.PlaybackRateMenuButton.prototype.createMenu=function(){var a=new vjs.Menu(this.player()),b=this.player().options().playbackRates;if(b)for(var c=b.length-1;c>=0;c--)a.addChild(new vjs.PlaybackRateMenuItem(this.player(),{rate:b[c]+"x"}));return a},vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},vjs.PlaybackRateMenuButton.prototype.onClick=function(){for(var a=this.player().playbackRate(),b=this.player().options().playbackRates,c=b[0],d=0;d<b.length;d++)if(b[d]>a){c=b[d];break}this.player().playbackRate(c)},vjs.PlaybackRateMenuButton.prototype.playbackRateSupported=function(){return this.player().tech&&this.player().tech.featuresPlaybackRate&&this.player().options().playbackRates&&this.player().options().playbackRates.length>0},vjs.PlaybackRateMenuButton.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},vjs.PlaybackRateMenuButton.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},vjs.PlaybackRateMenuItem=vjs.MenuItem.extend({contentElType:"button",init:function(a,b){var c=this.label=b.rate,d=this.rate=parseFloat(c,10);b.label=c,b.selected=1===d,vjs.MenuItem.call(this,a,b),this.player().on("ratechange",vjs.bind(this,this.update))}}),vjs.PlaybackRateMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player().playbackRate(this.rate)},vjs.PlaybackRateMenuItem.prototype.update=function(){this.selected(this.player().playbackRate()==this.rate)},vjs.PosterImage=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),a.poster()&&this.src(a.poster()),a.poster()||this.hide(),a.on("posterchange",vjs.bind(this,function(){this.src(a.poster())})),a.isAudio()||a.on("play",vjs.bind(this,this.hide))}});var _backgroundSizeSupported="backgroundSize"in vjs.TEST_VID.style;if(vjs.PosterImage.prototype.createEl=function(){var a=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1});return _backgroundSizeSupported||a.appendChild(vjs.createEl("img")),a},vjs.PosterImage.prototype.src=function(a){var b=this.el();void 0!==a&&(_backgroundSizeSupported?b.style.backgroundImage='url("'+a+'")':b.firstChild.src=a)},vjs.PosterImage.prototype.onClick=function(){this.player().controls()&&this.player_.play()},vjs.LoadingSpinner=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})},vjs.BigPlayButton=vjs.Button.extend(),vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})},vjs.BigPlayButton.prototype.onClick=function(){this.player_.play()},vjs.ErrorDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.update(),a.on("error",vjs.bind(this,this.update))}}),vjs.ErrorDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-error-display"});return this.contentEl_=vjs.createEl("div"),a.appendChild(this.contentEl_),a},vjs.ErrorDisplay.prototype.update=function(){this.player().error()&&(this.contentEl_.innerHTML=this.localize(this.player().error().message))},vjs.MediaTechController=vjs.Component.extend({init:function(a,b,c){b=b||{},b.reportTouchActivity=!1,vjs.Component.call(this,a,b,c),
this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),this.initControlsListeners()}}),vjs.MediaTechController.prototype.initControlsListeners=function(){var a,b,c,d;b=this,a=this.player();var c=function(){a.controls()&&!a.usingNativeControls()&&b.addControlsListeners()};d=vjs.bind(b,b.removeControlsListeners),this.ready(c),a.on("controlsenabled",c),a.on("controlsdisabled",d),this.ready(function(){this.networkState&&this.networkState()>0&&this.player().trigger("loadstart")})},vjs.MediaTechController.prototype.addControlsListeners=function(){var a;this.on("mousedown",this.onClick),this.on("touchstart",function(b){a=this.player_.userActive()}),this.on("touchmove",function(b){a&&this.player().reportUserActivity()}),this.on("touchend",function(a){a.preventDefault()}),this.emitTapEvents(),this.on("tap",this.onTap)},vjs.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap"),this.off("touchstart"),this.off("touchmove"),this.off("touchleave"),this.off("touchcancel"),this.off("touchend"),this.off("click"),this.off("mousedown")},vjs.MediaTechController.prototype.onClick=function(a){0===a.button&&this.player().controls()&&(this.player().paused()?this.player().play():this.player().pause())},vjs.MediaTechController.prototype.onTap=function(){this.player().userActive(!this.player().userActive())},vjs.MediaTechController.prototype.manualProgressOn=function(){this.manualProgress=!0,this.trackProgress()},vjs.MediaTechController.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress()},vjs.MediaTechController.prototype.trackProgress=function(){this.progressInterval=setInterval(vjs.bind(this,function(){var a=this.player().bufferedPercent();this.bufferedPercent_!=a&&this.player().trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)},vjs.MediaTechController.prototype.stopTrackingProgress=function(){clearInterval(this.progressInterval)},vjs.MediaTechController.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.player().on("play",vjs.bind(this,this.trackCurrentTime)),this.player().on("pause",vjs.bind(this,this.stopTrackingCurrentTime)),this.one("timeupdate",function(){this.featuresTimeupdateEvents=!0,this.manualTimeUpdatesOff()})},vjs.MediaTechController.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},vjs.MediaTechController.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=setInterval(vjs.bind(this,function(){this.player().trigger("timeupdate")}),250)},vjs.MediaTechController.prototype.stopTrackingCurrentTime=function(){clearInterval(this.currentTimeInterval),this.player().trigger("timeupdate")},vjs.MediaTechController.prototype.dispose=function(){this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),vjs.Component.prototype.dispose.call(this)},vjs.MediaTechController.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.player().trigger("timeupdate")},vjs.MediaTechController.prototype.setPoster=function(){},vjs.MediaTechController.prototype.featuresVolumeControl=!0,vjs.MediaTechController.prototype.featuresFullscreenResize=!1,vjs.MediaTechController.prototype.featuresPlaybackRate=!1,vjs.MediaTechController.prototype.featuresProgressEvents=!1,vjs.MediaTechController.prototype.featuresTimeupdateEvents=!1,vjs.media={},vjs.Html5=vjs.MediaTechController.extend({init:function(a,b,c){this.featuresVolumeControl=vjs.Html5.canControlVolume(),this.featuresPlaybackRate=vjs.Html5.canControlPlaybackRate(),this.movingMediaElementInDOM=!vjs.IS_IOS,this.featuresFullscreenResize=!0,this.featuresProgressEvents=!0,vjs.MediaTechController.call(this,a,b,c),this.setupTriggers();var d=b.source;d&&this.el_.currentSrc!==d.src&&(this.el_.src=d.src),vjs.TOUCH_ENABLED&&!1!==a.options().nativeControlsForTouch&&this.useNativeControls(),a.ready(function(){this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())}),this.triggerReady()}}),vjs.Html5.prototype.dispose=function(){vjs.Html5.disposeMediaElement(this.el_),vjs.MediaTechController.prototype.dispose.call(this)},vjs.Html5.prototype.createEl=function(){var a,b=this.player_,c=b.tag;c&&!1!==this.movingMediaElementInDOM||(c?(a=c.cloneNode(!1),vjs.Html5.disposeMediaElement(c),c=a,b.tag=null):(c=vjs.createEl("video"),vjs.setElementAttributes(c,vjs.obj.merge(b.tagAttributes||{},{id:b.id()+"_html5_api",class:"vjs-tech"}))),c.player=b,vjs.insertFirst(c,b.el()));for(var d=["autoplay","preload","loop","muted"],e=d.length-1;e>=0;e--){var f=d[e],g={};void 0!==b.options_[f]&&(g[f]=b.options_[f]),vjs.setElementAttributes(c,g)}return c},vjs.Html5.prototype.setupTriggers=function(){for(var a=vjs.Html5.Events.length-1;a>=0;a--)vjs.on(this.el_,vjs.Html5.Events[a],vjs.bind(this,this.eventHandler))},vjs.Html5.prototype.eventHandler=function(a){"error"==a.type&&this.error()?this.player().error(this.error().code):(a.bubbles=!1,this.player().trigger(a))},vjs.Html5.prototype.useNativeControls=function(){var a,b,c,d,e;a=this,b=this.player(),a.setControls(b.controls()),c=function(){a.setControls(!0)},d=function(){a.setControls(!1)},b.on("controlsenabled",c),b.on("controlsdisabled",d),e=function(){b.off("controlsenabled",c),b.off("controlsdisabled",d)},a.on("dispose",e),b.on("usingcustomcontrols",e),b.usingNativeControls(!0)},vjs.Html5.prototype.play=function(){this.el_.play()},vjs.Html5.prototype.pause=function(){this.el_.pause()},vjs.Html5.prototype.paused=function(){return this.el_.paused},vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime},vjs.Html5.prototype.setCurrentTime=function(a){try{this.el_.currentTime=a}catch(e){vjs.log(e,"Video is not ready. (Video.js)")}},vjs.Html5.prototype.duration=function(){return this.el_.duration||0},vjs.Html5.prototype.buffered=function(){return this.el_.buffered},vjs.Html5.prototype.volume=function(){return this.el_.volume},vjs.Html5.prototype.setVolume=function(a){this.el_.volume=a},vjs.Html5.prototype.muted=function(){return this.el_.muted},vjs.Html5.prototype.setMuted=function(a){this.el_.muted=a},vjs.Html5.prototype.width=function(){return this.el_.offsetWidth},vjs.Html5.prototype.height=function(){return this.el_.offsetHeight},vjs.Html5.prototype.supportsFullScreen=function(){return!("function"!=typeof this.el_.webkitEnterFullScreen||!/Android/.test(vjs.USER_AGENT)&&/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT))},vjs.Html5.prototype.enterFullScreen=function(){var a=this.el_;"webkitDisplayingFullscreen"in a&&this.one("webkitbeginfullscreen",vjs.bind(this,function(a){this.player_.isFullscreen(!0),this.one("webkitendfullscreen",vjs.bind(this,function(a){this.player_.isFullscreen(!1),this.player_.trigger("fullscreenchange")})),this.player_.trigger("fullscreenchange")})),a.paused&&a.networkState<=a.HAVE_METADATA?(this.el_.play(),setTimeout(function(){a.pause(),a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()},vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},vjs.Html5.prototype.src=function(a){if(void 0===a)return this.el_.src;this.el_.src=a},vjs.Html5.prototype.load=function(){this.el_.load()},vjs.Html5.prototype.currentSrc=function(){return this.el_.currentSrc},vjs.Html5.prototype.poster=function(){return this.el_.poster},vjs.Html5.prototype.setPoster=function(a){this.el_.poster=a},vjs.Html5.prototype.preload=function(){return this.el_.preload},vjs.Html5.prototype.setPreload=function(a){this.el_.preload=a},vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay},vjs.Html5.prototype.setAutoplay=function(a){this.el_.autoplay=a},vjs.Html5.prototype.controls=function(){return this.el_.controls},vjs.Html5.prototype.setControls=function(a){this.el_.controls=!!a},vjs.Html5.prototype.loop=function(){return this.el_.loop},vjs.Html5.prototype.setLoop=function(a){this.el_.loop=a},vjs.Html5.prototype.error=function(){return this.el_.error},vjs.Html5.prototype.seeking=function(){return this.el_.seeking},vjs.Html5.prototype.ended=function(){return this.el_.ended},vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},vjs.Html5.prototype.playbackRate=function(){return this.el_.playbackRate},vjs.Html5.prototype.setPlaybackRate=function(a){this.el_.playbackRate=a},vjs.Html5.prototype.networkState=function(){return this.el_.networkState},vjs.Html5.isSupported=function(){try{vjs.TEST_VID.volume=.5}catch(e){return!1}return!!vjs.TEST_VID.canPlayType},vjs.Html5.canPlaySource=function(a){try{return!!vjs.TEST_VID.canPlayType(a.type)}catch(e){return""}},vjs.Html5.canControlVolume=function(){var a=vjs.TEST_VID.volume;return vjs.TEST_VID.volume=a/2+.1,a!==vjs.TEST_VID.volume},vjs.Html5.canControlPlaybackRate=function(){var a=vjs.TEST_VID.playbackRate;return vjs.TEST_VID.playbackRate=a/2+.1,a!==vjs.TEST_VID.playbackRate},function(){var a,b=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,c=/^video\/mp4/i;vjs.Html5.patchCanPlayType=function(){vjs.ANDROID_VERSION>=4&&(a||(a=vjs.TEST_VID.constructor.prototype.canPlayType),vjs.TEST_VID.constructor.prototype.canPlayType=function(c){return c&&b.test(c)?"maybe":a.call(this,c)}),vjs.IS_OLD_ANDROID&&(a||(a=vjs.TEST_VID.constructor.prototype.canPlayType),vjs.TEST_VID.constructor.prototype.canPlayType=function(b){return b&&c.test(b)?"maybe":a.call(this,b)})},vjs.Html5.unpatchCanPlayType=function(){var b=vjs.TEST_VID.constructor.prototype.canPlayType;return vjs.TEST_VID.constructor.prototype.canPlayType=a,a=null,b},vjs.Html5.patchCanPlayType()}(),vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(","),vjs.Html5.disposeMediaElement=function(a){if(a){for(a.player=null,a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch(e){}}()}},vjs.Flash=vjs.MediaTechController.extend({init:function(a,b,c){vjs.MediaTechController.call(this,a,b,c);var d=b.source,e=b.parentEl,f=this.el_=vjs.createEl("div",{id:a.id()+"_temp_flash"}),g=a.id()+"_flash_api",h=a.options_,i=vjs.obj.merge({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:h.autoplay,preload:h.preload,loop:h.loop,muted:h.muted},b.flashVars),j=vjs.obj.merge({wmode:"opaque",bgcolor:"#000000"},b.params),k=vjs.obj.merge({id:g,name:g,class:"vjs-tech"},b.attributes);if(d)if(d.type&&vjs.Flash.isStreamingType(d.type)){var l=vjs.Flash.streamToParts(d.src);i.rtmpConnection=encodeURIComponent(l.connection),i.rtmpStream=encodeURIComponent(l.stream)}else i.src=encodeURIComponent(vjs.getAbsoluteURL(d.src));vjs.insertFirst(f,e),b.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(b.startTime)}),vjs.IS_FIREFOX&&this.ready(function(){vjs.on(this.el(),"mousemove",vjs.bind(this,function(){this.player().trigger({type:"mousemove",bubbles:!1})}))}),a.on("stageclick",a.reportUserActivity),this.el_=vjs.Flash.embed(b.swf,f,i,j,k)}}),vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Flash.prototype.play=function(){this.el_.vjs_play()},vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()},vjs.Flash.prototype.src=function(a){if(void 0===a)return this.currentSrc();if(vjs.Flash.isStreamingSrc(a)?(a=vjs.Flash.streamToParts(a),this.setRtmpConnection(a.connection),this.setRtmpStream(a.stream)):(a=vjs.getAbsoluteURL(a),this.el_.vjs_src(a)),this.player_.autoplay()){var b=this;setTimeout(function(){b.play()},0)}},vjs.Flash.prototype.setCurrentTime=function(a){this.lastSeekTarget_=a,this.el_.vjs_setProperty("currentTime",a),vjs.MediaTechController.prototype.setCurrentTime.call(this)},vjs.Flash.prototype.currentTime=function(a){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},vjs.Flash.prototype.currentSrc=function(){var a=this.el_.vjs_getProperty("currentSrc");if(null==a){var b=this.rtmpConnection(),c=this.rtmpStream();b&&c&&(a=vjs.Flash.streamFromParts(b,c))}return a},vjs.Flash.prototype.load=function(){this.el_.vjs_load()},vjs.Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")},vjs.Flash.prototype.setPoster=function(){},vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))},vjs.Flash.prototype.supportsFullScreen=function(){return!1},vjs.Flash.prototype.enterFullScreen=function(){return!1},function(){function a(a){var b=a.charAt(0).toUpperCase()+a.slice(1);d["set"+b]=function(b){return this.el_.vjs_setProperty(a,b)}}function b(a){d[a]=function(){return this.el_.vjs_getProperty(a)}}var c,d=vjs.Flash.prototype,e="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),f="error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(",");for(c=0;c<e.length;c++)b(e[c]),a(e[c]);for(c=0;c<f.length;c++)b(f[c])}(),vjs.Flash.isSupported=function(){return vjs.Flash.version()[0]>=10},vjs.Flash.canPlaySource=function(a){var b;return a.type?(b=a.type.replace(/;.*/,"").toLowerCase(),b in vjs.Flash.formats||b in vjs.Flash.streamingFormats?"maybe":void 0):""},vjs.Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},vjs.Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},vjs.Flash.onReady=function(a){var b,c;b=vjs.el(a),(c=b&&b.parentNode&&b.parentNode.player)&&(b.player=c,vjs.Flash.checkReady(c.tech))},vjs.Flash.checkReady=function(a){a.el()&&(a.el().vjs_getProperty?a.triggerReady():setTimeout(function(){vjs.Flash.checkReady(a)},50))},vjs.Flash.onEvent=function(a,b){vjs.el(a).player.trigger(b)},vjs.Flash.onError=function(a,b){var c=vjs.el(a).player,d="FLASH: "+b;"srcnotfound"==b?c.error({code:4,message:d}):c.error(d)},vjs.Flash.version=function(){var a="0,0,0";try{a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(b){}}return a.split(",")},vjs.Flash.embed=function(a,b,c,d,e){var f=vjs.Flash.getEmbedCode(a,c,d,e),g=vjs.createEl("div",{innerHTML:f}).childNodes[0],h=b.parentNode;b.parentNode.replaceChild(g,b);var i=h.childNodes[0];return setTimeout(function(){i.style.display="block"},1e3),g},vjs.Flash.getEmbedCode=function(a,b,c,d){var e="",f="",g="";return b&&vjs.obj.each(b,function(a,b){e+=a+"="+b+"&amp;"}),c=vjs.obj.merge({movie:a,flashvars:e,allowScriptAccess:"always",allowNetworking:"all"},c),vjs.obj.each(c,function(a,b){f+='<param name="'+a+'" value="'+b+'" />'}),d=vjs.obj.merge({data:a,width:"100%",height:"100%"},d),vjs.obj.each(d,function(a,b){g+=a+'="'+b+'" '}),'<object type="application/x-shockwave-flash"'+g+">"+f+"</object>"},vjs.Flash.streamFromParts=function(a,b){return a+"&"+b},vjs.Flash.streamToParts=function(a){var b={connection:"",stream:""};if(!a)return b;var c,d=a.indexOf("&");return-1!==d?c=d+1:0===(d=c=a.lastIndexOf("/")+1)&&(d=c=a.length),b.connection=a.substring(0,d),b.stream=a.substring(c,a.length),b},vjs.Flash.isStreamingType=function(a){return a in vjs.Flash.streamingFormats},vjs.Flash.RTMP_RE=/^rtmp[set]?:\/\//i,vjs.Flash.isStreamingSrc=function(a){return vjs.Flash.RTMP_RE.test(a)},vjs.MediaLoader=vjs.Component.extend({init:function(a,b,c){if(vjs.Component.call(this,a,b,c),a.options_.sources&&0!==a.options_.sources.length)a.src(a.options_.sources);else for(var d=0,e=a.options_.techOrder;d<e.length;d++){var f=vjs.capitalize(e[d]),g=window.videojs[f];if(g&&g.isSupported()){a.loadTech(f);break}}}}),vjs.Player.prototype.textTracks_,vjs.Player.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||[],this.textTracks_},vjs.Player.prototype.addTextTrack=function(a,b,c,d){var e=this.textTracks_=this.textTracks_||[];d=d||{},d.kind=a,d.label=b,d.language=c;var f=vjs.capitalize(a||"subtitles"),g=new window.videojs[f+"Track"](this,d);return e.push(g),g.dflt()&&this.ready(function(){setTimeout(function(){g.player().showTextTrack(g.id())},0)}),g},vjs.Player.prototype.addTextTracks=function(a){for(var b,c=0;c<a.length;c++)b=a[c],this.addTextTrack(b.kind,b.label,b.language,b);return this},vjs.Player.prototype.showTextTrack=function(a,b){for(var c,d,e,f=this.textTracks_,g=0,h=f.length;g<h;g++)c=f[g],c.id()===a?(c.show(),d=c):b&&c.kind()==b&&c.mode()>0&&c.disable();return e=d?d.kind():b||!1,e&&this.trigger(e+"trackchange"),this},vjs.TextTrack=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.id_=b.id||"vjs_"+b.kind+"_"+b.language+"_"+vjs.guid++,this.src_=b.src,this.dflt_=b.default||b.dflt,this.title_=b.title,this.language_=b.srclang,this.label_=b.label,this.cues_=[],this.activeCues_=[],this.readyState_=0,this.mode_=0}}),vjs.TextTrack.prototype.kind_,vjs.TextTrack.prototype.kind=function(){return this.kind_},vjs.TextTrack.prototype.src_,vjs.TextTrack.prototype.src=function(){return this.src_},vjs.TextTrack.prototype.dflt_,vjs.TextTrack.prototype.dflt=function(){return this.dflt_},vjs.TextTrack.prototype.title_,vjs.TextTrack.prototype.title=function(){return this.title_},vjs.TextTrack.prototype.language_,vjs.TextTrack.prototype.language=function(){return this.language_},vjs.TextTrack.prototype.label_,vjs.TextTrack.prototype.label=function(){return this.label_},vjs.TextTrack.prototype.cues_,vjs.TextTrack.prototype.cues=function(){return this.cues_},vjs.TextTrack.prototype.activeCues_,vjs.TextTrack.prototype.activeCues=function(){return this.activeCues_},vjs.TextTrack.prototype.readyState_,vjs.TextTrack.prototype.readyState=function(){return this.readyState_},vjs.TextTrack.prototype.mode_,vjs.TextTrack.prototype.mode=function(){return this.mode_},vjs.TextTrack.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-"+this.kind_+" vjs-text-track"})},vjs.TextTrack.prototype.show=function(){this.activate(),this.mode_=2,vjs.Component.prototype.show.call(this)},vjs.TextTrack.prototype.hide=function(){this.activate(),this.mode_=1,vjs.Component.prototype.hide.call(this)},vjs.TextTrack.prototype.disable=function(){2==this.mode_&&this.hide(),this.deactivate(),this.mode_=0},vjs.TextTrack.prototype.activate=function(){0===this.readyState_&&this.load(),0===this.mode_&&(this.player_.on("timeupdate",vjs.bind(this,this.update,this.id_)),this.player_.on("ended",vjs.bind(this,this.reset,this.id_)),"captions"!==this.kind_&&"subtitles"!==this.kind_||this.player_.getChild("textTrackDisplay").addChild(this))},vjs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",vjs.bind(this,this.update,this.id_)),this.player_.off("ended",vjs.bind(this,this.reset,this.id_)),this.reset(),this.player_.getChild("textTrackDisplay").removeChild(this)},vjs.TextTrack.prototype.load=function(){0===this.readyState_&&(this.readyState_=1,vjs.get(this.src_,vjs.bind(this,this.parseCues),vjs.bind(this,this.onError)))},vjs.TextTrack.prototype.onError=function(a){this.error=a,this.readyState_=3,this.trigger("error")},vjs.TextTrack.prototype.parseCues=function(a){for(var b,c,d,e,f=a.split("\n"),g="",h=1,i=f.length;h<i;h++)if(g=vjs.trim(f[h])){for(-1==g.indexOf("--\x3e")?(e=g,g=vjs.trim(f[++h])):e=this.cues_.length,b={id:e,index:this.cues_.length},c=g.split(/[\t ]+/),b.startTime=this.parseCueTime(c[0]),b.endTime=this.parseCueTime(c[2]),d=[];f[++h]&&(g=vjs.trim(f[h]));)d.push(g);b.text=d.join("<br/>"),this.cues_.push(b)}this.readyState_=2,this.trigger("loaded")},vjs.TextTrack.prototype.parseCueTime=function(a){var b,c,d,e,f,g=a.split(":"),h=0;return 3==g.length?(b=g[0],c=g[1],d=g[2]):(b=0,c=g[0],d=g[1]),d=d.split(/\s+/),e=d.splice(0,1)[0],e=e.split(/\.|,/),f=parseFloat(e[1]),e=e[0],h+=3600*parseFloat(b),h+=60*parseFloat(c),h+=parseFloat(e),f&&(h+=f/1e3),h},vjs.TextTrack.prototype.update=function(){if(this.cues_.length>0){var a=this.player_.options().trackTimeOffset||0,b=this.player_.currentTime()+a;if(void 0===this.prevChange||b<this.prevChange||this.nextChange<=b){var c,d,e,f,g=this.cues_,h=this.player_.duration(),i=0,j=!1,k=[];for(b>=this.nextChange||void 0===this.nextChange?f=void 0!==this.firstActiveIndex?this.firstActiveIndex:0:(j=!0,f=void 0!==this.lastActiveIndex?this.lastActiveIndex:g.length-1);;){if(e=g[f],e.endTime<=b)i=Math.max(i,e.endTime),e.active&&(e.active=!1);else if(b<e.startTime){if(h=Math.min(h,e.startTime),e.active&&(e.active=!1),!j)break}else j?(k.splice(0,0,e),void 0===d&&(d=f),c=f):(k.push(e),void 0===c&&(c=f),d=f),h=Math.min(h,e.endTime),i=Math.max(i,e.startTime),e.active=!0;if(j){if(0===f)break;f--}else{if(f===g.length-1)break;f++}}this.activeCues_=k,this.nextChange=h,this.prevChange=i,this.firstActiveIndex=c,this.lastActiveIndex=d,this.updateDisplay(),this.trigger("cuechange")}}},vjs.TextTrack.prototype.updateDisplay=function(){for(var a=this.activeCues_,b="",c=0,d=a.length;c<d;c++)b+='<span class="vjs-tt-cue">'+a[c].text+"</span>";this.el_.innerHTML=b},vjs.TextTrack.prototype.reset=function(){this.nextChange=0,this.prevChange=this.player_.duration(),this.firstActiveIndex=0,this.lastActiveIndex=0},vjs.CaptionsTrack=vjs.TextTrack.extend(),vjs.CaptionsTrack.prototype.kind_="captions",vjs.SubtitlesTrack=vjs.TextTrack.extend(),vjs.SubtitlesTrack.prototype.kind_="subtitles",vjs.ChaptersTrack=vjs.TextTrack.extend(),vjs.ChaptersTrack.prototype.kind_="chapters",vjs.TextTrackDisplay=vjs.Component.extend({init:function(a,b,c){vjs.Component.call(this,a,b,c),a.options_.tracks&&a.options_.tracks.length>0&&this.player_.addTextTracks(a.options_.tracks)}}),vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})},vjs.TextTrackMenuItem=vjs.MenuItem.extend({init:function(a,b){var c=this.track=b.track;b.label=c.label(),b.selected=c.dflt(),vjs.MenuItem.call(this,a,b),this.player_.on(c.kind()+"trackchange",vjs.bind(this,this.update))}}),vjs.TextTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.showTextTrack(this.track.id_,this.track.kind())},vjs.TextTrackMenuItem.prototype.update=function(){this.selected(2==this.track.mode())},vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(a,b){b.track={kind:function(){return b.kind},player:a,label:function(){return b.kind+" off"},dflt:function(){return!1},mode:function(){return!1}},vjs.TextTrackMenuItem.call(this,a,b),this.selected(!0)}}),vjs.OffTextTrackMenuItem.prototype.onClick=function(){vjs.TextTrackMenuItem.prototype.onClick.call(this),this.player_.showTextTrack(this.track.id_,this.track.kind())},vjs.OffTextTrackMenuItem.prototype.update=function(){for(var a,b=this.player_.textTracks(),c=0,d=b.length,e=!0;c<d;c++)a=b[c],a.kind()==this.track.kind()&&2==a.mode()&&(e=!1);this.selected(e)},vjs.TextTrackButton=vjs.MenuButton.extend({init:function(a,b){vjs.MenuButton.call(this,a,b),this.items.length<=1&&this.hide()}}),vjs.TextTrackButton.prototype.createItems=function(){var a,b=[];b.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_}));for(var c=0;c<this.player_.textTracks().length;c++)a=this.player_.textTracks()[c],a.kind()===this.kind_&&b.push(new vjs.TextTrackMenuItem(this.player_,{track:a}));return b},vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(a,b,c){vjs.TextTrackButton.call(this,a,b,c),this.el_.setAttribute("aria-label","Captions Menu")}}),vjs.CaptionsButton.prototype.kind_="captions",vjs.CaptionsButton.prototype.buttonText="Captions",vjs.CaptionsButton.prototype.className="vjs-captions-button",vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(a,b,c){vjs.TextTrackButton.call(this,a,b,c),this.el_.setAttribute("aria-label","Subtitles Menu")}}),vjs.SubtitlesButton.prototype.kind_="subtitles",vjs.SubtitlesButton.prototype.buttonText="Subtitles",vjs.SubtitlesButton.prototype.className="vjs-subtitles-button",vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(a,b,c){vjs.TextTrackButton.call(this,a,b,c),this.el_.setAttribute("aria-label","Chapters Menu")}}),vjs.ChaptersButton.prototype.kind_="chapters",vjs.ChaptersButton.prototype.buttonText="Chapters",vjs.ChaptersButton.prototype.className="vjs-chapters-button",vjs.ChaptersButton.prototype.createItems=function(){for(var a,b=[],c=0;c<this.player_.textTracks().length;c++)a=this.player_.textTracks()[c],a.kind()===this.kind_&&b.push(new vjs.TextTrackMenuItem(this.player_,{track:a}));return b},vjs.ChaptersButton.prototype.createMenu=function(){for(var a,b,c=this.player_.textTracks(),d=0,e=c.length,f=this.items=[];d<e;d++)if(a=c[d],a.kind()==this.kind_){if(0!==a.readyState()){b=a;break}a.load(),a.on("loaded",vjs.bind(this,this.createMenu))}var g=this.menu;if(void 0===g&&(g=new vjs.Menu(this.player_),g.contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1}))),b){var h,i,j=b.cues_;for(d=0,e=j.length;d<e;d++)h=j[d],i=new vjs.ChaptersTrackMenuItem(this.player_,{track:b,cue:h}),f.push(i),g.addChild(i);this.addChild(g)}return this.items.length>0&&this.show(),g},vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(a,b){var c=this.track=b.track,d=this.cue=b.cue,e=a.currentTime();b.label=d.text,b.selected=d.startTime<=e&&e<d.endTime,vjs.MenuItem.call(this,a,b),c.on("cuechange",vjs.bind(this,this.update))}}),vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},vjs.ChaptersTrackMenuItem.prototype.update=function(){var a=this.cue,b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)},vjs.obj.merge(vjs.ControlBar.prototype.options_.children,{subtitlesButton:{},captionsButton:{},chaptersButton:{}}),vjs.JSON,void 0!==window.JSON&&"function"===window.JSON.parse)vjs.JSON=window.JSON;else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vjs.autoSetup=function(){var a,b,c,d=document.getElementsByTagName("video"),e=document.getElementsByTagName("audio"),f=[];if(d&&d.length>0)for(b=0,c=d.length;b<c;b++)f.push(d[b]);if(e&&e.length>0)for(b=0,c=e.length;b<c;b++)f.push(e[b]);if(f&&f.length>0)for(b=0,c=f.length;b<c;b++){if(!(a=f[b])||!a.getAttribute){vjs.autoSetupTimeout(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&videojs(a)}else vjs.windowLoaded||vjs.autoSetupTimeout(1)},vjs.autoSetupTimeout=function(a){setTimeout(vjs.autoSetup,a)},"complete"===document.readyState?vjs.windowLoaded=!0:vjs.one(window,"load",function(){vjs.windowLoaded=!0}),vjs.autoSetupTimeout(1),vjs.plugin=function(a,b){vjs.Player.prototype[a]=b},function(){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!0):a.attachEvent(b,c)}function b(a,b){if(void 0===a)return!1;var c="innerText"in a?"innerText":"textContent";try{a[c]=b}catch(d){a.setAttribute("innerText",b)}}videojs.Youtube=videojs.MediaTechController.extend({init:function(a,c,d){if(this.featuresProgressEvents=!1,this.featuresTimeupdateEvents=!1,videojs.MediaTechController.call(this,a,c,d),this.isIos=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),this.isAndroid=/(Android)/g.test(navigator.userAgent),this.playVideoIsAllowed=!(this.isIos||this.isAndroid),void 0!==c.source)for(var e in c.source)c.source.hasOwnProperty(e)&&(a.options()[e]=c.source[e]);this.userQuality=videojs.Youtube.convertQualityName(a.options().quality),this.player_=a,this.playerEl_=document.getElementById(a.id()),this.playerEl_.className+=" vjs-youtube",this.qualityButton=document.createElement("div"),this.qualityButton.setAttribute("class","vjs-quality-button vjs-menu-button vjs-control"),this.qualityButton.setAttribute("tabindex",0);var f=document.createElement("div");this.qualityButton.appendChild(f),this.qualityTitle=document.createElement("span"),f.appendChild(this.qualityTitle),"undefined"!==a.options().quality&&b(this.qualityTitle,a.options().quality||"auto");var g=document.createElement("div");if(g.setAttribute("class","vjs-menu"),this.qualityButton.appendChild(g),this.qualityMenuContent=document.createElement("ul"),this.qualityMenuContent.setAttribute("class","vjs-menu-content"),g.appendChild(this.qualityMenuContent),this.id_=this.player_.id()+"_youtube_api",this.el_=videojs.Component.prototype.createEl("iframe",{id:this.id_,className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0}),this.el_.setAttribute("allowFullScreen",""),this.playerEl_.insertBefore(this.el_,this.playerEl_.firstChild),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var h=Number(RegExp.$1);this.addIframeBlocker(h)}else/(iPad|iPhone|iPod|Android)/gi.test(navigator.userAgent)||(this.el_.className+=" onDesktop",this.addIframeBlocker());this.parseSrc(a.options().src),this.playOnReady=this.player_.options().autoplay||!1,this.forceSSL=!(void 0!==this.player_.options().forceSSL&&!0!==this.player_.options().forceSSL),this.forceHTML5=!(void 0!==this.player_.options().forceHTML5&&!0!==this.player_.options().forceHTML5),this.updateIframeSrc();var i=this;a.ready(function(){i.playerEl_.querySelectorAll(".vjs-control-bar")[0].appendChild(i.qualityButton),i.playOnReady&&(void 0!==i.player_.loadingSpinner&&i.player_.loadingSpinner.show(),void 0!==i.player_.bigPlayButton&&i.player_.bigPlayButton.hide()),a.trigger("loadstart")}),this.on("dispose",function(){this.ytplayer&&this.ytplayer.destroy(),this.player_.options().ytcontrols||this.player_.off("waiting",this.bindedWaiting),this.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="none",this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.qualityButton.parentNode&&this.qualityButton.parentNode.removeChild(this.qualityButton),void 0!==this.player_.loadingSpinner&&this.player_.loadingSpinner.hide(),void 0!==this.player_.bigPlayButton&&this.player_.bigPlayButton.hide(),this.iframeblocker&&this.playerEl_.removeChild(this.iframeblocker)})}}),videojs.Youtube.prototype.updateIframeSrc=function(){var a={enablejsapi:1,iv_load_policy:3,playerapiid:this.id(),disablekb:1,wmode:"transparent",controls:this.player_.options().ytcontrols?1:0,html5:this.player_.options().forceHTML5?1:null,playsinline:this.player_.options().playsInline?1:0,showinfo:0,rel:0,autoplay:this.playOnReady?1:0,loop:this.player_.options().loop?1:0,list:this.playlistId,vq:this.userQuality,origin:window.location.protocol+"//"+window.location.host};"file:"===window.location.protocol&&delete a.origin;for(var b in a)!a.hasOwnProperty(b)||void 0!==a[b]&&null!==a[b]||delete a[b];var c=this;if(null===this.videoId)this.el_.src="about:blank",setTimeout(function(){c.triggerReady()
},500);else if(this.el_.src=(this.forceSSL||"file:"===window.location.protocol?"https:":window.location.protocol)+"//www.youtube.com/embed/"+this.videoId+"?"+videojs.Youtube.makeQueryString(a),this.player_.options().ytcontrols?this.player_.controls(!1):void 0===this.player_.poster()&&setTimeout(function(){var a=c.playerEl_.querySelectorAll(".vjs-poster")[0];a.style.backgroundImage="url(https://img.youtube.com/vi/"+c.videoId+"/0.jpg)",a.style.display=""},100),this.bindedWaiting=function(){c.onWaiting()},this.player_.on("waiting",this.bindedWaiting),videojs.Youtube.apiReady)this.loadYoutube();else if(videojs.Youtube.loadingQueue.push(this),!videojs.Youtube.apiLoading){var d=document.createElement("script");d.onerror=function(a){c.onError(a)},d.src=this.forceSSL||"file:"===window.location.protocol?"https://www.youtube.com/iframe_api":"//www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e),videojs.Youtube.apiLoading=!0}},videojs.Youtube.prototype.onWaiting=function(){this.player_.bigPlayButton.hide()},videojs.Youtube.prototype.addIframeBlocker=function(b){this.iframeblocker=videojs.Component.prototype.createEl("div"),this.iframeblocker.className="iframeblocker",this.iframeblocker.style.position="absolute",this.iframeblocker.style.left=0,this.iframeblocker.style.right=0,this.iframeblocker.style.top=0,this.iframeblocker.style.bottom=0,this.iframeblocker.style.zIndex=9999,b&&b<9?this.iframeblocker.style.opacity=.01:this.iframeblocker.style.background="rgba(255, 255, 255, 0.01)";var c=this;a(this.iframeblocker,"mousemove",function(a){c.player_.userActive()||c.player_.userActive(!0),a.stopPropagation(),a.preventDefault()}),a(this.iframeblocker,"click",function(){c.paused()?c.play():c.pause()}),this.playerEl_.insertBefore(this.iframeblocker,this.el_.nextSibling)},videojs.Youtube.prototype.parseSrc=function(a){if(this.srcVal=a,a){var c=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,d=a.match(c);d&&11===d[2].length?this.videoId=d[2]:this.videoId=null;var e=/[?&]list=([^#\&\?]+)/;d=a.match(e),null!==d&&d.length>1?this.playlistId=d[1]:this.playlistId&&delete this.playlistId;var f=/[?&]vq=([^#\&\?]+)/;d=a.match(f),null!==d&&d.length>1&&(this.userQuality=d[1],b(this.qualityTitle,videojs.Youtube.parseQualityName(this.userQuality)))}},videojs.Youtube.prototype.src=function(a){if(void 0!==a){if(this.parseSrc(a),"about:blank"===this.el_.src)return void this.updateIframeSrc();delete this.defaultQuality,null!==this.videoId&&(this.player_.options().autoplay&&this.playVideoIsAllowed?this.ytplayer.loadVideoById({videoId:this.videoId,suggestedQuality:this.userQuality}):this.ytplayer.cueVideoById({videoId:this.videoId,suggestedQuality:this.userQuality}),this.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="url(https://img.youtube.com/vi/"+this.videoId+"/0.jpg)",this.player_.poster("https://img.youtube.com/vi/"+this.videoId+"/0.jpg"))}return this.srcVal},videojs.Youtube.prototype.load=function(){},videojs.Youtube.prototype.play=function(){null!==this.videoId&&(this.player_.options().ytcontrols||this.player_.trigger("waiting"),this.isReady_?(this.ytplayer.setVolume(100*this.player_.volume()),this.volumeVal>0?this.ytplayer.unMute():this.ytplayer.mute(),this.playVideoIsAllowed&&this.ytplayer.playVideo()):this.playOnReady=!0)},videojs.Youtube.prototype.pause=function(){this.ytplayer.pauseVideo()},videojs.Youtube.prototype.paused=function(){return!this.ytplayer||this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING},videojs.Youtube.prototype.currentTime=function(){return this.ytplayer&&this.ytplayer.getCurrentTime?this.ytplayer.getCurrentTime():0},videojs.Youtube.prototype.setCurrentTime=function(a){this.ytplayer.seekTo(a,!0),this.player_.trigger("timeupdate")},videojs.Youtube.prototype.duration=function(){return this.ytplayer&&this.ytplayer.getDuration?this.ytplayer.getDuration():0},videojs.Youtube.prototype.currentSrc=function(){return this.srcVal},videojs.Youtube.prototype.ended=function(){return!!this.ytplayer&&this.lastState===YT.PlayerState.ENDED},videojs.Youtube.prototype.volume=function(){return this.ytplayer&&isNaN(this.volumeVal)&&(this.volumeVal=this.ytplayer.getVolume()/100,this.player_.volume(this.volumeVal)),this.volumeVal},videojs.Youtube.prototype.setVolume=function(a){void 0!==a&&a!==this.volumeVal&&(this.ytplayer.setVolume(100*a),this.volumeVal=a,this.player_.trigger("volumechange"))},videojs.Youtube.prototype.muted=function(){return this.mutedVal},videojs.Youtube.prototype.setMuted=function(a){a?(this.storedVolume=this.volumeVal,this.ytplayer.mute(),this.player_.volume(0)):(this.ytplayer.unMute(),this.player_.volume(this.storedVolume)),this.mutedVal=a,this.player_.trigger("volumechange")},videojs.Youtube.prototype.buffered=function(){if(this.ytplayer&&this.ytplayer.getVideoBytesLoaded){var a=this.ytplayer.getVideoBytesLoaded(),b=this.ytplayer.getVideoBytesTotal();if(!a||!b)return 0;var c=this.ytplayer.getDuration(),d=a/b*c,e=this.ytplayer.getVideoStartBytes()/b*c;return videojs.createTimeRange(e,e+d)}return videojs.createTimeRange(0,0)},videojs.Youtube.prototype.supportsFullScreen=function(){return!("function"!=typeof this.el_.webkitEnterFullScreen||!/Android/.test(videojs.USER_AGENT)&&/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT))},videojs.Youtube.isSupported=function(){return!0},videojs.Youtube.canPlaySource=function(a){return"video/youtube"===a.type},videojs.Youtube.canControlVolume=function(){return!0},videojs.Youtube.loadingQueue=[],videojs.Youtube.prototype.loadYoutube=function(){this.ytplayer=new YT.Player(this.id_,{events:{onReady:function(a){a.target.vjsTech.onReady()},onStateChange:function(a){a.target.vjsTech.onStateChange(a.data)},onPlaybackQualityChange:function(a){a.target.vjsTech.onPlaybackQualityChange(a.data)},onError:function(a){a.target.vjsTech.onError(a.data)}}}),this.ytplayer.vjsTech=this},videojs.Youtube.makeQueryString=function(a){var b=["modestbranding=1"];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")},window.onYouTubeIframeAPIReady=function(){for(var a;a=videojs.Youtube.loadingQueue.shift();)a.loadYoutube();videojs.Youtube.loadingQueue=[],videojs.Youtube.apiReady=!0},videojs.Youtube.prototype.onReady=function(){this.isReady_=!0,this.triggerReady(),this.player_.trigger("loadedmetadata"),this.player_.trigger("durationchange"),this.player_.trigger("timeupdate"),this.player_.options().muted&&this.setMuted(!0),this.playOnReady&&(this.playOnReady=!1,this.play())},videojs.Youtube.prototype.updateQualities=function(){function c(c){a(c,"click",function(){var a=this.getAttribute("data-val");e.ytplayer.setPlaybackQuality(a),e.userQuality=a,b(e.qualityTitle,videojs.Youtube.parseQualityName(a));var c=e.qualityMenuContent.querySelector(".vjs-selected");c&&videojs.Youtube.removeClass(c,"vjs-selected"),videojs.Youtube.addClass(this,"vjs-selected")})}var d=this.ytplayer.getAvailableQualityLevels(),e=this;if(d.indexOf(this.userQuality)<0&&b(e.qualityTitle,videojs.Youtube.parseQualityName(this.defaultQuality)),0===d.length)this.qualityButton.style.display="none";else{for(this.qualityButton.style.display="";this.qualityMenuContent.hasChildNodes();)this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild);for(var f=0;f<d.length;++f){var g=document.createElement("li");g.setAttribute("class","vjs-menu-item"),b(g,videojs.Youtube.parseQualityName(d[f])),g.setAttribute("data-val",d[f]),d[f]===this.quality&&videojs.Youtube.addClass(g,"vjs-selected"),c(g),this.qualityMenuContent.appendChild(g)}}},videojs.Youtube.prototype.onStateChange=function(a){if(a!==this.lastState){switch(a){case-1:this.player_.trigger("durationchange");break;case YT.PlayerState.ENDED:this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display="block",void 0!==this.player_.bigPlayButton&&this.player_.bigPlayButton.show(),this.player_.trigger("ended");break;case YT.PlayerState.PLAYING:this.playVideoIsAllowed=!0,this.updateQualities(),this.player_.trigger("timeupdate"),this.player_.trigger("durationchange"),this.player_.trigger("playing"),this.player_.trigger("play");break;case YT.PlayerState.PAUSED:this.player_.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting");break;case YT.PlayerState.CUED:}this.lastState=a}},videojs.Youtube.convertQualityName=function(a){switch(a){case"144p":return"tiny";case"240p":return"small";case"360p":return"medium";case"480p":return"large";case"720p":return"hd720";case"1080p":return"hd1080"}return"auto"},videojs.Youtube.parseQualityName=function(a){switch(a){case"tiny":return"144p";case"small":return"240p";case"medium":return"360p";case"large":return"480p";case"hd720":return"720p";case"hd1080":return"1080p"}return"auto"},videojs.Youtube.prototype.onPlaybackQualityChange=function(a){if(void 0!==this.defaultQuality||(this.defaultQuality=a,void 0===this.userQuality)){switch(this.quality=a,b(this.qualityTitle,videojs.Youtube.parseQualityName(a)),a){case"medium":this.player_.videoWidth=480,this.player_.videoHeight=360;break;case"large":this.player_.videoWidth=640,this.player_.videoHeight=480;break;case"hd720":this.player_.videoWidth=960,this.player_.videoHeight=720;break;case"hd1080":this.player_.videoWidth=1440,this.player_.videoHeight=1080;break;case"highres":this.player_.videoWidth=1920,this.player_.videoHeight=1080;break;case"small":this.player_.videoWidth=320,this.player_.videoHeight=240;break;case"tiny":this.player_.videoWidth=144,this.player_.videoHeight=108;break;default:this.player_.videoWidth=0,this.player_.videoHeight=0}this.player_.trigger("ratechange")}},videojs.Youtube.prototype.onError=function(a){this.player_.error(a),100!==a&&101!==a&&150!==a||(this.player_.bigPlayButton.hide(),this.player_.loadingSpinner.hide())},videojs.Youtube.addClass=function(a,b){-1===(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className=""===a.className?b:a.className+" "+b)},videojs.Youtube.removeClass=function(a,b){var c,d;if(-1!==a.className.indexOf(b)){for(c=a.className.split(" "),d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);a.className=c.join(" ")}};var c=document.createElement("style"),d=" .vjs-youtube .vjs-poster { background-size: 100%!important; }.vjs-youtube .vjs-poster, .vjs-youtube .vjs-loading-spinner, .vjs-youtube .vjs-big-play-button, .vjs-youtube .vjs-text-track-display{ pointer-events: none !important; }.vjs-youtube.vjs-user-active .iframeblocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-tech.onDesktop { pointer-events: none; }.vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }";c.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(c),c.styleSheet?c.styleSheet.cssText=d:c.appendChild(document.createTextNode(d)),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1})}(),define("vjs_youtube",["jquery","vjs"],function(a){return function(){var b;return b||a.vjs_youtube}}(this)),define("c_014",["jquery","logger","underscore","storageManager","modal","c_080","customSelect","disclaimers","scrollLock","vjs","vjs_youtube"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(c){this.settings=a.extend({},n,c),this.$body=a("body"),this.$root=a(this.settings.selectors.component),this.$link=this.$root.find("a"),this.$button=this.$root.find("button"),this.iqiyiVideoUrl="",this.$youtubeLightbox="",this.$iqiyiLightbox="",this.youtubeLightboxTemplate="",this.iqiyiLightboxTemplate="",this.mobileCheck=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.progressFlags={first:!1,middle:!1,almost:!1,done:!1},this.log=new b({prefix:"c_014 c_028-5"}),this.init()}var l,m,n={selectors:{component:".c_014",loginLink:".c_080 .log-in-link a",signupLink:".c_080 .sign-up-link a",signupLoginComponent:".c_080",iframe:".signup-login iframe",iqiyiVideo:"#video"},events:{changeTab:"click.c_080",touchend:"touchend",iqiyiClick:"click.c_028-5"},classes:{modalContainer:"signup-login",ajaxLoading:"ajax-btn-loading"},state:{login:"login",register:"register",video:"video"},currentState:"",target:"",modal:"",youtubeLightboxSelect:".youtube_lightbox",iqiyiLightboxSelect:".iqiyi_lightbox",closeSelect:".close, .veil",videojs:".video-js",videoPlayerMask:".video-player-mask",progressBar:".vjs-progress-holder",videoDefaults:{techOrder:["youtube"],forceSSL:!0,forceHTML5:!0,playsInline:!0,allowsInlineMediaPlayback:!0},personalisationEventName:"adobe.personalisation",iqiyiConfig:{chainAutoPlay:0,autoplay:0}};return k.prototype.init=function(){if(!this.$root.length)return!1;this.initModal(),this.bindEvents()},k.prototype.initModal=function(){this.settings.modal=new e({customClass:this.settings.classes.modalContainer,iframe:!0})},k.prototype.togglePlay=function(){m.paused()?m.play():m.pause()},k.prototype.restrictFocus=function(b){var c;m.userActive(!0),a(b.target).closest(this.settings.youtubeLightboxSelect).length||(c=a("div.vjs-big-play-button"),c.is(":visible")?c.focus():a("div.vjs-playing").focus())},k.prototype.keyboardHandler=function(a){switch(a.keyCode){case 9:this.restrictFocus(a);break;case 27:this.closeVideo();break;case 32:this.togglePlay()}},k.prototype.detachKeyboardHandler=function(){a(document).unbind("keyup",this.keyboardHandler.bind(this))},k.prototype.closeVideo=function(){this.$youtubeLightbox&&(this.videoAnalyticsTracking(l,"close"),this.$youtubeLightbox.css("display","none")),m&&(m.pause(),m.dispose(),m=null),this.$youtubeLightbox&&(this.$youtubeLightbox.remove(),this.$youtubeLightbox=null,this.detachKeyboardHandler(),i.enableGlobalScrolling()),this.progressFlags={first:!1,middle:!1,almost:!1,done:!1}},k.prototype.appendVideoContainer=function(){return i.disableGlobalScrolling(),a(this.youtubeLightboxTemplate).appendTo(this.$body).on("click",this.settings.closeSelect,function(){return this.$youtubeLightbox=this.$youtubeLightbox||a(this.settings.youtubeLightboxSelect),this.closeVideo(),!1}.bind(this))},k.prototype.attachKeyboardHandler=function(){a(document).keyup(this.keyboardHandler.bind(this))},k.prototype.progressBinding=function(a){var b=a.currentTime()/a.duration()*100;b>=25&&b<50&&!this.progressFlags.first?(this.videoAnalyticsTracking(l,"25%"),this.progressFlags.first=!0):b>=50&&b<75&&!this.progressFlags.middle?(this.videoAnalyticsTracking(l,"50%"),this.progressFlags.middle=!0):b>=75&&b<99&&!this.progressFlags.almost?(this.videoAnalyticsTracking(l,"75%"),this.progressFlags.almost=!0):b>=90&&!this.progressFlags.done&&(this.videoAnalyticsTracking(l,"complete"),this.progressFlags.done=!0)},k.prototype.runYoutube=function(a,b){j("video-placeholder",b,function(){m=this,a.mobileCheck&&m.loadingSpinner.hide(),m.on("play",function(){m.bigPlayButton.hide(),m.loadingSpinner.hide(),a.videoAnalyticsTracking(l,"play"),a.progressBinding(m)}),m.on("timeupdate",function(){a.progressBinding(m)}),m.on("pause",function(){m.bigPlayButton.show(),m.loadingSpinner.hide(),a.videoAnalyticsTracking(l,"pause")}),m.on("ended",function(){m.bigPlayButton.show(),m.currentTime(0),m.pause()}),h.renderDisclaimers(a.$youtubeLightbox)})},k.prototype.showVideo=function(b,c){var d=a.extend({},this.settings.videoDefaults,{src:"http://www.youtube.com/watch?v="+c});return b.preventDefault(),this.closeVideo(),this.$youtubeLightbox=this.appendVideoContainer(),this.attachKeyboardHandler(),this.runYoutube(this,d),this.$body.on(this.settings.personalisationEventName,function(){carousel.reInit($carouselElem,settings)}),a("video").on("contextmenu",function(a){a.preventDefault()}),!1},k.prototype.videoAnalyticsTracking=function(a,b){var c={componentId:"C36_Video_Gallery",videoName:a,videoInteraction:b};this.settings.analyticsManager.tag("videoInteraction",c)},k.prototype.trackActualVideo=function(b){return a(b.currentTarget).parent().parent().parent().find('meta[itemprop="name"]').attr("content")},k.prototype.trackIqiyiVideo=function(b){return a(b.currentTarget).data("embedurl")},k.prototype.closeIqiyiVideo=function(){this.$iqiyiLightbox&&(this.$iqiyiLightbox.remove(),this.$iqiyiLightbox=null,i.enableGlobalScrolling())},k.prototype.closeIqiyiPlayer=function(){this.$iqiyiLightbox=this.$iqiyiLightbox||a(this.settings.iqiyiLightboxSelect),this.closeIqiyiVideo()},k.prototype.appendIqiyiVideoContainer=function(){return this.iqiyiLightboxTemplate=a("#lb_template_"+this.settings.iqiyiConfig.tvid).html(),i.disableGlobalScrolling(),a(this.iqiyiLightboxTemplate).appendTo(this.$body).on(this.settings.events.iqiyiClick,this.settings.selectors.close,this.closeIqiyiPlayer.bind(this))},k.prototype.initIqiyiPlayer=function(b){var c,e=a(b.currentTarget);this.iqiyiVideoUrl=this.trackIqiyiVideo(b),this.settings.iqiyiConfig={accessToken:d.loadItem("c28_5_access_token"),vid:e.data("vid"),tvid:e.data("tvid"),autoplay:e.data("autoplay")?1:0,loop:e.data("loop")?1:0},c=a('<iframe src="'+this.iqiyiVideoUrl+"?vid="+this.settings.iqiyiConfig.vid+"&tvId="+this.settings.iqiyiConfig.tvid+"&accessToken="+this.settings.iqiyiConfig.accessToken+"&autoplay="+this.settings.iqiyiConfig.autoplay+"&chainAutoplay="+this.settings.iqiyiConfig.loop+'&bd=1&showRecommend=0" frameborder="0" width="100%" height="100%" allowfullscreen="true"></iframe>'),this.$iqiyiLightbox=this.appendIqiyiVideoContainer(),a(this.settings.selectors.iqiyiVideo).append(c)},k.prototype.getAuthInstance=function(b){if(a.isNestedProp(this.settings.HELIOS,["config","common","api","scripts","iqiyi","url"]))return b.HELIOS.config.common.api.scripts.iqiyi.url},k.prototype.getAccessToken=function(b,c){return a.ajax({url:b,data:{client_id:c.data("client-id"),client_secret:c.data("client-secret")}})},k.prototype.iqiyiError=function(){this.log.warn("iQIYI authorisation has failed")},k.prototype.iqiyiSuccess=function(b,c){var e;try{e=JSON.parse(b)}catch(e){throw this.log.error("Cannot parse the iQIYI JSON response"),new error("Cannot parse the iQIYI JSON response")}a.isNestedProp(e,["data","expires_in"])?(d.init(),d.saveItem("c28_5_expires_in",e.data.expires_in),d.saveItem("c28_5_access_token",e.data.access_token),this.authorizeIqiyi(c)):this.log.warn("iQIYI response returned malformed data")},k.prototype.authorizeIqiyi=function(a,b){var c=d.loadItem("c28_5_expires_in");(!c||c<0)&&this.getAccessToken(a,b).done(function(b){this.iqiyiSuccess(b,a)}.bind(this)).fail(function(){this.iqiyiError()}.bind(this))},k.prototype.bindEvents=function(){var b,c,d;this.$button.off("click").on("click",function(e){if(e.preventDefault(),e.stopPropagation(),this.settings.currentState=a(e.target).data("state"),this.settings.currentState===this.settings.state.login||this.settings.currentState===this.settings.state.register)this.openModal(e.target,this.settings.currentState);else if(this.settings.currentState===this.settings.state.video){if(b=a(e.target).data("vid"),c=a(e.target).data("tvid"),!b||!c)return l=this.trackActualVideo(e),this.youtubeLightboxTemplate=a("#lb_template_"+b).html(),this.showVideo(e,b);d=this.getAuthInstance(this.settings),this.authorizeIqiyi(d,a(e.target)),this.initIqiyiPlayer(e)}}.bind(this)),this.$link.on("click",function(a){this.handleClick(a.target)}.bind(this))},k.prototype.handleClick=function(b){var c=b,d=a(c),e=d.attr("href")||window.location.href,f=d.text(),g=this.settings.analyticsManager.trackingVars.genericClick,h=this.settings.analyticsManager.getTrackingObjectProperties(g),i={};i[h.componentId]="C14_Rich_Content_header",i[h.destination]=e,i[h.locationInPage]="content-header",i[h.buttonText]=f,this.settings.analyticsManager.track(g,i)},k.prototype.openModal=function(b,c){this.settings.target=a(b).data("target"),this.settings.modal.open(this.settings.target+"#"+c)},k}),define("c_015",["jquery","contentCarousel"],function(a,b){"use strict";var c=function(a,b){this.settings=this.initSettings(b),this.$el=a,this.setRTL(),this.initGallery()};return c.prototype.initSettings=function(b){var c={selectors:{html:"html",carousel:".carousel",slide:".carousel-slide",slideInOverlay:".slide-in-overlay",carouselCounter:".carousel-counter",carouselCaption:".carousel-caption",carouselDescription:".carousel-item-description",first:":first"},classes:{active:"active"},slick:{cssEase:"ease-in-out",speed:400,infinite:!0,rtl:!1,slidesToShow:1,slidesToScroll:1,adaptativeHeight:!0,onInit:this.onInitSlide.bind(this),onBeforeChange:this.slickBeforeChange.bind(this),onAfterChange:this.slickAfterChange.bind(this)},attributes:{dir:"dir",rtl:"rtl"},analyticsObject:{componentId:"C15_Image_Gallery",carouselType:"normal",interactionType:"grade slider",itemNumber:""},interaction:"carouselInteraction",activeClass:"active",singleItem:!0,slideSpeed:300,paginationSpeed:400,focusOnCTA:!0};return a.extend({},c,b)},c.prototype.setRTL=function(){this.isRTL()&&(this.settings.slick.rtl=!0)},c.prototype.isRTL=function(){return a(this.settings.selectors.html).attr(this.settings.attributes.dir)===this.settings.attributes.rtl},c.prototype.initGallery=function(){b.init(this.$el.find(this.settings.selectors.carousel),this.settings),this.addCaptions()},c.prototype.addCaptions=function(){var a=this.$el.find(this.settings.selectors.carousel).next(),b=this.$el.find(this.settings.selectors.carouselDescription);b.length&&a.append(b).find(this.settings.selectors.carouselDescription+this.settings.selectors.first).addClass(this.settings.classes.active)},c.prototype.slickAfterChange=function(a,b){this.onInitSlide(a,b),a.$slider.next().find(this.settings.selectors.carouselDescription).removeClass(this.settings.classes.active).eq(b).addClass(this.settings.classes.active)},c.prototype.onInitSlide=function(b,c){var d,e=(c||0)+1;c=c||0,b&&b.$slides&&(d=a(b.$slides[c]).find(this.settings.selectors.slideInOverlay)),b&&b.$slides&&b.$slides.length>1&&b.$slider.next().find(this.settings.selectors.carouselCounter).html(this.getHTMLCounter(e,b.slideCount)),d&&(b.$slider.parent().children(this.settings.selectors.slideInOverlay).hide(),b.$slider.parent().append(d),b.$slider.parent().children(this.settings.selectors.slideInOverlay).eq(c).show())},c.prototype.getHTMLCounter=function(a,b){return'<span class="carousel-counter-page-number">'+a+"</span>/"+b},c.prototype.slickBeforeChange=function(a,b,c){b!==c&&this.analyticsTrack(a,b)},c.prototype.analyticsTrack=function(a,b){var c=this.settings.analyticsObject;c.itemNumber=b+1+"/"+a.$slides.length,this.settings.analyticsManager.tag(this.settings.interaction,c)},c}),define("colorPicker",["underscore","jquery","pictureFill"],function(a,b){"use strict";function c(d,e){if(!a.isObject(e))throw"Missing component object";if(!(this instanceof c))return a.isArray(e)?a.each(e,function(a){return new c(d,a)}):new c(d,e);a.isUndefined(d)&&(d={}),this.$component=e,this.uiConstants={classSelectionPanel:".color-selection-panel",classColorPicker:".color-picker",ClassColorSelectionText:".color-selection-text",classEditMode:"editmode",classInitialized:"is-initialized",classNavAvailable:"nav-available",classSelected:"selected",classActive:"active",classTransition:"fade-out",classNext:"next",classDisabled:"disabled",classPictureElement:"picture-element",classDisclaimerClone:"span.disclaimer",ClassColorOptionName:"color-option-name",dataIndexAttr:"data-color-index",selectorTemplates:"script.color-picker-template",selectorNavigation:".prevnext button"},this.state={numColorsVisible:0,colorIndex:0,colorName:null,$colorList:null},this.defaults={fadeInDuration:100,debounce:250,imageEl:"figure",colorsEl:"ul.colors",colorEl:"li.color",forceInitialColorUpdate:!1,defaultColorIndex:0,defaultVisibleColors:5,visibleColorsAtSmall:5,transitionEndEvent:"webkitTransitionEnd mozTransitionEnd MSTransitionEnd otransitionend transitionend",transitionTime:500},this.events={onColorSelected:"colorpicker.onColorSelected",onUpdateColorSelectionText:"colorpicker.onUpdateColorSelectionText"},this.options=d||{},this.settings=b.extend(this.defaults,this.options),this.init()}return c.prototype.init=function(){var a;this.$colorSelectionPanel=this.$component.find(this.uiConstants.classSelectionPanel),this.$colorPicker=this.$component.find(this.uiConstants.classColorPicker,this.$colorSelectionPanel),this.hasMoreThanOneColor()||this.$colorSelectionPanel.hasClass(this.uiConstants.classEditMode)||this.$colorSelectionPanel.hide(),this.$colorSelectionText=this.$colorSelectionPanel.find(this.uiConstants.ClassColorSelectionText),this.$figure=this.$component.find(this.settings.imageEl),this.$templates=this.$component.find(this.uiConstants.selectorTemplates),this.createIndex(),this.calculateVisibleColors(),this.bindEvents(),this.settings.forceInitialColorUpdate&&(a=this.$colorPicker.find('a[data-color-index="'+this.settings.defaultColorIndex+'"]'),0===a.length&&(a=this.$colorPicker.find('a[data-color-index="0"]')),a.length&&this.selectNewImage(a))},c.prototype.hasMoreThanOneColor=function(){return this.getColorsList().find("img").size()>1},c.prototype.getColors=function(){return this.getColorsList().find(this.settings.colorEl)},c.prototype.getColorsList=function(){return this.$colorPicker.find(this.settings.colorsEl)},c.prototype.createIndex=function(){var c=this.getColorsList();c.find("li").each(function(){b(this).appendTo(c)}),c.find("a").each(a.bind(function(a,c){b(c).attr(this.uiConstants.dataIndexAttr,a)},this)),this.getColors().each(a.bind(function(a,c){var d=b(c);d.appendTo(this.state.$colorList),a===this.settings.defaultColorIndex&&d.addClass(this.uiConstants.classSelected)},this)),!0===Modernizr.csstransitions?this.$colorSelectionPanel.addClass(this.uiConstants.classInitialized):this.$colorSelectionPanel.fadeIn(this.settings.fadeInDuration)},c.prototype.calculateVisibleColors=function(){this.state.numColorsVisible=this.settings.defaultVisibleColors,window.matchMedia&&window.matchMedia(HELIOS.config.common.mediaQuery.is.small).matches&&(this.state.numColorsVisible=this.settings.visibleColorsAtSmall>this.settings.defaultVisibleColors?this.settings.defaultVisibleColors:this.settings.visibleColorsAtSmall),this.updateActiveColors()},c.prototype.updateActiveColors=function(){var c=this.getColors();c.size()<=this.state.numColorsVisible?this.disableNavButtons():this.enableNavButtons(),c.removeClass(this.uiConstants.classActive),c.each(a.bind(function(a,c){a<this.state.numColorsVisible&&b(c).addClass(this.uiConstants.classActive)},this))},c.prototype.bindEvents=function(){var b=this.getColorsList().find("a"),c=this.$colorPicker.find(this.uiConstants.selectorNavigation);b.on("click",a.bind(this.onColorSelectHandler,this)),b.on("keyup",a.bind(this.colorKeyUpHandler,this)),c.on("click",a.bind(this.onColorNavigateHandler,this))},c.prototype.updateColorSelectionText=function(a){var b=a||this.state.colorName;this.$colorSelectionText.find("."+this.uiConstants.ClassColorOptionName).html(b).attr("data-current",b),this.$component.trigger(this.events.onUpdateColorSelectionText)},c.prototype.setCurrentColor=function(a){this.state.colorIndex=parseInt(a.attr(this.uiConstants.dataIndexAttr),10),this.state.colorName=a.find("img").attr("alt")},c.prototype.getCurrentColor=function(){return this.state.colorIndex},c.prototype.disableNavButtons=function(){var a=b("button",this.$colorPicker);a.prop("disabled",!0),a.parent().addClass(this.uiConstants.classDisabled)},c.prototype.enableNavButtons=function(){b("button",this.$colorPicker).removeClass(this.uiConstants.classDisabled).prop("disabled",null),this.$colorSelectionPanel.addClass(this.uiConstants.classNavAvailable)},c.prototype.rotateToPreviousColor=function(a){this.getColorsList().prepend(this.getColors().last())},c.prototype.rotateToNextColor=function(a){this.getColorsList().append(this.getColors().first())},c.prototype.getTemplate=function(a){var b=a||this.state.colorIndex;return this.$templates.eq(b).html()},c.prototype.toggleSelectedState=function(a){a.closest("li").addClass(this.uiConstants.classSelected).siblings().removeClass(this.uiConstants.classSelected)},c.prototype.fadeOutImages=function(c){setTimeout(a.bind(function(){!0===Modernizr.csstransitions?c.on(this.settings.transitionEndEvent,a.bind(this.transitionEndHandler,this)).addClass(this.uiConstants.classTransition):c.fadeOut(this.settings.transitionTime,function(){b(this).remove()})},this),0)},c.prototype.preload=function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=new Image,c[b].src=a[b]},c.prototype.listImageUrls=function(){var a=[],b=/<span[^>]+data-src="?([^"\s]+)"/g;return this.$templates.each(function(c,d){for(var e,f=d.innerHTML;e=b.exec(f);)a.push(e[1])}),a},c.prototype.onColorNavigateHandler=function(a){var c=b(a.target).parent();a.preventDefault(),c.hasClass(this.uiConstants.classNext)?this.rotateToNextColor():this.rotateToPreviousColor(),this.updateActiveColors()},c.prototype.updateActiveImage=function(b,c){var d;a.isFunction(this.settings.updateActiveImageHandler)?(d=a.bind(this.settings.updateActiveImageHandler,this),d.apply(this,[c])):(b.parent().find(this.uiConstants.classDisclaimerClone).remove(),b.before(this.getTemplate()),this.fadeOutImages(b)),this.$component.trigger(this.events.onColorSelected,[this.getCurrentColor()])},c.prototype.onColorSelectHandler=function(a){a.preventDefault(),this.selectNewImage(b(a.currentTarget))},c.prototype.selectNewImage=function(a){var b=this.$figure.find("."+this.uiConstants.classPictureElement).first();this.setCurrentColor(a),this.updateActiveImage(b,a),this.toggleSelectedState(a),this.updateColorSelectionText(),window.picturefill(a)},c.prototype.transitionEndHandler=function(a){b(a.target).remove()},c.prototype.colorKeyUpHandler=function(a){13===a.which&&this.onColorSelectHandler(e)},c}),define("parallaxView",["jquery","underscore","heliosObject"],function(a,b,c){"use strict";function d(b,c){if(this.defaults=e||{},this.options=c||{},this.settings=a.extend(!0,{},this.defaults,this.options),this.$root=b,!this.$root)return!1;this.$parallaxWindow=null,this.$parallaxBackground=null,this.$images=null,this.$window=a(window),this.setupParallax()}var e={parallax:{disableEffect:2e3,speed:.45,enabledAtBreakpoint:!1,isExplorer:/(msie [\w.]+|trident\/)/,direction:"y"},selectors:{parallaxWindow:".parallax-window",parallaxBackground:".picture-element"},classes:{parallaxWindow:"parallax-window",parallaxBackground:"parallax-background"},events:{scrollParallax:"scroll.parallaxView",resize:"resize.parallaxView",orientationchange:"orientationchange.parallaxView"}};return d.prototype.setupElements=function(){var b=(this.settings.selectors.parallaxWindow,this.settings.selectors.parallaxWindow),c=this.settings.selectors.parallaxBackground;this.$parallaxWindow=this.fetchRootOrElementBySelector(b),this.$parallaxBackground=a(c,this.$root).first()},d.prototype.fetchRootOrElementBySelector=function(b){return this.$root.hasClass(b)?this.$root:a(b,this.$root).first()},d.prototype.fetchImages=function(){return this.$images=a("img",this.$parallaxBackground),this.$images},d.prototype.clearImages=function(){this.$images=null},d.prototype.isTouchDeviceorIE=function(){var a=this.settings.parallax.isExplorer.exec(navigator.userAgent.toLowerCase()),c=b.isNull(a);return Modernizr&&Modernizr.touch||!c},d.prototype.setupParallax=function(a){this.setupElements(),this.settings.parallax.disableEffect=2*parseInt(this.$root.outerHeight(),10),this.$window.on(this.settings.events.resize,b.bind(this.resizeHandler,this)),this.resizeHandler(),this.$window.on(this.settings.events.orientationchange,b.bind(this.windowScrollHandler,this))},d.prototype.isEnabledAtBreakpoint=function(){return this.settings.parallax.enabledAtBreakpoint=!this.isTouchDeviceorIE()&&this.checkWindowStatus(),this.settings.parallax.enabledAtBreakpoint},d.prototype.resizeHandler=function(a){this.isEnabledAtBreakpoint()?(this.$window.off(this.settings.events.scrollParallax,b.bind(this.windowScrollHandler,this)).on(this.settings.events.scrollParallax,b.bind(this.windowScrollHandler,this)),this.$parallaxWindow.addClass(this.settings.classes.parallaxWindow),
this.$parallaxBackground.addClass(this.settings.classes.parallaxBackground),this.fetchImages(),this.resetImages(!0)):(this.$window.off(this.settings.events.scrollParallax,b.bind(this.windowScrollHandler,this)),this.$parallaxWindow.removeClass(this.settings.classes.parallaxWindow),this.$parallaxBackground.removeClass(this.settings.classes.parallaxBackground),this.resetImages(!1),this.clearImages())},d.prototype.checkWindowStatus=function(a){return window.matchMedia&&window.matchMedia(c.config.common.mediaQuery.is.large).matches},d.prototype.translateImage=function(a){this.$images&&this.$images.length&&this.$images.css("transform","translate("+this.getTransformProperties(a)+")")},d.prototype.getTransformProperties=function(a){var b="default-offset";switch(this.settings.parallax.direction){case"y":b="0, "+a+"px";break;case"x":b=a+"px, 0";break;default:b="-50%, calc(-50% + "+a+"px)"}return b},d.prototype.resetImages=function(a){!a&&this.$images&&this.$images.length?this.$images.css("transform","translate(0, 0)"):this.translateImage(this.getCurrentOffset())},d.prototype.getCurrentOffset=function(){return parseInt(this.$window.scrollTop(),10)*this.settings.parallax.speed},d.prototype.windowScrollHandler=function(a){var b=this.getCurrentOffset();if(!this.settings.parallax.enabledAtBreakpoint||b>this.settings.parallax.disableEffect)return void this.resetImages(!1);this.translateImage(b)},d}),define("c_016",["jquery","colorPicker","storageManager","heliosObject","parallaxView"],function(a,b,c,d,e){"use strict";function f(b){a(window);j=a.extend({},k,b),c.init(),i=a(j.selectors.root),i.data(j.data.parallax)&&setTimeout(function(){new e(i)},500),a(j.selectors.root).each(function(){var b=a(this);new g(a.extend({$component:b,modelId:b.data("vehicleId")||"not found",disclaimer:b.find(j.selectors.disclaimerText).text()},j))})}var g,h,i,j={},k={selectors:{root:".c_016",colorSelectorLink:".color-picker .colors .color",currentColor:".colors .selected a",colorSelector:".color-selection-panel",actionButtons:".actions .cta",disclaimer:".disclaimer",disclaimerText:"p.disclaimer",pictureEl:".picture-element"},classes:{parallaxWindow:"parallax-window",parallaxBackground:"parallax-background"},events:{click:"click",load:"load"},localStorageKey:"c_016",colorpicker:{forceInitialColorUpdate:!1,defaultColorIndex:0},data:{colorKey:"colorKey",colorIndex:"colorIndex",parallax:"parallax"}};return g=function(c){if(!(this instanceof g))return new g(c);this.options=c,this.restoreModelColorSelection(a.proxy(function(a){a&&(j.colorpicker.defaultColorIndex=a,j.colorpicker.forceInitialColorUpdate=!0),this.colorpicker=new b(j.colorpicker,this.options.$component)},this)),this.initialiseColorPicker(),this.showSwatchDisclaimer(),this.bindEvents()},g.prototype.initialiseColorPicker=function(){this.options.$component.find(j.selectors.colorSelector).each(a.proxy(function(){this.options.$component.colorPicker=this.colorpicker},this))},g.prototype.bindEvents=function(){this.options.$component.find(j.selectors.colorSelectorLink).on(j.events.click,a.proxy(function(b){h!==a(b.currentTarget).find("a").data(k.data.colorIndex)&&this.colorPickerTrackingAnalytics(b),this.showSwatchDisclaimer()},this)),this.options.$component.find(j.selectors.actionButtons).on(j.events.click,a.proxy(this.handleClick,this)),this.options.$component.on("colorpicker.onColorSelected",a.proxy(function(b,c){this.storeSelectedModelColor(c),h=a(b.currentTarget).find(j.selectors.currentColor).data(k.data.colorIndex),i.data(j.data.parallax)&&setTimeout(function(){new e(i)},500)},this))},g.prototype.colorPickerTrackingAnalytics=function(b){var c=a(b.currentTarget),d=c.find("img").attr("alt"),e={componentId:"C16_Vehicle_Intro",interactionType:"colour-picker",colour:d};j.analyticsManager.tag("colourPicker",e)},g.prototype.handleClick=function(b){var c=a(b.target),d=c.text(),e=c.prop("href"),f={componentId:"C16_Vehicle_Intro",destination:e,locationInPage:"vehicle-intro",buttonText:d};j.analyticsManager.tag("genericClick",f)},g.prototype.storeSelectedModelColor=function(b){var d,e=c.loadItem(j.localStorageKey),f=[];d={id:this.options.modelId,colorIndex:b},e?(f=e.modelSelectedColors,a.each(f,function(a,b){if(b.id===d.id)return f.splice(a,1),!1})):e={},f.push(d),e.modelSelectedColors=f,c.saveItem(j.localStorageKey,e)},g.prototype.restoreModelColorSelection=function(b){var d,e=c.loadItem(j.localStorageKey),f=this.options.modelId,g=null;e&&(d=e.modelSelectedColors,g=a.grep(d,function(a,b){if(a.id===f)return a})),g=a.isArray(g)&&g.length?g[0].colorIndex:0,b(g)},g.prototype.showSwatchDisclaimer=function(){var a=this.options.$component.find(".color-picker .color.active.selected a").data(k.data.colorKey),b=this.options.$component.find("span.disclaimer[data-color-key="+a+"]").data("disclaimer");b?this.options.$component.find(k.selectors.disclaimer).empty().text(b):this.options.$component.find(k.selectors.disclaimer).empty().text(this.options.disclaimer)},{init:f}}),function(a){"use strict";"function"==typeof define&&define.amd?define("matchHeight",["jquery"],a):"undefined"!=typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b=-1,c=-1,d=function(a){return parseFloat(a)||0},e=function(b){var c=a(b),e=null,f=[];return c.each(function(){var b=a(this),c=b.offset().top-d(b.css("margin-top")),g=f.length>0?f[f.length-1]:null;null===g?f.push(b):Math.floor(Math.abs(e-c))<=1?f[f.length-1]=g.add(b):f.push(b),e=c}),f},f=function(b){var c={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof b?a.extend(c,b):("boolean"==typeof b?c.byRow=b:"remove"===b&&(c.remove=!0),c)},g=a.fn.matchHeight=function(b){var c=f(b);if(c.remove){var d=this;return this.css(c.property,""),a.each(g._groups,function(a,b){b.elements=b.elements.not(d)}),this}return this.length<=1&&!c.target?this:(g._groups.push({elements:this,options:c}),g._apply(this,c),this)};g.version="0.7.2",g._groups=[],g._throttle=80,g._maintainScroll=!1,g._beforeUpdate=null,g._afterUpdate=null,g._rows=e,g._parse=d,g._parseOptions=f,g._apply=function(b,c){var h=f(c),i=a(b),j=[i],k=a(window).scrollTop(),l=a("html").outerHeight(!0),m=i.parents().filter(":hidden");return m.each(function(){var b=a(this);b.data("style-cache",b.attr("style"))}),m.css("display","block"),h.byRow&&!h.target&&(i.each(function(){var b=a(this),c=b.css("display");"inline-block"!==c&&"flex"!==c&&"inline-flex"!==c&&(c="block"),b.data("style-cache",b.attr("style")),b.css({display:c,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),j=e(i),i.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||"")})),a.each(j,function(b,c){var e=a(c),f=0;if(h.target)f=h.target.outerHeight(!1);else{if(h.byRow&&e.length<=1)return void e.css(h.property,"");e.each(function(){var b=a(this),c=b.attr("style"),d=b.css("display");"inline-block"!==d&&"flex"!==d&&"inline-flex"!==d&&(d="block");var e={display:d};e[h.property]="",b.css(e),b.outerHeight(!1)>f&&(f=b.outerHeight(!1)),c?b.attr("style",c):b.css("display","")})}e.each(function(){var b=a(this),c=0;h.target&&b.is(h.target)||("border-box"!==b.css("box-sizing")&&(c+=d(b.css("border-top-width"))+d(b.css("border-bottom-width")),c+=d(b.css("padding-top"))+d(b.css("padding-bottom"))),b.css(h.property,f-c+"px"))})}),m.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||null)}),g._maintainScroll&&a(window).scrollTop(k/l*a("html").outerHeight(!0)),this},g._applyDataApi=function(){var b={};a("[data-match-height], [data-mh]").each(function(){var c=a(this),d=c.attr("data-mh")||c.attr("data-match-height");b[d]=d in b?b[d].add(c):c}),a.each(b,function(){this.matchHeight(!0)})};var h=function(b){g._beforeUpdate&&g._beforeUpdate(b,g._groups),a.each(g._groups,function(){g._apply(this.elements,this.options)}),g._afterUpdate&&g._afterUpdate(b,g._groups)};g._update=function(d,e){if(e&&"resize"===e.type){var f=a(window).width();if(f===b)return;b=f}d?-1===c&&(c=setTimeout(function(){h(e),c=-1},g._throttle)):h(e)},a(g._applyDataApi);var i=a.fn.on?"on":"bind";a(window)[i]("load",function(a){g._update(!1,a)}),a(window)[i]("resize orientationchange",function(a){g._update(!0,a)})}),define("dateFormat",["heliosObject","underscore"],function(a,b){"use strict";function c(){return a.config.common.locale||(a.config.common.locale=document.documentElement.getAttribute("lang")),[a.config.common.locale]}function d(b){return a.config.common.dateFormat[b]||{}}function e(a,e){var f=c(),g=d(e);return!(b.isEmpty(g)||!b.isFunction(a.toLocaleDateString))&&(g.timeZone=h.standard,a.toLocaleDateString(f,g))}function f(a){return e(a,h.types.THREE_TIER)}function g(a){return e(a,h.types.TWO_TIER)}a.config=a.config||{},a.config.common=a.config.common||{},a.config.common.dateFormat=a.config.common.dateFormat||{};var h={types:{TWO_TIER:"two_tier",THREE_TIER:"three_tier"},standard:"UTC"};return{formatThreeTier:f,formatTwoTier:g}}),define("numberFormat",["logger","underscore"],function(a,b){"use strict";function c(a){this.HELIOS={},a&&(this.HELIOS=a.HELIOS),this.HELIOS.config=this.HELIOS.config||{},this.HELIOS.config.common=this.HELIOS.config.common||{},this.HELIOS.config.common.formatting=this.HELIOS.config.common.formatting||{},this.HELIOS.config.common.locale||(this.HELIOS.config.common.locale=document.documentElement.getAttribute("lang"))}var d=new a({prefix:"NumberFormat"});return c.prototype.asCurrency=function(a,c,e,f){var g;return b.isUndefined(f)&&(f=this.HELIOS.config.common.formatting&&this.HELIOS.config.common.formatting.currency&&this.HELIOS.config.common.formatting.currency.manualPriceFormatting),"string"==typeof a&&(a=a.replace(/\s/g,""),a=Number(a)),c=c||this.HELIOS.config.common.currencyCode,e=e||this.HELIOS.config.common.locale,b.isUndefined(c)||!0===f?(d.info("Formatting price manually"),g=this.formatPriceManually(a,e)):(d.info("Formatting price automatically"),g=this.formatPrice(a,c,e)),g},c.prototype.formatPrice=function(a,b,c){var e,f;return b&&3===$.trim(b).length?(e={style:"currency",currency:b,minimumFractionDigits:a%1==0?0:2},f=new Intl.NumberFormat(c,e),f.format(a)):(d.error("No currency available for price formatting"),"")},c.prototype.formatPriceManually=function(a,c){var d,e,f,g,h=this.HELIOS.config.common.formatting.currency||{},i=/\B(?=(\d{3})+(?!\d))/g,j=/\B(?=(\d{2})+(?!\d))/g;return h.symbol=b.unescape(h.symbol),h.symbol=$("<span/>").html(h.symbol).text(),h.decimalSeparator=b.unescape(h.decimalSeparator),h.thousandsSeparator=b.unescape(h.thousandsSeparator),(b.isUndefined(h.decimalSeparator)||"locale"===h.decimalSeparator)&&(h.decimalSeparator=.001,h.decimalSeparator=h.decimalSeparator.toLocaleString(c),h.decimalSeparator=h.decimalSeparator.substr(h.decimalSeparator.length-4,1)),a=parseFloat(Math.round(100*a)/100),a=a.toFixed(h.decimalPlaces),d=a.split("."),a=parseInt(d[0],10),b.isNaN(a)||(h.decimalPlaces&&h.decimalPlaces>0?(g=!b.isUndefined(d[1])&&0===parseInt(d[1],10),d[1]=h.decimalSeparator+d[1],!h.showDecimalZeros&&g&&(d[1]="")):d[1]=""),"en-IN"===c?(e=d[0].substring(d[0].length-3),f=d[0].substring(0,d[0].length-3),f&&(e=h.thousandsSeparator+e),a=f.replace(j,h.thousandsSeparator)+e+d[1]):a=d[0].replace(i,h.thousandsSeparator)+d[1],a=b.isUndefined(h.position)||"right"!==h.position?h.symbol+a:a+" "+h.symbol},c.prototype.asInteger=function(a,b){var c;return"string"==typeof a&&(a=a.replace(/\s/g,""),a=Number(a)),b=b||this.HELIOS.config.common.locale,c=new Intl.NumberFormat(b),c.format(a)},c}),define("handlebarsHelpersLogic",["heliosObject","underscore","handlebars","dateFormat","numberFormat"],function(a,b,c,d,e){"use strict";function f(a,b,c,d){var e=!1;switch(b){case"==":e=a==c;break;case"===":e=a===c;break;case"!=":e=a!=c;break;case"!==":e=a!==c;break;case"<":e=a<c;break;case"<=":e=a<=c;break;case">":e=a>c;break;case">=":e=a>=c;break;case"&&":e=a&&c;break;case"||":e=a||c}return e?d.fn(this):d.inverse(this)}function g(a){return a=a.split("."),a=a[1]?a[1]:a[0]}function h(a,c,d){return b.contains(a,c)?d.fn(this):d.inverse(this)}function i(a){return JSON.stringify(a)}function j(a){var c="";return b.isUndefined(a)||(c=a.replace(/\&lt;/g,"<").replace(/\&amp;nbsp;/g," ").replace(/\&gt;/g,">").replace(/\&#x27;/g,"'").replace(/<script data-main="[\s\S]*?><\/script>/gi,"")),c}function k(){for(var a=0,c=b.flatten(arguments),d=c.length-1;d--;)a+=parseFloat(c[d])||0;return Number(a)}function l(a){return b.toArray(a).length}function m(a){return Date.parse(a)?d.formatThreeTier(new Date(a))||a:a}function n(a,c){var e=parseInt(a),f=parseInt(c),g=c+" "+a;return b.isNaN(e)||b.isNaN(f)?g:d.formatTwoTier(new Date(Date.UTC(e,--f)))||g}function o(c){var d=parseFloat(c),f=new e({HELIOS:a});return b.isFinite(d)?f.asCurrency(d):c}function p(b){return new e({HELIOS:a}).asInteger(b)}function q(a,b){return"object"==typeof a?b.fn(this):b.inverse(this)}function r(a,c,d,e){var f,g=e.inverse(this);return void 0!==a&&void 0!==c&&b.isArray(d)&&(f=b.pluck(d,a),g=b.contains(f,c)?e.fn(this):e.inverse(this)),g}function s(a){this.index=parseInt(a,10)}var t={splitNestedAttribute:g,ifCond:f,ifContains:h,jsonPrint:i,parseCustomHtml:j,totalSum:k,countObjectElements:l,formatDate3t:m,formatDate2t:n,formatCurrency:o,formatInteger:p,ifObject:q,isInArrayOfObjects:r,setCurrentIndex:s};for(var u in t)c.registerHelper(u,t[u]);return t}),function(a){var b=0,c={iframe:"iframe",popup:"popup"},d={strict:"strict",loose:"loose",html5:"html5"},f={mode:c.iframe,standard:d.html5,popHt:500,popWd:400,popX:200,popY:200,popTitle:"",popClose:!1,extraCss:"",extraHead:"",retainAttr:["id","class","style"]},g={};a.fn.printArea=function(c){a.extend(g,f,c),b++;var d="printArea_";a("[id^="+d+"]").remove(),g.id=d+b;var e=a(this),i=h.getPrintWindow();h.write(i.doc,e),setTimeout(function(){h.print(i)},1e3)};var h={print:function(b){var d=b.win;a(b.doc).ready(function(){d.focus(),d.print(),g.mode==c.popup&&g.popClose&&setTimeout(function(){d.close()},2e3)})},write:function(a,b){a.open(),a.write(h.docType()+"<html>"+h.getHead()+h.getBody(b)+"</html>"),a.close()},docType:function(){return g.mode==c.iframe?"":g.standard==d.html5?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+(g.standard==d.loose?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+(g.standard==d.loose?"loose":"strict")+'.dtd">'},getHead:function(){var b="",c="";return g.extraHead&&g.extraHead.replace(/([^,]+)/g,function(a){b+=a}),a(document).find("link").filter(function(){var b=a(this).attr("rel");return"undefined"===a.type(b)==0&&"stylesheet"==b.toLowerCase()}).filter(function(){var b=a(this).attr("media");return"undefined"===a.type(b)||""==b||"print"==b.toLowerCase()||"all"==b.toLowerCase()}).each(function(){c+='<link type="text/css" rel="stylesheet" href="'+a(this).attr("href")+'" >'}),g.extraCss&&g.extraCss.replace(/([^,\s]+)/g,function(a){c+='<link type="text/css" rel="stylesheet" href="'+a+'">'}),"<head><title>"+g.popTitle+"</title>"+b+c+"</head>"},getBody:function(b){var c="",d=g.retainAttr;return b.each(function(){for(var b=h.getFormData(a(this)),e="",f=0;f<d.length;f++){var g=a(b).attr(d[f]);g&&(e+=(e.length>0?" ":"")+d[f]+"='"+g+"'")}c+="<div "+e+">"+a(b).html()+"</div>"}),"<body>"+c+"</body>"},getFormData:function(b){var c=b.clone(),d=a("input,select,textarea",c);return a("input,select,textarea",b).each(function(b){var c=a(this).attr("type");"undefined"===a.type(c)&&(c=a(this).is("select")?"select":a(this).is("textarea")?"textarea":"");var e=d.eq(b);"radio"==c||"checkbox"==c?e.attr("checked",a(this).is(":checked")):"text"==c||""==c?e.attr("value",a(this).val()):"select"==c?a(this).find("option").each(function(b){a(this).is(":selected")&&a("option",e).eq(b).attr("selected",!0)}):"textarea"==c&&e.text(a(this).val())}),c},getPrintWindow:function(){switch(g.mode){case c.iframe:var a=new h.Iframe;return{win:a.contentWindow||a,doc:a.doc};case c.popup:var b=new h.Popup;return{win:b,doc:b.doc}}},Iframe:function(){var b,c=g.id,d="border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;";try{b=document.createElement("iframe"),document.body.appendChild(b),a(b).attr({style:d,id:c,src:"#"+(new Date).getTime()}),b.doc=null,b.doc=b.contentDocument?b.contentDocument:b.contentWindow?b.contentWindow.document:b.document}catch(e){throw e+". iframes may not be supported in this browser."}if(null==b.doc)throw"Cannot find document.";return b},Popup:function(){var a="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no";a+=",width="+g.popWd+",height="+g.popHt,a+=",resizable=yes,screenX="+g.popX+",screenY="+g.popY+",personalbar=no,scrollbars=yes";var b=window.open("","_blank",a);return b.doc=b.document,b}}}(jQuery),define("jqueryPrintArea",function(){}),define("c_193_0",["jquery","underscore","handlebars","modal","storageManager","disclaimers","jqueryPrintArea"],function(a,b,c,d,e,f){"use strict";function g(b){v=a.extend({},u,b),e.init(),h(),t=a(v.selectors.legalNoticesSourceContainer)}function h(){a(document).on("click",v.selectors.root+" "+v.selectors.actions,function(b){var c=a(this),d=c.closest(v.selectors.root).data(v.data.offer);"contact"===c.data("action")&&n(d),"print"===c.data("action")&&b.preventDefault(),"custom"===c.data("action")&&!0===c.data("newWindow")&&(b.preventDefault(),v.window.open(c.attr("href"),"_blank")),q(d,c)}),a(document).on("click",v.selectors.root+" "+v.selectors.actionsPrint,function(b){b.preventDefault(),i(a(this))})}function i(a){var b;v.window.matchMedia&&(b=v.window.matchMedia(v.mode.print),b.addListener(j)),v.window.onbeforeprint=k,v.window.onafterprint=l,v.window.print()}function j(a){a.matches?k():l()}function k(){a(v.selectors.root).find(v.selectors.logoPrint).remove(),a(v.selectors.logoPrint).clone().insertBefore(v.selectors.legalNoticesTargetContainer)}function l(){a(v.selectors.root).find(v.selectors.logoPrint).remove()}function m(b,e){var g,h,i,j,k=a(v.selectors.c_197).data(v.data.dealerDma);r||(r=c.compile(a(u.selectors.template).html())),b.table&&(b.table.dataCol1=[],b.table.dataCol2=[],b.table.data&&b.table.data.length&&(i=Math.ceil(b.table.data.length/2),b.table.dataCol1=b.table.data.slice(0,i),b.table.dataCol2=b.table.data.slice(i))),g=r(b),t.length&&(h=a(g),j=h.find(".legal-notices"),t.clone().prependTo(j),g=h[0].outerHTML),s=new d({content:g,customClass:"offer-detail-modal",touchMoveEnabled:!0}),s.open().done(function(){var c,d=a(this).find(v.selectors.root),g=d.find(v.selectors.dealerCta).first();d.data(v.data.offer,b),picturefill(d.get(0)),p(b),f.renderDisclaimers(d),k&&(c=g.attr(v.strings.href),c=c.split(v.strings.html)[0]+"."+k+v.strings.html+"?offerId="+e,g.attr(v.strings.href,c))}),s.$root.on("modal.close",function(){a.isFunction(v.events.onCloseOverlay)&&v.events.onCloseOverlay.call(null,b)})}function n(a){var c=o(a.id),d="",f="";a.additionalTitle&&a.additionalTitle.headline&&a.additionalTitle.strapline&&(d=a.additionalTitle.headline,f=a.additionalTitle.strapline),v.analyticsManager.storeJourneyData("offer",b.now(),{offerId:a.id,offerUrl:c,offerTypeTitle:a.offerTypeTitle,offerHeadline:a.title.headline,offerStrapline:a.title.strapline,offerAdditionalHeadline:d,offerAdditionalStrapline:f,offerHighlight:a.highlight,vehicleModel:v.modelCode,vehicleId:v.vehicleId,vehicleCategory:v.vehicleCategories}),e.saveItem(v.localStorageKey,{offerId:a.id,offerUrl:c,offerModelName:a.model.name,offerApplicability:a.applicability,offerCaveat:a.caveat,offerTypeTitle:a.offerTypeTitle,offerStatus:a.status,offerHeadline:a.title.headline,offerStrapline:a.title.strapline,offerAdditionalHeadline:d,offerAdditionalStrapline:f,offerHighlight:a.highlight,offerRegion:a.region,offerValidity:a.validity})}function o(a){var b=location.href;return location.hash?b=b.substring(0,location.href.lastIndexOf(location.hash)):"#"===b.slice(-1)&&(b=b.slice(0,-1)),b+="#offerId="+encodeURIComponent(a)}function p(a){var b=v.analyticsManager.trackingVars.contentDisplayed,c=v.analyticsManager.getTrackingObjectProperties(b),d={};d[c.componentId]=w,d.offerId=a.id,d.offerText=a.title.headline,v.analyticsManager.track(b,d)}function q(a,b){var c=v.analyticsManager.trackingVars.genericClick,d=v.analyticsManager.getTrackingObjectProperties(c),e={};e[d.componentId]=w,e[d.destination]=b.attr("href"),e[d.locationInPage]=a.offerTypeTitle+" - "+a.model.name,e[d.buttonText]=b.text(),e[d.contentAction]=b.data("action"),e.offerId=a.id,e.offerText=a.title.headline,v.analyticsManager.track(c,e)}var r,s,t,u={selectors:{root:".c_193-0",template:"#template-c_193-0",actions:".actions a",actionsPrint:'.actions a[data-action="print"]',accordionHeader:".accordion-header",logoPrint:".logo-print",imageDisclaimer:".image-disclaimer",imageToPrint:".vehicle-image .picture-element span:last-child",legalNoticesSourceContainer:".c_197-0 > .legalNotices, .c_194-0 .legalNotices",legalNoticesTargetContainer:".legal-notices",legalNoticeToPrint:".c_029B",titleToPrint:".c_023-1 > .heading-group h1 span",c_197:".c_197-0",dealerCta:"a[role=menuitem]"},events:{onCloseOverlay:a.noop},data:{offer:"offer",dealerDma:"dealerDma"},classes:{accordionOpen:"accordion-group-open"},localStorageKey:"offerData",strings:{html:".html",href:"href"},mode:{print:"print"},window:window},v=null,w="C193_Model_Specific_Offer_Detail";return{init:g,loadOverlay:m,populateOfferOnLocalStorage:n}}),define("c_018_1",["jquery","handlebars","handlebarsHelpersLogic","c_193_0","remoteServices","disclaimers","pictureFill"],function(a,b,c,d,e,f,g){"use strict";function h(a){return new j(a)}var i,j,k={selectors:{root:".c_018-1",btnViewDetail:".cta-view-more",template:"#template-c_018-1",responsiveImages:".picture-element",ctas:".actions li a"},data:{offer:"offer"},events:{onCloseOverlay:a.noop},classes:{clickableImage:"clickable-image"}};return j=function(b){this.settings=a.extend({},k,b),this.modal=d,this.$root=a(this.settings.selectors.root)},j.prototype={getOfferFromComponent:function(a){return a.closest(this.settings.selectors.root).data(this.settings.data.offer)},bindEvents:function(){this.$root.on("click",a.proxy(function(b){var c=a(b.target),d=a(b.currentTarget),e=this.getOfferFromComponent(c);(c.is(this.settings.selectors.btnViewDetail)||c.is("img")&&d.data("clickable"))&&this.modal.loadOverlay(e)},this))},renderInstanceIn:function(c,d){i||(i=b.compile(a(this.settings.selectors.template).html())),c.html(i(d)),d.table?c.find('.c_018-1[data-offer-id="'+d.id+'"]').data(this.settings.data.offer,d):e.getOffer(d.id).done(a.proxy(function(a){c.find('.c_018-1[data-offer-id="'+a.id+'"]').data(this.settings.data.offer,a)},this)),g(c.get(0)),f.renderDisclaimers(c),this.$root=this.$root.add(c.find(this.settings.selectors.root)),this.modal.init({analyticsManager:this.settings.analyticsManager}),d.imageClickable&&(c.find(this.settings.selectors.responsiveImages).addClass(this.settings.classes.clickableImage),c.find(this.settings.selectors.root).data("clickable",d.imageClickable))}},{init:h}}),define("autocompleteEventHandler",["jquery","underscore","handlebars","keyCodeConstants","autocompleteContext","logger"],function(a,b,c,d,e,f){"use strict";function g(){(i||(i=new f({prefix:"AutocompleteEventHandler"}))).debug(Array.prototype.join.call(arguments," | "))}var h,i,j={selectors:{template:".autocomplete-template",firstResultItem:".first-result-item"},attributes:{autocomplete:"autocomplete",dataAddressName:"address-name",dealerId:"dealer-id",dataNotResultText:"no-results-text"},events:{click:"click",keydown:"keydown",keyup:"keyup",blur:"blur",loadPlaces:"loadPlaces",getLocationByCoordinates:"getLocationByCoordinates",getPostalCodeByAddressName:"getPostalCodeByAddressName",locationNotFound:"locationNotFound",inputFocus:"inputFocus",getFilteredDealerResult:"getFilteredDealerResult"},classes:{isActive:"is-active",firstResultItem:"first-result-item"},errorsMessages:{notOptions:"ArgumentException: You must specify `options`.",notElement:"ArgumentException: You must specify a `inputElement` property within `options`."}},k=0,l=0,m={UP:1,DOWN:-1};return h=function(b){if(this.settings=a.extend({},j,b),!b)throw this.settings.errorsMessages.notOptions;if(!b.inputElement)throw this.settings.errorsMessages.notElement;this.init()},h.prototype.init=function(){this.inputElement=this.settings.inputElement,this.$inputElement=a(this.inputElement),this.resultContainer=this.settings.selectors.spanAutocomplete,this.$resultContainer=a(this.resultContainer),this.$currentResultSelected=[],this.resultItem=this.settings.selectors.resultItem,this.autocompleteContext=new e(this.settings),this.template=this.getTemplate(),this.bindEvents(),this.window=this.settings.window},h.prototype.bindEvents=function(){this.$inputElement.attr(this.settings.attributes.autocomplete,"off").on(this.settings.events.focus,b.bind(this._onFocusHandler,this)).on(this.settings.events.keyup,b.bind(this._onKeyUpHandler,this)).on(this.settings.events.keydown,b.bind(this._onKeyDownHandler,this)),this.$resultContainer.on(this.settings.events.click,this.resultItem,b.bind(this._onClickHandler,this)).on(this.settings.events.keydown,this.resultItem,b.bind(this._onKeyDownSuggestionListHandler,this))},h.prototype.getTemplate=function(){var b=a(this.settings.selectors.template);if(b.html())return c.compile(b.html(),{noEscape:!0})},h.prototype.getLocationByCoordinates=function(a,c){return this.autocompleteContext.getPostalCodeByCoordinates(a,c).done(b.bind(function(a){this.settings.eventAggregator.trigger(this.settings.events.getLocationByCoordinates,a)},this)).fail(b.bind(function(){this.settings.eventAggregator.trigger(this.settings.events.locationNotFound)},this))},h.prototype.getLocationByCoordinatesAndCountry=function(a,c){this.autocompleteContext.getPostalCodeByCoordinatesAndCountry(a,c).done(b.bind(function(a){this.settings.eventAggregator.trigger(this.settings.events.getLocationByCoordinates,a)},this)).fail(b.bind(function(){this.settings.eventAggregator.trigger(this.settings.events.locationNotFound)},this))},h.prototype.notResultMessage=function(){var a=this.$inputElement.data(this.settings.attributes.dataNotResultText);b.isUndefined(a)||this.$resultContainer.html('<span class="not-result">'+a+"</span>")},h.prototype.manuallySelectFirstItem=function(){this.$currentResultSelected.length&&this.$currentResultSelected.text().trim()!==this.$inputElement.val().trim()&&(this.autocompleteContext.getPostalCodeByAddressName(this.$currentResultSelected.text()).done(b.bind(function(a){this._handleGeoCodeEvent(a),this.$currentResultSelected=[]},this)),this._cleanPlaces(this.$resultContainer))},h.prototype._onFocusHandler=function(a){this.settings.eventAggregator.trigger(this.settings.events.inputFocus)},h.prototype._onKeyUpHandler=function(c){var d="";c=c||null,c&&(d=a(c.target).val()),this.userValue=d.length?d:this.$inputElement.val(),this._isValidKey()&&this._isValidLength(this.userValue)&&b.delay(b.bind(function(){var a;a=this.settings.isDealerSearch&&this.settings.dealerSearchHandler?this.settings.dealerSearchHandler(this.userValue):this.autocompleteContext.getPlaces(this.userValue),a.done(b.bind(function(a){this._fillPlaces(a),this.$resultContainer.addClass(this.settings.classes.isActive).children().first().addClass(this.settings.classes.firstResultItem),this.$currentResultSelected=this.$resultContainer.children().first()},this)).fail(b.bind(function(a){g(a),this.notResultMessage()},this))},this),0),this._shouldBeClean(this.userValue,c)&&this._cleanPlaces(this.$resultContainer)},h.prototype._onKeyDownHandler=function(a){if(this._shouldSetFocus(a))return a.preventDefault(),this._focusResultHandler(k)},h.prototype._onKeyDownSuggestionListHandler=function(b){var c,d,e;d=this._getKeyDirection(b),this._shouldSetFocus(b)&&(c=k,this._focusResultHandler(c)),d!==l&&(b.preventDefault(),e=a(b.target),c=e.index(),this._focusResultHandler(c+d)),this._onEnterHandler(b)},h.prototype._onClickHandler=function(a){var b;b=this._getSelectedItem(a),this._resolveSelectedAddressPromise(b)},h.prototype._onEnterHandler=function(a){var b;a.which===d.ENTER&&(b=this._getSelectedItem(a),this._resolveSelectedAddressPromise(b))},h.prototype.notResultMessage=function(){var a=this.$inputElement.data(this.settings.attributes.dataNotResultText);b.isUndefined(a)||this.$resultContainer.html('<span class="not-result">'+a+"</span>").addClass(this.settings.classes.isActive)},h.prototype._resolveSelectedAddressPromise=function(a){this.settings.isDealerSearch?this.settings.eventAggregator.trigger(this.settings.events.getFilteredDealerResult,this.settings.getSelectedDealerObject(a.dealerId)):this.autocompleteContext.getPostalCodeByAddressName(a.itemList).done(b.bind(function(b){this._handleGeoCodeEvent(b,a.userQuery)},this))},h.prototype._handleGeoCodeEvent=function(a,b){var c={heliosLocation:a,userQuery:b};this.settings.eventAggregator.trigger(this.settings.events.getPostalCodeByAddressName,c)},h.prototype._getSelectedItem=function(b){var c,d,e={};return d=a(b.currentTarget),e.itemList=d.data(this.settings.attributes.dataAddressName),this.settings.isDealerSearch&&(e.dealerId=d.data(this.settings.attributes.dealerId)),e.userQuery=this.$inputElement.val(),c=d.text(),b.preventDefault(),this.$inputElement.val(c),this._cleanPlaces(this.$resultContainer),e},h.prototype._getKeyDirection=function(a){var b=l;return a.which===d.ARROW_DOWN?b=m.UP:a.which===d.ARROW_UP&&(b=m.DOWN),b},h.prototype._focusResultHandler=function(a){var b=this.$resultContainer.children(),c=this.settings.classes.firstResultItem;return b.removeClass(c),a>=b.length&&(a=b.length-1),b.eq(a).focus(),this.$currentResultSelected=b.eq(a),this},h.prototype._cleanPlaces=function(a){a.empty(),this.$resultContainer.removeClass(this.settings.classes.isActive)},h.prototype._fillPlaces=function(a){this.$resultContainer.html(this.template(a))},h.prototype._isValidKey=function(){return!b.contains([d.ENTER,d.ARROW_UP,d.ARROW_DOWN],this.inputElement.keyCode)},h.prototype._isValidLength=function(a){return a.length>0},h.prototype._shouldBeClean=function(a,b){return 0===a.length&&b.which===d.BACKSPACE},h.prototype._shouldSetFocus=function(a){return a.which===d.ARROW_DOWN},h}),define("c_073",["jquery","underscore","modal","validation","placeholderShim","trackingCodes","autocompleteEventHandler","heliosLocation"],function(a,b,c,d,e,f,g,h){"use strict";function i(c){var d;P=a.extend({},N,c),w=P.events,x=P.states,z=P.selectors,y=P.dataAttributes,A=P.locationSelectors,B=P.location,C=P.modalTriggerSelectors,D=P.modalContentSelectors,E=P.inputBoxSelectors,F=P.smartLocationSource,J=P.analyticsTags,K=P.analyticsEvents,L=P.autocompleteEvents,M=P.modalEvents,I=P.viewMode,u=a("html").hasClass("ltie9"),G=f.trackingVars.search,H=G.searchTermType,s=a(z.root),t=s.data(y.viewMode)||I.modal,k()?(d=new r(z.root),a.extend(d,new p(z.root)),d.initInputBox()):(d=new q(z.root),a.extend(d,new p(z.root))),j().done(b.bind(function(a){d._setLocationNameByPrepopulate(a.getUserAddress())},d)).fail(b.bind(function(){s.trigger(w.locationNotFound)},d)),s.trigger(K.offersResultsByAutoAdjust),s.data("object",d)}function j(){var c=a.Deferred();return m().get().done(function(a){b.isUndefined(a.getUserAddress())||b.isUndefined(a.getUserLat())||b.isUndefined(a.getUserLng())?c.reject():c.resolve(a)}).fail(c.reject),c}function k(){return t===I.inputBox}function l(){return t===I.modal}function m(){return P.smartLocationContext}function n(a,c,d,e,g,h){if(O[G.componentId]=g,O[G.searchType]=d,O[G.searchResults]=e,O[G.action]=f.eventTypes.search,!b.isUndefined(c)){switch(a){case H.userSearch:O[G.searchTerm]=h+"|"+c.getUserAddress();break;case H.geolocation:O[G.searchTerm]=H.geolocation+"|"+c.getUserAddress();break;case H.autoAdjust:O[G.searchTerm]=H.autoAdjust+"|"+c.getUserAddress()}o(O)}return O}function o(a){P.analyticsManager.tag(f.eventTypes.search,a)}function p(b){this.$element=a(b),this.$element.addClass(x.visible),this.type=this.$element.data(y.inputType)}function q(b){this.$element=a(b),this.$modalTriggerContainer=a(C.modalTriggerContainer,this.$element),
this.$modalTriggerAddressNameLabel=a(C.modalTriggerAddressName,this.$element),this.$modalTriggerCta=a(C.modalTriggerCta,this.$element),this.$modalContent=a(D.modalContent,this.$element),this.initModal()}function r(b){this.$element=a(b),this.$inputBoxMessage=a(E.inputBoxMessage,this.$element)}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N={states:{selected:"selected",disabled:"disabled",visible:"visible",hidden:"hidden"},selectors:{root:".c_073"},modalTriggerSelectors:{modalTriggerContainer:".c_073-modal-trigger",modalTriggerLocationSelected:".c_073-modal-trigger-location-selected",modalTriggerAddressName:".c_073-modal-trigger-location-selected .c_073-modal-trigger-address-name",modalTriggerCta:".open-modal"},modalContentSelectors:{modalContent:".c_073-modal-content",spanAutocomplete:".modal-content .autocomplete-suggestions"},inputBoxSelectors:{inputBoxMessage:".c_073-input-box-message",spanAutocomplete:".autocomplete-suggestions"},locationSelectors:{locationForm:"form",locationFormInput:".c_073-location-input",locationFormSearchButton:".btn-search",locationFormGeolocateButton:".btn-geolocate",locationFormErrorContainer:".error-container",locationFormErrorMessage:".error-message",locationFormDisabledButton:".btn-disabled",locationFormSuggestionListContainer:".pac-container",template:"#new-autocomplete-ctx",resultItem:"button"},events:{click:"click",keydown:"keydown",keyup:"keyup",inputFocus:"inputFocus",locationNotValid:"locationNotValid",locationNotFound:"locationNotFound",locationOutOfMarket:"locationOutOfMarket",setHeliosLocationByAutocomplete:"setHeliosLocationByAutocomplete",setHeliosLocationByGeolocate:"setHeliosLocationByGeolocate"},autocompleteEvents:{getLocationByCoordinates:"getLocationByCoordinates",getPostalCodeByAddressName:"getPostalCodeByAddressName"},modalEvents:{close:"modal.close"},analyticsTags:{buttonNoCookie:"buttonNoCookie"},analyticsEvents:{offersResultsByUserSearch:"OFFERS_RESULTS_BY_USERSEARCH",offersResultsByGeolocation:"OFFERS_RESULTS_BY_GEOLOCATION",offersResultsByAutoAdjust:"OFFERS_RESULTS_BY_AUTOADJUST"},smartLocationSource:{searchLocation:"searchLocation",currentLocation:"currentLocation"},dataAttributes:{inputType:"input-type",viewMode:"view-mode",errorOutOfMarket:"location-out-of-market"},viewMode:{modal:"modal",inputBox:"inputBox"},autocompleteType:{location:"location",postalCode:"postalCode"}},O={},P=null;return p.prototype.bindEvents=function(){this.$locationForm=this._getLocationForm(),this.$locationFormInput=this._getLocationFormInput(),this.$locationFormSearchButton=this._getLocationFormSearchButton(),this.$locationFormGeolocateButton=this._getLocationFormGeolocateButton(),this.$locationFormSuggestionListContainer=this._getLocationFormSuggestionListContainer(),this.$modalElement=this._getModalElement(),this.getType()===P.autocompleteType.location&&this._initAutcompleteEventHandler(),a(this).on(L.getPostalCodeByAddressName,function(a,b){this.$locationFormSuggestionListContainer.trigger(w.setHeliosLocationByAutocomplete,[b.heliosLocation,F.searchLocation,b.userQuery]).on(w.click,this._onClickSuggestionListItem(a,b))}).on(L.getLocationByCoordinates,function(a,b){this.$locationFormGeolocateButton.trigger(w.setHeliosLocationByGeolocate,[b,F.currentLocation]),this._getLocationAddressName(b)}).on(w.locationNotFound,b.bind(this._onLocationOutOfMarket,this)).on(w.inputFocus,b.bind(this._hideErroLocationOutOfMarket,this)),this.$locationFormSearchButton.on(w.click,b.bind(this._onClickSearchButton,this)),this.$locationFormSuggestionListContainer.on(w.setHeliosLocationByAutocomplete,b.bind(this._onHeliosLocationSet,this)),this.$locationFormGeolocateButton.on(w.click,b.bind(this._onClickCurrentLocationButton,this)).on(w.setHeliosLocationByGeolocate,b.bind(this._onHeliosLocationSet,this)),this.$locationFormInput.focusout(b.bind(function(a){l()&&this.getType()===P.autocompleteType.postalCode&&this._inputControllerError(a)},this)),l()&&this.$modalElement.on(M.close,b.bind(this.clearAutocompleteEvents,this))},p.prototype._initAutcompleteEventHandler=function(){return A.spanAutocomplete=this._getSpanForAutocomplete(),v=new g({COUNTRY_CODE:P.HELIOS.config.common.countryCode,window:P.window,inputElement:this.$locationFormInput,selectors:A,eventAggregator:a(this),heliosObject:P.HELIOS})},p.prototype._onClickSearchButton=function(c){var d,e,f=this.$locationFormInput.val();c.preventDefault(),!f&&l()&&(e=a(A.locationFormErrorMessage,this.modal.$content),e.toggleClass(x.hidden,!!f)),this.getType()===P.autocompleteType.postalCode&&(d=new h({postalCode:this.$locationFormInput.val()}),this.heliosLocation=d,this._setLocationAddressName(d)),f&&l()&&this.closeModal(),m().get().done(b.bind(function(a){var b=a.location&&a.location.address,c=b===f;k()&&this._locationInputBoxSelectedControl(c)},this))},p.prototype._onClickSuggestionListItem=function(b,c){var d,e=this.$locationFormInput.val(),f=!e||!c;b.preventDefault(),c||this.$locationFormInput.trigger(w.keyup),f&&l()?(d=a(A.locationFormErrorMessage,this.modal.$content),d.toggleClass(x.hidden,f)):e&&l()&&(d=a(A.locationFormErrorMessage,this.modal.$content),d.toggleClass(x.hidden,!!e),this.$modalTriggerAddressNameLabel.text(this._getLocationAddressName(c.heliosLocation))),e&&c&&l()&&this.closeModal()},p.prototype._onClickCurrentLocationButton=function(a){P.window.navigator.geolocation&&P.window.navigator.geolocation.getCurrentPosition(b.bind(this._getHeliosLocationByCoordinates,this))},p.prototype._onHeliosLocationSet=function(b,c,d,e){d===F.searchLocation?(m().set(c),s.trigger(K.offersResultsByUserSearch,e),a(this).off(w.setHeliosLocationByAutocomplete),this._setLocationNameByPrepopulate(c.getUserAddress())):d===F.currentLocation&&(m().set(c),this._setInputText(c.getUserAddress()),s.trigger(K.offersResultsByGeolocation),a(this).off(w.setHeliosLocationByGeolocate),l()&&this.modal.close())},p.prototype._onLocationOutOfMarket=function(){var c=a(A.locationFormErrorContainer).data(y.errorOutOfMarket);b.isUndefined(c)||(a(A.locationFormErrorContainer).html('<p class="error-message location-out-of-market">'+c+"</p>"),a(A.locationFormErrorContainer).removeClass(x.hidden))},p.prototype._hideErroLocationOutOfMarket=function(){a(A.locationFormErrorContainer).addClass(x.hidden)},p.prototype._getHeliosLocationByCoordinates=function(a){return v.getLocationByCoordinatesAndCountry(a.coords.latitude,a.coords.longitude)},p.prototype._setErrorMessage=function(b){a(A.locationFormErrorMessage).text(b),this._showErrorMessage()},p.prototype._setInputText=function(a){return this.$locationFormInput.val(a),this},p.prototype._enableControls=function(){this.$locationFormSearchButton.prop(x.disabled,!1),this.$locationFormSearchButton.removeClass(A.locationFormDisabledButton)},p.prototype._disableControls=function(){this.$locationFormSearchButton.prop(x.disabled,!0),this.$locationFormSearchButton.addClass(A.locationFormDisabledButton)},p.prototype._getLocationForm=function(){return k()?a(A.locationForm):a(A.locationForm,this.modal.$content)},p.prototype._getLocationFormInput=function(){return k()?a(A.locationFormInput):a(A.locationFormInput,this.modal.$content)},p.prototype._getLocationFormSearchButton=function(){return k()?a(A.locationFormSearchButton):a(A.locationFormSearchButton,this.modal.$content)},p.prototype._getLocationFormGeolocateButton=function(){return k()?a(A.locationFormGeolocateButton):a(A.locationFormGeolocateButton,this.modal.$content)},p.prototype._getLocationFormSuggestionListContainer=function(){return k()?a(A.locationFormSuggestionListContainer):a(A.locationFormSuggestionListContainer,this.modal.$content)},p.prototype._getModalElement=function(){return k()?"":this.modal.$root},p.prototype.getType=function(){return this.type},p.prototype._inputControllerError=function(b){var c=a(A.locationFormErrorMessage,this.modal.$content),d=a(b.currentTarget).val(),e=this.getType()===P.autocompleteType.postalCode,f=Number(d),g=f>=0&&""!==d;c.toggleClass(x.hidden,e&&!g),b.preventDefault()},q.prototype.initModal=function(){if(!this.$modalContent.length)return!1;this.modal=new c({openSelector:C.modalTriggerCta,displayType:c.TYPE_CENTERED,customClass:"modal-without-margins",customOverlayClass:"modal-overlay-dark"}),this.$modalTriggerCta.on(w.click,b.bind(function(b){var c=a(b.target),d=c.text(),e=P.analyticsManager,f={componentId:"C73_Universal_Location_Capture",contentAction:"location",locationInPage:"location-"+(P.autocompleteType[this.getType()]||""),buttonText:d};b.preventDefault(),e.tag(J.buttonNoCookie,f),this.bindEvents()},this))},q.prototype._setLocationModalTriggerAsSelected=function(){return this.$modalTriggerContainer.addClass(x.selected),this},q.prototype._getSpanForAutocomplete=function(){return D.spanAutocomplete},q.prototype._setLocationNameByPrepopulate=function(b){a(C.modalTriggerAddressName).text(b),this._setLocationModalTriggerAsSelected()},q.prototype._getLocationAddressName=function(a){var b;switch(this.getType()){case P.autocompleteType.postalCode:b=a.getPostalCode();break;case P.autocompleteType.location:b=a.getUserAddress()}return this.$modalTriggerAddressNameLabel.text(b),this._setLocationModalTriggerAsSelected(),b},q.prototype.closeModal=function(){this.clearAutocompleteEvents(),this.modal.close()},q.prototype.clearAutocompleteEvents=function(){a(this).off(L.getPostalCode),a(this).off(L.getLocationByCoordinates),this.modal.$root.off(M.close)},r.prototype.initInputBox=function(){this.bindEvents()},r.prototype._getSpanForAutocomplete=function(){return E.spanAutocomplete},r.prototype._getLocationAddressName=function(a){return this._setLocationInputBoxAsSelected(),b.isEmpty(a)?"":a.getUserAddress()},r.prototype._setLocationNameByPrepopulate=function(b){a(A.locationFormInput).val(b),this._setLocationInputBoxAsSelected()},r.prototype._setLocationInputBoxAsSelected=function(){return this.$inputBoxMessage.addClass(x.selected),this},r.prototype._unSetLocationInputBoxAsSelected=function(){return this.$inputBoxMessage.removeClass(x.selected),this},r.prototype._locationInputBoxSelectedControl=function(a){return a&&this._setLocationInputBoxAsSelected()||this._unSetLocationInputBoxAsSelected()},{init:i,buildAnalyticsGeneralSearchData:n}}),define("c_018_0",["jquery","underscore","matchHeight","remoteServices","handlebars","trackingCodes","c_018_1","profileManager","c_073"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(b){var c=a(b.currentTarget),d=c.attr("href"),e=B.find(N.selectors.allOffers).text(),f=N.analyticsManager,g=f.trackingVars.genericClick,h=f.getTrackingObjectProperties(g),i={};i[h.componentId]=P,i[h.destination]=d,i[h.locationInPage]="vehicle-offer",i[h.buttonText]=e,f.track(g,i)}function k(){B.find(N.selectors.fallback).removeClass(N.classes.hidden)}function l(){B.find(N.selectors.fallback).addClass(N.classes.hidden)}function m(){B.find(N.selectors.results).each(function(){var b=a(this).find("> li");3===b.length?b.addClass(N.classes.offers_3):2===b.length?b.addClass(N.classes.offers_2):b.addClass(N.classes.offers_1)})}function n(){N.matchHeight.forEach(function(b){a(b).matchHeight()})}function o(){var b,c=B.find(N.selectors.results),d=B.data("clickable");D||(D=e.compile(N.templates.offerCardContainer)),a.each(O,function(a,e){e.imageClickable=d,c.append(D(e)),b=c.find("li["+N.data.id+'="'+e.id+'"]:last'),L.renderInstanceIn(b,e)}),m(),L.bindEvents()}function p(c){var d=O&&O.length;switch(d?(o(),a(N.selectors.img,N.selectors.results).load(b.debounce(n,250))):(k(),d=0),F){case H.autoAdjust:case H.geolocation:i.buildAnalyticsGeneralSearchData(F,c,Q,d,P);break;case H.userSearch:i.buildAnalyticsGeneralSearchData(F,c,Q,d,P,K)}B.removeClass(N.classes.loading),y(d)}function q(a,b){var c=a.split(",");c[0]&&O.length<N.config.offersToShow?d.getOffer(c[0]).done(function(a){c.shift(),O.push(a),q(c.join(","))}).fail(function(){p()}):p(b)}function r(a,b){d.getOffersByQuery(a).done(function(a){a&&a.hasOwnProperty("offers")&&a.offers.constructor===Array&&(O=a.offers.slice(0,N.config.offersToShow)),p(b)}).fail(function(){p(b)})}function s(a){return"location="+a}function t(b,c){var d=a.trim(B.data(N.data.queryString)),e=-1!==d.indexOf(N.config.category),f=B.data(N.data.offerIds);u(),R&&b&&(d+="&"+s(b)),f&&!d?q(f,c):(e||(d.length?d+="&"+N.config.defaultQuery:d+=N.config.defaultQuery),r(d,c))}function u(){O=[],B.find(N.selectors.results).html(""),l()}function v(){R=!!B.find(N.selectors.location).length}function w(){B.addClass(N.classes.loading),R?A().get().done(function(a){a&&a.hasOwnProperty(J.postalCode)&&(E=a.postalCode),t(E,a)}).fail(function(){t()}):t()}function x(){B.find(N.selectors.allOffers).on(N.events.click,j),R&&(a(document).on(N.events.locationChanged+" "+N.events.setHeliosLocationByAutocomplete+" "+N.events.setHeliosLocationByGeolocate,w),C.on(I.offersResultsByAutoAdjust,function(){F=H.autoAdjust}).on(I.offersResultsByGeolocation,function(){F=H.geolocation}).on(I.offersResultsByUserSearch,function(a,b){F=H.userSearch,K=b}))}function y(a){var b="href",c=B.find(N.selectors.allOffers);a?c.html(B.data(N.data.allOffersLabel)).attr(b,B.data(N.data.allOffersTarget)):c.html(B.data(N.data.noOffersLabel)).attr(b,B.data(N.data.noOffersTarget))}function z(b){if(N=a.extend({},M,b),B=a(N.selectors.root),C=a(N.selectors.location),I=N.analyticsEvents,J=N.heliosLocationProperties,G=f.trackingVars.search,H=G.searchTermType,!B.length)return!1;L=g.init({analyticsManager:N.analyticsManager,window:N.window}),v(),w(),x()}function A(){return N.smartLocationContext}var B,C,D,E,F,G,H,I,J,K,L,M={classes:{hidden:"hidden",offers_3:"offers-3",offers_2:"offers-2",offers_1:"offers-1",loading:"loading"},selectors:{root:".c_018-0",fallback:".c_018-2",location:".c_073",overlayTemplate:".more-detail",lessDetail:".less-detail",results:".offers",allOffers:".cta-view-all",img:"img"},data:{queryString:"query-string",offerIds:"offer-ids",id:"data-id",allOffersLabel:"cta-all-offers-label",noOffersLabel:"cta-no-offers-label",allOffersTarget:"cta-all-offers-target",noOffersTarget:"cta-no-offers-target"},templates:{offerCardContainer:'<li data-id="{{id}}"></li>'},config:{offersToShow:3,defaultQuery:"category=New%20Offers",category:"category="},heliosLocationProperties:{postalCode:"postalCode"},analyticsEvents:{offersResultsByUserSearch:"OFFERS_RESULTS_BY_USERSEARCH",offersResultsByGeolocation:"OFFERS_RESULTS_BY_GEOLOCATION",offersResultsByAutoAdjust:"OFFERS_RESULTS_BY_AUTOADJUST"},events:{click:"click",locationChanged:"universalLocationChanged",setHeliosLocationByAutocomplete:"setHeliosLocationByAutocomplete",setHeliosLocationByGeolocate:"setHeliosLocationByGeolocate"},matchHeight:[".offer-header",".offer-status",".offer-info",".vehicle-image",".offer-bottom  .image-disclaimer",".legal-information",".actions"]},N=null,O=[],P="C18_Universal_Promotion",Q="offer promotion",R=!0;return{init:z}}),define("c_193B_0",["jquery","underscore","handlebars","modal","storageManager","disclaimers","jqueryPrintArea"],function(a,b,c,d,e,f){"use strict";function g(b){v=a.extend({},u,b),e.init(),h(),t=a(v.selectors.legalNoticesSourceContainer)}function h(){a(document).on("click",v.selectors.root+" "+v.selectors.actions,function(b){var c=a(this),d=c.closest(v.selectors.root).data(v.data.offer);"contact"===c.data("action")&&n(d),"print"===c.data("action")&&b.preventDefault(),"custom"===c.data("action")&&!0===c.data("newWindow")&&(b.preventDefault(),v.window.open(c.attr("href"),"_blank")),q(d,c)}),a(document).on("click",v.selectors.root+" "+v.selectors.actionsPrint,function(b){b.preventDefault(),i(a(this))})}function i(a){var b;v.window.matchMedia&&(b=v.window.matchMedia(v.mode.print),b.addListener(j)),v.window.onbeforeprint=k,v.window.onafterprint=l,v.window.print()}function j(a){a.matches?k():l()}function k(){a(v.selectors.root).find(v.selectors.logoPrint).remove(),a(v.selectors.logoPrint).clone().insertBefore(v.selectors.legalNoticesTargetContainer)}function l(){a(v.selectors.root).find(v.selectors.logoPrint).remove()}function m(b,e,g){var h,i,j,k,l=a(v.selectors.c_197B).data(v.data.dealerDma);r||(r=c.compile(a(u.selectors.template).html())),b.table&&(b.table.dataCol1=[],b.table.dataCol2=[],b.table.data&&b.table.data.length&&(j=Math.ceil(b.table.data.length/2),b.table.dataCol1=b.table.data.slice(0,j),b.table.dataCol2=b.table.data.slice(j))),h=r(b),t.length&&(i=a(h),k=i.find(".legal-notices"),t.clone().prependTo(k),h=i[0].outerHTML),s=new d({content:h,customClass:"offer-detail-modal",touchMoveEnabled:!0}),s.open().done(function(){var c,d=a(this).find(v.selectors.root),h=d.find(v.selectors.dealerCta).first();d.data(v.data.offer,b),picturefill(d.get(0)),p(b,g),f.renderDisclaimers(d),l&&(c=h.attr(v.strings.href),c=c.split(v.strings.html)[0]+"."+l+v.strings.html+"?offerId="+e,h.attr(v.strings.href,c))}),s.$root.on("modal.close",function(){a.isFunction(v.events.onCloseOverlay)&&v.events.onCloseOverlay.call(null,b)})}function n(a){var c=o(a.id),d="",f="";a.additionalTitle&&a.additionalTitle.headline&&a.additionalTitle.strapline&&(d=a.additionalTitle.headline,f=a.additionalTitle.strapline),v.analyticsManager.storeJourneyData("offer",b.now(),{offerId:a.id,offerUrl:c,offerTypeTitle:a.offerTypeTitle,offerHeadline:a.title.headline,offerStrapline:a.title.strapline,offerAdditionalHeadline:d,offerAdditionalStrapline:f,offerHighlight:a.highlight,vehicleModel:v.modelCode,vehicleId:v.vehicleId,vehicleCategory:v.vehicleCategories}),e.saveItem(v.localStorageKey,{offerId:a.id,offerUrl:c,offerModelName:a.model.name,offerApplicability:a.applicability,offerCaveat:a.caveat,offerTypeTitle:a.offerTypeTitle,offerStatus:a.status,offerHeadline:a.title.headline,offerStrapline:a.title.strapline,offerAdditionalHeadline:d,offerAdditionalStrapline:f,offerHighlight:a.highlight,offerRegion:a.region,offerValidity:a.validity})}function o(a){var b=location.href;return location.hash?b=b.substring(0,location.href.lastIndexOf(location.hash)):"#"===b.slice(-1)&&(b=b.slice(0,-1)),b+="#offerId="+encodeURIComponent(a)}function p(a,b){var c=v.analyticsManager.trackingVars.contentDisplayed,d=v.analyticsManager.getTrackingObjectProperties(c),e=b.parents(v.selectors.offerComp).length?v.CONSTANTS.C194B:b.parents(v.selectors.c_197B).length?v.CONSTANTS.C197B:v.CONSTANTS.C018B,f={};f[d.componentId]=e,f[d.destination]=b.attr(v.strings.href),f[d.locationInPage]=v.CONSTANTS.OFFERS,f[d.buttonText]=b.text(),f[d.offerId]=a.id,f[d.offerText]=a.title.headline,v.analyticsManager.track(c,f)}function q(a,b){var c=v.analyticsManager.trackingVars.genericClick,d=v.analyticsManager.getTrackingObjectProperties(c),e={};e[d.componentId]=w,e[d.destination]=b.attr("href"),e[d.locationInPage]=a.offerTypeTitle+" - "+a.model.name,e[d.buttonText]=b.text(),e[d.contentAction]=b.data("action"),e[d.offerId]=a.id,e[d.offerText]=a.title.headline,v.analyticsManager.track(c,e)}var r,s,t,u={selectors:{root:".c_193B-0",template:"#template-c_193B-0",actions:".actions a",actionsPrint:'.actions a[data-action="print"]',accordionHeader:".accordion-header",logoPrint:".logo-print",imageDisclaimer:".image-disclaimer",imageToPrint:".vehicle-image .picture-element span:last-child",legalNoticesSourceContainer:".c_197B-0 > .legalNotices, .c_194B-0 .legalNotices",legalNoticesTargetContainer:".legal-notices",legalNoticeToPrint:".c_029B",titleToPrint:".c_023-1 > .heading-group h1 span",c_197B:".c_197B-0",offerComp:".c_194B-0",dealerCta:"a[role=menuitem]"},events:{onCloseOverlay:a.noop},data:{offer:"offer",dealerDma:"dealerDma"},classes:{accordionOpen:"accordion-group-open"},localStorageKey:"offerData",strings:{html:".html",href:"href"},mode:{print:"print"},CONSTANTS:{OFFERS:"offers",C194B:"C194.0B_Offers_Hub",C197B:"C197.0B_Model_Specific_Offers_Listing",C018B:"C18.0B_Universal_Offers_Promo"},window:window},v=null,w="C193B_Model_Specific_Offer_Detail";return{init:g,loadOverlay:m,populateOfferOnLocalStorage:n}}),define("c_018B_1",["jquery","handlebars","handlebarsHelpersLogic","c_193B_0","remoteServices","getConfiguratorCode","disclaimers","pictureFill"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a.closest(p.selectors.root).data(p.data.offer)}function j(b){return p=a.extend({},n,b),k=a(p.selectors.root),d.init({analyticsManager:p.analyticsManager,modelCode:p.modelCode,vehicleId:p.vehicleId,vehicleCategories:p.vehicleCategories,events:{onCloseOverlay:p.events.onCloseOverlay,onClick:p.events.onClick}}),new m(b)}var k,l,m,n={selectors:{root:".c_018B-1",btnViewDetail:".cta-view-more",template:"#template-c_018B-1",responsiveImages:".picture-element",ctas:".actions li a",tooltipLabel:".tooltip-label",tooltipPanel:".tooltip-panel",btnPrimary:".primary > a",btnSecondary:".secondary > a",dataPath:"data-datapath",target:"target"},data:{offer:"offer",modelCode:"model-code",gradeCode:"grade-code",versionCode:"version-code",urlExtension:"url-extension",href:"href"},events:{onCloseOverlay:a.noop,click:"click"},classes:{clickableImage:"clickable-image",dataTooltipId:"data-tooltip-id",show:"show"},CONSTANTS:{CONFIGURE:"#configure/",TARGETBLANK:"_blank",TARGETPARENT:"_parent",OFFERS:"offers"}},o="C18.0B_Universal_Offers_Promo",p=null;return m=function(b){this.settings=a.extend({},n,b),this.modal=d,this.$root=a(this.settings.selectors.root)},m.prototype={getOfferFromComponent:function(a){return a.closest(this.settings.selectors.root).data(this.settings.data.offer)},trackClickCta:function(a,b){var c=p.analyticsManager.trackingVars.genericClick,d=p.analyticsManager.getTrackingObjectProperties(c),e={};e[d.componentId]=o,e[d.destination]=b.attr(p.data.href),e[d.locationInPage]=p.CONSTANTS.OFFERS,e[d.buttonText]=b.text(),e[d.offerId]=a.id,e[d.offerText]=a.title.headline,p.analyticsManager.track(c,e)},bindEvents:function(){this.$root.on(this.settings.events.click,a.proxy(function(b){var c=a(b.target),d=a(b.currentTarget),e=this.getOfferFromComponent(c);c.is(this.settings.selectors.btnViewDetail)||c.is("img")&&d.data("clickable")?(this.trackClickCta(e,c),this.modal.loadOverlay(e,e.id,c)):(c.is(this.settings.selectors.btnPrimary)||c.is(this.settings.selectors.btnSecondary))&&(b.preventDefault(),this.configureCall(c))},this)),this.$root.find(this.settings.selectors.tooltipLabel).on(this.settings.events.click,this.renderTooltip.bind(this)),this.$root.find(this.settings.selectors.tooltipPanel).on(this.settings.events.click,this.renderTooltip.bind(this))},renderInstanceIn:function(c,d){l||(l=b.compile(a(this.settings.selectors.template).html())),c.html(l(d)),d.table?c.find('.c_018B-1[data-offer-id="'+d.id+'"]').data(this.settings.data.offer,d):e.getOffer(d.id).done(a.proxy(function(a){c.find('.c_018B-1[data-offer-id="'+a.id+'"]').data(this.settings.data.offer,a)},this)),h(c.get(0)),g.renderDisclaimers(c),this.$root=this.$root.add(c.find(this.settings.selectors.root)),this.modal.init({analyticsManager:this.settings.analyticsManager}),d.imageClickable&&(c.find(this.settings.selectors.responsiveImages).addClass(this.settings.classes.clickableImage),c.find(this.settings.selectors.root).data("clickable",d.imageClickable))},renderTooltip:function(b){var c=a(b.currentTarget),d=c.parentsUntil(this.settings.selectors.root),e=this.settings.classes.dataTooltipId,f=this.settings.classes.show,g=c.attr(e),h="["+e+'="'+g+'"]',i=d.find(this.settings.selectors.tooltipPanel+h),j=d.find(this.settings.selectors.tooltipLabel+h),k=i.is(":hidden");j.toggleClass(f,k),i.toggleClass(f,k)},configureCall:function(b){var c=i(b),d=a(b).parents(this.settings.selectors.root).data(this.settings.data.modelCode),e=a(b).parents(this.settings.selectors.root).data(this.settings.data.gradeCode),g=a(b).parents(this.settings.selectors.root).data(this.settings.data.versionCode),h=b.attr(this.settings.selectors.dataPath),j=b.attr(this.settings.data.href),k=b.attr(this.settings.selectors.target),l=b.data(p.data.urlExtension),m=this;this.trackClickCta(c,b),k!==this.settings.CONSTANTS.TARGETBLANK&&(k=this.settings.CONSTANTS.TARGETPARENT),d&&e&&h?f.configureRemoteServices(d,e,g,h,j,l).done(function(a){b.attr(m.settings.data.href,a),b.removeAttr(m.settings.selectors.dataPath),p.window.open(a,k)}).fail(function(){p.window.open(j,k)}):p.window.open(j,k)}},{init:j}}),define("c_018B_0",["jquery","underscore","matchHeight","remoteServices","handlebars","trackingCodes","c_018B_1","c_073"],function(a,b,c,d,e,f,g,h){"use strict";function i(b){var c=a(b.currentTarget),d=c.attr("href"),e=F.find(S.selectors.allOffers).text(),f=S.analyticsManager,g=f.trackingVars.genericClick,h=f.getTrackingObjectProperties(g),i={};i[h.componentId]=U,i[h.destination]=d,i[h.locationInPage]=S.analyticsValues.locationInPage,i[h.buttonText]=e,f.track(g,i)}function j(){F.find(S.selectors.fallback).removeClass(S.classes.hidden)}function k(){F.find(S.selectors.fallback).addClass(S.classes.hidden)}function l(){var a=F.find(S.selectors.results).find("> li");3===a.length?a.addClass(S.classes.offers_3):2===a.length?a.addClass(S.classes.offers_2):a.addClass(S.classes.offers_1)}function m(){S.matchHeight.forEach(function(b){a(b).matchHeight()})}function n(){var b,c=F.find(S.selectors.results),d=a(S.selectors.offersTemplate),f=F.data("clickable"),g=d.data(S.data.primaryCtaType),h=d.data(S.data.primaryCtaLabel),i=d.data(S.data.primaryCtaLink),j=d.data(S.data.secondaryCtaType),k=d.data(S.data.secondaryCtaLabel),m=d.data(S.data.secondaryCtaLink),n=HELIOS.components.c_018B.offersCTAJson,p={};n&&(n=JSON.parse(n)),p.ctas={},g&&(p.ctas.primaryCta={type:g,label:h,link:i}),j&&(p.ctas.secondaryCta={type:j,label:k,link:m}),H||(H=e.compile(S.templates.offerCardContainer)),a.each(T,function(a,d){d.imageClickable=f,c.append(H(d)),b=c.find("li["+S.data.id+'="'+d.id+'"]:last'),d.ctaObj=o(d,p.ctas,n),P.renderInstanceIn(b,d)}),l(),P.bindEvents()}function o(a,c,d){var e,f,g={};return a.model&&b.each(c,function(b,c){g[c]=g[c]||{},c!==S.CONSTANTS.PRIMARY&&c!==S.CONSTANTS.SECONDARY||(g[c].type=c),b.type===S.CONSTANTS.INTERNAL?(g[c].label=b.label,f=p(decodeURI(b.link),a),g[c].path=f):d[a.model.code]&&(e=a.model.code,(b.type===S.CONSTANTS.CONFIGURE_FALL_INVENTORY||b.type===S.CONSTANTS.CONFIGURE_CTA&&d[e].configCTA)&&(g[c].label=d[e].ctaLabel,g[c].path=p(decodeURI(d[e].ctaPath),a),g[c].dataPath=d[e].dataPath,g[c].deepLinkString=d[e].deepLinkString||"",d[e].openInNewWindow&&(g[c].newWindow=S.htmlValue.targetBlank)),d[e].configCTA||(b.type===S.CONSTANTS.CONFIGURE_FALL_INVENTORY?delete g[c].dataPath:b.type===S.CONSTANTS.CONFIGURE_CTA&&delete g[c]))}),g}function p(a,b){var c=b.model.code,d=b.model.name,e=S.CONSTANTS.EMPTY_STRING,f=S.CONSTANTS.EMPTY_STRING;return b.grade&&(e=b.grade.code),b.version&&(f=b.version.code),a=a.replace("^MODEL_CODE^",c).replace("^GRADE_CODE^",e).replace("^VERSION_CODE^",f).replace("^MODEL_NAME^",d),encodeURI(a)}function q(c){var d=T&&T.length;switch(d?(n(),a(S.selectors.img,S.selectors.results).load(b.debounce(m,250))):(j(),d=0),J){case L.autoAdjust:case L.geolocation:h.buildAnalyticsGeneralSearchData(J,c,V,d,U);break;case L.userSearch:h.buildAnalyticsGeneralSearchData(J,c,V,d,U,O)}F.removeClass(S.classes.loading),C(d)}function r(a,b){var c=a.split(",");c[0]&&T.length<S.config.offersToShow?d.getOffer(c[0]).done(function(a){c.shift(),T.push(a),r(c.join(","))}).fail(function(){q()}):q(b)}function s(a){return a.replace(/-/g,", &nbsp;")}function t(a){var b=F.find(S.selectors.headingGroup),c=u(a);b.html(c)}function u(a){return Q?a?s(a)+" "+F.data(S.data.headerAvailableOffers):F.data(S.data.headerDefault):F.data(S.data.headerTitle)}function v(a,b){d.getOffersByQuery(a).done(function(a){a&&a.hasOwnProperty("offers")&&a.offers.constructor===Array&&(T=a.offers.slice(0,S.config.offersToShow)),t(a.marketingGroupName),q(b)}).fail(function(){t(),q(b)})}function w(a){return"location="+a}function x(b,c){var d=a.trim(F.data(S.data.queryString)),e=-1!==d.indexOf(S.config.category),f=F.data(S.data.offerIds);y(),W&&b&&(d+="&"+w(b)),f&&!d?r(f,c):(e||(d.length?d+="&"+S.config.defaultQuery:d+=S.config.defaultQuery),v(d,c))}function y(){T=[],F.find(S.selectors.results).html(""),k()}function z(){W=!!F.find(S.selectors.location).length}function A(){F.addClass(S.classes.loading),W?E().get().done(function(a){I=a&&a.hasOwnProperty(N.postalCode)?a.postalCode:"",x(I,a)}).fail(function(){I="",x()}):(I="",x())}function B(){F.find(S.selectors.allOffers).on(S.events.click,i),W&&(a(document).on(S.events.locationChanged+" "+S.events.setHeliosLocationByAutocomplete+" "+S.events.setHeliosLocationByGeolocate,A),G.on(M.offersResultsByAutoAdjust,function(){J=L.autoAdjust}).on(M.offersResultsByGeolocation,function(){J=L.geolocation}).on(M.offersResultsByUserSearch,function(a,b){J=L.userSearch,O=b}))}function C(a){var b="href",c=F.find(S.selectors.allOffers);a?c.html(F.data(S.data.allOffersLabel)).attr(b,F.data(S.data.allOffersTarget)):c.html(F.data(S.data.noOffersLabel)).attr(b,F.data(S.data.noOffersTarget))}function D(b){var c;if(S=a.extend({},R,b),F=a(S.selectors.root),G=a(S.selectors.location),M=S.analyticsEvents,N=S.heliosLocationProperties,K=f.trackingVars.search,L=K.searchTermType,c=a(S.selectors.root).data(S.data.headerToken),Q=Boolean(c),!F.length)return!1;P=g.init({analyticsManager:S.analyticsManager,window:S.window}),z(),A(),B()}function E(){return S.smartLocationContext}var F,G,H,I,J,K,L,M,N,O,P,Q,R={classes:{hidden:"hidden",offers_3:"offers-3",offers_2:"offers-2",offers_1:"offers-1",loading:"loading"},selectors:{root:".c_018B-0",offersTemplate:".c_018B-0.offers-list-template",fallback:".c_018B-2",location:".c_073",overlayTemplate:".more-detail",lessDetail:".less-detail",results:".offers",allOffers:".cta-view-all",headingGroup:".heading-group h2",img:"img"},data:{queryString:"query-string",offerIds:"offer-ids",id:"data-id",allOffersLabel:"cta-all-offers-label",noOffersLabel:"cta-no-offers-label",allOffersTarget:"cta-all-offers-target",noOffersTarget:"cta-no-offers-target",primaryCtaType:"primary-cta-type",primaryCtaLabel:"primary-internal-cta-label",primaryCtaLink:"primary-internal-cta-url",secondaryCtaType:"secondary-cta-type",secondaryCtaLabel:"secondary-internal-cta-label",secondaryCtaLink:"secondary-internal-cta-url",dataPath:"datapath",headerDefault:"header-dma-default",headerTitle:"header-title",headerToken:"header-token",headerAvailableOffers:"header-offers-available-label"},templates:{offerCardContainer:'<li data-id="{{id}}"></li>'},config:{offersToShow:3,defaultQuery:"category=New%20Offers",category:"category="},heliosLocationProperties:{postalCode:"postalCode"},analyticsEvents:{offersResultsByUserSearch:"OFFERS_RESULTS_BY_USERSEARCH",offersResultsByGeolocation:"OFFERS_RESULTS_BY_GEOLOCATION",offersResultsByAutoAdjust:"OFFERS_RESULTS_BY_AUTOADJUST"},events:{click:"click",locationChanged:"universalLocationChanged",setHeliosLocationByAutocomplete:"setHeliosLocationByAutocomplete",setHeliosLocationByGeolocate:"setHeliosLocationByGeolocate"},analyticsValues:{locationInPage:"vehicle-offer"},CONSTANTS:{PRIMARY:"primaryCta",SECONDARY:"secondaryCta",CONFIGURE_CTA:"configure-cta",CONFIGURE_FALL_INVENTORY:"configure-fall-inventory",INTERNAL:"cta-internal",EMPTY_STRING:""},htmlValue:{targetBlank:"_blank"},matchHeight:[".headline",".header-strapline",".header-highlight",".offer-header",".offer-status",".offer-info",".offer-MSRP",".vehicle-image",".offer-bottom  .image-disclaimer",".legal-information",".actions"]},S=null,T=[],U="C18B_Universal_Promotion",V="offer promotion",W=!0;return{init:D}}),define("c_018_2",["jquery","underscore","goTo"],function(a,b,c){"use strict";function d(b){var c;return c=a(f.selectors.root),!!c.length&&new e(b)}var e,f={classes:{clickableImage:"clickable-image"},selectors:{root:".c_018-2",ctaViewAll:".cta-view-all",imageSelector:".picture-element"}};return e=function(b){this.settings=a.extend({},f,b),this.$root=a(this.settings.selectors.root),this.isClickable=this.$root.parent().data("clickable"),this.$ctaOffers=this.$root.parent().find(this.settings.selectors.ctaViewAll),this.isClickable&&this.$root.find(this.settings.selectors.imageSelector).addClass(this.settings.classes.clickableImage),this.bindEvents()},e.prototype={bindEvents:function(){this.$root.on("click",a.proxy(function(b){
a(b.target).is("img")&&this.isClickable&&this.handleClickImage(b)},this))},handleClickImage:function(a){var d=this.$ctaOffers.attr("href"),e=this.$ctaOffers.attr("target");b.isString(d)&&d.length&&c.run(e,d)}},{init:d}}),define("c_018B_2",["jquery","underscore","goTo"],function(a,b,c){"use strict";function d(b){var c;return c=a(f.selectors.root),!!c.length&&new e(b)}var e,f={classes:{clickableImage:"clickable-image"},selectors:{root:".c_018B-2",ctaViewAll:".cta-view-all",imageSelector:".picture-element"}};return e=function(b){this.settings=a.extend({},f,b),this.$root=a(this.settings.selectors.root),this.isClickable=this.$root.parent().data("clickable"),this.$ctaOffers=this.$root.parent().find(this.settings.selectors.ctaViewAll),this.isClickable&&this.$root.find(this.settings.selectors.imageSelector).addClass(this.settings.classes.clickableImage),this.bindEvents()},e.prototype={bindEvents:function(){this.$root.on("click",a.proxy(function(b){a(b.target).is("img")&&this.isClickable&&this.handleClickImage(b)},this))},handleClickImage:function(a){var d=this.$ctaOffers.attr("href"),e=this.$ctaOffers.attr("target");b.isString(d)&&d.length&&c.run(e,d)}},{init:d}}),define("markerclusterer",[],function(){function a(b,c){b.getMarkerClusterer().extend(a,google.maps.OverlayView),this.cluster_=b,this.className_=b.getMarkerClusterer().getClusterClass(),this.styles_=c,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(b.getMap())}function b(b){this.markerClusterer_=b,this.map_=b.getMap(),this.gridSize_=b.getGridSize(),this.minClusterSize_=b.getMinimumClusterSize(),this.averageCenter_=b.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new a(this,b.getStyles())}function c(a,b,d){this.extend(c,google.maps.OverlayView),b=b||[],d=d||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=d.gridSize||60,this.minClusterSize_=d.minimumClusterSize||2,this.maxZoom_=d.maxZoom||null,this.styles_=d.styles||[],this.title_=d.title||"",this.zoomOnClick_=!0,void 0!==d.zoomOnClick&&(this.zoomOnClick_=d.zoomOnClick),this.averageCenter_=!1,void 0!==d.averageCenter&&(this.averageCenter_=d.averageCenter),this.ignoreHidden_=!1,void 0!==d.ignoreHidden&&(this.ignoreHidden_=d.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==d.enableRetinaIcons&&(this.enableRetinaIcons_=d.enableRetinaIcons),this.imagePath_=d.imagePath||c.IMAGE_PATH,this.imageExtension_=d.imageExtension||c.IMAGE_EXTENSION,this.imageSizes_=d.imageSizes||c.IMAGE_SIZES,this.calculator_=d.calculator||c.CALCULATOR,this.batchSize_=d.batchSize||c.BATCH_SIZE,this.batchSizeIE_=d.batchSizeIE||c.BATCH_SIZE_IE,this.clusterClass_=d.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(b,!0),this.setMap(a)}return a.prototype.onAdd=function(){var a,b,c=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){b=a}),google.maps.event.addDomListener(this.div_,"mousedown",function(){a=!0,b=!1}),google.maps.event.addDomListener(this.div_,"click",function(d){if(a=!1,!b){var e,f,g=c.cluster_.getMarkerClusterer();google.maps.event.trigger(g,"click",c.cluster_),google.maps.event.trigger(g,"clusterclick",c.cluster_),g.getZoomOnClick()&&(f=g.getMap().getZoom(),g.getMaxZoom(),e=c.cluster_.getBounds(),g.getMap().fitBounds(e),setTimeout(function(){g.getMap().fitBounds(e),g.getMap().getZoom()===f&&g.getMap().setZoom(f+1)},100)),d.cancelBubble=!0,d.stopPropagation&&d.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var a=c.cluster_.getMarkerClusterer();google.maps.event.trigger(a,"mouseover",c.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var a=c.cluster_.getMarkerClusterer();google.maps.event.trigger(a,"mouseout",c.cluster_)})},a.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},a.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px",this.div_.style.left=a.x+"px"}},a.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},a.prototype.show=function(){if(this.div_){var a="",b=this.backgroundPosition_.split(" "),c=parseInt(b[0].replace(/^\s+|\s+$/g,""),10),d=parseInt(b[1].replace(/^\s+|\s+$/g,""),10),e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.url_&&""!==this.url_&&(a="<img src='"+this.url_+"' style='position: absolute; top: "+d+"px; left: "+c+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(a+="clip: rect("+-1*d+"px, "+(-1*c+this.width_)+"px, "+(-1*d+this.height_)+"px, "+-1*c+"px);"),a+="'>"),this.div_.innerHTML=a+"<div class='"+this.innerClassName+"'style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;'>"+this.sums_.text+"</div>",void 0===this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},a.prototype.useStyle=function(a){var b="single-digit";this.sums_=a;var c=Math.max(0,a.index-1);c=Math.min(this.styles_.length-1,c);var d=this.styles_[c];1*a.text<10?this.innerClassName=b:this.innerClassName="",this.url_=d.url,this.height_=d.height,this.width_=d.width,this.anchorText_=d.anchorText||[0,0],this.anchorIcon_=d.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=d.textColor||"black",this.textSize_=d.textSize||11,this.textDecoration_=d.textDecoration||"none",this.fontWeight_=d.fontWeight||"bold",this.fontStyle_=d.fontStyle||"normal",this.fontFamily_=d.fontFamily||"Arial,sans-serif",this.backgroundPosition_=d.backgroundPosition||"0 0"},a.prototype.setCenter=function(a){this.center_=a},a.prototype.createCss=function(a){var b=[];return b.push("cursor: pointer;"),b.push("position: absolute; top: "+a.y+"px; left: "+a.x+"px;"),b.push("width: "+this.width_+"px; height: "+this.height_+"px;"),b.join("")},a.prototype.getPosFromLatLng_=function(a){var b=this.getProjection().fromLatLngToDivPixel(a);return b.x-=this.anchorIcon_[1],b.y-=this.anchorIcon_[0],b.x=parseInt(b.x,10),b.y=parseInt(b.y,10),b},b.prototype.getSize=function(){return this.markers_.length},b.prototype.getMarkers=function(){return this.markers_},b.prototype.getCenter=function(){return this.center_},b.prototype.getMap=function(){return this.map_},b.prototype.getMarkerClusterer=function(){return this.markerClusterer_},b.prototype.getBounds=function(){var a,b=new google.maps.LatLngBounds(this.center_,this.center_),c=this.getMarkers();for(a=0;a<c.length;a++)b.extend(c[a].getPosition());return b},b.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},b.prototype.addMarker=function(a){var b,c,d;if(this.isMarkerAlreadyAdded_(a))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,f=(this.center_.lat()*(e-1)+a.getPosition().lat())/e,g=(this.center_.lng()*(e-1)+a.getPosition().lng())/e;this.center_=new google.maps.LatLng(f,g),this.calculateBounds_()}}else this.center_=a.getPosition(),this.calculateBounds_();if(a.isAdded=!0,this.markers_.push(a),c=this.markers_.length,null!==(d=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>d)a.getMap()!==this.map_&&a.setMap(this.map_);else if(c<this.minClusterSize_)a.getMap()!==this.map_&&a.setMap(this.map_);else if(c===this.minClusterSize_)for(b=0;b<c;b++)this.markers_[b].setMap(null);else a.setMap(null);return this.updateIcon_(),!0},b.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())},b.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)},b.prototype.updateIcon_=function(){var a=this.markers_.length,b=this.markerClusterer_.getMaxZoom();if(null!==b&&this.map_.getZoom()>b)return void this.clusterIcon_.hide();if(a<this.minClusterSize_)return void this.clusterIcon_.hide();var c=this.markerClusterer_.getStyles().length,d=this.markerClusterer_.getCalculator()(this.markers_,c);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(d),this.clusterIcon_.show()},b.prototype.isMarkerAlreadyAdded_=function(a){var b;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(a);for(b=0;b<this.markers_.length;b++)if(a===this.markers_[b])return!0;return!1},c.prototype.onAdd=function(){var a=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){a.resetViewport_(!1),this.getZoom()!==(this.get("minZoom")||0)&&this.getZoom()!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){a.redraw_()})]},c.prototype.onRemove=function(){var a;for(a=0;a<this.markers_.length;a++)this.markers_[a].getMap()!==this.activeMap_&&this.markers_[a].setMap(this.activeMap_);for(a=0;a<this.clusters_.length;a++)this.clusters_[a].remove();for(this.clusters_=[],a=0;a<this.listeners_.length;a++)google.maps.event.removeListener(this.listeners_[a]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},c.prototype.draw=function(){},c.prototype.setupStyles_=function(){var a,b;if(!(this.styles_.length>0))for(a=0;a<this.imageSizes_.length;a++)b=this.imageSizes_[a],this.styles_.push({url:this.imagePath_+(a+1)+"."+this.imageExtension_,height:b,width:b})},c.prototype.fitMapToMarkers=function(){var a,b=this.getMarkers(),c=new google.maps.LatLngBounds;for(a=0;a<b.length;a++)c.extend(b[a].getPosition());this.getMap().fitBounds(c)},c.prototype.getGridSize=function(){return this.gridSize_},c.prototype.setGridSize=function(a){this.gridSize_=a},c.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},c.prototype.setMinimumClusterSize=function(a){this.minClusterSize_=a},c.prototype.getMaxZoom=function(){return this.maxZoom_},c.prototype.setMaxZoom=function(a){this.maxZoom_=a},c.prototype.getStyles=function(){return this.styles_},c.prototype.setStyles=function(a){this.styles_=a},c.prototype.getTitle=function(){return this.title_},c.prototype.setTitle=function(a){this.title_=a},c.prototype.getZoomOnClick=function(){return this.zoomOnClick_},c.prototype.setZoomOnClick=function(a){this.zoomOnClick_=a},c.prototype.getAverageCenter=function(){return this.averageCenter_},c.prototype.setAverageCenter=function(a){this.averageCenter_=a},c.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},c.prototype.setIgnoreHidden=function(a){this.ignoreHidden_=a},c.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},c.prototype.setEnableRetinaIcons=function(a){this.enableRetinaIcons_=a},c.prototype.getImageExtension=function(){return this.imageExtension_},c.prototype.setImageExtension=function(a){this.imageExtension_=a},c.prototype.getImagePath=function(){return this.imagePath_},c.prototype.setImagePath=function(a){this.imagePath_=a},c.prototype.getImageSizes=function(){return this.imageSizes_},c.prototype.setImageSizes=function(a){this.imageSizes_=a},c.prototype.getCalculator=function(){return this.calculator_},c.prototype.setCalculator=function(a){this.calculator_=a},c.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},c.prototype.setBatchSizeIE=function(a){this.batchSizeIE_=a},c.prototype.getClusterClass=function(){return this.clusterClass_},c.prototype.setClusterClass=function(a){this.clusterClass_=a},c.prototype.getMarkers=function(){return this.markers_},c.prototype.getTotalMarkers=function(){return this.markers_.length},c.prototype.getClusters=function(){return this.clusters_},c.prototype.getTotalClusters=function(){return this.clusters_.length},c.prototype.addMarker=function(a,b){this.pushMarkerTo_(a),b||this.redraw_()},c.prototype.addMarkers=function(a,b){var c;for(c in a)a.hasOwnProperty(c)&&this.pushMarkerTo_(a[c]);b||this.redraw_()},c.prototype.pushMarkerTo_=function(a){if(a.getDraggable()){var b=this;google.maps.event.addListener(a,"dragend",function(){b.ready_&&(this.isAdded=!1,b.repaint())})}a.isAdded=!1,this.markers_.push(a)},c.prototype.removeMarker=function(a,b){var c=this.removeMarker_(a);return!b&&c&&this.repaint(),c},c.prototype.removeMarkers=function(a,b){var c,d,e=!1;for(c=0;c<a.length;c++)d=this.removeMarker_(a[c]),e=e||d;return!b&&e&&this.repaint(),e},c.prototype.removeMarker_=function(a){var b,c=-1;if(this.markers_.indexOf)c=this.markers_.indexOf(a);else for(b=0;b<this.markers_.length;b++)if(a===this.markers_[b]){c=b;break}return-1!==c&&(a.setMap(null),this.markers_.splice(c,1),!0)},c.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},c.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var b;for(b=0;b<a.length;b++)a[b].remove()},0)},c.prototype.getExtendedBounds=function(a){var b=this.getProjection(),c=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),d=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng()),e=b.fromLatLngToDivPixel(c);e.x+=this.gridSize_,e.y-=this.gridSize_;var f=b.fromLatLngToDivPixel(d);f.x-=this.gridSize_,f.y+=this.gridSize_;var g=b.fromDivPixelToLatLng(e),h=b.fromDivPixelToLatLng(f);return a.extend(g),a.extend(h),a},c.prototype.redraw_=function(){this.createClusters_(0)},c.prototype.resetViewport_=function(a){var b,c;for(b=0;b<this.clusters_.length;b++)this.clusters_[b].remove();for(this.clusters_=[],b=0;b<this.markers_.length;b++)c=this.markers_[b],c.isAdded=!1,a&&c.setMap(null)},c.prototype.distanceBetweenPoints_=function(a,b){var c=(b.lat()-a.lat())*Math.PI/180,d=(b.lng()-a.lng())*Math.PI/180,e=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a.lat()*Math.PI/180)*Math.cos(b.lat()*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return 2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))*6371},c.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())},c.prototype.addToClosestCluster_=function(a){var c,d,e,f,g=4e4,h=null;for(c=0;c<this.clusters_.length;c++)e=this.clusters_[c],(f=e.getCenter())&&(d=this.distanceBetweenPoints_(f,a.getPosition()))<g&&(g=d,h=e);h&&h.isMarkerInClusterBounds(a)?h.addMarker(a):(e=new b(this),e.addMarker(a),this.clusters_.push(e))},c.prototype.createClusters_=function(a){var b,c,d,e=this;if(this.ready_){0===a&&(google.maps.event.trigger(this,"clusteringbegin",this),void 0!==this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),d=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var f=this.getExtendedBounds(d),g=Math.min(a+this.batchSize_,this.markers_.length);for(b=a;b<g;b++)c=this.markers_[b],!c.isAdded&&this.isMarkerInBounds_(c,f)&&(!this.ignoreHidden_||this.ignoreHidden_&&c.getVisible())&&this.addToClosestCluster_(c);g<this.markers_.length?this.timerRefStatic=setTimeout(function(){e.createClusters_(g)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},c.prototype.extend=function(a,b){return function(a){var b;for(b in a.prototype)this.prototype[b]=a.prototype[b];return this}.apply(a,[b])},c.CALCULATOR=function(a,b){for(var c=0,d="",e=a.length.toString(),f=e;0!==f;)f=parseInt(f/10,10),c++;return c=Math.min(c,b),{text:e,index:c,title:d}},c.BATCH_SIZE=2e3,c.BATCH_SIZE_IE=50,c.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",c.IMAGE_EXTENSION="png",c.IMAGE_SIZES=[53,56,66,78,90],c}),define("c_022",["jquery","googleMapsSingleton","markerclusterer","stateStoreFactory","logger","handlebars","backbone","disclaimers","underscore"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b,c){var d,e=1e3,f=900,g=c||0,h=a.get("oldZIndex"),i=a.getZIndex();return void 0===h&&(h=i,a.set("oldZIndex",i)),d="active"===b?e:"result"===b?f-g:h,a.setZIndex(d),a}function k(){return window.HELIOS&&window.HELIOS.components&&window.HELIOS.components.c_022?window.HELIOS.components.c_022.settings:{styles:[],cluster:null,geoMarker:null,logos:null,height:"54",width:"49",paddSingleDigits:!0,clusters:[{textColor:"",fontFamily:"",textSize:"",height:"",width:"",url:""}]}}function l(a,c,d){if(void 0!==b)return new n(a,c,d)}var m,n,o,p,q={dealerDetailContainerSelect:".map-results",detailsLoadingClass:"is-loading",isGeolocated:a.noop,listViewTriggerSelector:".btn-view-list",activeClass:"is-active",rootSelector:".c_022",formBuilderSelector:".c_019",selectDealerButtonSelector:".btn-select-this-dealer",autoSelectFirstDealerInCollection:!1,buttonSelect:".btn-select",buttonPrev:".js-btn-prev",buttonNext:".js-btn-next",inactiveClass:"inactive",backToMyAccountWrapper:".back-to-my-account-wrapper",backToMyAccountCloseButton:".back-to-my-account-wrapper i.close",markerCreationBatchSize:1e4,markerCreationBatchSizeIE:1e3,events:{dealerSelected:"map.dealerSelected"},data:{activeDealerType:"active-dealer-type"}},r={streetViewControl:!1,maxZoom:17,minZoom:1,zoom:8,draggable:!0,scrollwheel:!0,zoomControl:!0,panControl:!0},s="helios-map",t="map-instance",u=0,v=".lb_template_c-40-3_list",w={},x=12,y="is-showing-detail",z="C22_Dealer_Map";return f.registerHelper("pageCount",function(a,b){var c=b.hash.pattern;return'<span class="page-count">'+(c&&""!==c?c.replace("%num%",a.position).replace("%total%",a.resultsTotal):a.position+" / "+a.resultsTotal)+"</span>"}),n=function(a,c,d){var e=this;return b.getDeferred().done(function(){e.init(a,c,d)}),this},n.prototype={instanceId:null,$el:null,settings:null,mapSettings:null,map:null,dealerTemplate:null,collectionInstance:!1,resultsList:[],geoMarkerInstance:null,activeDealer:!1,isDealerSelected:!1,icons:{geo:null},clusterStyles:null,labelanchorLeft:null,labelanchorTop:null,markerCluster:null,clusterLevel:60,clusteredMarkers:{},autoSelectFirstDealerInCollection:!1,zoomOnMarkerActive:!1,batcherDeferred:null,chosenDealerId:null,promise:function(){return b.getDeferred().promise()},init:function(b,c,g){var h,i,j,l=k(),n=this,r=a(b);m=a(q.rootSelector),o=new e({prefix:"C22"}),o.info("init"),this.$el=r,this.settings=a.extend({},q,c),p=d.create(),this.mapSettings=a.extend({},this.getGMapSettings(r,l),c),this.setMarkerSettings(l),i=s+(u+=1)+"",w[i]=this,r.attr(t,i),h=new google.maps.Map(b,this.mapSettings),c.idle&&google.maps.event.addListenerOnce(h,"idle",function(){c.idle()}),this.instanceId=i,this.map=h,g&&g.length&&(this.collectionInstance=g,this.collectionInstance.bind("change:visible",a.proxy(this.filterMarkers,n)).bind("change:position",this.updateMarker,this).bind("change:all",a.proxy(this.updateResults,n))),a(this.settings.dealerDetailContainerSelect).on("click",q.buttonSelect,a.proxy(this.dealerSelection,this)).on("click",q.buttonPrev,q.buttonNext,a.proxy(this.dealerPagination,this)),this.collectionInstance&&this.initMarkers(r,c),j=a(v),j.length&&(this.dealerTemplate=f.compile(j.html()))},autoAdjustZoomOverMarkers:function(b){var c,d,e=parseInt(this.settings.autoZoomOutLimit),f=parseInt(this.settings.minMarkersVisible),g=this.map.getZoom(),h=parseInt(this.settings.preferredZoom),i=this.settings.ActiveDealersCallback(),j=this.map,k=new google.maps.Geocoder,l=this;this.settings.minMarkersVisible||(f=6),this.settings.autoZoomOutLimit||(e=3),this.settings.preferredZoom||(h=14),f>i.length&&(f=i.length),g=h&&h>=e?h:e,this.map.setZoom(g),c=a(".c_152-0 input.location-value").val(),c?(d=c.split(","),this.getAutoSelectFirstDealerInCollection()?this.zoomOnMarker(i[0].attributes.marker):(j.setCenter(new google.maps.LatLng(d[0],d[1])),l.loopThroughZoomLevels(l,i,f,e,g)),m.parents(".c_040").attr("data-current-zoom-level",l.map.getZoom())):b&&k.geocode({address:b},function(a,b){b==google.maps.GeocoderStatus.OK?(j.setCenter(a[0].geometry.location),l.loopThroughZoomLevels(l,i,f,e,g),m.closest(".c_040").attr("data-current-zoom-level",l.map.getZoom())):o.warn("Could not pan map to search location: "+b)})},loopThroughZoomLevels:function(a,b,c,d,e){var f,g=this.getNumberOfVisibleMarkers(a.map,b);if(o.info("Minimum markers visible: "+c+", Auto Zoom Limit: "+d),b.length>0)for(f=e;f>=1&&(o.info("Autozooming... visible markers: "+g+", zoom level: "+f),!(f<=d&&g>=1))&&g<c;f--)a.map.setZoom(f),g=this.getNumberOfVisibleMarkers(a.map,b)},getNumberOfVisibleMarkers:function(a,b){var c,d,e=0,f=a.getBounds();if(f)for(c=0,d=b.length;c<d;c++)f.contains(b[c].attributes.marker.getPosition())&&e++;return e},zoom:function(a){this.map&&this.map.setZoom(a)},refresh:function(){o.info("refresh"),google.maps.event.trigger(this.map,"resize"),this.extendBounds()},getGMapSettings:function(b,c){var d=a.extend({},r,{styles:c.styles});return this.getElemOptions(b,d),d},createIcon:function(a,b,c){var d,e=c.width,f=c.height,g=this.labelanchorLeft,h=this.labelanchorTop,i=null;return a&&""!==a&&(i=a+b),d=""!==b?new google.maps.Point(g,h):new google.maps.Point(g,Math.floor(f/2)),{url:i,origin:new google.maps.Point(0,0),anchor:d,scaledSize:new google.maps.Size(e,f),size:new google.maps.Size(e,f)}},setMarkerSettings:function(b){var c=this,d=".png";return this.clusterStyles=b.clusters,this.labelanchorLeft=Math.floor(b.width/2),this.labelanchorTop=b.height,this.clusterLevel=b.clusterLevel||this.clusterLevel,this.icons={geo:this.createIcon(b.geoMarker,"",b)},b.markerStyles&&a.each(b.markerStyles,function(a,e){c.icons[a+"Active"]=c.createIcon(e.active,d,b),c.icons[a+"Inactive"]=c.createIcon(e.inactive,d,b)}),this},getElemOptions:function(a,b){var c=a.data("lat"),d=a.data("lon"),e=a.data("draggable"),f=a.data("scrollwheel"),g=a.data("zoomcontrol"),h=a.data("pancontrol"),i=a.data("zoom");return void 0!==c&&void 0!==d&&(b.center=new google.maps.LatLng(c,d)),!1===e&&(b.draggable=e),!1===f&&(b.scrollwheel=f),!1===g&&(b.zoomControl=g),!1===h&&(b.panControl=h),i&&(b.zoom=i),this},onShow:function(){var a,b,c=this;c&&c.markerCluster&&i.isFunction(c.markerCluster.getMarkers)?(o.info("onShow"),a=c.markerCluster.getMarkers(),google.maps.event.trigger(this.map,"resize"),this.map.getZoom()<=2&&this.updateResults(),this.activeDealer?this.centerActiveDealer():i.isEmpty(a)||1!==a.length?!a.length&&this.map.showApiResultsOnly?this.centerOnCountry():!i.isEmpty(a)&&a.length>1&&this.refresh():(b=a[0].getPosition(),this.map.setZoom(10),c.map.panTo(b))):o&&o.warn("onShow() instance.markerCluster is undefined!")},setAutoSelectFirstDealerInCollection:function(a){this.autoSelectFirstDealerInCollection=a,this.setZoomOnMarker(this.autoSelectFirstDealerInCollection),this.autoSelectFirstDealerInCollection||(this.activeDealer=!1)},getAutoSelectFirstDealerInCollection:function(){return this.autoSelectFirstDealerInCollection},setZoomOnMarker:function(a){void 0!==typeof a&&(this.zoomOnMarkerActive=a)},getZoomOnMarker:function(){return this.zoomOnMarkerActive},zoomOnMarker:function(a,b){var c=this,d=b||14;c.zoomOnMarkerActive&&(c.map.setZoom(d),setTimeout(function(){c.map.setCenter(a.getPosition())},100))},initMarkers:function(b,c){return o.info("initMarkers"),this.addDealerMarkers(b,c).done(a.proxy(function(a){this.clusteredMarkers=this.clusterMarkers(b,this.clusterStyles,a,this.clusterLevel)},this)),this},trackMarkerClick:function(a){var b,c={},d={},e=a.attributes.address;this.settings.analyticsManager?(b=this.settings.analyticsManager.trackingVars.dealerInteraction,d=this.settings.analyticsManager.getTrackingObjectProperties(b),c[d.componentId]=z,c[d.dealerId]=a.get("id"),c[d.dealerName]=a.get("tradingName"),c[d.dealerType]=a.get("dealerType")||"unknown",c[d.dealerAction]="Map",e?(c[d.dealerAddress]=e.addressLine1?e.addressLine1:"",c[d.dealerAddress]+=e.addressLine2?","+e.addressLine2:"",c[d.dealerAddress]+=e.addressLine3?","+e.addressLine3:"",c[d.dealerAddress]+=e.city?","+e.city:"",c[d.dealerAddress]+=e.postalCode?","+e.postalCode:""):c[d.dealerAddress]="unknown",this.isDealerSelected?this.settings.analyticsManager.append(b,c):(this.settings.analyticsManager.tag(b,c),this.isDealerSelected=!0)):o.warn("analyticsManager not defined")},viewMarker:function(b,c,d){var e,f,g=this.map;if(o.info("viewMarker"),e=b?b.dealerId:null){f=this.collectionInstance.get(e);var h=this;h.loadingDealerDetail().setActiveMarker(f,!0),h.settings.dealerCallback(e).then(a.proxy(function(){this.showDealerDetail(f,!0,d)},h)),!0===c&&g.getZoom()<=x&&(g.setZoom(x+1),g.setCenter(b.getPosition()))}return this},isDealerActiveAndVisible:function(b){var c=this.settings.ActiveDealersCallback("visible"),d=i.pluck(c,"id");return-1!==a.inArray(b,d)},filterMarkers:function(b){var c=[],d=this.settings.ActiveDealersCallback("visible");o.info("filterMarkers"),this.clearMarkers(),this.resultsList=i.pluck(d,"id"),i.each(d,function(a){c.push(a.get("marker"))}),a.when(this.clusterMarkers(this.$el,this.clusterStyles,c,this.clusterLevel)).done(i.bind(function(){b&&this.extendBounds(c)},this))},clearMarkers:function(){i.isNull(this.markerCluster)||this.markerCluster.clearMarkers()},updateResults:function(){var a=this,b=this.settings.ActiveDealersCallback();o.info("updateResults"),a.resultsList=i.pluck(b,"id"),b.length&&a.center(b)},getSelectedDealerId:function(){var a,b=window.HELIOS.state.dealer;return b&&(a=b.id),a},getPreferredDealerId:function(){var a,b=window.HELIOS.state.dealer;return b&&(a=b.preferred),a},removeSelectedDealerId:function(){var a=p.get(),b="dealer",c=a[b];c&&c.id&&(delete c.id,p.set(a))},center:function(b){var c,d,e,f=this,g=f.getSelectedDealerId(),h=f.getPreferredDealerId();return o.info("center"),b&&(g?(c=i.findWhere(b,{id:g}))&&(e=c.get("marker"),f.setZoomOnMarker(!0)):f.getAutoSelectFirstDealerInCollection()?e=b[0].get("marker"):(d=f.chosenDealerId||g||h)&&(c=i.findWhere(b,{id:d}),c?(e=c.get("marker"),f.setZoomOnMarker(!0)):o.warn("dealerId not in collection"))),f.removeSelectedDealerId(),e?f.getZoomOnMarker()&&(f.zoomOnMarker(e),f.viewMarker(e)):(f.removeDealerDetail(),a(this.settings.dealerDetailContainerSelect).trigger("noDealerSelected")),f},centerOnLatLng:function(a){var b,c,d,e,f=this.map,g=f.getBounds(),h=0,i=0,j=new google.maps.LatLngBounds;return o.info("centerOnLatLng"),void 0!==g?(h=g.getNorthEast(),i=g.getSouthWest(),b=a.lat()-h.lat(),c=a.lat()-i.lat(),Math.abs(c)<Math.abs(b)?i=new google.maps.LatLng(i.lat()+(b+c),i.lng()):h=new google.maps.LatLng(h.lat()+(c+b),h.lng()),d=a.lng()-h.lng(),e=a.lng()-i.lng(),Math.abs(e)<Math.abs(d)?i=new google.maps.LatLng(i.lat(),i.lng()+(d+e)):h=new google.maps.LatLng(h.lat(),h.lng()+(e+d)),j.extend(i),j.extend(h)):o.debug("map.getBounds() returned undefined in centerOnLatLng c_022.js"),f.fitBounds(j),this},getCountryGeolocationData:function(){var b,c=this.settings.HELIOS.config.common.api.apigee.countryCode,d=a.Deferred();return o.info("getCountryGeolocationData"),this.countryGeolocationData?d.resolve(this.countryGeolocationData):(b=new google.maps.Geocoder,b.geocode({address:c},i.bind(function(a,b){b===google.maps.GeocoderStatus.OK?(this.countryGeolocationData=a,d.resolve(this.countryGeolocationData)):d.reject()},this))),d.promise()},centerOnCountry:function(){o.info("centerOnCountry"),this.getCountryGeolocationData().done(i.bind(function(a){var b,c;i.isUndefined(a)||(b=a[0].geometry,this.map.setCenter(b.location),c=new google.maps.LatLngBounds,c.union(b.viewport),this.map.fitBounds(c))},this)).fail(function(){o.warn("Could not centre on country. No country geolocation data.")})},checkClusterLevel:function(b,c){var d;return o.info("checkClusterLevel"),d=a(q.listViewTriggerSelector).hasClass(q.activeClass)?c.getMaxZoom():b.getZoom(),d<=c.getMaxZoom()?c.setMaxZoom(d-1):d>x&&c.setMaxZoom(x),this},setActiveMarker:function(a,b){var c,d,e=this.activeDealer,f="is-active-marker",g=a.get("markerStyle");return o.info("setActiveMarker("+b+")"),e&&(c=this.collectionInstance.get(e),this.activeDealer=!1,this.setActiveMarker(c,!1)),this.$el.data(q.data.activeDealerType,a.get("dealerType")),c=a.get("marker"),d=c.get("labelClass"),d=d.replace(f,""),b?(d=d+" "+f,this.setMarkerIcon(c,g,!0),j(c,"active"),this.activeDealer=a.get("id"),this.$el.trigger(this.settings.events.dealerSelected)):(this.setMarkerIcon(c,g,!1),j(c,!1)),window.HELIOS.state.dealer=window.HELIOS.state.dealer||{},window.HELIOS.state.dealer.id=this.activeDealer,c.set("labelClass",d),this},disableActiveMarker:function(){var a,b=this.activeDealer;o.info("disableActiveMarker"),b&&(a=this.collectionInstance.get(b),this.setActiveMarker(a,!1)),this.activeDealer=!1},updateMarker:function(a,b,c){var d=a.get("marker"),e=a.get("markerStyle");if(void 0===b?(d.set("labelContent",""),d.set("labelClass",""),this.setMarkerIcon(d,e,!1),j(d,!1)):j(d,"result",b),!1)try{d.label.draw()}catch(f){o.error("updateMarker - "+f.message)}},removeDealerDetail:function(){o.info("removeDealerDetail"),a(this.settings.dealerDetailContainerSelect).empty().parentsUntil("map-wrapper").removeClass(y),this.refresh()},loadingDealerDetail:function(){return a(this.settings.dealerDetailContainerSelect).addClass(this.settings.detailsLoadingClass),this},showDealerDetail:function(b,c,d){var e,f,g,j,k,l,m,n="single-digit",p=this;return o.info("showDealerDetail"),p.dealerTemplate&&(e=b.toJSON(),!0===i.contains(p.resultsList,e.id)&&(e.hasPagination=!0),g=p.settings.isGeolocated(),j=b.get("position"),(j>=9||void 0===b.get("position"))&&(n=""),a.extend(e,{isSingleDigit:n,mygeolocation:g,resultsTotal:this.resultsList.length}),f=p.dealerTemplate(e),l=a(p.settings.dealerDetailContainerSelect),m=a.Event("dealerSelected",e),l.trigger("analytics.dealerSelected",e).trigger(m),l.removeClass(p.settings.detailsLoadingClass).html(f),k=p.$el.parent().parent(),!1===k.hasClass(y)&&(k.addClass(y),google.maps.event.trigger(p.map,"resize"),p.map.setCenter(b.get("marker").getPosition())),h.renderDisclaimers(l),a(p.settings.backToMyAccountCloseButton).on("click",function(){return a(this).parents(p.settings.backToMyAccountWrapper).addClass(p.settings.inactiveClass),!1})),p.setActiveMarker(b,!0),p.isMapVisible()&&p.centerActiveDealer(!0),!d&&p.isMapVisible()&&this.trackMarkerClick(b),a(this.settings.dealerDetailContainerSelect).trigger("dealerWasSelected"),this.settings.onShowDealerDetail&&this.settings.onShowDealerDetail(),l},dealerSelection:function(b,c){var d=a(b.target),e=d.attr("data-id");o.info("dealerSelection"),b.preventDefault(),b.stopImmediatePropagation(),c.chosenDealerId=e,d.trigger("dealer-selected",[e])},selectDealer:function(){o.info("selectDealer"),a(this.settings.dealerDetailContainerSelect).find(q.buttonSelect).trigger("click",this)},dealerPagination:function(b){var c,d,e,f=a(b.target),g=1,h=f.attr("data-id"),j=i.indexOf(this.resultsList,h),k=q.buttonNext;b.preventDefault(),f.hasClass("js-btn-prev")&&(g=-1,k=q.buttonPrev),c=j+g,c<0?c=this.resultsList.length-1:c>=this.resultsList.length&&(c=0),d=this.collectionInstance.get(this.resultsList[c]),e=this.showDealerDetail(d,!0),e.find(k).focus(),this.map.setCenter(d.get("marker").getPosition())},addMarker:function(b,c,d,e){var f,g=this,h=e?"Active":"Inactive",i={draggable:!1,raiseOnDrag:!1,map:g.map,icon:g.icons.alphaInactive,labelContent:"",labelAnchor:new google.maps.Point(this.labelanchorLeft,this.labelanchorTop),labelClass:""};return!!c&&(f=a.extend({},i,b),f.position=new google.maps.LatLng(c.latitude,c.longitude),
d&&g.icons[d+h]&&(f.icon=g.icons[d+h]),new window.MarkerWithLabel(f))},addDealerMarkers:function(b,c){var d=this,e=d.collectionInstance,f=[],g=this.settings.markerCreationBatchSizeIE;return o.info("addDealerMarkers"),a("html").hasClass("ltie9")||(g=this.settings.markerCreationBatchSize,o.info("addDealerMarkers - batchSize: "+g)),this.addDealerMarkersBatch(f,e,1,g).done(function(a){d.extendBounds(a)})},addDealerMarkersBatch:function(b,c,d,e){var f=this,g=function(){f.viewMarker(this)};return 1===d&&(f.batcherDeferred=a.Deferred()),i.defer(function(){var a,h,i,j=d*e-e,k=c.length,l=!1;for(h=0;h<e;h++){if(j+h+1>k){l=!0;break}a=c.at(j+h),i=f.addMarker({dealerId:a.get("id"),title:a.get("tradingName"),map:null},a.get("geolocation"),a.get("markerStyle")),google.maps.event.addListener(i,"click",g),a.set("marker",i),b.push(i)}l?f.batcherDeferred.resolve(b):f.addDealerMarkersBatch(b,c,d+1,e)}),f.batcherDeferred.promise()},clusterMarkers:function(b,d,e,f){var g=this,h=new c(this.map,e,{gridSize:f,maxZoom:x,minimumClusterSize:2,styles:d,ignoreHidden:!0});return o.info("clusterMarkers"),this.markerCluster=h,a(this).trigger("mapFinishedLoading"),a(document).one("mapEventsReady",function(){a(g).trigger("mapFinishedLoading")}),h},extendBounds:function(b){var c=this,d=b||c.markerCluster.getMarkers(),e=new google.maps.LatLngBounds;return o.info("extendBounds"),d&&d.length&&(a.each(d,function(a,b){e.extend(b.getPosition())}),c.map.fitBounds(e)),this},getExtendBounds:function(){return!this.getZoomOnMarker()},setLocation:function(a,b,c){var d;return o.info("setLocation"),a&&b?(this.setAutoSelectFirstDealerInCollection(!1),d=new google.maps.LatLng(a,b),this.geoMarkerInstance=new window.MarkerWithLabel({position:d,clickable:!1,draggable:!1,raiseOnDrag:!1,map:this.map,icon:this.icons.geo,labelContent:"",title:c})):this.geoMarkerInstance&&(this.geoMarkerInstance.setMap(null),this.geoMarkerInstance=null),this},centerActiveDealer:function(a){var b,c,d,e=this;e.activeDealer&&(b=e.collectionInstance.get(e.activeDealer),c=b.get("geolocation"),d=new google.maps.LatLng(c.latitude,c.longitude),setTimeout(function(){a?e.map.panTo(d):e.map.setCenter(d)},100))},isMapVisible:function(){return this.$el.is(":visible")},destroy:function(){return this.$el=null,delete w[this.instanceId]},setMarkerIcon:function(a,b,c){var d=c?"Active":"Inactive",e=c?this.icons.alphaActive:this.icons.alphaInactive;return b&&this.icons[b+d]&&(e=this.icons[b+d]),a.set("icon",e)}},{initInstance:l}}),define("c_040_listView",["jquery","underscore","logger","handlebars","backbone","storageManager","disclaimers"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return new s(a,b,c)}var i,j,k,l,m,n,o,p,q={classes:{hasPagination:"hasPagination",singleDigit:"single-digit",showMore:"is-showing-more",inactive:"inactive"},selectors:{container:".grid-row",showMore:".btn-show-more",template:".lb_template_c-40-2_list",viewListActions:".view-list-actions",filterContainer:".filter-results-group",prefilter:".dealer-locator-prefilter",moreDealerInfo:".more-dealer-info",accordionGroup:".accordion-group",accordionChildHeader:".accordion-child-header",accordionPanel:".accordion-panel",backToMyAccountWrapper:".back-to-my-account-wrapper",componentChild:".c_040-2",c040Form:".c_040-form",locationResults:".location-results"},loggedInCookie:"OwnerServicesLoggedInName"},r={callbacks:"callbacks",findADealer:"findADealer",currentPage:"currentPage",dealerNumber:"dealerNumber",showMoreAction:"showMoreAction",currentView:"currentView",loggedIn:"loggedIn",position:"position",page:"page",size:"size",showMoreLabel:"showMoreLabel",showLessLabel:"showLessLabel",currentServiceFilter:"currentServiceFilter",dealerSearchUrl:"dealer-search-url",dealerListUrl:"dealer-list-url",dataDealerAction:"data-dealer-action"};k=e.Model.extend({initialize:function(){this.listenTo(this.collection,"reset",this.resetHandler)},resetHandler:function(){this.trigger("reset:listItem"),this.clear(),this.destroy()}}),l=e.Collection.extend({model:k}),m=e.View.extend({className:"col-4",events:{"click .back-to-my-account-wrapper i.close":"dismissPreferredDealerMessage","click .btn-show-more":"toggleMoreInfo","mouseup .icon-map-view":"viewOnMapHandler","touchend .btn-show-more":"toggleMoreInfo","touchend .icon-map-view":"viewOnMapHandler","mouseup .icon-directions":"onAnalyticsTracking","mouseup .detail-list .icon-email":"onAnalyticsTracking","mouseup .detail-list .icon-external-link":"onAnalyticsTracking","mouseup .contact-us a":"onAnalyticsTracking","touchend .icon-directions":"onAnalyticsTracking","touchend .detail-list .icon-email":"onAnalyticsTracking","touchend .detail-list .icon-external-link":"onAnalyticsTracking","touchend .contact-us a":"onAnalyticsTracking"},template:function(a){return n(a)},initialize:function(){this.listenTo(this.model,"add",this.render),this.listenTo(this.model,"reset:listItem",this.remove),this.listenTo(this.model,"showMoreClose:listItem",this.closeMoreInfo)},createAddressString:function(){var c;return c=a.map(this.model.get("address"),function(a,b){return[a]}),c=b.compact(c),c.join(", ")},trackEvent:function(a){var b={componentId:"C40_Dealer_List_View",dealerAction:a,dealerName:this.model.get("tradingName"),dealerId:this.model.get("id"),dealerAddress:this.createAddressString(),dealerType:this.model.get("dealerType")||"unknown"};p.tag("dealerInteraction",b)},trackShowMore:function(){this.trackEvent("show more")},closeMoreInfo:function(){var a=this.model.get(r.showMoreLabel),b=this.$el.find(q.selectors.showMore+" > span");b.text(),this.$el.children(q.selectors.componentChild).removeClass(q.classes.showMore),b.text(a)},toggleMoreInfo:function(a){var b=this.model.get(r.showMoreLabel),c=this.model.get(r.showLessLabel),d=this.$el.find(q.selectors.showMore+" > span"),e=d.text();3!==a.which&&(a.preventDefault(),this.trackShowMore(),this.$el.children(q.selectors.componentChild).toggleClass(q.classes.showMore),d.text(e===b?c:b),this.model.trigger("showMore:listItem",this.model.get("id")))},onAnalyticsTracking:function(b){var c={"get-direction":"get directions",email:"email",call:"call","discover-dealer":"discover dealer"},d=a(b.currentTarget).attr(r.dataDealerAction),e=c[d]||"";3!==b.which&&this.trackEvent(e)},viewOnMapHandler:function(b){var c;3!==b.which&&(b.preventDefault(),this.trackEvent("view on map"),this.model.viewOnMap(!1,this.model.get("id")),c=this.$el.closest(q.selectors.locationResults),c.length&&a("html, body").animate({scrollTop:c.offset().top},function(){c.find("[data-view=map]").focus()}))},dismissPreferredDealerMessage:function(b){b.preventDefault(),a(b.target).parents(q.selectors.backToMyAccountWrapper).addClass(q.classes.inactive)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model.set(r.showMoreLabel,this.$el.find(q.selectors.showMore+" > span").text()),this.model.set(r.showLessLabel,this.$el.find(q.selectors.showMore).data("alt")),this}}),j=e.Model.extend({callbacks:{isGeolocated:a.noop},defaults:{callbacks:{},loggedIn:!1,page:1,size:6,dealerSearchUrl:"",dealerListUrl:"",preferredDealerID:"",showMoreCurrentID:""},initialize:function(){a.each(this.get(r.callbacks),a.proxy(function(a,b){this.callbacks[a]=b},this)),f.loadItem(q.loggedInCookie,{mode:"cookie"})&&this.set(q.loggedIn,!0)}}),i=e.View.extend({events:{"click .btn-more":"loadMoreDealer","click .btn-view-list":"checkDevice"},initialize:function(c){b.extend(this,b.pick(c,"geoloc")),this.model.set(r.dealerSearchUrl,a(".c_040").data(r.dealerSearchUrl)),this.model.set(r.dealerListUrl,a(".c_040").data(r.dealerListUrl)),this.model.set(r.size,a('.c_152-0 input[name="size"]').val()),this.requestListData(),this.$container=this.$el.children(q.selectors.container),this.$container.empty(),this.$viewListActions=this.$el.find(q.selectors.viewListActions),this.listenTo(this.collection,"add",this.addDealer),this.listenTo(this.collection,"reset",this.requestListData),this.listenTo(this,"reset",this.resetDealers),this.collection.on("showMore:listItem",this.showMoreHandler,this)},showMoreHandler:function(a){var b=this.model.get("showMoreCurrentID");b&&this.collection.get(b).trigger("showMoreClose:listItem"),this.model.set("showMoreCurrentID",a===b?"":a)},requestListData:function(){var c=this.$el.closest(q.selectors.c040Form),d=c.find("input[name=location]").val(),e=c.find("input[name=latlong]").val(),f=a("input[name=_charset_]").val(),g=a(q.selectors.filterContainer).data(r.currentServiceFilter)||a(q.selectors.prefilter).val(),h=d&&d.length?this.model.get(r.dealerSearchUrl):this.model.get(r.dealerListUrl),i="",j="",k=this.geoloc.isDealerSelected(),l=this.geoloc.isCurrentLocation(),m={_charset_:f,page:this.model.get(r.page),size:this.model.get(r.size)};g&&(m["dealer-services"]=g),d&&d.length&&(k||l?m.latlong=e:m.location=d),b.each(m,function(a,b){"latlong"===b?j="/"+b+"/"+a:"location"===b?j="/"+b+"/"+a:i+="/"+b+"/"+a}),i+=j,this.activeAjaxRequest=a.ajax({url:h+(i.length?i+"/data.json":""),type:"GET",success:a.proxy(this.onRequestSuccess,this),error:a.proxy(this.onRequestError,this)})},onRequestSuccess:function(a){if(null===a)return o.warn("Response for list view data returned null"),!1;a&&a.dealers&&this.formatDealers(a.dealers),a&&void 0!==a.totalResults&&this.loadMoreDisplayHandler(a.totalResults)},onRequestError:function(a){o.warn("Ajax request from C_040_ListAppView for dealers' data failed.")},handleAccordionClick:function(a,b){a.find(q.selectors.accordionChildHeader).on("click",function(c){c.stopPropagation(),a.toggleClass("active"),b="closed"===b?"open":"closed",a.find(q.selectors.accordionChildHeader).attr("data-state",b),a.find(q.selectors.accordionPanel).attr("data-state",b)})},formatDealers:function(b){var c,d=b.length,e=q.classes.singleDigit;for(c=0;c<d;c++){(c>=9||!b[c][r.position])&&(e=""),b[c].mygeolocation=this.model.callbacks.isGeolocated(),b[c].isSingleDigit=e,b[c].preferredDealer=this.model.get("preferredDealerID")===b[c].id,b[c].averageStarRating&&(b[c].dealerRating=this.formatStarRating(b[c])),this.createDealer(b[c]);var f=a(".dealer-"+b[c].id).siblings(q.selectors.moreDealerInfo).find(q.selectors.accordionGroup),g=f.find(q.selectors.accordionChildHeader).attr("data-state");this.handleAccordionClick(f,g)}},formatStarRating:function(b){var c=[];return a.each(b.averageStarRating,function(a,b){var d=b.displayScore;d&&c.push({title:b.title,grade:d,number:b.numberOfReviews,percent:20*d,type:a})}),c},createDealer:function(a){this.collection.add(a)},addDealer:function(a){var c=b.extend(a,{viewOnMap:this.model.callbacks.viewOnMap}),d=new m({model:c});this.$container.append(d.render().el),g.renderDisclaimers(this.$container)},removeAllDealers:function(){this.collection.reset()},loadMoreDisplayHandler:function(a){var b=parseInt(this.model.get(r.page)),c=parseInt(this.model.get(r.size)),d=a>b*c;this.$viewListActions.toggleClass(q.classes.hasPagination,d)},loadMoreDealer:function(a){a.preventDefault(),this.incrementPageNumber(),this.requestListData()},incrementPageNumber:function(){var a=this.model.get(r.page);this.model.set(r.page,a+1)},resetDealers:function(){this.resetPageNumber().removeAllDealers()},resetPageNumber:function(){return this.model.set(r.page,1),this},setPreferredDealer:function(a){this.model.set("preferredDealerID",a)}});var s=function(b,e,g){var h;if(this.settings=a.extend({},q,e),p=e.analyticsManager,o=new c({prefix:"C_040_ListView"}),!(h=a(q.selectors.template).html()))return o.warn("listview template not found"),!1;this.model=new j(e),this.view=new i({el:b,model:this.model,collection:new l,geoloc:e.geoloc}),n=d.compile(h),f.init()};return{init:h}}),define("stringUtilities",["underscore"],function(a){"use strict";function b(){if(!(this instanceof b))return new b}return b.prototype.escapeRegExSpecialCharacters=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},b.prototype.allReplace=function(a,b){var c=a;for(var d in b)c=c.replace(new RegExp(d,"g"),b[d]);return c},String.prototype.limitLineCharacters=function(b){if(a.isNumber(b)){var c,d=this.charAt(b-1),e=this.charAt(b),f="&hellip;";if(b!==this.length&&d&&b&&" "!==d&&" "!==e){for(c=b-1;c>=0;c--)if((d=this.charAt(c))&&" "===d){b=c;break}return c>0?this.substring(0,b+1)+f:""}return this.substring(0,b)+f}},b}),define("c_152_0_autocomplete",["jquery","googleMapsSingleton","logger","handlebars","stringUtilities"],function(a,b,c,d,e){"use strict";function f(a,b,c){return new j(a,b,c)}var g,h="autocomplete",i={APIevents:{close:"close",complete:"complete",initialized:"initialized"},attributes:{autocomplete:"autocomplete"},classes:{noResult:"no-result",resultsActive:"is-active",topSuggestion:"top-suggestion"},datas:{dealerId:"dealer-id",noResultsText:"no-results-text",value:"value",placeId:"place-id"},events:{click:"click."+h,focus:"focus."+h,focusin:"focusin."+h,focusout:"focusout."+h,keydown:"keydown."+h,keyup:"keyup."+h,mouseenter:"mouseenter."+h,resize:"resize."+h},selectors:{resultsList:".autocomplete-suggestions",suggestion:"button",template:'script[type="text/x-handlebars-template"]'},defaultKey:"suggestedName",exclude:[],fallbackKey:"tradingName",maxResults:5,minMaxHeight:150,onPlaceChanged:a.noop},j=function(c,d,e){return b.getDeferred().done(a.proxy(function(){"undefined"!=typeof google&&google.maps&&google.maps.places&&c&&d&&e&&this.init(c,d,e)},this)),this};return j.prototype={$el:null,$resultsList:null,events:{},dealerCollection:[],focusOutTimeout:-1,googleAutocompleteService:null,initialized:!1,key:i.defaultKey,noResultsText:!1,request:{types:["geocode"],input:""},resizeTimeout:-1,settings:null,topSuggestion:!1,init:function(a,b,d){g=new c({prefix:"C152-0"}),this.$el=a,this.$resultsList=a.parent().find(i.selectors.resultsList),this.template=this.getTemplate(),this.initSettings(b).initCollection(d).bindEvents(),google.maps.places&&(this.googleAutocompleteService=new google.maps.places.AutocompleteService),this.noResultsText=this.$el.data(i.datas.noResultsText),this.selectedDealerId="",this.initialized=!0,this.trigger(i.APIevents.initialized)},getTemplate:function(){var a=this.$resultsList.find(i.selectors.template),b=d.compile(a.html(),{noEscape:!0});return a.remove(),b},initSettings:function(b){return this.settings=a.extend({},i,b),b.countryCode&&(this.request.componentRestrictions={country:b.countryCode.length>2?b.countryCode.substring(0,2):b.countryCode}),this},initCollection:function(a){var b;return a&&a.first&&(this.collection=a,this.collection.first()&&(b=this.collection.first())&&!1===b.has(this.key)&&(this.key=i.fallbackKey)),this.dealerNameKey=this.key,this},bindEvents:function(){return this.$el.attr(i.attributes.autocomplete,"off").on(i.events.keydown,a.proxy(this.inputKeyDownHandler,this)).on(i.events.keyup,a.proxy(this.inputKeyUpHandler,this)),this.$el.parent().on(i.events.focusout,a.proxy(this.focusOutHandler,this)).on(i.events.focusin,a.proxy(this.focusInHandler,this)),window.matchMedia&&window.matchMedia(this.settings.smallOrMedium).matches&&this.$el.on(i.events.focus,a.proxy(this.inputFocusHandler,this)),this.$resultsList.on(i.events.click,i.selectors.suggestion,a.proxy(this.selectionHandler,this)).on(i.events.keydown,i.selectors.suggestion,a.proxy(this.listKeyDownHandler,this)).on(i.events.mouseenter,i.selectors.suggestion,a.proxy(this.listHoverHandler,this)),!1!==this.settings.maxHeight&&(a(window).on(i.events.resize,a.proxy(this.onResize,this)),this.isSmallBreakpoint()&&this.refreshResultHeight()),this},isSmallBreakpoint:function(){return window.matchMedia&&window.matchMedia(this.settings.matchMediaTest).matches},onResize:function(){window.clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(a.proxy(this.refreshResultHeight,this),80)},refreshResultHeight:function(){var b,c,d=0,e=this.$resultsList.parent();return b=a(window).height(),this.isSmallBreakpoint()&&(b/=2),c=e.offset(),d=b-c.top-e.height(),d<this.settings.minMaxHeight&&(d=this.settings.minMaxHeight),this.$resultsList.css("max-height",d),this},inputFocusHandler:function(a){var b,c=document.documentElement;window.pageXOffset||c.scrollLeft,c.clientLeft;b=this.$el.offset().top-10,window.scroll(0,b),_.defer(function(){window.scroll(0,b)})},inputKeyUpHandler:function(b){var c;13!==b.which&&(c=a.trim(this.$el.val()),c!==this.request.input?(this.request.input=c,-1===a.inArray(c,this.settings.exclude)?this.searchAction():this.hideSuggestions()):40===b.which?this.focusSuggestion(0):27===b.which&&this.hideSuggestions())},inputKeyDownHandler:function(a){if(40===a.which)return a.preventDefault(),this.focusSuggestion(0)},focusOutHandler:function(b){this.$resultsList.hasClass(i.classes.resultsActive)&&(window.clearTimeout(this.focusOutTimeout),this.focusOutTimeout=window.setTimeout(a.proxy(function(){this.hideSuggestions(),this.trigger(i.APIevents.close)},this),200))},focusInHandler:function(a){window.clearTimeout(this.focusOutTimeout)},listKeyDownHandler:function(b){var c,d,e=0;if(40===b.which?e=1:38===b.which&&(e=-1),0!==e)return c=a(b.target),d=c.index(),this.focusSuggestion(d+e,e),!1},listHoverHandler:function(b){var c=a(b.currentTarget).index();this.focusSuggestion(c)},focusSuggestion:function(a,b){var c=this.$resultsList.children(),d=i.classes.topSuggestion;return c.filter("."+d).removeClass(d),a<0?a=c.length-1:a>=c.length&&(a=0),c.eq(a).focus(),this},hideSuggestions:function(a){return this.$resultsList&&this.$resultsList.empty().removeClass(i.classes.resultsActive+" "+i.classes.noResult),!0===a&&(this.topSuggestion=!1),this},getSelectedDealerId:function(){return this.selectedDealerId},setSelectedDealerId:function(a){this.selectedDealerId="string"==typeof a?a:""},setCountryRestriction:function(a){this.request.componentRestrictions.country=a},selectionHandler:function(b){var c,d,e,f,h,j=a(b.currentTarget);g.info("selectionHandler"),b.preventDefault(),j[0].nodeName.toLowerCase()!==i.selectors.suggestion&&(j=j.parent()),d=j.data(i.datas.value),e=j.data(i.datas.placeId),f=!1,c=j.data(i.datas.dealerId),this.setSelectedDealerId(c),window.HELIOS.state=window.HELIOS.state||{},window.HELIOS.state.dealer=null,window.HELIOS.state.dealerName=null,c&&""!==c&&(h=this.collection.get(c))&&(f=h.get("geolocation"),window.HELIOS.state.dealer=h,window.HELIOS.state.dealerName=d),this.hideSuggestions(!0),this.settings.onPlaceChanged({geolocation:f,name:d,placeId:e})},searchAction:function(){g.info("searchAction"),a.when(this.serviceCall(this.request),this.dealerSearch(this.request)).done(a.proxy(this.onComplete,this))},serviceCall:function(b){var c=this,d=a.Deferred();return g.info("serviceCall"),this.googleAutocompleteService.getPlacePredictions(b,function(a,b){c.serviceCallback(a,b,d)}),d.promise()},serviceCallback:function(a,b,c){var d=a;g.info("serviceCallback"),b!==google.maps.places.PlacesServiceStatus.OK&&(d=[]),c.resolve(d)},dealerSearch:function(b){var c=b.input.toLowerCase(),d=[],f=new e,h=a.Deferred();return g.info("dealerSearch"),c.length>1&&this.collection&&this.collection.length&&(c=f.escapeRegExSpecialCharacters(c),this.collection.each(_.bind(function(a,b,e){var f=a.get(this.key),g=[];f&&f.length&&(g=f.match(new RegExp(c,"gi"))),g&&(this.settings.showApiResultsOnly||!0===a.get("visible")||_.isUndefined(a.get("visible")))&&d.push(a)},this)),d.sort(a.proxy(this.sortByName,this))),h.resolve(d),h.promise(d)},sortByName:function(a,b){var c=a.get(this.dealerNameKey),d=b.get(this.dealerNameKey);return c>d?1:c<d?-1:0},onComplete:function(a,b){var c=[];g.info("onComplete"),this.topSuggestion=!1,b.length&&(c=this.extractDealers(b)),a.length&&(c=this.extractServices(a,c.length).concat(c)),0===c.length?this.onNoResults():this.onResults(c),this.trigger(i.APIevents.complete)},onNoResults:function(){this.noResultsText&&""!==this.noResultsText?this.$resultsList.html("<span>"+this.noResultsText+"</span>").addClass(i.classes.resultsActive+" "+i.classes.noResult):this.hideSuggestions(!0)},onResults:function(a){var b=this.formatResult(a);this.$resultsList.html(this.template(b)).addClass(i.classes.resultsActive),this.$resultsList.children().first().addClass(i.classes.topSuggestion)},formatResult:function(a){var b,c=a.length;for(b=0;b<c;b++)if(a[b].id)return a[b].firstDealer=!0,a;return a},extractServices:function(a,b){var c,d,e,f,g,h=[],i=a.length;for(this.settings.maxResults&&(i=this.settings.maxResults-b)>a.length&&(i=a.length),g=0;g<i;g++)f=a[g],d=f.description,e=f.place_id,c=f.markerStyle?"marker-"+f.markerStyle:"marker-alpha",h.push({value:d,text:this.highlightTerm(d),markerStyle:c,placeId:e});return this.topSuggestion={geolocation:!1,name:a[0].description},h},extractDealers:function(a){var b,c,d,e,f=[],g=a.length;for(this.settings.maxResults&&(g=Math.floor(this.settings.maxResults/2)),a.length<g&&(g=a.length),e=0;e<g;e++)c=a[e],d=c.get(this.key),b=c.get("markerStyle")?"marker-"+c.get("markerStyle"):"marker-alpha",f.push({value:d,text:this.highlightTerm(d),id:c.id,markerStyle:b});return this.topSuggestion={geolocation:a[0].get("geolocation"),name:a[0].get(this.key)},f},trigger:function(a,b){var c=void 0===b?this:b;if(void 0!==this.events[a])for(var d=0;d<this.events[a].length;d++)this.events[a][d](c)},on:function(a,b){return void 0===a||"function"!=typeof b?this:(void 0!==this.events[a]?this.events[a].push(b):this.events[a]=[b],"initialized"===a&&this.initialized&&b(this),this)},off:function(a){return void 0!==this.events[a]&&(this.events[a]=[]),this},highlightTerm:function(a){var b=this.request.input,c=new e,d=new RegExp(c.escapeRegExSpecialCharacters(b),"i");return a.replace(d,"<b>$&</b>")},destroy:function(){this.$resultsList.off("."+h).remove(),this.$el.off(i.events.keyup).parent().off(i.events.focusout),this.$resultsList=null,this.$el=null,this.collection=null,this.googleAutocompleteService=null}},{init:f,Autocomplete:j}}),define("c_152_0",["jquery","c_152_0_autocomplete","heliosObject","logger","backbone"],function(a,b,c,d){"use strict";function e(b,c,e,g){var h,l=a(c);if(f=new d({prefix:"C152-0"}),i=e,l.hasClass(k))return h=l.data(j),h instanceof p||(h=new p(l,b,g),l.data(j,h)),h;void 0!==c||document.body,a(parent).find(m.selector.root).each(function(a,c){var d=$root.eq(a);d.data(j)instanceof p||d.data(j,new p(d,b,g))})}var f,g,h,i,j="c_152_0",k="c_152-0",l="C40_Dealer_Single_View",m={selector:{root:"."+k,input:".location-input",geoButton:".btn-geolocate",submitButton:".btn-search",valueInput:".location-value",suggestions:".autocomplete-suggestions"},events:{click:"click."+j,input:"input."+j,focus:"focus."+j,blur:"blur."+j,keypress:"keypress."+j},APIevents:{geolocation:"geolocation",submit:"submit",input:"input",initialized:"initialized",change:"change"},classes:{locatingActivity:"is-locating",located:"is-located",isActive:"is-active"}},n={autocomplete:{countryCode:c.config.common.countryCode,matchMediaTest:c.config.common.mediaQuery.is.small,smallOrMedium:c.config.common.mediaQuery.is.smallOrMedium,exclude:[""],maxHeight:!1}},o=!1;g=Backbone.Model.extend({idAttribute:"id"}),h=Backbone.Collection.extend({model:g,allActiveResults:0});var p=function(a,b,c){this.options=b,this.attributes={value:!1,defaultText:null,geolocation:!1,label:"",previousQuery:!1,isValid:!1,initialized:!1,open:!1,wasGeoText:!1},this.getGeolocation=_.bind(this.getGeolocation,this),this.$el=a,this.$input=a.find(m.selector.input),this.$geoButton=this.$el.find(m.selector.geoButton),this.$value=this.$el.find(m.selector.valueInput),this.$submitButton=this.$el.find(m.selector.submitButton),this.analyticsManager=c,this.events={},this.on=function(a,b){for(var c,d=a.split(" "),e=0;e<d.length;e++)void 0!==(c=d[e])&&"function"==typeof b&&(void 0!==this.events[c]?this.events[c].push(b):this.events[c]=[b],c===m.APIevents.initialized&&this.get("initialized")&&b(this));return this},this.off=function(a){return void 0!==this.events[a]&&(this.events[a]=[]),this},this.reset=function(a){this.collection.reset(a)},this.destroy=function(){this.unbindEvents(),this.autocomplete&&this.autocomplete.destroy()}};return p.prototype={events:[],init:function(){var a,b=this.options;return void 0!==b.collection&&(a=h.extend({url:b.collection.url,getDealer:b.collection.getDealer,getAllDealers:b.collection.getAllDealers,getActiveDealers:b.collection.getActiveDealers}),this.collection=new a),void 0!==b.settings&&this.initSettings(b.settings),this.set("defaultText",this.$geoButton.data("text")),this.$value.add(this.$input).val(""),this.get("autocomplete")&&(this.autocomplete=this.newAutocomplete()),this.bindEvents(),this.set("initialized",!0),this.trigger(m.APIevents.initialized,this),this.$el.trigger(j+":initialized",this),this},newAutocomplete:function(){return b.init(this.$input,this.getAutocompleteSettings(),this.collection)},onAutocompleteInitialized:function(){this.$suggestions=this.$el.find(m.selector.suggestions)},onAutocompleteComplete:function(){this.get("open")?this.trigger("update"):(this.set("open",!0),this.trigger("open"))},onAutocompleteClose:function(){this.set("open",!1),this.trigger("close")},initSettings:function(b){a.extend(!0,this.attributes,b)},getAutocompleteSettings:function(){var a,b=n.autocomplete;return b.onPlaceChanged=_.bind(this.onAutocompletePlaceChanged,this),b.showApiResultsOnly=this.options.settings.showApiResultsOnly,a=this.get("defaultText"),a&&""!==a&&b.exclude.push(a),b},onAutocompletePlaceChanged:function(a,b){var c=a.geolocation;c?this.setGeolocation(c):this.setGeolocation(!1),this.setLabel(a.name),this.trigger(m.APIevents.change,b,a)},set:function(a,b){return this.attributes[a]=b,this.attributes[a]},get:function(a){return this.attributes[a]},trigger:function(a,b){var c=void 0===b?this:b,d=a;if(void 0!==this.events[a])for(var e=0;e<this.events[a].length;e++)this.events[a][e](c,d)},getGeolocation:function(a){a.preventDefault(),this.$geoButton.blur().addClass(m.classes.locatingActivity),Modernizr.geolocation&&navigator.geolocation.getCurrentPosition(_.bind(this.geolocationCallback,this),_.bind(this.geolocationErrorCallback,this)),this.get("autocomplete")&&this.autocomplete.hideSuggestions()},geolocationCallback:function(a){this.$geoButton.addClass(m.classes.located).toggleClass(m.classes.isActive+" "+m.classes.locatingActivity),this.$geoButton.hasClass(m.classes.isActive)?(this.setGeolocation(a.coords),this.setLabel(this.get("defaultText"))):this.deactivateGeoButton(),this.trigger(m.APIevents.geolocation,a.coords)},deactivateGeoButton:function(){this.$geoButton.removeClass(m.classes.isActive),this.isCurrentLocation()&&this.setLabel(""),this.setGeolocation(!1)},geolocationErrorCallback:function(a){var b;switch(this.setGeolocation(!1),this.$geoButton.removeClass(m.classes.locatingActivity),a.code){case a.PERMISSION_DENIED:b="User denied the request for Geolocation.";break;case a.POSITION_UNAVAILABLE:b="Location information is unavailable.";break;case a.TIMEOUT:b="The request to get user location timed out.";break;case a.UNKNOWN_ERROR:b="An unknown error occurred."}n.debug&&b&&f.error(b)},setGeolocation:function(a){a&&a.latitude&&a.longitude?(this.set("geolocation",a),this.set("value",a.latitude+","+a.longitude),this.$value.prop("disabled",!1).val(this.get("value"))):(this.set("geolocation",!1),this.set("value",!1),this.$value.val("")),this.updateValid()},setLabel:function(a){this.set("label",a),this.$input.val(a),this.updateValid()},updateValid:function(){var a=""!==this.get("geolocation")?this.get("geolocation"):this.get("label");this.set("isValid",0!==a.length)},isDealerSelected:function(){return""!==this.autocomplete.getSelectedDealerId()},isCurrentLocation:function(){return this.get("defaultText")===this.$input.val()},isGeoButtonActive:function(){return this.$geoButton.hasClass(m.classes.isActive)},searchTermExist:function(){return this.$input.val().length&&!this.isCurrentLocation()},bindEvents:function(){this.get("autocomplete")&&this.autocomplete.on("initialized",_.bind(this.onAutocompleteInitialized,this)).on("complete",_.bind(this.onAutocompleteComplete,this)).on("close",_.bind(this.onAutocompleteClose,this)),this.$input.on(m.events.input,_.bind(this.onInputChanged,this)).on(m.events.focus,_.bind(this.onInputFocus,this)).on(m.events.blur,_.bind(this.onInputBlur,this)).on(m.events.keypress,_.bind(this.onSubmit,this)),this.$geoButton.on(m.events.click,this.getGeolocation),this.$submitButton.on(m.events.click,_.bind(this.onSubmit,this))},unbindEvents:function(){this.$geoButton.add(this.$input).off("."+j)},onSubmit:function(a){var b;if(13===a.which||"click"===a.type)return b=this.$input.val(),""===b&&this.set("label",""),i.HELIOS.state=i.HELIOS.state||{},i.HELIOS.state.dealerName&&b===i.HELIOS.state.dealerName||(i.HELIOS.state.dealer=null,i.HELIOS.state.dealerName=null,this.trigger(m.APIevents.submit,a)),!1},trackingVar:function(a,b){var c={componentId:l,action:"search",searchType:"dealer",searchTerm:"geolocation",searchResults:a||0};this.$geoButton.hasClass(m.classes.isActive)&&!o&&(b&&(c.searchFilter="dealerServices",c.searchFilterValue=b),this.analyticsManager.tag("search",c),o=!0)},onInputChanged:function(){this.trigger(m.APIevents.input)},onInputFocus:function(){this.$input.val()===this.get("defaultText")&&(this.setLabel(""),this.set("wasGeoText",!0))},onInputBlur:function(){this.isGeoButtonActive()&&this.get("wasGeoText")&&""===this.$input.val()&&(this.get("defaultText"),this.set("wasGeoText",!1),this.setLabel(this.get("defaultText")))}},{init:e,defaults:{datas:j,selector:m.selector.root}}}),define("c_040",["jquery","jqueryCookie","underscore","c_022","c_040_listView","c_152_0","modal","storageManager","stateStoreFactory","logger","languageUtilities","handlebars","backbone","storeDealer","goTo","disclaimers"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function q(b){var c=a(M.selectors.root);L=a.extend({},M,b),c.length&&(E=L.window,A=i.create({HELIOS:L.HELIOS}),w=new n({HELIOS:L.HELIOS}),w.init(),c.each(function(c,d){return u(a(d),b)}),C=L.HELIOS.adobe.tagging.pageName,L.HELIOS.state=L.HELIOS.state||{},(L.HELIOS.state.dealer&&!L.HELIOS.state.dealer.preferred||!L.HELIOS.state.dealer)&&(L.HELIOS.state.dealer=null),L.HELIOS.state.dealerName=null)}function r(a){var b={componentId:K,action:a.dealerAction,searchType:"dealer",searchFilter:a.searchFilter,searchFilterValue:a.searchFilterValue,searchResults:a.searchResults,searchTerm:a.dealerSearchTerm};a.onClickAdvancedFilter&&"undefined|"===a.dealerSearchTerm&&(b.searchTerm=""),L.analyticsManager.tag("search",b)}function s(a){var b={componentId:K,pageName:C+"|"+a+"-view"};L.analyticsManager.tag("virtualPage",b)}function t(b){var c,d,e,f,g=a(b.target),h="",i="",j={"get-direction":"get directions",email:"email",call:"call","discover-dealer":"discover dealer",preferred:"set as preferred"};(1===b.which||2===b.which||13===b.keyCode)&&(g.hasClass(M.selectors.iconDirections)||g.closest(M.selectors.dealerTradingContact).length||g.hasClass(M.classes.iconPreferred)?(e=a(M.selectors.dealerTradingName,M.selectors.root).text(),f=a(M.selectors.dealerTradingId,M.selectors.root).data(M.data.dealerIdAnalytics),i=g.attr(M.data.dealerAction),i||(i=g.parent().attr(M.data.dealerAction)),a.each(a(M.selectors.dealerTradingAddress,M.selectors.root),function(b,c){h+=a(c).text()+","}),""!==h&&(h=h.substring(0,h.length-1)),c={componentId:K,dealerName:e,dealerId:f,dealerAddress:h,dealerAction:j[i]||""},M.data.dealerTypeAnalytic&&(c.dealerType=M.data.dealerTypeAnalytic),d="dealerInteraction"):(c={componentId:K,destination:g.attr("href"),locationInPage:"action-panel",buttonText:g.text()},d="genericClick"),L.analyticsManager.tag(d,c))}function u(b,c){var d,e;if(b.is(M.selectors.root)||(b=b.find(M.selectors.root)),b.length)return(e=b.data(F))instanceof N?(c&&e.mergeSettings(c),e):(b.hasClass(M.APIclasses.deferred)&&(L.deferred=!0),L=a.extend({},L,c),d=new N(b,L),b.data(F,d),H.push(d),d)}var v,w,x,y,z,A,B,C,D,E,F="c_040",G="dealer",H=[],I=(a.Deferred(),!1),J=!1,K="C40_Dealer_Map_View",L={debug:!1},M={configs:{fb:["simpleDetail","selectBtn","noList"],batd:["simpleDetail","noList"],bas:["simpleDetail","selectBtn","noList"]},APIclasses:{deferred:"deferred",simpleDetail:"fad-simple-detail",selectBtn:"fad-select",
noList:"fad-no-list"},classes:{active:"is-active",initialized:"is-initialized",preferred:"is-preferred",waiting:"ajax-btn-loading",selected:"is-selected",opened:"opened",closed:"closed",visuallyHidden:"is-visually-hidden",referrer:"referrer",isShowingDetail:"is-showing-detail",showIfLoggedIn:"logged-in",advancedFilterReset:"btn-reset",accordionPanel:"accordion-panel",accordionFormBuilder:"fad-accordion-content",noResults:"no-result",iconPreferred:"icon-preferred"},data:{passDealerKey:"dealer-id-input",resultsText:"results-text",noResultsText:"no-results-text",allDealersText:"alldealers-text",settings:"settings",urlDealerList:"dealer-list-url",urlDealerDetail:"dealer-detail-url",urlDealerSearch:"dealer-search-url",urlDealerSearchBasic:"dealer-search-basic-url",view:"view",myAccountUrl:"my-account-url",customerUrl:"customer-url",type:"type",dealerTypeAnalytic:"not set",dealerIdAnalytics:"dealer-id",dealerID:"data-dealer-id",target:"target",dealerAction:"data-dealer-action"},events:{defaultClick:"click",click:"click."+F,mouseup:"mouseup."+F,touchend:"touchend."+F,change:"change."+F,zeroDealers:"zeroDealers",keyup:"keyup"},triggers:{click:"click",change:"change",dealerSelected:"dealerSelected",changeAll:"change:all",changeVisible:"change:visible"},selectors:{dealerDetail:".map-results",dealerDetailCTA:".map-results a, .map-results button",dealerNumber:"input[name='size']",locationInput:"input.location-input",form:".c_040-form",listView:".view-list",listToggler:".btn-view-list",map:".c_022",mapWrapper:".map-wrapper",mapView:".view-map",mapToggler:".btn-view-map",passDealer:".js-pass-id",preferred:".icon-preferred",preferenceSection:".dealer-preference",resultsText:".results-text",filterTextBy:".results-filtered-by",filterText:".results-filtered-by-filter",filterGroup:".filter-results-group",preFilter:".dealer-locator-prefilter",root:".c_040",searchBtn:".btn-search",autocomplete:".autocomplete-suggestions",selectBtn:".btn-fad.btn-select",selectDealer:".form-group select",viewActions:".view-actions",tabs:".view-actions button",advancedFilterDropdown:".dropdown",advancedFilter:".btn-filter",advancedFilterReset:".btn-reset",accordionGroup:".accordion-group",accordionChildHeader:".accordion-child-header",accordionPanel:".accordion-panel",feedbackButton:".c_151-0 a.number",modalClose:".modal-close",overlayReview:".modal-overlay",iconDirections:"icon-directions",dealerTradingName:".dealer-trading-name",dealerTradingId:".c_040-3.c_040-2",dealerTradingAddress:".c_040-3.c_040-2 .dealer-address p",dealerTradingContact:".dealer-contact",isActive:".is-active",bookServiceButton:".book-service-btn"},properties:{initialized:"initialized",deferred:"deferred",preferredDealer:"preferredDealer",currentPage:"currentPage",currentView:"currentView",mapInitializing:"mapInitializing",selectedDealer:"selectedDealer",urls:"urls",helios:"HELIOS",listView:"listView",dealerNumber:"dealerNumber",selectBtn:"selectBtn",map:"map",list:"list",isFiltered:"isFiltered",filters:"filters",position:"position",showMoreAction:"showMoreAction",address:"address",previousQuery:"previousQuery",viewingOnMap:"viewingOnMap",label:"label",currentServiceFilter:"currentServiceFilter",isPrefiltered:!1,typeGroup:"group"}};l.registerHelper("isNotEmptyObject",function(b,c){var d=!0,e=!1;return a.isEmptyObject(b)?d=!1:(a.each(b,function(a,b){if(null!==b&&""!==b)return e=!0,!1}),e||(d=!1)),d?c.fn(this):c.inverse(this)});var N=function(a,b){this.$el=a,this.attributes={debug:!1,currentView:!1,currentPage:1,dealerNumber:6,deferred:!1,initialized:!1,listView:null,mapInitializing:!1,preferredDealer:!1,selectedDealer:!1,selectBtn:!1,simpleDetail:!1,useTopSuggestion:!0,isFiltered:!1,wasFiltered:!1,filters:[],basicSearchOn:!1,viewingOnMap:!0,currentFilters:[],restrictViewOnMapCalls:!1},this.initSettings(b),this.checkLoggedInStatus(),this.get(M.APIclasses.deferred)||this.init(),this.value=!1};return N.prototype={views:{},pins:[],activeAjaxRequest:!1,preferredDealerAjaxRequest:!1,markersLoadedDeferred:a.Deferred(),init:function(b){var c,d,e=[],f=this.get(M.properties.helios);return this.$root=a(M.selectors.root),this.get(M.properties.initialized)?this:(B=new g({customClass:"c_151-1-overlay",openSelector:".open-my-modal",closeSelector:"close-review",overlaySelector:"overlay-reviews"}),D=a(".c_151-1"),B.setContent(D),x=new j({prefix:"C40"}),x.info("FAD init()"),c=this.$el.find(M.selectors.dealerNumber),f.components&&f.components.c040&&f.components.c040.dealers&&f.components.c040.dealers.dealers&&(e=f.components.c040.dealers.dealers),this.initConfigs(),this.preferredZoom=this.$root.data("preferred-zoom"),this.autoZoomOutLimit=this.$root.data("auto-zoom-limit"),this.minMarkersVisible=this.$root.find(".c_152-0 input[name=size]").val(),this.showApiResultsOnly=this.$root.data("showApiResultsOnly"),this.get(M.properties.deferred)&&this.$el.removeClass(M.APIclasses.deferred),b&&this.mergeSettings(b),this.updateAttributesFromStorage(),this.$form=this.getForm(),this.$resultText=this.$root.find(M.selectors.resultsText),this.$filterText=this.$root.find(M.selectors.filterText),this.$filterGroup=this.$root.find(M.selectors.filterGroup+" input"),this.$searchBtn=this.$root.find(".c_152-0 "+M.selectors.searchBtn),this.$autocomplete=this.$root.find(M.selectors.autocomplete),this.$locationInput=this.$root.find(M.selectors.locationInput),c.length&&this.set(M.properties.dealerNumber,c.val()),this.geoloc=this.newGeoloc(e),this.$form.length&&this.geoloc&&(this.initViews(),this.bindEvents()),this.$el.addClass(M.classes.initialized),this.set(M.properties.initialized,!0),this.checkReferrer(),d=this.$resultText.data(M.data.allDealersText)||"",this.$resultText.html(d.replace("%number%",e.length)),this.callbacks={viewOnMap:a.proxy(this.viewOnMap,this)},this)},markersLoaded:function(){return this.markersLoadedDeferred.promise()},setValue:function(b){var c=b.id;this.$el.addClass(M.classes.selected),this.get(M.properties.selectBtn)&&this.$selectDealer.val(c).trigger(M.triggers.change),this.value={id:c,shortDealerId:b.get("dealerId"),name:b.get("tradingName")},a(M.selectors.root).trigger(M.triggers.dealerSelected)},getForm:function(){var a=this.$el.find(M.selectors.form);return a.length||(a=this.$el.closest("form")),a},initConfigs:function(){a.each(M.configs,a.proxy(function(a){if(this.$el.hasClass(a))return this.applyConfig(a)},this))},applyConfig:function(a){var b,c=M.configs[a];if(c)for(b=0;b<c.length;b++)this.applyAPIsetting(c[b])},applyAPIsetting:function(a){switch(a){case"simpleDetail":this.set("simpleDetail",!0),this.$el.addClass(M.APIclasses.simpleDetail);break;case"selectBtn":this.set(M.properties.selectBtn,!0),this.$el.addClass(M.APIclasses.selectBtn),this.$selectBtn=this.$el.find(M.selectors.selectBtn),this.$selectDealer=this.$el.find(M.selectors.selectDealer);break;case"noList":this.set(M.properties.listView,!1)}},mergeSettings:function(b){b&&(this.attributes=a.extend({},this.attributes,b))},initSettings:function(a){this.mergeSettings(a),this.set(M.properties.urls,{dealerList:this.$el.data(M.data.urlDealerList)||!1,dealerDetail:this.$el.data(M.data.urlDealerDetail)||!1,dealerSearch:this.$el.data(M.data.urlDealerSearch)||!1,dealerSearchBasic:this.$el.data(M.data.urlDealerSearchBasic)||!1,customerUrl:this.$el.data(M.data.customerUrl)||!1,type:this.$el.data(M.data.type)||!1})},checkReferrer:function(){var a=document.referrer,b=this.$el.data(M.data.myAccountUrl);a.indexOf(b)>-1&&this.$el.addClass(M.classes.referrer)},updateAttributesFromStorage:function(){var a;HELIOS.state&&HELIOS.state[G]&&HELIOS.state[G].preferred?a=HELIOS.state[G]:this.attributes.storedDealer&&(a=this.attributes.storedDealer),a&&this.get(M.properties.urls).type!==M.properties.typeGroup&&this.activatePreferredDealerButton(a)},activatePreferredDealerButton:function(a){a&&(a.preferred&&this.set(M.properties.preferredDealer,a.preferred),a.id&&this.set(M.properties.selectedDealer,a.id))},initViews:function(){var a=this.$el.find(M.selectors.listView),b=this.$el.find(M.selectors.mapView),c=this.$el.find(M.selectors.viewActions);this.$viewActions=!!c.length&&c,a.length&&(!1!==this.get(M.properties.listView)?(this.addView(M.properties.list,a),this.set(M.properties.listView,!0),this.initList(),this.set(M.properties.currentView,M.properties.list)):(this.$viewActions.remove(),a.remove())),b.length&&(this.addView(M.properties.map,b),this.get(M.properties.urls).type===M.properties.typeGroup?this.toggleView(M.properties.list):this.toggleView(M.properties.map))},bindEvents:function(){var b=!0;this.get(M.properties.listView)&&this.$viewActions.find("button").on(M.events.click,a.proxy(this.onViewTogglerClick,this)),this.geoloc&&this.geoloc.on("geolocation",a.proxy(this.onGeolocGeolocation,this)).on("change",a.proxy(function(a){this.geoloc.isDealerSelected();!1!==a&&this.submitHandler()},this)).on("input",a.proxy(function(a){this.onGeolocInput(a),y=a.$input.val()},this)),this.$locationInput.on(M.events.keyup,a.proxy(function(a){if(13===a.keyCode){this.submitHandler();var b=this.$autocomplete.hasClass(M.classes.noResults);z=b||!1,this.trackSearchHandler("search",this)}},this)),this.$searchBtn.on(M.events.click,a.proxy(function(){this.submitHandler();var a=this.$autocomplete.hasClass(M.classes.noResults);z=a||!1,this.trackSearchHandler("search",this)},this)),this.$autocomplete.on(M.events.click,a.proxy(function(){z=!1,this.trackSearchHandler("search",this)},this)),this.$autocomplete.on(M.events.keyup,a.proxy(function(a){13===a.keyCode&&(z=!1,this.trackSearchHandler("search",this))},this)),this.$el.on(M.events.click,M.selectors.passDealer,a.proxy(this.passDealerHandler,this)),this.attributes.deferred||this.$el.on(M.events.zeroDealers,a.proxy(this.removeDealerDetail,this)),this.$el.find(M.selectors.advancedFilter).on("click.advancedFilter",a.proxy(this.onClickAdvancedFilter,this)),this.$el.find(M.selectors.advancedFilterDropdown+" ul li").on("click.advancedFilterItem",a.proxy(this.onClickAdvancedFilterElement,this)),this.$el.find(M.selectors.filterText).on("click.filterTextBy",a.proxy(this.onClickFilterText,this)),this.$el.find(M.selectors.advancedFilterReset).on("click.advancedFilterReset",a.proxy(this.onClickAdvancedFilterReset,this)),this.$el.on(M.events.click,M.selectors.preferred,a.proxy(this.setPreferred,this)),this.$el.on(M.events.mouseup,M.selectors.dealerDetailCTA,t),this.$el.on(M.events.keyup,M.selectors.dealerDetailCTA,t),this.$el.on(M.events.touchend,M.selectors.dealerDetailCTA,t),this.$el.on(M.events.click,M.selectors.feedbackButton,function(){B.open()}),a(M.selectors.modalClose).on(M.events.defaultClick,function(){B.animateOut()}),a(M.selectors.overlayReview).on(M.events.defaultClick,function(){B.animateOut()}),a(this.map).on("mapFinishedLoading",a.proxy(function(){this.loadPreFilters(),this.markersLoadedDeferred.resolve(),b&&(this.submitHandler(),b=!1)},this)),a(document).trigger("mapEventsReady")},trackSearchHandler:function(b,d){var e=this,f=a(M.selectors.filterGroup+" h3"),g=a(M.selectors.filterText),h={searchFilterValue:"",searchResults:this.getActiveDealers().length,dealerAction:b,dealerSearchTerm:"",searchFilter:f.length?f[0].textContent:"",dealerSearchFilter:function(){var a,b=[];for(a in e.attributes.currentFilters)"dealer-services"===e.attributes.currentFilters[a].name&&b.push(e.attributes.currentFilters[a].value);return b.join(", ")}()};z?h.dealerSearchTerm=a(M.selectors.locationInput).val():c.isEmpty(y)||(h.dealerSearchTerm=y+"|"+a(M.selectors.locationInput).val()),"filter"===b?(h.searchFilterValue=a(M.selectors.filterGroup+" .is-active").text(),h.onClickAdvancedFilter=!0):g.length&&(h.searchFilterValue=g[0].textContent,h.onClickAdvancedFilter=!1),r(h)},addView:function(a,b){var c=this.$el.find(M.selectors[a+"Toggler"]);this.views[a]={$view:b,$toggler:c,visited:!1},c.hasClass(M.classes.active)&&this.set(M.properties.currentView,a)},onViewTogglerClick:function(b){var c=a(b.target).data("view");I=!0,c&&(this.toggleView(c),c===M.properties.map&&(this.attributes.basicSearchOn=!0,this.filterSubmitHandler(),this.map.onShow()))},toggleView:function(a){var b=this.get(M.properties.currentView),c=document,d={x:(window.pageXOffset||c.scrollLeft)-(c.clientLeft||0),y:(window.pageYOffset||c.scrollTop)-(c.clientTop||0)};if(!this.get(M.properties.initialized)||b!==a&&this.views[a]){if(b&&(this.views[b].$toggler.removeClass(M.classes.active),this.views[b].$view.removeClass(M.classes.active)),this.views[a].$toggler.addClass(M.classes.active),this.views[a].$view.addClass(M.classes.active),I){s(this.views[a].$toggler.data("view"))}this.set(M.properties.currentView,a),window.scroll(d.x,d.y),this.refreshView(a)}},refreshView:function(a){x.info("refreshView"),this.views[a].visited?a===M.properties.map&&this.map.onShow():(a===M.properties.map&&this.initMap(),this.views[a].visited=!0),p.renderDisclaimers(this.$el)},initMap:function(b){var c,e=[];this.get(M.properties.mapInitializing)||(this.set(M.properties.mapInitializing,!0),b||(this.get(M.properties.selectedDealer)?(b=a.proxy(this.viewOnMap,this,!1,this.get(M.properties.selectedDealer)),this.updateStoredData()):this.get(M.properties.preferredDealer)&&(b=a.proxy(this.viewOnMap,this,!1,this.get(M.properties.preferredDealer)))),c={dealerDetailContainerSelect:M.selectors.dealerDetail,idle:a.proxy(this.onMapReady,this,b),isGeolocated:a.proxy(this.isGeolocated,this),dealerCallback:a.proxy(this.requestDealerDetail,this),ActiveDealersCallback:a.proxy(this.getActiveDealers,this),onShowDealerDetail:a.proxy(this.onShowDealerDetail,this),searchTermExist:a.proxy(this.geoloc.searchTermExist,this.geoloc),preferredZoom:this.preferredZoom,autoZoomOutLimit:this.autoZoomOutLimit,minMarkersVisible:this.minMarkersVisible,analyticsManager:L.analyticsManager,showApiResultsOnly:this.showApiResultsOnly,HELIOS:this.attributes.HELIOS},this.geoloc.collection&&(e=this.geoloc.collection),this.$el.find(M.selectors.map).each(a.proxy(function(a,b){this.map=d.initInstance(b,c,e)},this)))},newGeoloc:function(a){var b=this.$el.find(f.defaults.selector),c=!1,d={},e=new k;return!!b.length&&(this.get(M.properties.urls).dealerSearch&&(d={collection:{url:this.get(M.properties.urls).dealerSearch},settings:{autocomplete:{language:e.getLanguageCode()},showApiResultsOnly:this.showApiResultsOnly}}),c=f.init(d,b,this.attributes.window,L.analyticsManager),c.init(),a&&c.reset(a),c)},initList:function(){var b={findADealer:this,preferredDealerID:this.get(M.properties.preferredDealer),callbacks:{isGeolocated:a.proxy(this.isGeolocated,this),viewOnMap:a.proxy(this.viewOnMap,this)},HELIOS:L.HELIOS,geoloc:this.geoloc,analyticsManager:L.analyticsManager};this.viewList=e.init(this.views.list.$view,b,this.geoloc.collection)},abortActiveRequest:function(){this.activeAjaxRequest&&this.activeAjaxRequest.abort()},onRequestError:function(){this.activeAjaxRequest=!1},requestDealerDetail:function(b){var c=this.geoloc.collection.get(b),d=a.Deferred();if(c)return this.setValue(c),c.get(M.properties.address)?(this.get(M.properties.preferredDealer)===b?c.set(M.properties.preferredDealer,!0):c.set(M.properties.preferredDealer,!1),d.resolve(c)):this.activeAjaxRequest=a.ajax({url:this.get(M.properties.urls).dealerDetail+"/dealerId/"+b+"/data.json",type:"GET",success:a.proxy(function(a,c){var e;this.onRequestDealerDetailSuccess(d,a,b),M.data.dealerTypeAnalytic=a.dealerType,e=this.$root.find(M.selectors.bookServiceButton).attr("href"),e=decodeURI(e).replace("^DEALER_ID^",a.dealerId||"").replace("^SITE_ID^",a.siteId||""),this.$root.find(M.selectors.bookServiceButton).attr("href",e)},this),error:a.proxy(function(a,c,e){this.onRequestDealerDetailError(d,c,b)},this)}),d.promise()},onRequestDealerDetailSuccess:function(a,b,c){var d;if(null===b)return x.warn("Response for dealer data returned null"),!1;this.activeAjaxRequest=!1,this.updateModels([b],!1),d=this.geoloc.collection.get(c),this.value.shortDealerId=b.dealerId,a.resolve(d)},onRequestDealerDetailError:function(a,b){a.reject(b),this.onRequestError()},requestDealer:function(){this.attributes.basicSearchOn=!0,this.requestDealerData()},requestDealerData:function(){var b,d,e,f=this.get(M.properties.urls).dealerSearch,g="",h=this.$form.find("input[name=size]").val(),i=this.geoloc.isDealerSelected(),j=this.geoloc.$input.val(),k=this.geoloc.isCurrentLocation(),l="",m=null;for(x.info("requestDealerData"),this.attributes.basicSearchOn&&(f=this.get(M.properties.urls).dealerSearchBasic),(this.showApiResultsOnly||!j.length&&!k)&&(h=-1),this.attributes.currentFilters.length>1?this.addNewFilter("size",-1):this.addNewFilter("size",h),(j.length||k)&&(g=(i||k?"input[name=latlong]":"input[name=location]")+", "),g+="input[name=page], input[name=filter], input[name=_charset_]",b=this.$form.find(g).serializeArray(),d=0,e=this.attributes.currentFilters.length;d<e;d++)b.push(this.attributes.currentFilters[d]);a.when(this.map.clearMarkers()).done(c.bind(function(){return this.viewList&&this.viewList.view&&this.viewList.view.trigger("reset"),this.set(M.properties.currentPage,1),this.abortActiveRequest(),this.geoloc.set(M.properties.previousQuery,b),c.each(b,function(a){"location"!==a.name&&"latlong"!==a.name?l+="/"+a.name+"/"+a.value:m=a}),m&&(l+="/"+m.name+"/"+m.value),this.activeAjaxRequest=a.ajax({url:f+(l.length?l+"/data.json":""),type:"GET",success:c.bind(this.onDealerRequestSuccess,this),error:c.bind(this.onDealerRequestError,this),complete:this.toggleFilterButtonDisable(!1)}),this.activeAjaxRequest},this))},addNewFilter:function(a,b){var c,d,e={name:a,value:b},f=!1;for(c=0,d=this.attributes.currentFilters.length;c<d;c++)this.attributes.currentFilters[c].name===a&&(this.attributes.currentFilters[c].value=b,f=!0);f||this.attributes.currentFilters.push(e)},removeAllFilters:function(){for(;this.attributes.currentFilters.length>0;)this.attributes.currentFilters.pop()},onDealerRequestSuccess:function(b){var d=a.trim(this.geoloc.$input.val()),e=this.map,f=!this.showApiResultsOnly||!!d.length,g=a(M.selectors.filterGroup+" "+M.selectors.isActive).text();if(x.info("onDealerRequestSuccess"),b&&(this.activeAjaxRequest=!1,this.resetPins(),this.geoloc.collection.allActiveResults=b.totalResults,this.updateModels(b.dealers,f),this.pins=this.getActiveDealers(),a.when(this.updateUI(this.pins.length,f)).done(c.bind(function(){f&&d.length&&!L.HELIOS.state.dealer&&!this.showApiResultsOnly&&this.map.autoAdjustZoomOverMarkers(d),J&&(this.trackSearchHandler("filter"),J=!1)},this)),0===b.totalResults&&a(M.selectors.root).trigger(M.events.zeroDealers),this.geoloc.trackingVar(e.getNumberOfVisibleMarkers(e.map,this.pins),g)),null===b)return x.warn("Response for dealers data returned null"),!1},removeDealerDetail:function(){this.map&&this.map.removeDealerDetail()},onDealerRequestError:function(){x.info("onDealerRequestError"),this.onRequestError(),this.resetPins(),this.pins=[]},onPreferredDealerDone:function(b,c,d){this.$el.find(M.selectors.preferenceSection).removeClass(M.classes.preferred),a(".dealer-"+c).addClass(M.classes.preferred),this.get(M.properties.preferredDealer)&&(b=this.geoloc.collection.get(this.get(M.properties.preferredDealer)))&&this.map&&(this.get(M.properties.listView)||this.viewMarker(b)),this.updateStoredData(),this.viewList.view.setPreferredDealer(c)},passDealerHandler:function(b){var d,e=a(b.target),f=e.data("id"),g=e.attr(L.data.target);f&&(b.preventDefault(),this.viewList.view.setPreferredDealer(f),w.save(f),d=e[0].href,c.isString(d)&&d.length&&o.run(g,d))},checkLoggedInStatus:function(){a.cookie("OwnerServicesLoggedInName")&&(v=!0,this.$el.addClass(M.classes.showIfLoggedIn))},setPreferred:function(b,c){var d,e;b.preventDefault(),d=a(b.target),e=c||d.attr("data-id"),this.set(M.properties.preferredDealer,e),a("."+M.classes.waiting).removeClass(M.classes.waiting),d.addClass(M.classes.waiting),this.requestPreferredDealer(d,e)},requestPreferredDealer:function(b,c){var d=this.geoloc.collection.get(c);this.preferredDealerAjaxRequest&&this.preferredDealerAjaxRequest.abort(),this.preferredDealerAjaxRequest=a.ajax({url:b.attr("data-action"),method:"post",dataType:"text",data:{dealerId:this.get(M.properties.preferredDealer)},success:a.proxy(this.onPreferredDealerDone,this,d,c),complete:a.proxy(function(){b.removeClass(M.classes.waiting),this.preferredDealerAjaxRequest=!1,this.checkReferrer()},this)})},getStoredData:function(a){var b={preferred:this.get(M.properties.preferredDealer)};return b.id=a||b.preferred,b},updateStoredData:function(a){A&&A.save(G,this.getStoredData(a))},onMapReady:function(a){a&&a()},handleAccordionClick:function(a,b){a.find(M.selectors.accordionChildHeader).on("click",function(c){c.stopPropagation(),a.toggleClass("active"),b="closed"===b?"open":"closed",a.find(M.selectors.accordionChildHeader).attr("data-state",b),a.find(M.selectors.accordionPanel).attr("data-state",b)})},onShowDealerDetail:function(){var b,c,d;x.info("onShowDealerDetail invoked"),this.get(M.properties.viewingOnMap)||(b=this.$el.find(M.selectors.dealerDetail).offset(),a("html, body").animate({scrollTop:b.top},300)),c=a(M.selectors.dealerDetail).find(M.selectors.accordionGroup),d=c.find(M.selectors.accordionChildHeader).attr("data-state"),this.handleAccordionClick(c,d)},resetPins:function(){var a,b=this.pins.length;for(a=0;a<b;a++)this.pins[a].set({position:void 0,distance:void 0});return b},viewMarker:function(a){this.toggleView(M.properties.map),this.map.viewMarker(a.get("marker"),!0,!0)},viewOnMap:function(b,c,d){var e,f=!!b&&a(b.target),g=c||f.attr("data-id");if(this.attributes.restrictViewOnMapCalls&&!d)return!1;b&&b.preventDefault(),g&&(e=this.geoloc.collection.get(g))&&(this.set(M.properties.viewingOnMap,!0),this.map?this.map.isDealerActiveAndVisible(g)&&this.viewMarker(e):this.initMap(a.proxy(this.viewMarker,this,e)))},isGeolocated:function(){return this.geoloc.get("value")},onGeolocGeolocation:function(a){var b=a.latitude,c=a.longitude,d=this.geoloc.get("defaultText"),e=this.geoloc.isGeoButtonActive();L.analyticsManager.tag("search",{searchType:"geolocation"}),this.map&&(e?this.map.setLocation(b,c,d):this.map.setLocation(!1)),this.submitHandler()},onGeolocInput:function(a){this.map.setLocation(!1)},submitHandler:function(a){var b=this.geoloc,c=b.searchTermExist(),d=b.isCurrentLocation(),e=b.isGeoButtonActive();if(this.set(M.properties.currentPage,1),a&&a.preventDefault(),this.map.chosenDealerId=null,c){if(this.get("useTopSuggestion")&&b.autocomplete.topSuggestion){if(b.autocomplete.topSuggestion.name&&L.HELIOS.state.dealerName){if(b.autocomplete.topSuggestion.name===L.HELIOS.state.dealerName)return b.$input.val(b.autocomplete.topSuggestion.name),void b.autocomplete.hideSuggestions();b.onAutocompletePlaceChanged(b.autocomplete.topSuggestion,!1)}else b.onAutocompletePlaceChanged(b.autocomplete.topSuggestion,!1);b.autocomplete.hideSuggestions()}}else this.geoloc.autocomplete.setSelectedDealerId(""),this.map.setAutoSelectFirstDealerInCollection(!1);c&&!b.get("isValid")&&a||(!d&&e&&(b.deactivateGeoButton(),this.map.setLocation(!1)),this.resetPins(),this.requestDealer())},filterSubmitHandler:function(b){var c=a(M.selectors.filterGroup+" .is-active").data("dealerServices");c&&this.addNewFilter("dealer-services",c),this.requestDealerData()},filterByCarType:function(a){this.attributes.basicSearchOn=!0,this.addNewFilter("test-drive-model",a),this.requestDealerData()},loadPreFilters:function(){var b=a(M.selectors.root).find(M.selectors.preFilter).val();b&&b.length&&!M.properties.isPrefiltered&&(M.properties.isPrefiltered=!0,this.map.setAutoSelectFirstDealerInCollection(!1),this.addNewFilter("dealer-services",b),this.requestDealerData(),a(M.selectors.root).find("button[data-dealer-services="+b+"]").addClass(M.classes.active))},getActiveDealers:function(a){var b,c=a||M.properties.position;return b=this.geoloc.collection.filter(function(a){return a.get("visible")}),b.sort(function(a,b){return a.get(c)<b.get(c)?-1:a.get(c)>b.get(c)?1:0}),b},formatDealerData:function(a){var b,c;if(a)for(b=0,c=a.length;b<c;b++)a[b]&&a[b].averageStarRating&&(a[b].dealerRating=this.formatStarRating(a[b]));return a},formatStarRating:function(b){var c=[];return a.each(b.averageStarRating,function(a,b){var d=b.displayScore;d&&c.push({title:b.title,grade:d,number:b.numberOfReviews,percent:20*d,type:a})}),c},getAllDealers:function(){return this.geoloc.collection.first(this.get(M.properties.currentPage)*this.get(M.properties.dealerNumber))},filterModels:function(a){var b,c,d,e,f,g,h,i;if(a){for(i=0,e=this.formatDealerData(a),h=e.length,g=this.get(M.properties.dealerNumber)*(this.get(M.properties.currentPage)-1),f=0;f<h;f++)b=e[f],c=b.id,(d=this.geoloc.collection.get(c))&&(i++,d.set(b),this.get(M.properties.preferredDealer)===c?d.set(M.properties.preferredDealer,!0):d.set(M.properties.preferredDealer,!1),d.set(M.properties.position,i+g));return this.geoloc.collection.trigger(M.triggers.changeVisible),i}return!1},updateModels:function(b,d){var e,f,g,h,i,j=!0;return!!b&&(g=0,this.showApiResultsOnly&&0===this.$root.closest(".c_056").length&&(j=!1),this.geoloc.collection.each(function(a){a.set({visible:j,position:null},{silent:!0})}),(d&&this.attributes.currentFilters.length>1||d&&this.showApiResultsOnly)&&(i=this.map.getExtendBounds(),this.geoloc.collection.each(function(a){a.set({visible:!1,position:null},{silent:!0})})),b=this.formatDealerData(b),h=this.get(M.properties.dealerNumber)*(this.get(M.properties.currentPage)-1),c.each(b,c.bind(function(a){a&&(e=a.id,(f=this.geoloc.collection.get(e))&&(g++,f.set(a),this.get(M.properties.preferredDealer)===e?f.set(M.properties.preferredDealer,!0):f.set(M.properties.preferredDealer,!1),d&&f.set({visible:!0,position:g+h},{silent:!0})))},this)),d&&(this.geoloc.collection.trigger(M.triggers.changeAll),i=this.map.getExtendBounds(),this.geoloc.collection.trigger(M.triggers.changeVisible,i)),a(this).trigger("modelsUpdated"),g)},updateUI:function(b,c){var d,e=this.geoloc.get(M.properties.label),f=0,g=a.Deferred();return x.info("updateUI"),b?(d="",this.$resultText?(d=this.$resultText.data(M.data.allDealersText),d?this.$resultText.html(d.replace("%number%",b)):x.debug("resultString was not defined in updateUI"),e&&(d=this.$resultText.data(M.data.resultsText)||"",this.$resultText.html(d.replace("%location%",e)))):x.debug("this.$resultText is undefined in updateUI")):(this.$resultText.empty(),!this.showApiResultsOnly&&c&&(d=this.$resultText.data(M.data.noResultsText)||"",this.$resultText.html(d),this.geoloc.collection.each(function(a){a.set({visible:!1,position:null}),f++}))),g.resolve("Finished updating UI"),g.promise()},set:function(a,b){return this.attributes[a]=b,this.attributes[a]},get:function(a){return this.attributes[a]},onClickAdvancedFilter:function(b){return a(b.target).parent(M.selectors.advancedFilter).toggleClass(M.classes.opened+" "+M.classes.closed),!1},onClickAdvancedFilterElement:function(b){var c,d,e,f,g,h,i,j=a(b.target);b.preventDefault(),j.hasClass(M.classes.advancedFilterReset)||j.hasClass(M.classes.active)||(this.set(M.properties.isFiltered,!0),c=j.html(),d=j.data("dealerServices"),e=j.parents(M.selectors.advancedFilterDropdown),f=e.find("input"),g=f.attr("name"),h=e.find("ul li"),this.$el.find(M.selectors.filterTextBy),h.find("button").removeClass(M.classes.active),j.not(M.selectors.advancedFilterReset).addClass(M.classes.active),a(M.selectors.filterGroup).data(M.properties.currentServiceFilter,d),f.val(j.data(g)),this.toggleFilterText(c,d),this.set(M.properties.currentPage,1),this.toggleFilterButtonDisable(!0),i=this.geoloc.isDealerSelected(),this.map.setAutoSelectFirstDealerInCollection(i),this.attributes.basicSearchOn=!0,this.filterSubmitHandler(),J=!0)},onClickAdvancedFilterReset:function(b){var c,d,e,f,g;a(b.target);b.preventDefault(),this.removeAllFilters(),a(M.selectors.filterGroup).data(M.properties.currentServiceFilter,""),e=this.$el.find(M.selectors.filterGroup+" button."+M.classes.active),f=this.$el.find(M.selectors.filterGroup+" input"),this.set(M.properties.isFiltered,!1),e.removeClass(M.classes.active),f.val(""),this.set(M.properties.currentPage,1),this.toggleFilterText(),c=this.get(M.properties.helios),d=c.components.c040.dealers.dealers,this.updateModels(d,!0),this.pins=this.getActiveDealers(),this.updateUI(this.pins.length),this.map.disableActiveMarker(),g=this.geoloc.isDealerSelected(),this.map.setAutoSelectFirstDealerInCollection(g),this.attributes.basicSearchOn=!0,this.filterSubmitHandler()},toggleFilterButtonDisable:function(b){a(M.selectors.filterGroup).find("li button").each(function(){this.disabled=b})},onClickFilterText:function(b){var c=a(b.currentTarget);b.preventDefault(),this.set(M.properties.isFiltered,!1),c.is(M.selectors.filterText)&&(this.$el.find(M.selectors.advancedFilterReset).trigger(M.triggers.click),c.parent().addClass(M.classes.visuallyHidden))},toggleFilterText:function(a,b){var c=this.$el.find(M.selectors.filterTextBy);a&&"Reset"!==a?c.removeClass(M.classes.visuallyHidden).find(M.selectors.filterText).attr("data-dealer-services",b).html(a).end():c.addClass(M.classes.visuallyHidden).find(M.selectors.filterText).data("dealerServices","").empty()}},{init:q,newInstance:u}}),function(a){"function"==typeof define&&define.amd?define("datepickerLanguages",["jqueryui"],a):a(jQuery.datepicker)}(function(a){var a=$.datepicker;a.regional.af={closeText:"Selekteer",prevText:"Vorige",nextText:"Volgende",currentText:"Vandag",monthNames:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Sondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrydag","Saterdag"],dayNamesShort:["Son","Maa","Din","Woe","Don","Vry","Sat"],dayNamesMin:["So","Ma","Di","Wo","Do","Vr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.af;a.regional["ar-DZ"]={closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesMin:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""};a.regional["ar-DZ"];a.regional.ar={closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesMin:["ح","ن","ث","ر","خ","ج","س"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""};a.regional.ar;a.regional.az={closeText:"Bağla",prevText:"&#x3C;Geri",nextText:"İrəli&#x3E;",currentText:"Bugün",monthNames:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],monthNamesShort:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avq","Sen","Okt","Noy","Dek"],dayNames:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"],dayNamesShort:["B","Be","Ça","Ç","Ca","C","Ş"],dayNamesMin:["B","B","Ç","С","Ç","C","Ş"],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.az;a.regional.be={closeText:"Зачыніць",prevText:"&larr;Папяр.",nextText:"Наст.&rarr;",currentText:"Сёньня",monthNames:["Студзень","Люты","Сакавік","Красавік","Травень","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Сьнежань"],monthNamesShort:["Сту","Лют","Сак","Кра","Тра","Чэр","Ліп","Жні","Вер","Кас","Ліс","Сьн"],
dayNames:["нядзеля","панядзелак","аўторак","серада","чацьвер","пятніца","субота"],dayNamesShort:["ндз","пнд","аўт","срд","чцв","птн","сбт"],dayNamesMin:["Нд","Пн","Аў","Ср","Чц","Пт","Сб"],weekHeader:"Тд",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.be;a.regional.bg={closeText:"затвори",prevText:"&#x3C;назад",nextText:"напред&#x3E;",nextBigText:"&#x3E;&#x3E;",currentText:"днес",monthNames:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],monthNamesShort:["Яну","Фев","Мар","Апр","Май","Юни","Юли","Авг","Сеп","Окт","Нов","Дек"],dayNames:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"],dayNamesShort:["Нед","Пон","Вто","Сря","Чет","Пет","Съб"],dayNamesMin:["Не","По","Вт","Ср","Че","Пе","Съ"],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.bg;a.regional.bs={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.bs;a.regional.ca={closeText:"Tanca",prevText:"Anterior",nextText:"Següent",currentText:"Avui",monthNames:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],monthNamesShort:["gen","feb","març","abr","maig","juny","jul","ag","set","oct","nov","des"],dayNames:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],dayNamesShort:["dg","dl","dt","dc","dj","dv","ds"],dayNamesMin:["dg","dl","dt","dc","dj","dv","ds"],weekHeader:"Set",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.ca;a.regional.cs={closeText:"Zavřít",prevText:"&#x3C;Dříve",nextText:"Později&#x3E;",currentText:"Nyní",monthNames:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],monthNamesShort:["led","úno","bře","dub","kvě","čer","čvc","srp","zář","říj","lis","pro"],dayNames:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],dayNamesShort:["ne","po","út","st","čt","pá","so"],dayNamesMin:["ne","po","út","st","čt","pá","so"],weekHeader:"Týd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.cs;a.regional["cy-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["Ionawr","Chwefror","Mawrth","Ebrill","Mai","Mehefin","Gorffennaf","Awst","Medi","Hydref","Tachwedd","Rhagfyr"],monthNamesShort:["Ion","Chw","Maw","Ebr","Mai","Meh","Gor","Aws","Med","Hyd","Tac","Rha"],dayNames:["Dydd Sul","Dydd Llun","Dydd Mawrth","Dydd Mercher","Dydd Iau","Dydd Gwener","Dydd Sadwrn"],dayNamesShort:["Sul","Llu","Maw","Mer","Iau","Gwe","Sad"],dayNamesMin:["Su","Ll","Ma","Me","Ia","Gw","Sa"],weekHeader:"Wy",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional["cy-GB"];a.regional.da={closeText:"Luk",prevText:"&#x3C;Forrige",nextText:"Næste&#x3E;",currentText:"Idag",monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],dayNamesShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayNamesMin:["Sø","Ma","Ti","On","To","Fr","Lø"],weekHeader:"Uge",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.da;a.regional.de={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.de;a.regional.el={closeText:"Κλείσιμο",prevText:"Προηγούμενος",nextText:"Επόμενος",currentText:"Τρέχων Μήνας",monthNames:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],monthNamesShort:["Ιαν","Φεβ","Μαρ","Απρ","Μαι","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"],dayNames:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],dayNamesShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],dayNamesMin:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σα"],weekHeader:"Εβδ",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.el;a.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};var b=a.regional["en-GB"];a.regional["en-IN"]=b;a.regional["en-IN"];a.regional.eo={closeText:"Fermi",prevText:"&#x3C;Anta",nextText:"Sekv&#x3E;",currentText:"Nuna",monthNames:["Januaro","Februaro","Marto","Aprilo","Majo","Junio","Julio","Aŭgusto","Septembro","Oktobro","Novembro","Decembro"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aŭg","Sep","Okt","Nov","Dec"],dayNames:["Dimanĉo","Lundo","Mardo","Merkredo","Ĵaŭdo","Vendredo","Sabato"],dayNamesShort:["Dim","Lun","Mar","Mer","Ĵaŭ","Ven","Sab"],dayNamesMin:["Di","Lu","Ma","Me","Ĵa","Ve","Sa"],weekHeader:"Sb",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.eo;a.regional.es={closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],dayNamesShort:["dom","lun","mar","mié","jue","vie","sáb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.es;a.regional.et={closeText:"Sulge",prevText:"Eelnev",nextText:"Järgnev",currentText:"Täna",monthNames:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],monthNamesShort:["Jaan","Veebr","Märts","Apr","Mai","Juuni","Juuli","Aug","Sept","Okt","Nov","Dets"],dayNames:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"],dayNamesShort:["Pühap","Esmasp","Teisip","Kolmap","Neljap","Reede","Laup"],dayNamesMin:["P","E","T","K","N","R","L"],weekHeader:"näd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.et;a.regional.eu={closeText:"Egina",prevText:"&#x3C;Aur",nextText:"Hur&#x3E;",currentText:"Gaur",monthNames:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua"],monthNamesShort:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe."],dayNames:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],dayNamesShort:["ig.","al.","ar.","az.","og.","ol.","lr."],dayNamesMin:["ig","al","ar","az","og","ol","lr"],weekHeader:"As",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.eu;a.regional.fa={closeText:"بستن",prevText:"&#x3C;قبلی",nextText:"بعدی&#x3E;",currentText:"امروز",monthNames:["فروردين","ارديبهشت","خرداد","تير","مرداد","شهريور","مهر","آبان","آذر","دی","بهمن","اسفند"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["يکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayNamesShort:["ی","د","س","چ","پ","ج","ش"],dayNamesMin:["ی","د","س","چ","پ","ج","ش"],weekHeader:"هف",dateFormat:"yy/mm/dd",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""};a.regional.fa;a.regional.fi={closeText:"Sulje",prevText:"&#xAB;Edellinen",nextText:"Seuraava&#xBB;",currentText:"Tänään",monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthNamesShort:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"],dayNamesShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayNames:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],dayNamesMin:["Su","Ma","Ti","Ke","To","Pe","La"],weekHeader:"Vk",dateFormat:"d.m.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.fi;a.regional.fo={closeText:"Lat aftur",prevText:"&#x3C;Fyrra",nextText:"Næsta&#x3E;",currentText:"Í dag",monthNames:["Januar","Februar","Mars","Apríl","Mei","Juni","Juli","August","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Sunnudagur","Mánadagur","Týsdagur","Mikudagur","Hósdagur","Fríggjadagur","Leyardagur"],dayNamesShort:["Sun","Mán","Týs","Mik","Hós","Frí","Ley"],dayNamesMin:["Su","Má","Tý","Mi","Hó","Fr","Le"],weekHeader:"Vk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.fo;a.regional["fr-CA"]={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional["fr-CA"];a.regional["fr-CH"]={closeText:"Fermer",prevText:"&#x3C;Préc",nextText:"Suiv&#x3E;",currentText:"Courant",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sm",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional["fr-CH"];a.regional.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.fr;a.regional.gl={closeText:"Pechar",prevText:"&#x3C;Ant",nextText:"Seg&#x3E;",currentText:"Hoxe",monthNames:["Xaneiro","Febreiro","Marzo","Abril","Maio","Xuño","Xullo","Agosto","Setembro","Outubro","Novembro","Decembro"],monthNamesShort:["Xan","Feb","Mar","Abr","Mai","Xuñ","Xul","Ago","Set","Out","Nov","Dec"],dayNames:["Domingo","Luns","Martes","Mércores","Xoves","Venres","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mér","Xov","Ven","Sáb"],dayNamesMin:["Do","Lu","Ma","Mé","Xo","Ve","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.gl;a.regional.he={closeText:"סגור",prevText:"&#x3C;הקודם",nextText:"הבא&#x3E;",currentText:"היום",monthNames:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],monthNamesShort:["ינו","פבר","מרץ","אפר","מאי","יוני","יולי","אוג","ספט","אוק","נוב","דצמ"],dayNames:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],dayNamesShort:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],dayNamesMin:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""};a.regional.he;a.regional.hi={closeText:"बंद",prevText:"पिछला",nextText:"अगला",currentText:"आज",monthNames:["जनवरी ","फरवरी","मार्च","अप्रेल","मई","जून","जूलाई","अगस्त ","सितम्बर","अक्टूबर","नवम्बर","दिसम्बर"],monthNamesShort:["जन","फर","मार्च","अप्रेल","मई","जून","जूलाई","अग","सित","अक्ट","नव","दि"],dayNames:["रविवार","सोमवार","मंगलवार","बुधवार","गुरुवार","शुक्रवार","शनिवार"],dayNamesShort:["रवि","सोम","मंगल","बुध","गुरु","शुक्र","शनि"],dayNamesMin:["रवि","सोम","मंगल","बुध","गुरु","शुक्र","शनि"],weekHeader:"हफ्ता",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.hi;a.regional.hr={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthNamesShort:["Sij","Velj","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],dayNames:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],weekHeader:"Tje",dateFormat:"dd.mm.yy.",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.hr;a.regional.hu={closeText:"bezár",prevText:"vissza",nextText:"előre",currentText:"ma",monthNames:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],monthNamesShort:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Szep","Okt","Nov","Dec"],dayNames:["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat"],dayNamesShort:["Vas","Hét","Ked","Sze","Csü","Pén","Szo"],dayNamesMin:["V","H","K","Sze","Cs","P","Szo"],weekHeader:"Hét",dateFormat:"yy.mm.dd.",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""};a.regional.hu;a.regional.hy={closeText:"Փակել",prevText:"&#x3C;Նախ.",nextText:"Հաջ.&#x3E;",currentText:"Այսօր",monthNames:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],monthNamesShort:["Հունվ","Փետր","Մարտ","Ապր","Մայիս","Հունիս","Հուլ","Օգս","Սեպ","Հոկ","Նոյ","Դեկ"],dayNames:["կիրակի","եկուշաբթի","երեքշաբթի","չորեքշաբթի","հինգշաբթի","ուրբաթ","շաբաթ"],dayNamesShort:["կիր","երկ","երք","չրք","հնգ","ուրբ","շբթ"],dayNamesMin:["կիր","երկ","երք","չրք","հնգ","ուրբ","շբթ"],weekHeader:"ՇԲՏ",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.hy;a.regional.id={closeText:"Tutup",prevText:"&#x3C;mundur",nextText:"maju&#x3E;",currentText:"hari ini",monthNames:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agus","Sep","Okt","Nop","Des"],dayNames:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],dayNamesShort:["Min","Sen","Sel","Rab","kam","Jum","Sab"],dayNamesMin:["Mg","Sn","Sl","Rb","Km","jm","Sb"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.id;a.regional.is={closeText:"Loka",prevText:"&#x3C; Fyrri",nextText:"Næsti &#x3E;",currentText:"Í dag",monthNames:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Maí","Jún","Júl","Ágú","Sep","Okt","Nóv","Des"],dayNames:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur"],dayNamesShort:["Sun","Mán","Þri","Mið","Fim","Fös","Lau"],dayNamesMin:["Su","Má","Þr","Mi","Fi","Fö","La"],weekHeader:"Vika",dateFormat:"dd.mm.yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.is;a.regional["it-CH"]={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional["it-CH"];a.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.it;a.regional.ja={closeText:"閉じる",prevText:"&#x3C;前",nextText:"次&#x3E;",currentText:"今日",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],weekHeader:"週",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"};a.regional.ja;a.regional.ka={closeText:"დახურვა",prevText:"&#x3c; წინა",nextText:"შემდეგი &#x3e;",currentText:"დღეს",monthNames:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი"],monthNamesShort:["იან","თებ","მარ","აპრ","მაი","ივნ","ივლ","აგვ","სექ","ოქტ","ნოე","დეკ"],dayNames:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"],dayNamesShort:["კვ","ორშ","სამ","ოთხ","ხუთ","პარ","შაბ"],dayNamesMin:["კვ","ორშ","სამ","ოთხ","ხუთ","პარ","შაბ"],weekHeader:"კვირა",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.ka;a.regional.kk={closeText:"Жабу",prevText:"&#x3C;Алдыңғы",nextText:"Келесі&#x3E;",currentText:"Бүгін",monthNames:["Қаңтар","Ақпан","Наурыз","Сәуір","Мамыр","Маусым","Шілде","Тамыз","Қыркүйек","Қазан","Қараша","Желтоқсан"],monthNamesShort:["Қаң","Ақп","Нау","Сәу","Мам","Мау","Шіл","Там","Қыр","Қаз","Қар","Жел"],dayNames:["Жексенбі","Дүйсенбі","Сейсенбі","Сәрсенбі","Бейсенбі","Жұма","Сенбі"],dayNamesShort:["жкс","дсн","ссн","срс","бсн","жма","снб"],dayNamesMin:["Жк","Дс","Сс","Ср","Бс","Жм","Сн"],weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.kk;a.regional.km={closeText:"ធ្វើ​រួច",prevText:"មុន",nextText:"បន្ទាប់",currentText:"ថ្ងៃ​នេះ",monthNames:["មករា","កុម្ភៈ","មីនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ"],monthNamesShort:["មករា","កុម្ភៈ","មីនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ"],dayNames:["អាទិត្យ","ចន្ទ","អង្គារ","ពុធ","ព្រហស្បតិ៍","សុក្រ","សៅរ៍"],dayNamesShort:["អា","ច","អ","ពុ","ព្រហ","សុ","សៅ"],dayNamesMin:["អា","ច","អ","ពុ","ព្រហ","សុ","សៅ"],weekHeader:"សប្ដាហ៍",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.km;a.regional.ko={closeText:"닫기",prevText:"이전달",nextText:"다음달",currentText:"오늘",monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayNames:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],dayNamesShort:["일","월","화","수","목","금","토"],dayNamesMin:["일","월","화","수","목","금","토"],weekHeader:"Wk",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"년"};a.regional.ko;a.regional.ky={closeText:"Жабуу",prevText:"&#x3c;Мур",nextText:"Кий&#x3e;",currentText:"Бүгүн",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["жекшемби","дүйшөмбү","шейшемби","шаршемби","бейшемби","жума","ишемби"],dayNamesShort:["жек","дүй","шей","шар","бей","жум","ише"],dayNamesMin:["Жк","Дш","Шш","Шр","Бш","Жм","Иш"],weekHeader:"Жум",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.ky;a.regional.lb={closeText:"Fäerdeg",prevText:"Zréck",nextText:"Weider",currentText:"Haut",monthNames:["Januar","Februar","Mäerz","Abrëll","Mee","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mäe","Abr","Mee","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonndeg","Méindeg","Dënschdeg","Mëttwoch","Donneschdeg","Freideg","Samschdeg"],dayNamesShort:["Son","Méi","Dën","Mët","Don","Fre","Sam"],dayNamesMin:["So","Mé","Dë","Më","Do","Fr","Sa"],weekHeader:"W",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.lb;a.regional.lt={closeText:"Uždaryti",prevText:"&#x3C;Atgal",nextText:"Pirmyn&#x3E;",currentText:"Šiandien",monthNames:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],monthNamesShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gru"],dayNames:["sekmadienis","pirmadienis","antradienis","trečiadienis","ketvirtadienis","penktadienis","šeštadienis"],dayNamesShort:["sek","pir","ant","tre","ket","pen","šeš"],dayNamesMin:["Se","Pr","An","Tr","Ke","Pe","Še"],weekHeader:"SAV",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""};a.regional.lt;a.regional.lv={closeText:"Aizvērt",prevText:"Iepr.",nextText:"Nāk.",currentText:"Šodien",monthNames:["Janvāris","Februāris","Marts","Aprīlis","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],monthNamesShort:["Jan","Feb","Mar","Apr","Mai","Jūn","Jūl","Aug","Sep","Okt","Nov","Dec"],dayNames:["svētdiena","pirmdiena","otrdiena","trešdiena","ceturtdiena","piektdiena","sestdiena"],dayNamesShort:["svt","prm","otr","tre","ctr","pkt","sst"],dayNamesMin:["Sv","Pr","Ot","Tr","Ct","Pk","Ss"],weekHeader:"Ned.",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.lv;a.regional.mk={closeText:"Затвори",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Денес",monthNames:["Јануари","Февруари","Март","Април","Мај","Јуни","Јули","Август","Септември","Октомври","Ноември","Декември"],monthNamesShort:["Јан","Фев","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Ное","Дек"],dayNames:["Недела","Понеделник","Вторник","Среда","Четврток","Петок","Сабота"],dayNamesShort:["Нед","Пон","Вто","Сре","Чет","Пет","Саб"],dayNamesMin:["Не","По","Вт","Ср","Че","Пе","Са"],weekHeader:"Сед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.mk;a.regional.ml={closeText:"ശരി",prevText:"മുന്നത്തെ",nextText:"അടുത്തത് ",currentText:"ഇന്ന്",monthNames:["ജനുവരി","ഫെബ്രുവരി","മാര്‍ച്ച്","ഏപ്രില്‍","മേയ്","ജൂണ്‍","ജൂലൈ","ആഗസ്റ്റ്","സെപ്റ്റംബര്‍","ഒക്ടോബര്‍","നവംബര്‍","ഡിസംബര്‍"],monthNamesShort:["ജനു","ഫെബ്","മാര്‍","ഏപ്രി","മേയ്","ജൂണ്‍","ജൂലാ","ആഗ","സെപ്","ഒക്ടോ","നവം","ഡിസ"],dayNames:["ഞായര്‍","തിങ്കള്‍","ചൊവ്വ","ബുധന്‍","വ്യാഴം","വെള്ളി","ശനി"],dayNamesShort:["ഞായ","തിങ്ക","ചൊവ്വ","ബുധ","വ്യാഴം","വെള്ളി","ശനി"],dayNamesMin:["ഞാ","തി","ചൊ","ബു","വ്യാ","വെ","ശ"],weekHeader:"ആ",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.ml;a.regional.ms={closeText:"Tutup",prevText:"&#x3C;Sebelum",nextText:"Selepas&#x3E;",currentText:"hari ini",monthNames:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],monthNamesShort:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogo","Sep","Okt","Nov","Dis"],dayNames:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],dayNamesShort:["Aha","Isn","Sel","Rab","kha","Jum","Sab"],dayNamesMin:["Ah","Is","Se","Ra","Kh","Ju","Sa"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.ms;a.regional.nb={closeText:"Lukk",prevText:"&#xAB;Forrige",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["søn","man","tir","ons","tor","fre","lør"],dayNames:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],dayNamesMin:["sø","ma","ti","on","to","fr","lø"],weekHeader:"Uke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.nb;a.regional["nl-BE"]={closeText:"Sluiten",prevText:"←",nextText:"→",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional["nl-BE"];a.regional.nl={closeText:"Sluiten",prevText:"←",nextText:"→",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.nl;a.regional.nn={closeText:"Lukk",prevText:"&#xAB;Førre",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["sun","mån","tys","ons","tor","fre","lau"],dayNames:["sundag","måndag","tysdag","onsdag","torsdag","fredag","laurdag"],dayNamesMin:["su","må","ty","on","to","fr","la"],weekHeader:"Veke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.nn;a.regional.no={closeText:"Lukk",prevText:"&#xAB;Forrige",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["søn","man","tir","ons","tor","fre","lør"],dayNames:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],dayNamesMin:["sø","ma","ti","on","to","fr","lø"],weekHeader:"Uke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.no;a.regional.pl={closeText:"Zamknij",prevText:"&#x3C;Poprzedni",nextText:"Następny&#x3E;",currentText:"Dziś",monthNames:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthNamesShort:["Sty","Lu","Mar","Kw","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],dayNames:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],dayNamesShort:["Nie","Pn","Wt","Śr","Czw","Pt","So"],dayNamesMin:["N","Pn","Wt","Śr","Cz","Pt","So"],weekHeader:"Tydz",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.pl;a.regional["pt-BR"]={closeText:"Fechar",prevText:"&#x3C;Anterior",nextText:"Próximo&#x3E;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional["pt-BR"];a.regional.pt={closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.pt;a.regional.rm={closeText:"Serrar",prevText:"&#x3C;Suandant",nextText:"Precedent&#x3E;",currentText:"Actual",monthNames:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],monthNamesShort:["Scha","Fev","Mar","Avr","Matg","Zer","Fan","Avu","Sett","Oct","Nov","Dec"],dayNames:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"],dayNamesShort:["Dum","Gli","Mar","Mes","Gie","Ven","Som"],dayNamesMin:["Du","Gl","Ma","Me","Gi","Ve","So"],weekHeader:"emna",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.rm;a.regional.ro={closeText:"Închide",prevText:"&#xAB; Luna precedentă",nextText:"Luna următoare &#xBB;",currentText:"Azi",monthNames:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthNamesShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă"],dayNamesShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],dayNamesMin:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],weekHeader:"Săpt",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.ro;a.regional.ru={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],
dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.ru;a.regional.sk={closeText:"Zavrieť",prevText:"&#x3C;Predchádzajúci",nextText:"Nasledujúci&#x3E;",currentText:"Dnes",monthNames:["január","február","marec","apríl","máj","jún","júl","august","september","október","november","december"],monthNamesShort:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],dayNames:["nedeľa","pondelok","utorok","streda","štvrtok","piatok","sobota"],dayNamesShort:["Ned","Pon","Uto","Str","Štv","Pia","Sob"],dayNamesMin:["Ne","Po","Ut","St","Št","Pia","So"],weekHeader:"Ty",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.sk;a.regional.sl={closeText:"Zapri",prevText:"&#x3C;Prejšnji",nextText:"Naslednji&#x3E;",currentText:"Trenutni",monthNames:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"],dayNamesShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],dayNamesMin:["Ne","Po","To","Sr","Če","Pe","So"],weekHeader:"Teden",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.sl;a.regional.sq={closeText:"mbylle",prevText:"&#x3C;mbrapa",nextText:"Përpara&#x3E;",currentText:"sot",monthNames:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],monthNamesShort:["Jan","Shk","Mar","Pri","Maj","Qer","Kor","Gus","Sht","Tet","Nën","Dhj"],dayNames:["E Diel","E Hënë","E Martë","E Mërkurë","E Enjte","E Premte","E Shtune"],dayNamesShort:["Di","Hë","Ma","Më","En","Pr","Sh"],dayNamesMin:["Di","Hë","Ma","Më","En","Pr","Sh"],weekHeader:"Ja",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.sq;a.regional["sr-SR"]={closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sre","Čet","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],weekHeader:"Sed",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional["sr-SR"];a.regional.sr={closeText:"Затвори",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Данас",monthNames:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthNamesShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],dayNames:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"],dayNamesShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб"],dayNamesMin:["Не","По","Ут","Ср","Че","Пе","Су"],weekHeader:"Сед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.sr;a.regional.sv={closeText:"Stäng",prevText:"&#xAB;Förra",nextText:"Nästa&#xBB;",currentText:"Idag",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNamesShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],dayNames:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],dayNamesMin:["Sö","Må","Ti","On","To","Fr","Lö"],weekHeader:"Ve",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.sv;a.regional.ta={closeText:"மூடு",prevText:"முன்னையது",nextText:"அடுத்தது",currentText:"இன்று",monthNames:["தை","மாசி","பங்குனி","சித்திரை","வைகாசி","ஆனி","ஆடி","ஆவணி","புரட்டாசி","ஐப்பசி","கார்த்திகை","மார்கழி"],monthNamesShort:["தை","மாசி","பங்","சித்","வைகா","ஆனி","ஆடி","ஆவ","புர","ஐப்","கார்","மார்"],dayNames:["ஞாயிற்றுக்கிழமை","திங்கட்கிழமை","செவ்வாய்க்கிழமை","புதன்கிழமை","வியாழக்கிழமை","வெள்ளிக்கிழமை","சனிக்கிழமை"],dayNamesShort:["ஞாயிறு","திங்கள்","செவ்வாய்","புதன்","வியாழன்","வெள்ளி","சனி"],dayNamesMin:["ஞா","தி","செ","பு","வி","வெ","ச"],weekHeader:"Не",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.ta;a.regional.th={closeText:"ปิด",prevText:"&#xAB;&#xA0;ย้อน",nextText:"ถัดไป&#xA0;&#xBB;",currentText:"วันนี้",monthNames:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthNamesShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],dayNames:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],dayNamesShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],dayNamesMin:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.th;a.regional.tj={closeText:"Идома",prevText:"&#x3c;Қафо",nextText:"Пеш&#x3e;",currentText:"Имрӯз",monthNames:["Январ","Феврал","Март","Апрел","Май","Июн","Июл","Август","Сентябр","Октябр","Ноябр","Декабр"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["якшанбе","душанбе","сешанбе","чоршанбе","панҷшанбе","ҷумъа","шанбе"],dayNamesShort:["якш","душ","сеш","чор","пан","ҷум","шан"],dayNamesMin:["Як","Дш","Сш","Чш","Пш","Ҷм","Шн"],weekHeader:"Хф",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.tj;a.regional.tr={closeText:"kapat",prevText:"&#x3C;geri",nextText:"ileri&#x3e",currentText:"bugün",monthNames:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthNamesShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],dayNames:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],dayNamesShort:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],dayNamesMin:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.tr;a.regional.uk={closeText:"Закрити",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Сьогодні",monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthNamesShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],dayNames:["неділя","понеділок","вівторок","середа","четвер","п’ятниця","субота"],dayNamesShort:["нед","пнд","вів","срд","чтв","птн","сбт"],dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Тиж",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.uk;a.regional.vi={closeText:"Đóng",prevText:"&#x3C;Trước",nextText:"Tiếp&#x3E;",currentText:"Hôm nay",monthNames:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"],monthNamesShort:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayNames:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],dayNamesShort:["CN","T2","T3","T4","T5","T6","T7"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],weekHeader:"Tu",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.regional.vi;a.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"};a.regional["zh-CN"];a.regional["zh-HK"]={closeText:"關閉",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"dd-mm-yy",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"};a.regional["zh-HK"];a.regional["zh-TW"]={closeText:"關閉",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"};a.regional["zh-TW"]}),define("c_019_datepicker",["jquery","jqueryui"],function(a,b){"use strict";function c(a){this.$element=a,this.dateAvailable()}var d={dataAttributes:{DEFAULT_DATE:"defaultDate"},jqueryUi:{methods:{SET_OPTION_METHOD:"option",SET_DATE_METHOD:"setDate"},properties:{MIN_DATE:"minDate"}}};return c.prototype.dateAvailable=function(){var a,b,c=this.$element.data("defaultDate")?new Date(this.$element.data("defaultDate")):new Date,e=this.$element.data("restrictDate"),f=0,g={5:0,6:2,0:1},h=this.$element.datepicker(d.jqueryUi.methods.SET_OPTION_METHOD,d.jqueryUi.properties.MIN_DATE).toLowerCase(),i=e?h.match(/[0-9]/):[0];i=i.join(""),a=new Date(c.getFullYear(),c.getMonth(),c.getDate()+parseInt(i,10)),b=a.getDay(),g[b.toString()]&&(f=g[b.toString()],a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+f),this.$element.datepicker(d.jqueryUi.methods.SET_OPTION_METHOD,d.jqueryUi.properties.MIN_DATE,a)),this.$element.data(d.dataAttributes.DEFAULT_DATE)&&this.$element.datepicker(d.jqueryUi.methods.SET_DATE_METHOD,a)},c}),function($){function Timepicker(){this.debug=!0,this._curInst=null,this._disabledInputs=[],this._timepickerShowing=!1,this._inDialog=!1,this._dialogClass="ui-timepicker-dialog",this._mainDivId="ui-timepicker-div",this._inlineClass="ui-timepicker-inline",this._currentClass="ui-timepicker-current",this._dayOverClass="ui-timepicker-days-cell-over",this.regional=[],this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"],closeButtonText:"Done",nowButtonText:"Now",deselectButtonText:"Deselect"},this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",beforeShow:null,onSelect:null,onClose:null,timeSeparator:":",periodSeparator:" ",showPeriod:!1,showPeriodLabels:!0,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"now",myPosition:"left top",atPosition:"left bottom",onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5,manual:[]},rows:4,showHours:!0,showMinutes:!0,optionalMinutes:!1,showCloseButton:!1,showNowButton:!1,showDeselectButton:!1,maxTime:{hour:null,minute:null},minTime:{hour:null,minute:null}},$.extend(this._defaults,this.regional[""]),this.tpDiv=$('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function extendRemove(a,b){$.extend(a,b);for(var c in b)null!=b[c]&&void 0!=b[c]||(a[c]=b[c]);return a}$.extend($.ui,{timepicker:{version:"0.3.3"}});var PROP_NAME="timepicker",tpuuid=(new Date).getTime();$.extend(Timepicker.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachTimepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("time:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="tp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?(this._connectTimepicker(target,inst),this._setTimeFromField(inst)):inline&&this._inlineTimepicker(target,inst)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,inline:b,tpDiv:b?$('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'):this.tpDiv}},_connectTimepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(a,c,d){b.settings[c]=d}).bind("getData.timepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b))},_doKeyDown:function(a){var b=$.timepicker._getInst(a.target),c=!0;if(b._keyEvent=!0,$.timepicker._timepickerShowing)switch(a.keyCode){case 9:$.timepicker._hideTimepicker(),c=!1;break;case 13:return $.timepicker._updateSelectedValue(b),$.timepicker._hideTimepicker(),!1;case 27:$.timepicker._hideTimepicker();break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.timepicker._showTimepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyUp:function(a){var b=$.timepicker._getInst(a.target);$.timepicker._setTimeFromField(b),$.timepicker._updateTimepicker(b)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus.timepicker",this._showTimepicker),a.unbind("click.timepicker",this._adjustZIndex),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");if("focus"!=e&&"both"!=e||(a.bind("focus.timepicker",this._showTimepicker),a.bind("click.timepicker",this._adjustZIndex)),"button"==e||"both"==e){var f=this._get(b,"button");null==f&&(f=$('<button class="ui-timepicker-trigger" type="button"></button>'),a.after(f)),$(f).bind("click.timepicker",function(){return $.timepicker._timepickerShowing&&$.timepicker._lastInput==a[0]?$.timepicker._hideTimepicker():b.input.is(":disabled")||$.timepicker._showTimepicker(a[0]),!1})}},_inlineTimepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.tpDiv).bind("setData.timepicker",function(a,c,d){b.settings[c]=d}).bind("getData.timepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setTimeFromField(b),this._updateTimepicker(b),b.tpDiv.show())},_adjustZIndex:function(a){a=a.target||a,$.timepicker._getInst(a).tpDiv.css("zIndex",$.timepicker._getZIndex(a)+1)},_showTimepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.timepicker._isDisabledTimepicker(a)&&$.timepicker._lastInput!=a){$.timepicker._hideTimepicker();var b=$.timepicker._getInst(a);$.timepicker._curInst&&$.timepicker._curInst!=b&&$.timepicker._curInst.tpDiv.stop(!0,!0);var c=$.timepicker._get(b,"beforeShow");extendRemove(b.settings,c?c.apply(a,[a,b]):{}),b.lastVal=null,$.timepicker._lastInput=a,$.timepicker._setTimeFromField(b),$.timepicker._inDialog&&(a.value=""),$.timepicker._pos||($.timepicker._pos=$.timepicker._findPos(a),$.timepicker._pos[1]+=a.offsetHeight);var d=!1;$(a).parents().each(function(){return!(d|="fixed"==$(this).css("position"))});var e={left:$.timepicker._pos[0],top:$.timepicker._pos[1]};if($.timepicker._pos=null,b.tpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.timepicker._updateTimepicker(b),!b.inline&&"object"==typeof $.ui.position){b.tpDiv.position({of:b.input,my:$.timepicker._get(b,"myPosition"),at:$.timepicker._get(b,"atPosition"),collision:"flip"});var e=b.tpDiv.offset();$.timepicker._pos=[e.top,e.left]}if(b._hoursClicked=!1,b._minutesClicked=!1,e=$.timepicker._checkOffset(b,e,d),b.tpDiv.css({position:$.timepicker._inDialog&&$.blockUI?"static":d?"fixed":"absolute",display:"none",left:e.left+"px",top:e.top+"px"}),!b.inline){var f=$.timepicker._get(b,"showAnim"),g=$.timepicker._get(b,"duration"),h=function(){$.timepicker._timepickerShowing=!0;var a=$.timepicker._getBorders(b.tpDiv);b.tpDiv.find("iframe.ui-timepicker-cover").css({left:-a[0],top:-a[1],width:b.tpDiv.outerWidth(),height:b.tpDiv.outerHeight()})};$.timepicker._adjustZIndex(a),$.effects&&$.effects[f]?b.tpDiv.show(f,$.timepicker._get(b,"showOptions"),g,h):b.tpDiv.show(f?g:null,h),f&&g||h(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.timepicker._curInst=b}}},_getZIndex:function(a){for(var b,c,d=$(a),e=0;d.length&&d[0]!==document;)b=d.css("position"),"absolute"!==b&&"relative"!==b&&"fixed"!==b||(c=parseInt(d.css("zIndex"),10),isNaN(c)||0===c||c>e&&(e=c)),d=d.parent();return e},_refreshTimepicker:function(a){var b=this._getInst(a);b&&this._updateTimepicker(b)},_updateTimepicker:function(a){a.tpDiv.empty().append(this._generateHTML(a)),this._rebindDialogEvents(a)},_rebindDialogEvents:function(a){var b=$.timepicker._getBorders(a.tpDiv),c=this;a.tpDiv.find("iframe.ui-timepicker-cover").css({left:-b[0],top:-b[1],width:a.tpDiv.outerWidth(),height:a.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").unbind().bind("click",{fromDoubleClick:!1},$.proxy($.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},$.proxy($.timepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").unbind().bind("click",{fromDoubleClick:!1},$.proxy($.timepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:!0},$.proxy($.timepicker.selectHours,this)).end().find(".ui-timepicker td a").unbind().bind("mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&$(this).removeClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&$(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){c._isDisabledTimepicker(a.inline?a.tpDiv.parent()[0]:a.input[0])||($(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&$(this).addClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&$(this).addClass("ui-timepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end().find(".ui-timepicker-now").bind("click",function(a){$.timepicker.selectNow(a)}).end().find(".ui-timepicker-deselect").bind("click",function(a){$.timepicker.deselectTime(a)}).end().find(".ui-timepicker-close").bind("click",function(a){$.timepicker._hideTimepicker()}).end()},_generateHTML:function(a){var b,c,d,e,f=1==this._get(a,"showPeriod"),g=1==this._get(a,"showPeriodLabels"),h=1==this._get(a,"showLeadingZero"),i=1==this._get(a,"showHours"),j=1==this._get(a,"showMinutes"),k=this._get(a,"amPmText"),l=this._get(a,"rows"),m=0,n=0,o=0,p=0,q=0,r=0,s=Array(),t=this._get(a,"hours"),u=null,v=0,w=this._get(a,"hourText"),x=this._get(a,"showCloseButton"),y=this._get(a,"closeButtonText"),z=this._get(a,"showNowButton"),A=this._get(a,"nowButtonText"),B=this._get(a,"showDeselectButton"),C=this._get(a,"deselectButtonText"),D=x||z||B;for(b=t.starts;b<=t.ends;b++)s.push(b);if(u=Math.ceil(s.length/l),g){for(v=0;v<s.length;v++)s[v]<12?o++:p++;v=0,m=Math.floor(o/s.length*l),n=Math.floor(p/s.length*l),l!=m+n&&(o&&(!p||!m||n&&o/m>=p/n)?m++:n++),q=Math.min(m,1),r=m+1,u=0==m?Math.ceil(p/n):0==n?Math.ceil(o/m):Math.ceil(Math.max(o/m,p/n))}if(e='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>',i){for(e+='<td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+w+'</div><table class="ui-timepicker">',c=1;c<=l;c++){for(e+="<tr>",c==q&&g&&(e+='<th rowspan="'+m.toString()+'" class="periods" scope="row">'+k[0]+"</th>"),c==r&&g&&(e+='<th rowspan="'+n.toString()+'" class="periods" scope="row">'+k[1]+"</th>"),d=1;d<=u;d++)g&&c<r&&s[v]>=12?e+=this._generateHTMLHourCell(a,void 0,f,h):(e+=this._generateHTMLHourCell(a,s[v],f,h),v++);e+="</tr>"}e+="</table></td>"}if(j&&(e+='<td class="ui-timepicker-minutes">',e+=this._generateHTMLMinutes(a),e+="</td>"),e+="</tr>",D){var E='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">';z&&(E+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+A+"</button>"),B&&(E+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+C+"</button>"),x&&(E+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+y+"</button>"),e+=E+"</div></td></tr>"}return e+="</table>"},_updateMinuteDisplay:function(a){var b=this._generateHTMLMinutes(a);a.tpDiv.find("td.ui-timepicker-minutes").html(b),this._rebindDialogEvents(a)},_generateHTMLMinutes:function(a){var b,c,d="",e=this._get(a,"rows"),f=Array(),g=this._get(a,"minutes"),h=null,j=0,k=1==this._get(a,"showMinutesLeadingZero"),l=this._get(a,"onMinuteShow"),m=this._get(a,"minuteText");for(g.starts||(g.starts=0),g.ends||(g.ends=59),g.manual||(g.manual=[]),b=g.starts;b<=g.ends;b+=g.interval)f.push(b);for(i=0;i<g.manual.length;i++){var n=g.manual[i];"number"!=typeof n||n<0||n>59||$.inArray(n,f)>=0||f.push(n)}if(f.sort(function(a,b){return a-b}),h=Math.round(f.length/e+.49),h<3&&(h=3),l&&0==l.apply(a.input?a.input[0]:null,[a.hours,a.minutes]))for(j=0;j<f.length;j+=1)if(b=f[j],l.apply(a.input?a.input[0]:null,[a.hours,b])){a.minutes=b;break}for(d+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+m+'</div><table class="ui-timepicker">',j=0,c=1;c<=e;c++){for(d+="<tr>";j<c*h;){var b=f[j],o="";void 0!==b&&(o=b<10&&k?"0"+b.toString():b.toString()),d+=this._generateHTMLMinuteCell(a,b,o),j++}d+="</tr>"}return d+="</table>"},_generateHTMLHourCell:function(a,b,c,d){var e=b;b>12&&c&&(e=b-12),0==e&&c&&(e=12),e<10&&d&&(e="0"+e);var f=!0,g=this._get(a,"onHourShow"),h=this._get(a,"maxTime"),i=this._get(a,"minTime");return void 0==b?'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>':(g&&(f=g.apply(a.input?a.input[0]:null,[b])),f&&(!isNaN(parseInt(h.hour))&&b>h.hour&&(f=!1),!isNaN(parseInt(i.hour))&&b<i.hour&&(f=!1)),f?'<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" data-hour="'+b.toString()+'"><a class="ui-state-default '+(b==a.hours?"ui-state-active":"")+'">'+e.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled '+(b==a.hours?" ui-state-active ":" ")+'">'+e.toString()+"</span></td>")},_generateHTMLMinuteCell:function(a,b,c){var d=!0,e=a.hours,f=this._get(a,"onMinuteShow"),g=this._get(a,"maxTime"),h=this._get(a,"minTime");return f&&(d=f.apply(a.input?a.input[0]:null,[a.hours,b])),void 0==b?'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>':(d&&null!==e&&(!isNaN(parseInt(g.hour))&&!isNaN(parseInt(g.minute))&&e>=g.hour&&b>g.minute&&(d=!1),!isNaN(parseInt(h.hour))&&!isNaN(parseInt(h.minute))&&e<=h.hour&&b<h.minute&&(d=!1)),d?'<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" data-minute="'+b.toString()+'" ><a class="ui-state-default '+(b==a.minutes?"ui-state-active":"")+'" >'+c+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+c+"</span></td>")},_destroyTimepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus.timepicker",this._showTimepicker).unbind("click.timepicker",this._adjustZIndex)):"div"!=d&&"span"!=d||b.removeClass(this.markerClassName).empty()}},_enableTimepicker:function(a){var b=$(a),c=b.attr("id"),d=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e){a.disabled=!1;var f=this._get(d,"button");$(f).removeClass("ui-state-disabled").disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end()}else if("div"==e||"span"==e){var g=b.children("."+this._inlineClass);g.children().removeClass("ui-state-disabled"),g.find("button").each(function(){this.disabled=!1})}this._disabledInputs=$.map(this._disabledInputs,function(a){return a==c?null:a})}},_disableTimepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d){var e=this._get(c,"button");$(e).addClass("ui-state-disabled").disabled=!0,a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end()}else if("div"==d||"span"==d){var f=b.children("."+this._inlineClass);f.children().addClass("ui-state-disabled"),f.find("button").each(function(){this.disabled=!0})}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=b.attr("id")}},_isDisabledTimepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_checkOffset:function(a,b,c){var d=a.tpDiv.outerWidth(),e=a.tpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType);)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkExternalClick:function(a){if($.timepicker._curInst){var b=$(a.target);b[0].id==$.timepicker._mainDivId||0!=b.parents("#"+$.timepicker._mainDivId).length||b.hasClass($.timepicker.markerClassName)||b.hasClass($.timepicker._triggerClass)||!$.timepicker._timepickerShowing||$.timepicker._inDialog&&$.blockUI||$.timepicker._hideTimepicker()}},_hideTimepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._timepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.timepicker._tidyDialog(b),this._curInst=null};$.effects&&$.effects[c]?b.tpDiv.hide(c,$.timepicker._get(b,"showOptions"),d,e):b.tpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._timepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.tpDiv))),this._inDialog=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b])}},_tidyDialog:function(a){a.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this timepicker"}},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setTimeFromField:function(a){if(a.input.val()!=a.lastVal){var b=this._get(a,"defaultTime"),c="now"==b?this._getCurrentTimeRounded(a):b;if(0==a.inline&&""!=a.input.val()&&(c=a.input.val()),c instanceof Date)a.hours=c.getHours(),a.minutes=c.getMinutes();else{var d=a.lastVal=c;if(""==c)a.hours=-1,a.minutes=-1;else{var e=this.parseTime(a,d);a.hours=e.hours,a.minutes=e.minutes}}$.timepicker._updateTimepicker(a)}},_optionTimepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.timepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};"string"==typeof b&&(e={},e[b]=c),d&&(extendRemove(d.settings,e),this._curInst==d&&(this._hideTimepicker(),this._updateTimepicker(d)),d.inline&&this._updateTimepicker(d))},_setTimeTimepicker:function(a,b){var c=this._getInst(a);c&&(this._setTime(c,b),this._updateTimepicker(c),this._updateAlternate(c,b))},_setTime:function(a,b,c){var d=a.hours,e=a.minutes;if(b instanceof Date)a.hours=b.getHours(),a.minutes=b.getMinutes();else{var b=this.parseTime(a,b);a.hours=b.hours,a.minutes=b.minutes}d==a.hours&&e==a.minutes||c||a.input.trigger("change"),this._updateTimepicker(a),this._updateSelectedValue(a)},_getCurrentTimeRounded:function(a){var b=new Date,c=b.getMinutes(),d=this._get(a,"minutes"),e=Math.round(c/d.interval)*d.interval;return b.setMinutes(e),b},parseTime:function(a,b){var c=new Object;if(c.hours=-1,c.minutes=-1,!b)return"";var d=this._get(a,"timeSeparator"),e=this._get(a,"amPmText"),f=this._get(a,"showHours"),g=this._get(a,"showMinutes"),h=this._get(a,"optionalMinutes"),i=1==this._get(a,"showPeriod"),j=b.indexOf(d);if(-1!=j?(c.hours=parseInt(b.substr(0,j),10),c.minutes=parseInt(b.substr(j+1),10)):!f||g&&!h?!f&&g&&(c.minutes=parseInt(b,10)):c.hours=parseInt(b,10),f){var k=b.toUpperCase();c.hours<12&&i&&-1!=k.indexOf(e[1].toUpperCase())&&(c.hours+=12),12==c.hours&&i&&-1!=k.indexOf(e[0].toUpperCase())&&(c.hours=0)}return c},selectNow:function(a){var b=$(a.target).attr("data-timepicker-instance-id"),c=$(b),d=this._getInst(c[0]),e=new Date;d.hours=e.getHours(),d.minutes=e.getMinutes(),this._updateSelectedValue(d),this._updateTimepicker(d),this._hideTimepicker()},deselectTime:function(a){var b=$(a.target).attr("data-timepicker-instance-id"),c=$(b),d=this._getInst(c[0]);d.hours=-1,d.minutes=-1,this._updateSelectedValue(d),this._hideTimepicker()},selectHours:function(a){var b=$(a.currentTarget),c=b.attr("data-timepicker-instance-id"),d=parseInt(b.attr("data-hour")),e=a.data.fromDoubleClick,f=$(c),g=this._getInst(f[0]),h=1==this._get(g,"showMinutes");if($.timepicker._isDisabledTimepicker(f.attr("id")))return!1;b.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active"),b.children("a").addClass("ui-state-active"),g.hours=d;var i=this._get(g,"onMinuteShow"),j=this._get(g,"maxTime"),k=this._get(g,"minTime");return!i&&isNaN(parseInt(j.minute))&&isNaN(parseInt(k.minute))||this._updateMinuteDisplay(g),this._updateSelectedValue(g),g._hoursClicked=!0,(g._minutesClicked||e||0==h)&&$.timepicker._hideTimepicker(),!1},selectMinutes:function(a){var b=$(a.currentTarget),c=b.attr("data-timepicker-instance-id"),d=parseInt(b.attr("data-minute")),e=a.data.fromDoubleClick,f=$(c),g=this._getInst(f[0]),h=1==this._get(g,"showHours");return!$.timepicker._isDisabledTimepicker(f.attr("id"))&&(b.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active"),b.children("a").addClass("ui-state-active"),g.minutes=d,this._updateSelectedValue(g),g._minutesClicked=!0,!(!g._hoursClicked&&!e&&0!=h)&&($.timepicker._hideTimepicker(),!1))},_updateSelectedValue:function(a){var b=this._getParsedTime(a);a.input&&(a.input.val(b),a.input.trigger("change"));var c=this._get(a,"onSelect");return c&&c.apply(a.input?a.input[0]:null,[b,a]),this._updateAlternate(a,b),b},_getParsedTime:function(a){if(-1==a.hours&&-1==a.minutes)return"";(a.hours<a.hours.starts||a.hours>a.hours.ends)&&(a.hours=0),(a.minutes<a.minutes.starts||a.minutes>a.minutes.ends)&&(a.minutes=0)
;var b="",c=1==this._get(a,"showPeriod"),d=1==this._get(a,"showLeadingZero"),e=1==this._get(a,"showHours"),f=1==this._get(a,"showMinutes"),g=1==this._get(a,"optionalMinutes"),h=this._get(a,"amPmText"),i=a.hours?a.hours:0,j=a.minutes?a.minutes:0,k=i||0,l="";-1==k&&(k=0),-1==j&&(j=0),c&&(0==a.hours&&(k=12),a.hours<12?b=h[0]:(b=h[1],k>12&&(k-=12)));var m=k.toString();d&&k<10&&(m="0"+m);var n=j.toString();return j<10&&(n="0"+n),e&&(l+=m),!e||!f||g&&0==n||(l+=this._get(a,"timeSeparator")),!f||g&&0==n||(l+=n),e&&b.length>0&&(l+=this._get(a,"periodSeparator")+b),l},_updateAlternate:function(a,b){var c=this._get(a,"altField");c&&$(c).each(function(a,c){$(c).val(b)})},_getTimeAsDateTimepicker:function(a){var b=this._getInst(a);return-1==b.hours&&-1==b.minutes?"":((b.hours<b.hours.starts||b.hours>b.hours.ends)&&(b.hours=0),(b.minutes<b.minutes.starts||b.minutes>b.minutes.ends)&&(b.minutes=0),new Date(0,0,0,b.hours,b.minutes,0))},_getTimeTimepicker:function(a){var b=this._getInst(a);return this._getParsedTime(b)},_getHourTimepicker:function(a){var b=this._getInst(a);return void 0==b?-1:b.hours},_getMinuteTimepicker:function(a){var b=this._getInst(a);return void 0==b?-1:b.minutes}}),$.fn.timepicker=function(a){$.timepicker.initialized||($(document).mousedown($.timepicker._checkExternalClick),$.timepicker.initialized=!0),0===$("#"+$.timepicker._mainDivId).length&&$("body").append($.timepicker.tpDiv);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"getTime"!=a&&"getTimeAsDate"!=a&&"getHour"!=a&&"getMinute"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.timepicker["_"+a+"Timepicker"].apply($.timepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.timepicker["_"+a+"Timepicker"].apply($.timepicker,[this].concat(b)):$.timepicker._attachTimepicker(this,a)}):$.timepicker["_"+a+"Timepicker"].apply($.timepicker,[this[0]].concat(b))},$.timepicker=new Timepicker,$.timepicker.initialized=!1,$.timepicker.uuid=(new Date).getTime(),$.timepicker.version="0.3.3",window["TP_jQuery_"+tpuuid]=$}(jQuery),define("timePicker",function(){}),define("c_019_timepicker",["jquery","timePicker"],function(a,b){"use strict";function c(b,c,d,e,f,g,h,i){this.$timePicker=b,this.$timePickerParent=i,this.timePickerSettingsObj=c,this.timePickerType=d,this.timePickerStartSelector=".time-picker-start",this.timePickerEndClass="time-picker-end",this.timePickerEndSelector="."+this.timePickerEndClass,this.timePickerCloseSelector=".time-close",this.timePickerErrorClass=e,this.$timePickerErrorMsg=a("."+f),this.timePickerSelectClass="select",this.timePickerCompleteClass="complete",this.timePickerShowClass="show",this.window=g,this.document=h,this.$html=a("html"),this.rtl=!1,this.localizeTimePicker()}return c.prototype.localizeTimePicker=function(){var a;_.isUndefined(this.$timePickerParent)&&(this.$timePickerParent=this.$timePicker.parent()),a=this.$timePickerParent.find(this.timePickerCloseSelector),this.$timePicker.timepicker(this.timePickerSettingsObj),this.$timePicker.timepicker("option",{beforeShow:_.bind(this.timePickerSettings,this),onClose:_.bind(this.timePickerClose,this),onSelect:_.bind(this.timePickerSelect,this)}),a.on("click",_.bind(this.resetTime,this))},c.prototype.timePickerSettings=function(b,c){function d(){var b=c.tpDiv;b.css({position:"absolute",top:h,left:0,"z-index":5}),this.isElementInViewport(b)||a("html, body").animate({scrollTop:e+b.outerHeight()})}var e,f,g,h,i=a("#"+c.id),j=this.$timePickerParent.find(this.timePickerStartSelector),k=this.$timePickerParent.find(this.timePickerEndSelector),l=a(this.window);l.height(),e=l.scrollTop(),f=parseInt(this.$timePicker.css("height"),10),g=this.$timePicker.position(),h=g.top+f+1,setTimeout(_.bind(d,this),10),i.addClass(this.timePickerSelectClass).prop("disabled",!0).before(a.timepicker.tpDiv),"range"===this.timePickerType&&(i.hasClass(this.timePickerEndClass)?this.timePickerEndSelect(j,k):this.timePickerStartSelect(j,k))},c.prototype.isElementInViewport=function(b){var c;return _.isFunction(a)&&b instanceof a&&(b=b[0]),c=b.getBoundingClientRect(),c.top>=0&&c.left>=0&&c.bottom<=(this.window.innerHeight||this.document.documentElement.clientHeight)&&c.right<=(this.window.innerWidth||this.document.documentElement.clientWidth)},c.prototype.timePickerStartSelect=function(a,b){var c,d,e,f,g=b.val();""!==g?(d=b.timepicker("getHour"),e=b.timepicker("getMinute"),d<0&&(d=0),e<0&&(e=0),f=d+":"+e,b.timepicker("option",{minTime:{hour:d,minute:e},defaultTime:f}),0===e&&(e=60,0===d&&(d=24),d-=1),e-=this.timePickerSettingsObj.minutes.interval,f=d+":"+e,c={maxTime:{hour:d,minute:e},defaultTime:f}):c={maxTime:{hour:this.timePickerSettingsObj.maxTime.hour,minute:this.timePickerSettingsObj.maxTime.minute}},a.timepicker("option",c)},c.prototype.timePickerEndSelect=function(a,b){var c,d,e,f,g=a.val();""!==g?(d=a.timepicker("getHour"),e=a.timepicker("getMinute"),d<0&&(d=0),e<0&&(e=0),f=d+":"+e,a.timepicker("option",{maxTime:{hour:d,minute:e},defaultTime:f}),e+=this.timePickerSettingsObj.minutes.interval,60===e&&(e=0,24===(d+=1)&&(d=0)),f=d+":"+e,c={minTime:{hour:d,minute:e},defaultTime:f}):c={minTime:{hour:this.timePickerSettingsObj.minTime.hour,minute:this.timePickerSettingsObj.minTime.minute}},b.timepicker("option",c)},c.prototype.timePickerSelect=function(b,c){var d=a("#"+c.id),e=d.parent().find(".time-close");this.$timePicker.width(),e.width();this.rtl="rtl"===this.$html.attr("dir"),this.rtl,e.addClass(this.timePickerShowClass),d.parent().addClass(this.timePickerCompleteClass),this.setHiddenInputTime(d,b),d.hasClass(this.timePickerErrorClass)&&d.parent().removeClass(this.timePickerErrorClass).siblings(this.$timePickerErrorMsg).remove()},c.prototype.setHiddenInputTime=function(b,c){var d=b.attr("id")+"-hidden";a("#"+d).val(c).trigger("change")},c.prototype.timePickerClose=function(b,c){var d=a("#"+c.id),e=this.$timePickerParent.find(this.timePickerStartSelector),f=this.$timePickerParent.find(this.timePickerEndSelector);d.prop("disabled",!1),d.removeClass(this.timePickerSelectClass),""!==f.val()&&this.setTimepickerValue(e,f)},c.prototype.setTimepickerValue=function(a,b){var c=b.timepicker("getHour"),d=b.timepicker("getMinute"),e=a.timepicker("getHour");d<=a.timepicker("getMinute")&&c<=e&&a.val("")},c.prototype.resetTime=function(b){var c=a(b.target).parent().find(this.$timePicker);b.preventDefault(),c[0].hasAttribute("placeholder")?c.val(""):c.val(c.attr("placeholder")),a(b.target).removeClass(this.timePickerShowClass),c.parent().removeClass(this.timePickerCompleteClass),this.resetAllTime()},c.prototype.resetAllTime=function(){var b=this.$timePickerParent.find(this.timePickerStartSelector).val();""===this.$timePickerParent.find(this.timePickerEndSelector).val()&&""===b&&a(this.timePickerStartSelector+","+this.timePickerEndSelector).timepicker("option",{maxTime:{hour:this.timePickerSettingsObj.maxTime.hour,minute:this.timePickerSettingsObj.maxTime.minute}})},c}),define("c_019_17",["underscore","jquery","storageManager","heliosLocation","logger"],function(a,b,c,d,e){"use strict";function f(a,c){this.settings=b.extend({},l,c),this._defaults=l,this.$el=a,this.init()}var g,h,i,j,k="C19.17",l={selectors:{root:".c_019",selectedDealerNameInput:".selected-dealer-name",selectedDealerIdInput:".selected-dealer-id",selectedRequestVariable:".selected-request-variable"},data:{storageKey:"storageKey"},properties:{state:"state",queryParamsData:"queryParamsData",preferredDealer:"preferredDealer"},cookie:{ownerServicesLoggedInCookie:"OwnerServicesLoggedInName"},isPreferredDealerEnabled:void 0,isLoggedIn:!1,isInitialized:!1},m={cookie:{mode:"cookie"}},n={deepLinking:{key:"dealerIdInForm",dealerId:void 0},smartLocation:{dealerId:void 0},preferred:{dealerId:void 0}};return f.prototype.init=function(a){return j=new e({prefix:k}),g=b(this.settings.selectors.root),g.length?this._areRequiredElementsFound()?(c.init(),this._setIsInitialized(!0),void this._lookUpLoggedInCookie()):(j.debug("Required elements are missing"),!1):(j.debug("Root element is missing"),!1)},f.prototype.run=function(a){var c=b.Deferred();return this._setDealerCollection(a),this.isInitialized()&&this._getDealerCollection()?(this._resetActiveDealerData(),this._activeDealerHandler(c)):(c.reject(),j.debug("Component is not initialised or dealer collection data is missing")),c},f.prototype._activeDealerHandler=function(b){this._isLinkingDealerIdAvailable()&&(this.setActiveDealer(this._getDeepLinkingDealerId()),b.resolve()),this._getActiveDealerModel()||this._lookUpSmartLocationDealerId().done(a.bind(function(){this.setActiveDealer(this._getSmartLocationDealerId()),b.resolve()},this)).fail(a.bind(function(){this._isPreferredDealerIdAvailable()?(this.setActiveDealer(this._getPreferredDealerId()),b.resolve()):b.reject()},this))},f.prototype._findDealerModel=function(a){var b=this._getDealerCollection().get(a);return b||(b=this._getDealerCollection().findWhere({dealerId:a})),b},f.prototype.isInitialized=function(){return this.settings.isInitialized},f.prototype._areRequiredElementsFound=function(){var a=!1,b=g.find(this.settings.selectors.selectedDealerIdInput),c=g.find(this.settings.selectors.selectedDealerNameInput);return b.length&&c.length&&(a=!0),a},f.prototype._isQueryParamInURL=function(){return new RegExp("[?&]"+n.deepLinking.key+"=").test(this.settings.window.location.search)},f.prototype._isUserLoggedIn=function(){return this.settings.isLoggedIn},f.prototype._resetActiveDealerData=function(){n.deepLinking.dealerId=void 0,n.smartLocation.dealerId=void 0,n.preferred.dealerId=void 0,h=void 0},f.prototype.getActiveDealerId=function(){return this._getActiveDealerModel()&&this._getActiveDealerModel().get("id")},f.prototype._getIsPreferredDealerEnabled=function(){return this.settings.isPreferredDealerEnabled||this._lookupPreferredDealerEnabled()},f.prototype._getSmartLocationContext=function(){return this.settings.smartLocationContext},f.prototype._getDealerCollection=function(){return i},f.prototype._getDeepLinkingKey=function(){return n.deepLinking.key},f.prototype._getDeepLinkingDealerId=function(){return n.deepLinking.dealerId||this._lookUpQueryParamDealerId()},f.prototype._getSmartLocationDealerId=function(){return n.smartLocation.dealerId},f.prototype._getPreferredDealerId=function(){return n.preferred.dealerId||this._lookUpPreferredDealerId()},f.prototype._getActiveDealerModel=function(){return h},f.prototype._isLinkingDealerIdAvailable=function(){return this._isQueryParamInURL()&&this._getDeepLinkingDealerId()},f.prototype._isPreferredDealerIdAvailable=function(){return this._getIsPreferredDealerEnabled()&&this._isUserLoggedIn()&&this._getPreferredDealerId()},f.prototype._lookupPreferredDealerEnabled=function(){var a=g.find(this.settings.selectors.selectedRequestVariable),b=a&&a.data(this.settings.data.storageKey);return this._setIsPreferredDealerEnabled(b===this.settings.properties.preferredDealer),this.settings.isPreferredDealerEnabled},f.prototype._lookUpLoggedInCookie=function(){var a=c.loadItem(this.settings.cookie.ownerServicesLoggedInCookie,m.cookie);return this._setIsLoggedIn(!!a),a},f.prototype._lookUpQueryParamDealerId=function(){var a,b;return b=c.loadItem(this.settings.properties.queryParamsData,m.session),a=b&&b[this._getDeepLinkingKey()],this._setDeepLinkingDealerId(a),a},f.prototype._lookUpSmartLocationDealerId=function(){var c,d=b.Deferred();return this._getSmartLocationContext()&&this._getSmartLocationContext().get().done(a.bind(function(a){c=a.getDealerId(),c?(this._setSmartLocationDealerId(c),d.resolve(c)):d.reject()},this)).fail(function(){j.debug("smartLocationContext.get() failed"),d.reject()}),d},f.prototype._lookUpPreferredDealerId=function(){var a,b;return b=c.loadItem(this.settings.properties.state,m.local),a=b&&b.dealer&&b.dealer.preferred,this._setPreferredDealerId(a),a},f.prototype.setActiveDealer=function(a){var b=this._findDealerModel(a);b&&(this._setActiveDealerModel(b),this._getSmartLocationContext().set((new d).setDealerId(this._getActiveDealerModel().get("dealerId"))))},f.prototype._setDealerCollection=function(a){if(a instanceof Backbone.Collection==!1)return!1;i=a},f.prototype._setIsPreferredDealerEnabled=function(a){this.settings.isPreferredDealerEnabled=!!a},f.prototype._setActiveDealerModel=function(a){h=a},f.prototype._setDeepLinkingDealerId=function(a){n.deepLinking.dealerId=a},f.prototype._setSmartLocationDealerId=function(a){n.smartLocation.dealerId=a},f.prototype._setPreferredDealerId=function(a){n.preferred.dealerId=a},f.prototype._setIsLoggedIn=function(a){this.settings.isLoggedIn=!!a},f.prototype._setIsInitialized=function(a){this.settings.isInitialized=!!a},f}),define("c_019_23",["jquery","underscore","c_008","handlebars","handlebarsHelpersLogic"],function(a,b,c,d,e){"use strict";function f(b,c){this.settings=a.extend({},i,c),this._defaults=i,this.$el=b,this.init()}var g,h,i={selectors:{root:".c_019-23",tooltipTriggers:".has-tooltip",groupCheckboxes:".group-checkboxes .group-checkbox",groupCheckbox:".group-checkbox",parentCheckboxes:".group-checkboxes",formParent:"form",combinedValue:".combined-value",checked:":checked"},attributes:{typeSubmission:"type-submission",characterConcat:"character-concat",disabled:"disabled"},events:{submit:"submit",change:"change"}};return f.prototype.init=function(){var b;if(g=a(this.settings.selectors.root),!g.length)return!1;b=g.find(this.settings.selectors.tooltipTriggers),c.createTooltips(b),h=g.parents(this.settings.selectors.formParent),this._bindEvents()},f.prototype._bindEvents=function(){a(this.settings.selectors.groupCheckboxes+":not(:first)").on(this.settings.events.change,b.bind(function(b){a(b.target).parents(this.settings.selectors.parentCheckboxex).find(this.settings.selectors.groupCheckbox).first().valid()},this))},f.prototype.verifyDataBeforeSubmit=function(){g.each(b.bind(function(b,c){var d,e=a(c),f=e.data(this.settings.attributes.typeSubmission),g=e.data(this.settings.attributes.characterConcat),h=e.find(this.settings.selectors.combinedValue),i=e.find(this.settings.selectors.groupCheckboxes);f&&(d=i.filter(this.settings.selectors.checked).map(function(){return this.value}).get().join(g),i.prop(this.settings.attributes.disabled,!0),h.val(d))},this))},f}),define("c_019_29",["jquery","c_008","handlebars","handlebarsHelpersLogic"],function(a,b,c,d){"use strict";function e(b,c){this.settings=a.extend({},g,c),this._defaults=g,this.$el=b,this.init()}var f,g={selectors:{root:".c_019-29",tooltipTriggers:".has-tooltip"}};return e.prototype.init=function(){var c;if(f=a(this.settings.selectors.root),!f.length)return!1;c=f.find(this.settings.selectors.tooltipTriggers),b.createTooltips(c)},e}),define("c_230",["jquery","handlebars","storageManager","remoteServices","underscore"],function(a,b,c,d,e){"use strict";function f(b,c){this.settings=a.extend({},m,c),this.defaults=m,this.$el=b,this.init(c)}var g,h,i,j,k,l,m={events:{click:"click",change:"change"},classes:{hide:"hide",disableButton:"btn-disabled"},data:{fileSizeError:"data-max-size-error",totalSizeError:"data-total-fileSize-error",serverError:"data-server-error",fileTypeError:"data-extn-error",mandatoryError:"data-validation-notblank"},ajaxError:{1020000:"data-file-upload-notsupported",1020001:"data-total-fileSize-error",1020002:"data-total-file-count-error",1020003:"data-max-size-error",1020004:"data-extn-error",1020005:"data-server-error",1020006:"data-server-error"},selectors:{componentRoot:".c_230",root:"input[name='fileUploadState']",fileListContainer:".upload-file-list",fileTemplate:"script[data-template=c_230]",file:"div.c_230 input#file",fileUploadTooptip:"div.c_230 .c_008",fileTypesSection:".c_230 .file-types",removeFile:"a.remove-upload-file",uploadButton:"div.upload-button",errorElement:".fileupload-error-group",errorMsg:".fileupload-error-group span.error-msg",Addfile:".btn-beta-right.addfile",Addmore:".btn-beta-right.addmore",Addbutton:".btn-beta-right",cancelButton:".cancel-button",CancelUpload:".cancel-upload",FormResponse:"input[name='formResponse']"},FileAuthorValues:{maxFileSize:Number(a("div.file-upload-params").attr("data-fileupload-maxuploadsize")),totalFileSize:Number(a("div.file-upload-params").attr("data-fileupload-totaluploadsize")),maxFileCount:Number(a("div.file-upload-params").attr("data-fileupload-maxfilecount")),FileTypes:a("div.file-upload-params").attr("data-fileupload-filetypes"),FileTypeAnalytics:a("div.c_230").attr("data-file-type-analytics"),Mandatory:a("div.c_230 .form-group").hasClass("required")},ajaxAbort:"abort",fileSizeParam:" MB",fileSizetoMB:1048576,fileArray:{},callBackFunction:null,AnalyticsComponentId:"C230_Form_Builder_Upload_File",fileUploadKey:"fileUpload",analyticsAcceptFileYes:"yes",preValue:"pre",postValue:"post"};return f.prototype.init=function(b){g=a(this.settings.selectors.componentRoot),g.length&&(this.settings.FileAuthorValues.FileTypes=this.refactorFileTypes(),l=a(this.settings.selectors.errorElement),a(this.settings.selectors.file).attr("accept",this.settings.FileAuthorValues.FileTypes),this.bindEvents(),c.init())},f.prototype.refactorFileTypes=function(){var b=this.settings.FileAuthorValues.FileTypes?this.settings.FileAuthorValues.FileTypes.split(","):[];return a.map(b,function(b){return 0!==a.trim(b).indexOf(".")?"."+a.trim(b):a.trim(b)}).join(",")},f.prototype.checkFile=function(b){var c,d=b.target.files,e=d[0],f=e.name,g=Number((e.size/this.settings.fileSizetoMB).toFixed(2)),h=f.substring(f.lastIndexOf("."),f.length).toLowerCase(),i=this.settings.FileAuthorValues.FileTypes?this.settings.FileAuthorValues.FileTypes.toLowerCase().split(","):[],j=this.settings.FileAuthorValues.FileTypeAnalytics||"",m=0;if(a(this.settings.selectors.file).replaceWith(a(this.settings.selectors.file).clone(!0)),i.indexOf(h)>-1)if(g<=this.settings.FileAuthorValues.maxFileSize){for(c in this.settings.fileArray)m+=Number((this.settings.fileArray[c].size/this.settings.fileSizetoMB).toFixed(2));m+=g,m<=this.settings.FileAuthorValues.totalFileSize?(this.disableErrorMessage(),this.settings.fileArray[d[0].name]=d[0],this.displayFileName(this.settings.fileArray),this.bindAnalyticsForFileUpload(j)):(k=l.attr(this.settings.data.totalSizeError),this.bindAnalyticsForFileUpload(j,k),this.enableErrorMessage(k))}else k=l.attr(this.settings.data.fileSizeError),this.bindAnalyticsForFileUpload(j,k),this.enableErrorMessage(k);else k=l.attr(this.settings.data.fileTypeError),this.bindAnalyticsForFileUpload(j,k),this.enableErrorMessage(k)},f.prototype.enableErrorMessage=function(b){a(this.settings.selectors.errorMsg).html(b),a(this.settings.selectors.errorElement).removeClass(this.settings.classes.hide)},f.prototype.disableErrorMessage=function(){a(this.settings.selectors.errorElement).addClass(this.settings.classes.hide)},f.prototype.removeSelectedFile=function(b){var c=a(b.target).attr("data-removeFile");b.preventDefault(),this.disableErrorMessage(),delete this.settings.fileArray[c],this.displayFileName(this.settings.fileArray)},f.prototype.displayFileName=function(c){var d,e={flist:c},f=b.compile(a(this.settings.selectors.fileTemplate).html()),g=Object.keys(c),h=g.length;for(d=0;d<h;d++)c[g[d]].sizeinMB=Number((c[g[d]].size/this.settings.fileSizetoMB).toFixed(2))+this.settings.fileSizeParam;h?a(this.settings.selectors.fileListContainer).html(f(e)).show():a(this.settings.selectors.fileListContainer).hide(),h<this.settings.FileAuthorValues.maxFileCount?this.showUploadButton():this.hideUploadButton(),h?(a(this.settings.selectors.Addfile).addClass(this.settings.classes.hide),a(this.settings.selectors.Addmore).removeClass(this.settings.classes.hide)):(a(this.settings.selectors.Addfile).removeClass(this.settings.classes.hide),a(this.settings.selectors.Addmore).addClass(this.settings.classes.hide))},f.prototype.hideUploadButton=function(){a(this.settings.selectors.uploadButton).hide(),a(this.settings.selectors.fileUploadTooptip).hide(),a(this.settings.selectors.fileTypesSection).hide()},f.prototype.showUploadButton=function(){Object.keys(this.settings.fileArray).length<this.settings.FileAuthorValues.maxFileCount&&(a(this.settings.selectors.uploadButton).show(),a(this.settings.selectors.fileUploadTooptip).show(),a(this.settings.selectors.fileTypesSection).show())},f.prototype.hideCancelButton=function(){a(this.settings.selectors.cancelButton).hide()},f.prototype.displayMandatoryErrors=function(){if(this.settings.FileAuthorValues.Mandatory&&!Object.keys(this.settings.fileArray).length)return k=l.attr(this.settings.data.mandatoryError),this.enableErrorMessage(k),!1},f.prototype.showCancelButton=function(){a(this.settings.selectors.cancelButton).show()},f.prototype.handlePreAjaxCallSuccess=function(a,b,c){var e,f,g,h=new FormData;if(i=null,200===c.status){try{a="object"==typeof a?a:JSON.parse(a)}catch(e){a={}}if(a.formEndpoint){e=a.formEndpoint,f="string"==typeof a.formJson?a.formJson:JSON.stringify(a.formJson),h.append("formJson","Content-Type: application/json\n"+f);for(g in this.settings.fileArray)h.append(g,this.settings.fileArray[g]);j=d.postFileUploadFormData({ajaxSettings:{type:"POST",contentType:!1,processData:!1},queryParams:h,url:e}),j.done(handlePostAjaxCallSuccess),j.fail(handlePostAjaxCallFail)}else this.dataErrorHandling(this.settings.data.serverError)}else this.dataErrorHandling(this.settings.data.serverError)},f.prototype.handlePreAjaxCallFail=function(a,b){var c;i=null;try{c=JSON.parse(a.responseText)}catch(e){c={}}a.statusText&&a.statusText===this.settings.ajaxAbort?this.resetFileDisplay():c.location&&!e.isEmpty(c.location)?window.location.href=c.location:this.dataErrorHandling(this.settings.data.serverError)},f.prototype.dataErrorHandling=function(a){this.resetFileDisplay(),k=l.attr(a),this.enableErrorMessage(k)},f.prototype.handlePostAjaxCallSuccess=function(b){var c="string"==typeof b?b:JSON.stringify(b);j=null,this.disableUserInteraction(),this.storeAnalyticsData(this.settings.FileAuthorValues.FileTypeAnalytics,this.settings.analyticsAcceptFileYes),a(this.settings.selectors.root).val(this.settings.postValue),a(this.settings.selectors.FormResponse).val(c),this.settings.callBackFunction&&this.settings.callBackFunction(!0)},f.prototype.handlePostAjaxCallFail=function(a,b){var c=a.responseText?JSON.parse(a.responseText):{};j=null,400===a.status?(k=l.attr(this.settings.ajaxError[c.code]),this.enableErrorMessage(k)):a.statusText!==this.settings.ajaxAbort&&(k=l.attr(this.settings.data.serverError),this.enableErrorMessage(k)),this.resetFileDisplay()},f.prototype.handleFileUpload=function(b,c,d){var e,f=b.parents("form"),g=f.attr("action"),j="";h=b,this.settings.callBackFunction=d,Object.keys(this.settings.fileArray).length?(a(this.settings.selectors.root).val(this.settings.preValue),e=f.serialize(),b.addClass(this.settings.classes.disableButton).attr("disabled","disabled"),a(this.settings.selectors.removeFile).hide(),this.showCancelButton(),this.hideUploadButton(),this.disableErrorMessage(),i=a.ajax({url:g,data:e,contentType:"application/x-www-form-urlencoded",type:"POST"}),i.done(handlePreAjaxCallSuccess),i.fail(handlePreAjaxCallFail)):this.settings.FileAuthorValues.Mandatory?(k=l.attr(this.settings.data.mandatoryError),this.enableErrorMessage(k)):(j=c===this.settings.analyticsAcceptFileYes?this.settings.FileAuthorValues.FileTypeAnalytics:"",this.storeAnalyticsData(j,c),this.settings.callBackFunction&&this.settings.callBackFunction(!0))},f.prototype.storeAnalyticsData=function(a,b){c.saveItem(this.settings.fileUploadKey,{fileType:a,acceptFile:b},{mode:"localStorage"})},f.prototype.abortPostAjaxCall=function(a){a.preventDefault(),i?i.abort():j&&j.abort(),this.resetFileDisplay()},f.prototype.resetFileDisplay=function(){this.hideCancelButton(),this.showUploadButton(),a(this.settings.selectors.removeFile).show(),h&&h.removeClass(this.settings.classes.disableButton).removeAttr("disabled","disabled")},f.prototype.disableUserInteraction=function(){this.hideCancelButton(),this.hideUploadButton(),a(this.settings.selectors.removeFile).hide()},f.prototype.bindAnalyticsForFileUpload=function(a,b){var c={componentId:this.settings.AnalyticsComponentId,fileType:a,errorMessage:b},d=this.settings.fileUploadKey;this.settings.analyticsManager.tag(d,c)},f.prototype.triggerFileInput=function(b){b.preventDefault(),a(this.settings.selectors.file).trigger(this.settings.events.click)},f.prototype.bindEvents=function(){a(this.settings.selectors.Addbutton).on(this.settings.events.click,e.bind(this.triggerFileInput,this)),a(this.settings.selectors.file).on(this.settings.events.change,e.bind(this.checkFile,this)),a(this.settings.selectors.fileListContainer).on(this.settings.events.click,this.settings.selectors.removeFile,e.bind(this.removeSelectedFile,this)),a(this.settings.selectors.CancelUpload).on(this.settings.events.click,e.bind(this.abortPostAjaxCall,this))},f}),define("c_019",["jquery","logger","validation","storageManager","storageManagerKeys","c_040","c_008","profileManager","datepickerLanguages","c_019_datepicker","c_019_timepicker","modal","c_019_17","c_019_23","c_019_29","c_230","jqueryUtilityPlugins","underscore","urlParameterDecoder","keyCodeConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";function u(a,b){this.settings=r.extend({},ia,b),this.defaults=ia,this.$el=a,this.init(b),this.settings.HELIOS&&(ga=this.settings.HELIOS.adobe.tagging.componentId)}function v(){var a=R.map.activeDealer;da.setActiveDealer(a)}function w(a,b){var c;for(c in a)r.has(b,c)&&r.isObject(b[c])?w(a[c],b[c]):r.has(b,c)?a[c]=b[c]:a[c]=""}function x(a,b,c){if(!b||!b.length||"[object String]"!==Object.prototype.toString.call(b))return!1;r.isObject(a)||(a={});for(var d,e=b.split(".");e.length>1;)d=e.shift(),r.has(a,d)||(a[d]={}),a=a[d];a[e[0]]=c}function y(b,c,d,e){var f=d.data("url");f+="/date/"+b+"-"+("0"+c).slice(-2)+"-01/dealerId/"+Z+"/data.json",a.getJSON(f).done(function(a){!a||r.isEmpty(a)?d.data(e,null):d.data(e,z(a).dates)}).fail(function(){d.data(e,null)}).always(function(){d.datepicker("refresh")})}function z(b){var c={dates:[],times:[]};return a.each(b.days,function(a,b){b.open&&c.dates.push(b.date)}),c}function A(a){var b;return"function"==typeof jQuery&&a instanceof jQuery&&(a=a[0]),b=a.getBoundingClientRect(),b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)}function B(b){var c=b.settings,d=b.$postcodeWidget,e=d.find(c.selectors.manualAddressLink),f=d.find(c.selectors.searchAgainLink),g=d.find(c.selectors.searchPostcodeBtn),h=d.find(c.selectors.postcodeInput),i=d.find(".postcode input"),j=d.find(c.selectors.manualInputFields),k=d.find(c.selectors.addressSpan),l=d.find(c.selectors.addressSelect+" select"),m=d.find(g).data("search-postcode-url"),n={};return n.bindEvents=function(){e.on(ia.events.click,n.getDestination).on(ia.events.click,n.mirrorPostcodeInput),f.on(ia.events.click,n.getDestination).on(ia.events.click,n.clearFields),g.on(ia.events.click,n.ajaxPostcode),l.on("change",n.populateAddressFields),h.on(ia.events.keypress,n.checkKey),j.val()&&n.switchSection("manual-address-enter")},n.getDestination=function(b){var c=b.target,d=a(c).data("related-section");b.preventDefault(),n.switchSection(d)},n.switchSection=function(a){d.removeClass("postcode-search manual-address-enter select-address-box search-results-filled"),d.addClass(a)},n.checkKey=function(a){if((a.keyCode||a.which)===t.ENTER)return n.ajaxPostcode(),!1},n.ajaxPostcode=function(b){b&&b.preventDefault(),n.validated(h)?(g.addClass(this.settings.classes.ajaxBtnLoading),a.ajax({url:m+"/postcode/"+encodeURIComponent(h.val())+"/data.json",type:"GET",dataType:"json"}).done(n.ajaxDone).fail(n.ajaxFail)):n.displayErrorMsg()},n.ajaxDone=function(b){var d,e,f,h="<option>";if(g.removeClass(c.classes.ajaxBtnLoading),n.removeSearchError(),n.removeFormErrors(),b.status_code===c.statusCodes.lookupSuccess){for(k.text(l.data("defaulttext")),T=b.addresses,l.empty(),l.append(a(h)),d=0,e=T.length;d<e;d++)f=a.map(T[d],n.onMapDone).join(", "),l.append(a(h,{value:d}).text(f));n.switchSection("select-address-box")}else n.ajaxFail(b)},n.ajaxFail=function(a){g.removeClass(c.classes.ajaxBtnLoading),n.displayErrorMsg(a)},n.onMapDone=function(a){return a||null},n.validated=function(a){var b=a.val(),c=i.data("validation-postcode-regex-pattern");return!!new RegExp(c,"i").test(b)},n.populateAddressFields=function(b){var c=a(b.target).val();T[c]&&(a.each(T[c],n.replaceInputsValue),n.switchSection("search-results-filled"))},n.replaceInputsValue=function(a,b){d.find("input[data-address-key="+a+"]").val(b)},n.displayErrorMsg=function(a){var b;b=a?a.status_message:h.data("default-err"),h.addClass(c.classes.error).focus().after('<span class="postcode-error-message">'+b+"</span>")},n.removeSearchError=function(){h.removeClass(c.classes.error).val("").siblings().remove()},n.removeFormErrors=function(){d.find(c.selectors.formGroup).removeClass(c.classes.error)},n.mirrorPostcodeInput=function(a){var b=h.val();i.val(b)},n.clearFields=function(){j.val("")},n}var C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha="c_019",ia={componentId:"C19_Form",trackingVar:{formSteps:"formSteps",dealerInteraction:"dealerInteraction"},classes:{hideCSS:"hide",showCSS:"show",error:"error",ajaxBtnLoading:"ajax-btn-loading",btnDisabled:"btn-disabled",jsDisabled:"js-disabled",expanded:"expanded",noDealerSelected:"no-dealer-selected",timePickerEnd:"time-picker-end",errorMessage:"error-message",active:"active",loginSuccess:"login-success",profileInSession:"profile-in-session",complete:"complete",required:"required",lookupAddressClass:"postcode-search manual-address-enter select-address-box search-results-filled",manualAddressEnterClass:"manual-address-enter"},selectors:{root:".c_019",map:".c_022",dealerLocator:".c_040",bookATestDrive:".c_040.batd",carDataAdminSelector:".c_020",manualAddressLink:".manual-address-link",searchAgainLink:".postcode-link",postcodeContainer:".postcode-address",searchPostcodeBtn:".search-postcode",postcodeInput:".postcode-field",datePicker:".date-picker",datePickerDealerWarning:".dealer-warning",timePicker:".time-picker",timePickerStart:".time-picker-start",timePickerEnd:".time-picker-end",addressSpan:".selectedValue",manualInputFields:".manual-address-entries input",addressSelect:".address-select-container",findADealerAccordion:".fad-accordion-content",selectADealerButton:".select-a-dealer-button",dealerSelector:".dealerselector",dealerAddress:".dealer-address p",selectThisDealer:".btn-select-this-dealer",selectedDealerNameInput:"input.selected-dealer-name",selectedDealerIdInput:"input.selected-dealer-id",selectedModelNameInput:"input.model-name",lastItemActionsWrapperAfterC40:".item-actions-last",selectedDealerLabel:".selected-dealer",selectedDealerName:"p.selected-dealer span",resetDate:".close",resetTime:".time-close",tooltipTriggers:".has-tooltip",formGroup:".form-group",errorMessage:".error-message",jsErrorMessage:".js-error-message",dropdownGroup:".dropdown-group",parentSelectBox:".parent-select-box select",childSelectBox:".child-select-box select",responsiveElm:".responsive-element",responsiveElmFieldset:".responsive-element-fieldset",responsiveChildData:"data-responsive-child",firstSelectBox:".first-select-box select",secondSelectBox:".second-select-box select",thirdSelectBox:".third-select-box select",tripleDropdownGroupData:"groupData",disclaimerList:".dropdown-disclaimer-list",spanSelectedValue:"span.selectedValue",disableGenericTracking:"disableGenericTracking",submitFormButton:".submit-form-button",jsDisabled:".js-disabled",dataPrePopulationStorageKey:"[data-storage-key]",dataPrePopulationUrl:"[data-prepopulation-url]",form:".c_019 form",formCount:"[name=fc]",addressComponent:".c_019-22",addressFormGroup:".form-address",addressManual:".manual-address-enter",loginWidgetModal:".login-widget-modal",body:"body",loginWidgetRoot:".c_080C",loginSuccessMessage:".login-success-message",loginWidget:"p.login-widget",c_019_25:".c_019-25",
dealerSelectorSection:".dealerselector.section",c_129:".c_129",c_148:".c_148",htmlBody:"html, body",brochuresModal:".brochures-modal",modalContent:".modal-content",summaryTray:".summary-tray"},datepicker:{nextText:"",prevText:"",showOn:"both",buttonText:" ",minDate:null,maxDate:null,yearRange:"-100:+20",beforeShow:"",onClose:"",onSelect:"",changeMonth:!0,changeYear:!0,isRTL:!1},timepicker:{timeSeparator:":",showPeriod:!1,showPeriodLabels:!1,showLeadingZero:!0,amPmText:["AM","PM"],hourText:"Hour",minuteText:"Minute",showHours:!0,showMinutes:!0,showOn:"both",defaultTime:"",minTime:{hour:0,minute:0},maxTime:{hour:23,minute:59},hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:15,manual:[]}},capture:{attrNamespace:"c_019-storage-capture",separator:",",destination:"to-field-value",mode:null},forms:{showGroupErrors:!1,groupErrorsPlacement:"form-head",input:"input",checkbox:"checkbox",form:"form",select:"select",validation:{},enterKeySubmitDisabled:"true",formSubmitHandler:""},data:{defaultDate:"default-date",restrictDate:"restrict-date",availableDates:"availableDates",formCount:"formCount",formName:"formName",formType:"formType",templateName:"template-name",formCategory:"formCategory",href:"href",storageKey:"storageKey",disableWeekends:"disable-weekends",minDateDays:"min-date-days",maxDateDays:"max-date-days",acceptFile:"accept-file",attrEnterDisabled:"data-enter-disabled",formTemplateName:"_apps_helios_templates_site_form",secureSubmission:"secure-submission"},attributes:{action:"action"},statusCodes:{lookupSuccess:"lookup_success"},events:{change:"change."+ha,globalChange:"change",dealerSelected:"map.dealerSelected",submit:"submit",click:"click",keypress:"keypress",prepopulate:"prepopulatedForm",modelsUpdated:"modelsUpdated",keypressKeyup:"keypress",trackAnalyticsInlineForm:"trackAnalyticsInlineForm",storageSaved:"storageSaved"},storageManagerSessionStorage:{mode:"sessionStorage"},storageManagerLocalStorage:{mode:"localStorage"},storageManagerCookie:{mode:"cookie"},cookie:{ownerServicesLoggedInCookie:"OwnerServicesLoggedInName"},modal:{componentId:"C19.21_Login_Widget",largeHeight:580},analytics:{pageType:"form",formStepName:"start",submitFormStepName:"submit",formStepNumber:"step-0",firstInteractionFormStepName:"form-first-interaction",firstInteractionFormStepNumber:"step-1",submitFormStepNumber:"finalstep",submittedFormStepName:"complete",submittedFormStepNumber:"step-2",vehicleModel:"vehicleModel",analyticsSession:"analyticsSession"},errorHandling:{animateTimeLength:500,animateStart:500},dealerMap:{initialized:"initialized",map:"map"}},ja=!1,ka=!1,la=!1,ma=!1,na=!0;return u.prototype.init=function(f){var h,i,j,l,m,o,q,u,w,x=a("html");if(_=this.settings.window,aa=_.document,ba=a(_),na=!0,ea=new n(this.$el,{HELIOS:this.settings.HELIOS,analyticsManager:this.settings.analyticsManager,window:this.settings.window}),fa=new p(this.$el,{window:this.settings.window,analyticsManager:this.settings.analyticsManager,HELIOS:this.settings.HELIOS}),this.settings.datepicker.beforeShow=r.bind(this.datePickerSettings,this),this.settings.datepicker.onClose=r.bind(this.datePickerClose,this),this.settings.datepicker.onSelect=r.bind(this.datePickerSelect,this),this.settings.forms.formSubmitHandler=r.bind(this.c_019_formHandler,this),D=a(this.settings.selectors.root),!D.length)return!1;if(this.initModal(),C=new b({prefix:"C_019 FormBuilder"}),C.info("init()"),la="rtl"===a("html").attr("dir"),U=D.find("form").attr("data-form-name")||HELIOS.adobe.tagging.pageName||"not set",w=D.find("form").attr(this.settings.data.attrEnterDisabled)||"false",V=D.find("form").attr("action")||"#",W=D.attr("data-vehicle-model"),H=a(this.settings.selectors.datePicker),I=H.map(function(){return this.id}),K=a(this.settings.selectors.resetDate),L=a(this.settings.selectors.timePicker),M=a(this.settings.selectors.timePickerStart),N=a(this.settings.selectors.timePickerEnd),O=a(this.settings.selectors.resetTime),ja=x.hasClass("ltie9"),ka=x.hasClass("ie9"),h=a(this.settings.selectors.tooltipTriggers),s.init(),this.localizeDatePicker(),S=D.find(this.settings.selectors.dealerLocator),S.length||(S=a(this.settings.selectors.bookATestDrive)),S.length&&this.setupDealerLocator(S),H.each(r.bind(function(b,c){var d=a(c);this.settings.datepicker.defaultDate=new Date(d.data(ia.data.defaultDate)),J=d.data(this.settings.data.restrictDate),$=d.data(this.settings.data.disableWeekends),d.data("url")?this.enableDatesByAjaxRequest(J,d):(J||$)&&this.restrictDatePicker(J,d)},this)),ba.resize(r.bind(this.resizeDatepicker,this)),K.on("click",r.bind(this.resetDate,this)),F=D.find(this.settings.selectors.postcodeContainer),j=this.settings.HELIOS.components,l=j.c019||j.c_019,l&&l.timePickerType&&(Y=l.timePickerType.type),D.data("tracking",{formName:U,componentId:ga,formDestination:V}),E=D.find(this.settings.forms.form).each(r.bind(function(b,d){var e=a(d),f=e.attr(this.settings.attributes.action);w===this.settings.forms.enterKeySubmitDisabled&&e.on(this.settings.events.keypressKeyup,function(a){var b=a.target.nodeName,c=b.toLowerCase();a.keyCode!==t.ENTER||c!==this.settings.forms.input&&c!==this.settings.forms.select||(this.selectDeselectCheckbox(a.target),a.preventDefault())}),e.data(this.settings.data.secureSubmission)&&!f.match(/^https:\/\/.*/)&&e.attr(this.settings.attributes.action,"https://"+location.hostname+f),this.settings.forms.validation={ignore:"input:hidden:not(.validate), .not-required *",focusInvalid:!1,invalidHandler:r.bind(this._invalidHandler,this)},u=new c(e,this.settings.forms),this.extractDataToForm(e)},this)),E.length||this.extractDataToForm(D),D.find(F).each(r.bind(function(b,c){new B({$postcodeWidget:a(c),settings:this.settings}).bindEvents()},this)),m=d.loadItem(e.dwsPreselectedDealer.itemKey,{mode:"sessionStorage"}),m?((o=m[e.dwsPreselectedDealer.dataKeys.dealerUrl])===document.referrer||o&&!document.referrer.length)&&(q=m[e.dwsPreselectedDealer.dataKeys.dealerId])&&(this.disableDealerLocator(),this.dealerPrePopHandler(q)):R&&this.runDealerPrePopulation(),i=D.find(this.settings.selectors.selectedDealerName).val(),i?this.prepopulateDealerName(i):D.find(this.settings.selectors.selectedDealerLabel).addClass(this.settings.classes.noDealerSelected),D.find(this.settings.selectors.lastItemActionsWrapperAfterC40).find(this.settings.selectors.selectThisDealer).on(ia.events.click,r.bind(function(a){this._onDealerSelection(a)},this)),D.find(this.settings.selectors.dealerSelectorSection+" "+this.settings.selectors.selectThisDealer).on(ia.events.click,v),a(this.settings.selectors.submitFormButton).on(ia.events.click,r.bind(this.loadMapAfterSubmitIfRequiredAndEmpty,this)),this.settings.eventAggregator&&(this.settings.isInline=!0,this.settings.eventAggregator.off("submitForm"),this.settings.eventAggregator.on("submitForm",r.bind(function(){a(this.settings.selectors.submitFormButton).trigger(this.defaults.events.click)},this)),this.settings.eventAggregator.off(this.settings.events.trackAnalyticsInlineForm),this.settings.eventAggregator.on(this.settings.events.trackAnalyticsInlineForm,r.bind(function(a,b){this.analyticsTrackingFormInline(a,b)},this)),this.settings.eventAggregator.on(this.settings.events.storageSaved,r.bind(function(){this.extractDataToForm(D)},this))),D.find(this.settings.selectors.selectADealerButton).click(r.bind(function(b){var c,d,e=R.map,f=e.map.center;b.preventDefault(),G=D.find(this.settings.selectors.findADealerAccordion),G.toggleClass(this.settings.classes.showCSS),D.find(this.settings.selectors.dealerSelector).toggleClass(this.settings.classes.expanded),R.get("initialized")||R.init(),G.hasClass(this.settings.classes.showCSS)||R.refreshView("map"),c=f.lat(),d=f.lng(),e.refresh(),e.mapSettings.showApiResultsOnly&&(e.map.setCenter({lat:c,lng:d}),e.map.setZoom(e.mapSettings.zoom/2)),a.each(e.clusteredMarkers.markers_,function(a,b){google.maps.event.addListener(b,ia.events.click,this._onDealerSelection)}),a(this.settings.selectors.map).on(this.settings.events.dealerSelected,r.bind(function(){this._onDealerSelection()},this)),ma&&this.dealerPrePopHandler()},this)),D.find(this.settings.selectors.selectThisDealer).addClass(this.settings.classes.hideCSS),S.on("dealerWasSelected",r.bind(function(){var b="";Z=R.map.activeDealer,R.geoloc.collection.get(Z),a.each(a(this.settings.selectors.dealerAddress,this.settings.selectors.root),function(c,d){b+=a(d).text()+","}),D.find(this.settings.selectors.selectThisDealer).removeClass(this.settings.classes.hideCSS)},this)),D.find(".location-input").keypress(function(a){a.which===t.ENTER&&a.preventDefault()}),g.createTooltips(h),a(this.settings.selectors.submitFormButton).on(ia.events.click,r.bind(this.saveFormData,this)),f&&f.HELIOS&&f.HELIOS.components&&f.HELIOS.components.c_019){D.on(ia.events.click,r.bind(this.onAnalyticsFormClick,this)),P=D.find(this.settings.selectors.dropdownGroup),P.length&&(X=f.HELIOS.components.c_019.dropdownData,this.setupDropdownGroups(P));D.find(this.settings.selectors.timePicker).length&&(this.settings.timepicker=a.extend(!0,{},this.settings.timepicker,f.HELIOS.components.c_019.timePickerType),new k(L,this.settings.timepicker,Y,this.settings.classes.error,this.settings.classes.errorMessage,_,aa))}("undefined"!=typeof CQ&&CQ.WCM&&!CQ.WCM.isEditMode(!0)&&!CQ.WCM.isDesignMode(!0)||"undefined"==typeof CQ)&&(Q=D.find(this.settings.selectors.responsiveElm),Q.length&&this.setupResponsiveElement(Q)),this.prepopulateFormFields(),this.passAnalyicsJourneyIdToForm(),this.saveFormCount(),this.trackLoad(),this.extractQueryStrDataToForm(),this.enableButton()},u.prototype._invalidHandler=function(b,c){var d,e,f,g=this.settings.selectors.brochuresModal+" "+this.settings.selectors.modalContent,h=this.settings.errorHandling.animateTimeLength,i=this.settings.errorHandling.animateStart,j=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);c.numberOfInvalids()&&c.numberOfInvalids()>0&&(d=a(c.errorList[0].element).parents(this.settings.selectors.formGroup))&&void 0!==d.offset()&&(this.settings.isInline?a(g).length?(e=this.settings.selectors.c_129,f=d.offset().top-a(g).offset().top):(e=j?this.settings.selectors.htmlBody:this.settings.selectors.c_148,f=d.offset().top-a(this.settings.selectors.summaryTray).offset().top):(e=this.settings.selectors.htmlBody,f=d.offset().top-10),setTimeout(function(){a(e).animate({scrollTop:f+"px"},h)},i))},u.prototype.setupDealerLocator=function(){var b={};if(!S)return!1;R=f.newInstance(S,{HELIOS:this.settings.HELIOS,window:this.settings.window,analyticsManager:this.settings.analyticsManager}),da=new m(a(this.$el),{window:this.settings.window,smartLocationContext:this.settings.smartLocationContext}),da.isInitialized()&&(b={restrictViewOnMapCalls:!0}),R.init(b)},u.prototype.runDealerPrePopulation=function(){var b=!1,c=!1;if(!(R&&R.geoloc&&R.geoloc.collection&&da.isInitialized()))return!1;da.run(R.geoloc.collection).done(r.bind(function(){c=!0,da.getActiveDealerId()&&b&&this.activateDealerPrePopulation()},this)),a(R).one(this.settings.events.modelsUpdated,r.bind(function(){b=!0,da.getActiveDealerId()&&c&&this.activateDealerPrePopulation()},this))},u.prototype.activateDealerPrePopulation=function(){ma=!0,this.dealerPrePopHandler()},u.prototype.dealerPrePopHandler=function(a){var b=a||da.getActiveDealerId();this.setActiveDealer(b),this.preselectDealer(),ma&&(R.geoloc.$input.val(R.value.name),R.callbacks.viewOnMap(!1,R.value.id,!0),R.requestDealerDetail(R.value.id))},u.prototype.disableDealerLocator=function(){D.find(this.settings.selectors.findADealerAccordion).removeClass(this.settings.classes.showCSS),D.find(this.settings.selectors.selectADealerButton).prop("disabled","disabled").addClass(this.settings.classes.btnDisabled)},u.prototype.enableButton=function(){D.find(this.settings.selectors.submitFormButton+this.settings.selectors.jsDisabled).removeAttr("disabled").removeClass(this.settings.classes.jsDisabled+" "+this.settings.classes.btnDisabled)},u.prototype.preselectDealer=function(){R&&R.value&&(D.find(this.settings.selectors.selectedDealerIdInput).val(r.escape(R.value.id)),D.find(this.settings.selectors.selectedDealerNameInput).val(r.escape(R.value.name)),this.prepopulateDealerName(R.value.name))},u.prototype.setActiveDealer=function(a){var b;R&&a&&(b=R.geoloc.collection.get(a))&&b.attributes&&R.setValue(b)},u.prototype.checkLoginSuccess=function(){var b,c,f,g,h;f=a(this.defaults.selectors.loginSuccessMessage),g=a(this.defaults.selectors.loginWidget),h=d.loadItem(this.settings.cookie.ownerServicesLoggedInCookie,this.defaults.storageManagerCookie)||a.cookie(this.settings.cookie.ownerServicesLoggedInCookie),b=d.loadItem(e.loginWidgetData.loginSuccess,this.defaults.storageManagerLocalStorage),c=d.loadItem(e.loginWidgetData.profileDataSession,this.defaults.storageManagerLocalStorage),d.deleteItem(e.loginWidgetData.loginSuccess,this.defaults.storageManagerLocalStorage),b&&h&&f.removeClass(this.defaults.classes.loginSuccess),c||h||g.removeClass(this.defaults.classes.profileInSession),this.bindEventsModal()},u.prototype.initModal=function(){var b,c;_.matchMedia&&(b=_.matchMedia(HELIOS.config.common.mediaQuery.is.small).matches),b||(c=this.settings.modal.largeHeight),ca=new l({openSelector:this.settings.selectors.loginWidgetModal,displayType:l.TYPE_CENTERED,customOverlayClass:"modal-overlay-dark",customClass:"login-widget",clearOnClose:!1,modalSize:c}),ca.setTarget=function(b){var c,d;return c=this.clear(),d=function(b){var c=[],d=a(b).find(this.settings.selectors.loginWidgetRoot);return a.each(d,function(a,b){c.push(b.outerHTML)}),c=c.join(""),this.setContent(c)},c.then(r.bind(function(){return a.ajax({url:b,type:"GET",success:r.bind(d,this)})},this)),c},ca.setContent=function(a){return this.$content.html(a).promise().done(function(){require("c_080C").init({HELIOS:this.settings.HELIOS,window:this.settings.window,analyticsManager:this.settings.analyticsManager})})}},u.prototype.bindEventsModal=function(){a(this.settings.selectors.loginWidgetModal).on(this.settings.events.click,function(b){var c=a(b.target),d={componentId:ga,destination:c.attr(this.settings.data.href),buttonText:c.text(),locationInPage:"pre-populated-form-"+U.toLowerCase().replace(/\s+/g,"-"),contentAction:"login widget"};b.preventDefault(),this.settings.analyticsManager.tag(this.settings.analyticsManager.trackingVars.buttonNoCookie,d)}),a(this.settings.selectors.body).on(this.settings.events.click,this.settings.selectors.loginWidgetModal,function(){var a;(a=d.loadItem(this.settings.cookie.ownerServicesLoggedInCookie,this.defaults.storageManagerCookie))&&(d.saveItem(e.loginWidgetData.loginSuccess,!0,this.defaults.storageManagerSessionStorage),this.settings.window.location.reload())})},u.prototype.passAnalyicsJourneyIdToForm=function(){var a=this.settings.analyticsManager.getJourneyDataByName("offer");a&&a.id&&D.find("form").append('<input type="hidden" name="analyticsData" value="'+a.id+'"/>')},u.prototype.onAnalyticsFormClick=function(b){var c,d,e,f;r.isUndefined(b.originalEvent)||"DIV"===b.target.nodeName||(c=a(b.target).is(a(ia.selectors.submitFormButton,D)),d={formStepName:c?this.settings.analytics.submitFormStepName:this.settings.analytics.firstInteractionFormStepName,formStepNumber:c?this.settings.analytics.submitFormStepNumber:this.settings.analytics.firstInteractionFormStepNumber},e=D.data(this.settings.data.templateName)===this.settings.data.formTemplateName,c&&!this.settings.isInline&&(d.pageType=this.settings.analytics.pageType,f="",a(this.settings.selectors.errorMessage,this.settings.selectors.root).each(function(b,c){a(c).is(":visible")&&(f+=a(c).text()+",")}),d.pageType=this.settings.analytics.pageType,f&&(d.errorMessage=f),this.analyticsTrackingForm(d)),na&&!e&&(d.templateName=D.data(this.settings.data.templateName),this.analyticsTrackingForm(d),na=!1))},u.prototype.trackLoad=function(){if(this.settings.analyticsManager){var a=d.loadItem(e.multipleBrochures.itemKey,this.defaults.storageManagerLocalStorage),b=this.settings.analyticsManager,c=b.trackingVars.pageLoad,f=b.getTrackingObjectProperties(c),g={};a&&(g[f.brochureName]=a.brochures.join(","),g[f.brochureAmount]=a.brochures.length,g[f.vehicleModel]=a.model,g[f.vehicleCategory]=a.category,g[f.vehicleId]=a.id),this.settings.isConfigurator&&this.settings.isInline&&(g[f.pageType]=this.settings.containerPageType,g[f.componentId]=this.settings.sourceComponentId),this.settings.analyticsManager.append(c,g)}},u.prototype.analyticsTrackingForm=function(b){var c,d;this.settings.analyticsManager&&(c={componentId:ga,formCategory:D.data(this.settings.data.formCategory),formType:D.data(this.settings.data.formType),formName:D.data(this.settings.data.formName)},d=a.extend({},c,b),this.settings.analyticsManager.tag(this.settings.analyticsManager.trackingVars.formSteps,d))},u.prototype.analyticsTrackingFormInline=function(a,b){this.settings.analyticsManager&&(b=r.extend({componentId:ga,pageName:"handraiser|"+D.data(this.settings.data.formName),templateName:D.data(this.settings.data.templateName),formType:D.data(this.settings.data.formType),formCategory:D.data(this.settings.data.formCategory),formStepName:this.settings.analytics.formStepName,formStepNumber:this.settings.analytics.formStepNumber,formName:D.data(this.settings.data.formName)},b),this.settings.analyticsManager.tag(a,b))},u.prototype.setupDropdownGroups=function(b){var c,d,e,f,g,h,i;b.each(r.bind(function(b,j){g=a(j),c=g.find(this.settings.selectors.firstSelectBox),d=g.find(this.settings.selectors.secondSelectBox),e=g.find(this.settings.selectors.thirdSelectBox),f=c.val(),this.prepopulateDropDownGroup(g),this.listenSelectChange(c,d,r.bind(this.onParentSelectChange,this)),d&&e&&(this.listenSelectChange(d,e,r.bind(this.onParentSelectChange,this)),e.length?e.on(this.settings.events.change,r.bind(this.onElementSelectChange,this)):d.on(this.settings.events.change,r.bind(this.onElementSelectChange,this))),f&&d&&(h=g.data(this.settings.selectors.tripleDropdownGroupData),a.isNestedProp(X,[h,f,"options"])&&(i=X[h][f].options,this.appendListOptions(d,i)))},this))},u.prototype.prepopulateDropDownGroup=function(b){var c,d,e,f=b.find(this.settings.selectors.firstSelectBox),g=b.find(this.settings.selectors.secondSelectBox),i=b.find(this.settings.selectors.thirdSelectBox);D.find(this.settings.selectors.dataPrePopulationUrl)&&(c=D.find(this.settings.selectors.dataPrePopulationUrl).data("prepopulationUrl")),b.parents(this.defaults.selectors.carDataAdminSelector).length||(h.init(),h.getData(c).done(r.bind(function(b){d=this.getHolesInPrepopData(b),a.isEmptyObject(d)?this.prepopulateTripleDropdown(f,g,i,b):h.getDataFallback(c,d).done(r.bind(function(c){e=a.extend({},b,c),this.resolvePrePopPromises(e),this.prepopulateTripleDropdown(f,g,i,e)},this))},this)))},u.prototype.prepopulateTripleDropdown=function(a,b,c,d){var e=!1,f=!1,g=!1,h=a.parents(this.settings.selectors.dropdownGroup).data(this.settings.selectors.tripleDropdownGroupData);a&&d.hasOwnProperty(a.data(this.settings.data.storageKey))&&(this.prepopulateDropdown(a,d),f=a.val()),X&&f&&X[h][f]&&(e=X[h][f].options,this.appendListOptions(b,e),this.prepopulateDropdown(b,d),g=b.val()),g&&(e=this.getThirdOptions(f,g,X[h]),this.appendListOptions(c,e),this.prepopulateDropdown(c,d))},u.prototype.prepopulateDropdown=function(b,c){var d;c.hasOwnProperty(b.data(this.settings.data.storageKey))&&(d=a.escapeHtml(c[b.data(this.settings.data.storageKey)]),b.find('option[value="'+d+'"]').length&&(b.val(r.escape(d)),b.parents(".custom-selectbox").find("span.selectedValue").text(b.find("option:selected").text())))},u.prototype.listenSelectChange=function(a,b,c){a.on(this.settings.events.change,{childSelectBox:b},c)},u.prototype.onElementSelectChange=function(b){var c=a(b.currentTarget),d=c.attr("id"),e=P.find(this.settings.selectors.disclaimerList),f=a("#"+d),g=[],h=c;a.each(P.children(this.settings.selectors.formGroup),function(b){b<P.children("div").length-1&&(h=a("#"+h.attr("data-responsive-parent")),g.push(h.val()))}),g=g.reverse(),a.each(g,function(a,b){d+="-"+b}),d+="-"+f.val(),e.children().not('div[data-responsive-child="'+d+'"]').hide()},u.prototype.onParentSelectChange=function(b){var c,d=a(b.target),e=d.parents(this.settings.selectors.dropdownGroup),f=e.data(this.settings.selectors.tripleDropdownGroupData),g=[],h=e.find(this.settings.selectors.thirdSelectBox),i=e.find(this.settings.selectors.secondSelectBox),j=e.find(this.settings.selectors.firstSelectBox).val();d.is(this.settings.selectors.firstSelectBox)?(this.emptySelectBox(i),this.emptySelectBox(h),X[f]&&X[f][j]&&X[f][j].hasOwnProperty("options")&&(g=X[f][j].options)):(c=i.val(),this.emptySelectBox(h),h&&c&&j&&(g=this.getThirdOptions(j,c,X[f]))),this.appendListOptions(b.data.childSelectBox,g)},u.prototype.appendListOptions=function(b,c){var d,e,f={};if(c&&c.length){for(e=0;e<c.length;e++)d=c[e],f.value=r.escape(d.id),b.append(a("<option>",f).text(d.label));this.selectDefaultOption(b)}},u.prototype.getThirdOptions=function(b,c,d){var e;if(d[b])return e=a(d[b].options).filter(function(){return this.id===c})[0],e&&e.hasOwnProperty("children")?e.children:[]},u.prototype.selectDefaultOption=function(a){var b,c=a.find("option").eq(0);c.length&&(b=c.text(),c.attr("selected","selected"),a.parent().find(this.settings.selectors.spanSelectedValue).text(b),a.trigger("change"))},u.prototype.emptySelectBox=function(a){var b,c;a&&(b=a.find("option").eq(0),c=b.text(),a.empty(),a.append(b),a.parent().find(this.settings.selectors.spanSelectedValue).text(c),a.trigger("change"))},u.prototype.setupResponsiveElement=function(b){b.parent().parent().siblings(this.settings.selectors.responsiveElmFieldset).children().addClass(this.settings.classes.hideCSS).find("input, textarea, select").prop("disabled",!0),b.each(r.bind(function(b,c){var d=a(c);if(d.is(":checkbox")){var e=d.attr("id"),f=d.is(":checked"),g=this.settings.selectors.responsiveChildData+'="'+e+"-",h="["+g+f+'"]',i="["+g+!f+'"]',j=d.parent().parent().siblings(this.settings.selectors.responsiveElmFieldset);j.children(h).removeClass(this.settings.classes.hideCSS).find("input, textarea").prop("disabled",!1),j.children(i).find("input, textarea").val("")}else{var k=d.val(),l=d.parent().parent().siblings(this.settings.selectors.responsiveElmFieldset),m=d.attr("id")+"-";m+=k,k="["+this.settings.selectors.responsiveChildData+'="'+m+'"]',l.children().addClass(this.settings.classes.hideCSS).find("input, textarea, select").prop("disabled",!0),l.children(k).removeClass(this.settings.classes.hideCSS).find("input, textarea, select").prop("disabled",!1)}},this)),b.on(this.settings.events.change,r.bind(function(b){var c,d=a(b.target),e=d.parent().parent().siblings(this.settings.selectors.responsiveElmFieldset),f=d.attr("id")+"-",g="false";d.is(":checkbox")?d.is(":checked")&&(g="true"):g=d.val(),f+=g,c="["+this.settings.selectors.responsiveChildData+'="'+f+'"]',e.children().addClass(this.settings.classes.hideCSS).find("input, textarea, select").prop("disabled",!0),e.children(c).removeClass(this.settings.classes.hideCSS).find("input, textarea, select").prop("disabled",!1),d.is(":checkbox")&&(e.children().find("input, textarea, select").val(""),e.children(c).find("input, textarea, select").val(g))},this))},u.prototype.c_019_formHandler=function(b,c){this.displayAddressForm(),c.valid()?(ea.verifyDataBeforeSubmit(),fa.handleFileUpload(a(b),c.data(ia.data.acceptFile),r.bind(function(a){a&&(this.settings.isInline?this.ajaxSubmit(c):c.trigger(ia.events.submit))},this))):(this.displayAddressErrors(),this.displayDatepickerErrors(),this.displayDealerLocatorErrors(c),this.displayTimepickerErrors(),fa.displayMandatoryErrors(),this.trackSubmissionInvalid())},u.prototype.ajaxSubmit=function(b){var c,d,e=b.serializeArray(),f={},g="formSteps",h=a("input[name=allOptIn]");a.map(e,function(a,b){f[a.name]=a.value}),d={componentId:ga,formType:D.data(this.settings.data.formType),formCategory:D.data(this.settings.data.formCategory),formStepName:this.settings.analytics.submittedFormStepName,formStepNumber:this.settings.analytics.submittedFormStepNumber,formName:D.data(this.settings.data.formName),formSubmission:"yes"},h&&h.length&&("Nissan"===HELIOS.config.brand||"Infiniti"===HELIOS.config.brand)&&"US"===HELIOS.config.common.countryCode&&(f.allOptIn?d.allOptIn=f.allOptIn:d.allOptIn=!1),c=b.attr("action"),c=c.replace("html","json"),a.ajax({url:c,type:"POST",data:f}).done(r.bind(function(a){this.settings.eventAggregator.trigger("formResponse",{responseData:a,trackingVar:g,trackingObject:d})},this)).fail(r.bind(function(a){this.settings.eventAggregator.trigger("formResponse",{responseData:a.responseJSON,trackingVar:g,trackingObject:d})},this))},u.prototype.trackSubmissionInvalid=function(){var b,c=a(".required.error"),d="";c&&(d=r.reduce(c.find(".error-message"),function(b,c){return b+a(c).text().trim()+" | "},"")),b={componentId:ga,formType:D.data(this.settings.data.formType),formCategory:D.data(this.settings.data.formCategory),formStepName:this.settings.analytics.submittedFormStepName,formStepNumber:this.settings.analytics.submittedFormStepNumber,formName:D.data(this.settings.data.formName),formSubmission:this.settings.isInline?"yes":"no",formSubmissionSuccess:"no",errorMessage:d},this.settings.analyticsManager.tag("formSteps",b)},u.prototype.displayAddressErrors=function(){F.removeClass(this.settings.classes.lookupAddressClass).addClass(this.settings.classes.manualAddressEnterClass),F.find("input.error").each(function(b,c){var d=a(c);d.siblings("span").remove(),d.after('<span class="error-message">'+d.data("validation-notblank")+"</span>")})},u.prototype.displayAddressForm=function(){F.removeClass(this.settings.classes.lookupAddressClass).addClass(this.settings.classes.manualAddressEnterClass);var b=a(this.settings.selectors.addressComponent);b.length&&(b.find(this.settings.selectors.addressFormGroup).removeClass(this.settings.classes.active),b.find(this.settings.selectors.addressManual).addClass(this.settings.classes.active))},u.prototype.displayDealerLocatorErrors=function(b){a(this.settings.selectors.c_019_25,b).each(r.bind(function(b,c){var d=a(c);d.hasClass(this.settings.classes.error)&&d.data("DealerLocatorInstance").showSelectedDealerRequiredMessage()},this))},u.prototype._onDealerSelection=function(b){var c,d=R.map.activeDealer,e=R.geoloc.collection.get(d),f=D.find(this.settings.selectors.selectADealerButton);e&&(c=e.attributes.suggestedName),D.find(this.settings.selectors.selectedDealerLabel).removeClass(this.settings.classes.noDealerSelected).children("span").empty().text(c),D.find(this.settings.selectors.selectedDealerIdInput).val(r.escape(d)),D.find(this.settings.selectors.selectedDealerNameInput).val(r.escape(c)),b&&b.target&&(D.find(this.settings.selectors.findADealerAccordion).toggleClass(this.settings.classes.showCSS),f.length&&a("html,body").scrollTop(f.offset().top-15))},u.prototype.prepopulateDealerName=function(a){D.find(this.settings.selectors.selectedDealerName).empty().text(r.escape(a)),D.find(this.settings.selectors.selectedDealerNameInput).val(r.escape(a))},u.prototype.extractDataToForm=function(b){d&&(d.init({mode:this.settings.capture.mode}),a("[data-"+this.settings.capture.attrNamespace+"]",b).each(r.bind(function(b,c){var d=a(c);switch(this.settings.capture.destination){case"to-field-value":this.extractDataToField(d);break;case"individual-fields":this.extractDataToIndividualFields(d);break;default:this.compressDataToSingleField(d)}},this)))},u.prototype.getKeysFromDataAttr=function(b){var c=a.trim(b.split(" ").join("")),d={},e=c.split(",");for(var f in e)x(d,e[f],null);return d},u.prototype.assignDataFromStorageToObj=function(a){var b,c=a,e=r.keys(c);for(b in e){var f=e[b],g=d.loadItem(f,{mode:this.settings.capture.mode});r.isObject(g)&&w(c[f],g)}return c},u.prototype.flatten=function(a,b){var c;for(c in b)r.isObject(b[c])?flatten(a,b[c]):a[c]=b[c]},u.prototype.fetchFlattenedValues=function(a){var b=a.data(this.settings.capture.attrNamespace),c=this.getKeysFromDataAttr(b),d={};return this.assignDataFromStorageToObj(c),this.flatten(d,c),d},u.prototype.extractDataToField=function(b){var c,e,f,g=b.data(this.settings.capture.attrNamespace);c=g.split("."),(e=d.loadItem(c[0],{mode:this.settings.capture.mode}))&&(c.length>1?(c.shift(),a.isNestedProp(e,c)&&(f=a.getDataFromObject(e,c))):f=e,f&&b.attr("value",r.isObject(f)?JSON.stringify(f):String(f).replace(/\"/g,"")))},u.prototype.compressDataToSingleField=function(a){var b,c,d=this.fetchFlattenedValues(a),e=[];for(c in d)e.push('"'+c+"="+d[c]+'"');b=e.join(this.settings.capture.separator),a.val(r.escape(b))},u.prototype.extractDataToIndividualFields=function(a){var b,c,d=this.fetchFlattenedValues(a);for(b in d)c=a.clone(),c.attr({id:b,name:b,value:d[b]}),a.after(c);a.remove()},u.prototype.localizeDatePicker=function(){var b=a("html").attr("lang"),c=a("html").attr("lang").split("-")[0];I.each(r.bind(function(b,c){a("#"+c).datepicker(this.settings.datepicker)},this)),void 0!==a.datepicker.regional[b]?a.datepicker.setDefaults(a.datepicker.regional[b]):void 0!==a.datepicker.regional[c]?a.datepicker.setDefaults(a.datepicker.regional[c]):a.datepicker.setDefaults(a.datepicker.regional[""])},u.prototype.restrictDatePicker=function(b,c){var d=$?a.datepicker.noWeekends:null,e=this.getDateRestriction(b,c);c.datepicker("option",{beforeShowDay:d,minDate:e.minDate,maxDate:e.maxDate}),d&&new j(c)},u.prototype.getDateRestriction=function(a,b){var c=new RegExp(/\+[0-9]+d/),d=b.data(this.settings.data.minDateDays),e=b.data(this.settings.data.maxDateDays);return c.test(d)||(d="+0D"),c.test(e)||(e="+3M"),!a&&$&&(d="-36M",e="+36M"),{minDate:d,maxDate:e}},u.prototype.enableDatesByAjaxRequest=function(b,c){var d=this.getDateRestriction(b,c),e=c.parents(this.settings.selectors.formGroup).find(this.settings.selectors.datePickerDealerWarning),f=this.settings;c.data(this.settings.data.availableDates,[]),c.data("require-dealer")&&(e.addClass(this.settings.classes.active),c.datepicker("option","disabled",!0),S.on("dealerWasSelected",function(){c.datepicker("option","disabled",!1),e.removeClass(this.settings.classes.active)})),c.datepicker("option",{onChangeMonthYear:function(a,b){y(a,b,c,f.data.availableDates)},minDate:d.minDate,maxDate:d.maxDate,beforeShow:r.bind(function(a,b){var d=c.datepicker("getDate")||new Date;this.datePickerSettings(null,b),y(d.getFullYear(),d.getMonth()+1,c,f.data.availableDates)},this),beforeShowDay:r.bind(function(b){var d;return r.isNull(c.data(this.settings.data.availableDates))?[!0]:(d=a.datepicker.formatDate("yy-mm-dd",b),[c.data(this.settings.data.availableDates).indexOf(d)>-1])},this)})},u.prototype.resizeDatepicker=function(){H.datepicker(this.settings.classes.hideCSS)},u.prototype.datePickerSettings=function(b,c){var d,e,f,g,h,i;a(window).height(),d=a(window).scrollTop(),i=a("#"+c.id),g=c.dpDiv,e=parseInt(i.css("height"),10),f=i.position(),h=f.top+e,setTimeout(function(){g.css({position:"absolute",top:h,left:0,"z-index":10}),A(g)||a("html, body").animate({scrollTop:d+g.outerHeight()})},10),i.prop("disabled",!0),i.before(a.datepicker.dpDiv)},u.prototype.displayTimepickerErrors=function(){var a=L.css("width");L.siblings(this.settings.selectors.errorMessage).css("width",a)},u.prototype.hideTimepickerErrors=function(){L.parents(this.settings.selectors.formGroup).removeClass("error")},u.prototype.datePickerClose=function(b,c){var d=a("#"+c.id);d.prop("disabled",!1),this.hideDatepickerErrors(d)},u.prototype.resetDate=function(b){var c=a(b.currentTarget),d=c.parent().find(this.settings.selectors.datePicker);b.preventDefault(),!0===ja||!0===ka?d.val(this.settings.datepicker.dateFormat):a.datepicker._clearDate(d),c.removeClass(this.settings.classes.showCSS),c.parent().removeClass(this.settings.classes.complete)},u.prototype.datePickerSelect=function(b,c){var d=a("#"+c.id),e=d.parent();e.find(this.settings.selectors.resetDate).addClass(this.settings.classes.showCSS),e.addClass(this.settings.classes.complete),this.setHiddenInputDate(d),e.find("#"+c.id+"-hidden").trigger("change"),
d.hasClass(this.settings.classes.error)&&e.removeClass(this.settings.classes.error).siblings(this.settings.selectors.errorMessage).remove()},u.prototype.setHiddenInputDate=function(b){var c=b.datepicker("getDate"),d=a.datepicker.formatDate("yy-mm-dd",c),e=b.attr("id")+"-hidden";a("#"+e).val(d)},u.prototype.displayDatepickerErrors=function(){var a=H.css("width");H.siblings(this.settings.selectors.errorMessage).css("width",a)},u.prototype.hideDatepickerErrors=function(a){a.parents(this.settings.selectors.formGroup).removeClass(this.settings.classes.error)},u.prototype.resolvePrePopPromises=function(b){a(this.settings.selectors.dataPrePopulationStorageKey).each(r.bind(function(c,d){var e=a(d);b.hasOwnProperty(e.data(this.settings.data.storageKey))&&!e.parents(".dropdown-group").length&&("select"===e.prop("nodeName").toLowerCase()?prepopulateDropdown(e,b):e.is(":checkbox")?e.prop("checked",b[e.data(this.settings.data.storageKey)]):e.val(b[e.data(this.settings.data.storageKey)]),a(document).trigger(this.settings.events.prepopulate))},this))},u.prototype.prepopulateFormFields=function(){var b,c,d;D.find(this.settings.selectors.dataPrePopulationUrl)&&(b=D.find(this.settings.selectors.dataPrePopulationUrl).data("prepopulationUrl")),h.init(),h.getSavedData(b).done(r.bind(function(e){c=this.getHolesInPrepopData(e),a.isEmptyObject(c)?this.resolvePrePopPromises(e):h.getDataFallback(b,c).done(r.bind(function(b){d=a.extend({},e,b),this.resolvePrePopPromises(d),this.checkLoginSuccess()},this))},this))},u.prototype.extractQueryStrDataToForm=function(){var b,c,d,e,f;b=s.getUrlParams(),e=[],f="data-request-variable",r.isEmpty(b)?C.info("[extractQueryStrDataToForm]: No query string data available"):(c=D.find("input["+f+"], select["+f+"], textarea["+f+"]").filter(function(c,f){return d=a(f).data("request-variable"),!r.isUndefined(b[d])&&(e.push(d),!0)}),c.length?a.each(c,r.bind(function(a,c){this._setInputValue(c,b[e[a]])},this)):C.info("[extractQueryStrDataToForm]: No form fields matching query string data"))},u.prototype._setInputValue=function(b,c){var d,e,f;if(r.isUndefined(c))C.warn("[_setInputValue]: Value to be set is undefined");else switch(e=a(b),d=e.prop("type"),f=c,d){case"text":case"hidden":case"textarea":e.val(f);break;case"select-one":e.find('option[value="'+f+'"]').length&&e.val(f).trigger(this.settings.events.globalChange);break;case"checkbox":case"radio":f=r.contains(["1","true",!0,"checked"],c),e.prop("checked",f);break;default:C.warn("[_setInputValue]: No matched prop type for element")}},u.prototype.getHolesInPrepopData=function(b){var c={};return a(this.settings.selectors.dataPrePopulationStorageKey).each(r.bind(function(d,e){b.hasOwnProperty(a(e).data(this.settings.data.storageKey))||(c[a(e).data(this.settings.data.storageKey)]="SERVER_STORAGE")},this)),c},u.prototype.loadMapAfterSubmitIfRequiredAndEmpty=function(){var b,c,d,e,f;if(void 0!==R&&"undefined"!==R.map){var g=R.map,h=g.map.center;S=D.find(this.settings.selectors.dealerLocator),G=D.find(this.settings.selectors.findADealerAccordion),G.toggleClass(this.settings.classes.showCSS),R.get(this.settings.dealerMap.initialized)||R.init(),G.hasClass(this.settings.classes.showCSS)||R.refreshView(this.settings.dealerMap.map),e=h.lat(),f=h.lng(),g.refresh(),g.mapSettings.showApiResultsOnly&&(g.map.setCenter({lat:e,lng:f}),g.map.setZoom(g.mapSettings.zoom/2)),a.each(g.clusteredMarkers.markers_,function(a,b){google.maps.event.addListener(b,ia.events.click,this._onDealerSelection)}),a(this.settings.selectors.map).on(this.settings.events.dealerSelected,r.bind(function(){this._onDealerSelection()},this)),ma&&this.dealerPrePopHandler(),S.length&&this.setupDealerLocator(S)}b=D.find(this.settings.selectors.selectADealerButton),c=b.parent(),(d=c.hasClass(this.settings.classes.required))&&(D.find(this.settings.selectors.dealerSelectorSectionError).val(),G=D.find(this.settings.selectors.findADealerAccordion),G.addClass(this.settings.classes.showCSS),D.find(this.settings.selectors.dealerSelectorSection).addClass(this.settings.classes.expanded))},u.prototype.saveFormData=function(){var b,c,d,e={};return D.find(this.settings.selectors.dataPrePopulationUrl)&&(d=D.find(this.settings.selectors.dataPrePopulationUrl).data("prepopulationUrl")),a(this.settings.selectors.dataPrePopulationStorageKey).each(r.bind(function(d,f){var g=a(f);b=g.data(this.settings.data.storageKey),c=g.is(":checkbox")?g.is(":checked"):g.val(),e[b]=c},this)),h.saveData(e,d)},u.prototype.selectDeselectCheckbox=function(a){a.type===this.this.settings.forms.checkbox&&(!0===a.checked?a.checked=!1:a.checked=!0)},u.prototype.saveFormCount=function(){var a,b,c=d.loadItem(this.settings.analytics.analyticsSession,this.defaults.storageManagerSessionStorage),e=D.data(this.settings.data.formName),f=D.data(this.settings.data.formCategory),g=D.data(this.settings.data.formType);a=c?c.formCount+1:1,b={formCount:a,formName:e,formCategory:f,formType:g},d.saveItem(this.settings.analytics.analyticsSession,b,this.defaults.storageManagerSessionStorage)},u}),define("c_019_20",["jquery","backbone"],function(a,b){"use strict";function c(b,c){this.settings=a.extend({},k,c),this.defaults=k,this.$el=b,this.init(c)}var d,e,f,g,h,i,j,k={events:{blur:"blur",click:"click"},classes:{error:"error",complete:"complete"},selectors:{root:".c_019-20",emailCap:".cap-email",emailCapCode:".validation-code",emailCapMessage:".validation-message",submitForm:"[type=submit]",formParent:"form",errorMessage:".error-message",ie:".ie9, .ltie9"},data:{validationInvalidEmail:"validation-invalid-email",validationError:"validation-error",invalidEmail:"invalidEmail",externalError:"externalError"}},l=!1,m=HELIOS.config.common.api.apigee.url;return i=null,c.prototype.init=function(b){if(d=a(this.settings.selectors.root),!d.length)return!1;e=a(this.settings.selectors.emailCap,d),f=a(this.settings.selectors.emailCapCode,d),l=0!==a(this.settings.selectors.ie).length,g=d.parents(this.settings.selectors.formParent),h=a(this.settings.selectors.submitForm,g),j=/\/$/.test(m)?m:m+"/",j+=l?"v2/proxy/v2/utils/emailAddress/validation":"v2/utils/emailAddress/validation",this.bindEvents()},c.prototype.bindEvents=function(){e.on(this.settings.events.blur,_.bind(this.callServiceCAP,this)),h.on(this.settings.events.click,_.bind(this.callServiceCAP,this))},c.prototype.callServiceCAP=function(){if(""!==e.val().trim()){var b,c,d=this.settings.HELIOS.config.common.api.apigee.apiKey,f=this.settings.HELIOS.config.common.api.apigee.clientKey;c={type:"GET",url:j+"?emailAddress="+e.val().trim(),dataType:"json"},l?c.url+="&apiKey="+d+"&clientkey="+f:c.headers={apikey:d,clientkey:f},b=a.ajax(c),b.always(_.bind(function(a,b,c){200===c.status?this.passedValidation(a):400===a.status?this.showErrorValidation(i.data.invalidEmail):this.showErrorValidation(i.data.externalError)},this))}},c.prototype.passedValidation=function(a){f.val(a.score),d.removeClass(this.settings.classes.error)},c.prototype.showErrorValidation=function(b){var c;c=b===this.settings.data.invalidEmail?d.data(this.settings.data.validationInvalidEmail):d.data(this.settings.data.validationError),a(this.settings.selectors.errorMessage).text(c),d.addClass(this.settings.classes.error),f.val("")},c}),define("c_019_22",["jquery","c_008","googleMapsSingleton","heliosObject","c_152_0_autocomplete"],function(a,b,c,d,e){"use strict";function f(b,c){return this.settings=a.extend({},l,c),this.defaults=l,this.$el=b,this.init(c)}var g,h,i,j,k="c_019-22",l={selectors:{root:".c_019-22",addressField:".address-field",manualAddressLink:".manual-address-link",placesLink:".places-link",formAddress:".form-address",tooltipTriggers:".has-tooltip",addressContainer:".address-lookup-container",formGroup:".form-group",formFields:".manual-address-enter input[type=text]",placeService:".place-service",suggestions:".autocomplete-suggestions",countrySelect:".country-select"},classes:{active:"active",error:"error"},events:{prepopulate:"prepopulatedForm",initialized:"initialized",complete:"complete",change:"change",open:"open",close:"close",placeChanged:"place_changed",click:"click."+k,input:"input."+k,focus:"focus."+k,blur:"blur."+k,keypress:"keypress."+k},apiEvents:{geolocation:"geolocation",submit:"submit",input:"input",initialized:"initialized",change:"change"},atts:{initialized:"initialized",defaultText:"defaultText",wasGeoText:"wasGeoText",autocomplete:"autocomplete",open:"open"},data:{mappingUrl:"mapping-url",relatedSection:"related-section"},window:"window"},m="#c19_22_",n={autocomplete:{countryCode:d.config.common.countryCode,matchMediaTest:d.config.common.mediaQuery.is.small,smallOrMedium:d.config.common.mediaQuery.is.smallOrMedium,exclude:[""],maxHeight:!1}},o=!1;return f.prototype.init=function(c){var d,e;return g=a(this.settings.selectors.root),!!g.length&&(d=a(this.settings.selectors.tooltipTriggers),g.find(this.settings.selectors.addressField),h=g.find(this.settings.selectors.manualAddressLink),i=g.find(this.settings.selectors.addressContainer),e=this.initGoogleAutocomplete(),b.createTooltips(d),this.bindEvents(),j=new this.PlacesService(this.settings),a.ajax({url:g.data(this.defaults.data.mappingUrl),type:"GET",dataType:"json"}).done(_.bind(this.ajaxDone,this)).fail(_.bind(this.ajaxFail,this)),e)},f.prototype.initGoogleAutocomplete=function(){var a,b=g.data(k);return b instanceof this.GeolocAutocomplete||(a={settings:this.settings,defaults:this.defaults,$el:this.$el},b=new this.GeolocAutocomplete(g,a).init(),g.data(k,b)),b},f.prototype.bindEvents=function(){var b=g.find(this.settings.selectors.placesLink);g.find(this.settings.selectors.addressField);h.on(this.settings.events.click,_.bind(this.toggleAddressForm,this)),b.on(this.settings.events.click,_.bind(this.toggleAddressForm,this)),a(document).on(this.settings.events.prepopulate,_.bind(this.showManualAddress,this)),a(this.settings.selectors.countrySelect).on(this.settings.events.change,function(){g.data(k).autocomplete.setCountryRestriction(this.value)})},f.prototype.toggleAddressForm=function(b){var c=a(b.target),d=c.data(this.defaults.data.relatedSection);b.preventDefault(),g.find(this.settings.selectors.formAddress).removeClass(this.settings.classes.active),g.find("."+d).addClass(this.settings.classes.active)},f.prototype.showManualAddress=function(){h.click()},f.prototype.ajaxDone=function(a){j.mapping=a,i.removeClass(this.settings.classes.error)},f.prototype.ajaxFail=function(a){i.addClass(this.settings.classes.error)},f.prototype.PlacesService=function(b){return this.settings=_.extend({},l,b),c.getDeferred().done(a.proxy(function(){void 0!==b.window.google&&b.window.google.maps&&b.window.google.maps.places&&b&&this.init(b)},this)),this},f.prototype.PlacesService.prototype={mapping:null,init:function(a){this.placesService=new a.window.google.maps.places.PlacesService(g.find(l.selectors.placeService)[0])},getPlaceDetails:function(b){if(b){var c={placeId:b};this.placesService.getDetails(c,a.proxy(this.placeChanged,this))}},placeChanged:function(b,c){var d=this;o=!0,this.mapping&&a.each(this.mapping.formFields,function(c,e){var f=d.mapping.addressfields[e],g="";a.each(f,function(c,d){if("field.separator"===d.name)g+=d.text;else{var e=a(b.address_components).filter(function(){return this.types[0]==d.name});e[0]&&e[0][d.text]&&(g+=e[0][d.text])}}),a(m+e).val(g).closest(d.settings.selectors.formGroup).removeClass(d.settings.classes.error),h.click()})}},f.prototype.GeolocAutocomplete=function(b,c){this.settings=c.settings,this.defaults=c.defaults,this.$el=c.$el,this.collection={},this.attributes={value:!1,defaultText:null,geolocation:!1,label:"",previousQuery:!1,isValid:!1,initialized:!1,open:!1,wasGeoText:!1},this.$input=a(g.find(this.settings.selectors.addressField)),this.events={},this.on=function(a,b){for(var c,d=a.split(" "),e=0;e<d.length;e++)void 0!==(c=d[e])&&"function"==typeof b&&(void 0!==this.events[c]?this.events[c].push(b):this.events[c]=[b],c===this.defaults.apiEvents.initialized&&this.get(this.defaults.atts.initialized)&&b(this));return this},this.off=function(a){return void 0!==this.events[a]&&(this.events[a]=[]),this},this.destroy=function(){this.unbindEvents(),this.autocomplete&&this.autocomplete.destroy()}},f.prototype.GeolocAutocomplete.prototype={events:[],init:function(){return this.autocomplete=this.newAutocomplete(),this.bindEvents(),this.set(this.defaults.atts.initialized,!0),this.trigger(this.defaults.apiEvents.initialized,this),this.trigger(k+":"+this.defaults.atts.initialized,this),this},initSettings:function(b){a.extend(!0,this.attributes,b)},newAutocomplete:function(){return e.init(this.$input,this.getAutocompleteSettings(),this.collection)},onAutocompleteInitialized:function(){this.$suggestions=this.$el.find(l.selector.suggestions)},onAutocompleteComplete:function(){this.get(l.atts.open)?this.trigger(l.events.update):(this.set(l.atts.open,!0),this.trigger(l.events.open))},onAutocompleteClose:function(){this.set(l.atts.open,!1),this.trigger(l.events.close)},bindEvents:function(){this.get(l.atts.autocomplete)&&this.autocomplete.on(l.events.initialized,_.bind(this.onAutocompleteInitialized,this)).on(l.events.complete,_.bind(this.onAutocompleteComplete,this)).on(l.events.close,_.bind(this.onAutocompleteClose,this)),this.$input.on(l.events.input,_.bind(this.onInputChanged,this)).on(l.events.focus,_.bind(this.onInputFocus,this)).on(l.events.blur,_.bind(this.onInputBlur,this)).on(l.events.keypress,_.bind(this.onSubmit,this))},getAutocompleteSettings:function(){var a,b=n.autocomplete;return b.onPlaceChanged=_.bind(this.onAutocompletePlaceChanged,this),a=this.get(l.atts.defaultText),a&&""!==a&&b.exclude.push(a),b},onAutocompletePlaceChanged:function(a,b){j.getPlaceDetails(a.placeId),this.trigger(l.apiEvents.change,b,a)},set:function(a,b){return this.attributes[a]=b,this.attributes[a]},get:function(a){return this.attributes[a]},trigger:function(a,b){var c=void 0===b?this:b,d=a;if(void 0!==this.events[a])for(var e=0;e<this.events[a].length;e++)this.events[a][e](c,d)},onSubmit:function(a){var b;if(13===a.which||a.type===l.events.click)return b=this.$input.val(),""===b&&this.set("label",""),this.settings.window.HELIOS.state=this.settings.window.HELIOS.state||{},this.settings.window.HELIOS.state.dealerName&&b===this.settings.window.HELIOS.state.dealerName||(this.settings.window.HELIOS.state.dealer=null,this.settings.window.HELIOS.state.dealerName=null,this.trigger(l.apiEvents.submit,a)),!1},unbindEvents:function(){this.$geoButton.add(this.$input).off("."+k)},onInputChanged:function(){this.trigger(l.apiEvents.input)},onInputFocus:function(){this.$input.val()===this.get(l.atts.defaultText)&&(this.setLabel(""),this.set(l.atts.wasGeoText,!0))},onInputBlur:function(){this.$input.val("")}},f}),define("c_019_25_ApplicationConstants",[],function(){"use strict";return{ADDRESS_FIELDS:{SPECIAL_FIELDS:{ITEM_SEPARATOR:{EXPRESSION:"{{commaAndSpace}}",HTML:", ",ID:"commaAndSpace"},NEW_LINE:{EXPRESSION:"{{{nextLine}}}",HTML:"<br />",ID:"nextLine"}}},ANALYTICS:{SEARCH_TYPE:"dealer-form",DEALER_ACTION:"dealer-form"},CSS_CLASSES:{FORM_GROUP_ERROR:"error",INITIALIZED:"initialized"},EVENTS:{CLEAR_SELECTED_DEALER:"clearSelectedDealer",DISPLAY_SELECTED_DEALER_REQUIRED_MESSAGE:"displaySelectedDealerRequiredMessage",GEOLOCATE_USER:"geolocateUser",GEOLOCATION_ERROR:"geolocationError",GEOLOCATION_REQUEST:"geolocationRequest",GEOLOCATION_SYNC:"geolocationSync",GO_TO_PREVIOUS_APPLICATION_STATE:"goToPreviousApplicationState",LOCATION_NOT_FOUND:"locationNotFound",SELECTED_DEALER_SYNC:"selectedDealerSync",SET_APPLICATION_STATE:"setApplicationState",SET_SEARCH_LOCATION:"setSearchLocation",SET_SELECTED_DEALER:"setSelectedDealer",DEALER_SEARCH_SUBMIT:"dealerSearchSubmit",DEALER_SEARCH_COMPLETE:"dealerSearchComplete",DEALER_SEARCH_COMPLETE_ZERO_RESULTS:"dealerSearchCompleteZeroResults",DEALER_SEARCH_ERROR:"dealerSearchError",ANALYTICS_SEARCH:"analyticsSearch",ANALYTICS_DEALER_INTERACTION:"analyticsDealerInteraction",VEHICLE_SELECTION_CHANGED:"c_019_25:vehicleSelectionChanged",TEST_DRIVE_MODEL_CHANGED:"c_019_25:testDriveModelChanged",NO_TEST_DRIVE_MODEL_SELECTED:"c_019_25:noTestDriveModelSelected",NO_TEST_DRIVE_STOCK_FOUND:"c_019_25:noTestDriveStockFound",NO_TEST_DRIVE_STOCK_FOUND_AT_DEALER:"c_019_25:noTestDriveStockFoundAtDealer",TEST_DRIVE_MODEL_FOUND:"c_019_25:testDriveModelFound",TOGGLE_ERROR_VISIBILITY_PERSISTENCE:"c_019_25:toggleErrorVisibilityPersistence",LOCK_STATE:"c_019_25:lockState",TRIGGER_SEARCH:"c_019_25:triggerSearch",CHANGE_MODEL_SELECT:"changeModelSelect",STORAGE_SAVED:"storageSaved"},SEARCH_LOCATION_SOURCES:{GEO_LOCATION:"geoLocation",SMART_LOCATION:"smartLocation",TEST_DRIVE_STOCK_CHECK:"testDriveStockCheck",USER_SELECT:"userSelect"},SELECTED_DEALER_SOURCES:{SMART_LOCATION:"smartLocation",USER_SELECT:"userSelect"},SELECTORS:{FORM_GROUP:".form-group"},STATES:{DEALER_SELECTED:"dealerSelected",ERROR:"error",ERROR_WITH_DEALER_LIST:"errorWithDealerList",INITIALIZING:"initializing",SEARCH:"search",SEARCH_RESULTS:"searchResults",SEARCHING:"searching"}}}),define("c_019_25_ModelConstants",[],function(){"use strict";return{CONTENT:{ATTRIBUTES:{ADDRESS_FIELD_ORDER:"address",CANNOT_FIND_USER_LOCATION:"formLabels.cannotFindUserLocation",CHANGE_SELECTED_DEALER_CTA:"formLabels.changeMyDealer",DEALER_FILTER_GROUPS:"dealerFilterGroups",DEALER_ICON_KEYS:"dealerIconKeys",DEALER_ID_ELEMENT_NAME:"formDetails.dealerIdElementName",DEALER_NAME_ELEMENT_NAME:"formDetails.dealerNameElementName",MODEL_ID_ELEMENT_NAME:"formDetails.modelIdElementName",MODEL_NAME_ELEMENT_NAME:"formDetails.modelNameElementName",DEALER_SEARCH_RETURNED_ZERO_RESULTS:"formLabels.noResults",DEALER_SELECTED_TEXT:"formLabels.titleDealerSelected",DEALER_URL_FORMAT:"urls.details",IS_LOCATION_PREFILL_ENABLED:"formDetails.isLocationPreFillEnabled",IS_SEARCH_ON_STARTUP_ENABLED:"formDetails.isAutoSearchEnabled",IS_SELECTED_DEALER_MANDATORY:"formDetails.isSelectedDealerMandatory",IS_SHOW_ONLY_DEALERS_WHO_ACCEPT_LEADS_ENABLED:"formDetails.showOnlyDealersWhoAcceptLeads",LOCATION_NOT_FOUND_TEXT:"formLabels.locationNotFound",LOCATION_SEARCH_ELEMENT_ID:"locationSearchElementId",SERVICE_FILTER_TYPE:"serviceFilterType",CURRENT_LOCATION_TEXT:"formLabels.currentLocation",LOCATION_SEARCH_LABEL:"formLabels.titleNoDealerSelected",LOCATION_SEARCH_PLACEHOLDER:"formLabels.locationTextBoxPlaceholder",SEARCH_FOR_DEALERS_TEXT:"formLabels.searchForDealersCta",SELECTED_DEALER_IS_MANDATORY:"formLabels.selectedDealerIsMandatory",USE_CURRENT_LOCATION:"formLabels.useMyCurrentLocation",RESULT_LABEL_SINGLE:"formLabels.singleDealerClosestToYou",RESULT_LABEL_MULTIPLE:"formLabels.multipleDealersClosestToYou",SELECT_DEALER_CTA_LABEL:"formLabels.selectDealerCta",DISTANCE_UNIT:"formLabels.distanceUnit",DISTANCE_UNIT_LABEL:"formLabels.distanceUnitLabel",MAX_RESULT_COUNT:"formLabels.maxResultCount",IS_TEST_DRIVE_STOCK_CHECK_ENABLED:"formDetails.isTestDriveStockCheckEnabled",VEHICLE_SELECTOR_LABEL:"formLabels.vehicleSelectorLabel",VEHICLE_SELECTOR_DATA:"vehicleSelectorData",VEHICLE_SELECTOR_OPTION:"formLabels.vehicleSelectorOption",SELECT_DIFFERENT_VEHICLE:"formLabels.selectDifferentVehicleInstruction",SELECT_DIFFERENT_DEALER_OR_VEHICLE:"formLabels.selectDealerOrVehicleInstruction",SELECT_VEHICLE:"formLabels.selectVehicleInstruction",SELECT_LOCATION:"formLabels.selectLocationVehicleInstruction",SEARCH_FOR_DEALER_PHONE:"enableDealerNumber",ENABLE_MODEL_DEALER_MAPPING:"enableModelDealerMapping",DEALER_SERVICE_LABEL:"dealerServiceLabel"}},GENERIC:{EVENTS:{REQUEST:"request",SYNC:"sync",ERROR:"error"}},DEALER:{ATTRIBUTES:{ADDRESS:"address",DISTANCE:"distance",DEALER_ID:"dealerId",NAME:"name",TYPE:"type",CONTACT:"contact"},OPTIONS:{ADDRESS_FIELD_ORDER:"addressFieldOrder",DEALER_ID:"dealerId",DISTANCE_UNIT:"distanceUnit",URL_FORMAT:"urlFormat"}},DEALER_COLLECTION:{OPTIONS:{ADDRESS_FIELD_ORDER:"addressFieldOrder",DISTANCE_UNIT:"distanceUnit",IS_DEALER_ACCEPTS_LEADS_MANDATORY:"isDealerAcceptsLeadsMandatory",LAT:"lat",LNG:"lng",SERVICE_FILTERS:"serviceFilters",SERVICE_FILTER_TYPE:"serviceFilterType",SIZE:"size",TEST_DRIVE_MODEL:"testDriveModel"}}}}),define("c_019_25_ContentModel",["underscore","backbone","c_019_25_ModelConstants"],function(a,b,c){"use strict";var d=c.CONTENT.ATTRIBUTES;return b.Model.extend({get:function(c){var d=c.split(".");return a.reduce(d.slice(1),function(a,b){return a&&a[b]},b.Model.prototype.get.call(this,d[0]))},getAddressFieldOrder:function(){return this.get(d.ADDRESS_FIELD_ORDER)},getCurrentLocationText:function(){return this.get(d.CURRENT_LOCATION_TEXT)},getDealerFilterGroups:function(){return this.get(d.DEALER_FILTER_GROUPS)},getServiceFilterType:function(){return this.get(d.SERVICE_FILTER_TYPE)},getDealerIconKeys:function(){return this.get(d.DEALER_ICON_KEYS)||[]},getDealerIdElementName:function(){return this.get(d.DEALER_ID_ELEMENT_NAME)},getDealerNameElementName:function(){return this.get(d.DEALER_NAME_ELEMENT_NAME)},getModelIdElementName:function(){return this.get(d.MODEL_ID_ELEMENT_NAME)},getModelNameElementName:function(){return this.get(d.MODEL_NAME_ELEMENT_NAME)},getDealerUrlFormat:function(){return this.get(d.DEALER_URL_FORMAT)},getDistanceUnit:function(){return this.get(d.DISTANCE_UNIT)},getDistanceUnitLabel:function(){return this.get(d.DISTANCE_UNIT_LABEL)},getIsLocationPrefillEnabled:function(){return this.get(d.IS_LOCATION_PREFILL_ENABLED)},getIsSearchOnStartupEnabled:function(){return this.get(d.IS_SEARCH_ON_STARTUP_ENABLED)},getIsSelectedDealerMandatory:function(){return this.get(d.IS_SELECTED_DEALER_MANDATORY)},getIsShowOnlyDealersWhoAcceptLeadsEnabled:function(){return this.get(d.IS_SHOW_ONLY_DEALERS_WHO_ACCEPT_LEADS_ENABLED)},getLocationNotFoundText:function(){return this.get(d.LOCATION_NOT_FOUND_TEXT)},getLocationSearchElementId:function(){return this.get(d.LOCATION_SEARCH_ELEMENT_ID)},getLocationSearchLabel:function(){return this.get(d.LOCATION_SEARCH_LABEL)},getLocationSearchPlaceholder:function(){return this.get(d.LOCATION_SEARCH_PLACEHOLDER)},getMaxResultCount:function(){return this.get(d.MAX_RESULT_COUNT)},getResultLabelMultiple:function(){return this.get(d.RESULT_LABEL_MULTIPLE)},getResultLabelSingle:function(){return this.get(d.RESULT_LABEL_SINGLE)},getEnableModelDealerMapping:function(){return this.get(d.ENABLE_MODEL_DEALER_MAPPING)},getResultLabelDealerService:function(){return this.get(d.DEALER_SERVICE_LABEL)},getSearchForDealersText:function(){return this.get(d.SEARCH_FOR_DEALERS_TEXT)},getSelectDealerCtaLabel:function(){return this.get(d.SELECT_DEALER_CTA_LABEL)},getDealerListPhone:function(){return this.get(d.SEARCH_FOR_DEALER_PHONE)},getUseCurrentLocation:function(){return this.get(d.USE_CURRENT_LOCATION)},getIsTestDriveStockCheckEnabled:function(){return this.get(d.IS_TEST_DRIVE_STOCK_CHECK_ENABLED)},getVehicleSelectorData:function(){return this.get(d.VEHICLE_SELECTOR_DATA)},getVehicleSelectorLabel:function(){return this.get(d.VEHICLE_SELECTOR_LABEL)},getVehicleSelectorOption:function(){return this.get(d.VEHICLE_SELECTOR_OPTION)},getSelectDifferentVehicleInstruction:function(){return this.get(d.SELECT_DIFFERENT_VEHICLE)},getSelectDealerOrVehicleInstruction:function(){return this.get(d.SELECT_DIFFERENT_DEALER_OR_VEHICLE)},getSelectVehicleInstruction:function(){return this.get(d.SELECT_VEHICLE)},getSelectLocationInstruction:function(){return this.get(d.SELECT_LOCATION)}})}),define("c_019_25_CommonConstants",[],function(){"use strict";return{OPTIONS:{EVENT_AGGREGATOR:"eventAggregator",WINDOW:"window"}}}),define("c_019_25_ControllerConstants",["underscore","c_019_25_CommonConstants"],function(a,b){"use strict";return{DEALER_SEARCH:{OPTIONS:a.extend({ADDRESS_FIELD_ORDER:"addressFieldOrder",DISTANCE_UNIT:"distanceUnit",IS_DEALER_ACCEPTS_LEADS_MANDATORY:"isDealerAcceptsLeadsMandatory",IS_SEARCH_ON_STARTUP_ENABLED:"isSearchOnStartupEnabled",MAX_RESULT_COUNT:"maxResultCount",SERVICE_FILTERS:"serviceFilters",TEST_DRIVE_MODEL_ID:"testDriveModelId",IS_CONFIGURATOR:"isConfigurator",MAPPING_DATA:"mappingData",CONTENT:"content",SERVICE_FILTER_TYPE:"serviceFilterType"},b.OPTIONS)},GEOLOCATION:{OPTIONS:a.extend({},b.OPTIONS)},STARTUP:{OPTIONS:a.extend({DEALER_URL_FORMAT:"dealerUrlFormat",DEEP_LINK_DEALER_ID:"deepLinkDealerId",DEEP_LINK_SEARCH_LOCATION:"deepLinkSearchLocation",MARKET_COUNTRY_CODE:"marketCountryCode",SMART_LOCATION_CONTEXT:"smartLocationContext",HELIOS_OBJECT:"HELIOS",ADDRESS_FIELD_ORDER:"addressFieldOrder",IS_TEST_DRIVE_STOCK_CHECK_AVAILABLE:"isTestDriveStockCheckAvailable"},b.OPTIONS)},STATE:{OPTIONS:a.extend({DEALER_LIST_CONTROLLER:"dealerListController",ERROR_CONTROLLER:"errorController",LOADER_CONTROLLER:"loaderController",SEARCH_CONTROLLER:"searchController",SELECTED_DEALER_CONTROLLER:"selectedDealerController",VEHICLE_SELECTOR_CONTROLLER:"vehicleSelectorController"},b.OPTIONS)},ANALYTICS:{OPTIONS:a.extend({ANALYTICS_MANAGER:"analyticsManager",TRACKING_CODES:"trackingCodes",ANALYTICS_SETTINGS:"analyticsSettings"},b.OPTIONS),ZERO_RESULTS:0},TEST_DRIVE_STOCK_CHECK:{OPTIONS:a.extend({SMART_LOCATION_CONTEXT:"smartLocationContext",VEHICLE_DATA:"vehicleData"},b.OPTIONS)}}}),function(a,b){if("function"==typeof define&&define.amd)define("marionette",["backbone","underscore"],function(c,d){return a.Marionette=a.Mn=b(a,c,d)});else if("undefined"!=typeof exports){var c=require("backbone"),d=require("underscore");module.exports=b(a,c,d)}else a.Marionette=a.Mn=b(a,a.Backbone,a._)}(this,function(a,b,c){"use strict";!function(a,b){var c=a.ChildViewContainer;a.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;return this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength(),this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=a.cid;return a.model&&delete this._indexByModel[a.model.cid],b.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength(),this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(0,b),a.ChildViewContainer.VERSION="0.1.6",a.ChildViewContainer.noConflict=function(){return a.ChildViewContainer=c,this},a.ChildViewContainer}(b,c),function(a,b){var c=a.Wreqr,d=a.Wreqr={};a.Wreqr.VERSION="1.3.1",a.Wreqr.noConflict=function(){return a.Wreqr=c,this},d.Handlers=function(a,b){var c=function(a){this.options=a,this._wreqrHandlers={},b.isFunction(this.initialize)&&this.initialize(a)};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback),this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),c}(a,b),d.CommandStorage=function(){var c=function(a){this.options=a,this._commands={},b.isFunction(this.initialize)&&this.initialize(a)};return b.extend(c.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}}),c}(),d.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0],b=Array.prototype.slice.call(arguments,1),this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,c,d){var e=this.storage.getCommands(a);b.each(e.instances,function(a){c.apply(d,a)}),this.storage.clearCommands(a)},_initializeStorage:function(a){var c,d=a.storageType||this.storageType;c=b.isFunction(d)?new d:d,this.storage=c}})}(d),d.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.hasHandler(a)?this.getHandler(a).apply(this,b):void 0}})}(d),d.EventAggregator=function(a,b){var c=function(){};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events),c}(a,b),d.Channel=function(){var c=function(b){this.vent=new a.Wreqr.EventAggregator,this.reqres=new a.Wreqr.RequestResponse,this.commands=new a.Wreqr.Commands,this.channelName=b};return b.extend(c.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(a,b){return this._connect("vent",a,b),this},connectCommands:function(a,b){return this._connect("commands",a,b),this},connectRequests:function(a,b){return this._connect("reqres",a,b),this},_connect:function(a,c,d){if(c){d=d||this;var e="vent"===a?"on":"setHandler";b.each(c,function(c,f){this[a][e](f,b.bind(c,d))},this)}}}),c}(),d.radio=function(a){var c=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};b.extend(c.prototype,{channel:function(a){if(!a)throw new Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(b){var c=this._channels[b];return c||(c=new a.Channel(b),this._channels[b]=c),c},_proxyMethods:function(){b.each(["vent","commands","reqres"],function(a){b.each(d[a],function(b){this[a][b]=e(this,a,b)},this)},this)}});var d={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},e=function(a,b,c){return function(d){var e=a._getChannel(d)[b],f=Array.prototype.slice.call(arguments,1);return e[c].apply(e,f)}};return new c}(d),a.Wreqr}(b,c);var d=a.Marionette,e=a.Mn,f=b.Marionette={};f.VERSION="2.4.1",f.noConflict=function(){return a.Marionette=d,a.Mn=e,this},b.Marionette=f,f.Deferred=b.$.Deferred,f.extend=b.Model.extend,f.isNodeAttached=function(a){return b.$.contains(document.documentElement,a)},f.mergeOptions=function(a,b){a&&c.extend(this,c.pick(a,b))},f.getOption=function(a,b){return a&&b?a.options&&void 0!==a.options[b]?a.options[b]:a[b]:void 0},f.proxyGetOption=function(a){return f.getOption(this,a)},f._getValue=function(a,b,d){return c.isFunction(a)&&(a=d?a.apply(b,d):a.call(b)),a},f.normalizeMethods=function(a){return c.reduce(a,function(a,b,d){return c.isFunction(b)||(b=this[b]),b&&(a[d]=b),a},{},this)},f.normalizeUIString=function(a,b){return a.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(a){return b[a.slice(4)]})},f.normalizeUIKeys=function(a,b){return c.reduce(a,function(a,c,d){return a[f.normalizeUIString(d,b)]=c,a},{})},f.normalizeUIValues=function(a,b,d){return c.each(a,function(e,g){
c.isString(e)?a[g]=f.normalizeUIString(e,b):c.isObject(e)&&c.isArray(d)&&(c.extend(e,f.normalizeUIValues(c.pick(e,d),b)),c.each(d,function(a){var d=e[a];c.isString(d)&&(e[a]=f.normalizeUIString(d,b))}))}),a},f.actAsCollection=function(a,b){var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];c.each(d,function(d){a[d]=function(){var a=c.values(c.result(this,b)),e=[a].concat(c.toArray(arguments));return c[d].apply(c,e)}})};var g=f.deprecate=function(a,b){c.isObject(a)&&(a=a.prev+" is going to be removed in the future. Please use "+a.next+" instead."+(a.url?" See: "+a.url:"")),void 0!==b&&b||g._cache[a]||(g._warn("Deprecation warning: "+a),g._cache[a]=!0)};g._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},g._cache={},f._triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi;return function(d,e,f){var g=arguments.length<3;g&&(f=e,e=f[0]);var h,i="on"+e.replace(b,a),j=d[i];return c.isFunction(j)&&(h=j.apply(d,g?c.rest(f):f)),c.isFunction(d.trigger)&&(g+f.length>1?d.trigger.apply(d,g?f:[e].concat(c.drop(f,0))):d.trigger(e)),h}}(),f.triggerMethod=function(){return f._triggerMethod(this,arguments)},f.triggerMethodOn=function(a){return(c.isFunction(a.triggerMethod)?a.triggerMethod:f.triggerMethod).apply(a,c.rest(arguments))},f.MonitorDOMRefresh=function(a){function b(){a._isShown=!0,e()}function d(){a._isRendered=!0,e()}function e(){a._isShown&&a._isRendered&&f.isNodeAttached(a.el)&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}a.on({show:b,render:d})},function(a){function b(b,d,e,f){var g=f.split(/\s+/);c.each(g,function(c){var f=b[c];if(!f)throw new a.Error('Method "'+c+'" was configured as an event handler, but does not exist.');b.listenTo(d,e,f)})}function d(a,b,c,d){a.listenTo(b,c,d)}function e(a,b,d,e){var f=e.split(/\s+/);c.each(f,function(c){var e=a[c];a.stopListening(b,d,e)})}function f(a,b,c,d){a.stopListening(b,c,d)}function g(b,d,e,f,g){if(d&&e){if(!c.isObject(e))throw new a.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});e=a._getValue(e,b),c.each(e,function(a,e){c.isFunction(a)?f(b,d,e,a):g(b,d,e,a)})}}a.bindEntityEvents=function(a,c,e){g(a,c,e,d,b)},a.unbindEntityEvents=function(a,b,c){g(a,b,c,f,e)},a.proxyBindEntityEvents=function(b,c){return a.bindEntityEvents(this,b,c)},a.proxyUnbindEntityEvents=function(b,c){return a.unbindEntityEvents(this,b,c)}}(f);var h=["description","fileName","lineNumber","name","message","number"];return f.Error=f.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+f.VERSION+"/",constructor:function(a,b){c.isObject(a)?(b=a,a=b.message):b||(b={});var d=Error.call(this,a);c.extend(this,c.pick(d,h),c.pick(b,h)),this.captureStackTrace(),b.url&&(this.url=this.urlRoot+b.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,f.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),f.Error.extend=f.extend,f.Callbacks=function(){this._deferred=f.Deferred(),this._callbacks=[]},c.extend(f.Callbacks.prototype,{add:function(a,b){var d=c.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b}),d.then(function(c){b&&(c.context=b),a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=f.Deferred(),this._callbacks=[],c.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),f.Controller=function(a){this.options=a||{},c.isFunction(this.initialize)&&this.initialize(this.options)},f.Controller.extend=f.extend,c.extend(f.Controller.prototype,b.Events,{destroy:function(){return f._triggerMethod(this,"before:destroy",arguments),f._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:f.triggerMethod,mergeOptions:f.mergeOptions,getOption:f.proxyGetOption}),f.Object=function(a){this.options=c.extend({},c.result(this,"options"),a),this.initialize.apply(this,arguments)},f.Object.extend=f.extend,c.extend(f.Object.prototype,b.Events,{initialize:function(){},destroy:function(){return this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening(),this},triggerMethod:f.triggerMethod,mergeOptions:f.mergeOptions,getOption:f.proxyGetOption,bindEntityEvents:f.proxyBindEntityEvents,unbindEntityEvents:f.proxyUnbindEntityEvents}),f.Region=f.Object.extend({constructor:function(a){if(this.options=a||{},this.el=this.getOption("el"),this.el=this.el instanceof b.$?this.el[0]:this.el,!this.el)throw new f.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),f.Object.call(this,a)},show:function(a,b){if(this._ensureElement()){this._ensureViewIsIntact(a);var c=b||{},d=a!==this.currentView,e=!!c.preventDestroy,g=!!c.forceShow,h=!!this.currentView,i=d&&!e,j=d||g;if(h&&this.triggerMethod("before:swapOut",this.currentView,this,b),this.currentView&&delete this.currentView._parent,i?this.empty():h&&j&&this.currentView.off("destroy",this.empty,this),j){a.once("destroy",this.empty,this),a.render(),a._parent=this,h&&this.triggerMethod("before:swap",a,this,b),this.triggerMethod("before:show",a,this,b),f.triggerMethodOn(a,"before:show",a,this,b),h&&this.triggerMethod("swapOut",this.currentView,this,b);var k=f.isNodeAttached(this.el),l=[],m=c.triggerBeforeAttach||this.triggerBeforeAttach,n=c.triggerAttach||this.triggerAttach;return k&&m&&(l=this._displayedViews(a),this._triggerAttach(l,"before:")),this.attachHtml(a),this.currentView=a,k&&n&&(l=this._displayedViews(a),this._triggerAttach(l)),h&&this.triggerMethod("swap",a,this,b),this.triggerMethod("show",a,this,b),f.triggerMethodOn(a,"show",a,this,b),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(a,b){var d=(b||"")+"attach";c.each(a,function(a){f.triggerMethodOn(a,d,a,this)},this)},_displayedViews:function(a){return c.union([a],c.result(a,"_getNestedViews")||[])},_ensureElement:function(){if(c.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new f.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(a){if(!a)throw new f.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(a.isDestroyed)throw new f.Error({name:"ViewDestroyedError",message:'View (cid: "'+a.cid+'") has already been destroyed and cannot be used.'})},getEl:function(a){return b.$(a,f._getValue(this.options.parentEl,this))},attachHtml:function(a){this.$el.contents().detach(),this.el.appendChild(a.el)},empty:function(a){var b=this.currentView,c=f._getValue(a,"preventDestroy",this);return b?(b.off("destroy",this.empty,this),this.triggerMethod("before:empty",b),c||this._destroyView(),this.triggerMethod("empty",b),delete this.currentView,c&&this.$el.contents().detach(),this):void 0},_destroyView:function(){var a=this.currentView;a.destroy&&!a.isDestroyed?a.destroy():a.remove&&(a.remove(),a.isDestroyed=!0)},attachView:function(a){return this.currentView=a,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(a,b){if(c.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(c.isFunction(a))return this._buildRegionFromRegionClass(a);throw new f.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){var d=a.regionClass||b,e=c.omit(a,"selector","regionClass");return a.selector&&!e.el&&(e.el=a.selector),new d(e)},_buildRegionFromRegionClass:function(a){return new a}}),f.RegionManager=f.Controller.extend({constructor:function(a){this._regions={},this.length=0,f.Controller.call(this,a),this.addRegions(this.getOption("regions"))},addRegions:function(a,b){return a=f._getValue(a,this,arguments),c.reduce(a,function(a,d,e){return c.isString(d)&&(d={selector:d}),d.selector&&(d=c.defaults({},d,b)),a[e]=this.addRegion(e,d),a},{},this)},addRegion:function(a,b){var c;return c=b instanceof f.Region?b:f.Region.buildRegion(b,f.Region),this.triggerMethod("before:add:region",a,c),c._parent=this,this._store(a,c),this.triggerMethod("add:region",a,c),c},get:function(a){return this._regions[a]},getRegions:function(){return c.clone(this._regions)},removeRegion:function(a){var b=this._regions[a];return this._remove(a,b),b},removeRegions:function(){var a=this.getRegions();return c.each(this._regions,function(a,b){this._remove(b,a)},this),a},emptyRegions:function(){var a=this.getRegions();return c.invoke(a,"empty"),a},destroy:function(){return this.removeRegions(),f.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]||this.length++,this._regions[a]=b},_remove:function(a,b){this.triggerMethod("before:remove:region",a,b),b.empty(),b.stopListening(),delete b._parent,delete this._regions[a],this.length--,this.triggerMethod("remove:region",a,b)}}),f.actAsCollection(f.RegionManager.prototype,"_regions"),f.TemplateCache=function(a){this.templateId=a},c.extend(f.TemplateCache,{templateCaches:{},get:function(a,b){var c=this.templateCaches[a];return c||(c=new f.TemplateCache(a),this.templateCaches[a]=c),c.load(b)},clear:function(){var a,b=c.toArray(arguments),d=b.length;if(d>0)for(a=0;d>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),c.extend(f.TemplateCache.prototype,{load:function(a){if(this.compiledTemplate)return this.compiledTemplate;var b=this.loadTemplate(this.templateId,a);return this.compiledTemplate=this.compileTemplate(b,a),this.compiledTemplate},loadTemplate:function(a){var c=b.$(a).html();if(!c||0===c.length)throw new f.Error({name:"NoTemplateError",message:'Could not find template: "'+a+'"'});return c},compileTemplate:function(a,b){return c.template(a,b)}}),f.Renderer={render:function(a,b){if(!a)throw new f.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(c.isFunction(a)?a:f.TemplateCache.get(a))(b)}},f.View=b.View.extend({isDestroyed:!1,constructor:function(a){c.bindAll(this,"render"),a=f._getValue(a,this),this.options=c.extend({},c.result(this,"options"),a),this._behaviors=f.Behaviors(this),b.View.call(this,this.options),f.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,c.rest(arguments))},mixinTemplateHelpers:function(a){a=a||{};var b=this.getOption("templateHelpers");return b=f._getValue(b,this),c.extend(a,b)},normalizeUIKeys:function(a){var b=c.result(this,"_uiBindings");return f.normalizeUIKeys(a,b||c.result(this,"ui"))},normalizeUIValues:function(a,b){var d=c.result(this,"ui"),e=c.result(this,"_uiBindings");return f.normalizeUIValues(a,e||d,b)},configureTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(c.result(this,"triggers"));return c.reduce(a,function(a,b,c){return a[c]=this._buildViewTrigger(b),a},{},this)}},delegateEvents:function(a){return this._delegateDOMEvents(a),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),c.each(this._behaviors,function(a){a.bindEntityEvents(this.model,a.getOption("modelEvents")),a.bindEntityEvents(this.collection,a.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(a){var d=f._getValue(a||this.events,this);d=this.normalizeUIKeys(d),c.isUndefined(a)&&(this.events=d);var e={},g=c.result(this,"behaviorEvents")||{},h=this.configureTriggers(),i=c.result(this,"behaviorTriggers")||{};c.extend(e,g,d,h,i),b.View.prototype.delegateEvents.call(this,e)},undelegateEvents:function(){return b.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),c.each(this._behaviors,function(a){a.unbindEntityEvents(this.model,a.getOption("modelEvents")),a.unbindEntityEvents(this.collection,a.getOption("collectionEvents"))},this),this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new f.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return this;var a=c.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(a)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(a)),this.unbindUIElements(),this.isRendered=!1,this.remove(),c.invoke(this._behaviors,"destroy",a),this},bindUIElements:function(){this._bindUIElements(),c.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={},c.each(a,function(a,b){this.ui[b]=this.$(a)},this)}},unbindUIElements:function(){this._unbindUIElements(),c.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(a){var b=c.isObject(a),d=c.defaults({},b?a:{},{preventDefault:!0,stopPropagation:!0}),e=b?d.event:a;return function(a){a&&(a.preventDefault&&d.preventDefault&&a.preventDefault(),a.stopPropagation&&d.stopPropagation&&a.stopPropagation());var b={view:this,model:this.model,collection:this.collection};this.triggerMethod(e,b)}},setElement:function(){var a=b.View.prototype.setElement.apply(this,arguments);return c.invoke(this._behaviors,"proxyViewProperties",this),a},triggerMethod:function(){var a=f._triggerMethod(this,arguments);return this._triggerEventOnBehaviors(arguments),this._triggerEventOnParentLayout(arguments[0],c.rest(arguments)),a},_triggerEventOnBehaviors:function(a){for(var b=f._triggerMethod,c=this._behaviors,d=0,e=c&&c.length;e>d;d++)b(c[d],a)},_triggerEventOnParentLayout:function(a,b){var d=this._parentLayoutView();if(d){var e=f.getOption(d,"childViewEventPrefix"),g=e+":"+a;f._triggerMethod(d,[g,this].concat(b));var h=f.getOption(d,"childEvents"),i=d.normalizeMethods(h);i&&c.isFunction(i[a])&&i[a].apply(d,[this].concat(b))}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var a=this._getImmediateChildren();return a.length?c.reduce(a,function(a,b){return b._getNestedViews?a.concat(b._getNestedViews()):a},a):a},_getAncestors:function(){for(var a=[],b=this._parent;b;)a.push(b),b=b._parent;return a},_parentLayoutView:function(){var a=this._getAncestors();return c.find(a,function(a){return a instanceof f.LayoutView})},normalizeMethods:f.normalizeMethods,mergeOptions:f.mergeOptions,getOption:f.proxyGetOption,bindEntityEvents:f.proxyBindEntityEvents,unbindEntityEvents:f.proxyUnbindEntityEvents}),f.ItemView=f.View.extend({constructor:function(){f.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var a=[this.model||this.collection];return arguments.length&&a.push.apply(a,arguments),this.model?this.serializeModel.apply(this,a):{items:this.serializeCollection.apply(this,a)}},serializeCollection:function(a){return a.toJSON.apply(a,c.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){if(!a)throw new f.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var b=this.mixinTemplateHelpers(this.serializeData()),c=f.Renderer.render(a,b,this);return this.attachElContent(c),this}},attachElContent:function(a){return this.$el.html(a),this}}),f.CollectionView=f.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(){this.once("render",this._initialEvents),this._initChildViewStorage(),f.View.apply(this,arguments),this.on("show",this._onShowCalled),this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&c.each(this._bufferedChildren,c.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(c.each(this._bufferedChildren,c.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(a,b){f.triggerMethodOn(b,a)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a,b,d){var e;if(e=void 0!==d.at?d.at:c.indexOf(this._filteredSortedModels(),a),this._shouldAddChild(a,e)){this.destroyEmptyView();var f=this.getChildView(a);this.addChild(a,f,e)}},_onCollectionRemove:function(a){var b=this.children.findByModel(a);this.removeChildView(b),this.checkEmpty()},_onShowCalled:function(){this.children.each(c.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.isRendered=!0,this.triggerMethod("render",this),this},reorder:function(){var a=this.children,b=this._filteredSortedModels();if(c.find(b,function(b){return!a.findByModel(b)}))this.render();else{var d=c.map(b,function(b){return a.findByModel(b).el});this.triggerMethod("before:reorder"),this._appendReorderedChildren(d),this.triggerMethod("reorder")}},resortView:function(){f.getOption(this,"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var a=this._filteredSortedModels();c.find(a,function(a,b){var c=this.children.findByModel(a);return!c||c._index!==b},this)&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(a){this.$el.append(a)},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.showEmptyView())},showCollection:function(){var a,b=this._filteredSortedModels();c.each(b,function(b,c){a=this.getChildView(b),this.addChild(b,a,c)},this)},_filteredSortedModels:function(){var a,b=this.getViewComparator();return a=b?c.isString(b)||1===b.length?this.collection.sortBy(b,this):c.clone(this.collection.models).sort(c.bind(b,this)):this.collection.models,this.getOption("filter")&&(a=c.filter(a,function(a,b){return this._shouldAddChild(a,b)},this)),a},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var c=new b.Model;this.addEmptyView(c,a),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,b){var d=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");c.isFunction(d)&&(d=d.call(this,a,this._emptyViewIndex));var e=this.buildChildView(a,b,d);e._parent=this,this.proxyChildEvents(e),this._isShown&&f.triggerMethodOn(e,"before:show"),this.children.add(e),this.renderChildView(e,this._emptyViewIndex),this._isShown&&f.triggerMethodOn(e,"show")},getChildView:function(){var a=this.getOption("childView");if(!a)throw new f.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return a},addChild:function(a,b,c){var d=this.getOption("childViewOptions");d=f._getValue(d,this,[a,c]);var e=this.buildChildView(a,b,d);return this._updateIndices(e,!0,c),this._addChildView(e,c),e._parent=this,e},_updateIndices:function(a,b,c){this.getOption("sort")&&(b&&(a._index=c),this.children.each(function(c){c._index>=a._index&&(c._index+=b?1:-1)}))},_addChildView:function(a,b){this.proxyChildEvents(a),this.triggerMethod("before:add:child",a),this._isShown&&!this.isBuffering&&f.triggerMethodOn(a,"before:show"),this.children.add(a),this.renderChildView(a,b),this._isShown&&!this.isBuffering&&f.triggerMethodOn(a,"show"),this.triggerMethod("add:child",a)},renderChildView:function(a,b){return a.render(),this.attachHtml(this,a,b),a},buildChildView:function(a,b,d){return new b(c.extend({model:a},d))},removeChildView:function(a){return a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),delete a._parent,this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1)),a},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a){a.$el.append(this._createBuffer(a))},_createBuffer:function(a){var b=document.createDocumentFragment();return c.each(a._bufferedChildren,function(a){b.appendChild(a.el)}),b},attachHtml:function(a,b,c){a.isBuffering?a._bufferedChildren.splice(c,0,b):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;return this.getOption("sort")&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1})),!!c&&(c.$el.before(a.el),!0)},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new b.ChildViewContainer},destroy:function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),f.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){var a=this.children.map(c.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),a},_shouldAddChild:function(a,b){var d=this.getOption("filter");return!c.isFunction(d)||d.call(this,a,b,this.collection)},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var d=c.toArray(arguments),e=d[0],f=this.normalizeMethods(c.result(this,"childEvents"));d[0]=b+":"+e,d.splice(1,0,a),void 0!==f&&c.isFunction(f[e])&&f[e].apply(this,d.slice(1)),this.triggerMethod.apply(this,d)})},_getImmediateChildren:function(){return c.values(this.children._views)},getViewComparator:function(){return this.getOption("viewComparator")}}),f.CompositeView=f.CollectionView.extend({constructor:function(){f.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(){return this.getOption("childView")||this.constructor},serializeData:function(){var a={};return this.model&&(a=c.partial(this.serializeModel,this.model).apply(this,arguments)),a},render:function(){return this._ensureViewIsIntact(),this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this._isRendering=!1,this.isRendered=!0,this.triggerMethod("render",this),this},_renderChildren:function(){(this.isRendered||this._isRendering)&&f.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a={};a=this.serializeData(),a=this.mixinTemplateHelpers(a),this.triggerMethod("before:render:template");var b=this.getTemplate(),c=f.Renderer.render(b,a,this);this.attachElContent(c),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(a){return this.$el.html(a),this},attachBuffer:function(a){this.getChildViewContainer(a).append(this._createBuffer(a))},_insertAfter:function(a){this.getChildViewContainer(this,a).append(a.el)},_appendReorderedChildren:function(a){this.getChildViewContainer(this).append(a)},getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b,c=f.getOption(a,"childViewContainer");if(c){var d=f._getValue(c,a);if(b="@"===d.charAt(0)&&a.ui?a.ui[d.substr(4)]:a.$(d),b.length<=0)throw new f.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+a.childViewContainer})}else b=a.$el;return a.$childViewContainer=b,b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),f.LayoutView=f.ItemView.extend({regionClass:f.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:function(a){a=a||{},this._firstRender=!0,this._initializeRegions(a),f.ItemView.call(this,a)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),f.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(!0===this.getOption("destroyImmediate")&&this.$el.remove(),this.regionManager.destroy(),f.ItemView.prototype.destroy.apply(this,arguments))},showChildView:function(a,b){return this.getRegion(a).show(b)},getChildView:function(a){return this.getRegion(a).currentView},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=c.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(a){var b={regionClass:this.getOption("regionClass"),parentEl:c.partial(c.result,this,"el")};return this.regionManager.addRegions(a,b)},_initializeRegions:function(a){var b;this._initRegionManager(),b=f._getValue(this.regions,this,[a])||{};var d=this.getOption.call(a,"regions");d=f._getValue(d,this,[a]),c.extend(b,d),b=this.normalizeUIValues(b,["selector","el"]),this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new f.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)}),this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b,this.triggerMethod("add:region",a,b)}),this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)}),this.listenTo(this.regionManager,"remove:region",function(a,b){delete this[a],this.triggerMethod("remove:region",a,b)})},_getImmediateChildren:function(){return c.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),f.Behavior=f.Object.extend({constructor:function(a,b){this.view=b,this.defaults=c.result(this,"defaults")||{},this.options=c.extend({},this.defaults,a),this.ui=c.extend({},c.result(b,"ui"),c.result(this,"ui")),f.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this},proxyViewProperties:function(a){this.$el=a.$el,this.el=a.el}}),f.Behaviors=function(a,b){function c(a,d){return b.isObject(a.behaviors)?(d=c.parseBehaviors(a,d||b.result(a,"behaviors")),c.wrap(a,d,b.keys(g)),d):{}}function d(a,b){this._view=a,this._behaviors=b,this._triggers={}}function e(a){return a._uiBindings||a.ui}var f=/^(\S+)\s*(.*)$/,g={behaviorTriggers:function(a,b){return new d(this,b).buildBehaviorTriggers()},behaviorEvents:function(c,d){var g={};return b.each(d,function(c,d){var h={},i=b.clone(b.result(c,"events"))||{};i=a.normalizeUIKeys(i,e(c));var j=0;b.each(i,function(a,e){var g=e.match(f),i=g[1]+"."+[this.cid,d,j++," "].join(""),k=g[2],l=i+k,m=b.isFunction(a)?a:c[a];h[l]=b.bind(m,c)},this),g=b.extend(g,h)},this),g}};return b.extend(c,{behaviorsLookup:function(){throw new a.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(b,d){return b.behaviorClass?b.behaviorClass:a._getValue(c.behaviorsLookup,this,[b,d])[d]},parseBehaviors:function(a,d){return b.chain(d).map(function(d,e){var f=c.getBehaviorClass(d,e),g=new f(d,a);return[g].concat(c.parseBehaviors(a,b.result(g,"behaviors")))}).flatten().value()},wrap:function(a,c,d){b.each(d,function(d){a[d]=b.partial(g[d],a[d],c)})}}),b.extend(d.prototype,{buildBehaviorTriggers:function(){return b.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(c,d){var f=b.clone(b.result(c,"triggers"))||{};f=a.normalizeUIKeys(f,e(c)),b.each(f,b.bind(this._setHandlerForBehavior,this,c,d))},_setHandlerForBehavior:function(a,b,c,d){var e=d.replace(/^\S+/,function(a){return a+".behaviortriggers"+b});this._triggers[e]=this._view._buildViewTrigger(c)}}),c}(f,c),f.AppRouter=b.Router.extend({constructor:function(a){this.options=a||{},b.Router.apply(this,arguments);var c=this.getOption("appRoutes"),d=this._getController();this.processAppRoutes(d,c),this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){if(c.isFunction(this.onRoute)){var d=c.invert(this.getOption("appRoutes"))[a];this.onRoute(a,d,b)}},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(a,b,d){var e=a[d];if(!e)throw new f.Error('Method "'+d+'" was not found on the controller');this.route(b,d,c.bind(e,a))},mergeOptions:f.mergeOptions,getOption:f.proxyGetOption,triggerMethod:f.triggerMethod,bindEntityEvents:f.proxyBindEntityEvents,unbindEntityEvents:f.proxyUnbindEntityEvents}),f.Application=f.Object.extend({constructor:function(a){this._initializeRegions(a),this._initCallbacks=new f.Callbacks,this.submodules={},c.extend(this,a),this._initChannel(),f.Object.call(this,a)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("before:start",a),this._initCallbacks.run(a,this),this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var d=f.Module.getClass(b),e=c.toArray(arguments);return e.unshift(this),d.create.apply(d,e)},getRegionManager:function(){return new f.RegionManager},_initializeRegions:function(a){var b=c.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var d=f.getOption(a,"regions");return c.isFunction(d)&&(d=d.call(this,a)),c.extend(b,d),this.addRegions(b),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,
this.listenTo(this._regionManager,"before:add:region",function(){f._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b,f._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){f._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(a){delete this[a],f._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=c.result(this,"channelName")||"global",this.channel=c.result(this,"channel")||b.Wreqr.radio.channel(this.channelName),this.vent=c.result(this,"vent")||this.channel.vent,this.commands=c.result(this,"commands")||this.channel.commands,this.reqres=c.result(this,"reqres")||this.channel.reqres}}),f.Module=function(a,b,d){this.moduleName=a,this.options=c.extend({},this.options,d),this.initialize=d.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=b,c.isFunction(this.initialize)&&this.initialize(a,b,this.options)},f.Module.extend=f.extend,c.extend(f.Module.prototype,b.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),c.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var e=c.flatten([this,this.app,b,f,b.$,c,d]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new f.Callbacks,this._finalizerCallbacks=new f.Callbacks},triggerMethod:f.triggerMethod}),c.extend(f.Module,{create:function(a,b,d){var e=a,f=c.drop(arguments,3);b=b.split(".");var g=b.length,h=[];return h[g-1]=d,c.each(b,function(b,c){var g=e;e=this._getModule(g,b,a,d),this._addModuleDefinition(g,e,h[c],f)},this),e},_getModule:function(a,b,d,e){var f=c.extend({},e),g=this.getClass(e),h=a[b];return h||(h=new g(b,d,f),a[b]=h,a.submodules[b]=h),h},getClass:function(a){var b=f.Module;return a?a.prototype instanceof b?a:a.moduleClass||b:b},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c),f=this._getStartWithParent(c,b);e&&b.addDefinition(e,d),this._addStartWithParent(a,b,f)},_getStartWithParent:function(a,b){var d;return c.isFunction(a)&&a.prototype instanceof f.Module?(d=b.constructor.prototype.startWithParent,!!c.isUndefined(d)||d):!c.isObject(a)||(d=a.startWithParent,!!c.isUndefined(d)||d)},_getDefine:function(a){return!c.isFunction(a)||a.prototype instanceof f.Module?c.isObject(a)?a.define:null:a},_addStartWithParent:function(a,b,c){b.startWithParent=b.startWithParent&&c,b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),f}),define("c_019_25_ModuleConstants",["underscore","c_019_25_CommonConstants"],function(a,b){"use strict";return{GENERIC_CSS_CLASSES:{HIDDEN:"hidden",DEALER_TYPE_PREFIX:"dealer-type-"},ARIA_TAGS:{ARIA_HIDDEN:"aria-hidden"},BASE_CONTROLLER:{OPTIONS:a.extend({CONTENT:"content",REGION:"region"},b.OPTIONS)},DEALER_LIST:{CONTROLLER_OPTIONS:{DEALER_TYPE_ICON_SETTINGS:"dealerTypeIconSettings",SELECTED_DEALER_CONTROLLER:"selectedDealerController",IS_CONFIGURATOR:"isConfigurator",MAPPING_DATA:"mappingData",CONTENT:"content"},SELECTORS:{LIST_CONTAINER:".dealers",SELECT_DEALER_BUTTON:".select-dealer-cta",SELECT_DEALER_CONTAINER:".select-dealer-container",TITLE:".title",DEALER_SERVICE_LABEL:".dealer-service-label",WARNING_MESSAGE:".warning-message",BODY:"body"},ITEM_VIEW_OPTIONS:{DISTANCE_UNIT_TEXT:"distanceUnitText",EVENT_AGGREGATOR:"eventAggregator",SELECT_DEALER_CTA_TEXT:"selectDealerCtaText",ENABLE_DEALER_NUMBER:"enableDealerNumber"},VIEW:{CSS_CLASSES:{HAS_LEGEND:"has-legend"}},VIEW_ITEM_MODEL:{ATTRIBUTES:{ADDRESS:"address",UNFORMATTED_ADDRESS:"unformattedAddress",DEALER_ID:"dealerId",DEALER_TYPE_CSS_CLASS:"dealerTypeCssClass",DEALER_TYPE_ICON_IMG_URL:"dealerTypeIconImgUrl",DISTANCE:"distance",FORMATTED_DISTANCE:"formattedDistance",NAME:"name",PHONE:"phone",PHONE_NO_SPACE:"phoneNoSpace",SHOW_PHONE:"showPhone",TYPE:"type"}},VIEW_MODEL:{ATTRIBUTES:{IS_LEGEND_VISIBLE:"isLegendVisible",LEGEND_ITEMS:"legendItems",TITLE:"title",ENABLE_MODEL_DEALER_MAPPING:"enableModelDealerMapping",DEALER_SERVICE_LABEL:"dealerServiceLabel"}},EVENTS:{DEALERS_PHONE_UPDATE:"helios.dealer.update"}},ERROR:{SELECTORS:{ERROR_MESSAGE:".error-message"},VIEW_MODEL:{ATTRIBUTES:{ERROR_MESSAGE:"errorMessage"}}},MAIN:{CONTROLLER_EVENTS:{DEALER_SELECTED_BY_USER:"dealerSelectedByUser"},CONTROLLER_OPTIONS:a.extend({CONTENT:"content",DEEP_LINK_DEALER_FILTER_REQUEST_PARAM_VALUES:"deepLinkDealerFilterRequestParamValues",DEEP_LINK_DEALER_ID:"deepLinkDealerId",DEEP_LINK_LDID:"deepLinkLdid",DEEP_LINK_SEARCH_LOCATION:"deepLinkSearchLocation",HELIOS_OBJECT:"heliosObject",MAIN_VIEW:"mainView",SMART_LOCATION_CONTEXT:"smartLocationContext",ANALYTICS_MANAGER:"analyticsManager",IS_CONFIGURATOR:"isConfigurator",MAPPING_DATA:"mappingData"},b.OPTIONS),REGIONS:{DEALER_LIST:"dealerList",ERROR:"error",LOADER:"loader",SEARCH:"search",SELECTED_DEALER:"selectedDealer",VEHICLE_SELECTOR:"vehicleSelector"},SELECTORS:{DEALER_LIST:".dealer-list",ERROR:".error",LOADER:".loader",SEARCH:".search",SELECTED_DEALER:".selected-dealer",VEHICLE_SELECTOR:".vehicle-selector "},VIEW:{OPTIONS:a.extend({},b.OPTIONS),SELECTORS:{DEALER_ID_INPUT:".dealer-id",DEALER_NAME_INPUT:".dealer-name",MODEL_ID_INPUT:".model-id",MODEL_NAME_INPUT:".model-name",DEALER_LOCATOR_MAIN:".dealer-locator-main",SELECT_LOCATION_INSTRUCTION:".select-location-instruction"}},VIEW_MODEL:{ATTRIBUTES:{DEALER_ID:"dealerId",DEALER_ID_ELEMENT_NAME:"dealerIdElementName",DEALER_NAME:"dealerName",DEALER_NAME_ELEMENT_NAME:"dealerNameElementName",MODEL_ID:"modelId",MODEL_ID_ELEMENT_NAME:"modelIdElementName",MODEL_NAME:"modelName",MODEL_NAME_ELEMENT_NAME:"modelNameElementName",IS_DEALER_LOCATOR_VISIBLE:"isDealerLocatorMainVisible",IS_SELECTED_DEALER_MANDATORY:"isSelectedDealerMandatory",SELECT_LOCATION_INSTRUCTION:"selectLocationInstruction",IS_SELECT_LOCATION_INSTRUCTION_VISIBLE:"isSelectLocationInstructionVisible"}}},SEARCH:{CONTROLLER_OPTIONS:{HELIOS_OBJECT:"heliosObject"},SELECTORS:{ENTER_LOCATION_LABEL:"label",LOCATION_TEXT_BOX:'input[type="text"]',SEARCH_FOR_DEALERS_BUTTON:".search-for-dealers-button",USE_CURRENT_LOCATION_BUTTON:".use-current-location-button",FIRST_RESULT_ITEM:".first-result-item"},DATA_ATTRIBUTES:{GET_ADDRESS_NAME:"address-name"},AUTOCOMPLETE_PROPS:{SELECTORS:{template:"#new-autocomplete-ctx",inputElement:".c_019-25 .location-input",confirmLocationCta:".confirm-location-cta",spanAutocomplete:".c_019-25 .autocomplete-suggestions",resultItem:".pac-item"},EVENTS:{getPostalCodeByAddressName:"getPostalCodeByAddressName",getPostalCodeByCoordinates:"getPostalCodeCoordinates"}},VIEW_MODEL:{ATTRIBUTES:{ENTER_LOCATION_TEXT:"enterLocationText",LOCATION_SEARCH_ELEMENT_ID:"locationSearchElementId",LOCATION_SEARCH_ELEMENT_VALUE:"locationSearchElementValue",PLACEHOLDER_TEXT:"placeholderText",SEARCH_FOR_DEALERS_TEXT:"searchForDealersText",USE_CURRENT_LOCATION_TEXT:"useCurrentLocationText",USER_SEARCH_TERM:"userSearchTerm",HELIOS_LOCATION:"heliosLocation"}},VIEW:{OPTIONS:a.extend({COUNTRY_CODE:"countryCode",HELIOS_OBJECT:"heliosObject",AUTOCOMPLETE:"autocomplete"},b.OPTIONS)}},SELECTED_DEALER:{CONTROLLER:{OPTIONS:{ADDRESS_FIELD_ORDER:"addressFieldOrder",DEALER_TYPE_ICON_SETTINGS:"dealerTypeIconSettings"}},EVENTS:{CHANGE_SELECTED_DEALER_CLICK:"changeSelectedDealerClick"},SELECTORS:{ADDRESS:".address",CHANGE_SELECTED_DEALER_BUTTON:".change-selected-dealer",DISTANCE:".distance",DISTANCE_NUMBER:".distance-number",NAME:".name",TITLE:".title",ICON_IMG:".icon-img",DETAILS:".details",DEALER_LIST_PHONE_LINK:".dealer-list-phone-link"},VIEW_MODEL:{ATTRIBUTES:{ADDRESS:"address",CHANGE_SELECTED_DEALER_CTA:"changeSelectedDealerCta",DISTANCE:"distance",DISTANCE_UNIT:"distanceUnit",IS_CHANGE_DEALER_BUTTON_VISIBLE:"isChangeDealerButtonVisible",NAME:"name",TITLE:"title",DEALER_TYPE_CSS_CLASS:"dealerTypeCssClass",DEALER_TYPE_ICON_IMG_URL:"dealerTypeIconImgUrl",PHONE:"phone",ENABLE_DEALER_NUMBER:"enableDealerNumber",ENABLE_MODEL_DEALER_MAPPING:"enableModelDealerMapping",DEALER_SERVICE_LABEL:"dealerServiceLabel"}},VIEW:{OPTIONS:a.extend({},b.OPTIONS)}},VEHICLE_SELECTOR:{CONTROLLER:{OPTIONS:{ACTIVE_MODEL_ID:"activeModelId"}},VIEW_MODEL:{ATTRIBUTES:{LABEL:"label",VEHICLE_DATA:"vehicleData",PRE_SELECTED_MODEL_ID:"preSelectedModelId",SELECT_VEHICLE_INSTRUCTION:"selectVehicleInstruction",SELECT_DIFFERENT_VEHICLE_INSTRUCTION:"selectDifferentVehicleInstruction",IS_SELECT_DIFFERENT_VEHICLE_INSTRUCTION_VISIBLE:"isSelectDifferentVehicleInstructionVisible",DEALER_ID:"dealerId"}},OPTIONS:{EVENT_AGGREGATOR:"eventAggregator"},SELECTORS:{DATA_TEST_DRIVE_MODEL_ID:"data-test-drive-model-id",DATA_MODEL_ID:"data-model-id",VEHICLE_SELECTION_LIST:".vehicle_selection_list",SELECT_VEHICLE_INSTRUCTION:".select-vehicle-instruction",SELECT_DIFFERENT_VEHICLE_INSTRUCTION:".select-different-vehicle-instruction",SELECTED:":selected"},PROPERTIES:{SELECTED:"selected"}}}}),define("c_019_25_AnalyticsController",["c_019_25_ApplicationConstants","c_019_25_ControllerConstants","marionette","c_019_25_ModelConstants","c_019_25_ModuleConstants"],function(a,b,c,d,e){"use strict";var f=a.EVENTS,g=b.ANALYTICS.OPTIONS;return c.Object.extend({initialize:function(){this._bindEvents()},_bindEvents:function(){this._getEventAggregator().on(f.ANALYTICS_SEARCH,this._onSearch,this).on(f.ANALYTICS_DEALER_INTERACTION,this._onDealerInteraction,this).on(f.DEALER_SEARCH_COMPLETE,function(a){this._onSearchComplete(a,this._generalSearchData)},this).on(f.DEALER_SEARCH_COMPLETE_ZERO_RESULTS,function(){this._onSearchCompleteZeroResults(this._generalSearchData)},this).on(f.DEALER_SEARCH_ERROR,function(){this._onSearchCompleteZeroResults(this._generalSearchData)},this)},_getEventAggregator:function(){return this.options[g.EVENT_AGGREGATOR]},_getTrackingCodes:function(){return this.options[g.TRACKING_CODES]},_getAnalyticsManager:function(){return this.options[g.ANALYTICS_MANAGER]},_getAnalyticsSettings:function(){return this.options[g.ANALYTICS_SETTINGS]},_onSearch:function(a,b,c){this._generalSearchData=this._getGeneralSearchData(a,b,c)},_getGeneralSearchData:function(b,c,d){var e=this._getTrackingCodes(),f=e.trackingVars.search,g=f.searchTermType,h={};switch(h[f.componentId]=e.componentIds.c19_25_Dealer_Locator,h[f.searchType]=a.ANALYTICS.SEARCH_TYPE,h[f.action]=e.eventTypes.search,b){case g.userSearch:h[f.searchTerm]=d+"|"+c.location.address;break;case g.geolocation:h[f.searchTerm]=g.geolocation+"|"+c.location.address}return h},_onSearchComplete:function(a,b){var c=this._getTrackingCodes(),d=c.trackingVars.search;b&&(b[d.searchResults]=a.length,this._getAnalyticsManager().tag(c.eventTypes.search,b))},_onSearchCompleteZeroResults:function(a){var c=this._getTrackingCodes(),d=c.trackingVars.search;a&&(a[d.searchResults]=b.ANALYTICS.ZERO_RESULTS,this._getAnalyticsManager().tag(c.eventTypes.search,a))},_onDealerInteraction:function(b,c){var f=this._getTrackingCodes(),g=e.DEALER_LIST.VIEW_ITEM_MODEL.ATTRIBUTES,h=f.trackingVars.dealerInteraction,i=c.get(g.UNFORMATTED_ADDRESS),j={};j[h.componentId]=b,j[h.dealerAction]=a.ANALYTICS.DEALER_ACTION,j[h.dealerId]=c.get(g.DEALER_ID),j[h.dealerName]=c.get(g.NAME),j[h.dealerAddress]=i.addressLine1+", "+i.city+", "+i.postalCode,this._getAnalyticsSettings().shouldTrackDealerType&&(j[h.dealerType]=c.get(d.DEALER.ATTRIBUTES.TYPE)),this._getAnalyticsManager().tag(f.eventTypes.dealerInteraction,j)}})}),define("c_019_25_ControllerBase",["backbone","marionette","c_019_25_ModuleConstants"],function(a,b,c){"use strict";return a.Marionette.Object.extend({getContentModel:function(){return this.options[c.BASE_CONTROLLER.OPTIONS.CONTENT]},getEventAggregator:function(){return this.options[c.BASE_CONTROLLER.OPTIONS.EVENT_AGGREGATOR]},getRegion:function(){return this.options[c.BASE_CONTROLLER.OPTIONS.REGION]},getWindow:function(){return this.options[c.BASE_CONTROLLER.OPTIONS.WINDOW]},hide:function(){return this.getRegion()&&this.getRegion().$el.hide(),this},show:function(){return this.getRegion()&&this.getRegion().$el.show(),this}})}),define("hbars!/components/c_019-25/scripts/app/modules/dealerList/html/dealerListItemTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n        \t<div>\n        \t\t<img src="',(e=c.dealerTypeIconImgUrl)?d=e.call(a,{hash:{},data:b}):(e=a&&a.dealerTypeIconImgUrl,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'" />\n        \t</div>\n        '}function g(a,b){var d,e,f="";return f+='\n            <p class="dealer-list-phone"><a class="dealer-list-phone-link" href="tel:',(e=c.phoneNoSpace)?d=e.call(a,{hash:{},data:b}):(e=a&&a.phoneNoSpace,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'">',(e=c.phone)?d=e.call(a,{hash:{},data:b}):(e=a&&a.phone,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+"</a></p>\n        "}function h(a,b){var d,e,f="";return f+='\n        \t<p class="distance">(',(e=c.formattedDistance)?d=e.call(a,{hash:{},data:b}):(e=a&&a.formattedDistance,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+" ",(e=c.distanceUnitText)?d=e.call(a,{hash:{},data:b}):(e=a&&a.distanceUnitText,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+")</p>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this;return k+='<div class="select-dealer-container">\n    <div class="details">\n        <h3>',(j=c.name)?i=j.call(b,{hash:{},data:e}):(j=b&&b.name,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+"</h3>\n        ",i=c.if.call(b,b&&b.dealerTypeIconImgUrl,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+="\n        ",i=c.if.call(b,b&&b.showPhone,{hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e}),(i||0===i)&&(k+=i),k+='\n        <p class="address">',(j=c.address)?i=j.call(b,{hash:{},data:e}):(j=b&&b.address,i=typeof j===l?j.call(b,{hash:{},data:e}):j),(i||0===i)&&(k+=i),k+="</p>\n        ",i=c.if.call(b,b&&b.distance,{hash:{},inverse:n.noop,fn:n.program(5,h,e),data:e}),(i||0===i)&&(k+=i),k+='\n    </div>\n    <div class="select-dealer-cta-container">\n        <button class="select-dealer-cta" type="button">',(j=c.selectDealerCtaText)?i=j.call(b,{hash:{},data:e}):(j=b&&b.selectDealerCtaText,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+"</button>\n    </div>\n</div>\n"})}),define("c_019_25_DealerListItemView",["c_019_25_ApplicationConstants","marionette","c_019_25_ModelConstants","hbars!/components/c_019-25/scripts/app/modules/dealerList/html/dealerListItemTemplate","c_019_25_ModuleConstants","trackingCodes","keyCodeConstants"],function(a,b,c,d,e,f,g){"use strict";var h=a.EVENTS;return b.ItemView.extend({className:function(){return this.model&&this.model.getDealerTypeCssClass()},events:{"click @ui.selectDealerContainer":"_onSelectDealerClick","keydown @ui.selectDealerButton":"_onSelectDealerButtonKeyDown"},tagName:"li",template:d,templateHelpers:function(){var a={},b=e.DEALER_LIST.ITEM_VIEW_OPTIONS;return a[b.SELECT_DEALER_CTA_TEXT]=this.options[b.SELECT_DEALER_CTA_TEXT],a[b.DISTANCE_UNIT_TEXT]=this.options[b.DISTANCE_UNIT_TEXT],a[b.ENABLE_DEALER_NUMBER]=this.options[b.ENABLE_DEALER_NUMBER],a},ui:{selectDealerButton:e.DEALER_LIST.SELECTORS.SELECT_DEALER_BUTTON,selectDealerContainer:e.DEALER_LIST.SELECTORS.SELECT_DEALER_BUTTON},_getEventAggregator:function(){return this.options[e.DEALER_LIST.ITEM_VIEW_OPTIONS.EVENT_AGGREGATOR]},_onSelectDealerButtonKeyDown:function(a){a.which===g.ENTER&&this._onSelectDealerClick()},_onSelectDealerClick:function(){var b=this.model.getDistance(),c=this.model.getDealerId();this._getEventAggregator().trigger(h.ANALYTICS_DEALER_INTERACTION,f.componentIds.c19_25_Dealer_Locator,this.model).trigger(h.SET_SELECTED_DEALER,c,a.SELECTED_DEALER_SOURCES.USER_SELECT,b)},onDomRefresh:function(){_.defer(function(){$("body").trigger(e.DEALER_LIST.EVENTS.DEALERS_PHONE_UPDATE)})}})}),define("hbars!/components/c_019-25/scripts/app/modules/dealerList/html/dealerListTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n    <ul class="legend">\n        ',d=c.each.call(a,a&&a.legendItems,{hash:{},inverse:p.noop,fn:p.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </ul>\n"}function g(a,b){var d,e,f="";return f+="\n            <li ",d=c.if.call(a,a&&a.cssClass,{hash:{},inverse:p.noop,fn:p.program(3,h,b),data:b}),(d||0===d)&&(f+=d),f+=">\n                ",d=c.if.call(a,a&&a.imgUrl,{hash:{},inverse:p.noop,fn:p.program(5,i,b),data:b}),(d||0===d)&&(f+=d),f+="\n                ",(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"\n            </li>\n        "}function h(a,b){var d,e,f="";return f+='class="',(e=c.cssClass)?d=e.call(a,{hash:{},data:b}):(e=a&&a.cssClass,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'"'}function i(a,b){var d,e,f="";return f+='\n                    <img src="',(e=c.imgUrl)?d=e.call(a,{hash:{},data:b}):(e=a&&a.imgUrl,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'" />\n                '}function j(a,b){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m="",n="function",o=this.escapeExpression,p=this;return k=c.if.call(b,b&&b.isLegendVisible,{hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e}),(k||0===k)&&(m+=k),m+='\n<div class="warning-message ',k=c.unless.call(b,b&&b.dealerServiceLabel,{hash:{},inverse:p.noop,fn:p.program(7,j,e),data:e}),(k||0===k)&&(m+=k),m+='"><p class="dealer-service-label">',(l=c.dealerServiceLabel)?k=l.call(b,{hash:{},data:e}):(l=b&&b.dealerServiceLabel,k=typeof l===n?l.call(b,{hash:{},data:e}):l),m+=o(k)+'</p></div>\n<h2 class="title ',k=c.unless.call(b,b&&b.title,{hash:{},inverse:p.noop,fn:p.program(7,j,e),data:e}),(k||0===k)&&(m+=k),m+='">',(l=c.title)?k=l.call(b,{hash:{},data:e}):(l=b&&b.title,k=typeof l===n?l.call(b,{hash:{},data:e}):l),m+=o(k)+'</h2>\n<ol class="dealers"></ol>\n'})}),define("c_019_25_DealerListView",["c_019_25_DealerListItemView","marionette","c_019_25_ModuleConstants","hbars!/components/c_019-25/scripts/app/modules/dealerList/html/dealerListTemplate"],function(a,b,c,d){"use strict";var e=_.extend({},c.GENERIC_CSS_CLASSES,c.DEALER_LIST.VIEW.CSS_CLASSES);return b.CompositeView.extend({childView:a,childViewContainer:c.DEALER_LIST.SELECTORS.LIST_CONTAINER,className:function(){return this.model&&this.model.getIsLegendVisible()?c.DEALER_LIST.VIEW.CSS_CLASSES.HAS_LEGEND:void 0},modelEvents:function(){var a={};return a["change:"+c.DEALER_LIST.VIEW_MODEL.ATTRIBUTES.TITLE]="_onTitleChange",a["change:"+c.DEALER_LIST.VIEW_MODEL.ATTRIBUTES.DEALER_SERVICE_LABEL]="_onDealerServiceLabelChange",a},template:d,ui:{title:c.DEALER_LIST.SELECTORS.TITLE,dealerServiceLabel:c.DEALER_LIST.SELECTORS.DEALER_SERVICE_LABEL,warningMessage:c.DEALER_LIST.SELECTORS.WARNING_MESSAGE},_onTitleChange:function(a,b){this.ui.title.text(b||"").toggleClass(e.HIDDEN,!b)},_onDealerServiceLabelChange:function(a,b){this.ui.dealerServiceLabel.text(b||""),this.ui.warningMessage.toggleClass(e.HIDDEN,!b)},onDomRefresh:function(){_.defer(function(){$("body").trigger(c.DEALER_LIST.EVENTS.DEALERS_PHONE_UPDATE)})}})}),define("c_019_25_DealerListViewItemModel",["backbone","c_019_25_ModuleConstants"],function(a,b){"use strict";var c=b.DEALER_LIST.VIEW_ITEM_MODEL.ATTRIBUTES;return a.Model.extend({getDealerId:function(){return this.get(c.DEALER_ID)},getDealerTypeCssClass:function(){return this.get(c.DEALER_TYPE_CSS_CLASS)},getDistance:function(){return this.get(c.DISTANCE)}})}),define("c_019_25_DealerListViewCollection",["backbone","c_019_25_DealerListViewItemModel","c_019_25_ModuleConstants"],function(a,b,c){"use strict";return a.Collection.extend({comparator:c.DEALER_LIST.VIEW_ITEM_MODEL.ATTRIBUTES.DISTANCE,model:b})}),define("c_019_25_DealerListViewModel",["backbone","c_019_25_ModuleConstants"],function(a,b){"use strict";var c=b.DEALER_LIST.VIEW_MODEL.ATTRIBUTES;return a.Model.extend({getIsLegendVisible:function(){return this.get(c.IS_LEGEND_VISIBLE)}})}),define("c_019_25_DealerListController",["underscore","c_019_25_ControllerBase","c_019_25_DealerListView","c_019_25_DealerListViewCollection","c_019_25_DealerListViewModel","c_019_25_ApplicationConstants","c_019_25_ModelConstants","c_019_25_ModuleConstants","storageManager","storageManagerKeys"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=f.EVENTS,l=f.STATES,m=h.DEALER_LIST.CONTROLLER_OPTIONS;return b.extend({initialize:function(){var a=this.getRegion();a&&a.show(this._getView()),this._lookForConfigurator(),this._bindEvents()},_bindEvents:function(){var a=this.getEventAggregator(),b=this.getContentModel(),c=b&&b.getEnableModelDealerMapping();a&&(a.on(k.DEALER_SEARCH_COMPLETE,this._onDealerSearchComplete,this),a.on(k.SET_SELECTED_DEALER,this._onDealerSelected,this),c?a.off(k.STORAGE_SAVED).on(k.CHANGE_MODEL_SELECT,this._setDealerServiceMapping,this).on(k.STORAGE_SAVED,this._onStorageSaved,this):this._getModel().set(h.DEALER_LIST.VIEW_MODEL.ATTRIBUTES.DEALER_SERVICE_LABEL,""))},_onStorageSaved:function(){this._lookForConfigurator()},_lookForConfigurator:function(){var a,b,c=[];this.options.isConfigurator&&(a=i.loadItem(j.c_cfg.itemKey),a&&a.state&&a.state.modelCode&&(b=a.state.modelCode,this.options.mappingData&&(c=Object.keys(this.options.mappingData).filter(function(a){return a===b},this).map(function(a){return this.options.mappingData[a]},this))),a&&a.state&&a.state.model&&a.state.modelCode&&this._setDealerServiceMapping(c.length&&c[0],a.state.model))},_getCollection:function(){return this._collection||(this._collection=new d)},_getDealerTypeIconSettings:function(){return this.options[m.DEALER_TYPE_ICON_SETTINGS]},_getModel:function(){var b,c,d;return this._model||(b={},c=this.getContentModel(),d=h.DEALER_LIST.VIEW_MODEL.ATTRIBUTES,c&&(b[d.IS_LEGEND_VISIBLE]=c.getDealerIconKeys().length>1,b[d.LEGEND_ITEMS]=a.map(c.getDealerIconKeys(),function(b){return a.extend({label:b.legendLabel},this._getDealerTypeIconSettings()&&this._getDealerTypeIconSettings()[b.iconStyle])},this)),this._model=new e(b)),this._model},_getChildViewOptions:function(){var a=this.getContentModel(),b={};return b[h.DEALER_LIST.ITEM_VIEW_OPTIONS.EVENT_AGGREGATOR]=this.getEventAggregator(),a&&(b[h.DEALER_LIST.ITEM_VIEW_OPTIONS.SELECT_DEALER_CTA_TEXT]=a.getSelectDealerCtaLabel(),b[h.DEALER_LIST.ITEM_VIEW_OPTIONS.DISTANCE_UNIT_TEXT]=a.getDistanceUnitLabel(),b[h.DEALER_LIST.ITEM_VIEW_OPTIONS.ENABLE_DEALER_NUMBER]=a.getDealerListPhone()),b},_getView:function(){return this._view||(this._view=new c({collection:this._getCollection(),model:this._getModel(),childViewOptions:this._getChildViewOptions()}))},_setDealerServiceMapping:function(a,b){this.modelServiceId=a,this.modelName=b},_onDealerSearchComplete:function(b){var c,d,e,g,m,n,o=this.getContentModel(),p=this.getEventAggregator(),q=h.DEALER_LIST.VIEW_ITEM_MODEL.ATTRIBUTES,r=b&&b.map(function(b){var c=a.find(o&&o.getDealerIconKeys(),function(c){return a.contains(c.dealerTypes,b.getType())}),d=c&&this._getDealerTypeIconSettings()[c.iconStyle],e={};return e[q.DEALER_ID]=b.getDealerId(),e[q.NAME]=b.getName(),e[q.UNFORMATTED_ADDRESS]=b.getAddress(),e[q.ADDRESS]=b.getFormattedAddress(),e[q.DISTANCE]=parseFloat(b.getDistance()),e[q.FORMATTED_DISTANCE]=b.getDistance(),e[q.TYPE]=b.getType(),e[q.PHONE]=b.getPhone(),e[q.PHONE_NO_SPACE]=b.getPhone()&&b.getPhone().replace(/ /g,""),e[q.SHOW_PHONE]=b.getPhone()&&o.getDealerListPhone(),d&&(d.cssClass&&(e[q.DEALER_TYPE_CSS_CLASS]=h.GENERIC_CSS_CLASSES.DEALER_TYPE_PREFIX+d.cssClass),e[q.DEALER_TYPE_ICON_IMG_URL]=d.imgUrl),e},this),s=this.options.selectedDealerController&&this.options.selectedDealerController.getDealerId(),t=this.options.selectedDealerController&&this.options.selectedDealerController.getDealerName(),u="";!s&&this.currentDealerId&&(s=this.currentDealerId,this.currentDealerId=void 0),this._getCollection().reset(r),o&&(e=o&&o.getEnableModelDealerMapping(),e&&this.modelServiceId?(this.options.isConfigurator&&!s&&(g=i.loadItem(j.c_cfg.profileDataSession),m=g&&g.storageData.location,n=g&&g.storageData.dealerLocation,g&&m&&n&&(s=n.dealerId)),d=s&&r.filter(function(a){return a.dealerId===s}),d&&!d.length&&this.modelName?(u=o.getResultLabelDealerService().replace("{dealerName}",t),u=u.replace("{modelName}",this.modelName),this._getModel().set(h.DEALER_LIST.VIEW_MODEL.ATTRIBUTES.DEALER_SERVICE_LABEL,u),this.currentDealerId=s,p.trigger(f.EVENTS.CLEAR_SELECTED_DEALER,!1)):d&&d.length&&this.modelName&&p.trigger(k.SET_SELECTED_DEALER,s,f.SELECTED_DEALER_SOURCES.USER_SELECTED)):s&&e&&p?p.trigger(k.SET_SELECTED_DEALER,s,f.SELECTED_DEALER_SOURCES.USER_SELECTED):e||this._getModel().set(h.DEALER_LIST.VIEW_MODEL.ATTRIBUTES.DEALER_SERVICE_LABEL,""),1===r.length?c=o.getResultLabelSingle():r.length&&(c=(o.getResultLabelMultiple()||"").replace("%resultCount%",r.length))),this._getModel().set(h.DEALER_LIST.VIEW_MODEL.ATTRIBUTES.TITLE,c),p&&p.trigger(k.SET_APPLICATION_STATE,l.SEARCH_RESULTS)},_onDealerSelected:function(a){this._getModel().set(h.DEALER_LIST.VIEW_MODEL.ATTRIBUTES.DEALER_SERVICE_LABEL,"")}})}),define("c_019_25_DealerModel",["underscore","c_019_25_ApplicationConstants","backbone","handlebars","c_019_25_ModelConstants"],function(a,b,c,d,e){"use strict";var f=e.DEALER.ATTRIBUTES,g=e.GENERIC.EVENTS,h=e.DEALER.OPTIONS;return c.Model.extend({initialize:function(a,b){this.options=b||{},this.on(g.ERROR,this.onError,this).on(g.SYNC,this.onSync,this)},onError:function(){this.isErrored=!0},onSync:function(){this.isSynced=!0},url:function(){return this._getUrlFormat().replace("{DEALER_ID}",this._getDealerId())},_getAddressFieldOrder:function(){return this.options[h.ADDRESS_FIELD_ORDER]},_getDealerId:function(){return this.options[h.DEALER_ID]},_getDistanceUnit:function(){return this.options[h.DISTANCE_UNIT]},_getUrlFormat:function(){return this.options[h.URL_FORMAT]},getAddress:function(){return this.get(f.ADDRESS)},getDealerId:function(){return this.get(f.DEALER_ID)},getDistance:function(){var a,b=this.get(f.DISTANCE),c=this._getDistanceUnit();return b&&b.hasOwnProperty(c)&&(a=b[c].toFixed(1)),a},getFormattedAddress:function(){var c,e=this.getAddress()||{},f=b.ADDRESS_FIELDS.SPECIAL_FIELDS,g=a.pluck(f,"ID"),h=a.chain(this._getAddressFieldOrder()).pluck("id").filter(function(b){return e[b]||a.contains(g,b)}).map(function(b){return a.contains(g,b)?a.findWhere(f,{ID:b}).EXPRESSION:"{{"+b+"}}"}).value().join("");return h=h.replace(new RegExp("("+f.ITEM_SEPARATOR.EXPRESSION+"){2,}","g"),f.ITEM_SEPARATOR.EXPRESSION),h=h.replace(new RegExp("(^("+f.ITEM_SEPARATOR.EXPRESSION+")*|("+f.ITEM_SEPARATOR.EXPRESSION+")*$)","g"),""),h=h.replace(new RegExp(f.NEW_LINE.EXPRESSION+f.ITEM_SEPARATOR.EXPRESSION,"g"),f.NEW_LINE.EXPRESSION),h=h.replace(new RegExp("("+f.NEW_LINE.EXPRESSION+"){2,}","g"),f.NEW_LINE.EXPRESSION),h=h.replace(new RegExp("(^"+f.NEW_LINE.EXPRESSION+"|"+f.NEW_LINE.EXPRESSION+"$)","g"),""),c=d.compile(h),c(a.extend({},e,a.object(g,a.pluck(f,"HTML"))))},getName:function(){return this.get(f.NAME)},getType:function(){return this.get(f.TYPE)},getPhone:function(){var a=this.get(f.CONTACT);return a&&a.phone||a&&a.phones&&a.phones[0]&&a.phones[0].number}})}),define("c_019_25_DealerCollection",["underscore","backbone","c_019_25_DealerModel","remoteServices","c_019_25_ModelConstants"],function(a,b,c,d,e){"use strict";var f=e.DEALER_COLLECTION.OPTIONS;return b.Collection.extend({initialize:function(a,b){this.options=b||{},this.CONSTANTS=e.DEALER},model:c,sync:function(a,b,c){var f,g={lat:this._getLat(),long:this._getLng(),serviceId:this._getServiceFilters(),filterConditionType:this._getServiceFilterType()};this._getIsDealerAcceptsLeadsMandatory()&&(g.canAcceptLeads=!0),this._getTestDriveModelId()&&(g.testDriveModel=this._getTestDriveModelId()),f=d.getDealers(this._getSize(),g),c&&(f.fail(c.error),f.done(c.success)),this.trigger(e.GENERIC.REQUEST,f)},parse:function(a){return a.dealers||JSON.parse(a).dealers},_getAddressFieldOrder:function(){return this.options[f.ADDRESS_FIELD_ORDER]},_getDistanceUnit:function(){return this.options[f.DISTANCE_UNIT]},_getIsDealerAcceptsLeadsMandatory:function(){return this.options[f.IS_DEALER_ACCEPTS_LEADS_MANDATORY]},_getLat:function(){return this.options[f.LAT]},_getLng:function(){return this.options[f.LNG]},_getServiceFilters:function(){return this.options[f.SERVICE_FILTERS]},_removeServiceFilters:function(){return this.options[f.SERVICE_FILTERS]&&delete this.options[f.SERVICE_FILTERS],this},setServiceFilters:function(a,b){!a&&this._getServiceFilters()?this._removeServiceFilters():this.options[f.SERVICE_FILTERS]=a,b&&this.fetch()},_getServiceFilterType:function(){return this.options[f.SERVICE_FILTER_TYPE]},_getSize:function(){return this.options[f.SIZE]},_getTestDriveModelId:function(){return this.options[f.TEST_DRIVE_MODEL_ID]},setTestDriveModelId:function(a){return this.options[f.TEST_DRIVE_MODEL_ID]=a,this},_setLat:function(a){return this.options[f.LAT]=a,this},_setLng:function(a){return this.options[f.LNG]=a,this},isSearchLocationSet:function(){return!(!this._getLat()||!this._getLng())},setSearchLocation:function(a,b,c){var d={};d[e.DEALER.OPTIONS.DISTANCE_UNIT]=this._getDistanceUnit(),d[e.DEALER.OPTIONS.ADDRESS_FIELD_ORDER]=this._getAddressFieldOrder(),this._setLat(a)._setLng(b),c&&this.fetch(d)}})}),define("c_019_25_DealerSearchController",["c_019_25_ApplicationConstants","c_019_25_ControllerConstants","c_019_25_ControllerBase","c_019_25_DealerCollection","marionette","c_019_25_ModelConstants","objectFactory","storageManager","storageManagerKeys"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=a.EVENTS,k=a.STATES,l=f.DEALER_COLLECTION.OPTIONS,m=f.GENERIC.EVENTS,n=b.DEALER_SEARCH.OPTIONS,o=a.SEARCH_LOCATION_SOURCES;return e.Object.extend({initialize:function(){var a={};a[l.ADDRESS_FIELD_ORDER]=this._getAddressFieldOrder(),a[l.IS_DEALER_ACCEPTS_LEADS_MANDATORY]=this._getIsDealerAcceptsLeadsMandatory(),a[l.SERVICE_FILTERS]=this._getServiceFilters(),a[l.SERVICE_FILTER_TYPE]=this._getServiceFilterType(),a[l.SIZE]=this._getMaxResultCount(),a[l.DISTANCE_UNIT]=this._getDistanceUnit(),a[l.TEST_DRIVE_MODEL_ID]=this._getTestDriveModelId(),this._dealerCollection=g.getObject(d,null,a),this._lookForServiceInMapping(),this._bindEvents()},_bindEvents:function(){var a=this.getContentModel(),b=a&&a.getEnableModelDealerMapping();this._getEventAggregator().on(j.SET_SEARCH_LOCATION,this._onSearchLocationSet,this).on(j.TRIGGER_SEARCH,this._onSearchLocationSet,this).on(j.TEST_DRIVE_MODEL_CHANGED,this._onTestDriveModelChange,this).on(j.CLEAR_SELECTED_DEALER,this._onClearSelectedDealer,this),b&&this._getEventAggregator().on(j.CHANGE_MODEL_SELECT,this._onDropdownModelChange,this).on(j.STORAGE_SAVED,this._onStorageSaved,this),this._dealerCollection.on(m.REQUEST,this._onSearchSubmit,this).on(m.SYNC,this._onSearchResultLoad,this).on(m.ERROR,this._onSearchFail,this)},_onStorageSaved:function(){this._lookForServiceInMapping()},_lookForServiceInMapping:function(){var a,b,c;this.options.mappingData&&(a=h.loadItem(i.c_cfg.itemKey))&&a.state&&a.state.modelCode&&(b=a.state.modelCode,c=Object.keys(this.options.mappingData).filter(function(a){return a===b},this).map(function(a){return this.options.mappingData[a]},this),c.length?this._onDropdownModelChange(c[0]):this._onDropdownModelChange(""))},
_getAddressFieldOrder:function(){return this.options[n.ADDRESS_FIELD_ORDER]},_getDistanceUnit:function(){return this.options[n.DISTANCE_UNIT]},_getEventAggregator:function(){return this.options[n.EVENT_AGGREGATOR]},_getIsDealerAcceptsLeadsMandatory:function(){return this.options[n.IS_DEALER_ACCEPTS_LEADS_MANDATORY]},_getMaxResultCount:function(){return this.options[n.MAX_RESULT_COUNT]},_getServiceFilters:function(){return this.options[n.SERVICE_FILTERS]},_getServiceFilterType:function(){return this.options[n.SERVICE_FILTER_TYPE]},_getTestDriveModelId:function(){return this.options[n.TEST_DRIVE_MODEL_ID]},getContentModel:function(){return this.options[n.CONTENT]},_isSearchOnStartupEnabled:function(){return this.options[n.IS_SEARCH_ON_STARTUP_ENABLED]},_onSearchLocationSet:function(a,b){var c=this.getContentModel(),d=c&&c.getEnableModelDealerMapping();b!==o.SMART_LOCATION||b===o.SMART_LOCATION&&this._isSearchOnStartupEnabled()&&(_.isEmpty(a.dealerLocation)||d)?(this._getEventAggregator().trigger(j.SET_APPLICATION_STATE,k.SEARCHING),this._dealerCollection.setSearchLocation(a.getUserLat(),a.getUserLng(),!0)):b===o.SMART_LOCATION&&this._isSearchOnStartupEnabled()&&(_.isEmpty(a.dealerLocation)||d)&&this._dealerCollection.setSearchLocation(a.getUserLat(),a.getUserLng(),!1)},_onTestDriveModelChange:function(a){this._dealerCollection.setTestDriveModelId(a&&a.testDriveModelId)},_onDropdownModelChange:function(a){var b=[];a&&b.push(a),this._dealerCollection.setServiceFilters(a,!0)},_onSearchSubmit:function(){this._getEventAggregator().trigger(j.DEALER_SEARCH_SUBMIT)},_onClearSelectedDealer:function(a){this._dealerCollection.isSearchLocationSet()&&a&&this._dealerCollection.fetch()},_onSearchResultLoad:function(a){a.length?(a.models[0].options.addressFieldOrder||(a=a.map(_.bind(function(a){return a.options.addressFieldOrder=this._getAddressFieldOrder(),a},this))),this._getEventAggregator().trigger(j.DEALER_SEARCH_COMPLETE,a)):this._getEventAggregator().trigger(j.DEALER_SEARCH_COMPLETE_ZERO_RESULTS)},_onSearchFail:function(a,b,c){this._getEventAggregator().trigger(j.DEALER_SEARCH_ERROR,c)}})}),define("c_019_25_VehicleSelectorViewModel",["jquery","backbone","c_019_25_ModuleConstants"],function(a,b,c){"use strict";var d=c.VEHICLE_SELECTOR.VIEW_MODEL;return b.Model.extend({initialize:function(a){this.options=a||{}},getVehicleList:function(){return this.get(d.ATTRIBUTES.VEHICLE_DATA)},getPreSelectedModelId:function(){return this.get(d.ATTRIBUTES.PRE_SELECTED_MODEL_ID)},getIsSelectDifferentVehicleInstructionVisible:function(){return this.get(d.ATTRIBUTES.IS_SELECT_DIFFERENT_VEHICLE_INSTRUCTION_VISIBLE)},setIsSelectDifferentVehicleInstructionVisible:function(a){return this.set(d.ATTRIBUTES.IS_SELECT_DIFFERENT_VEHICLE_INSTRUCTION_VISIBLE,a)}})}),define("hbars!/components/c_019-25/scripts/app/modules/vehicleSelector/html/vehicleSelectorTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n                <option value="'+k((d=null==b||!1===b?b:b.index,typeof d===j?d.apply(a):d))+'" data-test-drive-model-id="',(e=c.testDriveModelId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.testDriveModelId,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" data-model-id="',(e=c.modelId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.modelId,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"</option>\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="form-group required">\n    <p class="select-vehicle-instruction">',(h=c.selectVehicleInstruction)?g=h.call(b,{hash:{},data:e}):(h=b&&b.selectVehicleInstruction,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</p>\n    <label for="Vehicle-Selection-List">',(h=c.label)?g=h.call(b,{hash:{},data:e}):(h=b&&b.label,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</label>\n    <div class="custom-selectbox custom-selectbox-form">\n        <select name="Vehicle-Selection-List" id="Vehicle-Selection-List" class="vehicle_selection_list">\n            ',g=c.each.call(b,b&&b.vehicleData,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(g||0===g)&&(i+=g),i+='\n        </select>\n        <span class="selectedValue"></span>\n    </div>\n    <div class="select-different-vehicle-instruction error">\n        <span class="error-message">',(h=c.selectDifferentVehicleInstruction)?g=h.call(b,{hash:{},data:e}):(h=b&&b.selectDifferentVehicleInstruction,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+"</span>\n    </div>\n</div>\n"})}),define("c_019_25_VehicleSelectorView",["marionette","hbars!/components/c_019-25/scripts/app/modules/vehicleSelector/html/vehicleSelectorTemplate","c_019_25_ModuleConstants","c_019_25_ApplicationConstants","customSelect"],function(a,b,c,d,e){"use strict";var f=c.VEHICLE_SELECTOR.VIEW_MODEL.ATTRIBUTES;return a.ItemView.extend({template:b,events:{"change @ui.vehicleSelectionList":"_onVehicleSelectionChange"},ui:{vehicleSelectionList:c.VEHICLE_SELECTOR.SELECTORS.VEHICLE_SELECTION_LIST,selectVehicleInstruction:c.VEHICLE_SELECTOR.SELECTORS.SELECT_VEHICLE_INSTRUCTION,selectDifferentVehicleInstruction:c.VEHICLE_SELECTOR.SELECTORS.SELECT_DIFFERENT_VEHICLE_INSTRUCTION},modelEvents:function(){var a={};return a["change:"+f.IS_SELECT_DIFFERENT_VEHICLE_INSTRUCTION_VISIBLE]="_setSelectDifferentVehicleInstructionVisibility",a},onRender:function(){this._setSelectDifferentVehicleInstructionVisibility(),this._setSelectedItem(this.model.getPreSelectedModelId()),e.init(this.$el)},_onVehicleSelectionChange:function(){var a=this.ui.vehicleSelectionList.find(c.VEHICLE_SELECTOR.SELECTORS.SELECTED),b=a&&a.val(),e=this.model.getVehicleList()[b],f=!(e&&e.modelId);this._setSelectVehicleInstructionVisibility(f),this._getEventAggregator().trigger(d.EVENTS.VEHICLE_SELECTION_CHANGED,e)},_setSelectedItem:function(a){this.ui.vehicleSelectionList.find("["+c.VEHICLE_SELECTOR.SELECTORS.DATA_MODEL_ID+'="'+a+'"]').prop(c.VEHICLE_SELECTOR.PROPERTIES.SELECTED,!0).change()},_setSelectVehicleInstructionVisibility:function(a){a?this.ui.selectVehicleInstruction.removeClass(c.GENERIC_CSS_CLASSES.HIDDEN):this.ui.selectVehicleInstruction.addClass(c.GENERIC_CSS_CLASSES.HIDDEN)},_setSelectDifferentVehicleInstructionVisibility:function(){this.model.getIsSelectDifferentVehicleInstructionVisible()?this.ui.selectDifferentVehicleInstruction.removeClass(c.GENERIC_CSS_CLASSES.HIDDEN):this.ui.selectDifferentVehicleInstruction.addClass(c.GENERIC_CSS_CLASSES.HIDDEN)},_getEventAggregator:function(){return this.options[c.VEHICLE_SELECTOR.OPTIONS.EVENT_AGGREGATOR]}})}),define("c_019_25_VehicleSelectorController",["underscore","jquery","c_019_25_ApplicationConstants","c_019_25_ControllerBase","c_019_25_VehicleSelectorViewModel","c_019_25_VehicleSelectorView","c_019_25_ModuleConstants"],function(a,b,c,d,e,f,g){"use strict";var h=g.VEHICLE_SELECTOR;return d.extend({initialize:function(a){var b;this.options=a||{},this.getContentModel()&&this.getContentModel().getVehicleSelectorData()&&(b=!!this.getContentModel().getVehicleSelectorData().length),this.options.region&&b&&this.options.region.show(this._getView()),this._bindEvents()},_bindEvents:function(){this.getEventAggregator().on(c.EVENTS.SET_APPLICATION_STATE,this._onAppStateChanged,this).on(c.EVENTS.NO_TEST_DRIVE_STOCK_FOUND,this._onNoTestDriveStockFound,this)},_getModel:function(){var a,b={};return this._model||(b[h.VIEW_MODEL.ATTRIBUTES.LABEL]=this.getContentModel().getVehicleSelectorLabel(),a=this.getContentModel().getVehicleSelectorData()||[],a.unshift({name:this.getContentModel().getVehicleSelectorOption()}),b[h.VIEW_MODEL.ATTRIBUTES.VEHICLE_DATA]=a,b[h.VIEW_MODEL.ATTRIBUTES.PRE_SELECTED_MODEL_ID]=this._getActiveModelId(),b[h.VIEW_MODEL.ATTRIBUTES.SELECT_VEHICLE_INSTRUCTION]=this.getContentModel().getSelectVehicleInstruction(),this.getContentModel().getSelectDifferentVehicleInstruction()&&(b[h.VIEW_MODEL.ATTRIBUTES.SELECT_DIFFERENT_VEHICLE_INSTRUCTION]=this.getContentModel().getSelectDifferentVehicleInstruction()),this._model=new e(b)),this._model},_getView:function(){return this._view||(this._view=new f({model:this._getModel(),eventAggregator:this.options.eventAggregator}))},_getActiveModelId:function(){return this.options[h.CONTROLLER.OPTIONS.ACTIVE_MODEL_ID]},_onAppStateChanged:function(a){a===c.STATES.INITIALIZING?this._setViewVisibility(!1):this._setViewVisibility(!0)},_onNoTestDriveStockFound:function(a){this.getContentModel().getSelectDifferentVehicleInstruction()&&this._getModel().setIsSelectDifferentVehicleInstructionVisible(a)},_setViewVisibility:function(a){!0===a?this._getView().$el.show():this._getView().$el.hide()}})}),define("hbars!/components/c_019-25/scripts/app/modules/error/html/errorTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<span class="error-message">',(g=c.errorMessage)?f=g.call(b,{hash:{},data:e}):(g=b&&b.errorMessage,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h+=i(f)+"</span>\n"})}),define("c_019_25_ErrorView",["backbone","marionette","c_019_25_ModuleConstants","hbars!/components/c_019-25/scripts/app/modules/error/html/errorTemplate"],function(a,b,c,d){"use strict";return a.Marionette.ItemView.extend({modelEvents:function(){var a={};return a["change:"+c.ERROR.VIEW_MODEL.ATTRIBUTES.ERROR_MESSAGE]="_onErrorMessageChange",a},template:d,ui:{errorMessage:c.ERROR.SELECTORS.ERROR_MESSAGE},_onErrorMessageChange:function(a,b){this.ui.errorMessage.text(b)}})}),define("c_019_25_ErrorViewModel",["backbone","c_019_25_ModuleConstants"],function(a,b){"use strict";return a.Model.extend({setErrorMessage:function(a){return this.set(b.ERROR.VIEW_MODEL.ATTRIBUTES.ERROR_MESSAGE,a),this}})}),define("c_019_25_ErrorController",["c_019_25_ApplicationConstants","c_019_25_ControllerBase","c_019_25_ErrorView","c_019_25_ErrorViewModel","c_019_25_ModelConstants"],function(a,b,c,d,e){"use strict";var f=a.EVENTS;return b.extend({initialize:function(){this.options.region&&this.options.region.show(this._getView()),this._bindEvents()},_bindEvents:function(){this.getEventAggregator()&&this.getEventAggregator().on(f.DEALER_SEARCH_COMPLETE_ZERO_RESULTS,this._onDealerSearchCompleteZeroResults,this).on(f.DEALER_SEARCH_ERROR,this._onDealerSearchError,this).on(f.DISPLAY_SELECTED_DEALER_REQUIRED_MESSAGE,this._onDisplaySelectedDealerRequiredMessage,this).on(f.LOCATION_NOT_FOUND,this._onLocationNotFound,this).on(f.GEOLOCATION_ERROR,this._onGeolocationError,this).on(f.NO_TEST_DRIVE_STOCK_FOUND_AT_DEALER,this._onNoTestDriveStockAtDealer,this)},_displayError:function(b){this._getModel().setErrorMessage(b),this.getEventAggregator().trigger(f.SET_APPLICATION_STATE,a.STATES.ERROR)},_getModel:function(){return this._model||(this._model=new d)},_getView:function(){return this._view||(this._view=new c({model:this._getModel()}))},_onDealerSearchCompleteZeroResults:function(){this._displayError(this.getContentModel().get(e.CONTENT.ATTRIBUTES.DEALER_SEARCH_RETURNED_ZERO_RESULTS))},_onDealerSearchError:function(){this._displayError(this.getContentModel().get(e.CONTENT.ATTRIBUTES.DEALER_SEARCH_RETURNED_ZERO_RESULTS))},_onDisplaySelectedDealerRequiredMessage:function(){this._displayError(this.getContentModel().get(e.CONTENT.ATTRIBUTES.SELECTED_DEALER_IS_MANDATORY))},_onGeolocationError:function(){this._displayError(this.getContentModel().get(e.CONTENT.ATTRIBUTES.CANNOT_FIND_USER_LOCATION))},_onNoModelSelected:function(){this._displayError(this.getContentModel().getSelectVehcileInstruction())},_onLocationNotFound:function(){this._displayError(this.getContentModel().getLocationNotFoundText())},_onNoTestDriveStockAtDealer:function(){this._displayError(this.getContentModel().getSelectDealerOrVehicleInstruction())},hide:function(){b.prototype.hide.apply(this,arguments),this.getRegion().$el.closest(a.SELECTORS.FORM_GROUP).removeClass(a.CSS_CLASSES.FORM_GROUP_ERROR)},show:function(){b.prototype.show.apply(this,arguments),this.getRegion().$el.closest(a.SELECTORS.FORM_GROUP).addClass(a.CSS_CLASSES.FORM_GROUP_ERROR)}})}),define("positionErrorCodes",[],function(){"use strict";return{PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3}}),define("c_019_25_GeolocationController",["underscore","c_019_25_ApplicationConstants","c_019_25_ControllerConstants","googleMapsSingleton","heliosLocation","marionette","objectFactory","positionErrorCodes","trackingCodes","autocompleteContext"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b.EVENTS,l=b.STATES,m=c.GEOLOCATION.OPTIONS,n=b.SEARCH_LOCATION_SOURCES;return f.Object.extend({initialize:function(){this._bindEvents(),this.COUNTRY_CODE=this._getWindow().HELIOS.config.common.countryCode,this.autocompleteContext=new j({COUNTRY_CODE:this.COUNTRY_CODE,window:this._getWindow()})},_bindEvents:function(){this._getEventAggregator().on(k.GEOLOCATE_USER,this._onGeolocateUser,this)},_getEventAggregator:function(){return this.options[m.EVENT_AGGREGATOR]},_getWindow:function(){return this.options[m.WINDOW]},_getAutocompleteContext:function(){return this.autocompleteContext},_onLocationSuccess:function(a){this._getEventAggregator().trigger(k.ANALYTICS_SEARCH,i.trackingVars.search.searchTermType.geolocation,a).trigger(k.SET_SEARCH_LOCATION,a,n.GEO_LOCATION)},_onLocationFail:function(){this._getEventAggregator().trigger(k.GEOLOCATION_ERROR)},_onGeolocateUser:function(){var b=this._getWindow();b&&b.navigator&&b.navigator.geolocation&&(b.navigator.geolocation.getCurrentPosition(a.bind(this._onGetCurrentPositionSuccess,this),a.bind(this._onGetCurrentPositionError,this),{timeout:1e4}),this._getEventAggregator().trigger(k.GEOLOCATION_REQUEST).trigger(k.SET_APPLICATION_STATE,l.SEARCHING))},_onGetCurrentPositionError:function(a){a.code!==h.PERMISSION_DENIED?this._getEventAggregator().trigger(k.GEOLOCATION_ERROR):this._getEventAggregator().trigger(k.GO_TO_PREVIOUS_APPLICATION_STATE)},_onGetCurrentPositionSuccess:function(b){this._getAutocompleteContext().getPostalCodeByCoordinatesAndCountry(b.coords.latitude,b.coords.longitude).done(a.bind(this._onLocationSuccess,this)).fail(a.bind(this._onLocationFail,this))}})}),define("hbars!/components/c_019-25/scripts/app/modules/loader/html/loaderTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},""})}),define("c_019_25_LoaderView",["backbone","marionette","hbars!/components/c_019-25/scripts/app/modules/loader/html/loaderTemplate"],function(a,b,c){"use strict";return a.Marionette.ItemView.extend({template:c})}),define("c_019_25_LoaderViewModel",["backbone"],function(a){"use strict";return a.Model.extend()}),define("c_019_25_LoaderController",["c_019_25_ControllerBase","c_019_25_LoaderView","c_019_25_LoaderViewModel"],function(a,b,c){"use strict";return a.extend({initialize:function(){this.options.region&&this.options.region.show(this._getView())},_getModel:function(){return this._model||(this._model=new c)},_getView:function(){return this._view||(this._view=new b({model:this._getModel()}))}})}),define("hbars!/components/c_019-25/scripts/app/modules/search/html/searchTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div><label for="',(g=c.locationSearchElementId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.locationSearchElementId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">',(g=c.enterLocationText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.enterLocationText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</label></div>\n<span class="location-fields">\n    <input type="text" id="',(g=c.locationSearchElementId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.locationSearchElementId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="location-input" name="location" data-no-results-text="',(g=c.noResultText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.noResultText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'"  placeholder="',(g=c.placeholderText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.placeholderText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'"/>\n    <button type="button" class="btn-search confirm-location-cta btn-disabled-autocomplete search-for-dealers-button">\n        <span>',(g=c.searchForDealersText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.searchForDealersText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</span>\n    </button>\n    <span class="autocomplete-suggestions pac-container"></span>\n    <script type="text/x-handlebars-template" id="new-autocomplete-ctx">\n        {{#each this}}\n            <button type="button" class="pac-item" data-address-name="{{location.address}}">{{location.address}}</button>\n        {{/each}}\n    <\/script>\n</span>\n<div><button class="use-current-location-button" type="button"><span>',(g=c.useCurrentLocationText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.useCurrentLocationText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</span></button></div>\n"})}),define("c_019_25_SearchView",["c_019_25_ApplicationConstants","googleMapsSingleton","heliosLocation","keyCodeConstants","marionette","c_019_25_ModuleConstants","trackingCodes","hbars!/components/c_019-25/scripts/app/modules/search/html/searchTemplate"],function(a,b,c,d,e,f,g,h){"use strict";var i=a.EVENTS;return e.ItemView.extend({events:{"click @ui.searchForDealersButton":"_onSearchForDealersButtonClick","click @ui.useCurrentLocationButton":"_onUseCurrentLocationButtonClick","keyup @ui.locationTextBox":"_selectFirstItemSearchResult"},modelEvents:function(){var a={};return a["change:"+f.SEARCH.VIEW_MODEL.ATTRIBUTES.LOCATION_SEARCH_ELEMENT_VALUE]="_onLocationSearchElementValueChange",a},template:h,ui:function(){var a={};return a.locationTextBox=f.SEARCH.SELECTORS.LOCATION_TEXT_BOX,a.searchForDealersButton=f.SEARCH.SELECTORS.SEARCH_FOR_DEALERS_BUTTON,a.useCurrentLocationButton=f.SEARCH.SELECTORS.USE_CURRENT_LOCATION_BUTTON,a},initialize:function(){this._bindEvents()},_bindEvents:function(){this._getEventAggregator().on(f.SEARCH.AUTOCOMPLETE_PROPS.EVENTS.getPostalCodeByAddressName,function(a){this._onSetSearchLocation(a.heliosLocation),this._onSetUserQuery(a.userQuery),this._triggerAnalytics(a.heliosLocation),this._triggerSetLocation(a.heliosLocation)}.bind(this))},_selectFirstItemSearchResult:function(a){a.keyCode===d.ENTER&&_.delay(_.bind(function(){this._onSearchForDealersButtonClick()},this),50)},_getEventAggregator:function(){return this.options[f.SEARCH.VIEW.OPTIONS.EVENT_AGGREGATOR]},_onSetSearchLocation:function(a){this._setSearchLocation(a)},_onSetUserQuery:function(a){this._setUserQuery(a)},_onLocationSearchElementValueChange:function(a,b){this._setLocationSearchElementValue(b)},_onSearchForDealersButtonClick:function(){var a=f.SEARCH.DATA_ATTRIBUTES.GET_ADDRESS_NAME,b=$(f.SEARCH.SELECTORS.FIRST_RESULT_ITEM).data(a);this.autocompleteEventHandler.manuallySelectFirstItem(),$(f.SEARCH.AUTOCOMPLETE_PROPS.SELECTORS.inputElement).val(b)},_onUseCurrentLocationButtonClick:function(){this._getEventAggregator().trigger(i.GEOLOCATE_USER)},_getSearchLocation:function(){return this.model.getHeliosLocation()},_setLocationSearchElementValue:function(a){return this.ui.locationTextBox.val(a),this},_setSearchLocation:function(a){return this.model.setHeliosLocation(a),this},_setAutocompleteEventHandler:function(a){this.autocompleteEventHandler=a},_setUserQuery:function(a){return this.model.setUserQuery(a),this},_triggerAnalytics:function(a){this._getEventAggregator().trigger(i.ANALYTICS_SEARCH,g.trackingVars.search.searchTermType.userSearch,a,this.model.getUserQuery()).trigger()},_triggerSetLocation:function(b){this._getEventAggregator().trigger(i.SET_SEARCH_LOCATION,b,a.SEARCH_LOCATION_SOURCES.USER_SELECT)},disableControls:function(){this.ui.locationTextBox.prop("disabled",!0),this.ui.searchForDealersButton.prop("disabled",!0),this.ui.useCurrentLocationButton.prop("disabled",!0)},enableControls:function(){this.ui.locationTextBox.prop("disabled",!1),this.ui.searchForDealersButton.prop("disabled",!1),this.ui.useCurrentLocationButton.prop("disabled",!1)}})}),define("c_019_25_SearchViewModel",["backbone","c_019_25_ModuleConstants"],function(a,b){"use strict";var c=b.SEARCH.VIEW_MODEL.ATTRIBUTES;return a.Model.extend({getHeliosLocation:function(){return this.get(c.HELIOS_LOCATION)},getUserQuery:function(){return this.get(c.USER_SEARCH_TERM)},setEnterLocationText:function(a){return this.set(c.ENTER_LOCATION_TEXT,a),this},setLocationSearchElementId:function(a){return this.set(c.LOCATION_SEARCH_ELEMENT_ID,a),this},setLocationSearchElementValue:function(a){return this.set(c.LOCATION_SEARCH_ELEMENT_VALUE,a),this},setPlaceholderText:function(a){return this.set(c.PLACEHOLDER_TEXT,a),this},setSearchForDealersText:function(a){return this.set(c.SEARCH_FOR_DEALERS_TEXT,a),this},setUseCurrentLocationText:function(a){return this.set(c.USE_CURRENT_LOCATION_TEXT,a),this},setHeliosLocation:function(a){return this.set(c.HELIOS_LOCATION,a),this},setUserQuery:function(a){return this.set(c.USER_SEARCH_TERM,a),this}})}),define("c_019_25_SearchController",["jquery","c_019_25_ApplicationConstants","c_019_25_ControllerBase","c_019_25_ModelConstants","c_019_25_ModuleConstants","c_019_25_SearchView","c_019_25_SearchViewModel","autocompleteEventHandler"],function(a,b,c,d,e,f,g,h){"use strict";return c.extend({initialize:function(b){this.options=a.extend(this.options,{},b),this.options.region&&this.options.region.show(this._getView()),this._initAutocompleteEventHandler(),this._bindEvents()},_bindEvents:function(){this.getEventAggregator()&&this.getEventAggregator().on(b.EVENTS.SET_SEARCH_LOCATION,this._onSetSearchLocation,this)},_getModel:function(){var a;return this._model||(a=this.getContentModel(),this._model=(new g).setEnterLocationText(a.getLocationSearchLabel()).setLocationSearchElementId(a.getLocationSearchElementId()).setPlaceholderText(a.getLocationSearchPlaceholder()).setSearchForDealersText(a.getSearchForDealersText()).setUseCurrentLocationText(a.getUseCurrentLocation())),this._model},_getView:function(){var a;return this._view||(a={model:this._getModel()},a[e.SEARCH.VIEW.OPTIONS.COUNTRY_CODE]=this.getWindow().HELIOS.config.common.countryCode,a[e.SEARCH.VIEW.OPTIONS.EVENT_AGGREGATOR]=this.getEventAggregator(),a[e.SEARCH.VIEW.OPTIONS.WINDOW]=this.getWindow(),this._view=new f(a)),this._view},_onSetSearchLocation:function(a,c){var d;switch(c){case b.SEARCH_LOCATION_SOURCES.GEO_LOCATION:d=this.getContentModel().getCurrentLocationText();break;case b.SEARCH_LOCATION_SOURCES.SMART_LOCATION:this.getContentModel().getIsLocationPrefillEnabled()&&(d=a.getUserAddress());break;case b.SEARCH_LOCATION_SOURCES.TEST_DRIVE_STOCK_CHECK:this.getContentModel().getIsTestDriveStockCheckEnabled()&&(d=a.getUserAddress())}_.isUndefined(d)||this._model.setLocationSearchElementValue(d)},_initAutocompleteEventHandler:function(){var a;return a=new h({COUNTRY_CODE:this.getWindow().HELIOS.config.common.countryCode,window:this.getWindow(),inputElement:e.SEARCH.AUTOCOMPLETE_PROPS.SELECTORS.inputElement,selectors:e.SEARCH.AUTOCOMPLETE_PROPS.SELECTORS,eventAggregator:this.getEventAggregator(),heliosObject:this.getWindow().HELIOS}),this._view&&this._view._setAutocompleteEventHandler&&this._view._setAutocompleteEventHandler(a),a},disable:function(){this._view.disableControls()},enable:function(){this._view.enableControls()}})}),define("hbars!/components/c_019-25/scripts/app/modules/selectedDealer/html/selectedDealerTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this;return i+='<h2 class="title">',(h=c.title)?g=h.call(b,{hash:{},data:e}):(h=b&&b.title,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</h2>\n<div class="details">\n    <h3 class="name">',(h=c.name)?g=h.call(b,{hash:{},data:e}):(h=b&&b.name,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</h3>\n    <p class="dealer-list-phone">\n        <a class="dealer-list-phone-link" href="tel:',(h=c.phone)?g=h.call(b,{hash:{},data:e}):(h=b&&b.phone,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'">',(h=c.phone)?g=h.call(b,{hash:{},data:e}):(h=b&&b.phone,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</a>\n    </p>\n    <div class="address">',(h=c.address)?g=h.call(b,{hash:{},data:e}):(h=b&&b.address,g=typeof h===j?h.call(b,{hash:{},data:e}):h),(g||0===g)&&(i+=g),i+='</div>\n    <div class="distance ',g=c.unless.call(b,b&&b.distance,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(g||0===g)&&(i+=g),i+='">\n        (<span class="distance-number">',(h=c.distance)?g=h.call(b,{hash:{},data:e}):(h=b&&b.distance,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</span><span class="distance-unit">',(h=c.distanceUnit)?g=h.call(b,{hash:{},data:e}):(h=b&&b.distanceUnit,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</span>)\n    </div>\n    <img class="icon-img hidden" src="',(h=c.imgUrl)?g=h.call(b,{hash:{},data:e}):(h=b&&b.imgUrl,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'" />\n</div>\n<div class="change-selected-dealer-cta-container">\n    <button class="change-selected-dealer ',g=c.unless.call(b,b&&b.isChangeDealerButtonVisible,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(g||0===g)&&(i+=g),i+='" type="button">',(h=c.changeSelectedDealerCta)?g=h.call(b,{hash:{},data:e}):(h=b&&b.changeSelectedDealerCta,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+"</button>\n</div>\n"})}),define("c_019_25_SelectedDealerView",["underscore","c_019_25_ApplicationConstants","backbone","marionette","c_019_25_ModuleConstants","hbars!/components/c_019-25/scripts/app/modules/selectedDealer/html/selectedDealerTemplate"],function(a,b,c,d,e,f){"use strict";var g=e.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES;return c.Marionette.ItemView.extend({events:{"click @ui.changeSelectedDealerButton":"_onChangeSelectedDealerButtonClick"},modelEvents:function(){var a={};return a["change:"+g.ADDRESS]="_onAddressChange",a["change:"+g.DISTANCE]="_onDistanceChange",a["change:"+g.NAME]="_onNameChange",a["change:"+g.TITLE]="_onTitleChange",a["change:"+g.DEALER_TYPE_CSS_CLASS]="_onDealerTypeClassChange",a["change:"+g.DEALER_TYPE_ICON_IMG_URL]="_onIconImgChange",a["change:"+g.IS_CHANGE_DEALER_BUTTON_VISIBLE]="_onIsChangeDealerButtonVisible",a["change:"+g.PHONE]="_onPhoneChange",a},template:f,ui:{address:e.SELECTED_DEALER.SELECTORS.ADDRESS,changeSelectedDealerButton:e.SELECTED_DEALER.SELECTORS.CHANGE_SELECTED_DEALER_BUTTON,distanceContainer:e.SELECTED_DEALER.SELECTORS.DISTANCE,distanceNumber:e.SELECTED_DEALER.SELECTORS.DISTANCE_NUMBER,name:e.SELECTED_DEALER.SELECTORS.NAME,title:e.SELECTED_DEALER.SELECTORS.TITLE,iconImg:e.SELECTED_DEALER.SELECTORS.ICON_IMG,detailsContainer:e.SELECTED_DEALER.SELECTORS.DETAILS,phoneUrl:e.SELECTED_DEALER.SELECTORS.DEALER_LIST_PHONE_LINK},_onAddressChange:function(a,b){this.ui.address.html(b)},_onChangeSelectedDealerButtonClick:function(){this.trigger(e.SELECTED_DEALER.EVENTS.CHANGE_SELECTED_DEALER_CLICK)},_onDistanceChange:function(b,c){var d=!a.isFinite(c);this.ui.distanceContainer.toggleClass(e.GENERIC_CSS_CLASSES.HIDDEN,d),this.ui.distanceNumber.text(c)},_onNameChange:function(a,b){this.ui.name.text(b)},_onPhoneChange:function(a,b){var c="",d=this.model.get(e.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.ENABLE_DEALER_NUMBER);b&&(c=b.replace(/ /g,"")),this.ui.phoneUrl.text(b).toggleClass(e.GENERIC_CSS_CLASSES.HIDDEN,!c||!d),this.ui.phoneUrl.attr("href","tel:"+c),$("body").trigger(e.DEALER_LIST.EVENTS.DEALERS_PHONE_UPDATE)},_onTitleChange:function(a,b){this.ui.title.text(b)},_onDealerTypeClassChange:function(a,b){this.ui.detailsContainer.removeClass(a.previous(g.DEALER_TYPE_CSS_CLASS)).addClass(b)},_onIconImgChange:function(b,c){this.ui.iconImg.attr("src",c).toggleClass(e.GENERIC_CSS_CLASSES.HIDDEN,a.isUndefined(c))},_onIsChangeDealerButtonVisible:function(a,b){this.ui.changeSelectedDealerButton.toggleClass(e.GENERIC_CSS_CLASSES.HIDDEN,!b)}})}),define("c_019_25_SelectedDealerViewModel",["backbone","c_019_25_ModuleConstants"],function(a,b){"use strict";return a.Model.extend({defaults:function(){var a={};return a[b.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.IS_CHANGE_DEALER_BUTTON_VISIBLE]=!0,a}})}),define("c_019_25_SelectedDealerController",["underscore","c_019_25_ApplicationConstants","c_019_25_ControllerBase","c_019_25_DealerModel","c_019_25_ModelConstants","c_019_25_ModuleConstants","c_019_25_SelectedDealerView","c_019_25_SelectedDealerViewModel","objectFactory"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=f.SELECTED_DEALER.CONTROLLER.OPTIONS;return c.extend({initialize:function(){this.options.region&&this.options.region.show(this._getView()),this._bindEvents()},_bindEvents:function(){this.getEventAggregator()&&this.getEventAggregator().on(b.EVENTS.SET_SELECTED_DEALER,this._onSetSelectedDealer,this)},_getAddressFieldOrder:function(){return this.options[j.ADDRESS_FIELD_ORDER]},_getDealerTypeIconSettings:function(){return this.options[j.DEALER_TYPE_ICON_SETTINGS]},_getDealerTypeIconCssClass:function(a){return this._getDealerTypeIconSettings()&&this._getDealerTypeIconSettings()[a]&&this._getDealerTypeIconSettings()[a].cssClass},_getDealerTypeIconIconURL:function(a){return this._getDealerTypeIconSettings()&&this._getDealerTypeIconSettings()[a]&&this._getDealerTypeIconSettings()[a].imgUrl},_getModel:function(){return this._model||(this._model=i.getObject(h,null,{}).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.TITLE,this.getContentModel().get(e.CONTENT.ATTRIBUTES.DEALER_SELECTED_TEXT)).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.CHANGE_SELECTED_DEALER_CTA,this.getContentModel().get(e.CONTENT.ATTRIBUTES.CHANGE_SELECTED_DEALER_CTA)).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.DISTANCE_UNIT,this.getContentModel().get(e.CONTENT.ATTRIBUTES.DISTANCE_UNIT_LABEL)).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.ENABLE_DEALER_NUMBER,this.getContentModel().get(e.CONTENT.ATTRIBUTES.SEARCH_FOR_DEALER_PHONE))),this._model},_getView:function(){var a;return this._view||(a={model:this._getModel()},a[f.SELECTED_DEALER.VIEW.OPTIONS.EVENT_AGGREGATOR]=this.getEventAggregator(),this._view=new g(a)),this._view},_onDealerModelError:function(){},_onDealerModelSync:function(c){var d,g,h,i,j,k=this.getContentModel().getDealerIconKeys();k.length>1&&(d=a.find(k,function(b){return a.contains(b.dealerTypes,c.getType())}),g=d&&d.iconStyle,h=this._getDealerTypeIconCssClass(g),i=h&&f.GENERIC_CSS_CLASSES.DEALER_TYPE_PREFIX+h,j=this._getDealerTypeIconIconURL(g)),this._getModel().set(e.DEALER.OPTIONS.DEALER_ID,c.getDealerId()).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.NAME,c.getName()).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.ADDRESS,c.getFormattedAddress()).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.DEALER_TYPE_CSS_CLASS,i).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.DEALER_TYPE_ICON_IMG_URL,j).set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.PHONE,c.getPhone()),this.getEventAggregator().trigger(b.EVENTS.SET_APPLICATION_STATE,b.STATES.DEALER_SELECTED).trigger(b.EVENTS.SELECTED_DEALER_SYNC,c)},_onChangeSelectedDealerClick:function(a){var c,d=!0;a===b.SELECTED_DEALER_SOURCES.SMART_LOCATION?c=b.STATES.SEARCH:(c=b.STATES.SEARCH_RESULTS,d=!1),this.getEventAggregator().trigger(b.EVENTS.LOCK_STATE,!1).trigger(b.EVENTS.SET_APPLICATION_STATE,c).trigger(b.EVENTS.CLEAR_SELECTED_DEALER,d)},_onSetSelectedDealer:function(b,c,e){this._getModel().set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.DISTANCE,e),b instanceof d?this._onDealerModelSync(b):this._requestDealer(b),
this.stopListening(this._getView(),f.SELECTED_DEALER.EVENTS.CHANGE_SELECTED_DEALER_CLICK).listenTo(this._getView(),f.SELECTED_DEALER.EVENTS.CHANGE_SELECTED_DEALER_CLICK,a.partial(a.bind(this._onChangeSelectedDealerClick,this),c))},_requestDealer:function(a){var c={};c[e.DEALER.OPTIONS.ADDRESS_FIELD_ORDER]=this._getAddressFieldOrder(),c[e.DEALER.OPTIONS.DEALER_ID]=a,c[e.DEALER.OPTIONS.DISTANCE_UNIT]=this.getContentModel().get(e.CONTENT.ATTRIBUTES.DISTANCE_UNIT),c[e.DEALER.OPTIONS.URL_FORMAT]=this.getContentModel().get(e.CONTENT.ATTRIBUTES.DEALER_URL_FORMAT),this._dealerModel=i.getObject(d,null,c).on(e.GENERIC.EVENTS.ERROR,this._onDealerModelError,this).on(e.GENERIC.EVENTS.SYNC,this._onDealerModelSync,this).fetch(),this.getEventAggregator().trigger(b.EVENTS.SET_APPLICATION_STATE,b.STATES.SEARCHING)},getDealerId:function(){return this._getModel().get(e.DEALER.OPTIONS.DEALER_ID)},setDealerId:function(a){return this._getModel().set(e.DEALER.OPTIONS.DEALER_ID,a),this},getDealerName:function(){return this._getModel().get(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.NAME)},lockDealer:function(){this._getModel().set(f.SELECTED_DEALER.VIEW_MODEL.ATTRIBUTES.IS_CHANGE_DEALER_BUTTON_VISIBLE,!1)}})}),define("googleMapsSearcher",["underscore","jquery","googleMapsSingleton","objectFactory"],function(a,b,c,d){"use strict";var e;return e=function(){},e.prototype.getPlaceResultForLocation=function(e){var f=b.Deferred();return c.getDeferred().done(a.bind(function(){var b;e=e||{},b={input:e.location,types:["geocode"]},e.countryRestriction&&(b.componentRestrictions={country:e.countryRestriction}),d.getObject(google.maps.places.AutocompleteService).getPlacePredictions(b,a.bind(function(b,c){c===google.maps.places.PlacesServiceStatus.OK?d.getObject(google.maps.places.PlacesService,document.createElement("div")).getDetails({placeId:a.first(b).place_id},a.bind(function(a,b){b===google.maps.places.PlacesServiceStatus.OK?f.resolve(a):f.reject()},this)):f.reject()},this))},this)),f},e}),define("c_019_25_StartupController",["jquery","c_019_25_ApplicationConstants","c_019_25_ControllerConstants","c_019_25_DealerModel","googleMapsSearcher","heliosLocation","marionette","c_019_25_ModelConstants","logger","objectFactory"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(){return l||(l=new i({prefix:"C19.25 StartupController"}))}var l,m=b.EVENTS,n=b.STATES,o=h.DEALER.OPTIONS,p=h.GENERIC.EVENTS,q=c.STARTUP.OPTIONS,r=b.SEARCH_LOCATION_SOURCES,s=b.SELECTED_DEALER_SOURCES;return g.Object.extend({initialize:function(){this._dealerModelCache=[]},run:function(){k().debug("Checking URL for deep link dealer"),this._getDealerFromDeepLink().done(_.bind(function(a){k().debug("Deep link dealer found in URL"),this._getSmartLocationContext().set((new f).setDealerId(a.getDealerId()))},this)).always(_.bind(function(){k().debug("Checking URL for deep link search location"),this._getSearchLocationFromDeepLink().done(_.bind(function(a){k().debug("Deep link search location found in URL"),this._getSmartLocationContext().set(a)},this)).always(_.bind(function(){k().debug("Checking SmartLocationContext for preferred dealer"),this._getDealerFromSmartLocation().done(_.bind(function(a){k().debug("Dealer found in SmartLocationContext"),this._getEventAggregator().trigger(m.LOCK_STATE,this._getIsTestDriveStockCheckAvailable()).trigger(m.SET_SELECTED_DEALER,a,s.SMART_LOCATION),this._getSearchLocationFromSmartLocation().done(_.bind(function(a){k().debug("Search location found in SmartLocationContext"),this._getEventAggregator().trigger(m.SET_SEARCH_LOCATION,a,r.SMART_LOCATION)},this))},this)).fail(_.bind(function(){k().debug("Dealer not found in SmartLocationContext").debug("Checking SmartLocationContext for search location"),this._getSearchLocationFromSmartLocation().done(_.bind(function(a){k().debug("Search location found in SmartLocationContext"),this._getEventAggregator().trigger(m.SET_SEARCH_LOCATION,a,r.SMART_LOCATION).trigger(m.SET_APPLICATION_STATE,n.SEARCH)},this)).fail(_.bind(function(){k().debug("Search location not found in SmartLocationContext"),this._getDealerFromPreferred().done(_.bind(function(a){k().debug("Dealer found in UserPreferred"),this._getEventAggregator().trigger(m.SET_SELECTED_DEALER,a,s.SMART_LOCATION)},this)).fail(_.bind(function(){k().debug("Dealer not found in UserPreferred"),this._getEventAggregator().trigger(m.SET_APPLICATION_STATE,n.SEARCH)},this))},this))},this))},this))},this))},_getDealerById:function(a,b){var c,e=_.find(this._dealerModelCache,function(b){return b.options[o.DEALER_ID]===a});e?e.isSynced?b.resolve(e):e.isErrored?b.reject():e.on(p.ERROR,b.reject).on(p.SYNC,b.resolve):(c={},c[o.DEALER_ID]=a,c[o.URL_FORMAT]=this._getDealerUrlFormat(),c[o.ADDRESS_FIELD_ORDER]=this._getAddressFieldOrder(),e=j.getObject(d,null,c).on(p.ERROR,b.reject).on(p.SYNC,b.resolve),this._dealerModelCache.push(e),e.fetch())},_getDealerFromDeepLink:function(){var b=this._getDeepLinkDealerId(),c=a.Deferred();return _.isUndefined(b)?c.reject():this._getDealerById(b,c),c},_getDealerFromSmartLocation:function(){var b=a.Deferred();return _.isUndefined(this._getSmartLocationContext())?b.reject():this._getSmartLocationContext().get().done(_.bind(function(a){a.getDealerId()?this._getDealerById(a.getDealerId(),b):b.reject()},this)).fail(b.reject),b},_getDealerFromPreferred:function(){var b,c=a.Deferred(),d=this._getHeliosObject();return a.isNestedProp(d,["config","common","api","storageSettings"])&&d.config.common.api.storageSettings.preferredDealer&&a.isNestedProp(d,["state","dealer","preferred"])&&d.state.dealer.preferred?(b=/\_([0-9].*?)\-/.exec(d.state.dealer.preferred)&&/\_([0-9].*?)\-/.exec(d.state.dealer.preferred)[1],b?this._getDealerById(b,c):c.reject()):c.reject(),c},_getDeepLinkDealerId:function(){return this.options[q.DEEP_LINK_DEALER_ID]},_getDeepLinkSearchLocation:function(){return this.options[q.DEEP_LINK_SEARCH_LOCATION]},_getMarketCountryCode:function(){return this.options[q.MARKET_COUNTRY_CODE]},_getSearchLocationFromDeepLink:function(){var b=a.Deferred();return this._getDeepLinkSearchLocation()?j.getObject(e).getPlaceResultForLocation({countryRestriction:this._getMarketCountryCode(),location:this._getDeepLinkSearchLocation()}).done(_.bind(function(a){b.resolve((new f).setUserLocationFromGooglePlaceResult(a))},this)).fail(b.reject):b.reject(),b},_getSearchLocationFromSmartLocation:function(){var b=a.Deferred();return _.isUndefined(this._getSmartLocationContext())?b.reject():this._getSmartLocationContext().get().done(_.bind(function(a){_.isUndefined(a.getUserAddress())||_.isUndefined(a.getUserLat())||_.isUndefined(a.getUserLng())?b.reject():b.resolve(a)},this)).fail(b.reject),b},_getDealerUrlFormat:function(){return this.options[q.DEALER_URL_FORMAT]},_getAddressFieldOrder:function(){return this.options[q.ADDRESS_FIELD_ORDER]},_getEventAggregator:function(){return this.options[q.EVENT_AGGREGATOR]},_getSmartLocationContext:function(){return this.options[q.SMART_LOCATION_CONTEXT]},_getHeliosObject:function(){return this.options[q.HELIOS_OBJECT]},_getIsTestDriveStockCheckAvailable:function(){return this.options[q.IS_TEST_DRIVE_STOCK_CHECK_AVAILABLE]}})}),define("c_019_25_StateController",["underscore","c_019_25_ApplicationConstants","c_019_25_ControllerConstants","marionette"],function(a,b,c,d){"use strict";var e=b.EVENTS,f=b.STATES,g=c.STATE.OPTIONS;return d.Object.extend({initialize:function(){this._bindEvents()},_bindEvents:function(){this._getEventAggregator()&&this._getEventAggregator().on(e.GO_TO_PREVIOUS_APPLICATION_STATE,this.goToPreviousState,this).on(e.SET_APPLICATION_STATE,this.setState,this).on(e.LOCK_STATE,this._setStateLock,this).on(e.TOGGLE_ERROR_VISIBILITY_PERSISTENCE,this._setErrorVisibilityPersistence,this)},_getDealerListController:function(){return this.options[g.DEALER_LIST_CONTROLLER]},_getErrorController:function(){return this.options[g.ERROR_CONTROLLER]},_getEventAggregator:function(){return this.options[g.EVENT_AGGREGATOR]},_getLoaderController:function(){return this.options[g.LOADER_CONTROLLER]},_getSearchController:function(){return this.options[g.SEARCH_CONTROLLER]},_getSelectedDealerController:function(){return this.options[g.SELECTED_DEALER_CONTROLLER]},_getErrorVisibilityPersistence:function(){return this._errorVisibilityPersistence},_toggleErrorVisibility:function(b){(a.isUndefined(b)?this._getErrorVisibilityPersistence():b)?this._getErrorController().show():this._getErrorController().hide()},_onStateChange:function(){switch(this._state){case f.DEALER_SELECTED:this._getDealerListController().hide(),this._toggleErrorVisibility(!1),this._getLoaderController().hide(),this._getSearchController().hide().enable(),this._getSelectedDealerController().show();break;case f.ERROR:this._getDealerListController().hide(),this._toggleErrorVisibility(!0),this._getLoaderController().hide(),this._getSearchController().show().enable(),this._getSelectedDealerController().hide();break;case f.INITIALIZING:this._getDealerListController().hide(),this._toggleErrorVisibility(!1),this._getLoaderController().show(),this._getSearchController().hide().enable(),this._getSelectedDealerController().hide();break;case f.SEARCH:this._getDealerListController().hide(),this._toggleErrorVisibility(),this._getLoaderController().hide(),this._getSearchController().show().enable(),this._getSelectedDealerController().hide();break;case f.SEARCH_RESULTS:this._getDealerListController().show(),this._toggleErrorVisibility(),this._getLoaderController().hide(),this._getSearchController().show().enable(),this._getSelectedDealerController().hide();break;case f.SEARCHING:this._getDealerListController().hide(),this._toggleErrorVisibility(!1),this._getLoaderController().show(),this._getSearchController().show().disable(),this._getSelectedDealerController().hide()}},goToPreviousState:function(){this.setState(this._previousState)},getCurrentState:function(){return this._state},_setStateLock:function(a){return this._stateLock=a,this},_isStateLocked:function(){return!!this._stateLock||!1},_setErrorVisibilityPersistence:function(a){return this._errorVisibilityPersistence=a,this},setState:function(a){return this._state===a||this._isStateLocked()||(this._previousState=this._state,this._state=a,this._onStateChange()),this}})}),define("c_019_25_TestDriveStockCheckController",["underscore","jquery","marionette","c_019_25_ControllerConstants","c_019_25_ApplicationConstants","c_019_25_ModuleConstants","remoteServices","logger","storageManager"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(){return k||(k=new h({prefix:"C19.25 TestDriveStockCheckController"}))}var k,l=d.TEST_DRIVE_STOCK_CHECK.OPTIONS,m={keys:{dealerIdInForm:"dealerIdInForm",modelId:"modelId"}},n={keys:{lastVisitedVehicle:"lastVisitedVehicle",queryParamsData:"queryParamsData"},localStorage:{mode:"localStorage"},sessionStorage:{mode:"sessionStorage"}};return c.Object.extend({initialize:function(){this._dealersList={},this._errorState={modelNotFoundAtDealer:!1,modelUnavailable:!1,silent:!1},this._loadQueryParamsData(),this._getEventAggregator().trigger(e.EVENTS.LOCK_STATE,!0),this._setErrorSilence(this._isQueryParamInURL(m.keys.dealerIdInForm))},initValidation:function(){this._setSelectedVehicleData(this._lookUpVehicleData()),this._setDealerId(this._lookUpDealerIdInForm()),this._getSmartLocationData().done(a.bind(function(b){b&&(a.isUndefined(b.getDealerId())||this._setDealerId(b.getDealerId()),a.isUndefined(b.getUserAddress())||a.isUndefined(b.getUserLat())||a.isUndefined(b.getUserLng())||this._setSearchLocation(b))},this)).always(a.bind(function(){this._validateBooking(),this._bindEvents()},this))},_bindEvents:function(){this._getEventAggregator().on(e.EVENTS.VEHICLE_SELECTION_CHANGED,this._onVehicleSelectionChange,this).on(e.EVENTS.SET_SELECTED_DEALER,this._onSetSelectedDealer,this).on(e.EVENTS.SET_SEARCH_LOCATION,this._onSearchLocationChange,this).on(e.EVENTS.DEALER_SEARCH_COMPLETE_ZERO_RESULTS,this._onNoStockFoundForModel,this)},getModelId:function(){return this._getSelectedVehicleData()&&this._getSelectedVehicleData().modelId},getTestDriveModelId:function(){return this._getSelectedVehicleData()&&this._getSelectedVehicleData().testDriveModelId},_getSelectedVehicleData:function(){return this._selectedVehicleData},_getDealerId:function(){return this._dealerId},_getSearchLocation:function(){return this._searchLocation},_getValidationActive:function(){return this._validationActive},_getDealersList:function(){return this._dealersList},_getQueryParamsData:function(){return this._queryParamsData},_getErrorModelNotFoundAtDealer:function(){return this._errorState.modelNotFoundAtDealer},_getErrorModelUnavailable:function(){return this._errorState.modelUnavailable},_getErrorSilence:function(){return this._errorState.silent},_setSelectedVehicleData:function(a){return a&&a.modelId&&this._isModelIdValid(a.modelId)||(a=null),a&&a.modelId&&this._saveSessionModelId(a.modelId),this._selectedVehicleData=a,this._getEventAggregator().trigger(e.EVENTS.TEST_DRIVE_MODEL_CHANGED,this._getSelectedVehicleData()),this},_setDealerId:function(b){return this._dealerId=a.isObject(b)?b.get(f.VEHICLE_SELECTOR.VIEW_MODEL.ATTRIBUTES.DEALER_ID):b,this},_setSearchLocation:function(a){return this._searchLocation=a,this},_setValidationActive:function(a){return this._validationActive=a,this},_setDealersList:function(a){return this._isModelIdSet()&&(this._dealersList[this.getModelId()]=a),this},_setQueryParamsData:function(a){return this._queryParamsData=a,this},_setErrorModelNotFoundAtDealer:function(a){return this._errorState.modelNotFoundAtDealer=a,this},_setErrorModelUnavailable:function(a){return this._errorState.modelUnavailable=a,this},_setErrorSilence:function(a){return this._errorState.silent=a,this},_isModelIdSet:function(){return!!this.getModelId()},_isDealerIdSet:function(){return!!this._getDealerId()},_isSearchLocationSet:function(){return!!this._getSearchLocation()},_isValidationActive:function(){return!!this._getValidationActive()},isModelNotFoundAtDealer:function(){return!!this._getErrorModelNotFoundAtDealer()},_isModelUnavailable:function(){return!!this._getErrorModelUnavailable()},_validateBooking:function(){this._isValidationActive()||(this._setValidationActive(!0),this._checkModelIsInStock().done(a.bind(function(a){a?this._setErrorModelNotFoundAtDealer(!1)._setErrorModelUnavailable(!1)._setErrorSilence(!1):this._setErrorModelNotFoundAtDealer(!0)._setErrorModelUnavailable(!1)},this)).always(a.bind(function(){this._setValidationActive(!1)._eventHandler()},this)))},_eventHandler:function(){j().debug("Current error state: "+JSON.stringify(this._errorState)),j().debug("Is test drive model currently set: "+this._isModelIdSet()),this._getEventAggregator().trigger(e.EVENTS.LOCK_STATE,!1),this._isModelUnavailable()&&this._isModelIdSet()?this._onNoStockFoundForModel():this.isModelNotFoundAtDealer()&&this._isModelIdSet()?this._noStockFoundAtDealer():(this._getEventAggregator().trigger(e.EVENTS.TOGGLE_ERROR_VISIBILITY_PERSISTENCE,!1),this._isDealerIdSet()?this._getEventAggregator().trigger(e.EVENTS.SET_APPLICATION_STATE,e.STATES.DEALER_SELECTED).trigger(e.EVENTS.LOCK_STATE,!0):this._isSearchLocationSet()&&this._getEventAggregator().trigger(e.EVENTS.TRIGGER_SEARCH,this._getSearchLocation(),e.SEARCH_LOCATION_SOURCES.SMART_LOCATION).trigger(e.EVENTS.SET_APPLICATION_STATE,e.STATES.SEARCH_RESULTS))},_onVehicleSelectionChange:function(a){a&&this.getModelId()!==a.modelId&&(this._setSelectedVehicleData(a),this._saveSessionModelId(a.modelId)),this._getEventAggregator().trigger(e.EVENTS.TOGGLE_ERROR_VISIBILITY_PERSISTENCE,!1),this._isModelIdSet()&&(this._getEventAggregator().trigger(e.EVENTS.NO_TEST_DRIVE_STOCK_FOUND,!1),this._validateBooking()),this._isValidationActive()||this._setErrorSilence(!1)},_onSearchLocationChange:function(a){a&&a.location&&a.location.locationId&&this._setSearchLocation(a),this._getEventAggregator().trigger(e.EVENTS.TOGGLE_ERROR_VISIBILITY_PERSISTENCE,!1),this._isValidationActive()||this._setErrorSilence(!1)},_onSetSelectedDealer:function(a,b){b!==e.SELECTED_DEALER_SOURCES.SMART_LOCATION&&(this._setDealerId(a),this._validateBooking())},_onNoStockFoundForModel:function(){this._getEventAggregator().trigger(e.EVENTS.NO_TEST_DRIVE_STOCK_FOUND,!0)},_checkModelIsInStock:function(){var c=b.Deferred();return this._isModelIdSet()&&this._isDealerIdSet()?this._getDealersList()[this.getModelId()]?c.resolve(this._isModelInStock(this._getDealersList()[this.getModelId()],this._getDealerId())):this._requestDealersList().done(a.bind(function(a){0===a.totalResults?(this._setErrorModelUnavailable(!0),c.reject()):(c.resolve(this._isModelInStock(a.dealers,this._getDealerId())),this._setDealersList(a.dealers))},this)).fail(c.reject):c.reject(),c},_requestDealersList:function(){var a={testDriveModel:this.getTestDriveModelId()};return g.getDealers("-1",a)},_isModelInStock:function(b,c){return!!a.findWhere(b,{dealerId:c})},_isModelIdValid:function(b){return!!a.findWhere(this._getVehicleData(),{modelId:b})},_noStockFoundAtDealer:function(){this._getErrorSilence()?(this._getEventAggregator().trigger(e.EVENTS.TOGGLE_ERROR_VISIBILITY_PERSISTENCE,!1).trigger(e.EVENTS.SET_APPLICATION_STATE,e.STATES.SEARCH_RESULTS),this._setErrorSilence(!1)):this._getEventAggregator().trigger(e.EVENTS.NO_TEST_DRIVE_STOCK_FOUND_AT_DEALER).trigger(e.EVENTS.TOGGLE_ERROR_VISIBILITY_PERSISTENCE,!0),this._isSearchLocationSet()&&this._getEventAggregator().trigger(e.EVENTS.TRIGGER_SEARCH,this._getSearchLocation(),e.SEARCH_LOCATION_SOURCES.SMART_LOCATION)},_getSmartLocationData:function(){var a=b.Deferred();return this._getSmartLocationContext().get().done(a.resolve).fail(a.reject),a},_loadQueryParamsData:function(){var a=i.loadItem(n.keys.queryParamsData,n.sessionStorage);a&&this._setQueryParamsData(a)},_lookUpDealerIdInForm:function(){return this._lookUpFromSession(m.keys.dealerIdInForm)},_lookUpVehicleData:function(){var b=this._loadURLVehicleId()||this._loadSessionVehicleId();return a.findWhere(this._getVehicleData(),{modelId:b})},_loadSessionVehicleId:function(){var a,b=i.loadItem(n.keys.lastVisitedVehicle,n.localStorage);return b&&(a=b),a},_loadURLVehicleId:function(){return this._lookUpFromSession(m.keys.modelId)},_saveSessionModelId:function(a){i.saveItem(n.keys.lastVisitedVehicle,a,n.localStorage)},_isQueryParamInURL:function(a){return new RegExp("[?&]"+a+"=").test(this._getWindow().location.search)},_lookUpFromSession:function(a){var b,c;if(a&&this._isQueryParamInURL(a))return c=this._getQueryParamsData(),c&&c[a]&&(b=c[a]),b},_getVehicleData:function(){return this.options[l.VEHICLE_DATA]},_getEventAggregator:function(){return this.options[l.EVENT_AGGREGATOR]},_getSmartLocationContext:function(){return this.options[l.SMART_LOCATION_CONTEXT]},_getWindow:function(){return this.options[l.WINDOW]}})}),define("c_019_25_MainController",["underscore","c_019_25_ApplicationConstants","c_019_25_AnalyticsController","c_019_25_ControllerConstants","c_019_25_DealerListController","c_019_25_DealerSearchController","c_019_25_VehicleSelectorController","c_019_25_ErrorController","c_019_25_GeolocationController","heliosLocation","c_019_25_LoaderController","marionette","c_019_25_ModelConstants","c_019_25_ModuleConstants","objectFactory","c_019_25_SearchController","c_019_25_SelectedDealerController","c_019_25_StartupController","c_019_25_StateController","c_019_25_TestDriveStockCheckController","trackingCodes"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";var v=b.EVENTS,w=b.STATES,x=n.MAIN.CONTROLLER_EVENTS,y=n.MAIN.CONTROLLER_OPTIONS,z=n.MAIN.REGIONS;return l.Object.extend({initialize:function(){this._bindEvents()._renderMainView()._initSelectedDealer()._initDealerList()._initError()._initTestDriveStockCheck()._initGeolocation()._initDealerSearch()._initLoader()._initSearch()._initVehicleSelector()._initStartupController()._initStateController()._initAnalyticsController(),this._startupController.run()},_bindEvents:function(){return this._getEventAggregator().on(v.CLEAR_SELECTED_DEALER,this._onClearSelectedDealer,this).on(v.SET_SEARCH_LOCATION,this._onSetSearchLocation,this).on(v.SET_SELECTED_DEALER,this._onSetSelectedDealer,this).on(v.SELECTED_DEALER_SYNC,this._onSelectedDealerSync,this).on(v.VEHICLE_SELECTION_CHANGED,this._onVehicleSelectionChange,this).on(v.TEST_DRIVE_MODEL_CHANGED,this._onTestDriveModelChange,this).on(v.NO_TEST_DRIVE_STOCK_FOUND,this._onNoTestDriveStockFound,this).on(v.SET_APPLICATION_STATE,this._handleSelectLocationInstructionVisibility,this),this},_getAnalyticsManager:function(){return this.options[y.ANALYTICS_MANAGER]},_getContentModel:function(){return this.options[y.CONTENT]},_getControllerOptionsObject:function(a){var b=n.BASE_CONTROLLER.OPTIONS,c={};return c[b.CONTENT]=this._getContentModel(),c[b.EVENT_AGGREGATOR]=this._getEventAggregator(),c[b.REGION]=this._getMainView()[a],c[b.WINDOW]=this._getWindow(),c},_getDeepLinkDealerFilterRequestParamValues:function(){return this.options[y.DEEP_LINK_DEALER_FILTER_REQUEST_PARAM_VALUES]},_getDeepLinkDealerId:function(){return this.options[y.DEEP_LINK_DEALER_ID]},_getDeepLinkLdid:function(){return this.options[y.DEEP_LINK_LDID]},_getDeepLinkSearchLocation:function(){return this.options[y.DEEP_LINK_SEARCH_LOCATION]},_getEventAggregator:function(){return this.options[y.EVENT_AGGREGATOR]},_getHeliosObject:function(){return this.options[y.HELIOS_OBJECT]},_getMainView:function(){return this.options.mainView},_getSmartLocationContext:function(){return this.options[y.SMART_LOCATION_CONTEXT]},_getWindow:function(){return this.options[y.WINDOW]},_initTestDriveStockCheck:function(){var a={};return this._getContentModel().getIsTestDriveStockCheckEnabled()&&(a[d.TEST_DRIVE_STOCK_CHECK.OPTIONS.EVENT_AGGREGATOR]=this._getEventAggregator(),a[d.TEST_DRIVE_STOCK_CHECK.OPTIONS.SMART_LOCATION_CONTEXT]=this._getSmartLocationContext(),a[d.TEST_DRIVE_STOCK_CHECK.OPTIONS.VEHICLE_DATA]=this._getContentModel().getVehicleSelectorData(),a[n.BASE_CONTROLLER.OPTIONS.WINDOW]=this._getWindow(),this._testDriveStockCheckController=new t(a),this._testDriveStockCheckController.initValidation()),this},_initDealerList:function(){var a=this._getControllerOptionsObject(z.DEALER_LIST);return a[n.DEALER_LIST.CONTROLLER_OPTIONS.DEALER_TYPE_ICON_SETTINGS]=this._getHeliosObject().components.c_019_25.settings.dealerTypeIcons,a[n.DEALER_LIST.CONTROLLER_OPTIONS.SELECTED_DEALER_CONTROLLER]=this._selectedDealerController,a[n.DEALER_LIST.CONTROLLER_OPTIONS.IS_CONFIGURATOR]=this.options.isConfigurator,a[n.DEALER_LIST.CONTROLLER_OPTIONS.MAPPING_DATA]=this.options.mappingData,this._dealerListController=new e(a),this},_setDealerServiceMapping:function(a,b){this._getControllerOptionsObject(z.DEALER_LIST)[n.DEALER_LIST.CONTROLLER_OPTIONS.DEALER_TYPE_ICON_SETTINGS]=this._getHeliosObject().components.c_019_25.settings.dealerTypeIcons},_initError:function(){return this._errorController=new h(this._getControllerOptionsObject(z.ERROR)),this},_initGeolocation:function(){var a=n.BASE_CONTROLLER.OPTIONS,b={};return b[a.EVENT_AGGREGATOR]=this._getEventAggregator(),b[a.WINDOW]=this._getWindow(),this._geolocationController=new i(b),this},_initDealerSearch:function(){var b=this._getContentModel(),c=d.DEALER_SEARCH.OPTIONS,e=this._getDeepLinkDealerFilterRequestParamValues(),g={};return g[c.ADDRESS_FIELD_ORDER]=b.getAddressFieldOrder(),g[c.DISTANCE_UNIT]=b.getDistanceUnit(),g[c.EVENT_AGGREGATOR]=this._getEventAggregator(),g[c.IS_SEARCH_ON_STARTUP_ENABLED]=b.getIsSearchOnStartupEnabled(),g[c.MAX_RESULT_COUNT]=b.getMaxResultCount(),g[c.IS_DEALER_ACCEPTS_LEADS_MANDATORY]=b.getIsShowOnlyDealersWhoAcceptLeadsEnabled(),g[c.MAPPING_DATA]=this.options.mappingData,g[c.IS_CONFIGURATOR]=this.options.isConfigurator,g[c.SERVICE_FILTERS]=a.chain(b.getDealerFilterGroups()).map(function(b){return a.chain(b.filters).filter(function(b){return(!0===b.applyOnLoad||a.contains(e,b.requestParamValue))&&a.isArray(b.serviceIds)}).pluck("serviceIds").value()}).flatten().uniq().value(),g[c.SERVICE_FILTER_TYPE]=b.getServiceFilterType(),g[c.WINDOW]=this._getWindow(),g[c.TEST_DRIVE_MODEL_ID]=this._testDriveStockCheckController&&this._testDriveStockCheckController.getTestDriveModelId(),g[c.CONTENT]=this._getContentModel(),this._dealerSearchController=new f(g),this},_initLoader:function(){return this._loaderController=new k(this._getControllerOptionsObject(z.LOADER)),this},_initSearch:function(){return this._searchController=new p(this._getControllerOptionsObject(z.SEARCH)),this},_initSelectedDealer:function(){var a=this._getControllerOptionsObject(z.SELECTED_DEALER);return a[n.SELECTED_DEALER.CONTROLLER.OPTIONS.ADDRESS_FIELD_ORDER]=this._getContentModel().getAddressFieldOrder(),a[n.SELECTED_DEALER.CONTROLLER.OPTIONS.DEALER_TYPE_ICON_SETTINGS]=this._getHeliosObject().components.c_019_25.settings.dealerTypeIcons,this._selectedDealerController=new q(a),this},_initVehicleSelector:function(){var a;return this._testDriveStockCheckController&&(a=this._getControllerOptionsObject(z.VEHICLE_SELECTOR),a[n.VEHICLE_SELECTOR.CONTROLLER.OPTIONS.ACTIVE_MODEL_ID]=this._testDriveStockCheckController&&this._testDriveStockCheckController.getModelId(),this._vehicleSelectorController=new g(a)),this},_initStartupController:function(){var a={},b=d.STARTUP.OPTIONS;return a[b.DEALER_URL_FORMAT]=this._getContentModel().getDealerUrlFormat(),a[b.ADDRESS_FIELD_ORDER]=this._getContentModel().getAddressFieldOrder(),a[b.DEEP_LINK_DEALER_ID]=this._getDeepLinkDealerId(),a[b.DEEP_LINK_SEARCH_LOCATION]=this._getDeepLinkSearchLocation(),a[b.EVENT_AGGREGATOR]=this._getEventAggregator(),a[b.MARKET_COUNTRY_CODE]=this._getWindow().HELIOS.config.common.countryCode,a[b.SMART_LOCATION_CONTEXT]=this._getSmartLocationContext(),a[b.HELIOS_OBJECT]=this._getHeliosObject(),a[b.IS_TEST_DRIVE_STOCK_CHECK_AVAILABLE]=!!this._testDriveStockCheckController,this._startupController=new r(a),this},_initStateController:function(){var a={},b=d.STATE.OPTIONS;return a[b.DEALER_LIST_CONTROLLER]=this._dealerListController,a[b.ERROR_CONTROLLER]=this._errorController,a[b.EVENT_AGGREGATOR]=this._getEventAggregator(),a[b.LOADER_CONTROLLER]=this._loaderController,a[b.SEARCH_CONTROLLER]=this._searchController,a[b.SELECTED_DEALER_CONTROLLER]=this._selectedDealerController,this._stateController=new s(a),this._getEventAggregator().trigger(v.SET_APPLICATION_STATE,w.INITIALIZING),this},_initAnalyticsController:function(){var a={},b=d.ANALYTICS.OPTIONS;return a[b.EVENT_AGGREGATOR]=this._getEventAggregator(),a[b.ANALYTICS_MANAGER]=this._getAnalyticsManager(),a[b.TRACKING_CODES]=u,a[b.ANALYTICS_SETTINGS]=this._getHeliosObject().components.c_019_25.settings.analytics,this._analyticsController=o.getObject(c,a),this},_onClearSelectedDealer:function(){this._selectedDealerController.setDealerId(void 0),this._getMainView().model.setDealerId(void 0).setDealerName(void 0),this._setIsSelectLocationInstructionVisible(!0),this._setIsDealerSet(!1)},_onSelectedDealerSync:function(a){this._getMainView().model.setDealerId(a.getDealerId()).setDealerName(a.getName())},_onVehicleSelectionChange:function(a){a&&a.modelId&&a.name&&this._getMainView().model.setModelId(a.modelId).setModelName(a.name)},_onTestDriveModelChange:function(a){var b=!!a||!1;this._setModelIsDealerLocatorVisible(b),this._setIsTestDriveModelSet(b),this._handleSelectLocationInstructionVisibility(b)},_onNoTestDriveStockFound:function(a){this._setModelIsDealerLocatorVisible(!a||!1)},_onSetSearchLocation:function(c,d){var e=b.SEARCH_LOCATION_SOURCES;a.contains([e.GEO_LOCATION,e.USER_SELECT],d)&&this._getSmartLocationContext().set(c),this._setIsLocationSet(!0)},_onSetSelectedDealer:function(a,c){c===b.SELECTED_DEALER_SOURCES.USER_SELECT?(this._getSmartLocationContext().set((new j).setDealerId(a)),this.trigger(x.DEALER_SELECTED_BY_USER)):c===b.SELECTED_DEALER_SOURCES.SMART_LOCATION&&!0===this._getDeepLinkLdid()&&this._selectedDealerController.lockDealer(),this._setIsDealerSet(!0)},_setIsSelectLocationInstructionVisible:function(a){this._getMainView().model.setIsSelectLocationInstructionVisible(a)},_setModelIsDealerLocatorVisible:function(a){this._getMainView().model.setIsDealerLocatorVisible(a)},_setIsLocationSet:function(a){return this._isLocationSet=a,this},_getIsLocationSet:function(){return this._isLocationSet},_setIsDealerSet:function(a){return this._isDealerSet=a,this},_getIsDealerSet:function(){return this._isDealerSet},_setIsTestDriveModelSet:function(a){return this._isTestDriveModelSet=a,this},_getIsTestDriveModelSet:function(){return this._isTestDriveModelSet},_getCurrentApplicationState:function(){return this._stateController&&this._stateController.getCurrentState()},_handleSelectLocationInstructionVisibility:function(a){var b=!1;if(!this._getMainView().model.isSelectLocationInstructionSet()||!this._getCurrentApplicationState()||a===w.INITIALIZING)return!1;!this._getIsTestDriveModelSet()||this._getIsDealerSet()||this._getIsLocationSet()||(b=!0),!this._getIsLocationSet()&&this._testDriveStockCheckController.isModelNotFoundAtDealer()&&(b=!0),this._setIsSelectLocationInstructionVisible(b)},_renderMainView:function(){return this._getMainView().render(),this}})}),define("hbars!/components/c_019-25/scripts/app/modules/main/html/mainTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return"validate required"}function g(a,b){var d,e,f="";return f+='\n        <input class="model-id validate required" name="',(e=c.modelIdElementName)?d=e.call(a,{hash:{},data:b}):(e=a&&a.modelIdElementName,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'" type="hidden" />\n    '}function h(a,b){var d,e,f="";return f+='\n        <input class="model-name validate required" name="',(e=c.modelNameElementName)?d=e.call(a,{hash:{},data:b}):(e=a&&a.modelNameElementName,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'" type="hidden" />\n    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this;return k+='<p class="select-location-instruction">',(j=c.selectLocationInstruction)?i=j.call(b,{hash:{},data:e}):(j=b&&b.selectLocationInstruction,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+'</p>\n<div class="vehicle-selector"></div>\n<div class="dealer-locator-main">\n    <div class="search"></div>\n    <div class="error"></div>\n    <div class="selected-dealer"></div>\n    <div class="loader"></div>\n    <div class="dealer-list"></div>\n</div>\n<div class="form-fields">\n    <input class="dealer-id ',i=c.if.call(b,b&&b.isSelectedDealerMandatory,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+='" name="',(j=c.dealerIdElementName)?i=j.call(b,{hash:{},data:e}):(j=b&&b.dealerIdElementName,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+'" type="hidden" />\n    <input class="dealer-name ',i=c.if.call(b,b&&b.isSelectedDealerMandatory,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+='" name="',(j=c.dealerNameElementName)?i=j.call(b,{hash:{},data:e}):(j=b&&b.dealerNameElementName,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+'" type="hidden" />\n\n    ',i=c.if.call(b,b&&b.modelIdElementName,{hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e}),(i||0===i)&&(k+=i),k+="\n    ",i=c.if.call(b,b&&b.modelNameElementName,{hash:{},inverse:n.noop,fn:n.program(5,h,e),data:e}),(i||0===i)&&(k+=i),k+="\n</div>\n"})}),define("c_019_25_MainView",["c_019_25_ApplicationConstants","backbone","marionette","c_019_25_ModuleConstants","hbars!/components/c_019-25/scripts/app/modules/main/html/mainTemplate"],function(a,b,c,d,e){"use strict";return b.Marionette.LayoutView.extend({modelEvents:function(){var a={};return a["change:"+d.MAIN.VIEW_MODEL.ATTRIBUTES.DEALER_ID]="_onDealerIdChange",a["change:"+d.MAIN.VIEW_MODEL.ATTRIBUTES.DEALER_NAME]="_onDealerNameChange",a["change:"+d.MAIN.VIEW_MODEL.ATTRIBUTES.MODEL_ID]="_onModelIdChange",a["change:"+d.MAIN.VIEW_MODEL.ATTRIBUTES.MODEL_NAME]="_onModelNameChange",
a["change:"+d.MAIN.VIEW_MODEL.ATTRIBUTES.IS_DEALER_LOCATOR_VISIBLE]="_setDealerLocatorMainVisibility",a["change:"+d.MAIN.VIEW_MODEL.ATTRIBUTES.IS_SELECT_LOCATION_INSTRUCTION_VISIBLE]="_setSelectLocationInstructionVisibility",a},onBeforeRender:function(){this.$el.addClass(a.CSS_CLASSES.INITIALIZED)},regions:function(){var a={},b=d.MAIN.REGIONS,c=d.MAIN.SELECTORS;return a[b.DEALER_LIST]=c.DEALER_LIST,a[b.ERROR]=c.ERROR,a[b.LOADER]=c.LOADER,a[b.SEARCH]=c.SEARCH,a[b.SELECTED_DEALER]=c.SELECTED_DEALER,a[b.VEHICLE_SELECTOR]=c.VEHICLE_SELECTOR,a},template:e,ui:{dealerIdInput:d.MAIN.VIEW.SELECTORS.DEALER_ID_INPUT,dealerNameInput:d.MAIN.VIEW.SELECTORS.DEALER_NAME_INPUT,modelIdInput:d.MAIN.VIEW.SELECTORS.MODEL_ID_INPUT,modelNameInput:d.MAIN.VIEW.SELECTORS.MODEL_NAME_INPUT,dealerLocatorMain:d.MAIN.VIEW.SELECTORS.DEALER_LOCATOR_MAIN,selectLocationInstruction:d.MAIN.VIEW.SELECTORS.SELECT_LOCATION_INSTRUCTION},onRender:function(){this._setDealerLocatorMainVisibility(),this._setSelectLocationInstructionVisibility()},_onDealerIdChange:function(a,b){this.ui.dealerIdInput.val(b)},_onDealerNameChange:function(a,b){this.ui.dealerNameInput.val(b)},_onModelIdChange:function(a,b){this.ui.modelIdInput.val(b)},_onModelNameChange:function(a,b){this.ui.modelNameInput.val(b)},_setDealerLocatorMainVisibility:function(){this.model.getIsDealerLocatorVisible()?this.ui.dealerLocatorMain.removeClass(d.GENERIC_CSS_CLASSES.HIDDEN).attr(d.ARIA_TAGS.ARIA_HIDDEN,!1):this.ui.dealerLocatorMain.addClass(d.GENERIC_CSS_CLASSES.HIDDEN).attr(d.ARIA_TAGS.ARIA_HIDDEN,!0)},_setSelectLocationInstructionVisibility:function(){this.model.getIsSelectLocationInstructionVisible()?this.ui.selectLocationInstruction.removeClass(d.GENERIC_CSS_CLASSES.HIDDEN).attr(d.ARIA_TAGS.ARIA_HIDDEN,!1):this.ui.selectLocationInstruction.addClass(d.GENERIC_CSS_CLASSES.HIDDEN).attr(d.ARIA_TAGS.ARIA_HIDDEN,!0)}})}),define("c_019_25_MainViewModel",["backbone","c_019_25_ModuleConstants"],function(a,b){"use strict";var c=b.MAIN.VIEW_MODEL.ATTRIBUTES;return a.Model.extend({defaults:function(){var a={};return a[c.IS_DEALER_LOCATOR_VISIBLE]=!0,a[c.IS_SELECT_LOCATION_INSTRUCTION_VISIBLE]=!1,a},setDealerId:function(a){return this.set(c.DEALER_ID,a),this},setDealerIdElementName:function(a){return this.set(c.DEALER_ID_ELEMENT_NAME,a),this},setDealerName:function(a){return this.set(c.DEALER_NAME,a),this},setDealerNameElementName:function(a){return this.set(c.DEALER_NAME_ELEMENT_NAME,a),this},setIsSelectedDealerMandatory:function(a){return this.set(c.IS_SELECTED_DEALER_MANDATORY,a),this},setModelId:function(a){return this.set(c.MODEL_ID,a),this},setModelIdElementName:function(a){return this.set(c.MODEL_ID_ELEMENT_NAME,a),this},setModelName:function(a){return this.set(c.MODEL_NAME,a),this},setModelNameElementName:function(a){return this.set(c.MODEL_NAME_ELEMENT_NAME,a),this},getIsDealerLocatorVisible:function(){return this.get(c.IS_DEALER_LOCATOR_VISIBLE)},setIsDealerLocatorVisible:function(a){return this.set(c.IS_DEALER_LOCATOR_VISIBLE,a),this},isSelectLocationInstructionSet:function(){return!!this.get(c.SELECT_LOCATION_INSTRUCTION)},setSelectLocationInstruction:function(a){return this.set(c.SELECT_LOCATION_INSTRUCTION,a),this},getIsSelectLocationInstructionVisible:function(){return this.get(c.IS_SELECT_LOCATION_INSTRUCTION_VISIBLE)},setIsSelectLocationInstructionVisible:function(a){return this.set(c.IS_SELECT_LOCATION_INSTRUCTION_VISIBLE,a),this}})}),define("c_019_25",["underscore","jquery","c_019_25_ApplicationConstants","backbone","c_019_25_ContentModel","c_019_25_MainController","c_019_25_MainView","c_019_25_MainViewModel","marionette","c_019_25_ModelConstants","c_019_25_ModuleConstants","objectFactory","storageManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function n(a,c){this.settings=b.extend({},o,c),this.defaults=o,this.$el=a,this.$el&&this.$el.length&&this.init(c)}var o={selectors:{root:".c_019-25"}};return n.prototype.init=function(a){this.createApplication(this.$el)},n.prototype.createApplication=function(e){var f=new i.Application({showSelectedDealerRequiredMessage:function(){this.eventAggregator.trigger(c.EVENTS.DISPLAY_SELECTED_DEALER_REQUIRED_MESSAGE)}}),g=this.getContentModel(e),h=this.settings.eventAggregator?this.settings.eventAggregator:a.extend({},d.Events);f.eventAggregator=h,f.mainView=this.getMainView(e,h,this.getMainViewModel(g)),f.mainController=this.getMainController(f.mainView,g,h,this.getHeliosObject()),f.mainController.on(k.MAIN.CONTROLLER_EVENTS.DEALER_SELECTED_BY_USER,function(){b("html, body").animate({scrollTop:b(e).offset().top})}),b(e).data("DealerLocatorInstance",f)},n.prototype.getContentModel=function(c){var d,f,g=b(c).find("script[data-content]");try{d=JSON.parse(a.unescape(g.html())),d[j.CONTENT.ATTRIBUTES.LOCATION_SEARCH_ELEMENT_ID]=a.uniqueId("Location-"),f=new e(d)}catch(e){throw new Error("Cannot parse C19.25 JSON")}return f},n.prototype.getDeepLinkDealerId=function(){var a=/[?&]dealerIdInForm=([^&]*)/.exec(this.settings.window.location.search);return a&&this.settings.window.decodeURIComponent(a[1])||void 0},n.prototype.getDeepLinkLdid=function(){var a=/[?&]ldid=([^&]*)/.exec(this.settings.window.location.search);if(a&&a.length>1)try{return JSON.parse(this.settings.window.decodeURIComponent(a[1]).toLowerCase())}catch(e){return}},n.prototype.getDeepLinkFilterRequestParamValues=function(){var b,c=/[?&]dealerFilters=([^&]*)/.exec(this.settings.window.location.search);return c&&(b=a.map(c[1].split(","),this.settings.window.decodeURIComponent)),b||[]},n.prototype.getDeepLinkSearchLocation=function(){var a=/[?&]dealersNearLocation=([^&]*)/.exec(this.settings.window.location.search);return a&&this.settings.window.decodeURIComponent(a[1])||void 0},n.prototype.getHeliosObject=function(){return this.settings.HELIOS},n.prototype.getMainController=function(b,c,d,e){var g=k.MAIN.CONTROLLER_OPTIONS,h=this.$el.find("script[data-model-dealer]"),i={};return i[g.CONTENT]=c,i[g.DEEP_LINK_DEALER_FILTER_REQUEST_PARAM_VALUES]=this.getDeepLinkFilterRequestParamValues(),i[g.DEEP_LINK_DEALER_ID]=this.getDeepLinkDealerId(),i[g.DEEP_LINK_LDID]=this.getDeepLinkLdid(),i[g.DEEP_LINK_SEARCH_LOCATION]=this.getDeepLinkSearchLocation(),i[g.EVENT_AGGREGATOR]=d,i[g.HELIOS_OBJECT]=e,i[g.MAIN_VIEW]=b,i[g.SMART_LOCATION_CONTEXT]=this.settings.smartLocationContext,i[g.WINDOW]=this.settings.window,i[g.IS_CONFIGURATOR]=this.settings.isConfigurator,i[g.ANALYTICS_MANAGER]=this.settings.analyticsManager,h&&h.length&&(i[g.MAPPING_DATA]=JSON.parse(a.unescape(h.html()))),l.getObject(f,i)},n.prototype.getMainViewModel=function(a){return(new h).setDealerIdElementName(a.getDealerIdElementName()).setDealerNameElementName(a.getDealerNameElementName()).setIsSelectedDealerMandatory(a.getIsSelectedDealerMandatory())},n.prototype.getMainView=function(a,b,c){var d={el:a,model:c};return d[k.MAIN.VIEW.OPTIONS.EVENT_AGGREGATOR]=b,new g(d)},n}),define("c_019_26",["jquery","underscore","jqueryUtilityPlugins","storageManager"],function(a,b,c,d){"use strict";function e(b,c){this.settings=a.extend({},i,c),this.defaults=i,this.$el=b,this.init(c)}var f,g,h,i={selectors:{root:".c_019-26",vehicleSelect:".your-vehicle",formGroup:".form-group",customRadio:".custom-radio",selectionOne:"#operationType1",selectionTwo:"#operationType2",yourVehicles:".your-vehicles"},data:{url:"url",currentMileage:"[data-name=currentMileage]",firstRegistrationDate:"[data-name=firstRegistrationDate]",annualMileage:"[data-name=annualMileage]",vin:"[data-name=vin]",modelName:"[data-name=modelName]",registrationNumber:"[data-name=registrationNumber]",brand:"[data-name=brand]"},states:{checked:"checked",disabled:"disabled"},classes:{hidden:"hidden"},events:{change:"change"},storageSettings:{currentMileage:"currentMileage",firstRegistrationDate:"firstRegistrationDate",annualMileage:"annualMileage",brand:"brand"},isLoggedIn:!1,cookie:{ownerServicesLoggedInCookie:"OwnerServicesLoggedInName"}},j={cookie:{mode:"cookie"}},k={};return e.prototype.init=function(b){if(f=a(this.settings.selectors.root),!f.length)return!1;d.init(),this.bindEvents(),this.checkLoginState()},e.prototype.getVehicleData=function(){(g=f.data(this.settings.data.url))&&(h=a.ajax({url:g,dataType:"json"}),h.done(b.bind(function(a){this.populateVehicleDropDown(a)},this)).fail(function(){k={}}))},e.prototype.populateVehicleDropDown=function(c){var d;k=c,k&&b.isArray(k.owned)?(b.each(k.owned,b.bind(function(b){d=a("<option />"),d.text(b.vehicleName).val(b.vin),a(this.settings.selectors.vehicleSelect).append(d)},this)),this.toggleRadioButton(k.owned),k=b.indexBy(k.owned,"vin"),this.isSingleDropdown(k)?a(this.settings.selectors.vehicleSelect).val(b.keys(k)).trigger(this.settings.events.change):a(this.settings.selectors.vehicleSelect).val(b.first(b.keys(k))).trigger(this.settings.events.change)):k={}},e.prototype.toggleRadioButton=function(b){var c,d=a(this.settings.selectors.formGroup).find(this.settings.selectors.customRadio);this.isVehicleOwner(b)?d.find(this.settings.selectors.selectionTwo).prop(this.settings.states.checked,!0):(c=a(this.settings.selectors.yourVehicles),d.find(this.settings.selectors.selectionOne).prop(this.settings.states.checked,!0).end().find(this.settings.selectors.selectionTwo).prop(this.settings.states.disabled,!0),c.addClass(this.settings.classes.hidden))},e.prototype.isSingleDropdown=function(a){return 1===Object.keys(a).length},e.prototype.isVehicleOwner=function(a){return!b.isEmpty(a)},e.prototype.lookUpLoggedInCookie=function(){var a=d.loadItem(this.settings.cookie.ownerServicesLoggedInCookie,j.cookie);this.setIsLoggedIn(a)},e.prototype.setIsLoggedIn=function(a){this.settings.isLoggedIn=!!a},e.prototype.isLoggedIn=function(){return this.settings.isLoggedIn},e.prototype.toggleEditableFields=function(c){b.each(c,b.bind(function(b){b.is(":disabled")?this.setRadioButtonState(b,this.settings.states.disabled,!1):b.val()&&(b[0].id===this.settings.storageSettings.firstRegistrationDate?a("#"+b[0].id).prop(this.settings.states.disabled,!0).next().prop(this.settings.states.disabled,!0):this.setRadioButtonState(b,this.settings.states.disabled,!0))},this))},e.prototype.setRadioButtonState=function(c,d,e){b.each(c,function(b){a(b).prop(d,e)})},e.prototype.getHeliosStorageSettings=function(){if(a.isNestedProp(this.settings.HELIOS,["config","common","api","storageSettings"])&&this.settings.HELIOS.config.common.api.storageSettings)return this.settings.HELIOS.config.common.api.storageSettings},e.prototype.setHeliosConfigBrand=function(){a.isNestedProp(this.settings.HELIOS,["config","brand"])&&this.settings.HELIOS.config.brand&&a(this.settings.data.brand).val(this.settings.HELIOS.config.brand)},e.prototype.checkLoginState=function(){this.lookUpLoggedInCookie(),this.isLoggedIn()?this.getVehicleData():(f.find(this.settings.selectors.yourVehicles).addClass(this.settings.classes.hidden),f.find(this.settings.selectors.customRadio).addClass(this.settings.classes.hidden))},e.prototype.bindEvents=function(){a(this.settings.selectors.vehicleSelect).on(this.settings.events.change,b.bind(this.handleVehicleChange,this)),a(this.settings.selectors.selectionOne).on(this.settings.events.change,b.bind(this.vehicleDropDownVisibility,this)),a(this.settings.selectors.selectionTwo).on(this.settings.events.change,b.bind(this.vehicleDropDownVisibility,this))},e.prototype.prePopulateFromStorageSettings=function(b,c,d){var e;for(d in b)switch(d){case this.settings.storageSettings.currentMileage:a(this.settings.data.currentMileage).val(c.mileage);break;case this.settings.storageSettings.firstRegistrationDate:e=new Date(c.firstRegistrationDate).toLocaleDateString(),e&&"Invalid Date"!==e&&a(this.settings.data.firstRegistrationDate).val(e);break;case this.settings.storageSettings.annualMileage:a(this.settings.data.annualMileage).val(c.averageMileage);break;case this.settings.storageSettings.brand:this.setHeliosConfigBrand()}},e.prototype.clearPrePopulateForm=function(){var c=a(this.settings.selectors.root).find("input[type=text]");b.each(c,function(a){a.value=""})},e.prototype.vehicleDropDownVisibility=function(b){a(b.target).is(a(this.settings.selectors.selectionOne))?(a(this.settings.selectors.vehicleSelect).closest(this.settings.selectors.formGroup).addClass(this.settings.classes.hidden),this.clearPrePopulateForm(),this.toggleEditableFields([a(this.settings.data.vin),a(this.settings.data.firstRegistrationDate)])):a(this.settings.selectors.vehicleSelect).trigger(this.settings.events.change,this.handleVehicleChange).closest(this.settings.selectors.formGroup).removeClass(this.settings.classes.hidden)},e.prototype.handleVehicleChange=function(b){var c=a(b.target),d=c.val(),e=k[d]||{},f=this.getHeliosStorageSettings()||{};this.prePopulateFromStorageSettings(f,e),a(this.settings.data.vin).val(e.vin),a(this.settings.data.modelName).val(e.detailedVehicleName),a(this.settings.data.registrationNumber).val(e.registrationNumber),this.toggleEditableFields([a(this.settings.data.vin),a(this.settings.data.firstRegistrationDate)])},e}),define("c_019_27",["jquery","underscore","c_008","handlebars","handlebarsHelpersLogic"],function(a,b,c,d,e){"use strict";function f(b,c){this.settings=a.extend({},h,c),this.defaults=h,this.$el=b,this.init(c)}var g,h={selectors:{root:".c_019-27",tooltipTriggers:".has-tooltip",emailAddress:".email-address",emailAddressConfirmation:".email-address-confirmation"},attributes:{typeSubmission:"type-submission",characterConcat:"character-concat",disabled:"disabled"},events:{submit:"submit",change:"change"},rules:{add:"add"}},i=null;return f.prototype.init=function(b){var d;if(i=a.extend({},h,b),g=a(i.selectors.root),!g.length)return!1;d=g.find(i.selectors.tooltipTriggers),c.createTooltips(d),this.registerRule()},f.prototype.registerRule=function(){g.each(function(b,c){var d=a(c),e=d.find(i.selectors.emailAddress),f=d.find(i.selectors.emailAddressConfirmation);f.rules(i.rules.add,{equalTo:e,messages:{equalTo:f.data("validation-confirm")}}),a.extend(a.validator.messages,{email:e.data("validation-customregex")})})},f}),define("c_020",["jquery","urlParameterDecoder","profileManager","underscore"],function(a,b,c,d){"use strict";function e(d){if(H=a.extend({},G,d),A=a(H.selectors.root),!A.length)return!1;x(),c.init(),b.init(),A.each(function(){var b=a(this);if(b.options=d,!(F=b.data(H.attrs.info)))return!1;E=b.data(H.attrs.filterLevels),g(b),h(H.selectors.chooseGrade,H.selectors.chooseModel,"nameAndPath",F.grades,b),"engines"===E?(a(H.selectors.chooseEngine).addClass(H.classes.active),h(H.selectors.chooseEngine,H.selectors.chooseGrade,"nameAndPath",F.engines,b)):(a(H.selectors.chooseVersion).addClass(H.classes.active),h(H.selectors.chooseVersion,H.selectors.chooseGrade,"nameAndPath",F.versions,b)),f(b),k(b),l(b),o(b),r(b),n(b)})}function f(a){j(a),i(a)}function g(b){var c,d=b.find(H.selectors.chooseModel),e=d.find("option:eq(0)").text();if(a.each(F.models,function(){m(H.selectors.chooseModel,this,b)}),d.find(H.selectors.selectBox).prop("selectedIndex",0),d.attr("data-lastprepopulatedvehicle")){var f=window.localStorage.getItem("lastVisitedVehicle");if(f){var g=d.find("select").attr("id");f=JSON.parse(f),a("#"+g+" option").each(function(a){this.value===f.value&&(e=this.text,d.find(H.selectors.selectBox).prop("selectedIndex",a),c=d.find(H.selectors.selectBox).find(H.selectors.optionSelected).data(H.attrs.dealerServiceMapping),b.options.eventAggregator.trigger("changeModelSelect",c,e))})}}d.find(H.selectors.selectedValue).text(e)}function h(b,c,d,e,f){var g=f.find(b),h=g.find("option:eq(0)").text(),i=f.find(c).find(H.selectors.optionSelected).data(H.attrs.namePath);g.find("option:gt(0)").remove(),g.find(H.selectors.selectedValue).text(h),g.find(H.selectors.selectBox).val(""),i?(g.find(H.selectors.selectBox).removeAttr(H.selectors.disabled),a.each(e,function(){this[d]===i&&m(b,this,f)})):g.find(H.selectors.selectBox).attr(H.selectors.disabled,H.selectors.disabled)}function i(b){var c=b.find(H.selectors.chooseEngine),d=c.find("option:eq(0)").text(),e=b.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.namePath),f=b.find(H.selectors.chooseGrade).find(H.selectors.optionSelected).attr("value");c.find("option:gt(0)").remove(),c.find(H.selectors.selectedValue).text(d),c.find(H.selectors.selectBox).val(""),f?(c.find(H.selectors.selectBox).removeAttr(H.selectors.disabled),a.each(F.engines,function(){this.gradeId===f&&this.nameAndPath&&this.nameAndPath===e&&m(H.selectors.chooseEngine,this,b)})):c.find(H.selectors.selectBox).attr(H.selectors.disabled,H.selectors.disabled)}function j(b){var c=b.find(H.selectors.chooseVersion),d=c.find("option:eq(0)").text(),e=b.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.namePath),f=b.find(H.selectors.chooseGrade).find(H.selectors.optionSelected).attr("value");c.find("option:gt(0)").remove(),c.find(H.selectors.selectedValue).text(d),c.find(H.selectors.selectBox).val(""),f?(c.find(H.selectors.selectBox).removeAttr(H.selectors.disabled),a.each(F.versions,function(){this.gradeId===f&&this.nameAndPath&&this.nameAndPath===e&&m(H.selectors.chooseVersion,this,b)})):e&&0===b.find(H.selectors.chooseGrade).length?(c.find(H.selectors.selectBox).removeAttr(H.selectors.disabled),a.each(F.versions,function(){this.nameAndPath&&this.nameAndPath===e&&m(H.selectors.chooseVersion,this,b)})):c.find(H.selectors.selectBox).attr(H.selectors.disabled,H.selectors.disabled)}function k(b){var c=b.find(H.selectors.chooseColour).find("option:eq(0)").text(),d=b.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.namePath),e=b.find(H.selectors.chooseVersion).find(H.selectors.optionSelected).attr("value"),f=b.find(H.selectors.chooseGrade).find(H.selectors.optionSelected).attr("value"),g=b.find(H.selectors.chooseEngine).find(H.selectors.optionSelected).attr("value"),h=[];b.find(H.selectors.chooseColour).find("option:gt(0)").remove(),b.find(H.selectors.chooseColour).find(H.selectors.selectedValue).text(c),b.find(H.selectors.chooseColour).find(H.selectors.selectBox).val(""),e||g?(b.find(H.selectors.chooseColour).find(H.selectors.selectBox).removeAttr(H.selectors.disabled),a.each(F.colours,function(){-1===a.inArray(this.name,h)&&("engines"===E?this.engineId&&this.engineId===g&&this.gradeId&&this.gradeId===f&&this.nameAndPath&&this.nameAndPath===d&&(m(H.selectors.chooseColour,this,b),h.push(this.name)):this.versionId&&this.versionId===e&&this.nameAndPath&&this.nameAndPath===d&&(m(H.selectors.chooseColour,this,b),h.push(this.name)))})):b.find(H.selectors.chooseColour).find(H.selectors.selectBox).attr(H.selectors.disabled,H.selectors.disabled)}function l(b){var c,e,g,i;b.find(H.selectors.chooseModel).find(H.selectors.selectBox).change(function(){c=a(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.namePath),h(H.selectors.chooseGrade,H.selectors.chooseModel,"nameAndPath",F.grades,b),f(b),k(b),n(b),e=d.first(d.filter(F.models,function(a){return a.nameAndPath===c})),y(C.selectModel,void 0!==e&&e.id,b),g=b.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.dealerServiceMapping),i=b.find(H.selectors.chooseModel).find(H.selectors.optionSelected).text(),b.options.eventAggregator.trigger("changeModelSelect",g,i)}),b.find(H.selectors.chooseGrade).find(H.selectors.selectBox).change(function(){f(b),k(b),y(C.selectGrade,this.value,b)}),b.find(H.selectors.chooseEngine).find(H.selectors.selectBox).change(function(){y(C.selectEngine,this.value,b),k(b)}),b.find(H.selectors.chooseVersion).find(H.selectors.selectBox).change(function(){y(C.selectVersion,this.value,b),k(b)}),b.find(H.selectors.chooseColour).find(H.selectors.selectBox).change(function(){y(C.selectColour,this.value,b)})}function m(b,c,d){c.name&&(c.phase&&c.year?c.dealerServiceMapping?d.find(b).find(H.selectors.selectBox).append(a("<option></option>").attr({value:c.id,"data-name-and-path":c.nameAndPath,"data-phase":c.phase,"data-year":c.year,"data-dealerServiceMapping":c.dealerServiceMapping}).text(c.name)):d.find(b).find(H.selectors.selectBox).append(a("<option></option>").attr({value:c.id,"data-name-and-path":c.nameAndPath,"data-phase":c.phase,"data-year":c.year}).text(c.name)):c.dealerServiceMapping?d.find(b).find(H.selectors.selectBox).append(a("<option></option>").attr({value:c.id,"data-name-and-path":c.nameAndPath,"data-dealerServiceMapping":c.dealerServiceMapping}).text(c.name)):d.find(b).find(H.selectors.selectBox).append(a("<option></option>").attr({value:c.id,"data-name-and-path":c.nameAndPath}).text(c.name)))}function n(a){var b=a.find(H.selectors.chooseModel).find(H.selectors.optionSelected).attr("data-phase"),c=a.find(H.selectors.chooseModel).find(H.selectors.optionSelected).attr("data-year");b&&c&&(a.find(".model-phase").val(b),a.find(".model-year").val(c))}function o(b){var d,e,f=b.find(H.selectors.chooseModel).find(G.selectors.selectBox),g=f.parents("[data-prepopulation-url]").data("prepopulationUrl");c.getSavedData(g).done(function(f){d=p(f,b),a.isEmptyObject(d)?q(g,f,b):c.getDataFallback(g,d).done(function(c){e=a.extend({},f,c),q(g,e,b)})})}function p(b,c){var d={};return c.find(H.data.storageKey).each(function(){b.hasOwnProperty(a(this).data("storageKey"))||(d[a(this).data("storageKey")]="SERVER_STORAGE")}),d}function q(a,b,c){var d=c.find(H.selectors.chooseModel).find(G.selectors.selectBox),e=c.find(H.selectors.chooseGrade).find(G.selectors.selectBox),f=c.find(H.selectors.chooseEngine).find(G.selectors.selectBox),g=c.find(H.selectors.chooseVersion).find(G.selectors.selectBox),h=c.find(H.selectors.chooseColour).find(G.selectors.selectBox),i="storageKey";d.data(i)&&b.hasOwnProperty(d.data(i))&&(s(b[d.data(i)],c),e.data("storageKey")&&(b.hasOwnProperty(e.data("storageKey"))&&(u(b[e.data("storageKey")],c),f.data("storageKey")&&b.hasOwnProperty(f.data("storageKey"))&&(v(b[f.data("storageKey")],c),h.data("storageKey")&&b.hasOwnProperty(h.data("storageKey"))&&w(b[h.data("storageKey")],c))),g.data("storageKey")&&b.hasOwnProperty(g.data("storageKey"))&&(t(b[g.data("storageKey")],c),h.data("storageKey")&&b.hasOwnProperty(h.data("storageKey"))&&w(b[h.data("storageKey")],c))))}function r(a){var c=b.getUrlParams();c.c020_model&&(s(c.c020_model,a),c.c020_grade&&(u(c.c020_grade,a),c.c020_engine&&(v(c.c020_engine,a),c.c020_colour&&w(c.c020_colour,a)),c.c020_version&&(t(c.c020_version,a),c.c020_colour&&w(c.c020_colour,a))))}function s(b,c){a.each(F.models,function(){var a;this.id===b&&(c.find(H.selectors.chooseModel).find(H.selectors.selectBox).val(b),c.find(H.selectors.chooseModel).find(H.selectors.selectedValue).text(this.name),h(H.selectors.chooseVersion,H.selectors.chooseModel,"nameAndPath",F.versions,c),h(H.selectors.chooseGrade,H.selectors.chooseModel,"nameAndPath",F.grades,c),a=c.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.dealerServiceMapping),c.options.eventAggregator.trigger("changeModelSelect",a,this.name))})}function t(b,c){var d=c.find(H.selectors.chooseGrade).find(H.selectors.optionSelected).attr("value"),e=c.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.namePath);a.each(F.versions,function(){this.id===b&&this.gradeId===d&&this.nameAndPath===e&&(c.find(H.selectors.chooseVersion).find(H.selectors.selectBox).val(b),c.find(H.selectors.chooseVersion).find(H.selectors.selectedValue).text(this.name),k(c))})}function u(b,c){var d=c.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.namePath);a.each(F.grades,function(){this.id===b&&this.nameAndPath&&this.nameAndPath===d&&(c.find(H.selectors.chooseGrade).find(H.selectors.selectBox).val(b),c.find(H.selectors.chooseGrade).find(H.selectors.selectedValue).text(this.name),f(c))})}function v(b,c){var d=c.find(H.selectors.chooseGrade).find(H.selectors.optionSelected).attr("value"),e=c.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.namePath);a.each(F.engines,function(){this.id===b&&this.gradeId===d&&this.nameAndPath===e&&(c.find(H.selectors.chooseEngine).find(H.selectors.selectBox).val(b),c.find(H.selectors.chooseEngine).find(H.selectors.selectedValue).text(this.name),k(c))})}function w(b,c){var d=c.find(H.selectors.chooseModel).find(H.selectors.optionSelected).data(H.attrs.namePath),e=c.find(H.selectors.chooseGrade).find(H.selectors.optionSelected).attr("value"),f=c.find(H.selectors.chooseEngine).find(H.selectors.optionSelected).attr("value"),g=c.find(H.selectors.chooseVersion).find(H.selectors.optionSelected).attr("value");a.each(F.colours,function(){this.id===b&&this.nameAndPath===d&&("engines"===E?this.engineId&&this.engineId===f&&this.gradeId&&this.gradeId===e&&(c.find(H.selectors.chooseColour).find(H.selectors.selectBox).val(b),c.find(H.selectors.chooseColour).find(H.selectors.selectedValue).text(this.name)):this.versionId&&this.versionId===g&&(c.find(H.selectors.chooseColour).find(H.selectors.selectBox).val(b),c.find(H.selectors.chooseColour).find(H.selectors.selectedValue).text(this.name)))})}function x(){B=H.analyticsManager.trackingVars.vehicleSelector,C=H.analyticsManager.getTrackingObjectProperties(B)}function y(a,b,c){var d={};H.analyticsManager?(d=z(c),d[a]=b,d[C.selectDropdown]=I[a],H.analyticsManager.tag(B,d)):log.warn("analyticsManager not being passed to C20 - tracking disabled for this component")}function z(a){var b,c;return D?(delete D[C.selectModel],delete D[C.selectGrade],delete D[C.selectEngine],delete D[C.selectVersion],delete D[C.selectColour]):(D={},I[C.selectModel]="Model",I[C.selectGrade]="Grade",I[C.selectEngine]="Engine",I[C.selectVersion]="Version",I[C.selectColour]="Colour",D[C.formName]=H.HELIOS.adobe.tagging.formName||H.tracking.componentId,D[C.formStepName]=H.tracking.formStepName,D.componentId=H.tracking.componentId,b=a.parents('[class^="c_"], [class*=" c_"]'),b.length?(c=b.data("tracking"))&&(D[C.formName]=c[C.formName]||"unknown",D[C.parentComponent]=c.componentId||"unknown"):D[C.formName]=H.tracking.formName),D}var A,B,C,D,E,F,G={selectors:{root:".c_020",chooseModel:".select-model",chooseGrade:".select-grade",chooseEngine:".select-engine",chooseVersion:".select-version",chooseColour:".select-colour",selectBox:"select",selectedValue:".selectedValue",selectModel:".select-model",optionSelected:"option:selected",disabled:"disabled"},attrs:{filterLevels:"filter-levels",info:"info",namePath:"name-and-path",dealerServiceMapping:"dealerservicemapping"},data:{storageKey:"[data-storage-key]"},classes:{active:"active"},tracking:{componentId:"C20_Dropdown_Boxes",formName:"Vehicle selector",formStepName:"Dropdown-boxes"}},H=null,I={};return{init:e,defaults:G,populateDropdownChildren:h}}),define("c_021",["jquery","logger","handlebars","validation","disclaimers"],function(a,b,c,d,e){"use strict";function f(b,c){return a.ajax({url:b,dataType:"json",data:c})}function g(){var a,b;l(),I.addClass(K.classes.hidden),D=u.val(),a={vin:D},b=f(H,a),b.done(h),b.fail(function(a){l(),404!==a.status?(I.removeClass(K.classes.hidden),I.data(K.data.serverError)&&400!==a.status?I.find(K.selectors.paragraph).text(I.data(K.data.serverError)):I.data(K.data.invalidVinError)&&400===a.status?I.find(K.selectors.paragraph).text(I.data(K.data.invalidVinError)):j()):j(),o(!0),G.warn("ajax request failed.")})}function h(a){a.length?i(a):j(),e.renderDisclaimers(A),l(),o()}function i(a){var b,c=E(a),d=a.length;v.hide(),A.html(c),b=A.find(K.selectors.findDealer),b.length&&b.attr(K.attributes.href,b.attr(K.attributes.href)+b.data(K.data.queryString)+D),B.text(d),z.text(D),y.slideDown()}function j(){v.hide(),I.addClass(K.classes.hidden),z.text(D),C.fadeIn()}function k(a){u.val(""),v.fadeIn(),y.slideUp(),C.hide(),A.empty(),r(a)}function l(){x.toggleClass(K.classes.ajaxBtnLoading)}function m(b){var c=a(b.currentTarget),d=c.closest(K.selectors.alertContent);c.toggleClass(K.classes.opened),d.find(K.selectors.extendedContent).slideToggle(),d.hasClass(K.classes.emptyTitle)&&d.find(K.selectors.alertTitle).slideToggle(),c.hasClass(K.classes.opened)&&q(c)}function n(){t.find(K.selectors.resetButton).on("click",k),A.on("click",K.selectors.detailToggle,m),A.on("click",K.selectors.findDealer,p)}function o(a){var b={componentId:L,VIN:u.val(),locationInPage:"vehicle-recall-checker",contentAction:"recall checker"};a&&(b.errorMessage=I.find(K.selectors.paragraph).text()?I.find(K.selectors.paragraph).text():"vin not found"),K.analyticsManager.tag("buttonNoCookie",b)}function p(b){var c=a(b.currentTarget),d={componentId:L,destination:c.attr(K.attributes.href),locationInPage:"vehicle-recall-checker",buttonText:c.text()};K.analyticsManager.tag("genericClick",d)}function q(b){var c=a(K.selectors.accordionHead,b.closest(K.selectors.alertContent)).text(),d={componentId:L,accordionType:"vehicle-recall-checker",accordionText:c};K.analyticsManager.tag("accordionExpansion",d)}function r(b){var c=a(b.currentTarget),d={componentId:L,toggleType:"vehicle-recall-checker",toggleText:c.text()};K.analyticsManager.tag("toggle",d)}function s(e){var f;return K=a.extend({},J,e),G=new b({prefix:"C_021"}),t=a(K.selectors.root),!!t.length&&(H=t.attr("data-search-url"),H.length?(f=a(K.selectors.recallTemplate).html(),E=c.compile(f),u=t.find(K.selectors.enterVinInput+" > input"),v=t.find(K.selectors.searchFormWrapper),w=v.find("form"),x=w.find(K.selectors.vinSearchButton),y=t.find(K.selectors.recallResults),A=t.find(K.selectors.recallContainer),z=t.find(K.selectors.vinNumber),B=y.find(K.selectors.total),C=t.find(K.selectors.noRecall),I=t.find(K.selectors.serverErrorMsg),F=new d(w,{validation:{submitHandler:function(a){g(a)},invalidHandler:function(a,b){var c=b.numberOfInvalids(),d=b.errorList[0].element;c&&d.focus()},success:function(b,c){var d=a(c).next(K.selectors.errorMessage);d.length&&d.remove()},errorPlacement:function(b,c){a(c).next(K.selectors.errorMessage).attr(K.attributes.id,K.constants.vinErrorMessageId)}}}),void n()):(G.warn("search url not found."),!1))}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J={classes:{opened:"opened",ajaxBtnLoading:"ajax-btn-loading",error:"error",emptyTitle:"is-title-empty",hidden:"hidden"},selectors:{root:".c_021",searchFormWrapper:".search-recalls",enterVinInput:".vin-input",vinSearchButton:".submit-form-button",resetButton:".reset-button",recallTemplate:".recall-template",recallContainer:".recall-container",vinNumber:".vin-number",recallResults:".recall-results",detailToggle:".detail-toggle",extendedContent:".extended-content",total:".total",noRecall:".no-recall",errorMessage:".error-message",findDealer:".cta",alertContent:".alert-content",alertTitle:".title",serverErrorMsg:".server-error-msg",accordionHead:"h2",paragraph:"p"},data:{queryString:"query-string",serverError:"server-error",invalidVinError:"invalid-vin-error"},attributes:{href:"href",id:"id"},constants:{vinErrorMessageId:"vin-error-message"}},K=null,L="C21_Vehicle_Recall_Checker";return{init:s}}),define("c_023B",["jquery","parallaxView","heliosObject"],function(a,b,c){"use strict";function d(c){if(g=a.extend({},f,c),e=a(g.selectors.root),!e.length)return!1;e.data(g.data.parallaxView)&&a(g.selectors.child).addClass(g.classes.parallaxEnabled),e.data(g.data.parallaxView)&&new b(e)}var e,f={selectors:{root:".c_023B",child:".c_023-2",pictureEl:".picture-element",img:"img"},classes:{parallaxEnabled:"parallax-enabled"},data:{parallaxView:"parallax"},events:{windowResize:"resize"}},g=null;return{init:d}}),define("c_025",["jquery","handlebars"],function(a,b){function c(b){if(i=a.extend({},g,b),f=a(i.selectors.root),$footerButton=f.find(i.selectors.footerButton),!f.length)return!1;d()}function d(){$footerButton.on(i.events.click,e)}function e(b){var c=a(b.currentTarget),d=c.text(),e=c.attr("href"),f={componentId:h,destination:e,locationInPage:"footer",buttonText:d};i.analyticsManager.tag("genericClick",f)}var f,g={events:{click:"click"},selectors:{root:".c_025",footerButton:"a"}},h="C25_Global_Footer",i=null;return{init:c}}),define("c_026",["jquery","storageManager","storageManagerKeys"],function(a,b,c){"use strict";function d(c){i=a.extend({},h,c),g=a(i.root),b.init(),f=i.HELIOS.adobe.tagging.componentId,
g.length&&e()}function e(){if(i.analyticsManager){var a=b.loadItem(i.analytics.analyticsSession,h.storageManagerSessionStorage),d=b.loadItem(c.multipleBrochures.itemKey,h.storageManagerLocalStorage),e=i.analyticsManager,f=e.trackingVars.pageLoad,g=e.getTrackingObjectProperties(f),j={},k=b.loadItem(i.fileUpload.fileUploadKey),l=i.HELIOS.adobe.tagging.formName;a&&(j[g.formCount]=a.formCount.toString(),j[g.formName]=l,j[g.formCategory]=a.formCategory,j[g.formType]=a.formType),d?(j[g.brochureName]=d.brochures.join(","),j[g.brochureAmount]=d.brochures.length,j[g.vehicleModel]=d.model,j[g.vehicleCategory]=d.category,j[g.vehicleId]=d.id):a&&a.hasOwnProperty(i.analytics.vehicleModel)&&(j[g.vehicleModel]=a[i.analytics.vehicleModel]),k&&(k.fileType&&""!==k.fileType&&(i.HELIOS.adobe.tagging[i.fileUpload.fileType]=k.fileType,j[i.fileUpload.fileType]=k.fileType),k.acceptFile&&""!==k.acceptFile&&(i.HELIOS.adobe.tagging[i.fileUpload.acceptFile]=k.acceptFile,j[i.fileUpload.acceptFile]=k.acceptFile),b.deleteItem(i.fileUpload.fileUploadKey)),i.analyticsManager.append(f,j)}}var f,g,h={root:".c_026",data:{journeyId:"trackingJourneyId",formCategory:"formCategory",formType:"formType",leadId:"leadId"},analytics:{formCount:"formCount",formName:"formName",formStepName:"confirmation",formStepNumber:"complete",pageType:"confirmation",vehicleModel:"vehicleModel",analyticsSession:"analyticsSession"},storageManagerSessionStorage:{mode:"sessionStorage"},fileUpload:{fileUploadKey:"fileUpload",fileType:"fileType",acceptFile:"acceptFile"}},i=null;return{init:d}}),define("c_027",["jquery","modal","underscore","trackingCodes"],function(a,b,c){"use strict";function d(b,d){var e,g=a.extend(!0,{},f);this.settings=a.extend({},g,d),this.$elements={},e=this.settings.selectors,this.$elements.$modalLink=b.find(e.modalLink),this.$elements.$externalLink=b.find(e.externalLink),this.$elements.$imageSelector=b.find(e.imageSelector),this.$elements.isVideo="video"===b.find(e.videoSelector).attr(this.settings.attributes.itemprop),this.$elements.isClickable="true"===b.attr(this.settings.attributes.dataClickable),this.$elements.firstLink=this._getFirstButton(this.$elements),c.isUndefined(this.$elements.firstLink)||this.$elements.isVideo||!this.$elements.isClickable||b.find(this.$elements.$imageSelector).addClass(this.settings.classes.clickableImage),this.$el=b,this._initModal()}var e="c_027",f={selectors:{videoSelector:".c_028",modalLink:".modal-link",externalLink:".content-group a",imageSelector:".picture-element"},events:{click:"click."+e},classes:{newsModal:"news-modal-c-027",clickableImage:"clickable-image",slideIn:"slide-in"},attributes:{itemprop:"itemprop",dataModalTarget:"data-modal-target",dataClickable:"data-clickable",href:"href",link:"LINK",modal:"MODAL",target:"target"},analytics:{contentAction:"click",locationInPage:"feature image"},componentId:"C27_Feature_Image_Promotion"};return d.prototype._initModal=function(){(!c.isUndefined(this.$elements.$modalLink)&&this.$elements.$modalLink.length||!c.isUndefined(this.$elements.$externalLink)&&this.$elements.$externalLink.length)&&(this.$modal=new b({openSelector:this.$elements.$modalLink,customClass:this.settings.classes.newsModal}),this._bindEvents())},d.prototype._bindEvents=function(){this.$el.bind(this.settings.events.click,a.proxy(function(b){var c=b.target;"IMG"===c.nodeName&&!this.$elements.isVideo&&this.$elements.isClickable&&this._handleClickImage(b),a(c).hasClass(this.settings.classes.slideIn)||this._handleClickButtons(b)},this))},d.prototype._handleClickImage=function(a){var b=this.$elements.firstLink;b.type===this.settings.attributes.link?this.settings.window.open(b.$button.attr(this.settings.attributes.href),b.$button.attr(this.settings.attributes.target)):b.type===this.settings.attributes.modal&&this.$modal.open(b.$button.attr(this.settings.attributes.dataModalTarget))},d.prototype._handleClickButtons=function(b){var c=a(b.target),d=this.settings.analyticsManager,e=d.trackingVars.genericClick,f=d.getTrackingObjectProperties(e),g={},h=a.trim(c.text()),i=c.attr("href")||"overlay in";g[f.contentAction]=this.settings.analytics.contentAction,g[f.componentId]=this.settings.componentId,g[f.destination]=i,g[f.locationInPage]=this.settings.analytics.locationInPage,g[f.buttonText]=h,d.track(e,g)},d.prototype._getFirstButton=function(a){var b;return a.$externalLink.length?b={$button:a.$externalLink,type:this.settings.attributes.link}:a.$modalLink.length&&(b={$button:a.$modalLink,type:this.settings.attributes.modal}),b},d.prototype.destroy=function(){this.$el.remove(),delete this.settings},d}),define("c_028",["jquery","underscore","disclaimers","scrollLock","keyCodeConstants","vjs"],function(a,b,c,d,e,f){"use strict";var g,h={events:{click:"click",touchend:"touchend",play:"play",timeUpdate:"timeupdate",pause:"pause",ended:"ended",close:"close",contextMenu:"contextmenu",keyup:"keyup"},properties:{personalisationEventName:"adobe.personalisation",video:"video",videoId:"videoid",poster:"poster",hash:"#",youtubeApi:"_youtube_api",isVisible:":visible",src:"src"},classes:{hide:"hide"},selectors:{body:"body",lightboxSelect:".c_028_lightbox",closeSelect:".close .veil",videojs:".video-js",videoPlayerMask:".video-wrapper .video-player-mask",progressBar:".vjs-progress-holder",videoTrigger:"figure > a",pictureElement:".picture-element img",videoWrapper:".video-wrapper",pauseButton:"div.vjs-playing"},videoDefaults:{techOrder:["youtube"],forceSSL:!0,forceHTML5:!0,playInline:!0,allowsInlineMediaPlayBack:!0},videoOptions:{youtubeUrl:"http://www.youtube.com/watch?v=",placeHolder:"video-placeholder"}};return g=function(b,c){var d=a.extend(!0,{},h);this.settings=a.extend({},d,c),this.$el=b,this.$body=a(this.settings.selectors.body),this.$videoTriggers=this.$el.find(this.settings.selectors.videoTrigger),this.$videoPlayerMask=a(this.settings.selectors.videoPlayerMask),this.progressFlags={first:!1,middle:!1,almost:!1,done:!1},this.mobileCheck=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(this.settings.window.navigator.userAgent),this.$video=this.$el.find("video"),this.mobileVideo(),this.bindEvents()},g.prototype.bindEvents=function(){this.$videoTriggers.on(this.settings.events.click,this.showVideo.bind(this)),this.$el.on(this.settings.properties.personalisationEventName,this.showVideo.bind(this)),this.$el.on(this.settings.events.keyup,this.keyBoardHandler.bind(this)),this.$video.on(this.settings.events.contextMenu,function(a){a.preventDefault()}),this.$videoPlayerMask.on(this.settings.events.click,this.togglePlayerStatus.bind(this))},g.prototype.showVideo=function(a){var b=this.getVideoSettings();a.preventDefault(),this.appendVideoContainer(),delete b.poster,delete b.ytcontrol,this.player=f(this.settings.videoOptions.placeHolder,b,this.bindPlayerEvents.bind(this))},g.prototype.togglePlayerStatus=function(){this.player.play(),this.$videoPlayerMask.on(this.settings.events.touchend,function(){this.$videoPlayerMask.trigger(this.settings.events.touchend).hide()}.bind(this))},g.prototype.appendVideoContainer=function(){d.disableGlobalScrolling(),this.$body.append(a("#lb_template_"+this.videoId).html()),this.$lightBoxTemplate=this.$body.find(this.settings.selectors.lightboxSelect),this.bindLightboxEvents(),c.renderDisclaimers(this.$lightBoxTemplate)},g.prototype.bindLightboxEvents=function(){this.$lightBoxTemplate.on(this.settings.events.click,this.closeVideo.bind(this))},g.prototype.mobileVideo=function(){this.$videoTriggers.each(this.createMobileVideoInstance.bind(this))},g.prototype.createMobileVideoInstance=function(c,d){var e,g,h=a(d),i=this.settings.properties.video+h.data(this.settings.properties.videoId)+b.uniqueId(),j=h.data(this.settings.properties.poster)||h.find(this.settings.selectors.pictureElement).attr(this.settings.properties.src),k=h.next(this.settings.selectors.videoWrapper);this.videoId=h.data(this.settings.properties.videoId),e=this.getVideoSettings(j),g=this.getVideoTemplate(i),Modernizr.touchevents&&this.mobileCheck?(h.addClass(this.settings.classes.hide),k.length||(h.after(g),this.player=f(i,e,this.bindPlayerEvents.bind(this)))):h.removeClass(this.settings.classes.hide)},g.prototype.bindPlayerEvents=function(){this.player.on(this.settings.events.play,this.playerOnPlay.bind(this)),this.player.on(this.settings.events.timeUpdate,this.progressBinding.bind(this)),this.player.on(this.settings.events.pause,this.playerOnPause.bind(this)),this.player.on(this.settings.events.ended,this.playerOnEnded.bind(this))},g.prototype.playerOnPlay=function(a){this.player.bigPlayButton.hide(),this.videoAnalyticsTracking(this.getVideoName(),this.settings.events.play),this.progressBinding(a)},g.prototype.playerOnPause=function(){this.mobileCheck&&this.moveIframeToTop(),this.player.bigPlayButton.hide(),this.videoAnalyticsTracking(this.getVideoName(),this.settings.events.pause)},g.prototype.playerOnEnded=function(){this.player.loadingSpinner.hide()},g.prototype.getVideoName=function(){return this.$el.find('meta[itemprop="name"]').attr("content")},g.prototype.progressBinding=function(){var a,b=this.player.currentTime()/this.player.duration()*100;b>=25&&b<50&&!this.progressFlags.first?(a="25%",this.progressFlags.first=!0):b>=50&&b<75&&!this.progressFlags.middle?(a="50%",this.progressFlags.middle=!0):b>=75&&b<90&&!this.progressFlags.almost?(a="75%",this.progressFlags.almost=!0):b>=90&&!this.progressFlags.done&&(a="complete",this.progressFlags.done=!0),a&&this.videoAnalyticsTracking(this.getVideoName(),a)},g.prototype.keyBoardHandler=function(a){switch(a.which){case e.TAB:this.restrictFocus.bind(this)(a);break;case e.ESCAPE:this.closeVideo.bind(this)();break;case e.SPACE:this.togglePlay.bind(this)()}},g.prototype.restrictFocus=function(b){if(this.player){var c=this.$lightBoxTemplate,d=this.player.bigPlayButton.el_,e=this.$el.find(this.settings.selectors.pauseButton);this.player.userActive(!0),!a(b.target).closest(c).length&&a(d).is(this.settings.properties.isVisible)?a(d).focus():e.focus()}},g.prototype.togglePlay=function(){this.player.paused()?this.player.play():this.player.pause()},g.prototype.closeVideo=function(){this.player&&this.destroyPlayer(),this.$lightBoxTemplate&&(this.videoAnalyticsTracking(this.getVideoName(),this.settings.events.close),this.destroyLightBox()),this.progressFlags={first:!1,middle:!1,almost:!1,done:!1}},g.prototype.destroyPlayer=function(){this.player.pause(),this.player.dispose(),this.player=null},g.prototype.destroyLightBox=function(){this.$lightBoxTemplate.css(this.settings.properties.display,this.settings.properties.none),this.$lightBoxTemplate.remove(),d.enableGlobalScrolling()},g.prototype.ie8Fix=function(){this.$videoTriggers.append('<div class="ie8playbuttobn"></div>')},g.prototype.getVideoTemplate=function(a){return'<div class="video-wrapper"><video id="'+a+'" src="" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto"> </video><div class="video-player-mask"></div></div>'},g.prototype.getVideoSettings=function(b){return a.extend({},this.settings.videoDefaults,{src:this.settings.videoOptions.youtubeUrl+this.videoId,poster:b,ytcontrols:!0})},g.prototype.videoAnalyticsTracking=function(a,b){var c={componentId:"C36_Video_Gallery",videoName:a,videoInteraction:b};this.settings.analyticsManager.tag("videoInteraction",c)},g.prototype.moveIframeToTop=function(){var b=a("iframe");this.$el.find(b).css("top",0)},g.prototype.destroy=function(){this.$el.remove(),delete this.settings},g}),define("c_028_2",["jquery","vjs","underscore","vjs_youtube","contentCarousel"],function(a,b,c,d,e){"use strict";function f(b){n=a.extend({},F,b),z=a(n.selectors.root),z.length&&(o=/(iPad|iPhone|iPod touch);.*CPU.*OS 7_\d/i.test(navigator.userAgent),F.deviceCheck=o,h())}function g(b,c){var d=n.analyticsManager,e=d.trackingVars.videoInteraction,f=d.getTrackingObjectProperties(e),g={};b=a(".slick-active").find("meta[itemprop=name]").attr("content"),g[f.componentId]=G,g[f.videoName]=b,g[f.videoInteraction]=c,d.track(e,g)}function h(){a(document).on(n.events.slickReady,function(){i(),j()}),a(document).on(n.events.slickReInit,function(){z.each(function(){a(this).parent().hasClass(n.classes.slickCloned)||(C=a(this).find(n.selectors.videoWrapper),D=C.find(n.selectors.videoJs),D.length&&(p=b(D[0]),q=p.currentSrc(),p.dispose(),a("<video/>",{src:q,class:n.classes.video}).appendTo(C)))}),z=a(n.selectors.root),b.players=[],i(),j()}),a(document).on(n.events.afterSlickSlideChange,function(){H={first:!1,middle:!1,almost:!1,done:!1},l(),j()})}function i(){z.each(function(){a(this).parent().hasClass(n.classes.slickCloned)||(r="video"+a(this).data("videoid")+c.uniqueId(),t=a(this).data("poster"),u=a(this).data("poster-mobile"),v=a(this).data("loop"),w=a(this).data("autoplay"),x="#"+r+"_youtube_api",y=a.extend({},n.videoDefaults,{src:"http://www.youtube.com/watch?v="+a(this).data("videoid"),poster:t,autoplay:!1,loop:!!v,ytcontrols:!1,controls:!1}),B=a("video",this).attr("id",r),B.length&&(Modernizr.touch&&(y.ytcontrols=!0),b(r,y,function(){var b,c,d=this,e=a("#"+d.el_.id),f=e.closest(n.selectors.c_007+","+n.selectors.c_007B);b=f.find(n.selectors.slickDots),c=f.find(n.selectors.contentDetails),""===t&&d.bigPlayButton.hide(),d.on("waiting",function(){B.trigger("stopAutoPlay.slick")}),d.on("play",function(){b.hide(),c.hide(),B.trigger("playVideo"),a(x).css("top",0),""!==t&&(d.bigPlayButton.hide(),d.posterImage.hide(),e.find(n.selectors.vjsPosterMobile+","+n.selectors.vjsPoster).hide()),d.loadingSpinner.hide(),g(s,"play"),k(d)}),d.on("timeupdate",function(){k(d)}),d.on("pause",function(){b.show(),c.show(),F.deviceCheck?a(x).css("top","-1000px"):a(x).css("top",0),""!==t&&(d.posterImage.show(),e.find(n.selectors.vjsPosterMobile+","+n.selectors.vjsPoster).show(),d.bigPlayButton.show(),d.bigPlayButton.el_.style.setProperty("pointer-events","auto","important")),d.loadingSpinner.hide(),g(s,"pause")}),d.on("ended",function(){g(s,"complete")})}),u&&(A=a("<div/>"),A.css("background-image","url("+u+")").addClass(n.classes.posterMobile).attr("tabindex","-1"),a(this).find(n.selectors.vjsPoster).after(A))))})}function j(){var c,d,e,f=B.find("iframe");E=a(n.selectors.slickActive),B=E.find(n.selectors.videoJs),e=!!E.find(n.selectors.root).data("autoplay"),B.length&&e&&(c=B.attr("id"),d=b(c),d.play()),F.deviceCheck&&(f.css("top",0),a(n.selectors.videoJs).on("click",m(f)))}function k(a){var b=a.currentTime()/a.duration()*100;b>=25&&b<50&&!H.first?(g(s,"25%"),H.first=!0):b>=50&&b<75&&!H.middle?(g(s,"50%"),H.middle=!0):b>=75&&b<99&&!H.almost?(g(s,"75%"),H.almost=!0):b>=90&&!H.done&&(g(s,"complete"),H.done=!0)}function l(){var c,d,e;try{for(var f in b.players)if(e=a(b.players[f].el_).closest(n.selectors.c_007+","+n.selectors.c_007B),c=e.find(n.selectors.slickDots),d=e.find(n.selectors.contentDetails),void 0!==f){var g=b.players[f].tech.ytplayer.vjsTech.videoId;c.show(),d.show(),b.players[f].tech.ytplayer.cueVideoById(g),b.players[f].posterImage.show(),b.players[f].bigPlayButton.show()}}catch(h){a("html").addClass(n.classes.noFlash),c.show(),d.show()}}function m(a){a.trigger("play"),a.css("top",0)}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F={progressBar:".vjs-progress-holder",videoDefaults:{techOrder:["youtube"],forceSSL:!0,forceHTML5:!0,playsInline:!0,allowsInlineMediaPlayback:!0},deviceCheck:!1,selectors:{root:".c_028-2",c_007:".c_007",c_007B:".c_007B",contentDetails:".content-details",videoWrapper:".video-wrapper",videoJs:".video-js",vjsPoster:".vjs-poster",vjsPosterMobile:".vjs-poster-mobile",slickActive:".slick-active",slickDots:".slick-dots"},classes:{video:"video-js vjs-default-skin vjs-big-play-centered",slickCloned:"slick-cloned",posterMobile:"vjs-poster vjs-poster-mobile",noFlash:"no-flash"},events:{slickReady:"slickReady",slickReInit:"slickReInit",afterSlickSlideChange:"afterSlickSlideChange"},personalisationEventName:"adobe.personalisation"},G="C28B_Hero_Area_Video",H={first:!1,middle:!1,almost:!1,done:!1};return{init:f}}),define("c_028_3",["jquery","scriptLoader","scrollLock"],function(a,b,c){"use strict";function d(c){if(C=a.extend({},I,c),x=a(C.selectors.root),!x.length)return!1;y=a("body"),J.HELIOS=c.HELIOS,b.include("youku",J),z=x.find(C.selectors.videoTriggers),e(z)}function e(b){b.on(C.events.click,function(b){i(b),a(this).blur()})}function f(){A&&(A.remove(),A=null,K=!1,q(),clearInterval(G),v("Close"),c.enableGlobalScrolling()),L={play:!1,first:!1,middle:!1,almost:!1,done:!1}}function g(){return B=a("#lb_template_"+C.youkuConfig.vid).html(),c.disableGlobalScrolling(),a(B).appendTo(y).on(C.events.click,C.selectors.closeBtn,h)}function h(){A=A||a(C.lightboxSelect),f()}function i(b){var c=a(b.currentTarget);E=w(b),C.youkuConfig.vid=c.data("videoid"),C.youkuConfig.client_id=c.data("clientid"),C.youkuConfig.autoplay=c.data("autoplay"),A=g(),p(),k().done(j).fail(l)}function j(){var a=C.youkuConfig;D=new C.window.YKU.Player("video",a)}function k(){var b=a.Deferred(),c=0;return function(){var a=setInterval(function(){c+=1,C.window.YKU?(clearInterval(a),b.resolve()):c>=C.config.maxAttempts&&(clearInterval(a),b.reject())},C.config.readyInterval)}(),b.promise()}function l(){x.remove()}function m(){K?(K=!1,o()):(K=!0,n())}function n(){D.playVideo(),v("Play")}function o(){D.pauseVideo(),v("Pause")}function p(){a(document).keyup(r)}function q(){a(document).unbind("keyup",r)}function r(a){switch(a.keyCode){case 27:f();break;case 32:m()}}function s(){G=setInterval(function(){D.currentTime()&&F&&F>0?u():F=D.totalTime()},100)}function t(){clearInterval(G)}function u(){var a=D.currentTime()/F*100;a>=1&&a<2&&!L.play?(K=!0,v("Play"),L.play=!0):a>=25&&a<50&&!L.first?(v("25%"),L.first=!0):a>=50&&a<75&&!L.middle?(v("50%"),L.middle=!0):a>=75&&a<90&&!L.almost?(v("75%"),L.almost=!0):a>=90&&a<99&&!L.done&&(v("complete"),L.done=!0)}function v(a){var b={componentId:"C28_Video",videoName:E,videoInteraction:a};C.analyticsManager.tag("videoInteraction",b)}function w(b){return a(b.currentTarget).parent().parent().find('meta[itemprop="name"]').attr("content")}var x,y,z,A,B,C,D,E,F,G,H="c_028-3",I={config:{readyInterval:500,maxAttempts:60},selectors:{root:".c_028-3",videoTriggers:"figure > button",lightbox:".c_028-3_lightbox",closeBtn:".close, .veil",video:"#video"},events:{click:"click."+H},youkuConfig:{styleid:"1",client_id:"",vid:"",show_related:!1,autoplay:!1,events:{onPlayStart:function(){s()},onPlayEnd:function(){t()}}}},J={},K=!1,L={play:!1,first:!1,middle:!1,almost:!1,done:!1};return{init:d}}),define("c_028_4",["jquery","scriptLoader","underscore"],function(a,b,c){"use strict";function d(b){if(C=a.extend({},H,b),z=a(C.selectors.root),!z.length)return!1;f(),e(),a(document).on(C.events.slickReady,function(){n().done(m)}),a(document).on(C.events.afterSlickSlideChange,function(){t(),J=!1,clearInterval(F),K={play:!1,first:!1,middle:!1,almost:!1,done:!1},l(),m()})}function e(){n().done(g).fail(o)}function f(){I.HELIOS=C.HELIOS,b.include("youku",I)}function g(){z.each(function(){var b=a(this);b.find(C.selectors.playButton).on(C.events.click,function(a){D=y(a),h(b)})})}function h(a){var b=C.youkuConfig,c=a.find(C.selectors.videoWrapper),d=c.parent().parent(),e=a.data("loop");b.vid=a.data("videoid"),b.client_id=a.data("clientid"),e&&(C.youkuConfig.events.onPlayEnd=i),c.length&&(c.addClass(C.classes.active),d.addClass(C.classes.playing),B=new C.window.YKU.Player(a.data("videoElementid"),b))}function i(){clearInterval(F),B.playVideo()}function j(){clearInterval(F)}function k(){C.window.scrollTo(0,1)}function l(){z.find(C.selectors.videoWrapper).removeClass(C.classes.active),z.children().removeClass(C.classes.playing),z.find(C.selectors.object).add(C.selectors.youkuMobile).remove()}function m(){var b,c,d;A=a(C.selectors.slickActive),b=A.find(C.selectors.root),c=b.find(C.selectors.playButton),d=b.data("autoplay"),s(),d&&(c.trigger(C.events.click),b.closest(C.selectors.carousel).slickPause())}function n(){var b=a.Deferred(),c=0;return function(){var a=setInterval(function(){c+=1,C.window.YKU?(clearInterval(a),b.resolve()):c>=C.config.maxAttempts&&(clearInterval(a),b.reject())},C.config.readyInterval)}(),b.promise()}function o(){z.remove()}function p(){J?(J=!1,r()):(J=!0,q())}function q(){B.playVideo(),x("Play")}function r(){B.pauseVideo(),x("Pause")}function s(){a(document).keyup(u)}function t(){a(document).unbind("keyup",u)}function u(a){switch(a.keyCode){case 32:p()}}function v(){F=setInterval(function(){B.currentTime()&&E&&E>0?w():E=B.totalTime()},100)}function w(){var a=B.currentTime()/E*100;a>=1&&a<2&&!K.play?(J=!0,x("Play"),K.play=!0):a>=25&&a<50&&!K.first?(x("25%"),K.first=!0):a>=50&&a<75&&!K.middle?(x("50%"),K.middle=!0):a>=75&&a<90&&!K.almost?(x("75%"),K.almost=!0):a>=90&&a<99&&!K.done&&(x("complete"),K.done=!0)}function x(a){var b={componentId:"C28_Video",videoName:D,videoInteraction:a};C.analyticsManager.tag("videoInteraction",b)}function y(b){return a(b.currentTarget).parent().parent().find('meta[itemprop="name"]').attr("content")}var z,A,B,C,D,E,F,G="c_028-4",H={config:{readyInterval:500,maxAttempts:60},selectors:{root:".c_028-4",videoWrapper:".video-wrapper",playButton:"figure > button",object:"object",slickActive:".slick-active",carousel:".carousel",youkuMobile:"#x-player"},youkuConfig:{styleid:"1",client_id:"",vid:"",show_related:!1,autoplay:!0,events:{onPlayerReady:function(){k()},onPlayStart:function(){v()},onPlayEnd:function(){j()}}},classes:{active:"active",playing:"playing"},events:{click:"click."+G,slickReady:"slickReady",afterSlickSlideChange:"afterSlickSlideChange"}},I={},J=!1,K={play:!1,first:!1,middle:!1,almost:!1,done:!1};return{init:d}}),define("c_028_5",["jquery","logger","storageManager","jqueryUtilityPlugins","scrollLock"],function(a,b,c,d,e){"use strict";function f(c){var d;if(A=a.extend({},D,c),u=a(A.selectors.root),!u.length)return!1;w=a("body"),x=u.find(A.selectors.videoTriggers),t=new b({prefix:"c_028-5"}),d=k(c),g(d)}function g(a){var b=c.loadItem("c28_5_expires_in");!b||b<0?h(a).done(function(b){j(b,a)}).fail(function(){i()}):l()}function h(b){return a.ajax({url:b,data:{client_id:x.data("client-id"),client_secret:x.data("client-secret")}})}function i(){t.warn("iQIYI authorisation has failed")}function j(b,d){var e;try{e=JSON.parse(b)}catch(e){throw t.error("Cannot parse the iQIYI JSON response"),new Error("Cannot parse the iQIYI JSON response")}a.isNestedProp(e,["data","expires_in"])?(c.init(),c.saveItem("c28_5_expires_in",e.data.expires_in),c.saveItem("c28_5_access_token",e.data.access_token),g(d)):t.warn("iQIYI response returned malformed data")}function k(b){if(a.isNestedProp(A.HELIOS,["config","common","api","scripts","iqiyi","url"]))return b.HELIOS.config.common.api.scripts.iqiyi.url}function l(){x.on(A.events.click,function(b){q(b),a(this).blur()})}function m(){return!!u.parents().find(A.selectors.carousel).length}function n(){var b,c;v=a(A.selectors.slickActive),b=v.find(A.selectors.root),(c=b.data("autoplay"))&&b.closest(A.selectors.carousel).slickPause()}function o(){return z=a("#lb_template_"+A.iqiyiConfig.vid).html(),e.disableGlobalScrolling(),a(z).appendTo(w).on(A.events.click,A.selectors.closeBtn,p)}function p(){y=y||a(A.lightboxSelect),r()}function q(b){var d,e=a(b.currentTarget);B=s(b),A.iqiyiConfig={accessToken:c.loadItem("c28_5_access_token"),vid:e.data("vid"),tvid:e.data("tvid"),autoplay:e.data("autoplay")?1:0,loop:e.data("loop")?1:0},d=a('<iframe src="'+B+"?vid="+A.iqiyiConfig.vid+"&tvId="+A.iqiyiConfig.tvid+"&accessToken="+A.iqiyiConfig.accessToken+"&autoplay="+A.iqiyiConfig.autoplay+"&chainAutoplay="+A.iqiyiConfig.loop+'&bd=1&showRecommend=0" frameborder="0" width="100%" height="100%" allowfullscreen="true"></iframe>'),m()?(n(),u.parent().find(A.selectors.contentDetails).hide(),a(A.selectors.carouselVideo).append(d),a(A.selectors.carouselVideoWrapper).show()):(y=o(),a(A.selectors.video).append(d))}function r(){y&&(y.remove(),y=null,e.enableGlobalScrolling())}function s(b){return a(b.currentTarget).parent().parent().find('meta[itemprop="embedURL"]').attr("content")}var t,u,v,w,x,y,z,A,B,C="c_028-5",D={config:{readyInterval:500,maxAttempts:60},selectors:{root:".c_028-5",videoTriggers:"figure > button",lightbox:".c_028-5_lightbox",closeBtn:".close, .veil",video:"#video",carouselVideo:"#carousel-video",contentDetails:".content-details",carouselVideoWrapper:".carousel-video-wrapper",slickActive:".slick-active",carousel:".carousel"},events:{click:"click."+C},iqiyiConfig:{chainAutoPlay:0,autoplay:0}};return{init:f}}),define("c_028_6",["jquery","underscore"],function(a,b){"use strict";function c(b,c){this.settings=a.extend({},d,c),this._defaults=d,this.$root=a(b),this.$root.length&&this.init()}var d={root:".c_028-6",events:{ended:"ended",canplay:"canplay",playing:"playing",pause:"pause"},selectors:{video:".video",figure:"figure",videoPlayButton:".btn-play",videoReplayButton:".btn-replay",posterImage:".poster-image",videoControls:".video-controls",videoPlay:".video-play",videoMute:".video-mute",visible:":visible"},classes:{pause:"pause",replay:"replay",mute:"mute",hidden:"hidden",touchevents:"touchevents",notouch:"no-touch"}};return c.prototype.init=function(){this.player=this.$root.find(this.settings.selectors.video)[0],this.$videoPlayButton=this.$root.find(this.settings.selectors.videoPlayButton),this.$videoReplayButton=this.$root.find(this.settings.selectors.videoReplayButton),this.$videoControls=this.$root.find(this.settings.selectors.videoControls),this.$videoControlsPlay=this.$videoControls.find(this.settings.selectors.videoPlay),this.$videoControlsMute=this.$videoControls.find(this.settings.selectors.videoMute),this.$posterImage=this.$root.find(this.settings.selectors.posterImage),this.$videoFrame=this.$root.find(this.settings.selectors.video),this.videoName=this.$root.data("name"),this.autoPlay=this.$root.data("autoplay")||!1,this.loopPlay=this.$root.data("loop")||!1,this.videoMute=this.$root.data("mute")||!1,this.videoWidth=this.$root.data("width"),this.videoHeight=this.$root.data("height"),this.videoVolume=this.$root.data("volume"),this.hidePlayButton=this.$root.data("hideplaybutton"),this.videoPlayed=!1,this.videoPlaying=!1,this.userPaused=!1,this.iteration=1,(this._isBreakpoint(this.settings.HELIOS.config.common.mediaQuery.is.small)||this._isBreakpoint(this.settings.HELIOS.config.common.mediaQuery.is.medium)&&this.autoPlay)&&(this.videoVolume=0),0===this.videoVolume&&(this.player.muted=!0),this.videoMute&&this._showSoundButton(),a("html").hasClass(this.settings.classes.touchevents)||this.$videoPlayButton.addClass(this.settings.classes.notouch),this._setVideoContainerRatio(),this._bindEvents(),this._assignVolume(),this._autoPlayCheck()},c.prototype._setVideoContainerRatio=function(){this.$root.find(this.settings.selectors.figure).css("padding-bottom",this.videoHeight/this.videoWidth*100+"%")},c.prototype._bindEvents=function(){a(this.settings.window).on("scroll",b.bind(b.debounce(this._autoPlayCheck,200),this)),this.$root.on("click",this._onClicked.bind(this)),this.player.addEventListener(this.settings.events.canplay,this._videoCanPlay.bind(this)),this.player.addEventListener(this.settings.events.playing,this._videoPlaying.bind(this)),this.player.addEventListener(this.settings.events.pause,this._videoPaused.bind(this)),this.player.addEventListener(this.settings.events.ended,this._stopVideo.bind(this))},c.prototype._togglePlay=function(b,c){this.$videoPlayButton.removeClass(this.settings.classes.hidden),this.videoPlayed||this._loadVideo(),this.videoPlaying?(this._pauseVideo(),c&&this.$root.attr("data-pause",!0)):(this._playVideo(),c&&this.$root.removeAttr("data-pause")),(b&&a(b.target).hasClass(this.settings.classes.pause)||this.$root.attr("data-pause")&&this.hidePlayButton)&&(this.userPaused=!0)},c.prototype._showSoundButton=function(){this.$videoControlsMute.toggleClass(this.settings.classes.mute,!this.videoVolume)},c.prototype._assignVolume=function(){this.player.volume=this.videoVolume/100},c.prototype._loadVideo=function(){this.player.load()},c.prototype._playVideo=function(){this.player.play(),this.videoPlaying=!0,this._videoAnalyticsTracking("play"),this.$videoControlsMute.show(),this.$videoReplayButton.hide()},c.prototype._pauseVideo=function(){this.videoPlaying=!1,this.$videoPlayButton.show(),this.player.pause(),this._videoAnalyticsTracking("pause"),this.$videoControlsMute.hide()},c.prototype._toggleMute=function(){this.player.muted=!this.player.muted,this.$videoControlsMute.toggleClass(this.settings.classes.mute,this.player.muted)},c.prototype._autoPlayCheck=function(){this._isElementInViewport(this.player)&&!this.videoPlaying&&!this.userPaused&&this.autoPlay&&!this.ended||!this._isElementInViewport(this.player)&&this.videoPlaying?this._togglePlay():!this._isElementInViewport(this.player)&&this.ended&&(this.ended=!1)},c.prototype._isElementInViewport=function(a){var b=a.getBoundingClientRect();return(0!==b.top||0!==b.left||0!==b.bottom||0!==b.right)&&(b.top<=(window.innerHeight||document.documentElement.clientHeight)-.3*b.height&&b.left>=0&&b.bottom>=.3*b.height&&b.right<=(window.innerWidth||document.documentElement.clientWidth))},c.prototype._videoAnalyticsTracking=function(a){var b=this.$root.data("component")+"_Video",c={componentId:b,videoName:this.videoName,videoInteraction:a,autoplay:this.autoPlay?"on":"off"};this.settings.analyticsManager.tag("videoInteraction",c)},c.prototype._isBreakpoint=function(a){return a&&this.settings.window.matchMedia&&this.settings.window.matchMedia(a).matches},c.prototype._onClicked=function(b){b&&a(b.target).is(this.settings.selectors.videoMute)?this._toggleMute():this._togglePlay(b,!0)},c.prototype._stopVideo=function(){this.loopPlay?(1===this.iteration&&this._videoAnalyticsTracking("complete"),this.$videoPlayButton.hide(),this.player.play(),this.iteration++):(this.player.currentTime=0,this.videoPlaying=!1,this.ended=!0,this.$videoPlayButton.hide(),this.player.paused||this.player.pause(),this.$videoPlayButton.removeClass(this.settings.classes.pause).removeClass(this.settings.classes.hidden),this.$videoControlsPlay.removeClass(this.settings.classes.pause),this.$videoControlsPlay.addClass(this.settings.classes.replay),this.$videoControlsMute.hide(),this.$videoReplayButton.show(),this._videoAnalyticsTracking("complete"))},c.prototype._videoPaused=function(){this.videoPlaying=!1,this.$videoControlsPlay.removeClass(this.settings.classes.pause),this.$videoPlayButton.removeClass(this.settings.classes.pause),this.$videoReplayButton.hide(),this.$videoPlayButton.show(),this.ended&&this.$videoReplayButton.show()},c.prototype._videoPlaying=function(){this.videoPlaying=!0,this.ended=!1,this.videoPlayed&&(this.$videoControlsPlay.removeClass(this.settings.classes.replay),this.$videoControlsPlay.addClass(this.settings.classes.pause),this.$videoPlayButton.addClass(this.settings.classes.pause),this.$videoReplayButton.hide(),this.$videoControlsMute.show())},c.prototype._videoCanPlay=function(){this.videoPlayed=!0,this.$posterImage.hide(),this.$videoControls.children().length>0&&this.$videoControls.show(),!this.ended&&this.videoPlaying&&(this.$videoControlsPlay.addClass(this.settings.classes.pause),this.$videoPlayButton.addClass(this.settings.classes.pause))},c}),define("c_029",["jquery"],function(a){"use strict";var b={};return function(c,d){this.settings=a.extend({},b,d),this._defaults=b,this.$el=c}}),define("c_029B",["jquery","pictureFill"],function(a,b){"use strict";function c(c){if(f=a.extend({},e,c),d=a(f.selectors.root),!d.length)return!1;a(f.selectors.root).each(function(){b()})}var d,e={selectors:{root:".c_029B"}},f=null;return{init:c}}),define("c_029C",["c_029B"],function(a){"use strict";function b(b){if(e=$.extend({},d,b),c=$(e.selectors.root),!c.length)return!1;a.init(e)}var c,d={selectors:{root:".c_029C"}},e=null;return{init:b}}),define("c_030_0",["jquery","stateStoreFactory"],function(a,b){"use strict";function c(c){var g,h;f=a.extend(!0,{},e,c),d=a(f.selectors.root),d.length&&(g=b.create({HELIOS:f.HELIOS}),(h=d.data(f.attributes.rangePage))&&g.save("rangePage",{id:h}))}var d,e={selectors:{root:".c_030-0"},attributes:{
rangePage:"rangePage"}},f=null;return{init:c}}),function(){"use strict";function a(a){return a.split("").reverse().join("")}function b(a,b){return a.substring(0,b.length)===b}function c(a,b){return a.slice(-1*b.length)===b}function d(a,b,c){if((a[b]||a[c])&&a[b]===a[c])throw new Error(b)}function e(a){return"number"==typeof a&&isFinite(a)}function f(a,b){var c=Math.pow(10,b);return(Math.round(a*c)/c).toFixed(b)}function g(b,c,d,g,h,i,j,k,l,m,n,o){var p,q,r,s=o,t="",u="";return i&&(o=i(o)),!!e(o)&&(!1!==b&&0===parseFloat(o.toFixed(b))&&(o=0),0>o&&(p=!0,o=Math.abs(o)),!1!==b&&(o=f(o,b)),o=o.toString(),-1!==o.indexOf(".")?(q=o.split("."),r=q[0],d&&(t=d+q[1])):r=o,c&&(r=a(r).match(/.{1,3}/g),r=a(r.join(a(c)))),p&&k&&(u+=k),g&&(u+=g),p&&l&&(u+=l),u+=r,u+=t,h&&(u+=h),m&&(u=m(u,s)),u)}function h(a,d,f,g,h,i,j,k,l,m,n,o){var p,q="";return n&&(o=n(o)),!(!o||"string"!=typeof o)&&(k&&b(o,k)&&(o=o.replace(k,""),p=!0),g&&b(o,g)&&(o=o.replace(g,"")),l&&b(o,l)&&(o=o.replace(l,""),p=!0),h&&c(o,h)&&(o=o.slice(0,-1*h.length)),d&&(o=o.split(d).join("")),f&&(o=o.replace(f,".")),p&&(q+="-"),q+=o,""!==(q=q.replace(/[^0-9\.\-.]/g,""))&&(q=Number(q),j&&(q=j(q)),!!e(q)&&q))}function i(a){var b,c,e,f={};for(b=0;b<l.length;b+=1)if(c=l[b],void 0===(e=a[c]))f[c]="negative"!==c||f.negativeBefore?"mark"===c&&"."!==f.thousand&&".":"-";else if("decimals"===c){if(!(e>=0&&8>e))throw new Error(c);f[c]=e}else if("encoder"===c||"decoder"===c||"edit"===c||"undo"===c){if("function"!=typeof e)throw new Error(c);f[c]=e}else{if("string"!=typeof e)throw new Error(c);f[c]=e}return d(f,"mark","thousand"),d(f,"prefix","negative"),d(f,"prefix","negativeBefore"),f}function j(a,b,c){var d,e=[];for(d=0;d<l.length;d+=1)e.push(a[l[d]]);return e.push(c),b.apply("",e)}function k(a){return this instanceof k?void("object"==typeof a&&(a=i(a),this.to=function(b){return j(a,g,b)},this.from=function(b){return j(a,h,b)})):new k(a)}var l=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=k}(),function(a){"use strict";function b(b){return b instanceof a||a.zepto&&a.zepto.isZ(b)}function c(b,c){return"string"==typeof b&&0===b.indexOf("-inline-")?(this.method=c||"html",this.target=this.el=a(b.replace("-inline-","")||"<div/>"),!0):void 0}function d(b){if("string"==typeof b&&0!==b.indexOf("-")){this.method="val";var c=document.createElement("input");return c.name=b,c.type="hidden",this.target=this.el=a(c),!0}}function e(a){return"function"==typeof a?(this.target=!1,this.method=a,!0):void 0}function f(a,c){return b(a)&&!c?(a.is("input, select, textarea")?(this.method="val",this.target=a.on("change.liblink",this.changeHandler)):(this.target=a,this.method="html"),!0):void 0}function g(a,c){return b(a)&&("function"==typeof c||"string"==typeof c&&a[c])?(this.method=c,this.target=a,!0):void 0}function h(b,c,d){var e=this,f=!1;if(this.changeHandler=function(b){var c=e.formatInstance.from(a(this).val());return!1===c||isNaN(c)?(a(this).val(e.lastSetValue),!1):void e.changeHandlerMethod.call("",b,c)},this.el=!1,this.formatInstance=d,a.each(k,function(a,d){return!(f=d.call(e,b,c))}),!f)throw new RangeError("(Link) Invalid Link.")}function i(a){this.items=[],this.elements=[],this.origin=a}function j(b,c,d,e){0===b&&(b=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[b]||(this.linkAPI[b]=new i(this));var f=new h(c,d,e||this.LinkDefaultFormatter);f.target||(f.target=a(this)),f.changeHandlerMethod=this.LinkConfirm(b,f.el),this.linkAPI[b].push(f,f.el),this.LinkUpdate(b)}var k=[c,d,e,f,g];h.prototype.set=function(a){var b=Array.prototype.slice.call(arguments),c=b.slice(1);this.lastSetValue=this.formatInstance.to(a),c.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,c)},i.prototype.push=function(a,b){this.items.push(a),b&&this.elements.push(b)},i.prototype.reconfirm=function(a){var b;for(b=0;b<this.elements.length;b+=1)this.origin.LinkConfirm(a,this.elements[b])},i.prototype.remove=function(){var a;for(a=0;a<this.items.length;a+=1)this.items[a].target.off(".liblink");for(a=0;a<this.elements.length;a+=1)this.elements[a].remove()},i.prototype.change=function(a){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var b,c=Array.prototype.slice.call(arguments,1);for(c.unshift(a),b=0;b<this.items.length;b+=1)this.items[b].set.apply(this.items[b],c);this.origin.LinkIsEmitting=!1},a.fn.Link=function(b){var c=this;if(!1===b)return c.each(function(){this.linkAPI&&(a.map(this.linkAPI,function(a){a.remove()}),delete this.linkAPI)});if(void 0===b)b=0;else if("string"!=typeof b)throw new Error("Flag must be string.");return{to:function(a,d,e){return c.each(function(){j.call(this,b,a,d,e)})}}}}(window.jQuery||window.Zepto),function(a){"use strict";function b(b){return a.grep(b,function(c,d){return d===a.inArray(c,b)})}function c(a,b){return Math.round(a/b)*b}function d(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function e(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function f(a,b,c){a.addClass(b),setTimeout(function(){a.removeClass(b)},c)}function g(a){return Math.max(Math.min(a,100),0)}function h(b){return a.isArray(b)?b:[b]}function i(a){var b=a.split(".");return b.length>1?b[1].length:0}function j(a,b){return 100/(b-a)}function k(a,b){return 100*b/(a[1]-a[0])}function l(a,b){return k(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function m(a,b){return b*(a[1]-a[0])/100+a[0]}function n(a,b){for(var c=1;a>=b[c];)c+=1;return c}function o(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=n(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+l([d,e],c)/j(f,g)}function p(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=n(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],m([d,e],(c-f)*j(f,g))}function q(a,b,d,e){if(100===e)return e;var f,g,h=n(e,a);return d?(f=a[h-1],g=a[h],e-f>(g-f)/2?g:f):b[h-1]?a[h-1]+c(e-a[h-1],b[h-1]):e}function r(a,b,c){var e;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider: 'range' contains invalid value.");if(e="min"===a?0:"max"===a?100:parseFloat(a),!d(e)||!d(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");c.xPct.push(e),c.xVal.push(b[0]),e?c.xSteps.push(!isNaN(b[1])&&b[1]):isNaN(b[1])||(c.xSteps[0]=b[1])}function s(a,b,c){return!b||void(c.xSteps[a]=k([c.xVal[a],c.xVal[a+1]],b)/j(c.xPct[a],c.xPct[a+1]))}function t(a,b,c,d){this.xPct=[],this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.sort(function(a,b){return a[0]-b[0]}),e=0;e<f.length;e++)r(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)s(e,this.xNumSteps[e],this)}function u(a,b){if(!d(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function v(b,c){if("object"!=typeof c||a.isArray(c))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===c.min||void 0===c.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");b.spectrum=new t(c,b.snap,b.dir,b.singleStep)}function w(b,c){if(c=h(c),!a.isArray(c)||!c.length||c.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");b.handles=c.length,b.start=c}function x(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function y(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function z(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(!0===b&&2===a.handles)a.connect=3;else{if(!1!==b)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function A(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function B(a,b){if(!d(b))throw new Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function C(a,b){if(!d(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function D(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function E(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0;a.events={tap:c||f,drag:d,fixed:e,snap:f}}function F(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function G(b){var c,d={margin:0,limit:0,animate:!0,format:Z};return c={step:{r:!1,t:u},start:{r:!0,t:w},connect:{r:!0,t:z},direction:{r:!0,t:D},snap:{r:!1,t:x},animate:{r:!1,t:y},range:{r:!0,t:v},orientation:{r:!1,t:A},margin:{r:!1,t:B},limit:{r:!1,t:C},behaviour:{r:!0,t:E},format:{r:!1,t:F}},b=a.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},b),a.each(c,function(a,c){if(void 0===b[a]){if(c.r)throw new Error("noUiSlider: '"+a+"' is required.");return!0}c.t(d,b[a])}),d.style=d.ort?"top":"left",d}function H(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[g(d),g(e)]):[d,e]}function I(a){a.preventDefault();var b,c,d=0===a.type.indexOf("touch"),e=0===a.type.indexOf("mouse"),f=0===a.type.indexOf("pointer"),g=a;return 0===a.type.indexOf("MSPointer")&&(f=!0),a.originalEvent&&(a=a.originalEvent),d&&(b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY),(e||f)&&(f||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),b=a.clientX+window.pageXOffset,c=a.clientY+window.pageYOffset),g.points=[b,c],g.cursor=e,g}function J(b,c){var d=a("<div><div/></div>").addClass(Y[2]),e=["-lower","-upper"];return b&&e.reverse(),d.children().addClass(Y[3]+" "+Y[3]+e[c]),d}function K(a,b,c){switch(a){case 1:b.addClass(Y[7]),c[0].addClass(Y[6]);break;case 3:c[1].addClass(Y[6]);case 2:c[0].addClass(Y[7]);case 0:b.addClass(Y[6])}}function L(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(J(b,d).appendTo(c));return e}function M(b,c,d){return d.addClass([Y[0],Y[8+b],Y[4+c]].join(" ")),a("<div/>").appendTo(d).addClass(Y[1])}function N(b,c,d){function e(){return C[["width","height"][c.ort]]()}function j(a){var b,c=[E.val()];for(b=0;b<a.length;b+=1)E.trigger(a[b],c)}function k(a){return 1===a.length?a[0]:c.dir?a.reverse():a}function l(a){return function(b,c){E.val([a?null:c,a?c:null],!0)}}function m(b){var c=a.inArray(b,N);E[0].linkAPI&&E[0].linkAPI[b]&&E[0].linkAPI[b].change(J[c],D[c].children(),E)}function n(b,d){var e=a.inArray(b,N);return d&&d.appendTo(D[e].children()),c.dir&&c.handles>1&&(e=1===e?0:1),l(e)}function o(){var a,b;for(a=0;a<N.length;a+=1)this.linkAPI&&this.linkAPI[b=N[a]]&&this.linkAPI[b].reconfirm(b)}function p(a,b,d,e){return a=a.replace(/\s/g,W+" ")+W,b.on(a,function(a){return!E.attr("disabled")&&(!E.hasClass(Y[14])&&(a=I(a),a.calcPoint=a.points[c.ort],void d(a,e)))})}function q(a,b){var c,d=b.handles||D,f=!1,g=100*(a.calcPoint-b.start)/e(),h=d[0][0]!==D[0][0]?1:0;c=H(g,b.positions,d.length>1),f=v(d[0],c[h],1===d.length),d.length>1&&(f=v(d[1],c[h?0:1],!1)||f),f&&j(["slide"])}function r(b){a("."+Y[15]).removeClass(Y[15]),b.cursor&&a("body").css("cursor","").off(W),U.off(W),E.removeClass(Y[12]),j(["set","change"])}function s(b,c){1===c.handles.length&&c.handles[0].children().addClass(Y[15]),b.stopPropagation(),p(X.move,U,q,{start:b.calcPoint,handles:c.handles,positions:[F[0],F[D.length-1]]}),p(X.end,U,r,null),b.cursor&&(a("body").css("cursor",a(b.target).css("cursor")),D.length>1&&E.addClass(Y[12]),a("body").on("selectstart"+W,!1))}function t(b){var d,g=b.calcPoint,h=0;b.stopPropagation(),a.each(D,function(){h+=this.offset()[c.style]}),h=h/2>g||1===D.length?0:1,g-=C.offset()[c.style],d=100*g/e(),c.events.snap||f(E,Y[14],300),v(D[h],d),j(["slide","set","change"]),c.events.snap&&s(b,{handles:[D[h]]})}function u(a){var b,c;if(!a.fixed)for(b=0;b<D.length;b+=1)p(X.start,D[b].children(),s,{handles:[D[b]]});a.tap&&p(X.start,C,t,{handles:D}),a.drag&&(c=C.find("."+Y[7]).addClass(Y[10]),a.fixed&&(c=c.add(C.children().not(c).children())),p(X.start,c,s,{handles:D}))}function v(a,b,d){var e=a[0]!==D[0][0]?1:0,f=F[0]+c.margin,h=F[1]-c.margin,i=F[0]+c.limit,j=F[1]-c.limit;return D.length>1&&(b=e?Math.max(b,f):Math.min(b,h)),!1!==d&&c.limit&&D.length>1&&(b=e?Math.min(b,i):Math.max(b,j)),b=G.getStep(b),(b=g(parseFloat(b.toFixed(7))))!==F[e]&&(a.css(c.style,b+"%"),a.is(":first-child")&&a.toggleClass(Y[17],b>50),F[e]=b,J[e]=G.fromStepping(b),m(N[e]),!0)}function w(a,b){var d,e,f;for(c.limit&&(a+=1),d=0;a>d;d+=1)e=d%2,null!==(f=b[e])&&!1!==f&&("number"==typeof f&&(f=String(f)),(!1===(f=c.format.from(f))||isNaN(f)||!1===v(D[e],G.toStepping(f),d===3-c.dir))&&m(N[e]))}function x(a){if(E[0].LinkIsEmitting)return this;var b,d=h(a);return c.dir&&c.handles>1&&d.reverse(),c.animate&&-1!==F[0]&&f(E,Y[14],300),b=D.length>1?3:1,1===d.length&&(b=1),w(b,d),j(["set"]),this}function y(){var a,b=[];for(a=0;a<c.handles;a+=1)b[a]=c.format.to(J[a]);return k(b)}function z(){return a(this).off(W).removeClass(Y.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,d}function A(){return k(a.map(F,function(a,b){var c=G.getApplicableStep(a),d=i(String(c[2])),e=J[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d));return[[0===a?null:g>=c[1]?c[2]:c[0]||!1,f]]}))}function B(){return d}var C,D,E=a(b),F=[-1,-1],G=c.spectrum,J=[],N=["lower","upper"].slice(0,c.handles);if(c.dir&&N.reverse(),b.LinkUpdate=m,b.LinkConfirm=n,b.LinkDefaultFormatter=c.format,b.LinkDefaultFlag="lower",b.reappend=o,E.hasClass(Y[0]))throw new Error("Slider was already initialized.");C=M(c.dir,c.ort,E),D=L(c.handles,c.dir,C),K(c.connect,E,D),u(c.events),b.vSet=x,b.vGet=y,b.destroy=z,b.getCurrentStep=A,b.getOriginalOptions=B,b.getInfo=function(){return[G,c.style,c.ort]},E.val(c.start)}function O(a){var b=G(a,this);return this.each(function(){N(this,b,a)})}function P(b){return this.each(function(){if(!this.destroy)return void a(this).noUiSlider(b);var c=a(this).val(),d=this.destroy(),e=a.extend({},d,b);a(this).noUiSlider(e),this.reappend(),d.start===e.start&&a(this).val(c)})}function Q(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function R(b,c,d,e){if("range"===c||"steps"===c)return b.xVal;if("count"===c){var f,g=100/(d-1),h=0;for(d=[];(f=h++*g)<=100;)d.push(f);c="positions"}return"positions"===c?a.map(d,function(a){return b.fromStepping(e?b.getStep(a):a)}):"values"===c?e?a.map(d,function(a){return b.fromStepping(b.getStep(b.toStepping(a)))}):d:void 0}function S(c,d,e,f){var g=c.direction,h={},i=c.xVal[0],j=c.xVal[c.xVal.length-1],k=!1,l=!1,m=0;return c.direction=0,f=b(f.slice().sort(function(a,b){return a-b})),f[0]!==i&&(f.unshift(i),k=!0),f[f.length-1]!==j&&(f.push(j),l=!0),a.each(f,function(b){var g,i,j,n,o,p,q,r,s,t,u=f[b],v=f[b+1];if("steps"===e&&(g=c.xNumSteps[b]),g||(g=v-u),!1!==u&&void 0!==v)for(i=u;v>=i;i+=g){for(n=c.toStepping(i),o=n-m,r=o/d,s=Math.round(r),t=o/s,j=1;s>=j;j+=1)p=m+j*t,h[p.toFixed(5)]=["x",0];q=a.inArray(i,f)>-1?1:"steps"===e?2:0,!b&&k&&(q=0),i===v&&l||(h[n.toFixed(5)]=[i,q]),m=n}}),c.direction=g,h}function T(b,c,d,e,f,g){function h(a){return["-normal","-large","-sub"][a]}function i(a,c,d){return'class="'+c+" "+c+"-"+k+" "+c+h(d[1],d[0])+'" style="'+b+": "+a+'%"'}function j(a,b){d&&(a=100-a),b[1]=b[1]&&f?f(b[0],b[1]):b[1],l.append("<div "+i(a,"noUi-marker",b)+"></div>"),b[1]&&l.append("<div "+i(a,"noUi-value",b)+">"+g.to(b[0])+"</div>")}var k=["horizontal","vertical"][c],l=a("<div/>");return l.addClass("noUi-pips noUi-pips-"+k),a.each(e,j),l}var U=a(document),V=a.fn.val,W=".nui",X=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Y=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];t.prototype.getMargin=function(a){return 2===this.xPct.length&&k(this.xVal,a)},t.prototype.toStepping=function(a){return a=o(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},t.prototype.fromStepping=function(a){return this.direction&&(a=100-a),e(p(this.xVal,this.xPct,a))},t.prototype.getStep=function(a){return this.direction&&(a=100-a),a=q(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},t.prototype.getApplicableStep=function(a){var b=n(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]},t.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var Z={to:function(a){return a.toFixed(2)},from:Number};a.fn.val=function(b){function c(a){return a.hasClass(Y[0])?Q:V}if(!arguments.length){var d=a(this[0]);return c(d).call(d)}var e=a.isFunction(b);return this.each(function(d){var f=b,g=a(this);e&&(f=b.call(this,d,g.val())),c(g).call(g,f)})},a.fn.noUiSlider=function(a,b){switch(a){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(b?P:O).call(this,a)},a.fn.noUiSlider_pips=function(b){var c=b.mode,d=b.density||1,e=b.filter||!1,f=b.values||!1,g=b.format||{to:Math.round},h=b.stepped||!1;return this.each(function(){var b=this.getInfo(),i=R(b[0],c,f,h),j=S(b[0],d,c,i);return a(this).append(T(b[1],b[2],b[0].direction,j,e,g))})}}(window.jQuery||window.Zepto),define("noUiSlider",["jquery"],function(a){return function(){var b;return b||a.noUiSlider}}(this)),define("c_030_1",["jquery","handlebars","underscore","noUiSlider"],function(a,b,c,d){"use strict";function e(a,b){var c,d=H.analyticsManager,e=H.tracking,f=d.trackingVars.search,g=d.getTrackingObjectProperties(f),h={};h[g.componentId]=e.componentId,h[g.searchType]=e.filterTypes.carRange,"Price"===a?(c=G.attr(H.attrs.rangeSliderTemplate),c=c.replace("%price%",parseInt(b,10)),h[g.searchFilter]=e.filterTypes.carPrice):(c=b,h[g.searchFilter]=e.filterTypes.carType),h[g.searchFilterValue]=c,d.track(f,h)}function f(a,b){var c=H.analyticsManager,d=H.tracking,e=c.trackingVars.ranking,f=c.getTrackingObjectProperties(e),g={};g[f.componentId]=d.componentId,g[f.rankingType]="car range",g[f.rankingText]=b,c.track(e,g)}function g(){var a=A.filter(H.selectors.visible).length,b=E.find("> span"),c=b.text();F.length&&F.text(a),c.indexOf(H.variables.count)>=0&&b.text(c.replace(H.variables.count,a))}function h(){var b,d=[];return A.each(function(c,e){b=a(e).attr(H.attrs.rangeCategoryId)||"",d.push(b.split(H.categoriesSeparator))}),c.uniq(c.flatten(d))}function i(){var d,e=a(H.selectors.templates.filterButton,y).html(),f=a(H.selectors.templates.filterTitle,y).html(),g=b.compile(e),i=b.compile(f),j=z.data(H.data.categoriesMapping)||{},k=h(),l=[];c.each(k,function(a){var b,d,e=c.findWhere(j,{id:a}),f={};c.isObject(e)&&(f.id=a,f.title=e.label,b=g(f),l.push({id:parseInt(a,10),html:b}),d=i(f),z.prepend(d))}),d=c.sortBy(l,"id"),c.each(d,function(a){C.append(a.html)})}function j(){B.slideToggle(),a(H.selectors.filtersToggle).toggleClass(H.classes.active)}function k(){return A.each(function(){a(this).parent().show().addClass("is-active")})}function l(){return A.each(function(){a(this).parent().hide().removeClass("is-active")})}function m(b,c){var d,f;A.each(function(){d=a(this).parent(),f=d.attr(H.attrs.price),d.hasClass("is-active")&&d[parseInt(f,10)>parseInt(b,10)?"hide":"show"]()}),g(),c||e("Price",b),A.trigger(H.events.closeCarsQuickView)}function n(b){var d=a(b.currentTarget),f=d.attr(H.attrs.rangeCategoryId),h=z.find(H.selectors.filterTitle).removeClass(H.classes.visible),i=function(b,d){var e=a(d).attr(H.attrs.rangeCategoryId)||"",g=e.split(H.categoriesSeparator);return c.contains(g,f)};"0"===f?k():(l().filter(i).each(function(){a(this).parent().show().addClass("is-active")}),h.filter(i).addClass(H.classes.visible)),a(H.selectors.filterButton,B).removeClass(H.classes.selected),d.addClass(H.classes.selected),e(H.tracking.filterTypeCategory,d.text()),m(G.val(),d),g(),A.trigger(H.events.closeCarsQuickView)}function o(){D.closest(H.selectors.customSelect).addClass(H.classes.active)}function p(b){var c,d=A.closest("ul").find("> li");switch(D[0].selectedIndex){case 0:c=d.sort(s);break;case 1:c=d.sort(q);break;case 2:c=d.sort(r);break;default:c=d}A.closest("ul").append(c),f(H.tracking.filterTypeSort,a("option:selected",D).text())}function q(b,c){var d=parseInt(a(b).attr(H.attrs.price),10),e=parseInt(a(c).attr(H.attrs.price),10);return d<e?-1:d>e?1:0}function r(b,c){var d=parseInt(a(b).attr(H.attrs.price),10),e=parseInt(a(c).attr(H.attrs.price),10);return d>e?-1:d<e?1:0}function s(b,c){var d=parseInt(a(b).attr(H.attrs.order),10),e=parseInt(a(c).attr(H.attrs.order),10);return d<e?-1:d>e?1:0}function t(a,b){var d;d=c.isObject(b)&&b.price?b.price:-1,b.$el.closest("li").attr(H.attrs.price,d),(I+=1)===J&&o()}function u(){var b=a(H.sliderOptions.tooltipsOptions),c=parseInt(G.data("low"),10),d=parseInt(G.data("high"),10),e=G.data("step"),f={step:e,range:{min:c,max:d},start:d};"rtl"===a("html").attr("dir")&&(f.direction="rtl"),G.noUiSlider(f).on("set",function(){A.find(".qtip").each(function(){a(this).data("qtip").hide()}),m(G.val())}),b.each(function(){G.Link(this.toString()).to(H.sliderOptions.tooltipWrapper,function(b){var c=G.attr(H.attrs.rangeSliderTemplate);a(this).html(c.replace("%price%",parseInt(b,10)))})})}function v(){A.each(function(b){a(this).closest("li").attr(H.attrs.order,b)})}function w(){a(H.selectors.filtersToggle).on(H.events.click,j),a(document).on(H.events.click,H.selectors.filterButton,n),a(document).on(H.events.priceSuccess,t),a(document).on(H.events.priceError,t),D.on(H.events.change,p)}function x(b){H=a.extend({},N,b),y=a(H.selectors.root),z=a(H.selectors.range),y.length&&z.length&&(B=a(H.selectors.filters,y),A=a(H.selectors.car,z),E=a(H.selectors.text,y),F=a(H.selectors.count,y),C=a(H.selectors.categories,B),D=a(H.selectors.sortSelect,y),G=a(H.selectors.priceSlider),I=0,J=A.length,v(),i(),w(),g(),G.length&&u(),k())}var y,z,A,B,C,D,E,F,G,H,I,J,K=".C_030-1",L=".c_130",M=".c_184",N={categoriesSeparator:";",selectors:{root:".c_030-1",range:".c_030-0",car:".c_130",visible:":visible",sortSelect:".text select",filterButton:".filter-button",filterTitle:".filter-title",filters:".filters",filtersToggle:".filters-toggle",priceSlider:".range-filter .input-range",categories:".categories-inner",customSelect:".custom-selectbox",text:".text",count:".count",templates:{filterButton:"script[data-name='filter-button']",filterTitle:"script[data-name='filter-title']"}},attrs:{rangeCategoryId:"data-range-category-id",rangeCategoryTitle:"data-range-category-title",price:"data-price",order:"data-order",rangeSliderTemplate:"data-tpl"},data:{categoriesMapping:"range-categories-map"},classes:{visible:"visible",selected:"selected",active:"active"},events:{click:"click"+K,change:"change",closeCarsQuickView:"closeQuickView"+L,priceSuccess:"priceSuccess"+M,priceError:"priceError"+M},tracking:{componentId:"C30-1_Vehicle_Filter",filterTypeCategory:"category",filterTypeSort:"sort",filterTypes:{carPrice:"car price",carRange:"car range",carType:"car type"}},variables:{count:"{{count}}"},sliderOptions:{tooltipWrapper:"-inline-",tooltipsOptions:["lower"]}};return{init:x}}),define("accordion",["underscore","jquery"],function(a,b){"use strict";function c(e){if(!(this instanceof c))return new c(e);this.options=e||{},this.options.selectors=b.extend({},d,this.options.selectors),this.options.$container&&this.options.$container.attr("data-accordioninitialised","true"),this.options.items&&a.each(this.options.items,a.bind(function(a){a.accordion=this},this))}var d={accordionOffsetSelector:".docked-nav-wrapper"};return c.prototype.closeItem=function(a,b){a&&a.options.isOpen&&a.close(null,b)},c.prototype.closeItems=function(a,b){for(var c=0,d=a.length;c<d;c++)this.closeItem(a[c],b)},c.prototype.openItem=function(c,d){var e,f=!1;c&&!c.options.isOpen&&(e=b.proxy(function(){c.open(null,d),this.options.isScrollOnOpenEnabled&&this.scrollToElement(c.options.$headerElement)},this),this.options.isMultipleOpenItemsEnabled||a.each(this.options.items,function(a){a.options.isOpen&&a!==c&&(f=!0,a.close(null,e))}),!1===f&&e())},c.prototype.openItems=function(a,b){for(var c=0,d=a.length;c<d;c++)this.openItem(a[c],b)},c.prototype.scrollToElement=function(a){var c=this.options.scrollToFirstHeader&&this.options.items.length?this.options.items[0].options.$headerElement:a,d=c.offset().top,e=parseInt(b(this.options.selectors.accordionOffsetSelector).outerHeight()||0,10);e+=parseInt(this.calculateFixedComponentOffset(),10),b("html, body").animate({scrollTop:d-e})},c.prototype.calculateFixedComponentOffset=function(){var c=0;return this.options.fixedComponentsToOffset&&a.each(this.options.fixedComponentsToOffset,a.bind(function(a){c+=b(a).outerHeight(!0)},this)),c},c}),define("accordionItem",["jquery"],function(a){"use strict";function b(a){if(!(this instanceof b))return new b(a);this.uiConstants={propertyNameDataState:"data-state",propertyValueClosed:"closed",propertyValueOpen:"open"},this.defaults={transitionToOpen:"slide",transitionToClose:"slide",noTabindex:!1},this.options=a||{},this.settings=_.extend(this.defaults,this.options),this.options.isCatalogue?this.options.isOpen?this.open(!0):this.close(!0):this.options.isOpen?this.immediateOpen(!0):this.immediateClose(!0),this.options.$headerElement&&this.options.$headerElement.data({originalTitle:this.options.$headerElement.text(),originalTabindex:this.options.$headerElement.attr("tabindex"),AccordionItem:this}),this.options.$contentElement&&this.options.$contentElement.data("AccordionItem",this),this.options.isDisabled?this.disable():this.enable(),this.bindEvents()}return b.prototype.bindEvents=function(){this.options.$headerElement&&(this.options.$headerElement.on("keydown.accordionItem",_.bind(this.onKeyDown,this)),this.options.$headerElement.on("click.accordionItem",_.bind(this.onClick,this)))},b.prototype.notify=function(a){this.options.$contentElement.trigger("accordion-state-change",[this.options.isOpen,a])},b.prototype.close=function(a,b){var c=this,d=function(){c.notify(a)};if(!this.options.isDisabled||a){if(this.options.isOpen=!1,this.options.$contentElement)switch(this.options.$contentElement.attr(this.uiConstants.propertyNameDataState,this.uiConstants.propertyValueClosed),this.settings.transitionToClose){case"toggle":this.options.$contentElement.slideUp().promise().done(b,d);break;default:this.options.$contentElement.hide().promise().done(b,d)}this.options.$headerElement&&(this.options.$headerElement.trigger("toggle.accordion"),this.options.$headerElement.attr(this.uiConstants.propertyNameDataState,this.uiConstants.propertyValueClosed)),"function"==typeof this.options.onClose&&this.options.onClose(c)}},b.prototype.immediateClose=function(a,b){var c=this;this.options.isDisabled&&!a||(this.options.$contentElement&&(this.options.$contentElement.attr(this.uiConstants.propertyNameDataState,this.uiConstants.propertyValueClosed),this.options.$contentElement.hide(0)),this.options.$headerElement&&(this.options.$headerElement.trigger("toggle.accordion"),this.options.$headerElement.attr(this.uiConstants.propertyNameDataState,this.uiConstants.propertyValueClosed)),this.options.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose(c))},b.prototype.disable=function(){this.options.isDisabled=!0,this.options.$headerElement&&this.options.$headerElement.removeAttr("tabindex")},b.prototype.enable=function(){var b;this.options.isDisabled=!1,this.options.$headerElement&&!this.options.noTabindex&&(b=this.options.$headerElement.data("originalTabindex"),this.options.$headerElement.attr("tabindex",a.isNumeric(b)?b:"0"))},b.prototype.onClick=function(a){this.options.isDisabled||this.toggleState(this.options.callback)},b.prototype.onKeyDown=function(a){!a||13!==a.which&&32!==a.which||(a.preventDefault(),this.toggleState(this.options.callback))},b.prototype.open=function(a,b){var c=this,d=function(){c.notify(a)};if(!this.options.isDisabled||a){if(this.options.isOpen=!0,this.options.$contentElement)switch(this.options.$contentElement.attr(this.uiConstants.propertyNameDataState,this.uiConstants.propertyValueOpen),this.settings.transitionToOpen){case"toggle":this.options.$contentElement.show().promise().done(b,d);break;default:this.options.$contentElement.slideDown().promise().done(b,d)}this.options.$headerElement&&(this.options.$headerElement.trigger("toggle.accordion"),this.options.$headerElement.attr(this.uiConstants.propertyNameDataState,this.uiConstants.propertyValueOpen)),"function"==typeof this.options.onOpen&&this.options.onOpen(c)}},b.prototype.immediateOpen=function(a){var b=this;this.options.isDisabled&&!a||(this.options.$contentElement&&(this.options.$contentElement.attr(this.uiConstants.propertyNameDataState,this.uiConstants.propertyValueOpen),this.options.$contentElement.show(0)),this.options.$headerElement&&(this.options.$headerElement.trigger("toggle.accordion"),this.options.$headerElement.attr(this.uiConstants.propertyNameDataState,this.uiConstants.propertyValueOpen)),this.options.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen(b))},b.prototype.toggleState=function(a){this.accordion&&(this.options.isOpen?this.accordion.closeItem(this,a):this.accordion.openItem(this,a))},b.prototype.updateHeader=function(a){var b=a||this.options.$headerElement.data("originalTitle");this.options.$headerElement.text(b)},b}),define("formbuilder",["jquery","underscore","customSelect","c_019","c_019_20","c_019_22","c_019_23","c_019_25","c_019_26","c_019_27","c_019_29"],function(a,b,c,d,e,f,g,h,i,j,k){function l(a){m=b.extend({},n,a),$el=m.$el,c.init(),c_019_25=new h($el.find(".c_019-25"),{HELIOS:m.HELIOS,analyticsManager:m.analyticsManager,smartLocationContext:m.smartLocationContext,window:m.window,eventAggregator:m.eventAggregator,isConfigurator:m.isConfigurator}),c_019=new d($el.find(".c_019"),{HELIOS:m.HELIOS,analyticsManager:m.analyticsManager,smartLocationContext:m.smartLocationContext,window:m.window,eventAggregator:m.eventAggregator,isConfigurator:m.isConfigurator,containerPageType:m.containerPageType,sourceComponentId:m.sourceComponentId}),c_019_22=new f($el,{HELIOS:m.HELIOS,analyticsManager:m.analyticsManager,window:m.window}),c_019_20=new e($el,{HELIOS:m.HELIOS}),c_019_23=new g($el,{HELIOS:m.HELIOS,analyticsManager:m.analyticsManager,window:m.window}),c_019_26=new i($el,{HELIOS:m.HELIOS,analyticsManager:m.analyticsManager,window:m.window}),c_019_27=new j($el),c_019_29=new k($el,{HELIOS:m.HELIOS,analyticsManager:m.analyticsManager,window:m.window})}var m,n={keyName:"queryParamsData",mode:"sessionStorage"};return{init:l}}),define("c_130",["jquery","underscore","backbone","modal","storageManager","storageManagerKeys","accordion","accordionItem","handlebars","formbuilder"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b,c){var f=void 0!==c?c:document.body;ga=a.extend({},fa,b),F=a(ga.root),l(),F.length&&(e.init(),G=F.find(ga.batdCta),H=F.find(ga.selectors.carTitle),I=F.find(ga.selectors.carImage),J=F.find(ga.selectors.primaryCTA),K=F.find(ga.selectors.secondaryCTA),L=F.find(ga.selectors.brochureCTA),M=F.find(ga.selectors.accordionButton),N=a(ga.stickynav),
Y=F.data(ga.data.confirmationText),Z=F.data(ga.data.confirmationHeadline),N.length&&(O=N.height()),a(ga.groupSelect).each(function(){var b=a(this).find(ga.col4),c=b.length,d=c%ga.columnsOnLarge||ga.columnsOnLarge,e=c%ga.columnsOnMedium||ga.columnsOnMedium;b.slice(-d).addClass(ga.classes.largeLastRow),b.slice(-e).addClass(ga.classes.mediumLastRow)}),aa=ga.analyticsManager.trackingVars.download,ba=ga.analyticsManager.trackingVars.genericClick,S=new d({displayType:d.TYPE_CENTERED,customOverlayClass:ga.classes.customOverlayClass,customClass:ga.classes.brochuresModal+" "+ga.classes.scrollLock,clearOnClose:!1}),D(f))}function l(){a(".accordion",F).each(function(){m(a(this))})}function m(b){var c,d=a(ga.selectors.accordionPanel,b),e=a(ga.selectors.accordionHeader,b),f=e.length;for(c=0;c<f;c++){var i=new h({$contentElement:d.eq(c),$headerElement:e.eq(c),isDisabled:!1,isOpen:ga.isOpen,transitionToOpen:"toggle",transitionToClose:"toggle"});i.options.$headerElement.on("toggle.accordion",n),oa.push(i)}ka.push(new g({$container:b,isScrollOnOpenEnabled:!0,items:oa}))}function n(b){var c,d=a(b.currentTarget),e=d.closest(ga.root),f=ga.analyticsManager,g=f.trackingVars.buttonNoCookie,h=f.getTrackingObjectProperties(g),i={},j="product-selector",k="product selector";for(i[h.componentId]=ha.productSelector,i[h.buttonText]=d.text(),i[h.locationInPage]=j,i[h.contentAction]=k,i[h.vehicleModel]=e.find(ga.selectors.carTitle).text(),i[h.vehicleId]=e.data(ga.data.vehicleId),i[h.vehicleCategory]=e.data(ga.data.vehicleCategory),c=0;c<ka.length;c++)ka[c].closeItems(oa[c]);d.toggleClass(ga.expandedClass),d.hasClass(ga.expandedClass)?(d.text(d.data(ga.expandedTextAttr)),f.tag(f.trackingVars.buttonNoCookie,i)):d.text(d.data(ga.collapsedTextAttr))}function o(b){var c,d=a(b.target),e=d.closest(F),f=(ga.window.location.pathname,d.text()),g=d.attr("href"),h=e.find(ga.selectors.carTitle).text(),i=e.data(ga.data.vehicleId),j=e.data(ga.data.vehicleCategory),k={componentId:ha.links,locationInPage:"range",destination:g,buttonText:f,vehicleId:i,vehicleModel:h,vehicleCategory:j};(1===b.which||2===b.which||13===b.keyCode)&&(d.parent().hasClass(ga.classes.carTitle)&&(k.locationInPage="vehicle-preview",k.componentId=ha.defaultVal,k.buttonText=h.toLowerCase()+"-title"),(d.hasClass(ga.classes.primaryCTA)||d.hasClass(ga.classes.secondaryCTA)||d.hasClass(ga.classes.accordionButton))&&(k.locationInPage="vehicle-preview",k.componentId=ha.links,k.buttonText=d.text()),c=d.closest(ga.selectors.carImage),c.hasClass(ga.classes.carImage)&&(k.locationInPage="vehicle-preview",k.componentId=ha.defaultVal,k.buttonText=h.toLowerCase()+"-image",k.destination=c.attr("href")),ga.analyticsManager.tag("genericClick",k))}function p(a,b,c){var d=a,e=d.closest(F),f=d.text(),g=e.find(ga.selectors.carTitle).text(),h=e.data(ga.data.vehicleId),i=e.data(ga.data.vehicleCategory),j={componentId:ha.links,locationInPage:"range",destination:b,buttonText:f,vehicleId:h,vehicleModel:g,vehicleCategory:i};c&&ga.analyticsManager.tag("genericClick",j)}function q(b){var c=a(b.currentTarget),d=T?"request":"download",e={componentId:ha.multipleBrochures,locationInPage:ia+d,destination:c.attr("href"),buttonText:c.text().trim()};ga.analyticsManager.tag("genericClick",e)}function r(b){var c=a(b.target),d=c.closest(F).data(ga.data.vehicleId);d&&e.saveItem("lastVisitedVehicle",d)}function s(a,b,c){ja={id:a,model:b,category:c,brochures:[]}}function t(b){var c,f,g,h,j,k,l=a(b.currentTarget),m=1===b.which||2===b.which||13===b.keyCode,n=l.closest(ga.root),o=l.data(ga.data.enforceBrochureDownload),q=a(ga.template),r=l.data(ga.data.brochuresUrl),t=ga.analyticsManager,v=t.trackingVars.contentDisplayed,w=t.getTrackingObjectProperties(v),y={},z={},A=ga.window.location.pathname;b.preventDefault(),P=n.data(ga.data.vehicleId),Q=n.find(ga.selectors.carTitle).text(),R=n.data(ga.data.vehicleCategory),g=n.data(ga.data.vehicleName),h=n.data(ga.data.vehicleYear),$=l.attr("href"),_=l.attr("target")||pa,T=l.hasClass(ga.classes.postBrochure),f=T?"request":"download",c=i.compile(q.html(),{noEscape:!0}),j=!0===n.data(ga.data.formInline),s(P,Q,R),y[w.componentId]=ha.multipleBrochures,y[w.locationInPage]=ia+f,y[w.vehicleModel]=Q,y[w.vehicleCategory]=R,y[w.vehicleId]=P,z[w.vehicleId]=P,z[w.locationInPage]=ia+f,z[w.destination]=$,z[w.buttonText]=l.text(),S.setDisplayType(j&&!T?d.TYPE_RIGHTSLIDE:d.TYPE_CENTERED),a.ajax({url:r,dataType:"json",type:"GET",async:!1}).done(function(b){if(!(b.disclaimer||b.brochures.length>1||j&&!T))return T?(a.each(b.brochures,function(a,b){ja.brochures.push(b.value)}),ja.brochures.length>0&&(e.saveItem(la,ja),ga.analyticsManager.tag(ba,z),window.open($,_),p(l,$,m))):(window.open($,_),p(l,$,m)),!0;p(l,A,m),S.clear().then(function(){ga.inlineForm=j,b.isPost=T,b.showForm=j,j&&!T&&n.data(ga.data.formPath)&&!x()?a.ajax({url:n.data(ga.data.formPath),type:"GET",async:!1}).done(function(d){b.form=a("<div/>").append(a(d).find(".submit-form",d).addClass("hidden").end()).html(),b.submitLabel=a(d).find(".submit-form-button",d).html(),S.setContent(c(b)),E()}).then(function(){a("input[type=radio][name=brochures]").change(function(){var b=U.find(ga.selectors.inlineForm);b.length>0&&b.find(ga.selectors.formDeliveryType).val(a(this).data(ga.data.deliveryType))}),k=S.$content.find(ga.selectors.brochureListChecked),ja.modelName=g,ja.modelYear=h,ja.deliveryType=k.data(ga.data.deliveryType),e.saveItem(na,ja),u(S,b),da.trigger(ga.events.trackAnalyticsInlineForm,v,y),S.open(),S.$root.next().toggleClass(ga.classes.customOverlayClass,!j||T),o&&a(ga.selectors.brochureDownloadCta).addClass(ga.classes.hidden)}):(S.setContent(c(b)),u(S,b),ga.analyticsManager.tag(v,y),S.open(),S.$root.next().toggleClass(ga.classes.customOverlayClass,!j||T))}).then(function(){!j&&T&&(S.setContent(c(b)),u(S,b),ga.analyticsManager.tag(v,y),S.open(),S.$root.next().toggleClass(ga.classes.customOverlayClass,!j||T))})})}function u(d,e){T=e.isPost,U=d.$content,V=U.find(ga.selectors.brochuresModalCTA),V.on(ga.events.click,w),W=U.find(ga.selectors.brochuresSubmitCTA),W.on(ga.events.click,z),X=U.find(ga.selectors.appStoreLink),X.on(ga.events.click,q),U.find(ga.selectors.brochureList).first().prop("checked",!0);var f=!1;e.isPost&&U.find(ga.selectors.brochureList).on(ga.events.click,v),e.showForm&&!T&&(da=b.extend({},c.Events),j.init({HELIOS:ga.HELIOS,analyticsManager:ga.analyticsManager,smartLocationContext:ga.smartLocationContext,window:ga.window,eventAggregator:da,$el:U}),da.on("formResponse",function(b){var c=b.trackingObject;if(b.responseData&&"success"===b.responseData.result)c.formSubmissionSuccess="yes",y("success"),ja.brochures=[],f=!0,A(c,f),S.clear().then(function(){e.submitLabel=null,e.isPost=null,e.showForm=null,e.form=null;var b={headline:Z,content:Y},c=i.compile(a(ga.thankyouTemplate).html(),{noEscape:!0}),f=i.compile(a(ga.template).html(),{noEscape:!0});S.setContent(c(b)+f(e));var g=ga.selectors.c_129,h=a(ga.selectors.modalDialogContainer).css("margin-top");S._enforceTop(g,h,500,500),u(d,e)});else{c.formSubmissionSuccess="no",c.errorMessage=b.responseData.errorMessage;var g=i.compile(a(ga.errorTemplate).html(),{noEscape:!0});a(ga.selectors.inlineForm).prepend(g(b.responseData)),A(c)}}))}function v(){U.find(ga.selectors.brochureListChecked).length>0?(V.prop("disabled",!1),V.removeClass(ga.classes.btnDisabled)):(V.prop("disabled",!0),V.addClass(ga.classes.btnDisabled))}function w(b){var c=a(b.currentTarget),d=T?"request":"download";return ca={componentId:ha.multipleBrochures,locationInPage:ia+d,destination:$,buttonText:c.text()},ja.brochures=[],A()}function x(){return e.loadItem(ma)}function y(a){var b=new Date;b.setHours(b.getHours()+24),e.saveItem(ma,a,{customExpiryDate:b})}function z(b){var c,d,e=a(b.currentTarget),f=T?"request":"download";return ca={componentId:ha.multipleBrochures,locationInPage:ia+f,destination:$,buttonText:e.text()},T?A():(c=U.find("form"),c.length>0&&(d=U.find(ga.selectors.brochureListChecked),c.find(ga.selectors.formDeliveryType).val(d.data(ga.data.deliveryType)),da.trigger("submitForm",ga.inlineForm)),!1)}function A(c,d){var f,g,h=T?"request":"download";if(c=b.extend({componentId:ha.multipleBrochures,locationInPage:ia+h,vehicleModel:Q,vehicleCategory:R,vehicleId:P},c||{}),g=c.formName?ga.analyticsManager.trackingVars.formSteps:ga.analyticsManager.trackingVars.download,ga.inlineForm&&(c.brochureType=ga.inlineFormBrochureType),c.errorMessage)return f=U.find(ga.selectors.brochureListChecked),c=B(f,c),ga.analyticsManager.tag(g,c),!1;if(U.find(ga.selectors.brochureListChecked).length>0)T?(a.each(U.find(ga.selectors.brochureListChecked),function(a,b){ja.brochures.push(b.value)}),e.saveItem(la,ja),ga.analyticsManager.tag(ba,ca),window.open($,_)):(f=U.find(ga.selectors.brochureListChecked),c=B(f,c),ga.analyticsManager.tag(g,c),d||window.open(U.find(ga.selectors.brochureListChecked).data("url"),_));else if(1===U.find(ga.selectors.hiddenBrochureList).length)T?(a.each(U.find(ga.selectors.hiddenBrochureList),function(a,b){ja.brochures.push(b.value),f=U.find(ga.selectors.brochureListChecked),c=B(f,c),ga.analyticsManager.tag(g,c)}),e.saveItem(la,ja),ga.analyticsManager.tag(ba,ca),window.open($,_)):(f=U.find(ga.selectors.hiddenBrochureList),c=B(f,c),ga.analyticsManager.tag(g,c),window.open(U.find(ga.selectors.hiddenBrochureList).data("url"),_));else{if(!(U.find(ga.selectors.hiddenBrochureList).length<1))return!1;T||(c=B(f,c),ga.analyticsManager.tag(g,c),window.open($,_))}return!0}function B(c,d){if(!c)return{};var e,f=c.length;return e=f?a(c).next().text():b.first(c).title,b.extend(d,{brochureName:e,brochureAmount:f})}function C(a){P=a.vehicleId,Q=a.vehicleModel,R=a.vehicleCategory,$=a.destination}function D(b){H.on(ga.events.click,o),I.on(ga.events.click,o),J.hasClass(ga.classes.brochureCTA)||J.on(ga.events.click,o),K.on(ga.events.click,o),M.on(ga.events.click,o),G.on(ga.events.click,r),L.each(function(){a(this).on(ga.events.click,t)})}function E(){a(ga.selectors.multipleBrochures).find("input").each(function(){if("radio"===this.type||"checkbox"===this.type)return a(this).prop("checked",!0),!1})}var F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea=".c_130",fa={root:".c_130",stickynav:".c_046",batdCta:".cta-testdrive",columnsOnLarge:3,columnsOnMedium:2,col4:".col-4",events:{click:"click"+ea,touchend:"touchend"+ea,mouseup:"mouseup"+ea,keyup:"keyup"+ea,trackAnalyticsInlineForm:"trackAnalyticsInlineForm"},selectors:{carTitle:".car-title a",carImage:".media-view",accordionHeader:".accordion-header",accordionPanel:".accordion-panel",accordionButton:"a.accordion-button",primaryCTA:".primary-cta",secondaryCTA:".secondary-cta",brochureCTA:".cta-brochure",brochureModal:".brochures-modal",postModal:".post-modal",brochuresModalCTA:".brochures-cta",brochuresSubmitCTA:".brochures-submit-cta",brochureList:".form-group input",brochureListChecked:".form-group.brochure-options input:checked",hiddenBrochureList:".form-group input[type=hidden]",formDeliveryType:"[data-c_019-storage-capture='brochuresData.deliveryType']",inlineForm:".c_019 form",appStoreLink:".app-store-link",multipleBrochures:".multiple-brochures",c_129:".c_129",modalDialogContainer:".modal-dialog-container",brochureDownloadCta:".brochures-modal .multiple-brochures .brochures-cta"},classes:{largeLastRow:"large-last-row",mediumLastRow:"medium-last-row",carTitle:"car-title",carImage:"media-view",primaryCTA:"primary-cta",secondaryCTA:"secondary-cta",brochureCTA:"cta-brochure",accordionButton:"accordion-button",postBrochure:"post-brochure",btnDisabled:"btn-disabled",brochuresModal:"brochures-modal",scrollLock:"touchmove-enabled",customOverlayClass:"modal-overlay-dark",hidden:"hidden"},data:{brochuresUrl:"multiplebrochure-url",vehicleId:"vehicle-id",vehicleCategory:"vehicle-category",vehicleName:"vehicle-name",vehicleYear:"vehicle-year",deliveryType:"delivery-type",formInline:"form-inline",formPath:"form-path",confirmationHeadline:"confirmation-headline",confirmationText:"confirmation-text",enforceBrochureDownload:"enforce-brochure-download"},template:"script[data-template=brochures-modal]",thankyouTemplate:"script[data-template=brochures-thankyou]",errorTemplate:"script[data-template=brochures-error]",isOpen:!1,debounce:150,expandedClass:"expanded",collapsedTextAttr:"accordion-collapsed-text",expandedTextAttr:"accordion-expanded-text",inlineFormBrochureType:"handraiser"},ga=(a("html, body"),null),ha={links:"C130_Vehicle_Listing_Links",brochures:"130_Vehicle_Listing_Brochure",defaultVal:"C130_Vehicle_Preview",multipleBrochures:"C130A_Multi_Brochure",productSelector:"C130_Product_Selector",handraiserForm:"C130_Handraiser_form"},ia="multi-brochure-",ja={},ka=[],la=f.multipleBrochures.itemKey,ma=f.inlineForm.itemKey,na=f.inlineForm.brochuresData,oa=[],pa="_self";return{init:k,downloadBrochures:w,modalEvents:u,setBrochuresObject:s,openBrochureModal:t,setValue:C}}),define("c_030B",["jquery","storageManager","logger"],function(a,b,c){"use strict";function d(){r.on(v.events.change,f)}function e(){(n||o)&&s.show()}function f(){i(r.val()),k(r)}function g(){var a=b.loadItem(u.data.state)||!1;if(a&&a.rangePage)return a.rangePage.id}function h(){i(o?o:n)}function i(b){r.val(b),j(b),p.each(function(){b&&-1===_.indexOf(a(this).attr(u.data.carCategory).split("|"),b.toString())?a(this).parent().addClass(u.selectors.hideFilter):a(this).parent().removeClass(u.selectors.hideFilter)}),q.show()}function j(b){a(u.selectors.option).each(function(){a(this).attr(u.data.value)==b?(a(this).attr(u.data.selected,u.data.selected),a(u.selectors.selectedValue).html(a(this).html())):a(this).removeAttr(u.data.selected,u.data.selected)})}function k(a){a&&l(a)}function l(a){var b,c,d={};return v.analyticsManager?(b=v.analyticsManager.trackingVars.toggle,c=v.analyticsManager.getTrackingObjectProperties(b),d[c.componentId]="C30B_Range_Toggle",d[c.toggleType]=a.prop("name"),d[c.toggleValue]=a.find(v.selectors.optionSelected).text(),v.analyticsManager.track(b,d),!0):(t.warn("Analytics manager not defined. Exiting"),!1)}var m,n,o,p,q,r,s,t,u={selectors:{root:".c_030B",allVehicles:".c_130",mainList:".list-item",vehicleDropdown:".vehicle-dropdown",selectCategory:".custom-selectbox select",option:"option",selectedValue:".selectedValue",hideFilter:"filter-hide",optionSelected:"option:selected"},events:{change:"change"},data:{defaultCategory:"default-selected-category",carCategory:"data-range-category-id",state:"state",selected:"selected",value:"value"}},v=null;return{init:function(f){if(v=a.extend({},u,f),m=a(v.selectors.root),!m.length)return!1;t=new c({prefix:"C_030B Analytics"}),p=m.find(u.selectors.allVehicles),q=m.find(u.selectors.mainList),r=m.find(u.selectors.selectCategory),s=m.find(u.selectors.vehicleDropdown),b.init(),n=r.data("default-category")||!1,o=g()||!1,e(),h(),d()}}}),define("touchEventHelper",["jquery"],function(a){return{getTouchPosition:function(a){var b=0,c=0;return"object"==typeof a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length>0&&"number"==typeof a.originalEvent.changedTouches[0].pageX?(b=a.originalEvent.changedTouches[0].pageX,c=a.originalEvent.changedTouches[0].pageY):"number"==typeof a.originalEvent.pageX?(b=a.originalEvent.pageX,c=a.originalEvent.pageY):"number"==typeof a.originalEvent.clientX?(b=a.originalEvent.clientX,c=a.originalEvent.clientY):"object"==typeof a.originalEvent.targetTouches&&a.originalEvent.targetTouches.length>0&&(b=a.originalEvent.targetTouches[0].pageX,c=a.originalEvent.targetTouches[0].pageY),{x:b,y:c}},isTouchAvailable:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}}}),define("c_031",["underscore","jquery","touchEventHelper","logger"],function(a,b,c,d){"use strict";function e(){b(window).off(j.events.imagePan.resize)}function f(a){j=b.extend({},i,a),h=new d({prefix:"C31"}),b(".image-pan").each(function(){var a=b(this);new g(b.extend({$container:a,$image:a.find("img.image-pan-image"),$viewport:a.find(".image-pan-viewport"),$surface:a.find(".image-pan-surface")},j))})}var g,h,i={events:{drag:{push:"mousedown",release:"mouseup mouseout"},imagePan:{click:"click.imagepan",keyDown:"keydown.imagepan",keyUp:"keyup.imagepan",mouseDown:"mousedown.imagepan",mouseMove:"mousemove.imagepan",mouseOut:"mouseout.imagepan",mouseUp:"mouseup.imagepan",msPointerDown:"MSPointerDown.imagepan pointerdown.imagepan",msPointerMove:"MSPointerMove.imagepan pointermove.imagepan",msPointerOut:"MSPointerOut.imagepan pointerout.imagepan",msPointerUp:"MSPointerUp.imagepan pointerup.imagepan",resize:"resize.imagepan",touchCancel:"touchcancel.imagepan",touchEnd:"touchend.imagepan",touchMove:"touchmove.imagepan",touchStart:"touchstart.imagepan"}}},j=null;return g=function(c){if(!(this instanceof g))return new g(c);this.options=c,this.options.$container.data("ImagePan",this),this.onClick=b.proxy(this.onClick,this),this.onImageLoad=b.proxy(this.onImageLoad,this),this.changeImage=b.proxy(this.changeImage,this),this.onKeyDown=b.proxy(this.onKeyDown,this),this.onKeyUp=b.proxy(this.onKeyUp,this),this.onMouseDown=b.proxy(this.onMouseDown,this),this.onMouseMove=b.proxy(this.onMouseMove,this),this.onMouseOut=b.proxy(this.onMouseOut,this),this.onMouseUp=b.proxy(this.onMouseUp,this),this.onMsPointerDown=b.proxy(this.onMsPointerDown,this),this.onMsPointerMove=b.proxy(this.onMsPointerMove,this),this.onMsPointerOut=b.proxy(this.onMsPointerOut,this),this.onMsPointerUp=b.proxy(this.onMsPointerUp,this),this.onResize=b.proxy(a.debounce(this.onResize,1e3/60),this),this.onTouchCancel=b.proxy(this.onTouchCancel,this),this.onTouchEnd=b.proxy(this.onTouchEnd,this),this.onTouchMove=b.proxy(this.onTouchMove,this),this.onTouchStart=b.proxy(this.onTouchStart,this),this.updateImagePosition=b.proxy(this.updateImagePosition,this),this.trackPan=b.proxy(this.trackPan,this),this.panEvent=b.proxy(this.panEvent,this),this.setBounds(),this.setDisabled(!this.isImagePannable()),this.centreImage(),this.bindDefaultEvents(),b(window).on(j.events.imagePan.resize,this.onResize),this.options.$image.on("load",this.onImageLoad)},g.prototype.bindDefaultEvents=function(){h.info("bindDefaultEvents"),this.options.$viewport.on(j.events.imagePan.keyUp,this.onKeyUp).on(j.events.imagePan.keyDown,this.onKeyDown).one(j.events.drag.push,this.panEvent),window.navigator.msPointerEnabled||window.navigator.pointerEnabled?this.options.$surface.on(j.events.imagePan.msPointerDown,this.onMsPointerDown):this.options.$surface.on(j.events.imagePan.click,this.onClick).on(j.events.imagePan.mouseDown,this.onMouseDown).on(j.events.imagePan.touchStart,this.onTouchStart)},g.prototype.panEvent=function(a){var c=this;b(a.currentTarget).one(j.events.drag.release,function(a){b(this).off(),c.trackPan(a)})},g.prototype.centreImage=function(){h.info("centreImage");var a=this.getBounds();this.setImageOffset({x:(a.xMin-a.xMax)/2})},g.prototype.enforceBounds=function(){h.info("enforceBounds");var a=this.getBounds(),b=this.getImageOffset();a.xMin>b.x?this.setImageOffset({x:a.xMin}):a.xMax<b.x&&this.setImageOffset({x:a.xMax})},g.prototype.getBounds=function(){return h.info("getBounds"),void 0===this._bounds&&this.setBounds(),this._bounds},g.prototype.getImageOffset=function(){h.info("getImageOffset");var a,b,c,d,e,f,g=this.options.$image;return Modernizr.csstransforms3d?(d=g.css("transform")||g.css("-o-transform")||g.css("-ms-transform")||g.css("-moz-transform")||g.css("-webkit-transform"),"none"===d?e=0:(/^matrix3d/.test(d)?c=d.match(/matrix3d\(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, (-?\d+(?:\.\d+)?), 0, 0, 1\)/):/^matrix/.test(d)&&(c=d.match(/matrix\(1, 0, 0, 1, (-?\d+(\.\d+)?), 0\)/)),c&&c.length>1&&(e=parseFloat(c[1])))):(b=g.css("left"),"auto"===b?(a=g.attr("style").match(/left:\s(-?\d+(\.\d+)?)px/),e=a&&a.length>1?parseFloat(a[1]):0):e=parseFloat(b)),{x:e,y:f}},g.prototype.isImagePannable=function(){return h.info("isImagePannable "+this.options.$image.width()+" > "+this.options.$viewport.width()),this.options.$image.width()>this.options.$viewport.width()},g.prototype.onClick=function(){h.info("onClick"),!1===this.currentInteraction.isDrag&&this.options.$viewport.trigger("focus")},g.prototype.changeImage=function(a){h.info("changeImage"),this.options.$image=a,this.options.$image.on("load",this.onImageLoad),this.onImageLoad()},g.prototype.onImageLoad=function(){h.info("onImageLoad"),this.setBounds(),this.centreImage(),this.setDisabled(!this.isImagePannable())},g.prototype.onKeyDown=function(a){h.info("onKeyDown "+a.keyCode);var b=50;switch(void 0!==this.currentInteraction&&!0===this.currentInteraction.isInProgress||37!==a.keyCode&&39!==a.keyCode||this.onInteractionStart({x:this.getImageOffset().x,isKeyboardEvent:!0}),a.keyCode){case 37:this.onInteractionMove(this.currentInteraction.interactionLastX+b);break;case 39:this.onInteractionMove(this.currentInteraction.interactionLastX-b)}},g.prototype.onKeyUp=function(a){switch(h.info("onKeyUp "+a.keyCode),a.keyCode){case 37:case 39:this.onInteractionEnd()}},g.prototype.onInteractionEnd=function(){h.info("onInteractionEnd"),this.scheduleReshowPanIcon(),this.currentInteraction.isInProgress=!1,this.options.$surface.off(j.events.imagePan.mouseMove+" "+j.events.imagePan.mouseOut+" "+j.events.imagePan.mouseUp+" "+j.events.imagePan.msPointerMove+" "+j.events.imagePan.msPointerOut+" "+j.events.imagePan.msPointerUp+" "+j.events.imagePan.touchCancel+" "+j.events.imagePan.touchEnd+" "+j.events.imagePan.touchMove),this.setIsInUse(!1)},g.prototype.onInteractionMove=function(a){h.info("onInteractionMove");var b=a-this.currentInteraction.interactionStartX+this.currentInteraction.panOffsetStartX,c=this.validateOffset(b);this.currentInteraction.interactionLastX=c,this.currentInteraction.isDrag=this.currentInteraction.isDrag||Math.abs(a-this.currentInteraction.interactionStartX)>5,this.currentInteraction.isTouchEvent&&this.updateImagePosition()},g.prototype.onInteractionStart=function(a){h.info("onInteractionStart"),this.clearIconSchedule();var b=this.getImageOffset();this.currentInteraction={isDrag:!1,isInProgress:!0,interactionLastX:b.x,interactionStartX:a.x,interactionStartY:a.y,isTouchEvent:a.isTouchEvent,panOffsetStartX:b.x},window.navigator.msPointerEnabled||window.navigator.pointerEnabled?this.options.$surface.on(j.events.imagePan.msPointerMove,this.onMsPointerMove).on(j.events.imagePan.msPointerOut,this.onMsPointerOut).on(j.events.imagePan.msPointerUp,this.onMsPointerUp):(a.isMouseEvent&&this.options.$surface.on(j.events.imagePan.mouseMove,this.onMouseMove).on(j.events.imagePan.mouseOut,this.onMouseOut).on(j.events.imagePan.mouseUp,this.onMouseUp),a.isTouchEvent&&this.options.$surface.on(j.events.imagePan.touchCancel,this.onTouchCancel).on(j.events.imagePan.touchEnd,this.onTouchEnd).on(j.events.imagePan.touchMove,this.onTouchMove)),a.isTouchEvent||requestAnimationFrame(this.updateImagePosition),this.setIsInUse(!0),this.setIsIdle(!1)},g.prototype.onMouseDown=function(a){h.info("onMouseDown"),void 0!==this.currentInteraction&&!0===this.currentInteraction.isInProgress||this.onInteractionStart({x:a.pageX,isMouseEvent:!0}),a.preventDefault()},g.prototype.onMouseMove=function(a){h.info("onMouseMove"),this.onInteractionMove(a.pageX),a.preventDefault()},g.prototype.scheduleReshowPanIcon=function(){this.clearIconSchedule(),this.panIconTimer=setTimeout(b.proxy(function(){this.setIsIdle(!0),this.clearIconSchedule()},this),3e3)},g.prototype.clearIconSchedule=function(){clearTimeout(this.panIconTimer)},g.prototype.onMouseOut=function(){h.info("onMouseOut"),this.onInteractionEnd()},g.prototype.onMouseUp=function(a){h.info("onMouseUp"),this.onInteractionMove(a.pageX),this.onInteractionEnd()},g.prototype.onMsPointerDown=function(a){h.info("onMsPointerDown "+a.originalEvent.pageX),this.onInteractionStart({x:a.originalEvent.pageX})},g.prototype.onMsPointerMove=function(a){h.info("onMsPointerMove"),this.onInteractionMove(a.originalEvent.pageX)},g.prototype.onMsPointerOut=function(){h.info("onMsPointerOut"),this.onInteractionEnd()},g.prototype.onMsPointerUp=function(a){h.info("onMsPointerUp"),this.onInteractionMove(a.pageX),this.onInteractionEnd()},g.prototype.onResize=function(){h.info("onResize");var a=this.options.$container.find("img.image-pan-image");this.changeImage(a),this.enforceBounds()},g.prototype.onTouchCancel=function(a){h.info("onTouchCancel"),this.onInteractionMove(c.getTouchPosition(a).x),this.onInteractionEnd()},g.prototype.onTouchEnd=function(a){h.info("onTouchEnd"),this.onInteractionMove(c.getTouchPosition(a).x),this.onInteractionEnd()},g.prototype.onTouchMove=function(a){h.info("onTouchMove");var b=c.getTouchPosition(a);this.onInteractionMove(b.x),Math.abs(b.x-this.currentInteraction.interactionStartX)>Math.abs(b.y-this.currentInteraction.interactionStartY)&&a.preventDefault()},g.prototype.onTouchStart=function(a){h.info("onTouchStart");var b;void 0!==this.currentInteraction&&!0===this.currentInteraction.isInProgress||(b=c.getTouchPosition(a),this.onInteractionStart({isTouchEvent:!0,x:b.x,y:b.y}))},g.prototype.setBooleanAttribute=function(a,b,c){h.info("setBooleanAttribute");var d,e=a.attr(b),f="false",g="true";c&&e!==g?d=g:c||e===f||(d=f),void 0!==d&&a.attr(b,d)},g.prototype.setBounds=function(){h.info("setBounds");var a=this.options.$image.width(),b=this.options.$viewport.width();this._bounds={xMin:a<=b?0:b-a,xMax:0}},g.prototype.setDisabled=function(a){h.info("setDisabled");var b=this.options.$viewport.attr("tabindex");a&&void 0!==b?this.options.$viewport.removeAttr("tabindex"):a||"0"===b||this.options.$viewport.attr("tabindex","0")},g.prototype.setImageOffset=function(a){h.info("setImageOffset");var b,c;Modernizr.csstransforms3d?(c="translate3d("+a.x+"px, 0, 0)",b={"-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c}):b={left:a.x+"px"},this.options.$image.css(b)},g.prototype.setIsInUse=function(a){h.info("setIsInUse "+a),this.setBooleanAttribute(this.options.$container,"data-isinuse",a)},g.prototype.setIsUsed=function(a){h.info("setIsUsed"),this.setBooleanAttribute(this.options.$container,"data-isused",a)},g.prototype.setIsIdle=function(a){h.info("setIsIdle"),this.setBooleanAttribute(this.options.$container,"data-isidle",a)},g.prototype.validateOffset=function(a){h.info("validateOffset "+a);var b=this.getBounds(),c=a;return c>b.xMax?c=b.xMax:c<b.xMin&&(c=b.xMin),c},g.prototype.unbindDefaultEvents=function(){h.info("unbindDefaultEvents"),this.options.$viewport.off(j.events.imagePan.keyUp,this.onKeyUp).off(j.events.imagePan.keyDown,this.onKeyDown),this.options.$surface.off(j.events.imagePan.click).off(j.events.imagePan.mouseDown).off(j.events.imagePan.touchStart)},g.prototype.updateImagePosition=function(){h.info("updateImagePosition"),this.currentInteraction.isInProgress&&!this.currentInteraction.isTouchEvent&&requestAnimationFrame(this.updateImagePosition),this.getImageOffset().x!==this.currentInteraction.interactionLastX&&(this.setImageOffset({x:this.currentInteraction.interactionLastX}),this.setIsUsed(!0))},g.prototype.trackPan=function(a){var c,d=b(a.target),e=d.parents(".c_031"),f=e.data("component-id"),g="interior-360",h=e.data("vehicle-model"),i=e.data("vehicle-id"),k=e.data("vehicle-category"),l=j.analyticsManager;c={componentId:f,interactionType:g,vehicleModel:h,vehicleId:i,vehicleCategory:k},l.tag("panInteraction",c)},{destroy:e,init:f}}),define("c_033",["jquery"],function(a){"use strict";function b(b){return d=a.extend({},c,b),a(c.moduleSelect).each(function(a,b){var c=new g(b);return e.push(c),c})}var c={moduleSelect:".c_033",colourPicker:".colour-picker",transtionTime:500,events:{click:"click",drag:{push:"mousedown",release:"mouseup mouseout"}}},d=null,e=[],f=13,g=function(b){function c(b){b.preventDefault();var c=a(b.target),e=c.attr("data-index"),f=b.target.getAttribute("alt"),g=r.find(".image-pan-viewport"),h=v.eq(e).html();t.find(".selected").removeClass("selected"),c.closest("li").addClass("selected"),g.children(".image-pan-image").before(h),window.picturefill(),g.children(".image-pan-image:eq(0)").nextAll(".image-pan-image").fadeOut(d.transtionTime,function(){a(this).remove()});var i=g.children(".image-pan-image:eq(0)").find("img.image-pan-image");g.parents(".image-pan").data("ImagePan").changeImage(i),u.html(f),u.attr({"data-current":f})}function e(b){var c=a(b).attr("alt");u.html(c)}function g(a){var b=u.attr("data-current");u.html(b)}function h(b){if(b.keyCode===f){a(b.target).find("img").click()}}function i(){o(),n(),l(),p(q())}function j(b,c){var e,f,g=a(b.target),h=g.closest(r),i=h.data("componentId"),j=h.data("vehicleModel"),k=h.data("vehicleId"),l=h.data("vehicleCategory"),m=d.analyticsManager;e=c?h.data("interactionType"):"interior-360",f={componentId:i,interactionType:e,vehicleModel:j,vehicleId:k,vehicleCategory:l},m.tag("panInteraction",f)}function k(b){var c=a(b.target),e=c.closest(r),f=e.data("componentId"),g="colour-picker",h=c.attr("alt"),i=e.data("vehicleModel"),j=e.data("vehicleId"),k=e.data("vehicleCategory"),l=d.analyticsManager,m={componentId:f,interactionType:g,vehicleModel:i,vehicleId:j,vehicleCategory:k,colour:h};l.tag("colourPicker",m)}function l(){var b=r.find(".image-pan-viewport");y.on("click",function(a){c(a),k(a)}),x.on("click",function(b){b.preventDefault(),a(b.target).parent().hasClass("next")?w.append(w.find("li:first-child")):w.prepend(w.find("li:last-child")),w.addClass("redraw").removeClass("redraw")}),z.hover(e,g),a(window).resize(function(){B(function(){n()})}),s.on("keyup",z,h),b.one(d.events.drag.push,m)}function m(b){var c=a(b.target),e=null,f=!1;e=setTimeout(function(){e=null,f=!0},500),c.one(d.events.drag.release,function(b){a(this).off(),e&&"mouseup"===b.type?(clearTimeout(e),j(b,!0)):(f||"mouseout"===b.type)&&(f=!1,j(b,!1))})}function n(){A.filter(":hidden").length>0?t.addClass("arrows-active"):t.removeClass("arrows-active")}function o(){y.each(function(a,b){b.setAttribute("data-index",a)}),A.first().addClass("selected"),A.each(function(){w.contents().filter(function(){return 3===this.nodeType}).remove()}),A.first().addClass("selected"),s.fadeIn(100)}function p(a){for(var b=[],c=0;c<a.length;c++)b[c]=new Image,b[c].src=a[c]}function q(){var b=[];return v.each(function(){for(var c,d=a(this).html(),e=/<span[^>]+data-src="?([^"\s]+)"/g;c=e.exec(d);)b.push(c[1])}),b}var r=a(b),s=r.find(".colour-selection-panel"),t=r.find(d.colourPicker),u=r.find(".colour-name"),v=r.find("script.cp_template"),w=t.find("ul"),x=t.find(".prevnext button"),y=(t.find(".next button"),t.find(".prev button"),w.find("li img")),z=y,A=w.find("li"),B=function(){var a={},b="uniqueId"+Math.random();return function(c){a[b]&&clearTimeout(a[b]),a[b]=setTimeout(c,100)}}();return i(),this};return{init:b}}),define("vehicle360DataController",[],function(){"use strict";function a(){navigator.userAgent.toLowerCase();this.isComponentInitialized=!1,this.trim=null,this.selectedOption=null,this.loadedDataHash={},this.seqOrderHash={},this.initialImageRange=2,this.prevConfiguration=null,this.preservedFrameIdx=0}return a.prototype.getFrameCount=function(){var a=-1;return this.isComponentInitialized?a=this.frameCount:this.log("WARNING: [getFrameCount] the frame count is not available.The component is not initialized yet."),a},a.prototype.setup=function(a){this.configObj=a,this.processConfig(a)},a.prototype.isExterior=function(){var a=!1;return this.exteriorDataUrl&&this.modelUrl===this.exteriorDataUrl?a=!0:this.modelImageList===this.exteriorImageList&&(a=!0),a},a.prototype.isVertical=function(){var a=!1;return(this.isExterior()&&"vertical"===this.fitImages.exterior||!this.isExterior()&&"vertical"===this.fitImages.interior)&&(a=this.getParentContainer().offsetHeight>0),a},a.prototype.saveModel=function(){this.prevConfiguration=null,(this.modelUrl||this.modelImageList)&&(this.prevConfiguration={},this.modelUrl?this.prevConfiguration.modelUrl=this.modelUrl:this.modelImageList&&(this.prevConfiguration.modelImageList=this.modelImageList))},a.prototype.saveConfig=function(){this.prevConfiguration&&(this.trim&&(this.prevConfiguration.trim=this.trim),
this.selectedOption&&(this.prevConfiguration.selectedOption=this.selectedOption))},a.prototype.showExterior=function(){this.modelUrl=null,this.modelImageList=null,this.exteriorDataUrl?this.modelUrl=this.exteriorDataUrl:this.modelImageList=this.exteriorImageList,this.init()},a.prototype.showInterior=function(){this.modelUrl=null,this.modelImageList=null,this.interiorDataUrl?this.modelUrl=this.interiorDataUrl:this.modelImageList=this.interiorImageList,this.init()},a.prototype.restoreConfiguration=function(){this.prevConfiguration&&(this.prevConfiguration.modelUrl?this.modelUrl=this.prevConfiguration.modelUrl:this.prevConfiguration.modelImageList&&(this.modelImageList=this.prevConfiguration.modelImageList),this.loadedDataHash[this.modelUrl]&&(this.onDataLoaded(this.loadedDataHash[this.modelUrl]),this.populateSequenceLayerOrder()),this.trim=this.prevConfiguration.trim,this.selectedOption=this.prevConfiguration.selectedOption,_.isFunction(this.onConfigurationRestored)&&this.onConfigurationRestored())},a.prototype.processConfig=function(a){var b,c,d,e;this.preserveViewAngle=!0;for(b in a)this[b]=a[b];if(a.server&&(this.serverUrl=a.server),this.serverUrl&&-1===this.serverUrl.indexOf("is/image")&&(this.serverUrl+="/is/image"),a.maxSpinFPS||(this.maxSpinFPS=7),this.container?(this.containerId=this.container,this.parentContainer=document.getElementById(this.containerId)):this.parentContainer=null,this.modelUrl=null,this.modelImageList=null,this.exteriorDataUrl?this.modelUrl=this.exteriorDataUrl:this.modelImageList=this.exteriorImageList,a.fitImages||(this.fitImages={interior:"vertical",exterior:"horizontal"}),this.spinSensitivity)for(c=this.spinSensitivity.split(","),this.sensitivityConf={default:c[c.length-1]},d=0;d<c.length-1;d++)e=c[d].split(":"),this.sensitivityConf[e[0]]=e[1];else this.sensitivityConf={default:2};this.validateConfiguration()},a.prototype.validateConfiguration=function(){var a,b={serverUrl:{type:"string",required:!0},spsCompany:{type:"string",required:!0},exteriorDataUrl:{type:"string",required:!1},exteriorImageList:{type:"object",required:!1},interiorDataUrl:{type:"string",required:!1},interiorImageList:{type:"object",required:!1},container:{type:"string",required:!0},breakpoints:{type:"array",required:!1},iscommand:{type:"string",required:!1},enableRetinaSupport:{type:"boolean",required:!1},description:{type:"string",required:!1},maxSpinFPS:{type:"number",required:!1},spinSensitivity:{type:"string",required:!1},fitImages:{type:"object",required:!1}};for(a in b){if(!this[a]&&b[a].required&&this.log("ERROR: the required configuration parameter ["+a+"] is not defined."),this[a]&&typeof this[a]!==b[a].type){if("array"===b[a].type&&"object"==typeof this[a]&&"number"==typeof this[a].length)continue;this.log("WARNING: the configuration parameter ["+a+"] type is not correct. Should be ["+b[a].type+"] istead of ["+typeof this[a]+"]")}this.fitImages&&this.checkFitImagesError(this.fitImages),this.exteriorDataUrl||this.exteriorImageList||this.log("ERROR: Neither  the required configuration parameter [exteriorDataUrl] nor [exteriorImageList] are not defined."),this.interiorDataUrl||this.interiorImageList||this.log("ERROR: Neither  the required configuration parameter [interiorDataUrl] nor [interiorImageList] are not defined.")}},a.prototype.checkFitImagesError=function(a){for(var b in a)a[b]?"vertical"!==a[b]&&"horizontal"!==a[b]&&this.log("ERROR: incorrect ["+b+"] field in [fitImages]parameter. Should be either [vertical] or [horizontal]instead of ["+a[b]+"]"):this.log("ERROR: incorrect [fitImages] parameter format.The [interior] field not available.")},a.prototype.setConfiguration=function(a,b){this.trim===a&&this.selectedOption===b||(this.saveConfig(),this.trim=a,this.selectedOption=b,_.isFunction(this.configurationChanged)&&this.isComponentInitialized&&this.configurationChanged())},a.prototype.pad=function(a,b,c){return c=c||"0",a+="",a.length>=b?a:new Array(b-a.length+1).join(c)+a},a.prototype.init=function(){this.trim=null,this.currentFrameIdx=0,this.selectedOption=null,this.isComponentInitialized=!1,this.sequence=0,this.serverUrl=this.configObj.serverUrl+"/"+this.configObj.spsCompany+"/",this.iscommand=this.configObj.iscommand,this.currentOptions="",_.isFunction(this.componentInitialize)&&this.componentInitialize(),this.exteriorDataUrl&&!this.loadedDataHash[this.exteriorDataUrl]&&this.loadData(this.exteriorDataUrl),this.interiorDataUrl&&!this.loadedDataHash[this.interiorDataUrl]&&this.loadData(this.interiorDataUrl),this.checkAllDataLoaded()},a.prototype.continueInit=function(){if(this.populateSequenceLayerOrder(),!this.modelUrl)return _.isFunction(this.componentInitialize)&&this.componentInitialize(),this.frameCount=this.modelImageList.length,this.currentFrameIdx=this.preservedFrameIdx,void this.notifyInitComplete();this.onDataLoaded(this.loadedDataHash[this.modelUrl]),this.currentFrameIdx=0,this.notifyInitComplete()},a.prototype.checkAllDataLoaded=function(){var a=!0,b=!0;this.exteriorDataUrl&&(b=!1,this.loadedDataHash[this.exteriorDataUrl]&&(b=!0)),this.interiorDataUrl&&(a=!1,this.loadedDataHash[this.interiorDataUrl]&&(a=!0)),a&&b&&this.continueInit()},a.prototype.loadData=function(a){$.getJSON(a,function(b,c){"timeout"!==c&&"error"!==c&&"parsererror"!==c||this.log("ERROR: error loading URL: ["+this.modelUrl+"], status: ["+c+"]"),this.loadedDataHash[a]=b,this.checkAllDataLoaded()}.bind(this))},a.prototype.onDataLoaded=function(a){this.frameCount=a.frameCount,this.imageSize={width:a.imageSize.width,height:a.imageSize.height},this.options=a.optionSets,this.layers=a.layers,this.trims=a.trims},a.prototype.notifyInitComplete=function(){this.processBreakPoints(),this.isComponentInitialized=!0,_.isFunction(this.onComponentInitComplete)&&this.onComponentInitComplete(),(this.trim&&this.selectedOption||this.modelImageList)&&this.configurationChanged()},a.prototype.populateSequenceLayerOrder=function(){var a=this.exteriorDataUrl?this.loadedDataHash[this.exteriorDataUrl].layers:null,b=this.interiorDataUrl?this.loadedDataHash[this.interiorDataUrl].layers:null;this.exteriorDataUrl&&!this.seqOrderHash[this.exteriorDataUrl]&&(this.seqOrderHash[this.exteriorDataUrl]=this.doPopulateSequenceLayerOrder(a,this.loadedDataHash[this.exteriorDataUrl].frameCount)),this.interiorDataUrl&&!this.seqOrderHash[this.interiorDataUrl]&&(this.seqOrderHash[this.interiorDataUrl]=this.doPopulateSequenceLayerOrder(b,this.loadedDataHash[this.interiorDataUrl].frameCount)),this.modelUrl&&(this.seqOrder=this.seqOrderHash[this.modelUrl])},a.prototype.doPopulateSequenceLayerOrder=function(a,b){function c(b){var c=[];$.each(a,function(a,d){c.push({frameIndex:_.isUndefined(d.sameFrame)?d.frames[b]:d.sameFrame,i:d.i})}),e[b]=c.sort(function(a,b){var c=b.frameIndex-a.frameIndex;return 0===c&&(c=a.i-b.i),c})}var d,e=[];for(d=0;d<b;d++)c(d);return e},a.prototype.sendIncorrectEIMEvent=function(){$("#"+this.getParentContainer().id).trigger("incorrectEIM"),this.restoreConfiguration()},a.prototype.configurationChanged=function(){return this.modelImageList?void(_.isFunction(this.onConfigurationChanged)&&this.onConfigurationChanged()):(this.selectedTrim=this.trims[this.trim],_.isUndefined(this.selectedTrim)?(_.isString(this.selectedTrim)&&(this.selectedTrim=this.trims[this.selectedTrim=this.trims[this.trim]]),this.selectedLayers=this.getLayers(this.selectedTrim,this.sequence),this.options[this.selectedOption]?(this.saveModel(),this.saveConfig(),void(_.isFunction(this.onConfigurationChanged)&&this.onConfigurationChanged())):(this.log("WARNING: the selected option ["+this.selectedOption+"] not available for current data URL: ["+this.modelUrl+"]"),void this.sendIncorrectEIMEvent())):(this.log("WARNING: the selected trim ["+this.trim+"] not available for current data URL: ["+this.modelUrl+"]"),void this.sendIncorrectEIMEvent()))},a.prototype.getLayers=function(a,b,c){var d,e,f=a.layers.split(","),g={},h=[],i=this.seqOrder;for(d=0;d<f.length;d++)g[f[d]]=!0;for(_.isUndefined(c)||(i=c),d=0;d<i[b].length;d++)e=i[b][d].i,g.hasOwnProperty(String(e))&&h.push(e);return h},a.prototype.getImageList=function(a){var b={modelImageList:null,frameCount:null,data:null};return"exterior"===a?this.exteriorImageList?(b.modelImageList=this.exteriorImageList,b.frameCount=b.modelImageList.length):this.loadedDataHash[this.exteriorDataUrl]&&(b.data=this.loadedDataHash[this.exteriorDataUrl],b.frameCount=b.data.frameCount):this.interiorImageList?(b.modelImageList=this.interiorImageList,b.frameCount=b.modelImageList.length):this.loadedDataHash[this.interiorDataUrl]&&(b.data=this.loadedDataHash[this.interiorDataUrl],b.frameCount=b.data.frameCount),b},a.prototype.getPreviewFrameUrl=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o=2e3;if("exterior"===a?this.exteriorImageList?(i=this.exteriorImageList,j=i.length):this.loadedDataHash[this.exteriorDataUrl]&&(h=this.loadedDataHash[this.exteriorDataUrl],j=h.frameCount):this.interiorImageList?(i=this.interiorImageList,j=i.length):this.loadedDataHash[this.interiorDataUrl]&&(h=this.loadedDataHash[this.interiorDataUrl],j=h.frameCount),c&&h&&(h.trims[c.trim]?h.optionSets[c.option]||(this.log("WARNING: Unable to get "+a+" preview URL for the current configuration[trim: "+c.trim+", option: "+c.option+"]"),c=null):(this.log("WARNING: Unable to get "+a+" preview URL for the current configuration [trim: "+c.trim+", option: "+c.option+"]"),c=null)),b>=j)return void this.log("WARNING: the frame index: ["+b+"] is out of range. Please enter value between: [0 - "+(j-1)+"]");if(i)g=i[b];else{for(l=c||this.getInitialConfiguration(h),n=h.trims[l.trim],_.isString(n)&&(l.trim=h.trims[l.trim],n=h.trims[l.trim]),k=this.getLayers(n,this.sequence,"exterior"===a?this.seqOrderHash[this.exteriorDataUrl]:this.seqOrderHash[this.interiorDataUrl]),g=this.serverUrl+"?",f=0;f<k.length;f++)d=h.layers[k[f]],e=d.name,"no"!==d.options&&(e+="_"+h.optionSets[l.option][d.options]),e+="_"+this.pad(b+1,3),g+="layer="+f+"&src="+e+"&";m=Math.round(this.getBreakpointWidth()*(this.enableRetinaSupport&&window.devicePixelRatio?window.devicePixelRatio:1)),m>o&&(m=o),g+="layer=COMP&&wid="+m+(this.iscommand?"&"+this.iscommand:"")}return g},a.prototype.getInitialConfiguration=function(a){var b,c={};return c.trim=Object.keys(a.trims)[0],b=a.trims[c.trim],_.isString(b)&&(c.trim=a.trims[c.trim],b=a.trims[c.trim]),b.options&&("*"===b.options?c.option=Object.keys(a.optionSets)[0]:c.option=b.options.split(",")[0]),c},a.prototype.getFrameUrl=function(a){var b,c,d,e,f=2e3;if(a>=this.frameCount)return void this.log("WARNING: the frame index: ["+a+"] is out of range. Please enter value between: [0 - "+(this.frameCount-1)+"]");if(this.modelImageList)e=this.modelImageList[a];else{if(e=this.serverUrl+"?",this.selectedLayers)for(d=0;d<this.selectedLayers.length;d++)b=this.layers[this.selectedLayers[d]],c=b.name,"no"!==b.options&&(c+="_"+this.options[this.selectedOption][b.options]),c+="_"+this.pad(a+1,3),e+="layer="+d+"&src="+c+"&";this.currentBreakPointWidth=Math.round(this.getBreakpointWidth()*(this.enableRetinaSupport&&window.devicePixelRatio?window.devicePixelRatio:1)),this.currentBreakPointWidth>f&&(this.currentBreakPointWidth=f),e+="layer=COMP&&wid="+this.currentBreakPointWidth+(this.iscommand?"&"+this.iscommand:"")}return e},a.prototype.getSensitivity=function(){var a;return this.modelImageList||(a=this.getBreakpointWidth()),this.sensitivityConf[a]?this.sensitivityConf[a]:this.sensitivityConf.default},a.prototype.processBreakPoints=function(){var a,b=document.createElement("div");if(this.processedBreakpoints=[],!this.breakpoints)return void(this.processedBreakpoints=[this.getParentContainer().offsetWidth]);for(this.getParentContainer().appendChild(b),a=0;a<this.breakpoints.length;a++)this.breakpoints[a]===parseInt(this.breakpoints[a],10)?this.processedBreakpoints.push(this.breakpoints[a]):(b.style.width=this.breakpoints[a],this.processedBreakpoints.push(b.offsetWidth));this.getParentContainer().removeChild(b)},a.prototype.getBreakpointWidth=function(){var a,b,c,d,e=!1;for(this.processedBreakpoints||this.processBreakPoints(),d=this.currentViewSize,this.isVertical()&&(d={w:this.imageSize.width*(this.currentViewSize.h/this.imageSize.height),h:this.currentViewSize.h}),b=this.processedBreakpoints,c=b[0],a=1;a<b.length;a++)if(d.w>b[a-1]&&d.w<=b[a]){c=b[a],e=!0;break}return e||d.w>b[b.length-1]&&(c=b[b.length-1]),c},a.prototype.getParentContainer=function(){return this.parentContainer||(document.getElementById(this.containerId)?this.parentContainer=document.getElementById(this.containerId):this.log("ERROR: the container with id ["+this.containerId+"] not available in DOM")),this.parentContainer},a.prototype.log=function(a){window.console.log(a)},a}),define("vehicle360MouseController",[],function(){"use strict";function a(){this.isComponentEnabled=!1,this.doPreventDefault=!1,this.lastTouchPos=null,this.direction=0,this.fps=0,this.lastMouseMoveTime=0,this.MOUSE_MOVE_UP_DELAY=100,this.eventType="none"}return a.prototype.setup=function(a){this.config=a,this.container=this.config.container,this.framesCount=0,this.dc=this.config.dc,this.startTime=null,this.setupMouseEvents()},a.prototype.setLoadedFramesCount=function(a){this.framesCount=a},a.prototype.setEnabled=function(a){this.isComponentEnabled=a},a.prototype.setupMouseEvents=function(){var a=function(b){if("mouse"===this.eventType)this.eventType="none";else if("touch"===this.eventType)return;window.removeEventListener("mouseup",a,!1),this.onMouseUp(b)}.bind(this);_.isUndefined(window.ontouchstart)||(this.container.addEventListener("touchstart",function(a){if("none"===this.eventType)this.eventType="touch";else if("mouse"===this.eventType)return;_.isUndefined(a.touches)||a.touches[0],this.onMouseDown(a)}.bind(this),!1),document.body.addEventListener("touchend",function(a){if("touch"===this.eventType)this.eventType="none";else if("mouse"===this.eventType)return;this.onMouseUp(a)}.bind(this),!1),document.body.addEventListener("touchmove",function(a){"touch"===this.eventType&&1===a.touches.length&&this.onMouseMove(a)}.bind(this),!1)),window.addEventListener?(this.container.addEventListener("mousedown",function(b){if("none"===this.eventType)this.eventType="mouse";else if("touch"===this.eventType)return;window.addEventListener("mouseup",a,!1),this.onMouseDown(b)}.bind(this),!1),document.body.addEventListener("mousemove",function(a){"mouse"===this.eventType&&this.onMouseMove(a)}.bind(this),!1),"onwheel"in document?this.container.addEventListener("wheel",function(a){this.onMouseWheel(a)}.bind(this),!1):"onmousewheel"in document&&this.container.addEventListener("mousewheel",function(a){this.onMouseWheel(a)}.bind(this),!1)):window.attachEvent&&(this.container.attachEvent("onmousedown",function(){this.onMouseDown(window.event)}.bind(this),!1),document.documentElement?(document.documentElement.attachEvent("onmouseup",function(){this.onMouseUp(window.event)}.bind(this),!1),document.documentElement.attachEvent("onmousemove",function(){this.onMouseMove(window.event)}.bind(this),!1)):(document.body.attachEvent("onmouseup",function(){this.onMouseUp(window.event)}.bind(this),!1),document.body.attachEvent("onmousemove",function(){this.onMouseMove(window.event)}.bind(this),!1)),this.container.attachEvent("onmousewheel",function(){this.onMouseWheel(window.event)}.bind(this),!1))},a.prototype.onMouseWheel=function(a){var b,c=(new Date).getTime(),d=!0,e=a.deltaX||-a.wheelDeltaX;e&&(this.config.maxSpinFPS>0&&(this.startTime?(b=c-this.startTime,b>=1e3/this.config.maxSpinFPS?(d=!0,this.startTime=c):d=!1):(this.startTime=c,d=!0)),this.isComponentEnabled&&d&&(e>0?this.spinTo(1):e<0&&this.spinTo(-1),a.preventDefault()))},a.prototype.onMouseDown=function(a){var b=null;this.isComponentEnabled&&(this.doPreventDefault=!1,this.stopAnimationSpin(),_.isUndefined(window.ontouchstart)||_.isUndefined(a.touches)?(this.startX=a.clientX,this.startY=a.clientY):(b=a.touches[0],this.startX=b.clientX,this.startY=b.clientY,this.lastTouchPos={x:b.clientX,y:b.clientY}),this.isMouseDown=!0,this.step=this.container.offsetWidth/this.framesCount/this.dc.getSensitivity())},a.prototype.onMouseUp=function(a){var b=this.framesCount;this.isMouseDown&&(this.isMouseDown=!1,this.isComponentEnabled&&((new Date).getTime()-this.lastMouseMoveTime<=this.MOUSE_MOVE_UP_DELAY&&0!==this.direction&&(this.config.maxSpinFPS>0?b=this.fps<this.config.maxSpinFPS&&0!==this.fps?this.fps:this.config.maxSpinFPS:this.fps>0&&(b=Math.min(this.fps,this.framesCount)),this.doAnimationSpin(b)),this.direction=0,this.doPreventDefault=!1))},a.prototype.stopAnimationSpin=function(){this.spinAnimationTick&&(clearInterval(this.spinAnimationTick),this.spinAnimationTick=null)},a.prototype.doAnimationSpin=function(a){function b(a){return a/=d,a--,c*(a*a*a+1)}var c=1,d=1e3,e=(new Date).getTime();this.setAnimationProps({framesCount:a,direction:this.direction}),this.stopAnimationSpin(),this.spinAnimationTick=setInterval(function(){var a,c=(new Date).getTime();a=c-e,this.isMouseDown||this.onAnimationSpinProgress(b(a)),(a>1e3||!this.isComponentEnabled)&&(clearInterval(this.spinAnimationTick),this.spinAnimationTick=null)}.bind(this),10)},a.prototype.onMouseMove=function(a){var b,c,d,e=(new Date).getTime();this.lastMouseMoveTime||(this.lastMouseMoveTime=e),this.isComponentEnabled&&this.isMouseDown&&(_.isFunction(a.preventDefault)&&this.doPreventDefault&&a.preventDefault(),_.isUndefined(a.touches)?(b=a.clientX,a.clientY):(c=a.touches[0],this.lastTouchPos&&Math.abs(this.lastTouchPos.x-c.clientX)>Math.abs(this.lastTouchPos.y-c.clientY)&&(this.doPreventDefault=!0,a.preventDefault()),b=c.clientX,c.clientY,this.lastTouchPos={x:c.clientX,y:c.clientY}),Math.abs((b-this.startX)/this.step)>=1&&(this.direction=(b-this.startX)/Math.abs(b-this.startX),d=Math.min(Math.abs(Math.round((b-this.startX)/this.step)),Math.ceil(this.framesCount/4))*this.direction,_.isFunction(this.spinTo)&&(this.startX=b,this.lastMouseMoveTime&&(this.fps=1e3*Math.abs(d/(e-this.lastMouseMoveTime))),this.spinTo(d),this.lastMouseMoveTime=(new Date).getTime())))},a}),define("vehicle360ViewController",["underscore","vehicle360MouseController","heliosObject","keyCodeConstants","backbone"],function(a,b,c,d,e){function f(a){this.framesList=[],this.createdFramesList=[],this.showSpinIcon=!0,this.vehicle360ImageLoadFailed=!1,this.eventAggregator=g()}function g(){return c.vent=c.vent||a.extend({},e.Events)}return f.prototype.setDataController=function(a){this.dc=a,this.dc.currentFrameIdx=0,this.init()},f.prototype.init=function(){this.keyDownStartTime=null,this.dc.onConfigurationChanged=function(){this.onConfigurationChanged(!0)}.bind(this),this.dc.componentInitialize=function(){this.showSpinIcon=!0,this.setShowSpinIcon(!1),this.setShowLoadingIcon(!0)}.bind(this),this.dc.onConfigurationRestored=function(){this.framesList.length>=Math.min(2*this.dc.initialImageRange+1,this.dc.frameCount)&&(this.setShowLoadingIcon(!1),this.setShowSpinIcon(!1))}.bind(this),this.createLayout(),this.setupMouseController()},f.prototype.spinNext=function(){this.checkLoadFrames(),this.dc.currentFrameIdx+1>=this.framesList.length?this.setCurrentFrameIdx(0):this.setCurrentFrameIdx(this.dc.currentFrameIdx+1)},f.prototype.spinPrev=function(){this.checkLoadFrames(),this.dc.currentFrameIdx-1<0?this.setCurrentFrameIdx(this.framesList.length-1):this.setCurrentFrameIdx(this.dc.currentFrameIdx-1)},f.prototype.onSizeCheck=function(){this.dc.modelImageList||(!this.dc.isVertical()&&this.dc.currentViewSize&&this.dc.currentViewSize.w!==this.container.offsetWidth?(this.dc.currentViewSize={w:this.container.offsetWidth,h:this.container.offsetHeight},this.checkVerticalClassName(),this.dc.currentBreakPointWidth!==this.dc.getBreakpointWidth()&&this.onConfigurationChanged(!0)):this.dc.isVertical()&&this.dc.currentViewSize&&(this.dc.currentViewSize.w!==this.container.offsetWidth||this.dc.currentViewSize.h!==this.container.offsetHeight)&&(this.checkVerticalClassName(),this.dc.currentViewSize={w:this.container.offsetWidth,h:this.container.offsetHeight},this.dc.currentBreakPointWidth!==this.dc.getBreakpointWidth()&&(this.checkVerticalClassName(),this.onConfigurationChanged(!0))))},f.prototype.checkImageIsLoaded=function(a){var b,c=!1;for(b in this.framesList)if(this.framesList[b].idx===a){c=!0;break}return c},f.prototype.setCurrentFrameIdx=function(a,b){var c;if(this.framesList.length===this.dc.frameCount||this.checkImageIsLoaded(a))for(b||this.dc.currentFrameIdx===a||this.sendSpinEvent(),this.dc.currentFrameIdx=a,c=0;c<this.framesList.length;c++)this.framesList[c].idx!==a?this.framesList[c].img.className="s7-frame-image":(this.framesList[c].img.className="s7-frame-image active",this.framesList[c].img.alt=this.dc.description||"")},f.prototype.createLayout=function(){this.container=document.createElement("div"),this.container.tabIndex="0",this.container.className="s7-spinview-container",this.dc.getParentContainer().appendChild(this.container),this.container.ondragstart=function(){return!1},window.addEventListener?this.container.addEventListener("keydown",function(a){this.onKeyDownHandler(a)}.bind(this),!0):(window.attachEvent,this.container.attachEvent("onkeydown",function(){var a=window.event;this.onKeyDownHandler(a)}.bind(this))),this.framesContainer=document.createElement("div"),this.framesContainer.className="s7-frames-container",this.container.appendChild(this.framesContainer),this.loadingIcon=document.createElement("div"),this.loadingIcon.className="s7-loading-icon shown",this.container.appendChild(this.loadingIcon),this.spinIcon=document.createElement("div"),this.spinIcon.className="s7-spin-icon hidden",this.container.appendChild(this.spinIcon),this.dc.currentViewSize={w:this.container.offsetWidth,h:this.container.offsetHeight}},f.prototype.onKeyDownHandler=function(a){var b,c=(new Date).getTime(),e=!0;this.dc.maxSpinFPS>0&&(this.keyDownStartTime?(b=c-this.keyDownStartTime,b>=1e3/this.dc.maxSpinFPS?(this.keyDownStartTime=c,e=!0):e=!1):(this.keyDownStartTime=(new Date).getTime(),e=!0)),e&&(a.keyCode===d.ARROW_LEFT?this.spinPrev():a.keyCode===d.ARROW_RIGHT&&this.spinNext())},f.prototype.onConfigurationChanged=function(a){var b=!1;this.showSpinIcon=!0,this.setShowSpinIcon(!1),this.setShowLoadingIcon(!0),a&&(b=a),this.createInitialFrame(b)},f.prototype.getInitialImagesList=function(a){var b,c,d=[],e=[];for(b=0;b<Math.min(this.dc.initialImageRange,this.dc.frameCount-1);b++)c=a+(b+1),c>=this.dc.frameCount&&(c=a+(b+1)-this.dc.frameCount),e.push(c),c=a-(b+1),c<0&&(c=this.dc.frameCount+c),d.push(c);return d.concat(e)},f.prototype.createInitialFrame=function(a){var b,c,d,e,f=!0;if(this.vehicle360ImageLoadFailed&&this.createLayout(),(!this.tempFramesList||0===this.tempFramesList.length)&&(this.tempFramesList=[],this.createdFramesList.length>0))for(c in this.createdFramesList)this.tempFramesList.push(this.createdFramesList[c]);this.framesList=[],this.createdFramesList=[],this.framesHash={},this.mc.setEnabled(!1),this.mc.setLoadedFramesCount(0),d=a?this.dc.currentFrameIdx:0,b=document.createElement("img"),b.className="s7-frame-image",this.framesContainer.appendChild(b),this.createdFramesList.push({img:b,idx:d}),b.onload=function(a){var c,e,g=!1;for(c in this.createdFramesList)if(this.createdFramesList[c].img===b){g=!0;break}if(g){if(this.framesList.push({img:b,idx:d}),this.mc.setLoadedFramesCount(this.framesList.length),this.tempFramesList.length>0){for(c in this.tempFramesList)this.tempFramesList[c].img&&this.tempFramesList[c].img.parentNode&&(e=this.tempFramesList[c].img.parentNode,e.removeChild(this.tempFramesList[c].img));this.tempFramesList=[]}this.checkEnabeMouseEvents(),b===this.framesHash[d].img&&(b.className="s7-frame-image active",b.alt=this.dc.description||""),f&&(f=!1,this.sendReadyEvent()),this.checkVerticalClassName()}}.bind(this),b.onerror=function(){this.vehicle360ImageLoadFailed=!0,this.eventAggregator.trigger("scene7ImagesNotFound"),this.dc.log("WARNING: unable to load image URL ["+this.src+"]")}.bind(this),this.vehicle360ImageLoadFailed?b.src=this.dc.exteriorImageList[0]:(b.src=this.dc.getFrameUrl(d),e=this.getInitialImagesList(d),e.forEach(function(a){this.createFrame(a)}.bind(this)))},f.prototype.checkVerticalClassName=function(){this.dc.isVertical()?(this.container.setAttribute("data-s7visible","hidden"),this.framesContainer.className="s7-frames-container s7-vertical",this.dc.isVertical()||(this.framesContainer.className="s7-frames-container"),this.container.setAttribute("data-s7visible","visible")):this.framesContainer.className="s7-frames-container"},f.prototype.sendReadyEvent=function(){$("#"+this.dc.getParentContainer().id).trigger("ready")},f.prototype.sendSpinEvent=function(){$("#"+this.dc.getParentContainer().id).trigger("spin")},f.prototype.createFrames=function(a){var b;if(a)for(b=0;b<this.dc.frameCount;b++)b!==this.dc.currentFrameIdx&&(this.createFrame(b),this.setCurrentFrameIdx(this.dc.currentFrameIdx));else{for(b=1;b<this.dc.frameCount;b++)this.createFrame(b);this.setCurrentFrameIdx(0)}},f.prototype.createFrame=function(a){var b,c=document.createElement("img");return c.className="s7-frame-image",this.framesContainer.appendChild(c),this.createdFramesList.push({img:c,idx:a}),b=this.dc.getFrameUrl(a),c.onload=function(){var b,d=!1;for(b in this.createdFramesList)if(this.createdFramesList[b].img===c){d=!0;break}d&&(this.framesList.push({img:c,idx:a}),this.mc.setLoadedFramesCount(this.framesList.length),this.checkEnabeMouseEvents())}.bind(this),c.onerror=function(){this.dc.log("WARNING: unable to load image URL ["+this.src+"]")}.bind(this),c.src=b,c},f.prototype.checkLoadFrames=function(){var a,b,c,d,e=this.dc.currentFrameIdx,f=[],g=[];if(this.createdFramesList.length!==this.dc.frameCount){for(this.setShowSpinIcon(!1),d=Math.round(this.dc.frameCount/2),a=0;a<=d;a++)c=e-a,c<0&&(c=this.dc.frameCount+c),this.framesHash[c]||f.push(c);for(a=0;a<this.dc.frameCount-d;a++)b=e+a,b>=this.dc.frameCount&&(b-=this.dc.frameCount),this.framesHash[b]||g.push(b);for(a=0;a<Math.max(f.length,g.length);a++)a<f.length&&this.createFrame(f[a]),a<g.length&&this.createFrame(g[a])}},f.prototype.checkEnabeMouseEvents=function(){var a;for(this.framesHash={},this.framesList.sort(function(a,b){return a.idx-b.idx}),this.createdFramesList.sort(function(a,b){return a.idx-b.idx}),a=0;a<this.framesList.length;a++)this.framesHash[this.framesList[a].idx]={img:this.framesList[a].img,idx:this.framesList[a].idx,framesListIdx:a};this.framesList.length===Math.min(2*this.dc.initialImageRange+1,this.dc.frameCount)&&(this.setShowLoadingIcon(!1),this.showSpinIcon&&this.dc.frameCount>1&&(this.setShowSpinIcon(!0),this.showSpinIcon=!1),this.mc.setEnabled(!0))},f.prototype.setupMouseController=function(){var a={container:this.container,framesCount:this.dc.frameCount,maxSpinFPS:this.dc.maxSpinFPS,dc:this.dc};this.mc=new b,this.mc.setup(a),this.mc.spinTo=function(a){this.doSpinTo(a)}.bind(this),this.mc.setAnimationProps=function(a){this.animationFramesCount=a.framesCount,this.spinDirection=a.direction,this.initialFrameIdx=this.dc.currentFrameIdx}.bind(this),this.mc.onAnimationSpinProgress=function(a){var b=this.initialFrameIdx+Math.round(this.animationFramesCount*a)*this.spinDirection,c=null,d=this.framesList.length;b<0?(c=-1*Math.floor(Math.abs(b/d)),b=d+b-(this.dc.frameCount-1)*c):b>=d&&(c=Math.floor(b/d),b-=d*c),this.setCurrentFrameIdx(b)}.bind(this)},f.prototype.doSpinTo=function(a){var b=null,c=this.framesList.length;0!==a&&Math.abs(a);a-=c*Math.floor(a/c),b=this.framesHash[this.dc.currentFrameIdx].framesListIdx+a,b>=c?b-=c:this.dc.currentFrameIdx+a<0&&(b=c+b),this.checkLoadFrames(),this.setCurrentFrameIdx(this.framesList[b].idx)},f.prototype.setShowLoadingIcon=function(a){this.loadingIcon.className="s7-loading-icon"+(a?" shown":" hidden")},f.prototype.setShowSpinIcon=function(a){this.spinIcon.className="s7-spin-icon"+(a?" shown":" hidden")},f}),define("vehicle360ViewerWrapper",["vehicle360DataController","vehicle360ViewController"],function(a,b){function c(){this.drawPending=!1}return c.prototype.setup=function(b){this.dataController=new a,this.dataController.setup(b),this.dataController.init(),this.dataController.onComponentInitComplete=function(){this.drawPending&&(this.drawPending=!1,this.draw())}.bind(this),this.sizeCheckTick=setInterval(function(){this.onSizeCheck()}.bind(this),500)},c.prototype.spinNext=function(){this.vc&&this.vc.spinNext()},c.prototype.spinPrev=function(){this.vc&&this.vc.spinPrev()},c.prototype.getFrameCount=function(){return this.dataController.getFrameCount()},c.prototype.getInteriorPreviewUrl=function(a,b,c){var d=b?{trim:b,option:c}:null;return this.dataController.isComponentInitialized||this.dc.log("WARNING: [getInteriorPreviewUrl] method can not provide preview URL, cause the component is not initialized yet"),this.dataController.getPreviewFrameUrl("interior",a,d)},c.prototype.getExteriorPreviewUrl=function(a,b,c){var d=b?{trim:b,option:c}:null;return this.dataController.isComponentInitialized||this.dc.log("WARNING: [getExteriorPreviewUrl] methodcan not provide preview URL, cause the component is not initialized yet"),this.dataController.getPreviewFrameUrl("exterior",a,d)},c.prototype.showExterior=function(){if(this.dataController.exteriorImageList)return void this.dataController.log("WARNING: Can not use the [showExterior] API method, cause [exteriorImageList] is defined. Use [loadExteriorImageList] API method instead.");this.dataController.modelUrl!==this.dataController.exteriorDataUrl&&(this.dataController.showExterior(),this.draw())},c.prototype.showInterior=function(){if(this.dataController.interiorImageList)return void this.dataController.log("WARNING: Can not use the [showInterior] API method, cause [interiorImageList] is defined. Use [loadInteriorImageList] API method instead.");this.dataController.modelUrl!==this.dataController.interiorDataUrl&&(this.dataController.showInterior(),this.draw())},c.prototype.loadExteriorImageList=function(a){if(this.dataController.exteriorDataUrl)return void this.dataController.log("WARNING: Can not use [loadExteriorImageList] API method, cause the [exteriorDataUrl: "+this.dataController.exteriorDataUrl+"] is defined. Use [showExterior] API method instead.");this.dataController.preservedFrameIdx=0,this.dataController.preserveViewAngle&&this.dataController.isExterior()&&this.dataController.exteriorImageList&&a.length===this.dataController.exteriorImageList.length&&(this.dataController.preservedFrameIdx=this.dataController.currentFrameIdx),this.dataController.exteriorImageList=a,this.dataController.showExterior(),this.draw()},c.prototype.loadInteriorImageList=function(a){if(this.dataController.interiorDataUrl)return void this.dataController.log("WARNING: Can not use [loadInteriorImageList] API method, cause the [interiorDataUrl: "+this.dataController.interiorDataUrl+"] is defined. Use [showInterior] API method instead.");this.dataController.preservedFrameIdx=0,this.dataController.preserveViewAngle&&!this.dataController.isExterior()&&this.dataController.interiorImageList&&a.length===this.dataController.interiorImageList.length&&(this.dataController.preservedFrameIdx=this.dataController.currentFrameIdx),this.dataController.interiorImageList=a,this.dataController.showInterior(),this.draw()},c.prototype.setConfiguration=function(a,b){this.dataController.setConfiguration(a,b)},c.prototype.onSizeCheck=function(){_.isUndefined(this.vc)||this.vc.onSizeCheck()},c.prototype.draw=function(){this.dataController.isComponentInitialized?this.vc||(this.vc=new b,this.vc.setDataController(this.dataController)):this.drawPending=!0},c}),define("c_034",["jquery","underscore","logger","vehicle360ViewerWrapper","colorPicker","disclaimers"],function(a,b,c,d,e,f){"use strict";function g(b){if(q=a.extend({},n,b),h=a(q.selectors.root),!h.length)return!1;i=new c({prefix:"C34"}),h.each(function(a){new j(this,q).init(a)})}var h,i,j,k,l,m,n={classes:{hiddenWithError:"hidden-with-error",hidden:"hidden",active:"active",selected:"selected"},events:{panInteractions:"mousedown touchstart",colourInteraction:"click",
wheelInteraction:"wheel"},dataAttributes:{damExtServiceUrl:"",damIntServiceUrl:"",flipImageOrder:"",dataState:"data-state",interiorText:"interiorText",exteriorText:"exteriorText"},selectors:{root:".c_034",spinnerContainer:".spinner-container",swatchImg:".swatch",disclaimerMessage:".disclaimer",exteriorColorPanel:".row.exterior-color-panel",interiorColorPanel:".row.interior-color-panel",toggleButton:".view-toggle",toggleContainer:".toggle-container",toggleText:".text-holder .text",extPreviewImage:".preview .int",intPreviewImage:".preview .ext",editMode:".editmode",color:".color",ClassColorOptionName:".color-option-name"},notFound:"not found",modelColourIndex:0,highResLowerBound:1.5,shouldFlipImageOrder:!0,device:{resolution:"standard",breakpoint:"large",hasMediaQueryListSupport:!1},spinState:{exterior:"exterior",interior:"interior"},panTracked:!1,delay:5e3},o={resolution:"standard",breakpoint:"large",hasMediaQueryListSupport:!1},p={exterior:"exterior",interior:"interior"},q=null,r="C34_Vehicle_360",s="exterior-360";return j=function(c,d){this.$component=a(c),this.$spinner=this.$component.find(n.selectors.spinnerContainer),this.activeExtColorObject=!1,this.activeIntColorObject=!1,this.settings=d,this.$extColorPanel=this.$component.find(this.settings.selectors.exteriorColorPanel),this.$intColorPanel=this.$component.find(this.settings.selectors.interiorColorPanel),this.$toggleContainer=this.$component.find(this.settings.selectors.toggleContainer),this.imageLibrary={extImageUrls:[],intImageUrls:[],init:function(a,b){this.extImageUrls=a,this.intImageUrls=b},getImageUrlsForBreakpoint:function(a,c){if(!b.isUndefined(a))return d.shouldFlipImageOrder?a.imagePaths[o.resolution][c].slice(0).reverse():a.imagePaths[o.resolution][c].slice(0)}},this.colorPicker={anchorSelector:".color > a",options:{updateActiveImageHandler:this.changeColor.bind(this)}},this.setDeviceResolution(),this.setDeviceBreakpoint(),this.$component.on("colorpicker.onColorSelected",function(){a(d.selectors.ClassColorOptionName).hide()}),this.$component.on("colorpicker.onUpdateColorSelectionText",function(){f.renderDisclaimers(h)}),this.$component.on("disclaimers.onDisclaimerCompleted",function(){a(d.selectors.ClassColorOptionName).show()})},j.prototype.setImageReorderFlag=function(){var a=this.$spinner.data(q.dataAttributes.flipImageOrder);void 0!==a&&(q.shouldFlipImageOrder=a)},j.prototype.requestInitialImageUrls=function(){var c,d,e=this.$spinner.data(this.settings.dataAttributes.damExtServiceUrl),f=this.$spinner.data(this.settings.dataAttributes.damIntServiceUrl);if(!e.length&&!f.length)return i.warn("DAM service url not found"),!1;a.when(a.ajax(e),a.ajax(f)).done(function(a,e){b.isObject(a[0])&&(c=a[0]),b.isObject(e[0])&&(d=e[0]),this.loadSpinnerWithImages(c,d)}.bind(this))},j.prototype.setToggleButtonIcons=function(){var a=this.$spinner.data("viewerWrapper");this.$component.find(this.settings.selectors.intPreviewImage).attr("src",a.getExteriorPreviewUrl(1)),this.$component.find(this.settings.selectors.extPreviewImage).attr("src",a.getInteriorPreviewUrl(1))},j.prototype.isEditMode=function(){return!!this.$component.find(this.settings.selectors.editMode).length},j.prototype.loadSpinnerWithImages=function(a,c){var d,e,f,g,i=[],j=[];a&&(this.activeExtColorObject=a.colours[0]),c&&(this.activeIntColorObject=c.colours[0]),e=this.activeExtColorObject&&this.activeExtColorObject.imagePaths.standard.large.length>0,f=this.activeIntColorObject&&this.activeIntColorObject.imagePaths.standard.large.length>0,e||f?(d=this.$spinner.data("viewerWrapper"),this.imageLibrary.init(a,c),this.activeExtColorObject&&(i=this.imageLibrary.getImageUrlsForBreakpoint(this.activeExtColorObject,o.breakpoint)),this.activeIntColorObject&&(j=this.imageLibrary.getImageUrlsForBreakpoint(this.activeIntColorObject,o.breakpoint)),k=this.activeExtColorObject?this.activeExtColorObject.key:this.activeIntColorObject.key,d.setup({serverUrl:this.$spinner.data("s7-server-url"),spsCompany:this.$spinner.data("s7-sps-company"),exteriorImageList:i,container:this.$spinner.attr("id"),description:"360 car spinner",interiorImageList:j}),e&&f?(d.draw(),this.updateDisclaimer(this.activeExtColorObject),this.$toggleContainer.removeClass(this.settings.classes.hidden)):e?(this.updateDisclaimer(this.activeExtColorObject),this.$extColorPanel.removeClass(this.settings.classes.hidden),this.$intColorPanel.addClass(this.settings.classes.hidden),d.loadExteriorImageList(this.imageLibrary.getImageUrlsForBreakpoint(this.activeExtColorObject,o.breakpoint))):(this.updateDisclaimer(this.activeIntColorObject),this.$toggleContainer.attr(this.settings.dataAttributes.dataState,this.settings.spinState.interior),this.$extColorPanel.addClass(this.settings.classes.hidden),this.$intColorPanel.removeClass(this.settings.classes.hidden),d.loadInteriorImageList(this.imageLibrary.getImageUrlsForBreakpoint(this.activeIntColorObject,o.breakpoint))),d.setConfiguration(),b.delay(function(){h.find(q.selectors.toggleButton).removeClass(q.classes.active)},this.settings.delay),this.setToggleButtonIcons(),this.isEditMode()&&(this.$toggleContainer.addClass(this.settings.classes.hidden),this.$intColorPanel.removeClass(this.settings.classes.hidden),this.$extColorPanel.removeClass(this.settings.classes.hidden),g=e?this.$intColorPanel:this.$extColorPanel,g.find(this.settings.selectors.color).removeClass(this.settings.classes.selected))):this.hideSpinnerComponent()},j.prototype.changeColor=function(a){var c,d=a.data("colorKey")+"",e=this.$toggleContainer.attr(this.settings.dataAttributes.dataState),f=this.$spinner.data("viewerWrapper");m=e,this.isEditMode()&&(a.parents(this.settings.selectors.exteriorColorPanel).length?e=this.settings.spinState.exterior:a.parents(this.settings.selectors.interiorColorPanel)&&(e=this.settings.spinState.interior)),e===this.settings.spinState.exterior?(c=b.findWhere(this.imageLibrary.extImageUrls.colours,{key:d}),b.isEqual(c,this.activeExtColorObject)||(this.activeExtColorObject=c,b.isUndefined(this.activeExtColorObject)||(f.loadExteriorImageList(this.imageLibrary.getImageUrlsForBreakpoint(this.activeExtColorObject,o.breakpoint)),this.updateDisclaimer(this.activeExtColorObject)))):e===this.settings.spinState.interior&&(c=b.findWhere(this.imageLibrary.intImageUrls.colours,{key:d}),b.isEqual(c,this.activeExtColorObject)||(this.activeIntColorObject=c,b.isUndefined(this.activeIntColorObject)||(f.loadInteriorImageList(this.imageLibrary.getImageUrlsForBreakpoint(this.activeIntColorObject,o.breakpoint)),this.updateDisclaimer(this.activeIntColorObject)))),this.setToggleButtonIcons()},j.prototype.updateDisclaimer=function(a){this.$component.find(this.settings.selectors.disclaimerMessage).text(a.disclaimer||"")},j.prototype.initialiseColorPicker=function(){e(this.colorPicker.options,[this.$extColorPanel,this.$intColorPanel])},j.prototype.checkForBreakpointOnResize=function(a){var b,c,d=this.$toggleContainer.attr(this.settings.dataAttributes.dataState);a.matches&&(b=o.breakpoint,this.setDeviceBreakpoint(),b!==o.breakpoint&&(c=this.$spinner.data("viewerWrapper"),d===this.settings.spinState.exterior?c.loadExteriorImageList(this.imageLibrary.getImageUrlsForBreakpoint(this.activeExtColorObject,o.breakpoint)):d===this.settings.spinState.interior&&c.loadInteriorImageList(this.imageLibrary.getImageUrlsForBreakpoint(this.activeIntColorObject,o.breakpoint))))},j.prototype.bindEvents=function(){if(o.hasMediaQueryListSupport){var a=this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.small),b=this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.medium),c=this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.large);a.addListener(this.checkForBreakpointOnResize.bind(this)),b.addListener(this.checkForBreakpointOnResize.bind(this)),c.addListener(this.checkForBreakpointOnResize.bind(this))}this.$spinner.on(this.settings.events.panInteractions,this.trackPan.bind(this)),this.$spinner.on(this.settings.events.wheelInteraction,function(a){var b=a.originalEvent;Math.abs(b.wheelDeltaY)<10&&Math.abs(b.wheelDeltaX)>2&&(a.preventDefault(),this.trackPan())}.bind(this)),this.$component.find(this.colorPicker.anchorSelector).on(this.settings.events.colourInteraction,function(a){this.handleClick(a)}.bind(this)),this.$component.find(".view-toggle").on(this.settings.events.colourInteraction,function(){this.toggleView(),this.trackToggle()}.bind(this))},j.prototype.toggleView=function(){var a=this.$spinner.data("viewerWrapper"),b=this.$toggleContainer.attr(this.settings.dataAttributes.dataState);this.settings.panTracked=!1,m=b,a.dataController&&(b===this.settings.spinState.interior?(s="exterior-360",l="exterior view",this.$intColorPanel.addClass(this.settings.classes.hidden),this.$extColorPanel.removeClass(this.settings.classes.hidden),this.updateDisclaimer(this.activeExtColorObject),a.loadExteriorImageList(this.imageLibrary.getImageUrlsForBreakpoint(this.activeExtColorObject,o.breakpoint)),this.$toggleContainer.attr(this.settings.dataAttributes.dataState,this.settings.spinState.exterior),this.$component.find(this.settings.selectors.toggleText).text(this.$component.find(this.settings.selectors.toggleText).data(this.settings.dataAttributes.interiorText))):(s="interior-360",l="interior view",this.$extColorPanel.addClass(this.settings.classes.hidden),this.$intColorPanel.removeClass(this.settings.classes.hidden),this.updateDisclaimer(this.activeIntColorObject),a.loadInteriorImageList(this.imageLibrary.getImageUrlsForBreakpoint(this.activeIntColorObject,o.breakpoint)),this.$toggleContainer.attr(this.settings.dataAttributes.dataState,p.interior),this.$component.find(this.settings.selectors.toggleText).text(this.$component.find(this.settings.selectors.toggleText).data(this.settings.dataAttributes.exteriorText))))},j.prototype.hideSpinnerComponent=function(){this.$component.addClass(this.settings.classes.hiddenWithError)},j.prototype.imageArraysRequestFail=function(a,b){i.warn("Image arrays request failed: "+b),this.hideSpinnerComponent()},j.prototype.init=function(a){this.$spinner.data("viewerWrapper",new d),this.$spinner.attr("id","spinner-"+a),this.settings.dataAttributes.damExtServiceUrl="dam-service-url",this.settings.dataAttributes.damIntServiceUrl="dam-interior-service-url",this.settings.dataAttributes.flipImageOrder="flip-image-order",this.bindEvents(),this.setImageReorderFlag(),this.requestInitialImageUrls(),this.initialiseColorPicker()},j.prototype.setDeviceBreakpoint=function(){var a,b;this.settings.window.matchMedia&&(a=this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.large),b=this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.medium),!this.settings.device.hasMediaQueryListSupport&&a.addListener&&(this.settings.device.hasMediaQueryListSupport=!0),a.matches?this.settings.device.breakpoint="large":b.matches?this.settings.device.breakpoint="medium":this.settings.device.breakpoint="small")},j.prototype.setDeviceResolution=function(){this.settings.window.devicePixelRatio>this.settings.highResLowerBound&&(this.settings.device.resolution="highRes")},j.prototype.trackPan=function(){if(!this.settings.panTracked){var a=this.settings.HELIOS.adobe.tagging.vehicleModel||this.settings.notFound,b=this.settings.HELIOS.adobe.tagging.vehicleId||this.settings.notFound,c=this.settings.HELIOS.adobe.tagging.vehicleCategory||this.settings.notFound,d={componentId:r,interactionType:s,vehicleModel:a,vehicleId:b,vehicleCategory:c};this.settings.panTracked=!0,q.analyticsManager.tag("panInteraction",d)}},j.prototype.trackToggle=function(){var a=this.settings.HELIOS.adobe.tagging.vehicleModel||this.settings.notFound,b=this.settings.HELIOS.adobe.tagging.vehicleId||this.settings.notFound,c=this.settings.HELIOS.adobe.tagging.vehicleCategory||this.settings.notFound,d={componentId:r,toggleType:"vehicle 360",toggleValue:l,vehicleModel:a,vehicleId:b,vehicleCategory:c};q.analyticsManager.tag("toggle",d)},j.prototype.handleClick=function(b){var c=a(b.target).attr("alt"),d=this.$toggleContainer.attr(this.settings.dataAttributes.dataState),e=this.settings.HELIOS.adobe.tagging.vehicleModel||this.settings.notFound,f=this.settings.HELIOS.adobe.tagging.vehicleId||this.settings.notFound,g=this.settings.HELIOS.adobe.tagging.vehicleCategory||this.settings.notFound,h=this.settings.analyticsManager.trackingVars.colourPicker,i=this.settings.analyticsManager.getTrackingObjectProperties(h),j={};m===d?k!==c&&(k=c,j[i.componentId]=r,j[i.interactionType]="colour-picker",j[i.colour]=k,j[i.vehicleModel]=e,j[i.vehicleId]=f,j[i.vehicleCategory]=g,q.analyticsManager.track(h,j)):(k=c,j[i.componentId]=r,j[i.interactionType]="colour-picker",j[i.colour]=k,j[i.vehicleModel]=e,j[i.vehicleId]=f,j[i.vehicleCategory]=g,q.analyticsManager.track(h,j))},{init:g}}),define("c_035_models",["jquery","handlebars","backbone"],function(a,b){"use strict";var c,d,e,f={domains:{youtubeVideo:"https://www.youtube.com/embed/",youtubeImage:"https://img.youtube.com/vi/"},video:{showinfo:0,controls:0,autohide:1}},g=a.param(f.video);return c=Backbone.Model.extend({defaults:function(){return{tabs:[],tab:null}},addTab:function(a){this.get("tabs").push(a)}}),e=Backbone.Model.extend({defaults:function(){return{videoUrl:null,initialized:!1,active:!1}},initialize:function(){this.checkType(),this.formatAttributes()},formatAttributes:function(){this.set({date:new Date(this.get("date")),timestamp:parseInt(this.get("timestamp"),10)}),this.get("description")&&this.set("description",this.parseText(this.get("description"),this.attributes.source)),this.set("source",this.get("source").toLowerCase()),this.set("is"+this.get("source"),!0),this.checkImageData()},checkImageData:function(){var a=this.get("imageUrl"),b=this.get("source");a&&("facebook"===b&&this.checkFacebookExternalShare(a),this.get("imageAlt")||this.set("imageAlt",this.get("title")))},checkFacebookExternalShare:function(a){var b,c,d,e=a,f="url=";-1!==e.search(f)&&(b=e.search(f)+f.length,c=e.substring(b,e.length),d=decodeURIComponent(c),this.set("imageUrl",d))},formatVideoAttributes:function(){var a;this.validYoutubeUrl(this.get("videoUrl"))&&(a=this.getVideoId(this.get("videoUrl")),this.set({videoUrl:f.domains.youtubeVideo+a+"?"+g,imageUrl:f.domains.youtubeImage+a+"/0.jpg"}))},checkType:function(){this.get("videoUrl")?this.type="video":this.get("imageUrl")?this.type="image":this.type="empty"},parseLinks:function(a){var b=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,c=/(^|[^\/])(www\.[\S]+(\b|$))/gim,d=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim;return a=a.replace(b,'<a href="$1" target="_blank">$1</a>'),a=a.replace(c,'$1<a href="http://$2" target="_blank">$2</a>'),a=a.replace(d,'<a href="mailto:$1">$1</a>')},parseHashTags:function(b,c){var d,e,f,g,h=b.match(/\S*#(?:\[[^\]]+\]|\S+)/gi),i=".com/",j=[];if(!h)return b;h.sort(function(a,b){return b.length-a.length}),a.each(h,function(b,c){-1===a.inArray(c,j)&&j.push(c)}),i+="instagram"===c?"explore/tags/":"hashtag/";for(var k=0;k<j.length;k++)d=j[k],e=d+"(?![^<]*</a>)",f=new RegExp(e,"g"),g=c+i+d.substr(1),d.indexOf("#")||(b=b.replace(f,'<a href="//'+g+'" target="_blank">'+d+"</a> "));return b},parseText:function(a,b){return a=this.parseLinks(a),a=this.parseHashTags(a,b)},validYoutubeUrl:function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)},getVideoId:function(a){var b=a.split("v=")[1],c=b.indexOf("&");return-1!=c&&(b=b.substring(0,c)),b}}),d=Backbone.Model.extend({defaults:function(){return{initialized:!1,loading:!1,page:0,lastTimestamp:a.now(),maxReached:!1,firstCallDone:!1,images:{total:0,done:0}}},reset:function(){this.set("images",this.defaults().images)}}),{SocialModel:c,SocialItemModel:e,SocialListModel:d}}),define("c_035_views",["jquery","underscore","c_035_models","handlebars","backbone"],function(a,b,c,d){"use strict";function e(b){var c,e,f={};return b.find(k.selectors.template).each(function(){c=a(this),e=c.data("name"),f[e]=d.compile(c.html(),{noEscape:!0})}),f}var f,g,h,i,j="c_035",k={descMaxLine:6,postsPerPage:3,initialPostsNumber:3,itemFadingGap:300,windowTimeout:300,selectors:{listSocial:".list-social",more:".load-more .btn",tabsButton:".tab-button ",tabsSelect:".tab-select",tabsContent:".tab-content",video:".video",template:'script[data-template="c_035"]',dataSource:"socialSource",dataTimestamp:"socialTimestamp",focusable:":focusable",togglerButton:".btn-toggler",paragraph:".description p",itemContent:".item",twitterCta:".twitter-cta",socialTitle:".social-title",txtShowMore:".txt-show-more",tabActive:".social-tabs li button.active",exitLinks:'[target="_blank"]',locationInPage:"."+j+" .heading-group h2"},events:{change:"change."+j,click:"click."+j,load:"load."+j,resize:"resize."+j,error:"error."+j,focus:"focus."+j,focusIn:"focusIn."+j,blur:"blur."+j,tweet:"tweet",retweet:"retweet",favorite:"favorite"},classes:{active:"active",resize:"resize",initializing:"initializing",initialized:"initialized",ready:"ready",imgPlaceholder:"img-placeholder",load:"loading",maxPost:"maxPost",show:"show",longContent:"longContent",close:"close",blur:"blur"},breakpoints:{}},l="C35_Social_Media_Display",m=a(window);return f=Backbone.View.extend({model:new c.SocialModel,updatingTabs:!1,initialize:function(a){var c=this,d=this.$el.data("social-initial-posts-number");this.options=a,k.breakpoints.large=a.largeBreakpoint,void 0!==d&&(k.initialPostsNumber=parseInt(d,10)),i=e(this.$el),this.$tabsButton=this.$el.find(k.selectors.tabsButton),this.$tabsSelect=this.$el.find(k.selectors.tabsSelect),this.$tabsContent=this.$el.find(k.selectors.tabsContent),this.$tabsButton.each(function(a,b){c.model.addTab(c.$tabsButton.eq(a).val())}),this.model.set("tab",this.$tabsButton.eq(0).val()),this.initEvents(),this.showContent(),this.options.window.twttr=function(a,b,c,d){var e,f,g=a.getElementsByTagName(b)[0];return a.getElementById(c)?d.options.window.twttr:(f=a.createElement(b),f.id=c,f.src="//platform.twitter.com/widgets.js",g.parentNode.insertBefore(f,g),window.twttr||(e={_e:[],ready:function(a){e._e.push(a)}}))}(document,"script","twitter-wjs",this),this.options.window.twttr.ready(function(a){a.events.bind(k.events.tweet,b.bind(function(a){c.trackTwitter(a)},c)),a.events.bind(k.events.retweet,b.bind(function(a){c.trackTwitter(a)},c)),a.events.bind(k.events.favorite,b.bind(function(a){c.trackTwitter(a)},c))})},showContent:function(a){var b=void 0===a?this.model.get("tab"):a;this.getContent(b).addClass(k.classes.show).trigger("show")},hideContent:function(a){var b=void 0===a?this.model.get("tab"):a;this.getContent(b).removeClass(k.classes.show).trigger("hide")},initEvents:function(){this.$tabsButton.on(k.events.click,b.bind(function(b){var c={componentId:l,pageName:"Social|"+a.trim(a(b.target).text())};this.analyticsManager.tag("virtualPage",c),this.changeTab(b.currentTarget)},this)).eq(0).addClass(k.classes.active),this.$tabsSelect.on(k.events.change,function(a){this.changeTab(a.currentTarget)}.bind(this)),this.$tabsContent.on(k.events.focusIn,function(b){this.onFocusIn(a(b.currentTarget).data("socialName"))}.bind(this))},onFocusIn:function(a){this.model.get("tab")!==a&&this.setTab(a)},getContent:function(b){var c=void 0===b?this.model.get("tab"):b;return this.$tabsContent.filter(function(){return a(this).data("socialName")===c})},setTab:function(b,c){if(this.hideContent(),this.model.set("tab",b),this.showContent(),this.updatingTabs)return this.updatingTabs=!1,this;void 0!==c&&"SELECT"===c.tagName||(this.updatingTabs=!0,this.$tabsSelect.val(b).trigger("change")),this.$tabsButton.removeClass(k.classes.active).filter(function(){return a(this).val()===b}).addClass(k.classes.active)},changeTab:function(b){var c=a(b).val();this.setTab(c,b)},trackTwitter:function(a){if(a){var b,c=a.target.href,d=a.target.className,e="socialShare";"reply"===d?d=k.events.tweet:"favourite"===d&&(d=k.events.favorite),b={componentId:l,urlShared:c,contentInteraction:d,contentAction:"confirmation",socialNetwork:"twitter"},this.analyticsManager.tag(e,b)}}}),g=Backbone.View.extend({analyticsManager:"",template:function(){return i.view},initialize:function(){this.template=i.view,this.isClosed=!0},render:function(){return this.el=this.template(this.model.attributes),this.$el=a(this.el),this.$paragraph=this.$el.find(k.selectors.paragraph),this.$twitterCta=this.$el.find(k.selectors.twitterCta),this.$exitLinks=this.$el.find(k.selectors.exitLinks),this.bindEvents(),this.$el},bindEvents:function(){var b=this,c=this.$el.find(k.selectors.togglerButton),d=this.$paragraph.find("a"),e=this.$twitterCta.find("a"),f=this.analyticsManager;this.imageEvent(),this.$el.on("ready",function(){b.initDOM()}),c.on(k.events.click,function(a){b.toggle(a)}),d.on(k.events.focus,function(){b.onContentElementsFocus()}).add(c).on(k.events.blur,function(){b.onContentElementsBlur()}),e.on(k.events.click,function(){var b=a(this),c=b.context.href,d=b.context.className,e="socialShare";"reply"===d?d=k.events.tweet:"favourite"===d&&(d=k.events.favorite);var g={componentId:l,urlShared:c,contentInteraction:d,contentAction:"intention",socialNetwork:"twitter"};f.tag(e,g)}),this.$exitLinks.on(k.events.click,function(b){var c=a(b.currentTarget).parents(k.selectors.itemContent).attr("class").split(" "),d=c[1]||"",e=a("img",b.currentTarget).attr("src")||a(b.currentTarget).text(),g={componentId:l,destination:a(b.currentTarget).attr("href"),locationInPage:a(k.selectors.tabActive).text(),buttonText:e,contentAction:"social-"+d};f.tag("buttonNoCookie",g)})},onContentElementsFocus:function(){this.contentFocussed=!0,this.onContentFocus()},onContentElementsBlur:function(){if(this.isLargeScreen()){this.contentFocussed=!1}},onContentFocus:function(){this.isClosed&&this.toggle()},toggle:function(b){if(this.isClosed=!this.isClosed,this.$el.toggleClass(k.classes.close,this.isClosed),this.isClosed)this.$paragraph.removeAttr("style");else if(b){var c="buttonNoCookie",d=a(b.currentTarget).parents(k.selectors.itemContent).attr("class").split(" "),e=d[1]||"",f=this.analyticsManager,g={componentId:l,destinantion:window.location.href,buttonText:a(k.selectors.txtShowMore,b.currentTarget).text(),locationInPage:a(k.selectors.tabActive).text(),contentAction:"social-"+e};f.tag(c,g)}},initDOM:function(){this.checkDescription()},checkDescription:function(){var a=this.$el.find(".description p"),b=a.height(),c=a.css("line-height"),d=parseFloat(a.css("font-size")),e=-1!==c.indexOf("px",-1);c=parseFloat(c),e?b-=3:c*=d,b/c>k.descMaxLine?(this.$el.addClass(k.classes.longContent),this.isClosed&&this.$el.addClass(k.classes.close)):this.$el.removeClass(k.classes.longContent+" "+k.classes.close)},imageEvent:function(){var a=this;this.$el.find(".media img").on(k.events.load,function(){a.model.trigger("loaded")}).on(k.events.error,function(){a.onImageError(this,a.model.get("imageAlt")),a.model.trigger("error")})},onImageError:function(b,c){var d=a(b),e=void 0===c?d.attr("alt"):c;d.parents(".media").addClass("error no-image").removeClass("video"),d.replaceWith('<span class="'+k.classes.imgPlaceholder+'">'+e+"</span>")},isLargeScreen:function(){return!window.matchMedia||window.matchMedia(k.breakpoints.large).matches}}),h=Backbone.View.extend({initialize:function(){var b=this,c=this.$el.hasClass(k.classes.show);this.windowWidth=a(window).width(),this.$htmlBody=a("html, body"),this.$container=this.$el.find(k.selectors.listSocial),this.$loadMore=this.$el.find(k.selectors.more),window.setTimeout(function(){b.$el.addClass(k.classes.initialized)},200),this.collection.on("update",this.render,this),this.bindEvents(),c&&(this.model.set({active:!0}),this.onShow())},samePost:function(a,b){for(var c=["title","link","description"],d=this.collection.at(a),e=this.collection.at(b),f=0;f<c.length;f++)if(d.get(c[f])!==e.get(c[f]))return!1;return!0},render:function(a){var b,c,d,e=this.model.get("initialized")?3:k.initialPostsNumber,f=a,g=f+e,h=0;if(this.model.get("maxReached")||0===this.collection.length)return this;for(var i=f;i<g;i++){if(void 0===(c=this.collection.at(i))){this.onNoMorePost();break}if(i===f){if(i>2&&this.samePost(i,i-3))return this.onNoMorePost(),this.model.set("loading",!1),void this.$el.removeClass(k.classes.load);b=this.addOne(c,h)}else b=b.add(this.addOne(c,h));c.on("loaded error",this.imageDone,this),d=c.get("timestamp"),h++}return this.model.set("lastTimestamp",d),this.onRendered(b),this},onNoMorePost:function(){this.$el.addClass(k.classes.maxPost),this.model.set("maxReached",!0),this.$loadMore.remove()},initNetworkAPI:function(){void 0!==window.FB&&window.FB.XFBML.parse(this.el),void 0!==window.gapi&&window.gapi.ytsubscribe.go(this.el)},onRendered:function(a){this.model.set("initialized",!0),this.initNetworkAPI(),this.$el.removeClass(k.classes.load),b.isUndefined(a)||b.delay(b.bind(function(){this.refreshItems(a)},this),200)},refreshItems:function(a){var b;this.refreshItemsPosition(),a.trigger("ready"),this.model.set("loading",!1),a.length&&(b=a.eq(0).offset().top-30,this.model.get("firstCallDone")?this.$htmlBody.stop(!0).animate({scrollTop:b},1e3):this.model.set("firstCallDone",!0))},imageDone:function(){this.model.attributes.images.done+=1,this.model.get("images").done===this.model.get("images").total&&this.refreshItemsPosition()},bindEvents:function(){return this.$el.on("show",function(){this.onShow(),this.refreshItemsPosition()}.bind(this)),this.$el.on("hide",function(){this.onHide()}.bind(this)),this.$loadMore.on(k.events.click,function(b){b.preventDefault();var c=this.analyticsManager,d={componentId:l,destinantion:window.location.href,buttonText:a(b.currentTarget).text(),locationInPage:a(k.selectors.locationInPage).text(),contentAction:a(b.currentTarget).parent().attr("class")};c.tag("buttonNoCookie",d),this.loadMore(b.currentTarget)}.bind(this)),m.resize(a.proxy(function(){this.timeoutWindowResize()},this)),this},onHide:function(){this.model.set("active",!1)},onShow:function(){this.model.set("active",!0),this.model.get("initialized")||this.loadMore()},loadMore:function(){var a,b=this.model.get("page"),c=this.collection.length/k.postsPerPage;k.postsPerPage;return this.model.get("loading")||this.model.get("maxReached")?this:(this.model.set("loading",!0),this.$el.addClass(k.classes.load),this.model.get("initialized")||3===k.initialPostsNumber?c++:(a=k.initialPostsNumber,c+=a/k.postsPerPage),this.model.set("page",c),this.collection.request(b*k.postsPerPage+1,this.model.get("lastTimestamp"),this.model.get("name"),a),this)},timeoutWindowResize:function(){var b=this,c=a(window).width();if(this.windowWidth!==c&&(this.windowWidth=c,this.model.get("active")))return this.$container.addClass(k.classes.resize),clearTimeout(this.windowTimeout),this.windowTimeout=window.setTimeout(function(){b.$container.removeClass(k.classes.resize),b.$el.trigger("resize"),b.refreshItemsPosition()},k.windowTimeout),this},addOne:function(b,c){var d,e,f=this,h="empty";return b.get("videoUrl")?h="video":b.get("imageUrl")&&(h="image"),"empty"!==h&&(this.model.attributes.images.total+=1),b.type=h,e=new g({model:b}),e.analyticsManager=this.analyticsManager,d=a(e.render()),d.addClass(k.classes.initializing),d.appendTo(this.$container),d.find(k.selectors.focusable).on(k.events.focus,function(){f.onFocus()}),window.setTimeout(function(){d.removeClass(k.classes.initializing)},c*k.itemFadingGap+15),d},onFocus:function(){this.$el.trigger(k.events.focusIn)},refreshItemsPosition:function(){var b,c,d=this,e=[0,0,0];new Date;return this.$container.find(".item").each(function(f,g){b=d.getSmallestColumn(e),c=a(g),"rtl"==a("body").css("direction").toLowerCase()?c.css({right:100*b/3+"%"}):c.css({left:100*b/3+"%"}),c.css({top:e[b]+"px"}),e[b]+=c.outerHeight()}),this.$container.css("min-height",e[this.getTallestColumn(e)]+"px"),this.$el.addClass(k.classes.ready),this},getSmallestColumn:function(a){for(var b=0,c=1/0,d=0;d<a.length;d++)a[d]<c&&(c=a[d],b=d);return b},getTallestColumn:function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d]>c&&(c=a[d],b=d);return b}}),{SocialItemView:g,SocialListView:h,SocialView:f}}),define("c_035",["jquery","c_035_models","c_035_views","scriptLoader","handlebars","backbone"],function(a,b,c,d,e){"use strict";function f(a,b){var d,e,f,g=new c.SocialView({el:a,largeBreakpoint:b.HELIOS.config.common.mediaQuery.is.large,window:b.window}),h=a.data("facebookAppId");j=a.data("socialSpecUrl"),void 0!==h&&(q.facebook.appId=h),a.data("social",g),f=g.model.get("tabs").filter(function(a,b,c){return c.indexOf(a)===b});for(var k=0;k<f.length;k++)d=new i,e=new l({model:new m({name:f[k]}),el:g.getContent(f[k]),collection:d}),e.analyticsManager=g.analyticsManager=b.analyticsManager,g.getContent(f[k]).data("social",e)}function g(b){var c=a(k.selectors.root);if(h=a.extend({},k,b),0===c.length)return!1;c.each(function(){f(a(this),b)})}var h,i,j,k={selectors:{root:".c_035"},video:{showinfo:0,controls:0,autohide:1}},l=(c.SocialView,c.SocialModel,c.SocialListView),m=b.SocialListModel,n=b.SocialItemModel,o=(a.param(k.video),[]),p={twitter:"twitter",facebook:"facebook",youtube:"google"},q={twitter:{},facebook:{},youtube:{}};return i=Backbone.Collection.extend({model:n,url:function(){return j},request:function(b,c,d,e){var f=this,g={start:b-1,time:c,name:d};void 0!==e&&(g.number=e),a.ajax({url:this.url(),data:g,dataType:"json",success:function(a){f.onAjaxDone(f,a)}})},onAjaxDone:function(a,b){var c=b.posts.length,d=a.length;this.checkSources(b.posts);for(var e=0;e<c;e++)a.addPost(b.posts[e]);a.trigger("update",d)},checkSources:function(b){var c=this;a.each(p,function(a){c.checkNetworkPost(b,a)})},checkNetworkPost:function(b,c){var e,f,g=!1;for(e=0;e<o.length;e++)if(o[e]===c)return;if(b instanceof Array){for(e=0;e<b.length;e++)if(b[e].source===c){g=!0;break}}else g=b.find(".item."+c).length>0;g&&(f=a.extend({},h),void 0!==q[c]&&(f=a.extend(f,q[c])),d.include(p[c],f),o.push(c))},addPost:function(a){this.add(a)}}),{init:g,SocialList:i}}),define("c_036",["jquery"],function(a){"use strict";function b(b,d){var e,f=a.extend(!0,{},c);this.settings=a.extend({},f,d),this.$el=b,e=a(this.settings.selectors.playlistSelect,b),this.$videoItems=a(this.settings.selectors.videoItemSelect,b),this.$playlistItems=e.find(this.settings.selectors.playlistItemsSelect),this.activeElementIndex=this.$videoItems.filter("."+this.settings.activeClass).index(),this.zIndexTimeout=null,this._initTabs(),this._bindEvents(e),this._updateButtons(0),this._updateTabIndices(0),this.loadSlideInOverlay(0)}var c={selectors:{videoItemSelect:".video-item",videoItemButtonSelect:".video-item-link",playlistSelect:".video-playlist",slideInOverlay:".slide-in-overlay",playlistItemsSelect:".video-playlist-item",videoContainer:".video-container"},transitionTime:"800",activeClass:"active"};return b.prototype._initTabs=function(){return Modernizr.csstransitions||this.$videoItems.not("."+this.settings.activeClass).css("opacity",.01),this},b.prototype._bindEvents=function(a){var b=this;return a.on("click",this.settings.selectors.videoItemButtonSelect,function(a){if(b._loadActiveTab(a),Modernizr.touch)for(var c in videojs.players){var d=videojs.players[c].tech.ytplayer.vjsTech.videoId;videojs.players[c].tech.ytplayer.cueVideoById(d),videojs.players[c].posterImage.show(),videojs.players[c].bigPlayButton.show()}}),this},b.prototype._loadActiveTab=function(b){var c,d,e=a(b.target),f=parseInt(e.data("index"),10),g=this.settings.activeClass,h=e.text();if(f!==this.activeElementIndex)return this.activeElementIndex=f,c=this.$videoItems.eq(f),d=this.$videoItems.filter("."+g),clearTimeout(this.zIndexTimeout),Modernizr.csstransitions?(d.removeClass(g),c.addClass(g)):(d.animate({opacity:0,duration:this.settings.transitionTime}),c.animate({opacity:1},this.settings.transitionTime,function(){d.removeClass(g),c.addClass(g)})),this.zIndexTimeout=setTimeout(function(){d.css("z-index",1),c.css("z-index",2)},this.settings.transitionTime),this._updateButtons(this.activeElementIndex),
this._updateTabIndices(this.activeElementIndex),this.loadSlideInOverlay(this.activeElementIndex),this._trackSearch(b.target,h),this},b.prototype._updateButtons=function(a){var b=this.settings.activeClass;return this.$playlistItems.removeClass(b).eq(a).addClass(b),this},b.prototype._updateTabIndices=function(a){this.$videoItems.find("a").attr("tabindex",-1),this.$videoItems.eq(a).find("a").attr("tabindex",0)},b.prototype._trackSearch=function(b,c){var d=a(b).parents(this.settings.selectors.videoContainer),e=d.find(this.settings.selectors.videoItemSelect+'.active meta[itemprop="embedURL"]').attr("content"),f={componentId:"C36_Video_Gallery",destination:e,locationInPage:"video gallery",buttonText:c,contentAction:"watch video"};this.settings.analyticsManager.tag("buttonNoCookie",f)},b.prototype.destroy=function(){this.$el.remove(),delete this.settings},b.prototype.loadSlideInOverlay=function(a){var b=this.$videoItems.eq(a).find(c.selectors.slideInOverlay),d=this.$el.children(c.selectors.slideInOverlay);(b.length||d.length)&&(d.hide(),this.$el.append(b),d.eq(a).show())},b}),define("c_039_0",["jquery","handlebars","priceGroups","storageManager","storageManagerKeys","validation","modal","customSelect","logger"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(b){E.info("init"),B=a.extend({},C,b),z=a(B.selectors.modalContentTemplate),z.length&&d.init()}function k(){A.$content.find(B.selectors.priceGroupSelect).on("change",function(){var b=a(this),c=b.find("option:selected").text();x(c),A.recalculateHeight(),u(c)}),A.$content.find(B.selectors.saveButton).on("click",function(){var b=a(this).text();o(),v(b)}),A.$content.find(B.selectors.forgetPriceGroupSelectionButton).on("click",function(){d.deleteItem(e.priceGroup.itemKey),a(B.window.document).trigger(t()),A.close()})}function l(){var a,c=m(),d=r(),e=b.compile(z.html()),f=_.keys(n());return c&&(a=e({isPriceGroupSelected:!!q(),priceGroups:_.filter(c.toJSON(),function(a){return _.contains(f,a.primaryPrice.priceCode)&&_.extend(a,{selected:d&&a.name===d})})})),a}function m(){var a;return B.HELIOS.config.common.pricing&&(a=new c(B.HELIOS.config.common.pricing.priceGroups)),a}function n(){var a;return _.isUndefined(B.HELIOS.config.common.pricing)||(a=B.HELIOS.config.common.pricing.priceCodes),a}function o(){var b;y.valid()&&(b=y.find(B.selectors.priceGroupSelect).val(),d.saveItem(D,b),a(document).trigger(t()),A.close())}function p(b){var c=arguments.length<=1||void 0===arguments[1]||arguments[1];d.saveItem(D,b),c&&a(document).trigger(t())}function q(){var a,b=m();return b&&(a=b.getByName(d.loadItem(D))),a}function r(){var a,b=q();return b&&(a=b.getName()),a}function s(b){a(document).on(t(),b)}function t(){return B.priceGroupChangeEventName}function u(a){var b={componentId:"C39_Pop_in",searchType:"Pricing-band",searchTerm:a};B.analyticsManager.tag("search",b)}function v(a){var b={componentId:"C39_Pop_in",destination:window.location.href,buttonText:a,locationInPage:"pricing-band",contentAction:"save"};B.analyticsManager.tag("buttonNoCookie",b)}function w(a){return z.length?(a=a||"both",A=new g({content:l(),customClass:"c_039-0-modal",displayType:g.TYPE_CENTERED,customOverlayClass:"modal-overlay-dark"}),A.$root.on("modal.close",function(){A.remove()}),A.open().done(function(){_.delay(function(){A.$closeButton.focus()},25),y=this.find(B.selectors.form),h.init(y),new f(y,{}),x(r()),k()})):(E.warn("No component in the markup"),!1)}function x(a){var b,c=A.$content.find(B.selectors.priceGroupDetails);a&&(b=c.children('[data-price-group-name="'+a+'"]')),c.children().not(b).removeClass(B.classes.active),b&&b.addClass(B.classes.active)}var y,z,A,B,C={selectors:{forgetPriceGroupSelectionButton:".forget-price-group-selection-button",form:"form",modalContentTemplate:".c_039-0-modal-content-template",priceGroupDetails:".descriptions",priceGroupSelect:"select",saveButton:".btn"},classes:{active:"active"},priceGroupChangeEventName:"changePriceGroup"},D=e.priceGroup.itemKey,E=new i({prefix:"C39.0"});return{getPriceGroupChangeEventName:t,getSelectedPriceGroup:q,updatePriceGroup:p,init:j,load:w,onPriceGroupChange:s}}),define("async",[],function(){function a(a){var b,c;b=document.createElement("script"),b.type="text/javascript",b.async=!0,b.src=a,c=document.getElementsByTagName("script")[0],c.parentNode.insertBefore(b,c)}function b(a,b){var c=/!(.+)/,e=a.replace(c,""),f=c.test(a)?a.replace(/.+!/,""):d;return(e+=e.indexOf("?")<0?"?":"&")+f+"="+b}function c(){return"__async_req_"+(e+=1)+"__"}var d="callback",e=0;return{load:function(d,e,f,g){if(g.isBuild)f(null);else{var h=c();window[h]=f,a(b(d,h))}}}}),define("baiduMaps",["jquery","async"],function(){function a(a){var b=document.createElement("script");b.type="text/javascript",b.async=!1,b.src=a,document.body.appendChild(b)}function b(){window.onBaiduReadyEvent=function(){c(d).then(function(){return c(e)}).then(function(){return c(f)}).done(function(){g.resolve()})}}function c(a){return $.ajax({dataType:"script",url:a})}var d="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js",e="http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js",f="http://api.map.baidu.com/library/EventWrapper/1.2/src/EventWrapper.min.js",g=jQuery.Deferred();return!!$(".c_040-1").length&&(a("http://api.map.baidu.com/api?v=2.0&ak=3rZ5yNlMbQ3dqdjRNk2bSe38&callback=onBaiduReadyEvent"),b(),g.promise())}),define("c_040_1",["jquery","handlebars","baiduMaps","logger","underscore","disclaimers"],function(a,b,c,d,e,f){"use strict";function g(b){return J=a.extend({},H,b),new h(b)}function h(e){if(i=a(J.selectors.root),!i.length)return!1;w=J.data.nationalLevel,C=J.data.globalZoom,E=i.data(J.data.preferredZoom),A=J.data.maxResults,D=-1,F=[],u=!0,this.$submitButton=i.find(J.selectors.submitButton),this.$resultText=i.find(J.selectors.resultsText),this.$initialSuggestionsTemplate=i.find(J.selectors.suggestionsTemplate),this.$sourceSuggestionsTemplate=this.$initialSuggestionsTemplate.html(),y=i.find(J.selectors.locationInput),z=b.compile(this.$sourceSuggestionsTemplate),B=i.find(J.selectors.autocompleteSuggestionsList),this.$body=a(J.selectors.body),s=i.data(J.selectors.dealerDataUrl),k=new d({level:"warn",prefix:"c_040-1"}),c.done(a.proxy(function(){J.HELIOS.components.C0401?(this.renderBaidu(i),this.addControls(),this.addListener(),this.enableAutocomplete()):a.when(a.get("/common-assets/json/getDealerResultBasicChina.json")).then(a.proxy(function(a,b,c){J.HELIOS.components.C0401=a,this.renderBaidu(i),this.addControls(),this.addListener(),this.enableAutocomplete()},this))},this)),this.bindEvents()}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G="c_040_1",H={properties:{locationInput:"location-input",urls:"urls"},selectors:{root:".c_040-1",singleViewButtons:".c_040-3.c_040-2 a",dealerInformationTemplate:".dealer-information",templateContainer:".map-results",locationInput:".location-input",submitButton:".btn-search",batdCta:".dealer-cta-book",resultsText:".results-text",map:".map",suggestionsTemplate:"#suggestions-template",autocompleteSuggestionsList:".autocomplete-suggestions",autocompleteButton:".autocomplete-suggestions button",body:"body",cluster:".cluster",dealerDataUrl:"dealer-detail-url",dealerId:"dealer-id",dealerAddress:".dealer-address p"},data:{allDealersText:"alldealers-text",zoomLimit:"auto-zoom-limit",preferredZoom:"preferred-zoom",nationalLevel:"全国",globalZoom:15,maxResults:5,dealerId:"dealer-id"},events:{defaultClick:"click",load:"zoomend",overlay:"addoverlay",click:"click."+G,keyDown:"keydown."+G,mouseover:"mouseover."+G}},I=null,J=null;return b.registerHelper("isNotEmptyObject",function(b,c){var d=!0,e=!1;return a.isEmptyObject(b)?d=!1:(a.each(b,function(a,b){if(null!==b&&""!==b)return e=!0,!1}),e||(d=!1)),d?c.fn(this):c.inverse(this)}),h.prototype.bindEvents=function(){var b=this;i.on(J.events.defaultClick,J.selectors.singleViewButtons,function(a){b.trackingEvents(this,r)}),this.$submitButton.on(J.events.click,a.proxy(this.searchSuggestion,this)),this.$body.on(J.events.click,this.clearSuggestionsList),y.on(J.events.keyDown,a.proxy(this.onSuggestionKeyDown,this))},h.prototype.trackingEvents=function(b,c,d){var e,f,g;if("search"!==d){var h=a(b),i=c.tradingName,j=c.id,k=c.dealerType+" ",l=a(J.selectors.dealerAddress,J.selectors.root),m="",n=h.text();g="C40-1_Dealer_China_Single_View",a.each(l,function(b,c){m+=a(c).text()+"|"}),"map"===d&&(g="C40-1_Dealer_China_Map_View",n="map"),h.closest(".dealer-cta-book").length?(e="genericClick",f={componentId:g,destination:h.attr("href"),locationInPage:"action-panel",buttonText:h.text()}):(e="dealerInteraction",f={componentId:g,dealerName:i,dealerId:j,dealerType:k,dealerAddress:m,dealerAction:n})}else e="search",f={componentId:"C152_Search_Form_china",searchType:"dealer",searchTerm:c.keyword.toString()};J.analyticsManager.tag(e,f)},h.prototype.initAjax=function(b){(I=b)&&a.ajax({url:s+"/dealerId/"+I+"/data.json",type:"GET"}).done(a.proxy(function(a,b){this.showDealersInformation(a,b),this.trackingEvents(i,a,"map")},this)).fail(function(a){k.warn("There is an error loading the dealer details")})},h.prototype.showDealersInformation=function(c){a(J.selectors.templateContainer,J.selectors.root).empty();var d=a(J.selectors.dealerInformationTemplate).html(),e=b.compile(d),g=e(c),h=a(J.selectors.templateContainer,J.selectors.root);r=c,h.append(g),f.renderDisclaimers(h)},h.prototype.renderBaidu=function(){l=new BMap.Map("baidu"),v=new BMap.Point(116.404,39.915),J.HELIOS.components.c_040_1&&l.setMapStyle({styleJson:J.HELIOS.components.c_040_1.settings.styleJson}),l.centerAndZoom(v,C),l.enableScrollWheelZoom();var a=J.HELIOS.components.C0401.dealers;this.renderDealers(a,l)},h.prototype.addListener=function(){l.addEventListener(J.events.overlay,a.proxy(function(a){this.clustersClass()},this)),l.addEventListener(J.events.load,a.proxy(function(a){this.clustersClass()},this))},h.prototype.addControls=function(){var a=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE,enableGeolocation:!0});l.addControl(a)},h.prototype.enableAutocomplete=function(){p=new BMap.Autocomplete({location:w,input:J.properties.locationInput,types:["city"],onSearchComplete:a.proxy(this.onSearchComplete,this)})},h.prototype.onSearchComplete=function(b){for(var c,d=b.getNumPois(),f=[],g=0;g<d&&g<A;g++){var h=b.getPoi(g);f.push(h)}p.hide(),e.isEqual(q,f)||(D=-1,q=f,c=z(q),B.html(c),B.show(),u||this.searchSuggestion(D),F=i.find(J.selectors.autocompleteButton),F.on(H.events.click,a.proxy(this.onSuggestionClick,this)),F.on(H.events.mouseover,a.proxy(this.onSuggestionHover,this))),this.trackingEvents(i.find(J.selectors.locationInput),b,"search")},h.prototype.onSuggestionHover=function(b){var c=a(b.currentTarget).index();D=c,this.highlightSuggestionsList()},h.prototype.onSuggestionClick=function(b){var c=a(b.currentTarget).data(J.data.dealerId);this.searchSuggestion(c)},h.prototype.searchSuggestion=function(a){var b=y.val(),c=b.length;if(q){if(isNaN(a)||-1==a)for(var d=0;d<q.length;d++)if(q[d].business==y.val()){a=d;break}u=!0,t=q[a],t&&c&&(p.setInputValue(t.business),this.searchSpecificPoint(),this.clearSuggestionsList())}else u=!1;return c||(this.renderBaidu(i),this.addControls(),this.addListener(),this.clustersClass(),q=[],D=-1),!1},h.prototype.clearSuggestionsList=function(){B.hide()},h.prototype.onSuggestionKeyDown=function(a){var b=F.length;40==a.which&&(D+=1,D>=b&&(D=0),this.highlightSuggestionsList()),38==a.which&&(D-=1,D<0&&(D=b-1),this.highlightSuggestionsList()),13==a.which&&this.searchSuggestion(D)},h.prototype.highlightSuggestionsList=function(b){F.removeClass("top-suggestion"),a(".autocomplete-suggestions button:eq("+D+")").addClass("top-suggestion")},h.prototype.searchSpecificPoint=function(){var a,b,c,d=y.val(),e=(d.length,this);c=new BMap.Geocoder,b=t.province+t.city+t.district+t.street+t.streetNumber+t.business,c.getPoint(b,function(b){b&&(a=new BMap.Point(b.lng,b.lat),e.adjustZoom(a))},w)},h.prototype.adjustZoom=function(a){var b=E,c=0;for(l.centerAndZoom(a,b);!c&&b>=c;)j._clusters.length>=1?c=1:(l.centerAndZoom(a,b),b--)},h.prototype.clustersClass=function(){var b=j._clusters;a.map(b,function(a,b){var c=a._clusterMarker._domElement;c&&a._markers.length>1&&(c.className="cluster")})},h.prototype.renderDealers=function(b,c){var d,e,f=this.convertDealersToLatLngs(b),g=this,h=a.map(f,function(a,b){return new BMap.Point(a.lng,a.lat)});J.HELIOS.components.c_040_1&&(o=[{url:J.HELIOS.components.c_040_1.settings.clusterIcon,size:new BMap.Size(46,50),textColor:J.HELIOS.components.c_040_1.settings.clustersColor,textSize:J.HELIOS.components.c_040_1.settings.clustersTextSize}],m=new BMap.Icon(J.HELIOS.components.c_040_1.settings.dealerIcon,new BMap.Size(46,50)),n=new BMap.Icon(J.HELIOS.components.c_040_1.settings.activeDealerIcon,new BMap.Size(46,50))),d=a.map(f,function(a,b){var d=new BMap.Point(a.lng,a.lat),f=new BMap.Marker(d,{icon:m});return f.addEventListener(J.events.defaultClick,function(){g.initAjax(a.id),e&&e.setIcon(m),this.setIcon(n),c.panTo(d),e=this}),f}),a.each(d,function(a,b){c.addOverlay(b)}),j=new BMapLib.MarkerClusterer(c,{markers:d,styles:o}),c.setViewport(h),x=this.$resultText.data(H.data.allDealersText)||"",this.$resultText.html(x.replace("%number%",h.length)),this.$resultText.css("visibility","visible")},h.prototype.convertDealersToLatLngs=function(b){return a.map(b,function(a,b){return{id:a.id,lat:a.geolocation.latitude,lng:a.geolocation.longitude,name:a.tradingName}})},{init:g}}),define("c_042",["jquery","c_008"],function(a,b){"use strict";function c(c){var d=a(f.selectors.tooltipTriggers);b.createTooltips(d,c)}function d(b){var d=_.extend({},b);if(e=a(f.selectors.root,d.$scope),!e.length)return!1;c(d)}var e,f={selectors:{tooltipTriggers:".has-tooltip",root:".c_042"}};return{init:d}}),define("c_041",["jquery"],function(a){"use strict";function b(b){return h=a.extend({},g,b),c(),a(h.root).each(function(a,b){new e(b,h)})}function c(){a(h.linkButtons,h.root).on("click",function(){a(h.activeButtons,h.root).length&&d(this)})}function d(b){var c=a(b),d=c.text(),e=(b.href,{componentId:h.analytics.componentId,toggleType:h.analytics.toggleType,toggleValue:d});f!==d&&(f=d,h.analyticsManager.tag("toggle",e))}function e(b,c){var d=a(b),e=d.find(".tabs-container"),f=e.find("li"),g=f.find("span");this.settings=c,this.bindEvents(g,f)}var f,g={root:".c_041",linkButtons:".tabs-container-inner li a",activeButtons:".tabs-container.active",analytics:{componentId:"C41_Content_Toggle",toggleType:"content"}},h=null;return e.prototype.bindEvents=function(a,b){a.on("click",this.tabClick),b.on("mouseover mouseenter",this.tabMouseOver),b.on("mouseout mouseleave",this.tabMouseOut)},e.prototype.tabClick=function(b){var c=a(b.currentTarget).parent(),d=c.index(),e=c.parents(".tabs-container"),f=e.find("li"),g=e.siblings(".tabs-content"),h="active",i="active";b.preventDefault(),e.toggleClass("active"),g.removeClass(h),g.eq(d).addClass(h).trigger("active"),f.removeClass(i),f.removeClass("hover"),f.eq(d).addClass(i)},e.prototype.tabMouseOver=function(b){var c=a(b.currentTarget),d=c.closest("ul").find("li"),e=c.index(),f="hover";b.preventDefault(),d.removeClass(f),d.eq(e).addClass(f)},e.prototype.tabMouseOut=function(b){var c=a(b.currentTarget),d=c.closest("ul").find("span");b.preventDefault(),d.removeClass("hover")},{init:b}}),define("c_044C",["jquery","underscore","accordion","accordionItem","c_041"],function(a,b,c,d,e){"use strict";function f(b){n=a.extend(!0,{},o,b),j=a(".c_044C"),0!==j.size()&&(e.init(p),i(".equipment-specifications-content "+n.accordionChildPanel,".equipment-specifications-content "+n.accordionChildHeader,n.multipleOpenItemsAccordionChild,k),i(".technical-specifications-content "+n.accordionChildPanel,".technical-specifications-content "+n.accordionChildHeader,n.multipleOpenItemsAccordionChild,l),a(".options-accesories-content").length>0&&i(".options-accesories-content "+n.accordionChildPanel,".options-accesories-content "+n.accordionChildHeader,n.multipleOpenItemsAccordionChild,m),a(n.accordionUnit,n.el).on(n.events.click,function(){h(this)}),a(n.ctaLinks).on(n.events.click,function(b){var c,d={},e={},f=a(b.currentTarget);c=n.analyticsManager.trackingVars.genericClick,e=n.analyticsManager.getTrackingObjectProperties(c),d[e.componentId]=n.componentId,d[e.destination]=f.attr("href"),d[e.locationInPage]="Specification-table",d[e.buttonText]=a.trim(f.text()),n.analyticsManager.tag("genericClick",d)}),a(n.el).find(n.selectors.tabsContainer).on(n.events.click,function(a){"A"===a.target.nodeName&&g(a.target)}))}function g(b){var c=a(b).closest(n.selectors.specsTableHeader),d=c.hasClass(n.classes.active),e=c.data(n.data.activeToggle),f=a(n.tabs).attr(n.attributes.title),g=(j.attr(n.vehicleId),j.attr(n.vehicleModel),{componentId:n.componentId,toggleType:"specifications",toggleValue:f});d||e===f?c.data(n.data.activeToggle,f):n.analyticsManager.tag("toggle",g)}function h(b){var c=a(b).find(n.accordionChildHeader).attr(n.data.dataState),d=a(b),e=d.find("p span").text(),f=j.attr(n.vehicleId),g=d.closest(n.selectors.spectsTabActive).find(n.selectors.price).data("price"),h=j.attr(n.vehicleModel),i={componentId:n.componentId,vehicleId:f,price:g,accordionText:e,vehicleModel:h,accordionType:a(n.tabs).text()};"open"===c&&n.analyticsManager.tag("accordionExpansion",i)}function i(b,e,f,g){var h,i,k=a(b,j),l=a(e,j),m=[];for(i=0,h=l.length;i<h;i++)m.push(new d({$contentElement:k.eq(i),$headerElement:l.eq(i),isDisabled:!1,isOpen:0===i}));new c({$container:j,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:f,items:m})}var j,k,l,m,n=null,o={el:".c_044C",componentId:"C44-C_Specifications_Table",accordionPanel:".equipment-specifications-content, .technical-specifications-content, .options-accesories-content",accordionChildPanel:".accordion-child-wrapper .accordion-panel",accordionHeader:".accordion-header",accordionChildHeader:".accordion-child-header",accordionUnit:".accordion-group",tabs:".specs-table-header li.active a",multipleOpenItemsAccordion:!1,multipleOpenItemsAccordionChild:!1,vehicleId:"data-vehicle-id",vehicleModel:"data-vehicle-model",ctaLinks:".cta-name",events:{click:"click"},selectors:{spectsTabActive:".specs-table-tabs-content.active",price:".grade-detail-price-value",tabsContainer:".tabs-container",specsTableHeader:".specs-table-header"},classes:{active:"active"},attributes:{title:"title"},data:{dataState:"data-state",activeToggle:"active-toggle"}},p={root:o.el};return{init:f}}),define("c_133",["jquery","modal","storageManager","logger","handlebars","underscore"],function(a,b,c,d,e,f){"use strict";function g(b){k=a.extend({},m,b),k.window.Handlebars||(k.window.Handlebars=e),i=new d({prefix:"C133"}),c.init(),a(document).trigger(k.events.initialised)}function h(b,c){if(!(this instanceof h))return new h(c);b.data("initialised")||(i.info("Constructing new Finance Calculator"),this.defaults={},this.options=c||{},this.settings=f.extend(this.defaults,this.options),this.$element=b,this.instanceId=f.uniqueId("c133-instance-"),this.$defaultOffer=b.parents(k.selectors.defaultOffer),this.$element.data("initialised",!0),this.$element.attr("data-initialised",!0),this.$element.find(k.selectors.calculatorButton).on(k.events.click,f.bind(function(){a(document).trigger(k.events.simulatorClick),this.showCalculator()},this)),this.checkRCIProxy())}var i,j,k=null,l=1,m={componentId:"C133_Finance_It",proxyAvailable:!1,vehicle:"new",selectors:{root:".c_133",defaultOffer:".c_157",calculatorButton:"button",financialSimulator:".financial-simulator",modalContent:".modal-content"},classes:{loading:"loading",financialSimulator:"financial-simulator",scrollLock:"touchmove-enabled"},events:{click:"click",simulatorClick:"simulatorClick",simulatorRenderCompleted:"simulatorRenderCompleted",monthlyPriceUpdated:"prices.finance.updated",initialised:"calculator.initialised"}};return h.prototype.trackCalculatorShown=function(){var a=k.HELIOS.adobe.tagging.vehicleCategory||"not found",b=k.HELIOS.adobe.tagging.vehicleId||"not found",c=k.analyticsManager,d=c.trackingVars.financeCalculator,e=c.getTrackingObjectProperties(d),f={};f[e.componentId]=k.componentId,f[e.vehicleCategory]=a,f[e.vehicleId]=b,f[e.financeCalculatorStep]="start",c.track(d,f)},h.prototype.showCalculator=function(){i.info("showCalculator"),this.trackCalculatorShown(),this.$element.find("button").addClass(k.classes.loading).prop("disabled",!0),this.settings.proxyAvailable?this.createRCIProxyInstance():this.requestRCIProxy()},h.prototype.checkRCIProxy=function(){k.window.RCIProxy?this.settings.proxyAvailable=!0:this.settings.proxyAvailable=!1},h.prototype.requestRCIProxy=function(){var b=this.$element.data("errorTitle"),c=this.$element.data("errorDescription"),d=this.$element.find("button"),e="<h1>"+b+"</h1><h2>"+c+"</h2>";a.ajax({url:this.$element.data("simulatorScriptUrl"),dataType:"script"}).done(f.bind(function(){this.settings.proxyAvailable=!0,this.createRCIProxyInstance()},this)).fail(f.bind(function(){this.modal.setContent(e).then(function(){return this.modal.open()}).then(function(){d.removeClass(k.classes.loading).prop("disabled",!1)})},this))},h.prototype.getCityStateParams=function(){var a,b,d={City:null,State:null};return c&&(c.init(),a=c.loadItem("PreferredDealerCity"),a&&(d.city=a),(b=c.loadItem("PreferredDealerState"))&&(d.state=b)),f.isString(d.city)||f.isString(d.state)||(d=null),d},h.prototype.getCalculatedMonths=function(a){var b=12,c=new Date,d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate(),g=new Date(a),h=g.getFullYear(),i=g.getMonth()+1,j=g.getDate(),k=d-h,l=e-i,m=f-j,n=k*b+l;return m||(n-=1),n},h.prototype.cleanEmpyConf=function(a){return f.pick(a,function(a){return""!==a&&null!==a&&!f.isUndefined(a)})},h.prototype.createRCIProxyInstance=function(){var a,b;switch(j={age:this.$element.data("simulatorAge")?this.getCalculatedMonths(this.$element.data("simulatorAge")):0,brand:this.$element.data("simulatorBrand"),country:this.$element.data("simulatorCountry"),lang:this.$element.data("simulatorLang"),dealer:this.$element.data("simulatorDealer"),vehicleBrand:this.$element.data("simulatorVehicleBrand"),type:this.$element.data("simulatorType"),seg:this.$element.data("simulatorSeg"),price:this.settings.price,currency:this.settings.currency,calcCurrency:this.settings.currencyCalc,version:this.$element.data("simulatorVersion"),priceType:this.$element.data("simulatorPriceType"),idVehicle:this.$element.data("simulatorIdVehicle"),modelSpecCode:this.$element.data("simulatorModelSpecCode"),model:this.$element.data("simulatorModel"),power:this.$element.data("simulatorFiscalTax"),engine:this.$element.data("simulatorFuelType"),modelC:this.$element.data("simulatorModelName"),versionC:this.$element.data("simulatorVersionName"),pricewooptions:this.$element.data("simulatorPriceWoOptions"),km:this.$element.data("simulatorKm"),vhid:this.$element.data("simulatorVhid"),webformDealerId:this.$element.data("simulatorWebformdealerid"),style:"helios"},j=this.cleanEmpyConf(j),j.country){case"in":b=this.getCityStateParams(),f.isObject(b)&&(j=f.extend({},j,b))}switch(a=this.$element.data(),this.rciProxy?f.isEqual(a,this.lastVehicleData)?this.settings.vehicle="same":this.settings.vehicle="change":this.settings.vehicle="new",this.settings.vehicle){case"new":this.createSimulator(j,k.selectors.financialSimulator+"-"+l+" "+k.selectors.modalContent),this.openModal(!0),l+=1;break;case"change":this.updateSimulator(j,k.selectors.financialSimulator+"-"+l+" "+k.selectors.modalContent),this.openModal(!0),l+=1;break;case"same":this.openModal(!1);break;default:return null}this.lastVehicleData=f.clone(a)},h.prototype.openModal=function(b){var c=this.$element.find(k.selectors.calculatorButton);f.isUndefined(this.modal)&&this.createModal(),b?this.rciProxy.addListener(k.events.simulatorRenderCompleted,f.bind(function(){f.delay(f.bind(function(){this.modal.open().then(function(){c.removeClass(k.classes.loading).prop("disabled",!1)}),a.event.trigger({type:k.events.simulatorRenderCompleted})},this),200)},this)):this.modal.open().then(function(){c.removeClass(k.classes.loading).prop("disabled",!1)})},h.prototype.createModal=function(){i.info("createModal"),this.modal=new b({clearOnClose:!1,customClass:k.classes.financialSimulator+"-"+l+" "+k.classes.scrollLock}),this.modal.$root.on("modal.close",f.bind(function(){this.updateMonthlyPrice(),this.saveFinancialOffer()},this))},h.prototype.saveFinancialOffer=function(a){var b=this.rciProxy.getFinancialOffer("custom").getParams(),d=!1;i.info("saveFinancialOffer"),b=f.extend(b,{modelSpecCode:this.$element.data("simulatorModelSpecCode")}),a?d||(c.saveItem("lastVisitedVehicle",b),d=!0,k.window.location.href=this.$element.data("simulatorRedirect")):c.saveItem("lastVisitedVehicle",b)},h.prototype.createSimulator=function(a,b){i.info("createSimulator"),f.isUndefined(this.rciProxy)?(this.rciProxy=new RCIProxy(a),this.rciProxy.addListener("proxyReady",f.bind(function(){this.rciProxy.createSimulator(b)},this)),this.rciProxy.addListener("bookTestDriveButtonClick",f.bind(function(){this.saveFinancialOffer(!0)},this))):this.rciProxy.setProxyParams(a)},h.prototype.updateSimulator=function(b,c){i.info("updateSimulator"),this.rciProxy.setProxyParams(b),this.rciProxy.isSimulatorExist()?this.rciProxy.refreshSimulator(!0):(a(c).empty(),this.rciProxy.createSimulator(c))},h.prototype.destroySimulator=function(){this.rciProxy.destroySimulator()},h.prototype.updateMonthlyPrice=function(){var a=this.rciProxy.getFinancialOffer("custom");i.info("updateMonthlyPrice"),a&&this.$defaultOffer.length&&this.$defaultOffer.trigger(k.events.monthlyPriceUpdated,a)},h.prototype.updateSimulatorLinkData=function(a){var b={price:"simulatorPrice",currency:"simulatorCurrency",currencyCalc:"simulatorCurrencyCalc",priceTax:"simulatorPriceType"};this.$element.data();i.info("updateSimulatorLinkData"),f.each(a,f.bind(function(a,c){b.hasOwnProperty(c)&&this.$element.data(b[c],a)},this))},{init:g,FinanceCalculator:h}}),define("c_044A",["underscore","jquery","slick","disclaimers","pictureFill","c_044C","c_042","c_133"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){if(s=b.extend({},A,a),u=b(s.root),v=b(s.html),!u.length)return!1;b(s.containerSelector).each(function(){new t(b.extend({$container:b(this)},s))}),w=b(s.selectors.compareLink),w.length&&(B=w.attr("href"),m()),x=b(s.selectors.pricingCaption),y=b(s.selectors.btnAllModels),x.click(k),y.click(k),j()}function j(){var a=function(){var a,c;c=b(s.selectors.financeCalculator),a={currencyCalc:c.data(s.data.simulatorCurrency),price:c.data(s.data.simulatorPrice),priceType:c.data(s.data.simulatorPriceType)},new h.FinanceCalculator(c,a)};b(document).on("calculator.initialised",a)}function k(a){var c=b(a.currentTarget).closest(".vehicle-specs-grade-header"),d=b.trim(b(".vehicle-specs-grade-name-inner",c).text());d=d+" "+b.trim(b(".grade-detailed-name",c).text()),d=b.trim(d),d=d+"-"+b.trim(b(".vehicle-specs-price-value:eq(0)",c).text()),d+="-specifications";var e,f={},g={};e=s.analyticsManager.trackingVars.genericClick,g=s.analyticsManager.getTrackingObjectProperties(e),f[g.componentId]=C,f[g.destination]=b(a.currentTarget).attr("href"),f[g.locationInPage]=d,f[g.buttonText]=b(a.currentTarget).text(),s.analyticsManager.tag(e,f)}function l(a){if(0===a.currentSlide)if(a.$prevArrow){if(a.$prevArrow.hasClass(s.classes.noClick))return!1;a.$prevArrow.addClass(s.classes.noClick),a.$nextArrow.removeClass(s.classes.noClick)}else a.$slideTrack.parent().parent().addClass("no-previous-arrow");else if(a.currentSlide==a.$slides.length-1){if(a.$nextArrow.hasClass(s.classes.noClick))return!1;a.$nextArrow.addClass(s.classes.noClick),a.$prevArrow.removeClass(s.classes.noClick)}else a.$prevArrow.removeClass(s.classes.noClick),a.$nextArrow.removeClass(s.classes.noClick);return!0}function m(){if(B.length>0){var a=b(s.root+" "+s.classes.slickActive+" select.available-engine-options option:selected"),c=B+"/"+a.attr("data-compare-url");w=b(s.selectors.compareLink),w.attr("href",c)}}function n(a){var c=a.$slides[a.getCurrent()],d=b.trim(b(".vehicle-specs-grade-name-inner",c).text());d=d+" "+b.trim(b(".grade-detailed-name",c).text()),d=b.trim(d);var e=a.getCurrent()+1;e=e+"/"+a.slideCount;var f,g="Specifications slider",h={},i={};f=s.analyticsManager.trackingVars.carouselInteraction,i=s.analyticsManager.getTrackingObjectProperties(f),h[i.componentId]=C,h[i.promoText]=d,h[i.interactionType]=g,h[i.itemNumber]=e,s.analyticsManager.tag(f,h)}function o(a){var b,c;l(a)&&(b=a.$slides[a.currentSlide],(c=b?b.getAttribute("data-grade-url"):null)&&p(c)),m()}function p(a){b(".specs-loader").show(),b.ajax({url:a,type:"GET",dataType:"html"}).done(function(a){b(".c_044C").replaceWith(a),f.init({analyticsManager:s.analyticsManager}),d.renderDisclaimers(),e(),b(".specs-loader").hide()})}var q,r,s,t,u,v,w,x,y,z="available-engine-options",A={html:"html",containerSelector:".vehicle-specs",gradeContainerSelector:".vehicle-specs-grade",root:".c_044A",classes:{noClick:"no-click",slickActive:".slick-active",onlyOneEngine:"only-one-engine",financeCalculator:"c_133"},selectors:{compareLink:".c_046 ul.nav-primary li a.compare",pricingCaption:".pricing-caption a",btnAllModels:".btn-all-models",engineActive:".vehicle-specs-engine-name-inner",engineText:".vehicle-specs-engine-name",financeCalculator:".c_133"},slick:{rtl:!1},attributes:{disabled:"disabled"},data:{calcInstance:"calcInstance",simulatorCurrency:"simulatorCurrency",simulatorPrice:"simulatorPrice",simulatorPriceType:"simulatorPriceType"}},B="",C="C44_Specifications_Carousel";return t=function(b){if(!(this instanceof t))return new t(b);this.options=b,"rtl"===v.attr("dir")&&(s.slick.rtl=!0),this.options.$container.slick({onInit:o,onBeforeChange:n,onAfterChange:o,infinite:!1,rtl:s.slick.rtl}),this.options.$container.attr("data-state","initialised"),this.grades=[],this.options.$container.find(this.options.gradeContainerSelector).each(a.bind(function(a,b){this.grades.push(new r(a,b))},this)),a.each(this.grades,function(a){a.setSelectedEngineIndex(0)},this),this.options.$container.on("change","."+z,a.bind(this.onAvailableEngineOptionsChange,this))},t.prototype.onAvailableEngineOptionsChange=function(a){var c,d=b(a.currentTarget),e=d.data("dataModel"),f=b(".c_044A .slick-active");c=f.data("grade-url"),c=c.split("engine")[0],c=c+"engine/"+d.prop("selectedIndex"),f.data("grade-url",c),f.attr("data-grade-url",c),p(c),e.setSelectedEngineIndex(d.prop("selectedIndex")),m();var g,h=d.closest(".vehicle-specs-engine-detail"),i="Specifications-"+b(".for-interactive",h).text(),j={},k={};g=s.analyticsManager.trackingVars.search,k=s.analyticsManager.getTrackingObjectProperties(g),j[k.componentId]=C,j[k.searchType]=i,j[k.searchFilter]=d.context.value,s.analyticsManager.tag(g,j)},r=function(a,c){this.$element=b(c),this.index=a,this.engines=[],this.$element.find(".vehicle-specs-engine").each(b.proxy(function(a,b){this.engines.push(new q(this,a,b))},this)),this.engines.length&&(1===this.engines.length?this.$element.find(s.selectors.engineActive).prop(s.attributes.disabled,s.attributes.disabled):this.engines[0].addEngineOptionsDropDownList(this.getEngineOptionsDropDownList())),this.$element.data("dataModel",this)},r.prototype.getEngineOptionsDropDownList=function(){return void 0===this.$engineOptions&&(this.$engineOptions=b("<select>").addClass(z).addClass("js-no-swipe-slick").data("dataModel",this),a.each(this.engines,a.bind(function(a){this.$engineOptions.append(b('<option data-compare-url="'+a.compareUrlLinkValue+'">').text(a.name))},this))),this.$engineOptions},r.prototype.setSelectedEngineIndex=function(b){var c;a.each(a.filter(this.engines,function(a){return a.index!==b&&!0===a.isSelected}),function(a){a.deselect(),a.removeEngineOptionsDropDownList()}),void 0!==(c=a.findWhere(this.engines,{index:b,isSelected:!1}))&&(c.select(),1===this.engines.length?this.$element.find(s.selectors.engineText).addClass(s.classes.onlyOneEngine):c.addEngineOptionsDropDownList(this.getEngineOptionsDropDownList()))},q=function(a,c,d){
this.$element=b(d),this.compareUrlLinkValue=b(this.$element[0]).attr("data-version-key"),this.grade=a,this.index=c,this.isSelected=!1,this.name=this.$element.find(".vehicle-specs-engine-name-inner").text(),this.$element.data("dataModel",this)},q.prototype.addEngineOptionsDropDownList=function(a){this.$element.find(".vehicle-specs-engine-name-inner").append(a)},q.prototype.deselect=function(){this.isSelected=!1,this.$element.removeAttr("data-state")},q.prototype.removeEngineOptionsDropDownList=function(){this.$element.find("."+z).detach()},q.prototype.select=function(){this.isSelected=!0,this.$element.attr("data-state","selected")},{init:i}}),define("c_046",["jquery","underscore","waypoints"],function(a,b){"use strict";function c(b){b.preventDefault(),a("html, body").animate({scrollTop:0},500)}function d(){clearTimeout(K),K=setTimeout(e,150),l()&&m(N)}function e(){f()}function f(){var a=G.width();return I!==a&&(I=a,k()),!1}function g(a){a.preventDefault(),A.toggleClass(J.classes.isOpenClass),z.toggleClass(J.classes.isExpanded)}function h(){y.length&&w.off(J.events.clickIconNav).on(J.events.clickIconNav,g)}function i(){if(!x.length)return!1;new Waypoint({element:x,handler:j}),E.off(J.events.clickNav).on(J.events.clickNav,c)}function j(){x.toggleClass(J.classes.navStaticClass),B.toggleClass(J.classes.navFixedClass)}function k(){!L&&l()&&m(N),(!window.matchMedia||window.matchMedia&&window.matchMedia(M.is.large).matches)&&(A.removeClass(J.isOpenClass),s(),setTimeout(function(){y.css("height","")},J.timeAnimateHeightNavContainer))}function l(){return(arguments.length<=0||void 0===arguments[0]?A:arguments[0]).is(":visible")}function m(b){var c,d,e,f,g,h,i=0,j=x.find(".docked-nav-container").width(),k=D.find(J.selectors.navPrimary),l=x.find(".btn-more"),m=l.outerWidth(),n=E.outerWidth(),o=15;z.addClass(J.classes.isShowClass),f=y.find(J.selectors.configuratorCta),y.toggleClass(J.classes.configuratorParent,f.length>0),b?(d=parseInt(A.css("padding-left"),10),c=parseInt(y.find(".nav-primary").css("padding-right"),10)):(d=parseInt(A.css("padding-right"),10),c=parseInt(y.find(".nav-primary").css("padding-left"),10),f.css("right","")),(!window.matchMedia||window.matchMedia&&window.matchMedia(M.is.large).matches)&&(k.html(""),g=(l.outerWidth()-l.width())/2,j=j-c-d-m-n-g,C.each(function(b,c){h=a(c),i+=h.outerWidth(),i+o>j?h.hide().clone().appendTo(k).show():h.show()}),D.toggleClass(J.classes.visible,i+o>j),e=k.find("li"),f[0]&&(1===e.length&&e.eq(0).hasClass(J.classes.isConfiguratorClass)&&D.removeClass(J.classes.visible),D.hasClass(J.classes.visible)&&f.css("right",-(m+20))),L=!0)}function n(b){var c=a(b.target).parent();c.hasClass("btn-more")&&(c=c.parent()),!c.hasClass(J.classes.isSubNavClass)&&D.hasClass(J.classes.isActiveClass)&&(b.preventDefault(),D.removeClass(J.classes.isActiveClass))}function o(a){a.preventDefault(),D.toggleClass(J.classes.isActiveClass)}function p(){D.toggleClass(J.classes.isActiveClass)}function q(){D.find("button").off(J.events.clickMoreDetail).on(J.events.clickMoreDetail,o),D.find("a").off(J.events.clickMoreDetail).on(J.events.clickMoreDetail,p)}function r(){H.addClass(F.classes.domFixedClass)}function s(){H.removeClass(F.classes.domFixedClass)}function t(){w=v.find(J.selectors.iconShowMenu),x=v.find(J.selectors.dockedNav),y=v.find(J.selectors.navContainer),z=y.find(J.selectors.innerNavContainer),A=v.find(J.selectors.navRoot),B=x.find(J.selectors.dockedNavOuter),E=x.find(J.selectors.btnTop),C=y.find(J.selectors.elementsNavContainer),D=v.find(J.selectors.moreContainer),M=J.HELIOS.config.common.mediaQuery}function u(c){if(J=a.extend({},F,c),v=a(J.root),!v.length)return!1;t(),N="rtl"===a("html").attr("dir"),m(N),G.resize(b.throttle(d,150)),i(),a(".show-menu").on("click",r),a(".close-menu").on("click",s),v.on("click",J.selectors.navLinks,function(b){var c=a(b.currentTarget),d={componentId:O,destination:c.attr("href"),locationInPage:"nav docked",buttonText:c.find("span").text()};J.analyticsManager.tag("navigationClick",d)}),a(document).on("click",n),h(),q()}var v,w,x,y,z,A,B,C,D,E,F={root:".c_046",events:{clickIconNav:"click.iconNav",scrollNav:"scroll.nav",clickNav:"click.nav",clickMoreDetail:"click.moreDetail"},classes:{isOpenClass:"nav-is-open",isActiveClass:"active",navStaticClass:"nav-static",navFixedClass:"nav-fixed",isShowClass:"show",isExpanded:"is-expanded",domEls:"body, html",domFixedClass:"dom-fixed",visible:"visible",isConfiguratorClass:"configurator",configuratorParent:"configurator-wrapper",isSubNavClass:"sub-nav"},selectors:{iconShowMenu:".icon-show-menu",dockedNav:".docked-nav-wrapper",navContainer:".docked-nav-cont",navPrimary:".nav-primary",innerNavContainer:".inner",navRoot:".docked-nav-root",dockedNavOuter:".docked-nav-outer",btnTop:".btn-top",elementsNavContainer:".nav-primary li",moreContainer:".sub-nav",navLinks:"nav a",configuratorCta:".configurator"},timeAnimateHeightNavContainer:300},G=(a("html, body"),a(window)),H=a(F.classes.domEls),I=G.width(),J=null,K=-1,L=!1,M=null,N=null,O="C46_Docked_Nav";return{init:u,fixDomHeightClass:r,removefixDomHeightClass:s,initStickyNav:j}}),define("c_046_2",["jquery","underscore","disclaimers","logger","storageManager","storageManagerKeys"],function(a,b,c,d,e,f){"use strict";function g(b){if(U=a.extend({},T,b),C=a(".c_046-2"),S=new d({prefix:"C46-2"}),!C.length)return!1;P=U.$window,D=C.find(".icon-show-menu"),E=C.find(".docked-nav-wrapper"),F=C.find(".docked-nav-cont"),G=F.find(".inner"),H=C.find(".docked-nav-root"),I=E.find(".docked-nav-outer"),M=E.find(".btn-top"),J=F.find(".nav-primary li"),L=J.find("a"),K=C.find(".sub-nav"),N=C.find("script[data-nav-vehicle-partial]"),O=C.find("nav > .nav-primary"),R=P.width(),X=U.HELIOS.config.common.mediaQuery,h()}function h(){var b;b=a.ajax({url:C.data("url"),dataType:"json"}),b.done(i),b.fail(j)}function i(a){k(a.owned),x(),P.resize(b.throttle(x,150)),u(),t(),y(),m(),l(),e.init(),c.renderDisclaimers(C)}function j(){}function k(b){var c,d=a("li[data-nav-vehicle-partial]"),e=d.first(),f=e.find("a").attr("href");e.removeAttr("data-nav-vehicle-partial"),b.reverse(),a.each(b,function(a,b){c=e.clone(),c.find("a").text(b.vehicleName).attr({href:f,"data-adobe-tagging":"F.navigation","data-vin":b.vin}),e.after(c)}),d.remove()}function l(){a(document).on("click mousedown",".nav-primary li a",function(b){(Q=a(this).data("vin")||U.vin)&&e.saveItem(f.vehicleDetailInformation.itemKey,{vin:Q},{mode:"localStorage"})}),C.on("click","a, button",function(){B(this)})}function m(){var b=U.window.location.pathname+U.window.location.hash,c=e.loadItem(f.vehicleDetailInformation.itemKey);O.find("li").each(function(d,e){var f=a(e).find("a"),g=f.data(U.data.vin);f.attr("href")!==b||g&&c.vin!==g||f.parent().addClass(U.classes.isActiveClass)})}function n(b){b.preventDefault(),a("html, body").animate({scrollTop:0},500)}function o(a){clearTimeout(V),V=setTimeout(p,150)}function p(){q()}function q(){var a=P.width();return R!==a&&(r(),R=a,w()),!1}function r(){H.hasClass(U.classes.isOpenClass)?(F.height(P.height()+60),G.height(G.outerHeight()+50)):F.css({height:""})}function s(a){a.preventDefault(),H.toggleClass(U.classes.isOpenClass),r()}function t(){F.length&&D.off(U.events.clickIconNav).on(U.events.clickIconNav,s)}function u(){if(!E.length)return!1;new Waypoint({element:E,handler:v}),M.off(U.events.clickNav).on(U.events.clickNav,n),P.resize(o)}function v(a){E.toggleClass(U.classes.navStaticClass),I.toggleClass(U.classes.navFixedClass),H.toggleClass(U.classes.navFixedClass)}function w(){W||x(),(!U.window.matchMedia||U.window.matchMedia&&U.window.matchMedia(X.is.large).matches)&&(H.removeClass(U.isOpenClass),setTimeout(function(){F.css("height","")},U.timeAnimateHeightNavContainer))}function x(){var b,c,d,e=0,f=E.find(U.selectors.dockedNav).width(),g=parseInt(F.find(U.selectors.navPrimary).css("padding-left"),10),h=parseInt(H.css("padding-left"),10),i=K.find(U.selectors.navPrimary),j=M.outerWidth();S.info("calculateMoreButton"),(!U.window.matchMedia||U.window.matchMedia&&U.window.matchMedia(X.is.large).matches)&&(i.empty(),J=F.find(".nav-primary li"),G.addClass(U.classes.isShowClass),b=E.find(".btn-more").outerWidth(),f=f-g-h-b-j,J.each(function(b,d){c=a(d),e+=c.outerWidth(),e>f?(c.hide(),c.clone().appendTo(i).show()):c.show()}),d=e>f,K.toggleClass(U.classes.visible,d),W=!0)}function y(){K.find("button").off(U.events.clickMoreDetail).on(U.events.clickMoreDetail,z),K.find("a").off(U.events.clickMoreDetail).on(U.events.clickMoreDetail,A)}function z(a){a.preventDefault(),K.toggleClass(U.classes.isActiveClass)}function A(a){K.toggleClass(U.classes.isActiveClass)}function B(b){var c=a(b),d=c.text(),e=c.attr("href")||"",f={componentId:U.analytics.componentId,locationInPage:U.analytics.locationInPage,destination:e,buttonText:d};U.analyticsManager.tag(U.analytics.trackingVar,f)}var C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T={analytics:{componentId:"C46.2_Docked_Navigation",locationInPage:"OS-Nav docked",trackingVar:"navigationClick"},events:{clickIconNav:"click.iconNav",scrollNav:"scroll.nav",clickNav:"click.nav",clickMoreDetail:"click.moreDetail"},selectors:{navPrimary:".nav-primary",dockedNav:".docked-nav-container"},data:{vin:"vin"},classes:{isOpenClass:"nav-is-open",isActiveClass:"active",navStaticClass:"nav-static",navFixedClass:"nav-fixed",isShowClass:"show",visible:"visible"},timeAnimateHeightNavContainer:300,vin:""},U=null,V=-1,W=!1,X=null;return{init:g,onDataRequestDone:i,initStickyNav:v}}),define("c_046A",["jquery","cookiesManager"],function(a,b){"use strict";function c(c){if(G=a.extend({},D,c),r=a(".c_046A"),0===r.length)return!1;s=r.find(".icon-show-menu"),t=r.find(".docked-nav-wrapper"),u=r.find(".docked-nav-cont"),v=r.find(".docked-nav-root"),w=t.find(".docked-nav-outer"),x=a(".btn-set-preferred"),y=a(G.selectors.navButton),z=x.data("id-dealer"),A=x.data("set-preferred"),B=x.data("un-set-preferred"),C=new b("preferDealer"),k(),j(),m(),o(),p()}function d(b){b.preventDefault(),a("html, body").animate({scrollTop:0},500)}function e(a){clearTimeout(H),H=setTimeout(f,150)}function f(){g()}function g(){var a=E.width();return F!==a&&(h(),F=a),!1}function h(){v.hasClass(G.classes.isOpenClass)?u.css({height:u.find(".inner").outerHeight(!0)}):u.css({height:""})}function i(a){a.preventDefault(),v.toggleClass(G.classes.isOpenClass),h()}function j(){u.length&&s.off(G.events.clickIconNav).on(G.events.clickIconNav,i)}function k(){if(!t.length)return!1;new Waypoint({element:t,handler:l}),t.find(".btn-top").off(G.events.clickNav).on(G.events.clickNav,d),E.resize(e)}function l(a){t.toggleClass(G.classes.navStaticClass),w.toggleClass(G.classes.navFixedClass)}function m(){void 0===C.get()||"null"===C.get()?(x.removeClass(G.classes.isPrefered),x.text(A)):parseInt(C.get(),10)===z?(x.addClass(G.classes.isPrefered),x.text(B)):(x.removeClass(G.classes.isPrefered),x.text(A))}function n(b){var c=a(b.currentTarget),d={componentId:G.analytics.componentId,dealerAction:c.text(),dealerId:c.data(G.data.dealerId)};b.preventDefault(),c.toggleClass(G.classes.isPrefered),c.hasClass(G.classes.isPrefered)?(c.text(B),C.setItem(z)):(c.text(A),C.deleteCookie()),G.analyticsManager.tag(G.analyticsManager.trackingVars.dealerInteraction,d)}function o(){x.off("click.preferDealer").on("click.preferDealer",n)}function p(){y.on(G.events.click,function(){q(this)})}function q(b){var c=a(b),d=b.href,e=c.text(),f={componentId:G.analytics.componentId,destination:d,locationInPage:G.analytics.locationInPageTrack,buttonText:e};G.analyticsManager.tag(G.analyticsManager.trackingVars.navigationClick,f)}var r,s,t,u,v,w,x,y,z,A,B,C,D={events:{click:"click",clickIconNav:"click.iconNav",scrollNav:"scroll.nav",clickNav:"click.nav"},selectors:{navButton:".nav-primary li a"},data:{dealerId:"id-dealer"},classes:{isOpenClass:"nav-is-open",navStaticClass:"nav-static",navFixedClass:"nav-fixed",visuallyHidden:"is-visually-hidden",isPrefered:"preferred"},analytics:{componentId:"C46-A_DWZ_Docked_Nav",locationInPageTrack:"DWZ-nav docked"},timeAnimateHeightNavContainer:300},E=a(window),F=E.width(),G=null,H=-1;return{init:c,initStickyNav:l}}),define("c_046B",["jquery","c_046","heliosObject"],function(a,b,c){"use strict";function d(d){f=a.extend({HELIOS:c},e,d),b.init(f)}var e={root:".c_046B"},f=null;return{init:d}}),define("c_049",["jquery","scrollLock"],function(a,b){"use strict";function c(b){var c=a(document.body),d=c.find(k.selectors.lightbox);0!==d.length&&(i=void 0===i?d:i.add(d),d.find(k.selectors.backLink+","+k.selectors.lightboxOverlay).off(k.events.click).on(k.events.click,h),d.find(k.selectors.focusable).off(k.events.blur).on(k.events.blur,e),d.addClass(k.classes.initialized),c.find(k.selectors.lightboxTrigger).off(k.events.click).on(k.events.click,f),l||(a(document).on(k.events.keyup,function(a){27===a.which&&h()}),l=!0))}function d(a){return i.filter("["+k.dataSelectors.dataName+'="'+a+'"]')}function e(b){setTimeout(function(){"BODY"!==document.activeElement.tagName&&0===a(document.activeElement).closest(k.selectors.lightbox).length&&h()},30)}function f(b){var c=a(b.target),e=c.attr(k.dataSelectors.dataName),f=d(e);setTimeout(function(){f.find(k.selectors.focusable).eq(0).focus()},500),b.preventDefault(),g(f)}function g(a){a.addClass(k.classes.show),b.disableGlobalScrolling(),setTimeout(function(){a.addClass(k.classes.ready)},k.readyTimeout)}function h(c){var d;void 0===c?d=i:(d=a(c.target).closest(k.selectors.lightbox),c.preventDefault()),d.removeClass(k.classes.show+" "+k.classes.ready),b.enableGlobalScrolling()}var i,j=".c_049",k={readyTimeout:10,selectors:{lightbox:".c_049",lightboxOverlay:".lightbox-overlay",lightboxTrigger:".lightbox-trigger",backLink:".back-link",focusable:":focusable"},dataSelectors:{dataName:"data-lightbox-name"},events:{click:"click"+j,keyup:"keyup"+j,blur:"blur"+j,focus:"focus"+j},classes:{show:"show",ready:"ready",initialized:"initialized"}},l=!1;return{init:c}}),define("c_053",["jquery","accordion","accordionItem"],function(a,b,c){"use strict";function d(b){j=a.extend(!0,{},k,b),h=a(j.root),0!==h.size()&&(h.each(function(){e(j.accordionPanel,j.accordionHeader,j.multipleOpenItemsAccordion)}),a(j.accordionHeader,j.linksContainer).on("click",function(){"open"===a(this).attr("data-state")&&g(this)}),a(j.linkItem,j.linksContainer).on("click",f))}function e(d,e,f){var g,j=a(d,h),k=a(e,h),l=k.length,m=[];for(g=0;g<l;g++)m.push(new c({$contentElement:j.eq(g),$headerElement:k.eq(g),isDisabled:!1,isOpen:!1}));i=new b({$container:h,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:f,items:m})}function f(b){var c=a(b.currentTarget),d=c.parents(j.root),e=c.text(),f=c.attr("href"),g=d.find(j.vehicleEngine).text().replace(/\s+/g,""),h=d.find(j.vehicleEngineId).data("engine-id"),i=j.analyticsManager.trackingVars.genericClick,k=j.analyticsManager.getTrackingObjectProperties(i),l={};l[k.componentId]=j.analytics.componentId,l[k.destination]=f,l[k.locationInPage]=j.analytics.locationPage,l[k.buttonText]=e,l[k.vehicleEngine]=g,l[k.vehicleEngineId]=h,j.analyticsManager.tag(i,l)}function g(b){var c=a(b),d=c.parents(j.root),e=c.text(),f=d.data("vehicle-category"),g=d.data("vehicle-id"),h=d.data("vehicle-model"),i=d.find(j.vehicleEngine).text().replace(/\s+/g,""),k=d.find(j.vehicleEngineId).data("engine-id"),l=j.analyticsManager.trackingVars.accordionExpansion,m=j.analyticsManager.getTrackingObjectProperties(l),n={};n[m.componentId]=j.analytics.componentId,n[m.accordionText]=e,n[m.vehicleCategory]=f,n[m.vehicleId]=g,n[m.vehicleModel]=h,n[m.vehicleEngine]=i,n[m.vehicleEngineId]=k,n[m.accordionType]=j.analytics.accordionType,j.analyticsManager.tag(l,n)}var h,i,j=null,k={root:".c_053",linksContainer:".engine-list-links",vehicleEngine:".engine-list-title",vehicleEngineId:".engine-list-header",accordionPanel:".tabs-content",accordionHeader:".accordion-header",multipleOpenItemsAccordion:!1,linkItem:".content",analytics:{componentId:"C53_Engine_Details",locationPage:"engines",accordionType:"engine"}};return{init:d}}),define("c_054_2",["jquery"],function(a){"use strict";function b(b){if(o=a.extend({},n,b),i=a(o.selectors.root),!i.length)return!1;j=a(o.classes.languageSelector),k=a(o.classes.linksSelector),l=a(o.classes.gridSelector),c(),j.trigger(o.events.toggleClickLanguage)}function c(){j.on(o.events.toggleClickLanguage,d).next("ul").on(o.events.toggleSelectLanguage,"li a",e),l.on(o.events.toggleClickGridSelector,f),k.on(o.events.click,"a",h)}function d(){k.toggleClass(o.classes.expanded+" "+o.classes.closed)}function e(b){var c=a(b.currentTarget),d=a.trim(c.text());j.find("span").html(d),g(c)}function f(b){g(a(b.currentTarget).find("a"))}function g(b){var c=b.attr("href"),d=a.trim(b.text()),e={componentId:m,destination:c||"",locationInPage:"footer",buttonText:d||""};o.analyticsManager.tag("navigationClick",e)}function h(b){var c,d,e=a(b.currentTarget),f=e.attr("href");b.preventDefault(),d=f.replace(/.*?:\/\//g,"").split("/")[0],c="//"+d+o.window.location.pathname,a.ajax({url:c,success:function(){o.window.location.assign(c)},error:function(){o.window.location.assign(f)},timeout:3e3})}var i,j,k,l,m="C54-2_Footer",n={events:{toggleClickLanguage:"click.toggleClickLanguage",toggleSelectLanguage:"click.toggleSelectLanguage",toggleClickGridSelector:"click.toggleSelectLanguage",click:"click"},classes:{linksSelector:".links-selector",languageSelector:".language-selector",gridSelector:".grid-row ol li",expanded:"expanded",closed:"closed"},selectors:{root:".c_054-2"}},o=null;return{init:b}}),define("c_054_3",["jquery"],function(a){"use strict";function b(b){g=a.extend({},h,b),f=a(g.selectors.root),c()}function c(){f.on("click",g.selectors.targetSelect,e),f.on("click",g.selectors.sitemapLinks,d)}function d(b){var c=a(b.target),d={componentId:g.componentId,destination:c.attr("href"),locationInPage:"footer",buttonText:c.text()};g.analyticsManager.tag("navigationClick",d)}function e(b){var c=a(b.target).parent(),d=(c.closest(g.selectors.listSelect).parent(),f.find("."+g.classes.openClass));b.preventDefault(),c.hasClass(g.classes.openClass)?c.removeClass(g.classes.openClass).siblings("dd").removeClass(g.classes.visibleClass):(d.length&&d.removeClass(g.classes.openClass).siblings("dd").removeClass(g.classes.visibleClass),c.addClass(g.classes.openClass).siblings("dd").addClass(g.classes.visibleClass))}var f,g,h={componentId:"C54_Footer",classes:{openClass:"is-open",visibleClass:"is-visible"},selectors:{root:".c_054-3",listSelect:"dl",targetSelect:".accordionToggle",sitemapLinks:"dl dd a"}};return{init:b}}),define("appointmentDate",["underscore","jquery","appointment","jqueryui","datepickerLanguages"],function(a,b,c){"use strict";function d(c,e){if("object"==typeof e){if(void 0===c&&(c={}),!(this instanceof d))return new d(c,e);this.appointment=e,this.uiConstants={classUnavailable:"unavailable",classAvailable:"available",classSelected:"selected",classBookable:"bookable",classRendered:"render",shortTimeSlots:".slots.minutes",classOpen:"open",classDeployed:"deployed",attrDateFormat:"date-format",attrClosedOn:"data-closed-on"},this.state={usingKeyboard:!1,$elFocused:null,dateJustSelected:!1,monthChange:"prev"},this.defaults={el:".date",elCalendar:".calendar",refocusSpeed:200,focusTimeOnSelect:!0,timeslotIncrements:1,datepicker:{dateFormat:"yy-mm-dd",minDate:null,maxDate:"+3M",nextText:"",prevText:"",beforeShowDay:a.bind(this._datepickerBeforeShowDayHandler,this),onSelect:a.bind(this._datepickerOnSelectHandler,this),onChangeMonthYear:a.bind(this._datepickerOnChangeMonthYearHandler,this)},hours:{weekday:{opening:"00:00",closing:"00:00"},weekend:{opening:"00:00",closing:"00:00"}},unavailableServiceURL:null,unavailable:{}},this.options=c||{},this.settings=b.extend(!0,{},this.defaults,this.options),this.init()}}return d.prototype.init=function(){this.$parentContainer=b(this.appointment.$container),this.$container=b(this.settings.el,this.$parentContainer),this.$calendar=b(this.settings.elCalendar,this.$container),this.$input=b('input[type="date"]:eq(0)',this.$container),this.$input.attr("tabindex","-1"),"object"==typeof this.appointment&&this.appointment.setOption("date",this.appointment.today.getFormattedDate()),this.setUnavailableDays(),this._initDatepicker()},d.prototype.reset=function(){this.$input.attr("value",null)},d.prototype.numAvailableDays=function(){return b("tbody a",this.$calendar).size()},d.prototype.advanceOneDay=function(){this.numAvailableDays()>=2?this.selectNextDay():this.advanceCalenderOneMonth()},d.prototype.selectNextDay=function(){var a=this;setTimeout(function(){b("tbody a:eq(1)",a.$calendar).trigger("click")},50)},d.prototype.advanceCalenderOneMonth=function(){b(".ui-datepicker-next",this.$calendar).trigger("click"),this.selectFirstAvailableDate()},d.prototype.selectFirstAvailableDate=function(){var a=this;setTimeout(function(){b("tbody a:eq(0)",a.$calendar).trigger("click")},25)},d.prototype.setDate=function(a){"object"==typeof this.appointment&&(this.appointment.setOption("date",a),this.appointment.TimeSelector._toggleBookable(a))},d.prototype.getDate=function(){return"object"==typeof this.appointment?this.appointment.getOption("date"):""},d.prototype._clearTimeslot=function(){"object"==typeof this.appointment&&this.appointment.setOption("time",null)},d.prototype.setUnavailableDays=function(){var b=this.$container.attr(this.uiConstants.attrClosedOn);this.daysClosed=[],a.isString(b)&&b.length&&(this.daysClosed=b.split(",")),a.each(this.daysClosed,function(a){this.settings.unavailable[a]=[""]},this)},d.prototype.updateMinDate=function(a){this.$calendar.datepicker("option","minDate",a)},d.prototype._initDatepicker=function(){var a=b("html").attr("lang").split("-")[0];1===this.$calendar.size()&&b.fn.datepicker&&(this.$calendar.datepicker(this.settings.datepicker),this.$calendar.datepicker("option",{minDate:this.appointment.today,maxDate:this.settings.datepicker.maxDate}),void 0!==b.datepicker.regional[a]?b.datepicker.setDefaults(b.datepicker.regional[a]):b.datepicker.setDefaults(b.datepicker.regional[""]),this._bindCalendarEventHandlers(),this._datepickerResetMonthNav())},d.prototype.localiseDate=function(a){var c=this.$container.data(this.uiConstants.attrDateFormat);return b.datepicker.formatDate(c||"yy-mm-dd",a)},d.prototype._datepickerBeforeShowDayHandler=function(a){var b,c=new window.AppointmentDateObj(a),d=c.getFormattedDate(),e=!0,f=a.getDate(),g=0===f||6===f?this.settings.hours.weekend:this.settings.hours.weekday,h=parseInt((parseInt(g.closing,10)-parseInt(g.opening,10))/this.settings.timeslotIncrements,10);return this.settings.unavailable.hasOwnProperty(d)&&(b=this.settings.unavailable[d],e=h>=b.length),[e,"",""]},d.prototype._datepickerOnSelectHandler=function(a,c){var d=this.$parentContainer.find(this.uiConstants.shortTimeSlots);this.state.dateJustSelected=!0,this.setDate(a),a.split("-"),this.state.$elFocused=b("tbody a.ui-state-active:eq(0)",this.$calendar),this._datepickerResetMonthNav(),this.settings.focusTimeOnSelect&&this.state.usingKeyboard?this._focusFirstAvailableTimeSlot():this._datepickerRefocus(),d.length&&d.removeClass(this.uiConstants.classOpen).find("li").removeClass(this.uiConstants.classDeployed),this.appointment.TimeSelector.selectFirstAvailableSlot()},d.prototype._datepickerOnChangeMonthYearHandler=function(a,b,c){var d=parseInt(a+""+b,10);this.state.monthChange=this.state.monthShowing<d?"next":"prev",this.state.monthShowing=d,this._datepickerResetMonthNav(),this._datepickerFocusMonthsNav(),this.selectFirstAvailableDate()},d.prototype._datepickerResetMonthNav=function(){setTimeout(function(){b(".ui-datepicker-next, .ui-datepicker-prev",this.$calendar).attr("href","javascript:void(0)")},this.settings.refocusSpeed)},d.prototype._datepickerRefocus=function(){setTimeout(a.bind(function(){this.state.$elFocused.trigger("focus")},this),this.settings.refocusSpeed),this.state.dateJustSelected&&setTimeout(a.bind(function(){this.state.dateJustSelected=!1,this.state.$elFocused=b(":focus, .ui-datepicker-current-day a",this.$calendar).first(),this.state.$elFocused.trigger("focus")},this),this.settings.refocusSpeed+5)},d.prototype._datepickerFocusMonthsNav=function(){setTimeout(a.bind(function(){b(".ui-datepicker-"+this.state.monthChange,this.$calendar).trigger("focus")},this),this.settings.refocusSpeed)},d.prototype._datepickerFocusFirstDayOfMonth=function(){setTimeout(function(){this.state.$elFocused=b("td a",this.$calendar).first(),this.state.$elFocused.trigger("focus")},this.settings.refocusSpeed)},d.prototype._focusFirstAvailableTimeSlot=function(){setTimeout(a.bind(function(){this.appointment.TimeSelector.$container&&(this.state.$elFocused=b("time.available",this.appointment.TimeSelector.$container).first().parent(),this.state.$elFocused.trigger("focus"))},this),this.settings.refocusSpeed)},d.prototype._bindCalendarEventHandlers=function(){this.$container.on("focus","a, button",a.bind(this._calendarOnFocusHandler,this)),this.appointment.$container.on("keyup mouseup","a, button",a.bind(this._calendarOnInteractionHandler,this))},d.prototype._calendarOnInteractionHandler=function(a){this.state.usingKeyboard="keyup"===a.type},d.prototype._calendarOnFocusHandler=function(a){this.state.$elFocused=b(a.currentTarget),this._datepickerResetMonthNav()},d}),define("appointmentTime",["underscore","jquery"],function(a,b){"use strict";function c(a,d){if("object"==typeof d){if(void 0===a&&(a={}),!(this instanceof c))return new c(a,d);this.appointment=d,this.uiConstants={classUnavailable:"unavailable",classAvailable:"available",classSelected:"selected",classBookable:"bookable",classRendered:"render",classDeployed:"deployed",attrSundayOpening:"data-opening-time-sunday",attrSundayClosing:"data-closing-time-sunday",attrMondayOpening:"data-opening-time-monday",attrMondayClosing:"data-closing-time-monday",attrTuesdayOpening:"data-opening-time-tuesday",attrTuesdayClosing:"data-closing-time-tuesday",attrWednesdayOpening:"data-opening-time-wednesday",attrWednesdayClosing:"data-closing-time-wednesday",attrThursdayOpening:"data-opening-time-thursday",attrThursdayClosing:"data-closing-time-thursday",attrFridayOpening:"data-opening-time-friday",attrFridayClosing:"data-closing-time-friday",attrSaturdayOpening:"data-opening-time-saturday",attrSaturdayClosing:"data-closing-time-saturday",attrUnavailableOn:"data-unavailable-on"},this.defaults={el:".time",bookingDelay:1,hours:{weekday:{opening:"00:00",closing:"00:00"},weekend:{opening:"00:00",closing:"00:00"}},unavailableServiceURL:null,unavailable:{}},this.options=a||{},this.settings=b.extend(!0,{},this.defaults,this.options),this.init()}}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];d.length;return c.prototype.init=function(c,d){var e=this;this.$container=b(this.settings.el,this.appointment.$container),this.$input=b('input[type="time"]:eq(0)',this.$container),this.$container.on("click","button",a.bind(this._onTimeClickHandler,this)),this._setUnavailableSlots(),this._toggleBookable(this.appointment.today),0===this.numAvailableSlots()?(this.appointment.DateSelector.advanceOneDay(),setTimeout(function(){e.selectFirstAvailableSlot(),e.appointment.DateSelector.updateMinDate(new Date(e.appointment.today.getTime()+864e5))},200)):this.selectFirstAvailableSlot()},c.prototype._onTimeClickHandler=function(c){c.preventDefault();var d=b(c.currentTarget).children("time:eq(0)"),e=d.data("value");d.hasClass(this.uiConstants.classUnavailable)||this._hasChildSlots(d)||(this._clearTimeSelection(),d.addClass(this.uiConstants.classSelected),a.isUndefined(e)&&(e=d.text()),this.appointment.setOption("time",e.replace(/^\s+|\s+$/g,"")))},c.prototype.numAvailableSlots=function(){return b("time."+this.uiConstants.classAvailable,this.$container).size()},c.prototype.selectFirstAvailableSlot=function(){var c=b("time."+this.uiConstants.classAvailable,this.$container).first().parent();this.firstAvailableSlotAlreadyDeployed()||(c.trigger("click"),this.$activeSlot=c,c.siblings("ul").length&&a.defer(a.bind(this.selectFirstAvailableChildrenSlot,this)))},c.prototype.selectFirstAvailableChildrenSlot=function(a){var b;a=a||this.$activeSlot,b=a.siblings("ul"),b.length&&b.find("time."+this.uiConstants.classAvailable).first().parent().trigger("click")},c.prototype.firstAvailableSlotAlreadyDeployed=function(){return b("time."+this.uiConstants.classAvailable,this.$container).first().closest("li").hasClass(this.uiConstants.classDeployed)},c.prototype.localiseTime=function(a){return a},c.prototype.reset=function(){this.$input.attr("value",null)},c.prototype._clearTimeSelection=function(){this.appointment.setOption("time",""),b("."+this.uiConstants.classSelected,this.$container).removeClass(this.uiConstants.classSelected)},c.prototype._parseTime=function(a){if(!a)return 0;var b=a,c=b.split(":"),d=100*parseInt(c[0],10),e=parseInt(c[1],10);return parseInt(d+e,10)},c.prototype.getOpeningTimeOf=function(a){return this.$container.attr(this.uiConstants["attr"+a+"Opening"])},c.prototype.getClosingTimeOf=function(a){return this.$container.attr(this.uiConstants["attr"+a+"Closing"])},c.prototype.getHoursByDate=function(a){var b=a.getDay();return{opening:this._parseTime(this.getOpeningTimeOf(d[b])),closing:this._parseTime(this.getClosingTimeOf(d[b]))}},c.prototype._enableSlot=function(a){a.removeClass(this.uiConstants.classSelected+" "+this.uiConstants.classUnavailable).addClass(this.uiConstants.classAvailable+" "+this.uiConstants.classBookable),a.parent().attr("tabindex","").attr("disabled",!1)},c.prototype._disableSlot=function(a){a.removeClass(this.uiConstants.classSelected+" "+this.uiConstants.classAvailable).addClass(this.uiConstants.classUnavailable),a.parent().attr("tabindex","-1").attr("disabled",!0)},c.prototype._getTimeBySlot=function(b){var c;return"object"!=typeof b?Number.NaN:(c=b.data("value"),a.isUndefined(c)?this._parseTime(b.text()):this._parseTime(c))},c.prototype._setUnavailableSlots=function(){var b=this.$container.attr(this.uiConstants.attrUnavailableOn),c=[];a.isEmpty(b)||(c=b.split(",")),a.each(c,function(b){b=b.split("."),a.isUndefined(this.settings.unavailable[b[0]])&&(this.settings.unavailable[b[0]]=[]),this.settings.unavailable[b[0]].push(parseInt(b[1],10))},this)},c.prototype._getUnavailableSlots=function(a){return this.settings.unavailable[a]},c.prototype._hasChildSlots=function(a){return 0!==a.closest("li").find("ul").length},c.prototype._isChildSlot=function(a){return 0!==a.closest("ul").parent("li").length},c.prototype._getParentSlot=function(a){return a.closest("ul").siblings("button").find("time")},c.prototype._toggleBookable=function(c){c=c||this.appointment.getOption("date");var d,e,f=new window.AppointmentDateObj;a.isString(c)?(c=c.split("-"),d=new window.AppointmentDateObj(c[0],c[1]-1,c[2])):d=new window.AppointmentDateObj,e=this._getUnavailableSlots(d.getFormattedDate());var g=(d.getDay(),this.getHoursByDate(d)),h=d.getFormattedDate()===this.appointment.today.getFormattedDate();b("time",this.$container).each(a.bind(function(c,d){var i=b(d),j=this._getTimeBySlot(i),k=this._parseTime(f.getHours()+this.settings.bookingDelay+":"+f.getMinutes());h&&j<k?this._disableSlot(i):a.indexOf(e,j)>=0?this._hasChildSlots(i)?this._enableSlot(i):this._disableSlot(i):j<parseInt(g.closing,10)&&j>=parseInt(g.opening,10)?(this._enableSlot(i),this._isChildSlot(i)&&this._enableSlot(this._getParentSlot(i))):this._disableSlot(i)},this))},c}),define("appointment",["underscore","jquery","appointmentDate","appointmentTime"],function(a,b,c,d){"use strict";function e(a){if(void 0===a&&(a={}),!(this instanceof e))return new e(a);this.uiConstants={classInitialized:"appointmentInitialized",dataPrefix:"appointment-"},this.defaults={el:".appointment",appointmentDate:{},appointmentTime:{},header:{titleFormat:"__DATE__ at __TIME__",dateFormat:"DD dd MM yy"}},this.options=a,this.settings=b.extend(!0,{},this.options,this.defaults),this.init()}return window.AppointmentDateObj=window.Date,window.AppointmentDateObj.prototype.getFormattedDate=function(){var a,b;return a=""+(parseInt(this.getMonth(),10)+1),1===a.length&&(a="0"+a),b=""+this.getDate(),
1===b.length&&(b="0"+b),this.getFullYear()+"-"+a+"-"+b},e.prototype.init=function(){this.$container=b(this.settings.el),0!==this.$container.size()&&(this.settings.hasOwnProperty("today")?this.setToday(this.settings.today):this.setToday(),this.DateSelector=new c(this.settings.appointmentDate,this),this.TimeSelector=new d(this.settings.appointmentTime,this),this.reset(),this.$container.addClass(this.uiConstants.classInitialized))},e.prototype.reset=function(){this.DateSelector.reset(),this.TimeSelector.reset()},e.prototype.setOption=function(a,b){var c="data-"+this.uiConstants.dataPrefix+a;b&&b.length>0?this.$container.attr(c,b):this.$container.attr(c,null),this.$container.trigger("appointmentUpdate")},e.prototype.getOption=function(a){var b="data-"+this.uiConstants.dataPrefix+a;return this.$container.attr(b)},e.prototype.confirmOptions=function(){this.DateSelector.$input.attr("value",this.getOption("date")),this.TimeSelector.$input.attr("value",this.getOption("time"))},e.prototype.getLocalisedFormat=function(a){var b="data-"+this.uiConstants.dataPrefix+"localised",c=this.$container.attr(b);return c||"__DATE__ at __TIME__"},e.prototype.getLocalisedAppointmentString=function(a){var c=this.getOption("date"),d=this.getOption("time");if(!c||!d)return!1;if(12===a){var e=d.split(":");d=this.toAmPm(e[0],e[1])}var f=this.DateSelector.localiseDate(b.datepicker.parseDate("yy-mm-dd",c)),g=this.TimeSelector.localiseTime(d);return this.getLocalisedFormat().replace("__DATE__",f).replace("__TIME__",g)},e.prototype.toAmPm=function(a,b){return(a%12||12)+":"+b+(a>11?" PM":" AM")},e.prototype.setToday=function(a){a&&10===a.length?this.today=new window.AppointmentDateObj(a):this.today=new window.AppointmentDateObj},e}),define("c_056",["jquery","logger","underscore","validation","accordion","accordionItem","appointment","c_040","c_019","storageManager","storageManagerKeys","urlParameterDecoder","handlebars","jqueryui","jqueryCookie"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function n(c){var d,e,f,i,m,n,r={};if(Aa=a.extend(!0,{},ya,c),ba=a(Aa.selectors.root),!ba.length)return!1;va=Aa.HELIOS.adobe.tagging.formName,wa=Aa.HELIOS.adobe.tagging.componentId,e=Aa.analyticsManager,f=e.trackingVars.formSteps,e.getTrackingObjectProperties(f),oa=new b({prefix:"C56"}),d=ba.find(ya.selectors.dealerLocator),ua=ba.find("div[data-"+ya.data.timeFormat+"]"),ta=parseInt(ua.data(ya.data.timeFormat),10),ba.data("tracking",{formName:va,componentId:wa}),l.init(),sa=l.getUrlParams(),j.init(),fa=j.loadItem("lastVisitedVehicle"),i=j.loadItem("dealerID"),n=j.loadItem(k.dwsPreselectedDealer.itemKey,{mode:"sessionStorage"}),n&&n.hasOwnProperty("dealerUrl")&&Aa.window.opener&&Aa.window.opener.location.href===n.dealerUrl&&(i={dealerID:n.dealerId},ia=!0),i||(m=j.loadItem("state"))&&m.dealer&&(Aa.HELIOS.state.dealer=m.dealer,i={dealerID:m.dealer.id}),sa.modelSpecCode?qa=sa.modelSpecCode:sa.modelName?ra=sa.modelName:qa=a.isPlainObject(fa)?fa.modelSpecCode||"":fa,ba.length&&(Ba=ba.hasClass(ya.classes.isAuthorMode),ka=ba.find(Aa.selectors.vehicleDropdown),la=ka.find(Aa.selectors.rangeTypeList),na=ba.find(Aa.selectors.vehicleCategories),ma=na.find(Aa.selectors.allVehicles),A(),xa=new g({}),o(),Ba||N(),ia||(ia=ca.data(ya.data.lockDealer)&&i&&i.dealerID),d.length&&(ga=h.newInstance(d,{HELIOS:c.HELIOS}),ga.init&&"function"==typeof ga.init&&(ga.markersLoaded().done(function(){var b=a(ya.selectors.selectThisDealerButton);P(),R(Aa),Q(),ga.map.setAutoSelectFirstDealerInCollection(!1),a(ya.selectors.selectThisDealerButton).hide(),d.on("zeroDealers",function(){var b,c=Aa.analyticsManager,d=c.trackingVars.formSteps,e=c.getTrackingObjectProperties(d),f={};a(ya.selectors.noDealersMsg).show(),f[e.formStepName]=Aa.tracking.steps[2].name,f[e.formStepNumber]=Aa.tracking.steps[2].number,f[e.errorMessage]="no dealers available",c.track(d,f),a(ya.selectors.selectThisDealerButton).hide(),ga.map&&(ga.map.activeDealer=!1,ga.map.removeDealerDetail(),ga.map.refresh(),ga.map.center([0])),za&&(b=ha.options.items[2])&&(b.disable(),ha.closeItem(b))}),d.on("dealerWasSelected",function(){b.show()}).on("noDealerSelected",function(){b.hide()}),ia&&x(i.dealerID),i&&i.dealerID&&(Aa.window.HELIOS.state=Aa.window.HELIOS.state||{},Aa.window.HELIOS.state.dealer={id:i.dealerID}),w(),s(),q()}),ga.init()),Ba&&S(null,!0)),e.append(f,r),aa(),Z(),p())}function o(){var b=ua.find(ya.selectors.timeSlot);12===ta&&b.each(function(){var b=a(this),c=b.text().split(":");b.text(xa.toAmPm(c[0],c[1]))})}function p(){la.on(Aa.events.change,r)}function q(){var a=la.find("option");a.length&&(Aa.HELIOS.state&&Aa.HELIOS.state.rangePage?(la.val(Aa.HELIOS.state.rangePage.id).trigger(Aa.events.change),ka.show()):a.find("[selected]").length||la.val(""))}function r(){t(),w(),s()}function s(){fa=qa=null,j.deleteItem("lastVisitedVehicle")}function t(){var a=ma.filter(u).show();ma.not(a).hide()}function u(b,c){return-1!==a(c).data(Aa.data.categoryValue).split("|").indexOf(la.val())}function v(b){var c,d;if(pa=fa,a.isPlainObject(pa))for(c in pa)(d=a("input[name="+c+"]"))&&(b?(d.val(pa[c]),"downpayment"===c&&a('input[name="downPayment"]').val(pa[c])):(d.val(""),"downpayment"===c&&a('input[name="downPayment"]').val("")))}function w(){var a;qa?a=ba.find('input[data-model-code="'+qa+'"]'):ra&&(a=ba.find('input[title="'+ra+'"]')),a&&a.length&&H(a.parent())}function x(a){var b=D(a);ga.requestDealerDetail(a),Ca.dealerId=ga.value.id,Ca.dealerName=ga.value.name,ha.options.items[1].updateHeader(b.find(":selected").text()),ha.options.items[1].complete()}function y(){return a(ya.selectors.customerDetailsContent,ca).find("input, select")}function z(){return ca.find(ya.selectors.selectVehicleContent+" radio, "+ya.selectors.selectDealerContent+" select").add("#appointmentDate").add("#appointmentTime")}function A(){var a={validation:{rules:{appointmentDate:{date:!1},email:{email:!1}},focusInvalid:!1,invalidHandler:B}};ca=ba.find("form:eq(0)"),ja=ba.find(ya.forms.form).attr(ya.data.attrEnterDisabled)||"false",ja===ya.forms.enterKeySubmitDisabled&&ca.on(ya.events.keypressKeyup,function(a){var b=a.target.nodeName,c=b.toLowerCase();a.keyCode!==ya.keys.enter||c!==ya.forms.input&&c!==ya.forms.select||(Y(a),a.preventDefault())}),ea=new d(ca,a),Ba||ea.disableFormSubmitButton(),da=ca.find(ya.selectors.submitForm)}function B(b,c){var d;c.numberOfInvalids()&&c.numberOfInvalids()>0&&(d=a(c.errorList[0].element).parents(ya.selectors.formGroup))&&void 0!==d.offset()&&setTimeout(function(){a("html, body").animate({scrollTop:d.offset().top-10+"px"},ya.errorHandling.animateTimeLength)},ya.errorHandling.animateStart)}function C(){return a(ya.selectors.selectDealerContent+" select")}function D(a){var b=C();return oa.info("_setSelectDealerInputElement("+a+")"),b.val(a),b[0].selectedIndex<0&&(b[0].selectedIndex=0),b.trigger("change"),b}function E(b){if(!ia||!a(b.target).hasClass(ya.classes.selectDealerHeader)){var c=a(ya.selectors.customerDetailsContent);ea.reset(),c.is(":visible")&&(c.slideUp(0),da.removeClass(ya.classes.customerDetailsOpen),ba.removeClass(ya.classes.customerDetailsOpen))}}function F(a){var b;ea.hideGroupErrors(),Ba||(ha.options.items[0].complete(),(b=ia?ha.options.items[2]:ha.options.items[1])&&b.enable())}function G(a){var b;ea.hideGroupErrors(),a&&9===a.which&&!1===a.shiftKey&&(b=ia?ha.options.items[2]:ha.options.items[1])&&!1===b.options.isDisabled&&ha.openItem(b)}function H(b){b.currentTarget&&(b=a(b.currentTarget)),Ba||(ha.options.items[0].complete(),I(b))}function I(b){var d,e,f,g,h,i,j=ha.options.items.length>2;ea.hideGroupErrors(),i=b.find(ya.selectors.vehicleCategoryRadio),ia&&j?h=ha.options.items[2]:ia&&!j?(ha.closeItem(ha.options.items[0]),J()):h=ha.options.items[1],(h||!h&&ia&&!j)&&c.defer(function(){var b=Aa.analyticsManager,c=b.trackingVars.formSteps,j=b.getTrackingObjectProperties(c),k={};i.prop("checked")||i.prop("checked",!0).trigger("change"),v(i.prop("checked")&&i.data("modelCode")===qa?!0:!1),ha.options.items[0].updateHeader(i.attr("title")),h&&(h.enable(),ha.openItem(h)),d=i.data("testDriveModel"),f=i.data("modelCode"),g=i.parents("[data-"+Aa.data.vehicleCategory+"]").eq(0).data(Aa.data.vehicleCategory),e=i.attr("title"),a(ya.selectors.noDealersMsg).hide(),ga.map.setAutoSelectFirstDealerInCollection(!1),ga.removeAllFilters(),a("p.no-dealers-msg").hide(),ia||D(""),a(ya.selectors.modelHidden).val(e),Ca.vehicleModel=e,Ca.vehicleId=f,Ca.vehicleCategory=g,ga.attributes.basicSearchOn=!0,k[j.componentId]=wa,k[j.formStepName]=Aa.tracking.steps[1].name,k[j.formStepNumber]=Aa.tracking.steps[1].number,k[j.formName]=va,k[j.vehicleModel]=Ca.vehicleModel,k[j.vehicleId]=Ca.vehicleId,k[j.vehicleCategory]=Ca.vehicleCategory,d&&d.length?(oa.debug("dealerLocator.filterByCarType() was called in _onVehicleLabelMouseUpHandler"),ga.markersLoaded().done(function(){ga.filterByCarType(d)})):(ga.markersLoaded().done(function(){ga.requestDealerData()}),k[j.errorMessage]="no stock available"),b.tag(c,k)})}function J(){var b=a(ya.selectors.customerDetailsContent);ea.reset(),b.slideDown(),da.addClass(ya.classes.customerDetailsOpen),ba.addClass(ya.classes.customerDetailsOpen),ea.disableGroupErrors(),ea.enableFormSubmitButton(),z().valid()&&(y().prop("disabled",!1),a(Aa.classes.hiddenResponsiveElement).find("input").prop("disabled",!0),a("form-group.error").removeClass(ya.classes.error),b.slideDown(600,function(){a(ya.selectors.pageBody).animate({scrollTop:b.offset().top})}))}function K(b){var c,d=Aa.analyticsManager,e=d.trackingVars.formSteps,f=d.getTrackingObjectProperties(e),g={};oa.info("__onDateTimeSelectHandler"),g[f.componentId]=wa,g[f.formStepName]=Aa.tracking.steps[3].name,g[f.formStepNumber]=Aa.tracking.steps[3].number,g[f.vehicleModel]=Ca.vehicleModel,g[f.dealerId]=Ca.dealerId,g[f.dealerName]=Ca.dealerName,g[f.formName]=va,d.track(e,g),ea.hideGroupErrors(),!1!==(c=xa.getLocalisedAppointmentString(ta))&&(xa.confirmOptions(),a(ya.selectors.selectDateTimeContent+" input").valid()&&(Ba||(ha.options.items[2].updateHeader(c),ha.options.items[2].complete(),ha.closeItem(ha.options.items[2],J))))}function L(b){var d,e,f,g=Aa.analyticsManager,h=g.trackingVars.formSteps;oa.info("_onFormSubmitButtonClickHandler"),S(null,!0),z().valid()&&(d=y(),d.size()>0&&(d.valid()?(f={componentId:wa,formStepName:Aa.tracking.steps[4].name,formStepNumber:Aa.tracking.steps[4].number,formName:va},g.tag(h,f)):(b.preventDefault(),$(),_(),c.each(ha.options.items,function(a){a.close()}),e=a(ya.selectors.customerDetailsContent),da.addClass(ya.classes.customerDetailsOpen),ba.addClass(ya.classes.customerDetailsOpen),c.defer(function(){e.slideDown(600,function(){a(ya.selectors.pageBody).animate({scrollTop:e.offset().top})})}))))}function M(b){setTimeout(function(){var b,c="",d=Aa.analyticsManager,e=d.trackingVars.formSteps;a.each(a(Aa.selectors.errorMessage,Aa.selectors.rootC19),function(b,d){"block"===a(d).css("display")&&(c+=a(d).text()+",")}),""!==c&&(c=c.substring(0,c.length-1),b={componentId:wa,formStepName:Aa.tracking.steps[4].name,formStepNumber:Aa.tracking.steps[4].number,formName:va,errorMessage:c},d.tag(e,b))},50)}function N(){var b,c=a(ya.selectors.accordionPanel,ba),d=a(ya.selectors.accordionHeader,ba),g=[],h=d.length;for(oa.info("_setupAccordion"),b=0;b<h;b++)g.push(new f({$contentElement:c.eq(b),$headerElement:d.eq(b),isDisabled:0!==b,isOpen:0===b,transitionToClose:"toggle"}));ha=new e({$container:ba,isScrollOnOpenEnabled:!0,items:g,scrollToFirstHeader:!0})}function O(b){13===b.keyCode&&a(b.target).trigger("click")}function P(){oa.info("_setupAccordionPanels"),Ba||a(ya.selectors.customerDetailsContent).hide(),a(ya.selectors.accordionHeader).on("click",E),a(ya.selectors.selectVehicleContent).find(ya.selectors.vehicleCategories).on("change",'input[type="radio"]',F).on("keydown",'input[type="radio"]',G).on("mouseup","label",H),a(ya.selectors.vehicleInCategory).on("keypress",O),ba.find(ya.selectors.lastAction).find(ya.selectors.selectButton).on("click",function(b){var c=Aa.analyticsManager,d=c.trackingVars.formSteps,e=c.getTrackingObjectProperties(d),f={};Ca.dealerId=a(Aa.selectors.dealerIdData).data(Aa.data.dealerId),Ca.dealerName=a(Aa.selectors.dealerName).text(),Ca.dealerAddress=a(Aa.selectors.dealerAddress).text(),Ca.dealerType=a(Aa.selectors.map).data(Aa.data.activeDealerType),f[e.componentId]=wa,f[e.dealerType]=Ca.dealerType,f[e.dealerName]=Ca.dealerName,f[e.dealerAddress]=Ca.dealerAddress,f[e.formStepName]=Aa.tracking.steps[2].name,f[e.formStepNumber]=Aa.tracking.steps[2].number,Ca.vehicleModel||(Ca.vehicleModel=a(Aa.selectors.accordionGroup,Aa.selectors.root).eq(0).find("h2.accordion-header").text()),f[e.vehicleModel]=Ca.vehicleModel,f[e.formName]=va,c.track(d,f),ga.map.selectDealer()}),ba.find(ya.selectors.mapResults).on("click",ya.selectors.showMoreButton,U),ba.find(ya.selectors.mapCell).on("keyup",ya.selectors.map,W),ba.find(ya.selectors.selectDealerContent).on(ya.events.accordionStateChange,S),ba.find(ya.selectors.selectDateTimeContent).on(ya.events.accordionStateChange,X),ba.on("dealer-selected",T),a(ya.selectors.selectDateTimeContent+" .cta").on("click",K),a(ya.selectors.submitFormButton).on("click",L),a(ya.selectors.submitFormButton).on("click",M),a(ya.selectors.accordionAccessTrigger).on("click",function(a){a.preventDefault()})}function Q(){za=a(ya.selectors.appointmentStep).length}function R(b){var c,d=a.cookie(b.cookieKey.dealerInput);d&&(a.removeCookie(b.cookieKey.dealerInput,{path:"/"}),c=D(d),c.valid()&&ha.options.items[1].updateHeader(c.find(":selected").text()))}function S(a,b,c){var d;oa.info("_onDealerAccordionStateChange"),!0===b&&(ga.refreshView("map"),ba.find(ya.selectors.selectDealerContent).css("height","auto"),(d=C().val())&&""!==d&&ga.viewOnMap(!1,d))}function T(a,b){var c,d;oa.info("_onDealerSelection"),ea.hideGroupErrors(),c=D(b),!Ba&&c.valid()&&(ha.options.items[1].updateHeader(c.find(":selected").text()),ha.options.items[1].complete(),za?(d=ha.options.items[2])&&(d.enable(),ha.openItem(d)):J())}function U(b){var c=a(b.currentTarget),d=c.hasClass(ya.classes.showLess),e=c.closest(ya.selectors.dealerLocatorContent);b.preventDefault(),V(e,d,c)}function V(a,b,c){var d,e="data-text",f="data-alt",g="block",h="";!1===b?(c.attr(e,c.text()),d=c.attr(f)):(d=c.attr(e),g=""),c.toggleClass(ya.classes.showLess,!1===b).find("span").text(d),!1===b&&(h=a.height()),a.parent().css("min-height",h),a.find(ya.selectors.moreDealerInfo).css("display",g),!1===b?setTimeout(function(){a.toggleClass(ya.classes.isShowingMore,!1===b)},0):a.toggleClass(ya.classes.isShowingMore,!1===b)}function W(b){b&&9===b.which&&(!1===b.shiftKey?a(ya.selectors.prevButton).focus():!0===b.shiftKey&&a(ya.selectors.geolocateButton).focus())}function X(b){a(b.target).find("a").first().focus()}function Y(a){a.target.type===ya.forms.checkbox&&(!0===a.target.checked?a.target.checked=!1:a.target.checked=!0)}function Z(){var b=a(ya.selectors.telephoneLinks);b.length&&b.attr("href",b.attr("href").replace(/\s+/g,"").replace(/-/g,""))}function $(){Aa.form.displayAddressErrors()}function _(){var b=a(ya.selectors.datePicker);b.siblings(ya.selectors.errorMessage).css("width",b.css("width"))}function aa(){ba.find(Aa.selectors.submitFormButton+Aa.selectors.jsDisabled).removeAttr("disabled").removeClass(Aa.classes.jsDisabled+" "+Aa.classes.btnDisabled)}var ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa=null,ya={fieldsetHeaders:{},appointment:{},sections:["select-vehicle","select-dealer","select-date-time"],cookieKey:{dealerInput:"dealer-id-input"},errorHandling:{animateTimeLength:500,animateStart:500},classes:{customerDetailsOpen:"customer-details-open",accordionHeaderComplete:"accordion-header-complete",isShowingMore:"is-showing-more",showLess:"btn-show-less",error:"error",isAuthorMode:"authorMode",active:"active",btnDisabled:"btn-disabled",jsDisabled:"js-disabled",form:"form",selectDealerHeader:"select-dealer-header",hiddenResponsiveElement:".c_019 .contentcheckbox .responsive-element-fieldset > .hide"},events:{accordionStateChange:"accordion-state-change",change:"change",keypressKeyup:"keypress"},componentId:"C56_Book_A_Test_Drive",tracking:{formName:"book-a-test-drive",steps:[{number:"step 0",name:"start"},{number:"step 1",name:"select a vehicle"},{number:"step 2",name:"select a dealer"},{number:"step 3",name:"select a date time"},{number:"finalStep",name:"submit"}]},selectors:{root:".c_056",map:".c_022",dealerLocator:".c_040",dealerLocatorContent:".c_040-2",dealerAddress:".c_056-single-dealer .dealer-address p",dealerId:".c_056-single-dealer",dealerName:".c_056-single-dealer h2 span:last-child",pageBody:"html, body",mapResults:".map-results",mapCell:".map-cell",customerDetailsContent:".customer-details-content",selectDealerContent:".select-dealer-content",selectVehicleContent:".select-vehicle-content",appointment:".appointment",submitForm:".submit-form",submitFormButton:".submit-form-button",showMoreButton:".btn-show-more",selectButton:".btn-select",prevButton:".btn-batd-prev",geolocateButton:".btn-geolocate",moreDealerInfo:".more-dealer-info",lastAction:".item-actions-last",accordionHeader:".accordion-header",accordionPanel:".accordion-panel",accordionAccessTrigger:".access-trigger",vehicleInCategory:".vehicle-in-category",vehicleCategoryRadio:".vehicle-in-category-radio-button",modelHidden:".model-hidden",selectDateTimeContent:".select-date-time-content",appointmentStep:".accordion-panel.select-date-time-content",telephoneLinks:"a[href^='tel:']",datePicker:".date-picker",timeSlot:"time",errorMessage:".error-message",jsErrorMessage:".js-error-message",selectThisDealerButton:".item-actions-last button.btn-select",noDealersMsg:"p.no-dealers-msg",accordionGroup:".accordion-group",vehicleCategories:".vehicle-categories",vehicleTemplateList:".vehicle-template-c-056-list",vehicleDropdown:".vehicle-dropdown",rangeTypeList:"select",allVehicles:"li[data-category-value]",rootC19:".c_019",dealerIdData:".btn-fad",formGroup:".form-group",jsDisabled:".js-disabled"},data:{categoryValue:"categoryValue",timeFormat:"timeformat",lockDealer:"lockDealer",vehicleCategory:"category-value",dealerId:"id",activeDealerType:"active-dealer-type",attrEnterDisabled:"data-enter-disabled"},forms:{checkbox:"checkbox",input:"input",select:"select",form:"form",enterKeySubmitDisabled:"true"},keys:{enter:13}},za=!0,Aa=null,Ba=!1,Ca={vehicleModel:"",dealerName:"",dealerId:"",vehicleCategory:""};return f.prototype.complete=function(){this.options.$headerElement.addClass(ya.classes.accordionHeaderComplete)},{init:n}}),define("c_058",["jquery","c_022","storageManager"],function(a,b,c){"use strict";function d(){var a,b=n.$el,c={latitude:b.data("lat"),longitude:b.data("lon")};a={title:""},n.addMarker(a,c,"alpha",!0)}function e(a){var e={HELIOS:p.HELIOS};a.find(p.selectors.mapContainerSelect).eq(0).each(function(a,c){n=b.initInstance(c,e,!1),n.promise().done(d)}),c.deleteItem("c_133")}function f(b){c.init(),p=a.extend({},o,b),m=p.HELIOS.adobe.tagging.componentId;var d=a(p.selectors.root);d.length&&(e(d),g(),h(),i(),l=a(p.selectors.getDirections,d),l.on(p.events.click,j))}function g(){var a=c.loadItem(p.analytics.formCount,{mode:p.sessionStorage});a?c.saveItem(p.analytics.formCount,a+1,{mode:p.sessionStorage}):c.saveItem(p.analytics.formCount,1,{mode:p.sessionStorage})}function h(){var a=p.analyticsManager,b=c.loadItem(p.analytics.formCount,{mode:p.sessionStorage}),d={componentId:m,formCount:b};a.append(a.trackingVars.formCount,d)}function i(){var a,b=p.analyticsManager,c={},d={dealerId:"dealerId",dealerType:"dealerType",dealerName:"dealerName",locationLat:"locationLat",locationLong:"locationLong",leadId:"leadId",vehicleId:"vehicleId",vehicleModel:"vehicleModel",vehicleCategory:"vehicleCategory",bookingDate:"bookingDate",bookingTime:"bookingTime"};k(p.window.googleDataLayer[0]);for(a in d)d.hasOwnProperty(a)&&p.HELIOS.adobe.tagging[a]&&(c[d[a]]=p.HELIOS.adobe.tagging[a]);b.append(p.analyticsManager.trackingVars.formSteps,c)}function j(b){var c=a(b.currentTarget),d={componentId:m,destination:c.attr("href"),locationInPage:"book-a-test-drive-confirmation",buttonText:c.text()};p.analyticsManager.tag("genericClick",d)}function k(a){var b;for(b in a)void 0===p.HELIOS.adobe.tagging[b]&&(p.HELIOS.adobe.tagging[b]=a[b])}var l,m,n,o={events:{click:"click"},selectors:{root:".c_058",mapContainerSelect:".c_022",getDirections:".get-directions"},analytics:{componentId:"C58_Book_A_Test_Drive_Confirmation",formName:"book-a-test-drive",formStepName:"complete",formStepNumber:"complete",pageType:"confirmation",leadCategory:"batd",formCount:"formCount"},sessionStorage:"sessionStorage"},p=null;return{init:f}}),define("hbars!/components/c_184B/html/c_184B_DisclaimerTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function";return h+="<h1>",(g=c.heading)?f=g.call(b,{hash:{},data:e}):(g=b&&b.heading,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+="</h1>\n<h2>",(g=c.subheading)?f=g.call(b,{hash:{},data:e}):(g=b&&b.subheading,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+="</h2>\n<p>",(g=c.legal1)?f=g.call(b,{hash:{},data:e}):(g=b&&b.legal1,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+="</p>\n<p>",(g=c.legal2)?f=g.call(b,{hash:{},data:e}):(g=b&&b.legal2,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+="</p>\n"})}),define("hbars!/components/c_184B/html/c_184B_DisclaimerTooltipTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return"tooltip-label-central"}function g(a,b){return"tooltip-label-hidden"}function h(a,b){var d,e,f="";return f+="tooltip-icon-",(e=c.tooltipIcon)?d=e.call(a,{hash:{},data:b}):(e=a&&a.tooltipIcon,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)}function i(a,b){var d,e,f="";return f+='\n            <span class="tooltip-heading">',(e=c.tooltipHeadline)?d=e.call(a,{hash:{},data:b}):(e=a&&a.tooltipHeadline,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</span>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this;return l+='<div class="c_008">\n    <a\n        href=""\n        data-parent-component="',(k=c.parentComponent)?j=k.call(b,{hash:{},data:e}):(k=b&&b.parentComponent,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n        class="\n            has-tooltip\n            ',j=c.if.call(b,b&&b.labelCenter,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),l+="\n            ",j=c.if.call(b,b&&b.tooltipLabelHidden,{hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e}),(j||0===j)&&(l+=j),l+="\n            ",j=c.if.call(b,b&&b.tooltipIcon,{hash:{},inverse:o.noop,fn:o.program(5,h,e),data:e}),(j||0===j)&&(l+=j),l+='\n        "\n        data-tooltip-id="',(k=c.tooltipID)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipID,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n        data-tooltip-my="',(k=c.tooltipMy)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipMy,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n        data-tooltip-at="',(k=c.tooltipAt)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipAt,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n        tabindex="0"\n    >\n        <span>',(k=c.tooltipLabel)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipLabel,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'</span>\n    </a>\n    <div class="tooltip-panel" data-tooltip-id="',(k=c.tooltipID)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipID,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'">\n        ',j=c.if.call(b,b&&b.tooltipHeadline,{hash:{},inverse:o.noop,fn:o.program(7,i,e),data:e}),(j||0===j)&&(l+=j),l+="\n        <p>",(k=c.tooltipContent)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipContent,j=typeof k===m?k.call(b,{hash:{},data:e}):k),(j||0===j)&&(l+=j),l+="</p>\n    </div>\n</div>"})}),define("hbars!/components/c_184B/html/c_184B_PriceItemTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n        <button class="warning" type="button"><span>',(e=c.viewPriceGroupFallbackWarningCta)?d=e.call(a,{hash:{},data:b}):(e=a&&a.viewPriceGroupFallbackWarningCta,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</span></button>\n    "}function g(a,b){var d,e,f="";return f+=" ",(e=c.startingPriceSymbol)?d=e.call(a,{hash:{},data:b}):(e=a&&a.startingPriceSymbol,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)}function h(a,b){var d,e,f="";return f+='\n    <button class="view-finance-disclaimer" type="button"><span>',(e=c.viewFinanceDisclaimerCta)?d=e.call(a,{hash:{},data:b}):(e=a&&a.viewFinanceDisclaimerCta,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</span></button>\n"}function i(a,b){return'\n    <div class="disclaimer-tooltip"></div>\n'}function j(a,b){var d,e,f="";return f+='\n    <p class="description">',(e=c.description)?d=e.call(a,{hash:{},data:b}):(e=a&&a.description,d=typeof e===o?e.call(a,{hash:{},data:b}):e),(d||0===d)&&(f+=d),f+="</p>\n"}function k(a,b){var d,e,f="";return f+='\n    <button type="button" class="finance">',(e=c.viewFinanceCalculatorCta)?d=e.call(a,{hash:{},data:b}):(e=a&&a.viewFinanceCalculatorCta,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</button>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m,n="",o="function",p=this.escapeExpression,q=this;return n+='<p class="label">\n    ',l=c.if.call(b,b&&b.showWarning,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(l||0===l)&&(n+=l),n+="\n    <span>",(m=c.label)?l=m.call(b,{hash:{},data:e}):(m=b&&b.label,l=typeof m===o?m.call(b,{hash:{},data:e}):m),n+=p(l)+'</span>\n</p>\n<strong class="price">',(m=c.price)?l=m.call(b,{hash:{},data:e}):(m=b&&b.price,l=typeof m===o?m.call(b,{hash:{},data:e}):m),n+=p(l),l=c.if.call(b,b&&b.isPriceSymbolEnabledForModel,{hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e}),(l||0===l)&&(n+=l),n+="</strong>\n",l=c.if.call(b,b&&b.isFinancePrice,{hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e}),(l||0===l)&&(n+=l),n+="\n",l=c.if.call(b,b&&b.isTooltipDisclaimerEnabled,{hash:{},inverse:q.noop,fn:q.program(7,i,e),data:e}),(l||0===l)&&(n+=l),n+="\n",l=c.if.call(b,b&&b.description,{hash:{},inverse:q.noop,fn:q.program(9,j,e),data:e}),(l||0===l)&&(n+=l),n+="\n",l=c.if.call(b,b&&b.isFinanceCalculatorLinkEnabled,{hash:{},inverse:q.noop,fn:q.program(11,k,e),data:e}),(l||0===l)&&(n+=l),n+="\n"})}),define("priceManagerConstants",[],function(){"use strict";return{PRICE_KEYS:{HEADING_ONE:"h1",HEADING_TWO:"h2",IS_FINANCE_CALCULATOR_ENABLED:"isFinanceCalculatorEnabled",LABEL:"label",LEGAL_ONE:"legalOne",LEGAL_TWO:"legalTwo",MONTHLY_PRICE:"price",SIMULATOR_LABEL:"simulatorLabel",TEXT:"text"},PRICE_PARAMS:{AGE:"age",CURRENCY_CODE:"currencyCode",GRADE_KEY:"gradeKey",KM:"km",MODEL_KEY:"modelKey",MODEL_PATH:"modelPath",POWER_WO_OPTIONS:"Powerwooptions",PRICE_CODE:"priceCode",PRICE_INCLUDES_TAX:"priceIncludesTax",PRICE_REPRESENTED_AS:"priceRepresentedAs",TOTAL_PRICE:"totalPrice",PRICE_WO_OPTIONS:"priceWoOptions",VEHICLE_BRAND:"vehicleBrand",VEHICLE_ELECTRIC_MODEL_KEY:"vehicleElectricModelKey",VEHICLE_FISCAL_HORSEPOWER:"vehicleFiscalHorsepower",VEHICLE_FUEL_TYPE:"vehicleFuelType",VEHICLE_MODEL_CODE:"vehicleModelCode",VEHICLE_MODEL_NAME:"vehicleModelName",VEHICLE_MODEL_SEMI_CLAIR:"vehicleModelSemiClair",VEHICLE_SEG:"vehicleSeg",VEHICLE_TYPE:"vehicleType",VEHICLE_VERSION_CODE:"vehicleVersionCode",VEHICLE_VERSION_NAME:"vehicleVersionName",VERSION_KEY:"versionKey",VHID:"vhid"}}}),define("c_184B_PriceItem",["underscore","jquery","hbars!/components/c_184B/html/c_184B_DisclaimerTemplate","hbars!/components/c_184B/html/c_184B_DisclaimerTooltipTemplate","logger","c_008","modal","hbars!/components/c_184B/html/c_184B_PriceItemTemplate","storageManager","storageManagerKeys","priceManagerConstants"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l,m={classes:{financialSimulator:"financial-simulator",hidden:"hidden",loading:"loading",errorHandle:"error-handle"},selectors:{price:".price",priceLabel:".label > span",priceDescription:".description",priceDisclaimer:".tooltip-panel p",tooltip:"a.has-tooltip",tooltipContainer:"> .disclaimer-tooltip",viewFinanceCalculatorButton:"button.finance",modalContent:".financial-simulator .modal-content",viewFinanceDisclaimerButton:".view-finance-disclaimer",warningButton:"button.warning",modal:"div[class*='financial-simulator']",modalContentInternal:".modal-content"},events:{click:"click",priceDataSuccess:"priceDataSuccess.c_184B"}},n=j.priceItem.profileDataSession,o=new e({prefix:"C_184B_PriceItem"});return l=function(c){var d=m.classes.financialSimulator,e=d+"-"+a.uniqueId();this.options=c||{},this.settings=b.extend(!0,{},m,c),this.settings.selectors.modalContent=this.settings.selectors.modalContent.replace(d,e),this.settings.classes.financialSimulator=e,this.hide(),this.priceParams={},this.bindEvents(),this.eventAggregator=this.options.$el,this.eventAggregator.on("priceChange",a.bind(this.onPriceChange,this))},l.prototype.bindEvents=function(){this.options.$el.on(m.events.click,m.selectors.viewFinanceDisclaimerButton,a.bind(this.onViewFinanceDisclaimerButtonClick,this)),this.options.$el.on(m.events.click,m.selectors.viewFinanceCalculatorButton,a.bind(this.onFinanceCalculatorButtonClick,this))},l.prototype.getIsFinanceCalculatorLinkEnabled=function(){var a,b;return this.priceData[k.PRICE_KEYS.IS_FINANCE_CALCULATOR_ENABLED]?a=this.priceData[k.PRICE_KEYS.IS_FINANCE_CALCULATOR_ENABLED]:(b=this.getPriceItem())&&(a=b.getShowCalculatorLink()),a},l.prototype.getIsTooltipDisclaimerEnabled=function(){var a,b;return this.getIsFinancePrice()?a=!1:(b=this.getPriceCodeObject(),a=b?!!b.getDisclaimer():!!this.options.priceDisclaimer),a},l.prototype.getPriceCodeObject=function(){return this.options.priceCodes.getById(this.getPriceCode())},l.prototype.getPriceItem=function(){return this.options.priceItem},l.prototype.getPriceRepresentedAs=function(){var a,b=this.getPriceItem();return b&&(a=b.getRepresentedAs()),a},l.prototype.getViewFinanceCalculatorCta=function(){var a;return this.options.HELIOS&&this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&this.options.HELIOS.config.common.pricing.strings&&(a=this.options.HELIOS.config.common.pricing.strings.financeCalculatorCtaText),a},l.prototype.getViewFinanceDisclaimerCta=function(){var a;return this.options.HELIOS&&this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&this.options.HELIOS.config.common.pricing.strings&&(a=this.options.HELIOS.config.common.pricing.strings.financeDisclaimerCtaText),a},l.prototype.getViewPriceGroupFallbackWarningCta=function(){var a;return this.options.HELIOS&&this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&this.options.HELIOS.config.common.pricing.strings&&(a=this.options.HELIOS.config.common.pricing.strings.viewWarningCtaText),a},l.prototype.hide=function(){this.options.$el.addClass(m.classes.hidden)},l.prototype.onDisplayedPriceLoad=function(a){var c,d={};a=a||{},this.priceData=a,d.description=this.getPriceDescription(),d.isFinanceCalculatorLinkEnabled=this.getIsFinanceCalculatorLinkEnabled(),d.isFinancePrice=this.getIsFinancePrice(),d.isTooltipDisclaimerEnabled=this.getIsTooltipDisclaimerEnabled(),d.label=this.getPriceLabel(),d.showWarning=this.options.isUserSelectedPriceGroupWarningEnabled,d.isPriceSymbolEnabledForModel=!(!this.options.primaryPrice||!this.options.isPriceSymbolEnabledForModel)&&this.options.isPriceSymbolEnabledForModel,d.startingPriceSymbol=this.options.startingPriceSymbol,d.price=this.options.numberFormat.asCurrency(a.price,a.currency,this.options.HELIOS.config.common.locale),d.viewFinanceCalculatorCta=this.getViewFinanceCalculatorCta(),d.viewFinanceDisclaimerCta=this.getViewFinanceDisclaimerCta(),d.viewPriceGroupFallbackWarningCta=this.getViewPriceGroupFallbackWarningCta(),c=h(d),
this.options.$el.html(c),d.isTooltipDisclaimerEnabled&&this.renderTooltipDisclaimer(this.options.$el.find(m.selectors.tooltipContainer)),this.options.$el.removeClass(m.classes.loading),this.resolvePriceRequestPromise(),b(document).trigger(m.events.priceDataSuccess)},l.prototype.onFinancePriceLoad=function(a){this.onDisplayedPriceLoad(a)},l.prototype.onPriceRequestPromiseFail=function(){this.priceManagerPromise&&"pending"===this.priceManagerPromise.state()&&this.priceManagerPromise.reject()},l.prototype.onTotalPriceLoad=function(a){a=a||{},this.getIsFinancePrice()?this.requestPrice({currencyCode:a.currency,totalPrice:a.price}):(this.priceParams.totalPrice=a.price,this.onDisplayedPriceLoad(a))},l.prototype.onViewFinanceDisclaimerButtonClick=function(){var a,b;this.priceData&&(a={heading:this.priceData[k.PRICE_KEYS.HEADING_ONE],subheading:this.priceData[k.PRICE_KEYS.HEADING_TWO],legal1:this.priceData[k.PRICE_KEYS.TEXT],legal2:this.priceData[k.PRICE_KEYS.LEGAL_TWO]},b=new g,b.setAllContent({content:c(a)}).done(function(){b.animateIn()}))},l.prototype.renderTooltipDisclaimer=function(a){var c;a&&a.length&&d&&(c={tooltipContent:this.getPriceDisclaimer(),tooltipIcon:"asterisk"},a.each(function(a,e){b(e).html(d(c))}),f.createTooltips(a.find(m.selectors.tooltip)))},l.prototype.requestPrice=function(c){var d;return this.options.$el.addClass(m.classes.loading),this.priceRequestPromise||(this.priceRequestPromise=b.Deferred(),this.priceRequestPromise.fail(a.bind(this.onPriceRequestPromiseFail,this))),d=this.priceRequestPromise,this.options.priceManager?(o.debug("Requesting "+(c&&c.totalPrice?"finance ":"total ")+"price for price code "+this.getPriceCode()),this.priceParams=a.extend({modelKey:this.getModelCode(),modelPath:this.options.modelPath,gradeKey:this.getModelGrade(),versionKey:this.getModelVersion(),priceCode:this.getPriceCode(),priceIncludesTax:this.options.priceIncludesTax,priceRepresentedAs:this.getPriceRepresentedAs(),vehicleBrand:this.options.vehicleBrand,vehicleElectricModelKey:this.options.vehicleElectricModelKey,vehicleFiscalHorsepower:this.options.vehicleFiscalHorsepower,vehicleFuelType:this.options.vehicleFuelType,vehicleModelCode:this.options.vehicleModelCode,vehicleModelName:this.options.vehicleModelName,vehicleModelSemiClair:this.options.vehicleModelSemiClair,vehicleSeg:this.options.vehicleSeg,vehicleType:this.options.vehicleType,vehicleVersionCode:this.options.vehicleVersionCode,vehicleVersionName:this.options.vehicleVersionName},c),this.priceManagerPromise=this.options.priceManager.requestPrice(this.priceParams),this.priceManagerPromise&&(c&&c.totalPrice?this.priceManagerPromise.done(a.bind(this.onFinancePriceLoad,this)).fail(a.bind(this.onPriceFail,this)):this.priceManagerPromise.done(a.bind(this.onTotalPriceLoad,this)).fail(a.bind(this.onPriceFail,this)))):o.warn("No priceManager"),d},l.prototype.onFinanceCalculatorButtonClick=function(c){var d,e,f=b(c.target);this.financeCalculatorPromise||this.externalFinanceCalcPromise||(this.options.heliosAppContext.isFinanceProviderRci()?(f.addClass(m.classes.loading),this.initFinanceCalculatorModal(),b(this.settings.selectors.modal).find(this.settings.selectors.modalContentInternal).html(""),this.financeCalculatorPromise=this.options.financeManager.showCalculator(this.settings.selectors.modalContent,this.priceParams,this.eventAggregator,this.financeCalculatorPromise),this.financeCalculatorPromise.done(a.bind(this.financeCalculatorDone,this)).always(a.bind(this.financeCalculatorAlways,this,f))):(e={},f.addClass(m.classes.loading),e.gradeId=this.getModelGrade(),e.versionId=this.getModelVersion(),this.externalFinanceGetStorageValues(),this.externalFinanceCalcPromise=this.getExternalFinanceCalculatorLink(this.getModelCode(),this.getPriceCode(),this.getUserLocation(),this.getUserPostalCode(),this.priceData.currency,this.priceParams.modelPath,e),this.externalFinanceCalcPromise.done(a.bind(this.externalFinanceCalculatorDone,this),d).fail(a.bind(this.externalFinanceCalculatorFail,this)).always(a.bind(this.externalFinanceCalculatorAlways,this,f))))},l.prototype.financeCalculatorDone=function(){this.options.modal.open()},l.prototype.financeCalculatorAlways=function(a){a.removeClass(m.classes.loading),delete this.financeCalculatorPromise},l.prototype.onPriceChange=function(a,b){this.updatePriceOnChangeUi(b)},l.prototype.rejectPriceRequestPromise=function(){var a=this.priceRequestPromise;a&&(delete this.priceRequestPromise,a.reject())},l.prototype.resolvePriceRequestPromise=function(){var a=this.priceRequestPromise;a&&(delete this.priceRequestPromise,a.resolve())},l.prototype.setPriceItem=function(a){return this.options.priceItem=a,this},l.prototype.setIsUserSelectedPriceGroupWarningEnabled=function(a){return this.options.isUserSelectedPriceGroupWarningEnabled=a,this},l.prototype.updatePriceOnChangeUi=function(a){var b=a&&a.getMonthlyPayment(),c=a&&a.getShortOfferBody(),d=a&&a.currency;this.getIsFinancePrice()&&(this.options.$el.find(m.selectors.price).text(this.options.numberFormat.asCurrency(b,d,this.options.HELIOS.config.common.locale)),this.options.$el.find(m.selectors.priceLabel).text(c),this.priceData[k.PRICE_KEYS.HEADING_ONE]=a.getDetailedOfferH1(),this.priceData[k.PRICE_KEYS.HEADING_TWO]=a.getDetailedOfferH2(),this.priceData[k.PRICE_KEYS.TEXT]=a.getDetailedOfferText(),this.priceData[k.PRICE_KEYS.LEGAL_TWO]=a.getDetailedOfferLegalText()),this.saveFinancialOffer(a)},l.prototype.getPriceCode=function(){var a,b=this.getPriceItem();return b&&(a=b.getPriceCode()),a},l.prototype.getPriceLabel=function(){var a,b;return this.getIsFinancePrice()?b=this.priceData[k.PRICE_KEYS.LABEL]:(a=this.getPriceCodeObject(),a&&(b=a.getLabel()),b||(b=this.options.heliosAppContext.getPriceLabel())),b},l.prototype.getPriceDescription=function(){var a,b;return this.getIsFinancePrice()?b=this.priceData[k.PRICE_KEYS.LEGAL_ONE]:this.options.isPriceDescriptionVisible&&((b=this.options.priceDescription)||(a=this.getPriceCodeObject())&&(b=a.getDescription())),b},l.prototype.resetPriceInformation=function(){this.options.priceDescription=this.options.hasDescriptionOverrideCondition?this.options.dataPriceDescription:"",this.options.priceDisclaimer=this.options.hasDisclaimerOverrideCondition?this.options.dataPriceDisclaimer:""},l.prototype.getPriceDisclaimer=function(){var a,b=this.options.priceDisclaimer;return b||(a=this.getPriceCodeObject())&&(b=a.getDisclaimer()),b},l.prototype.onPriceFail=function(){this.options.$el.removeClass(m.classes.loading),this.rejectPriceRequestPromise()},l.prototype.getIsFinancePrice=function(){var a,b=this.getPriceItem();return b&&(a=b.isBestMonthlyPrice()||b.isFinancePrice()||b.isLeasePrice()),a},l.prototype.onPriceCodeChange=function(){this.getPriceCode()||this.hide()},l.prototype.show=function(){this.options.$el.removeClass(m.classes.hidden)},l.prototype.createFinanceCalculatorModal=function(){a.isUndefined(this.options.modal)&&(this.options.modal=new g({clearOnClose:!0,customClass:this.settings.classes.financialSimulator}))},l.prototype.initFinanceCalculatorModal=function(){this.createFinanceCalculatorModal()},l.prototype.saveFinancialOffer=function(a){var b=a.getParams();i.saveItem("lastVisitedVehicle",b)},l.prototype.getExternalFinanceCalculatorLink=function(a,b,c,d,e,f,g){return this.options.financeManager.apigeeExternalCalculatorRequest(a,b,c,d,e,f,g)},l.prototype.externalFinanceCalculatorDone=function(b){this.newWindow=this.options.window.open("","_blank"),a.isUndefined(this.newWindow)||(this.newWindow.location=b.url)},l.prototype.externalFinanceCalculatorAlways=function(a){a.removeClass(m.classes.loading),delete this.externalFinanceCalcPromise},l.prototype.externalFinanceCalculatorFail=function(){var a=new g;a.setAllContent({content:this.options.heliosAppContext.getExternalCalculatorErrorMessage()}).then(function(){return a.open()})},l.prototype.externalFinanceGetStorageValues=function(){this.profileData=i.loadItem(n),a.isNull(this.profileData)||(this.location=this.profileData.storageData.location,this.postalCode=this.profileData.storageData.postalCode)},l.prototype.getUserLocation=function(){return this.location},l.prototype.getUserPostalCode=function(){return this.postalCode},l.prototype.getModelCode=function(){return this.options.modelCode},l.prototype.getModelVersion=function(){return this.options.modelVersion},l.prototype.getModelGrade=function(){return this.options.modelGrade},l}),define("c_184B_Item",["c_039_0","c_184B_PriceItem","logger","priceItem","pricingConstants","underscore"],function(a,b,c,d,e,f){"use strict";var g,h={hidden:"hidden"},i={priceWarning:"priceManager.priceWarning",click:"click"},j={priceItem:".price-item",viewChangePriceGroupDialogueButton:".change-price-group",viewPriceWarningButton:".warning"},k=new c({prefix:"C_184B_Item"});return g=function(a){if(this.options=a||{},this.isPriceDisabled())return!1;this.initPriceItems(),this.initiatePriceRequest(),this.bindEvents(),this.updateChangePriceGroupButtonVisibility()},g.prototype.bindEvents=function(){this.options.$el.on(i.click,j.viewChangePriceGroupDialogueButton,f.bind(this.onViewChangePriceGroupDialogueButton,this)),this.options.$el.on(i.click,j.viewPriceWarningButton,f.bind(f.partial(this.triggerPriceWarningEvent,!0),this))},g.prototype.createPriceItem=function(a){var c;switch(a){case e.PRICE_ITEM_ROLES.PRIMARY:c=0;break;case e.PRICE_ITEM_ROLES.SECONDARY:c=1}return new b({$el:this.options.$el.find(j.priceItem).eq(c),modelCode:this.getModelCode(),modelPath:this.getModelPath(),modelGrade:this.getModelGrade(),modelVersion:this.getModelVersion(),priceCodes:this.options.priceCodes,isPriceDescriptionVisible:this.isPriceDescriptionVisible(a),isPriceDisclaimerVisible:this.isPriceDisclaimerVisible(a),hasDescriptionOverrideCondition:this.getDescriptionOverrideCondition(),hasDisclaimerOverrideCondition:this.getDisclaimerOverrideCondition(),priceDescription:a===e.PRICE_ITEM_ROLES.PRIMARY?this.getPriceDescription():"",priceDisclaimer:a===e.PRICE_ITEM_ROLES.PRIMARY?this.getPriceDisclaimer():"",dataPriceDescription:this.getPriceDescription(),dataPriceDisclaimer:this.getPriceDisclaimer(),priceManager:this.options.priceManager,financeManager:this.options.financeManager,numberFormat:this.options.numberFormat,HELIOS:this.options.HELIOS,window:this.options.window,heliosAppContext:this.options.heliosAppContext,vehicleBrand:this.getVehicleBrand(),vehicleElectricModelKey:this.getVehicleElectricModelKey(),vehicleFiscalHorsepower:this.getVehicleFiscalHorsepower(),vehicleFuelType:this.getVehicleFuelType(),vehicleModelCode:this.getVehicleModelCode(),vehicleModelName:this.getVehicleModelName(),vehicleModelSemiClair:this.getVehicleModelSemiClair(),isPriceSymbolEnabledForModel:this.getPriceSymbolEnabledForModel(),startingPriceSymbol:this.getStartingPriceSymbol(),vehicleSeg:this.getVehicleSeg(),vehicleType:this.getVehicleType(),vehicleVersionCode:this.getVehicleVersionCode(),vehicleVersionName:this.getVehicleVersionName(),priceIncludesTax:this.getPriceIncludesTax()})},g.prototype.getDefaultPriceCode=function(){return this.options.$el.data("vehiclePriceCode")},g.prototype.getDefaultPriceCodeItems=function(){return this._defaultPriceCodeItems||(this._defaultPriceCodeItems={primary:new d({priceCode:this.getDefaultPriceCode(),representedAs:e.REPRESENTED_AS.FULL_PRICE,showCalculatorLink:!1})})},g.prototype.getDefaultPriceGroup=function(){return this.options.defaultPriceGroup},g.prototype.getDefaultPriceGroupItems=function(){var a=this.getDefaultPriceGroup(),b={};return a&&(b.primary=a.getPrimaryPriceItem(),b.secondary=a.getSecondaryPriceItem()),b},g.prototype.getIsPriceGroupSwitchingEnabled=function(){return!(!this.options.heliosAppContext||!this.options.heliosAppContext.isPriceGroupSwitchingEnabled())},g.prototype.getUserSelectedPriceGroup=function(){return this.options.selectedPriceGroup},g.prototype.getUserSelectedPriceGroupItems=function(){var a={},b=this.getUserSelectedPriceGroup();return b&&(a.primary=b.getPrimaryPriceItem(),a.secondary=b.getSecondaryPriceItem()),a},g.prototype.initiatePriceRequest=function(){this.children.primary.setIsUserSelectedPriceGroupWarningEnabled(!1),this.children.secondary.setIsUserSelectedPriceGroupWarningEnabled(!1),this.isUserSelectedPriceGroupAvailable()?this.requestUserSelectedPriceGroupPrices():this.requestDefaultPriceGroupPrices()},g.prototype.initPriceItems=function(){this.options.$el?this.children={primary:this.createPriceItem(e.PRICE_ITEM_ROLES.PRIMARY),secondary:this.createPriceItem(e.PRICE_ITEM_ROLES.SECONDARY)}:k.warn("No options.$el")},g.prototype.triggerPriceWarningEvent=function(a){$("body").trigger(i.priceWarning,a)},g.prototype.isPriceDisabled=function(){return this.options.$el.data("priceDisabled")},g.prototype.isPriceDescriptionVisible=function(a){var b,c,d=!0;return this.getPriceDescription()&&a===e.PRICE_ITEM_ROLES.SECONDARY&&(b=this.getPrimaryPriceItem(),c=this.getSecondaryPriceItem(),this.isPriceGroupAsFullPrice(b,c)&&(d=!this.getDescriptionOverrideCondition()||!1)),d},g.prototype.isPriceDisclaimerVisible=function(a){var b,c,d=!0;return this.getPriceDisclaimer()&&a===e.PRICE_ITEM_ROLES.SECONDARY&&(b=this.getPrimaryPriceItem(),c=this.getSecondaryPriceItem(),this.isPriceGroupAsFullPrice(b,c)&&(d=!this.getDisclaimerOverrideCondition()||!1)),d},g.prototype.isPriceGroupAsFullPrice=function(a,b){return a&&a.getRepresentedAs()===e.REPRESENTED_AS.FULL_PRICE&&b&&!f.isEmpty(b)&&b.getRepresentedAs()===e.REPRESENTED_AS.FULL_PRICE},g.prototype.getPrimaryPriceItem=function(){return f.isUndefined(this.options.selectedPriceGroup)?this.options.defaultPriceGroup.getPrimaryPriceItem():this.options.selectedPriceGroup.getPrimaryPriceItem()},g.prototype.getSecondaryPriceItem=function(){return this.options.selectedPriceGroup?this.options.selectedPriceGroup.getSecondaryPriceItem():this.options.defaultPriceGroup.getSecondaryPriceItem()},g.prototype.getPriceIncludesTax=function(){return this.options.$el.data("includesTax")},g.prototype.getModelCode=function(){return this.options.$el.data("modelCode")},g.prototype.getModelPath=function(){return this.options.$el.data("modelPath")},g.prototype.getModelGrade=function(){return this.options.$el.data("modelGrade")},g.prototype.getModelVersion=function(){return this.options.$el.data("modelVersion")},g.prototype.getPriceDescription=function(){return this.options.$el.data("priceDescription")},g.prototype.getPriceDisclaimer=function(){return this.options.$el.data("priceDisclaimer")},g.prototype.getVehicleBrand=function(){return this.options.$el.data("vehicleBrand")},g.prototype.getVehicleElectricModelKey=function(){return this.options.$el.data("vehicleElectricModelKey")},g.prototype.getVehicleFiscalHorsepower=function(){return this.options.$el.data("vehicleFiscalHorsepower")},g.prototype.getVehicleFuelType=function(){return this.options.$el.data("vehicleFuelType")},g.prototype.getVehicleModelCode=function(){return this.options.$el.data("vehicleModelCode")},g.prototype.getVehicleModelName=function(){return this.options.$el.data("vehicleModelName")},g.prototype.getVehicleModelSemiClair=function(){return this.options.$el.data("vehicleModelSemiClair")},g.prototype.getPriceSymbolEnabledForModel=function(){return this.options.$el.data("showStartingPrice")},g.prototype.getStartingPriceSymbol=function(){return this.options.$el.data("showStartingPriceSymbol")},g.prototype.getVehicleSeg=function(){return this.options.$el.data("vehicleSeg")},g.prototype.getVehicleType=function(){return this.options.$el.data("vehicleType")},g.prototype.getVehicleVersionCode=function(){return this.options.$el.data("vehicleVersionCode")},g.prototype.getVehicleVersionName=function(){return this.options.$el.data("vehicleVersionName")},g.prototype.getDescriptionOverrideCondition=function(){return!!this.options.$el.data("hasDescriptionOverrideCondition")},g.prototype.getDisclaimerOverrideCondition=function(){return!!this.options.$el.data("hasDisclaimerOverrideCondition")},g.prototype.isUserSelectedPriceGroupAvailable=function(){return!f.isUndefined(this.options.selectedPriceGroup)},g.prototype.onDefaultPriceCodePrimaryPriceDone=function(){k.debug("Default price code price request succeeded ("+this.getModelCode()+")"),this.children.primary.show()},g.prototype.onDefaultPriceCodePrimaryPriceFail=function(){k.warn("Default price code price request failed ("+this.getModelCode()+")"),this.children.primary.hide()},g.prototype.onDefaultPriceGroupPrimaryPriceDone=function(){k.debug("Default price group primary price request succeeded ("+this.getModelCode()+")"),this.children.primary.show()},g.prototype.onDefaultPriceGroupPrimaryPriceFail=function(){k.warn("Default price group primary price request failed ("+this.getModelCode()+")"),this.secondaryPriceRequestPromise&&this.secondaryPriceRequestPromise.reject("Primary price request failed."),this.requestDefaultPriceCodePrices()},g.prototype.onDefaultPriceGroupSecondaryPriceDone=function(){var a,b,c,d;k.debug("Default price group secondary price request succeeded ("+this.getModelCode()+")"),this.primaryPriceRequestPromise&&(a=this.children.primary.getPriceRepresentedAs(),b=this.children.primary.getPriceCode(),c=this.children.secondary.getPriceRepresentedAs(),d=this.children.secondary.getPriceCode(),this.toggleSecondaryPriceOnChangePriceGroup(a,c,b,d))},g.prototype.onDefaultPriceGroupSecondaryPriceFail=function(){k.warn("Default price group secondary price request failed ("+this.getModelCode()+")"),this.children.secondary.hide()},g.prototype.onUserSelectedPriceGroupPrimaryPriceDone=function(){k.debug("User selected price group primary price request succeeded ("+this.getModelCode()+")"),this.children.primary.show()},g.prototype.onUserSelectedPriceGroupPrimaryPriceFail=function(){k.warn("User selected price group primary price request failed ("+this.getModelCode()+")"),this.secondaryPriceRequestPromise&&this.secondaryPriceRequestPromise.reject("Primary price request failed."),this.triggerPriceWarningEvent(),this.children.primary.setIsUserSelectedPriceGroupWarningEnabled(!0),this.children.secondary.setIsUserSelectedPriceGroupWarningEnabled(!0),this.requestDefaultPriceGroupPrices()},g.prototype.onUserSelectedPriceGroupSecondaryPriceDone=function(){var a,b,c,d;k.debug("User selected price group secondary price request succeeded ("+this.getModelCode()+")"),this.primaryPriceRequestPromise&&this.primaryPriceRequestPromise.done(f.bind(function(){a=this.children.primary.getPriceRepresentedAs(),b=this.children.primary.getPriceCode(),c=this.children.secondary.getPriceRepresentedAs(),d=this.children.secondary.getPriceCode(),this.toggleSecondaryPriceOnChangePriceGroup(a,c,b,d)},this))},g.prototype.onUserSelectedPriceGroupSecondaryPriceFail=function(){k.warn("User selected price group secondary price request failed ("+this.getModelCode()+")"),this.children.secondary.hide()},g.prototype.toggleSecondaryPriceOnChangePriceGroup=function(a,b,c,d){a!==b||c!==d?this.children.secondary.show():this.children.secondary.hide()},g.prototype.onViewChangePriceGroupDialogueButton=function(){a.load()},g.prototype.requestPrices=function(a){a.priceItems&&(a.priceItems.primary&&(this.children.primary.setPriceItem(a.priceItems.primary),this.primaryPriceRequestPromise=this.children.primary.requestPrice(),this.children.primary.options.primaryPrice=!0,f.isFunction(a.onPrimaryPriceDone)&&this.primaryPriceRequestPromise.done(f.bind(a.onPrimaryPriceDone,this)),f.isFunction(a.onPrimaryPriceFail)&&this.primaryPriceRequestPromise.fail(f.bind(a.onPrimaryPriceFail,this))),a.priceItems.secondary&&!f.isEmpty(a.priceItems.secondary)?(this.children.secondary.setPriceItem(a.priceItems.secondary),this.secondaryPriceRequestPromise=this.children.secondary.requestPrice(),f.isFunction(a.onSecondaryPriceDone)&&this.secondaryPriceRequestPromise.done(f.bind(a.onSecondaryPriceDone,this)),f.isFunction(a.onSecondaryPriceFail)&&this.secondaryPriceRequestPromise.fail(f.bind(a.onSecondaryPriceFail,this))):this.children.secondary.hide())},g.prototype.requestDefaultPriceCodePrices=function(){var a=this.getDefaultPriceCodeItems();k.debug("Requesting prices for default price code "+JSON.stringify(a)+" ("+this.getModelCode()+")"),this.requestPrices({onPrimaryPriceDone:this.onDefaultPriceCodePrimaryPriceDone,onPrimaryPriceFail:this.onDefaultPriceCodePrimaryPriceFail,priceItems:a})},g.prototype.requestDefaultPriceGroupPrices=function(){var a=this.getDefaultPriceGroupItems();k.debug("Requesting prices for default price group "+JSON.stringify(a)+" ("+this.getModelCode()+")"),this.requestPrices({onPrimaryPriceDone:this.onDefaultPriceGroupPrimaryPriceDone,onPrimaryPriceFail:this.onDefaultPriceGroupPrimaryPriceFail,onSecondaryPriceDone:this.onDefaultPriceGroupSecondaryPriceDone,onSecondaryPriceFail:this.onDefaultPriceGroupSecondaryPriceFail,priceItems:a})},g.prototype.requestUserSelectedPriceGroupPrices=function(){var a=this.getUserSelectedPriceGroupItems();k.debug("Requesting prices for user selected price group "+JSON.stringify(a)+" ("+this.getModelCode()+")"),this.requestPrices({onPrimaryPriceDone:this.onUserSelectedPriceGroupPrimaryPriceDone,onPrimaryPriceFail:this.onUserSelectedPriceGroupPrimaryPriceFail,onSecondaryPriceDone:this.onUserSelectedPriceGroupSecondaryPriceDone,onSecondaryPriceFail:this.onUserSelectedPriceGroupSecondaryPriceFail,priceItems:a})},g.prototype.updateChangePriceGroupButtonVisibility=function(){var a=!!(this.options.heliosAppContext.getPriceGroups()&&this.options.heliosAppContext.getPriceGroups().count()>1);this.options.$el.find(j.viewChangePriceGroupDialogueButton).toggleClass(h.hidden,!a||!this.getIsPriceGroupSwitchingEnabled())},g}),define("hbars!/components/c_184B/html/c_184B_PriceDisabledTemplate",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n        <div class="price-description">',(e=c.priceDisabledDescription)?d=e.call(a,{hash:{},data:b}):(e=a&&a.priceDisabledDescription,d=typeof e===j?e.call(a,{hash:{},data:b}):e),(d||0===d)&&(f+=d),f+="</div>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="price-disabled">\n    <strong>',(h=c.priceDisabledLabel)?g=h.call(b,{hash:{},data:e}):(h=b&&b.priceDisabledLabel,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+"</strong>\n    ",g=c.if.call(b,b&&b.priceDisabledDescription,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(g||0===g)&&(i+=g),i+="\n</div>\n"})}),define("c_184B",["jquery","c_039_0","c_184B_Item","hbars!/components/c_184B/html/c_184B_PriceDisabledTemplate","objectFactory","logger","underscore"],function(a,b,c,d,e,f,g){"use strict";function h(){o.window&&!q&&(a(o.window.document).on(b.getPriceGroupChangeEventName(),m),q=!0)}function i(a,b){var c=b?b.priceDisabledLabel:a.data(o.dataAttributes.priceDisabledLabel),e=b?b.priceDisabledDescription:a.data(o.dataAttributes.priceDisabledDescription),f=d({priceDisabledLabel:c,priceDisabledDescription:e});a.html(f),r.warn("Price is disabled, rendering disabled template!")}function j(b){var d=[],f=l(o);return b.each(function(b,g){var h,j=a(g),k=j.data(o.dataAttributes.priceGroupName);!0===j.data(o.dataAttributes.priceDisabled)?i(j):(k&&o.heliosAppContext.getPriceGroups()&&(h=o.heliosAppContext.getPriceGroups().getByName(k)),d.push(e.getObject(c,{$el:j,defaultPriceGroup:h,financeManager:o.financeManager,heliosAppContext:o.heliosAppContext,priceCodes:o.priceCodes,priceManager:o.priceManager,numberFormat:o.numberFormat,HELIOS:o.HELIOS,window:o.window,selectedPriceGroup:f})))}),d}function k(b){var c,d;if(o=a.extend({},p,b),c=b.$el?b.$el.find(o.selectors.root):a(o.selectors.root),!c.length)return!1;d=j(c),n?n.push.apply(n,d):n=d,h()}function l(){return o.heliosAppContext.getUserSelectedPriceGroup()}function m(){var a=l();g.each(n,function(b){b.options.selectedPriceGroup=a,b.initiatePriceRequest()})}var n,o,p={dataAttributes:{priceGroupName:"price-group-name",priceDisabled:"priceDisabled",priceDisabledDescription:"priceDisabledDescription",priceDisabledLabel:"priceDisabledLabel"},selectors:{root:".c_184B"}},q=!1,r=new f({prefix:"C_184B"});return{getSelectedPriceGroup:l,init:k}}),define("c_157",["jquery","underscore","modal","storageManager","handlebars","logger","numberFormat","c_133"],function(a,b,c,d,f,g,h,i){"use strict";function j(b){o=a.extend({},q,b),n=a(o.selectors.root),n.length&&(o.manualPriceFormatting=n.parents(o.selectors.universalPrice).data("manualPriceFormatting"),p=new h({HELIOS:o.HELIOS}),m=new g({prefix:"C157"}),window.Handlebars||(window.Handlebars=f),k(),n.each(function(b){a(this).attr("id","financial-offer-"+b).data("c_157-index-position",b)}))}function k(){var b=a("body"),c=a("html");a(document).on(o.events.simulatorClick,function(){r=!0}),b.on("modal.open",function(a,b){b.$closeButton.focus(),c.css({height:"100%",overflow:"hidden"})}),b.on("modal.close",function(b,d){var e=a("."+q.classes.classOfferTooltipOpen).first();1===e.size()&&(e.removeClass(q.classes.classOfferTooltipOpen),a(".tooltip:eq(0)",e).focus(),c.css({height:"100%",overflow:"hidden"})),c.css({height:"auto",overflow:"auto"})})}function l(a,c,d){if(!(this instanceof l))return new l(a,c);this.uiConstants={},this.defaults={classes:{financialOfferTplClass:"financial-offer-tpl",loadingClass:"loading",classTooltipIcon:"tooltip",classModalContent:"modal-content",classFinancialOffer:"financial-offer",classError:"error"},selectors:{selectorTooltipHitArea:".price .label span",financialOfferContainer:".financial-offer-container",price:".price .value"},offer:{enableSimulator:!1,displayError:!1},RCIProxy:{proxyAvailable:!1}},this.$container=a,this.options=c||{},this.settings=b.extend(this.defaults,this.options),this.initSettings=o||{},this.offer=null,this.RCIProxyInstance=null,this.modal=null,this.settings.offer=b.extend(this.settings.offer,this.getSettingsFromContainer()),this.$container.on("click",".tooltip",b.bind(function(){this.$container.addClass(q.classes.classOfferTooltipOpen)},this)),this.$container.on(o.events.priceUpdated,b.bind(function(a,b){this.updatePrice(b)},this)),this.isRCIProxyAvailable()?this.calculate():this.requestRCIProxyAndCalculate(this.$container)}var m,n,o,p,q={testmode:!1,selectors:{root:".c_157",simulator:".c_133",universalPrice:".c_184",priceLabel:".financial-offer .label span",priceText:".financial-offer .value span",modalContent:".c_157-modal-content"},classes:{loading:"loading",classOfferTooltipOpen:"offer-tooltip-open"},events:{simulatorClick:"simulatorClick",priceUpdated:"prices.finance.updated"}},r=!1;return l.prototype.isRCIProxyAvailable=function(){return window.RCIProxy?this.settings.RCIProxy.proxyAvailable=!0:this.settings.RCIProxy.proxyAvailable=!1,this.settings.RCIProxy.proxyAvailable},l.prototype.requestRCIProxyAndCalculate=function(){var c;c=this.$container.data("financialOfferScriptUrl"),a.ajax({url:c,cache:!0,dataType:"script"}).done(b.bind(function(){this.settings.RCIProxy.proxyAvailable=!0,this.calculate()},this)).fail(function(){m.warn("Unable to retrieve JS file from requestRCIProxyAndCalculate()")})},l.prototype.getSettingsFromContainer=function(){return{enableSimulator:this.$container.data("c_157-enable-simulator")}},l.prototype.setOption=function(a,b){this.options[a]=b},l.prototype.getOfferRequestData=function(){var a,c;switch(a={brand:this.$container.data("financialOfferBrand"),country:this.$container.data("financialOfferCountry"),Lang:this.$container.data("financialOfferLang"),Dealer:this.$container.data("financialOfferDealer"),Style:this.$container.data("financialOfferStyle"),VehicleBrand:this.$container.data("financialOfferVehicleBrand"),Type:this.$container.data("financialOfferType"),Seg:this.$container.data("financialOfferSeg"),Price:this.options.Price,Currency:this.options.CurrencyCalc,CurrencyCalc:this.options.CurrencyCalc,version:this.$container.data("financialOfferVersion"),model:this.$container.data("financialOfferModel"),PriceType:this.options.PriceType,idVehicle:this.$container.data("financialOfferIdVehicle"),modelSpecCode:this.$container.data("financialOfferModelSpecCode"),power:this.$container.data("financialOfferFiscalTax"),engine:this.$container.data("financialOfferFuelType"),modelC:this.$container.data("financialOfferModelName"),versionC:this.$container.data("financialOfferVersionName")},o.manualPriceFormatting&&(a.Currency=o.HELIOS.config.common.formatting.currency.symbol),a.country){case"in":c=this.getCityStateParams(),b.isObject(c)&&!r&&(a=b.extend({},a,c))}return a},l.prototype.getCityStateParams=function(){var a,c,e={City:null,State:null};return d&&(d.init(),a=d.loadItem("PreferredDealerCity"),a&&(e.city=a),(c=d.loadItem("PreferredDealerState"))&&(e.state=c)),b.isString(e.city)||b.isString(e.state)||(e=null),e},l.prototype.handleProxyError=function(a){a&&m.warn(a.message),this.$container.removeClass(this.settings.classes.loadingClass).addClass(this.settings.classes.classError)},l.prototype.calculate=function(){var a=this.getOfferRequestData();if(this.RCIProxyInstance)this.RCIProxyInstance.setProxyParams(a),this.RCIProxyInstance.calculateFinancialOffer();else{try{this.RCIProxyInstance=new RCIProxy(a)}catch(c){this.handleProxyError(c),m.warn("Unable to instantiate RCIProxy")}this.RCIProxyInstance.addListener("proxyReady",b.bind(function(){if(this.RCIProxyInstance)try{r||this.RCIProxyInstance.calculateFinancialOffer()}catch(c){this.handleProxyError(c),m.warn("Exception in RCIProxyInstance.calculateFinancialOffer()")}},this)),this.RCIProxyInstance.addListener("financialOfferReloaded",b.bind(function(){r||this.render(),b.isFunction(this.options.onReloaded)&&this.options.onReloaded()},this))}},l.prototype.setupModal=function(){var a,b,d=this.$container.attr("id");a="#"+d+" "+this.settings.selectors.selectorTooltipHitArea+", #"+d+" ."+this.settings.classes.classTooltipIcon,b="#"+d+" ."+this.settings.classes.classModalContent+":eq(0)",this.modal&&(this.modal.remove(),this.modal=null),this.modal=new c({openSelector:a,target:b})},l.prototype.render=function(){var b,c,d,g,h;try{this.offer=this.RCIProxyInstance.getFinancialOffer()}catch(e){this.handleProxyError(e),m.warn("Exception in RCIProxyInstance.getFinancialOffer()")}return this.removeErrors(),!!this.offer&&(parseInt(this.offer.getErrorCode(),10)>0||!this.isValidOfferToRender()?(this.$container.removeClass(this.settings.classes.loadingClass),void m.warn(this.offer.getErrorCode()+" - "+this.offer.getErrorDisplayMessage())):(b=this.getTemplateDataFromProxyOffer(),c=this.$container.find("."+this.settings.classes.financialOfferTplClass).first(),d=c.html(),h=a.extend({},!0,b,{modalId:this.$container.data("c_157-index-position")}),g=f.compile(d)(h),this.$container.find(this.settings.selectors.financialOfferContainer).remove(),this.$container.append(g),this.setupModal(),!0))},l.prototype.updatePrice=function(a){var b,c=this.getFormattedPrice(a.getParams().monthlyPayment);this.$container.find(o.selectors.priceLabel).text(a.getShortOfferBody()),this.$container.find(o.selectors.priceText).text(c),this.hasValidTooltip()&&(b="<h1>"+a.getDetailedOfferH1()+"</h1><h2>"+a.getDetailedOfferH2()+"</h2><p>"+a.getDetailedOfferText()+"</p><p>"+a.getDetailedOfferLegalText()+"</p>",this.$container.find(o.selectors.modalContent).html(b))},l.prototype.isValidOfferToRender=function(){var a=!0;return this.offer?(""+this.offer.getShortOfferBody()).length>70&&(m.warn("Invalid offer - offer body text too long"),a=!1):(m.warn("Invalid offer - no payment or currency"),a=!1),a},l.prototype.hasValidTooltip=function(){return!!this.offer.getDetailedOfferH1()||(m.warn("Invalid tooltip - No H1"),!1)},l.prototype.getTemplateDataFromProxyOffer=function(a){var c={error:{ErrorCode:this.offer.getErrorCode(),ErrorMessage:this.offer.getErrorDisplayMessage()},offer:{price:this.getFormattedPrice(a),label:this.offer.getShortOfferBody(),legal:this.offer.getTeachingSentence(),simulatorLabel:this.offer.getShortOfferSimulatorLink()}};return this.hasValidTooltip()&&(c=b.extend(c,{tooltip:{h1:this.offer.getDetailedOfferH1(),h2:this.offer.getDetailedOfferH2(),
text:this.offer.getDetailedOfferText(),legal:this.offer.getDetailedOfferLegalText()}})),c},l.prototype.getFormattedPrice=function(a){var b=a||this.offer.getParams().monthlyPayment;return b=parseFloat(b),p.asCurrency(b,this.options.CurrencyCalc,o.HELIOS.config.common.locale,o.manualPriceFormatting)},l.prototype.destroy=function(){a("."+this.settings.classes.classFinancialOffer,this.$container).remove(),this.modal&&(this.modal.remove(),this.modal=null),this.offer&&(this.offer=null)},l.prototype.removeErrors=function(){a("."+this.settings.classes.classError,this.$container).remove()},{init:j,FinancialOffer:l}}),define("c_133B",["jquery","underscore","remoteServices","storageManager","modal"],function(a,b,c,d,e){"use strict";function f(b){if(o=a.extend({},n,b),h=a(o.selectors.root),i=a(o.selectors.button),!h.length)return!1;l&&l.remove(),l=new e({clearOnClose:!1,customClass:o.selectors.financialSimulator})}function g(a,c){if(!(this instanceof g))return new g;this.defaults={},this.options=c||{},this.settings=b.extend(this.defaults,this.options),this.$element=a,this.$elementData=a.data(),this.modelPath=a.closest(o.selectors.priceItem).data(o.data.modelPath),this.$element.data(o.data.extCalcInstance,this),m="<h1>"+this.$elementData.errorTitle+"</h1><h3>"+this.$elementData.errorDescription+"</h3>",this.bindEvents()}var h,i,j,k,l,m,n={selectors:{root:".c_133B",button:"button",priceItem:".c_184",financialSimulator:"financial-simulator",errorHandle:"error-handle"},classes:{loading:"loading"},data:{externalCalculatorUrl:"data-simulator-externalcalculator-url",priceCode:"priceCode",modelCode:"modelCode",modelPath:"modelPath",extCalcInstance:"extCalcInstance"},events:{click:"click"}},o=null;return g.prototype.getStorageValues=function(){this.priceBand=d.loadItem("priceBand"),this.profileData=d.loadItem("ProfileDataSession"),b.isNull(this.priceBand)?this.priceCode=a(o.selectors.priceItem).data(o.data.priceCode):this.priceCode=this.priceBand.priceCode,b.isNull(this.profileData)||(this.location=this.profileData.storageData.location,this.postalCode=this.profileData.storageData.postalCode)},g.prototype.requestExternalCalculatorLink=function(){k=this.apigeeExternalCalculatorRequest(),this.$element.find(i).addClass(o.classes.loading),k.then(b.bind(function(a){j=a.url,this.$element.attr(o.data.externalCalculatorUrl,j)},this)).fail(b.bind(function(){this.$element.addClass(o.selectors.errorHandle)},this)).always(b.bind(function(){this.$element.find(i).removeClass(o.classes.loading)},this))},g.prototype.apigeeExternalCalculatorRequest=function(){var a={gradeId:this.getModelGrade(),versionId:this.getModelVersion()};return c.getExternalFinanceLink(this.getModelCode(),this.priceCode,this.location,this.postalCode,this.settings.currencyCalc,this.modelPath,a)},g.prototype.bindEvents=function(){this.$element.on(o.events.click,b.bind(function(){this.openExternalCalculator()},this))},g.prototype.openExternalCalculator=function(){this.newWindow=window.open("","_blank"),this.getStorageValues(),this.requestExternalCalculatorLink(),this.trackExternalFinanceCalculator(),this.$element.hasClass(o.selectors.errorHandle)?l.setContent(m).then(function(){return l.open()}):k.done(b.bind(function(){this.newWindow.location=j},this))},g.prototype.getModelCode=function(){return this.$element.closest(o.selectors.priceItem).data(o.data.modelCode)},g.prototype.getModelVersion=function(){return this.$element.closest(o.selectors.priceItem).data(o.data.modelVersion)},g.prototype.getModelGrade=function(){return this.$element.closest(o.selectors.priceItem).data(o.data.modelGrade)},g.prototype.trackExternalFinanceCalculator=function(){var a=o.HELIOS,b=a.adobe.tagging.vehicleCategory||"not found",c=a.adobe.tagging.vehicleId||"not found",d=o.analyticsManager,e=d.trackingVars.financeCalculator,f=d.getTrackingObjectProperties(e),g={};g[f.componentId]="C133B_Finance_It",g[f.vehicleCategory]=b,g[f.vehicleId]=c,g[f.financeCalculatorStep]="External Finance",d.track(e,g)},{init:f,ExternalFinanceCalculator:g}}),define("c_184",["jquery","logger","c_008","c_039_0","c_157","c_133","c_133B","remoteServices","numberFormat","disclaimers","underscore"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){o||m(v);var b,c=a||{};for(b in c)this[b]=c[b]}function m(b){var c,e,f,g;if(v=a.extend({},u,b),r=k.create(h),s=new i({HELIOS:v.HELIOS}),0===a(v.selectors.priceBandComponent).length&&a(v.selectors.priceBandChangeLink).addClass("hide"),o=a(v.selectors.root),!o.length)return!1;"rtl"===a("html").attr("dir")&&(q=!0),x.info("init"),g=a.deparam.fragment(),g.hasOwnProperty("priceCode")&&""!==g.priceCode&&(c=g.priceCode),p.initGenericInstances().then(function(){a.each(w,function(a,b){c?b.updatePricingDisplay(b,c,e,f):b.updatePricingDisplay(b,null,e,f)})}),d.onPriceGroupChange(function(b,c,d,e,f){c&&a.each(w,function(a,b){b.updatePricingDisplay(b,c,d,f)})}),a(document).on("click",v.selectors.root+" "+v.selectors.priceBandChangeLink,function(b){b.preventDefault(),d.load(a(this).closest(v.selectors.root).data(v.dataAttrs.forceDisplayType))}),a(v.selectors.subtext).on(v.events.defaultClick,function(a){var b=a.target;"A"===b.nodeName&&n(b)})}function n(b){var c=a(b),d=c.attr("href"),e=c.text(),f={componentId:"C184_Universal_Price",destination:d,buttonText:e,locationInPage:"universal price"};v.analyticsManager.tag(v.analyticsManager.trackingVars.genericClick,f)}var o,p,q,r,s,t=".c_184",u={selectors:{root:".c_184",financeCalculator:".c_133",externalFinanceCalculator:".c_133B",defaultOffer:".c_157",content:".content",msrp:".msrp",finance:".finance",fullPrice:".full-price",disclaimer:".disclaimer",tooltip:".c_008",callToAction:"a.cta",subtext:".subtext",hastooltip:".has-tooltip",window:window,priceBandComponent:".c_039-0",priceBandChangeLink:".price-band-change",hasTooltip:".has-tooltip",tooltipPanel:".tooltip-panel"},tags:{span:"span"},classes:{contingency:"contingency",show:"show",hide:"hide",loading:"loading",showFullPrice:"show-full-price",showFinance:"show-finance",tooltipHeading:"tooltip-heading",hidden:"hidden"},events:{priceSuccess:"priceSuccess"+t,priceError:"priceError"+t,priceTypeChange:"priceTypeChange",defaultClick:"click"},dataAttrs:{priceAlign:"currencySymbolAlignment",showDecimalZeroes:"showDecimalZeroes",thousandSymbol:"thousandSymbol",decimalSymbol:"decimalSymbol",forceDisplayType:"forceDisplayType",extCalcInstance:"extCalcInstance",priceVehicleDisabled:"priceVehicleDisabled"},displayType:{fullPrice:"msrp",finance:"finance",both:"both"},data:{modelName:"modelName"}},v=null,w=[],x=new b({prefix:"C184"});return p={initGenericInstances:function(){var b=[];return a.each(o,function(c,d){var e=a(d),f=a.Deferred();"true"!==e.data("defer")&&(w.push(new l({$element:e,dataPath:e.data("modelPath"),modelKey:e.data("modelCode")||!1,gradeKey:e.data("modelGrade")||!1,versionKey:e.data("modelVersion")||!1,extraInfoPathPrefix:e.data("extraInfoPathPrefix"),extraInfoPathSuffix:e.data("extraInfoPathSuffix"),priceCode:e.data("priceCode")||"default",priceType:a(v.selectors.defaultOffer).data("financial-offer-price-type")||"",displayType:e.data("displayType")||"msrp",manualPriceFormatting:e.data("manualPriceFormatting")})),f.resolve(),b.push(f))}),a.when.apply(void 0,b).promise()},displayResults:function(a,b){a.find("span"+v.selectors.fullPrice).find(v.tags.span).text(b),a.find(v.selectors.content).addClass(v.classes.show),a.find([v.selectors.disclaimer,v.selectors.fullPrice].join(", ")).toggle(!a.data(v.dataAttrs.priceVehicleDisabled))},displayExtraInfoResults:function(b,c){var d=b.find(u.selectors.tooltip),e=b.find(u.selectors.disclaimer);a.trim(c.disclaimer)?(b.find(".tooltip-panel").html(c.disclaimer),b.find("a.has-tooltip span").text(c.disclaimerLabel),b.data("tooltip-popup-disabled")?(d.hide(),e.text(c.disclaimerLabel).show()):(e.hide(),d.show())):b.find(v.selectors.disclaimer).text(c.disclaimerLabel),c.linkPath&&c.linkText?b.find(u.selectors.callToAction).text(c.linkText).attr("href",c.linkPath).show():b.find(u.selectors.callToAction).hide(),c.priceDescription?(c.priceDescription=c.priceDescription.replace("\n","").replace('"','"'),b.find(u.selectors.subtext).html(c.priceDescription)):b.find(u.selectors.subtext).hide()}},l.prototype.updatePricingDisplay=function(b,d,f,g){var h={$el:b.$element},i=b.$element.data(v.dataAttrs.forceDisplayType);d=d||b.priceCode,g=g||b.priceType,f=i||f||v.displayType.fullPrice,b.$element.addClass(v.classes.loading),b.$element.removeClass(v.classes.showFullPrice+" "+v.classes.showFinance),b.requestPrice(b.modelKey,b.gradeKey,b.versionKey,d,b.dataPath).then(function(d){var h,i,j,l,m=b.getFormattedPrice(d),n=b.$element.find(v.selectors.defaultOffer),o=b.$element.find(v.selectors.financeCalculator),q=b.$element.find(v.selectors.externalFinanceCalculator);if(b.showFinanceOffer=!1,b.showCalculator=!1,d.hasOwnProperty("currency")&&d.currency,a(document).trigger(v.events.priceSuccess,k.extend({},d,{$el:b.$element})),!d.price)return b.onComplete(),b.failContingency(),!1;f!==v.displayType.fullPrice&&f!==v.displayType.both&&0!==n.length||(p.displayResults(b.$element,m),d&&b.extraInfoPathPrefix&&b.extraInfoPathSuffix&&b.extraPricingInformation().then(function(d){p.displayExtraInfoResults(b.$element,d),i=b.$element.data(v.data.modelName),i&&!b.$element.find(v.selectors.tooltipHeading).length&&(j=b.$element.find(v.selectors.hasTooltip).text().trim(),l=a("<div/>"),l.addClass(v.classes.tooltipHeading+" "+v.classes.hidden).text(i+"-"+j),b.$element.find(v.selectors.tooltipPanel).append(l)),c.createTooltips(b.$element.find(v.selectors.hasTooltip),{analyticsManager:v.analyticsManager,tooltips:{tooltipContainer:!1}})}),b.$element.addClass(v.classes.showFullPrice),0===n.length&&b.onComplete()),f!==v.displayType.fullPrice&&f!==v.displayType.finance&&f!==v.displayType.both||!(n.length||o.length||q.length)||(b.showFinanceOffer=!0),b.showFinanceOffer&&""!==m?(n.length&&(h=n.data("offerInstance"),h?(h.setOption("CurrencyCalc",d.currency),h.setOption("Price",d.price),h.setOption("PriceType",g),h.calculate()):(h=new e.FinancialOffer(n,{CurrencyCalc:d.currency,Price:d.price,PriceType:g,onReloaded:function(){b.showFinanceOffer&&(b.$element.addClass(v.classes.showFinance),o=b.$element.find(v.selectors.financeCalculator),o.length&&(b.showCalculator=!0,b.initFinanceCalculator(o,{currencyCalc:d.currency,price:d.price,priceTax:g})),b.onComplete())}}),n.data("offerInstance",h))),!b.showCalculator&&o.length?(b.initFinanceCalculator(o,{currencyCalc:d.currency,price:d.price,priceTax:g}),b.$element.addClass(v.classes.showFinance),b.onComplete()):!b.showCalculator&&q.length&&(b.initExternalFinanceCalculator(q,{currencyCalc:d.currency}),b.$element.addClass(v.classes.showFinance),b.onComplete())):b.onComplete()},function(c){a(document).trigger(v.events.priceError,h),b.onComplete(),b.failContingency(),x.warn("Request call for the price failed: "+c)})},l.prototype.initFinanceCalculator=function(a,b){var c=a.data("calcInstance"),d={currencyCalc:b.currency,price:b.price,priceTax:b.priceTax};c?(c.updateSimulatorLinkData(d),c.updateSimulator()):(c=new f.FinanceCalculator(a,d),a.data("calcInstance",c))},l.prototype.initExternalFinanceCalculator=function(a,b){var c=a.data(v.dataAttrs.extCalcInstance);c||(c=new g.ExternalFinanceCalculator(a,b))},l.prototype.refreshPrice=function(){this.updatePricingDisplay(this)},l.prototype.requestPrice=function(b,c,d,e,f){var g,h=a.Deferred(),i=this;return e||x.warn("priceCode not detected! Pricing will not be correct."),d?g=r.getVersionPrice(b,f,c,d,e):c?g=r.getGradePrice(b,f,c,e):b?g=r.getModelPrice(b,f,e):x.warn("Not enough data values to fetch price!"),g?g.done(function(a){a?h.resolve(a):(x.warn("Price details not found."),h.reject())}).fail(function(a,b){x.warn("Ajax request failed. Status response: "+b),i.failContingency(),h.reject()}):h.reject(),h.promise()},l.prototype.extraPricingInformation=function(){var b,c=a.Deferred(),d=this;return b=d.extraInfoPathPrefix+d.extraInfoPathSuffix,a.ajax({url:b,dataType:"json"}).done(function(a){a?c.resolve(a):(x.warn("Extra pricing information details not found."),c.reject())}).fail(function(a,b){x.warn("AEM additional pricing information Ajax request failed. Status response: "+b),d.failContingency(),c.reject()}),c.promise()},l.prototype.onComplete=function(){this.$element.removeClass("loading"),j.renderDisclaimers(this.$element)},l.prototype.setTooltipPositionRtl=function(){var a=o.find(v.selectors.hastooltip).data("tooltip-at").replace("right","left");o.find(v.selectors.hastooltip).data("tooltip-at",a)},l.prototype.failContingency=function(){this.$element.find(v.selectors.root).addClass(v.classes.hide),this.$element.find("li."+v.classes.loading).removeClass(v.classes.loading)},l.prototype.getFormattedPrice=function(a){var b=a.currency||v.HELIOS.config.common.currencyCode;return s.asCurrency(a.price,b,v.HELIOS.config.common.locale,this.manualPriceFormatting)},{init:m,UniversalPricing:l}}),define("c_099_4",["underscore","jquery","handlebars","disclaimers"],function(a,b,c,d){"use strict";function e(a){if(N=b.extend({},M,a),v=b(N.selectors.root),!v.length)return!1;C=v.find(N.selectors.labelFilter),B=v.find(N.selectors.containerRadios),A=v.find(N.selectors.btnAccordion),w=v.find(N.selectors.radioFilter),x=v.find(N.selectors.btnFiltersToggle),y=v.find(N.selectors.filters),z=v.find(N.selectors.filtersWrapper),H=v.data(N.selectors.collapseOpen),I=v.data(N.selectors.collapseClose),D=v.find(N.selectors.filtersClose),K=v.data(N.selectors.model),J=v.data(N.selectors.errorTitle),F=v.data(N.attrs.serviceUrl),L=v.data(N.attrs.versionsOnly),G=v.find(N.selectors.versionOptionTemplate).filter(function(a,c){return 1===b(c).parent(v).length}).html(),O.progress(n),P.progress(o),f(),r(),g()}function f(){w.on(N.events.click,k),x.on(N.events.click,j),A.on(N.events.click,h),D.on(N.events.click,i)}function g(){x.hasClass(N.classes.active)?x.text(I):x.text(H)}function h(){var a=b(this),c=b(this).parent().find(B);B.not(c).removeClass(N.classes.active),A.not(a).removeClass(N.classes.active),a.toggleClass(N.classes.active),c.toggleClass(N.classes.active),a.hasClass(N.classes.active)&&t(this)}function i(){x.trigger(N.events.click)}function j(){var a=b(this);a.toggleClass(N.classes.active),z.slideToggle(),a.hasClass(N.classes.active)?(a.text(I),u(this)):a.text(H)}function k(){var a,c,d=b(this);a=d.parents(N.selectors.containerRadios),c=a.parent().find(N.selectors.btnAccordion),b("input",a).removeClass(N.classes.active),d.addClass(N.classes.active),a.removeClass(N.classes.active),c.removeClass(N.classes.active),r(),s(this),Q&&l()}function l(){var c,d,e,f="",g=b(N.selectors.filter,y);a.each(g,function(a){c=b(N.selectors.filterRadioActive,a),e=c.data(N.attrs.dataFilterValue),d=c.parents(N.selectors.filter).data(N.attrs.dataFilterType),f+="/"+d+"/"+e}),b.ajax({url:F+(f.length?f+".json":""),dataType:"json",success:m,error:q})}function m(c){var e,f,g=N.selectors,h=b(g.vehicleGenerator).find(g.gradeSelect),i=b(g.vehicleGenerator).find(g.versionSelect);b(g.vehicleGenerator).find(g.engineSelect);E=c,E.model.length?(e=h.val(),L?i.prop(N.attrs.disabled,!1):h.prop(N.attrs.disabled,!1),p(N.selectors.gradeSelect,c.model),e&&(f=a.findWhere(E.model,{key:e}),p(N.selectors.engineSelect,f&&f.engines)),[g.gradeSelect,g.versionSelect,g.engineSelect].forEach(function(a){var c=b(a+N.attrs.visible),d=!c.prop(N.attrs.selectedIndex),e=!c.find(N.attrs.optionSelected).length;!d&&e&&c.prop(N.attrs.selectedIndex,0).siblings(N.selectors.selectedValue).text(c.find(N.attrs.optionSelected).text())}),d.renderDisclaimers(v)):z.trigger(N.events.noDataFound)}function n(){var c,d=N.selectors,e=b(d.vehicleGenerator).find(N.selectors.gradeSelect).val();E&&(c=a.findWhere(E.model,{key:e}),p(N.selectors.engineSelect,c&&c.engines))}function o(){var a='[data-filter-value="'+N.data.allGrades+'"]',c=b(a),d=b(N.selectors.filterRadioActive);Q=!0,E=void 0,c.prop(N.attrs.checked,!0),d.not(c).removeClass(N.classes.active),c.addClass(N.classes.active),k()}function p(d,e){var f=c.compile(G),g=b(d,N.selectors.vehicleGenerator),h=g.val();a.isArray(e)&&(g.find(N.selectors.optionNotFirstChild).remove(),g.append(a.map(e,f)),g.val(h))}function q(){var a=N.selectors;b(a.vehicleGenerator).find(a.gradeSelect).prop(N.attrs.disabled,!0),b(a.vehicleGenerator).find(a.versionSelect).prop(N.attrs.disabled,!0),b(a.option,b([a.gradeSelect,a.versionSelect,a.engineSelect].join())).prop(N.attrs.disabled,!0)}function r(){var a=b(N.selectors.filter,y);a.each(function(c,d){var e,f,g;e=b(N.selectors.radioFilterChecked,b(d)),f=e.siblings(N.attrs.label).text(),g=e.closest(a).find(C),g.text(f)})}function s(a){var c,d,e,f=b(a),g=f.text(),h=N.attrs.search,i=b(N.selectors.filterVersionApplied);d=i.length>0?"":J,c=f.parents(N.selectors.filter).data(N.attrs.dataFilterType),e={componentId:R,searchFilter:c,searchFilterValue:g,searchType:N.data.specifications,searchResults:String(i.length),errorMessage:d},N.analyticsManager.tag(h,e)}function t(a){var c=b(a),d=c.siblings(N.selectors.filterName).text(),e=N.events.accordionExpansion,f={componentId:R,accordionText:d,accordionType:K};N.analyticsManager.tag(e,f)}function u(a){var c=b(a),d=c.text(),e=N.events.accordionExpansion,f={componentId:R,accordionText:d,accordionType:K};N.analyticsManager.tag(e,f)}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M={events:{click:"click",noDataFound:"noDataFound",accordionExpansion:"accordionExpansion"},classes:{selected:"selected",inactive:"inactive",active:"active",isGradeActive:"is-grade-active",isVersionActive:"is-version-active",counterFilter:"counter-filter"},selectors:{root:".c_099-4",option:"option",listGrades:".c_099-1",listVersions:".c_099-2-overview-version",sectionsVersion:".c_099-2-sections",radioFilter:".filter-radio",radioFilterActive:".filter-radio .active",btnFiltersToggle:".filters-toggle",filters:".filters",filter:".filter",filterVersionApplied:".c_099-2-overview-version.is-version-active",filterGradeApplied:".c_099-1.is-grade-active",filterName:".filter-name",radioFilterChecked:"input:radio:checked",filtersWrapper:".filters-wrapper",countTextLabel:".countText",filterText:"service-showing",countVersions:".accordion-header .counterVersions",errorTitle:"error-title",model:"service-model",collapseOpen:"collapse-open",collapseClose:"collapse-close",overviewVersion:".c_099-2-overview-version",versionSelector:".version-selector",engineOptions:".engine-select option",gradeSelect:".grade-select",engineSelect:".engine-select",versionSelect:".version-select",btnAccordion:".btn-accordion",containerRadios:".container-radios",labelFilter:".label-filter",filtersClose:".filters-close",filterRadioActive:".filter-radio.active",vehicleGenerator:".c_059 .vehicle-generator",optionFirstChild:"option:first-child",optionNotFirstChild:"option:not(:first)",versionOptionTemplate:".version-select-option",radioContainer:".custom-radio",selectedValue:".selectedValue"},attrs:{serviceUrl:"service-url",dataFilterType:"filterType",dataFilterValue:"filterValue",versionsOnly:"versions-only",dataGradeTitle:"gradeTitle",disabled:"disabled",selectedIndex:"selectedIndex",optionSelected:"option:selected",visible:":visible",checked:"checked",label:"label",search:"search"},data:{allGrades:"All",hideVersion:"hide",showVersion:"show",showAllVersions:"showAll",specifications:"Specifications"}},N=null,O=b.Deferred(),P=b.Deferred(),Q=!0,R="C99.4_Vehicle_Specifications_Filter";return{init:e,checkInitToggle:g,onClickBtnAccordion:h,onClickRadioFilter:k,onClickFiltersToggle:j,defaults:M,deferredEngine:O,deferredReset:P,filterReset:o}}),define("c_100",["jquery","modal","disclaimers","pictureFill","handlebars"],function(a,b,c,d,e){"use strict";function f(b){if(j=a.extend({},i,b),h=a(j.selectors.root),!h.length)return!1}function g(f){var g,h=new b({touchMoveEnabled:!0}),i=a(j.template);if(!i.length)return!1;g=e.compile(i.html(),{noEscape:!0}),h.clear().then(function(){h.setContent(g(f))}).then(function(){d(h.$content.get(0)),h.open(),c.renderDisclaimers(h.$content)})}var h,i={selectors:{root:".c_100"},template:"script[data-template=c_100]"},j=null;return{init:f,loadModal:g}}),define("c_059",["jquery","underscore","c_184B","handlebars","logger","customSelect","accordion","accordionItem","waypoints","disclaimers","c_184","c_099_4","numberFormat","c_100"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(a,c,d,e,f){var g="",h=ba.length,i=_.analyticsManager,j=i.trackingVars.vehicleCompare,k=i.getTrackingObjectProperties(j),l={};("undefined"!=typeof CQ&&CQ.WCM&&!CQ.WCM.isEditMode(!0)&&!CQ.WCM.isDesignMode(!0)||"undefined"==typeof CQ)&&(g=ba[h-1]?ba[h-1].vehicleModel||"":""),l[k.componentId]=ja,l[k.vehicleGrade]=a,l[k.vehicleGradeId]=c,l[k.vehicleVersion]=d,l[k.vehicleVersionId]=e,l[k.vehicleCompare]=g.toLowerCase(),l[k.vehicleGradeCompare]=b.pluck(ba,_.data.vehicleGradeReference).reverse().join(","),l[k.vehicleVersionCompare]=b.pluck(ba,_.data.vehicleVersionReference).reverse().join(","),l[k.numVehicles]=h,l[k.interactionType]=f,l[k.vehicleModel]=g,i.tag(j,l)}function p(c){var d,e=a(c.target).attr(_.attr.dataState),f=a(c.target),g=a.trim(f.text().toLowerCase()),h=_.analyticsManager,i=h.trackingVars.accordionExpansion,j=h.getTrackingObjectProperties(i),k=f.siblings(_.selectors.accordionPanel).find(_.selectors.packPriceValue),l=k.length,m=[],n={};e===_.attr.open&&(l&&(b.each(k,function(a){a.textContent!==_.operators.MIDDLE_DIVIDER&&a.textContent!==_.operators.DOUBLE_MIDDLE_DIVIDER&&a.textContent!==_.constants.NOT_AVAILABLE&&m.push(a.textContent)}),d=m.join(":")),n[j.componentId]=ja,n[j.accordionType]=l?_.constants.PACKS_TAB_LABEL:aa.$tabsActive,n[j.accordionText]=l?g+_.operators.MIDDLE_DIVIDER+d:g,h.track(i,n))}function q(b){var c=a(b.target),d=a.trim(c.text().toLowerCase()),e=_.analyticsManager,f=e.trackingVars.toggle,g=e.getTrackingObjectProperties(f),h={};h[g.componentId]=ja,h[g.toggleType]="Comparison-tool",h[g.toggleValue]="Next steps - "+d,e.track(f,h)}function r(b){var c=a(b),d=c.attr(_.attr.href)||"",e=c.text(),f=_.analyticsManager,g=f.trackingVars.genericClick,h=f.getTrackingObjectProperties(g),i={};i[h.componentId]=ja,i[h.destination]=d,i[h.locationInPage]="comparison-tool",i[h.buttonText]=e,f.track(g,i)}function s(a){var b,c;a=a||{};for(b in a)this[b]=a[b];ea?this.versionSelectBox=this.$element.find(_.selectors.vehicleVersionsSelectBox):(this.gradeSelectBox=this.$element.find(_.selectors.gradeSelectBox),this.versionSelectBox=this.$element.find(_.selectors.versionSelectBox)),c=this.$element.find(_.selectors.universalPrice),this.addVehicleBtn=this.$element.find(_.selectors.addVehicleBtn),this.bindEvents(),this.setVehicleImage(),this.setVehicleImageDisclaimer(),this.setVehicleTitle(),this.setSelectValues(),this.setTableData(),this.renderEmissionsDisclaimers(c.find(_.selectors.emissionsDisclaimers)),this.setVehiclePrice()}function t(a){c.init({$el:a,analyticsManager:_.analyticsManager,financeManager:_.financeManager,HELIOS:_.HELIOS,heliosAppContext:_.heliosAppContext,numberFormat:_.numberFormat,priceCodes:_.priceCodes,priceManager:_.priceManager,window:_.window})}function u(){S=0,z=y.find(_.selectors.comparisonHolder),G=y.find(_.selectors.compareStats),H=y.find(_.selectors.compareEmissions),I=y.find(_.selectors.efficiencyChart),J=y.find(_.selectors.equipStats),K=y.find(_.selectors.packsStats),B=y.find(_.selectors.vehicleGenerator),A=y.find(_.selectors.imagesPlaceholder),R=y.find(_.selectors.tooltipEnabled),B.find(_.selectors.vehicleVersionsSelectBox).length?(ea=!0,E=B.find(_.selectors.vehicleVersionsSelectBox)):(C=B.find(_.selectors.versionSelectBox),D=B.find(_.selectors.gradeSelectBox)),F=B.find(_.selectors.addVehicleBtn),T=y.find(_.selectors.vehicleTemplate).html(),U=y.find(_.selectors.versionOptionTemplate).html(),L=y.find(_.selectors.stickyNav),P=y.find(_.selectors.waypointActive),Q=a(_.selectors.dockedNav),V=G.find(_.tags.cell).first().prop(_.prop.outerHTML),W=J.find(_.tags.cell).first().prop(_.prop.outerHTML),M=y.find(_.selectors.nextSteps),N=y.find(_.selectors.selectionInfo),O=y.find(_.selectors.selectionCtas)}function v(b){return _=a.extend({},$,b),x=a("html").hasClass("ltie9"),y=a(_.selectors.root),!!y.length&&(!!(Z=_.HELIOS.components.c059.grades)&&(w=new e({prefix:"C59"}),u(),ca.bindEvents(),aa.init(),void w.info("init")))}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$={events:{click:"click",keydown:"keydown",change:"change",noDataFound:"noDataFound"},classes:{eleDisabled:"btn-disabled",disabled:"disabled",ajaxLoading:"loading-engines",active:"active",selected:"selected",hidden:"hidden",editMode:"is-editing",carFadeOut:"fade-out",iconNotIncluded:"icon-not-included",iconIncluded:"icon-included",iconOptional:"icon-optional",stickyTitles:"sticky-titles",dockedNavActive:"docked-nav-active",packsStats:"packs-stats",hideTabTitle:"hide-tab-title",includeFeature:"include-feature",availablePrice:"available-price",unavailablePrice:"unavailable-price"},selectors:{filtersWrapper:".filters-wrapper",c_184B:".c_184B",root:".c_059",universalPrice:".c_184",comparisonHolder:".comparison-selection-holder",imagesPlaceholder:".grade-images-placeholder",vehicleGenerator:".vehicle-generator",gradeSelectBox:".grade-select",gradeSelectBoxOption:".vehicle-generator .grade-select option",firstElement:":eq(0)",versionSelectBox:".engine-select",vehicleVersionsSelectBox:".version-select",selectSpan:".selectedValue",addVehicleBtn:".add-vehicle-button",addVehicleVersionBtn:".add-vehicle-version-button",removeVehicleBtn:".remove-vehicle-btn",editVehicleBtn:".edit-vehicle-btn",vehicleTemplate:".vehicle-template",versionOptionTemplate:".version-select-option-compare",vehicleTitle:".vehicle-model-title",vehicleImageDisclaimer:".vehicle-image-disclaimer",addedVehicleContainer:".added-vehicle",compareStats:".compare-stats",compareEmissions:".compare-emissions",efficiencyChart:".efficiency-chart",equipStats:".equipment-stats",packsStats:".packs-stats",subsectionTableHeader:".subsection-header",tabs:".tabs > .tab-title",dataTabSection:".data-tab-section",tabsSelect:".section-headers select",accordionChildWrapper:".accordion-child-wrapper",accordionGroup:".accordion-group",accordionChildHeader:".accordion-child-header",accordionPanel:".accordion-panel",packPriceValue:"p.available-price",stickyNav:".container-sticky > ul",waypointActive:".waypoint-active",stickyNavItemTemplate:".sticky-nav-item",fullPrice:".full-price",dockedNav:".docked-nav-wrapper",nextSteps:".next-steps",selectionInfo:".selection-information",selectionCtas:".selection-ctas",name:".name",ctas:".ctas",active:".active",selected:".selected",nextStepsHeaderTemplate:".next-steps-header",nextStepsCtasTemplate:".next-steps-ctas",vehicleGradeOptionSelected:".grade-select option:selected",vehicleGradeSelect:".vehicle-generator .grade-select option:selected",vehicleVersionSelect:".vehicle-generator .engine-select",vehicleModel:"h3",emissionsDisclaimers:".emissions-disclaimers",datarow:".data-row",priceRow:".price-row",sectionHide:".section-headers .tab-title:last-child",packsTemplate:".packs-template",tooltipEnabled:".tooltip-enabled",packsSection:".packs-section",specskey:".specs-key",packIncluded:".included",packNotIncluded:".not-included",optionFirstChild:"option:first-child",optionSelected:"option:selected",optionWithValue:"option[value]",firstChild:":first-child",disabled:":disabled"},operators:{MIDDLE_DIVIDER:"-",DOUBLE_MIDDLE_DIVIDER:"--"},constants:{NOT_AVAILABLE:"Not available",PACKS_TAB_LABEL:"packs"},tags:{stickyNavBar:"li",img:"img",priceValue:"p",row:"tr",cell:"td",labelText:"span",option:"option"},data:{fuelConsumptionDisclaimerLabel:"fuel-consumption-disclaimer-label",co2EmissionsDisclaimerLabel:"co2-emissions-disclaimer-label",efficiencyDisclaimerLabel:"efficiency-disclaimer-label",vehicleGradeReference:"vehicleGrade",vehicleVersionReference:"vehicleVersion",packsOptional:["option_pack"],packsRequired:["pack"],specsKey:"specs",info:"info",showEngine:"show-engine",tabID:"tab-id",packIncluded:"included-label",packNotIncluded:"not-included-label"},attr:{href:"href",src:"src",open:"open",dataState:"data-state",class:"class"},cssValues:{auto:"auto",height:"height"},prop:{selected:"selected",disabled:"disabled",outerHTML:"outerHTML"},packTypes:{option:"OPTION",forbidden:"FORBIDDEN",systematic:"SYSTEMATIC",default:"DEFAULT"}},_=null,aa={},ba=[],ca={},da=0,ea=!1,fa=!1,ga=[],ha=[],ia=[],ja="C59_Comparison_List";return aa={$tabsList:"",$tabsActive:"",$tablesList:"",stickyNavItemTemplate:"",records:{},nextSteps:{},defaultLabels:function(){ea?this.versionSelectText=E.find(_.selectors.optionFirstChild).val():(this.gradeSelectText=D.find(_.selectors.optionFirstChild).val(),this.versionSelectText=C.find(_.selectors.optionFirstChild).val())},init:function(){this.defaultLabels(),this.selectRequiredElements(),this.$tabsList.first().addClass(_.classes.active),this.$tabsActive=this.$tabsList.first().text(),this.setupAccordion(),this.bindEvents(),this.compileTemplate(),this.preSelectCarToCompareOnLoad()},preSelectCarToCompareOnLoad:function(){w.info("preSelectCarToCompareOnLoad"),D&&D.val()&&D.trigger(_.events.change),C&&C.val()&&(fa=!0,b.isUndefined(D)?(aa.removeState(F,_.classes.eleDisabled,_.prop.disabled),F.trigger(_.events.click)):D.trigger(_.events.change))},compileTemplate:function(){var a,b,c;a=y.find(_.selectors.stickyNavItemTemplate).html(),this.stickyNavItemTemplate=d.compile(a),b=y.find(_.selectors.nextStepsHeaderTemplate).html(),this.nextSteps.headerTemplate=d.compile(b),c=y.find(_.selectors.nextStepsCtasTemplate).html(),this.nextSteps.ctasTemplate=d.compile(c),this.nextSteps.infoClone=N.find(".name:eq(0)").prop(_.prop.outerHTML),this.nextSteps.ctasClone=O.find(".ctas:eq(0)").prop(_.prop.outerHTML)},handleError:function(){w.warn("Payload data is not available.")},selectRequiredElements:function(){this.$tabsList=y.find(_.selectors.tabs),this.$tablesList=y.find(_.selectors.dataTabSection),this.$tabsSelect=y.find(_.selectors.tabsSelect),this.$filtersWrapper=y.find(_.selectors.filtersWrapper)},bindEvents:function(){if(P.waypoint(function(){ba.length&&y.toggleClass(_.classes.stickyTitles)},{offset:0}),Q.waypoint(function(){z.toggleClass(_.classes.dockedNavActive)}),this.$tabsList.on(_.events.click,b.bind(this.tabSwitch,this)),this.$tabsSelect.on(_.events.change,b.bind(this.selectSwitch,this)),L.on(_.events.click,_.tags.stickyNavBar,this.scrollToTop),this.$filtersWrapper.on(_.events.noDataFound,this.resetFiltersWhenNoDataFound),M.on(_.events.click+" "+_.events.keydown,_.selectors.active+","+_.selectors.ctas,this.changeNextStepsVehicle.bind(this)),window.matchMedia&&window.matchMedia("all").addListener){var a=window.matchMedia(_.HELIOS.config.common.mediaQuery.is.small),c=window.matchMedia(_.HELIOS.config.common.mediaQuery.is.medium),d=window.matchMedia(_.HELIOS.config.common.mediaQuery.is.large);a.addListener(this.checkForBreakpointOnResize.bind(this)),c.addListener(this.checkForBreakpointOnResize.bind(this)),d.addListener(this.checkForBreakpointOnResize.bind(this))}y.on(_.events.click,_.selectors.tooltipEnabled,this.showOverlay)},resetFiltersWhenNoDataFound:function(){aa.resetGradeSelectBox(B),l.filterReset(),aa.resetVersionSelectBox(B,!0),aa.removeState(a(_.selectors.gradeSelectBox).children(),_.classes.disabled,_.classes.disabled)},checkForBreakpointOnResize:function(a){a.matches&&this.isSelectedCTAVisible()},saveRecord:function(a,b){this.records[a]=b},getRecord:function(a){return this.records[a]},clearRecords:function(){var a;for(a in this.records)delete this.records[a]},getEngines:function(b){var c=a(b.target).val(),d=b.data.templateInstance,e=d.find(_.selectors.gradeSelectBox),f=e.parent(),g=d.find(_.selectors.versionSelectBox),h=g.siblings(_.tags.labelText),i=d.find(_.selectors.addVehicleBtn),j=D&&D.data(_.data.showEngine);if(w.info("getEngines"),fa)return aa.removeState(F,_.classes.eleDisabled,_.prop.disabled),F.trigger(_.events.click),void aa.saveRecord("gradeId",c);f.addClass(_.classes.ajaxLoading),aa.addState([g,h],_.classes.disabled,_.classes.disabled),aa.addState(e,null,_.classes.disabled),
aa.resetVersionSelectBox(d,!1),aa.addState(i,_.classes.eleDisabled,_.classes.disabled),aa.clearRecords(),aa.saveRecord("gradeId",c),Z[c]?(aa.saveRecord("versionPossibilities",Z[c].versions),aa.removeState(e,null,_.classes.disabled),f.removeClass(_.classes.ajaxLoading),aa.loadVersionOptions(Z[c].versions,d),1===Object.keys(Z[c].versions).length&&aa.removeState(i,_.classes.eleDisabled,_.classes.disabled)):aa.handleError(),j||aa.removeState(F,_.classes.eleDisabled,_.prop.disabled)},getVehicleSpecs:function(a,c,d,e){var f,g,h,i=c.val(),j=c.find(_.selectors.optionSelected).text();e?(f=a.parent().find(_.selectors.vehicleGradeOptionSelected).text(),g=a.parent().find(_.selectors.vehicleGradeOptionSelected).val()):(f=y.find(_.selectors.vehicleGradeSelect).text(),g=y.find(_.selectors.vehicleGradeSelect).val()),w.info("getVehicleSpecs"),this.addState(a,_.classes.eleDisabled,_.classes.disabled),g||(g=b.findKey(Z,function(a){return a.versions[i]})),i||(i=Object.keys(Z[g].versions)[0]),h=Z[g].versions[i],h.gradeKey=g,ca.publishVehicle(h,d,i,j,g,f)},loadVersionOptions:function(b,c){var e,f,g=c.find(_.selectors.versionSelectBox),h=g.siblings(_.tags.labelText),i=d.compile(U);w.info("loadVersionOptions"),fa||(a.each(b,function(a,b){e=i(b),g.append(e)}),1===Object.keys(b).length&&(f=g.find(_.selectors.optionWithValue).not(_.selectors.disabled).first(),f.length&&(g.val(f.val()),this.updateSelectText(g,f.html())))),l.deferredEngine.notify(!0),this.removeState([g,h],_.classes.disabled,_.classes.disabled)},resetGradeSelectBox:function(a){var b=a.find(_.selectors.gradeSelectBox);b.find(_.selectors.optionFirstChild).prop(_.prop.selected,!0),this.updateSelectText(b,aa.gradeSelectText)},resetVersionSelectBox:function(a,b){var c=a.find(_.selectors.versionSelectBox),d=c.siblings(_.tags.labelText),e=c.find(_.selectors.optionFirstChild);c.find(_.tags.option).not(_.selectors.firstChild).remove(),e.prop(_.prop.selected,!0),this.updateSelectText(c,aa.versionSelectText),b&&this.addState([c,d],_.classes.disabled,_.classes.disabled)},resetVehicleVersionSelectBox:function(a){var b=a.find(_.selectors.vehicleVersionsSelectBox);b.find(_.selectors.optionFirstChild).prop(_.prop.selected,!0),this.updateSelectText(b,aa.versionSelectText)},updateSelectText:function(a,b){a.siblings(_.tags.labelText).text(b)},removeState:function(c,d,e){b.isArray(c)?a.each(c,function(a,b){b.removeClass(d).prop(e,!1)}):c.removeClass(d).prop(e,!1)},addState:function(c,d,e){b.isArray(c)?a.each(c,function(a,b){b.prop(e,!0).addClass(d)}):c.prop(e,!0).addClass(d)},updateVehicle:function(a,b,c){var d=a.prevAll().length;w.info("updateVehicle"),ba.splice(d,1),S-=1,a.empty(),this.getVehicleSpecs(c,b,d,!0)},removeVehicle:function(a){var b=a.prevAll().length,c=z.css(_.cssValues.height);w.info("removeVehicle"),z.css(_.cssValues.height,c),this.removeVehicleSpecs(b),ba.splice(b,1),ha.splice(b),ia.splice(b),S-=1,x?z.css(_.cssValues.height,_.cssValues.auto):(a.addClass(_.classes.carFadeOut),setTimeout(function(){a.remove(),z.css(_.cssValues.height,_.cssValues.auto)},500))},removeVehicleSpecs:function(a){w.info("removeVehicleSpecs"),X=K.find(_.tags.row).not(_.selectors.subsectionTableHeader&&_.selectors.priceRow).find(_.tags.cell).first().prop(_.prop.outerHTML),Y=K.find(_.selectors.priceRow).find(_.tags.cell).first().prop(_.prop.outerHTML),a+=1,G.find("td:nth-child("+a+")").remove(),J.find("td:nth-child("+a+")").remove(),K.find("td:nth-child("+a+")").remove(),H.find("td:nth-child("+a+")").remove(),G.find(_.tags.row).not(_.selectors.subsectionTableHeader).append(V),J.find(_.tags.row).not(_.selectors.subsectionTableHeader).append(W),K.find(_.tags.row).not(_.selectors.subsectionTableHeader).not(_.selectors.priceRow).append(X).find("td:last-child span").text(_.operators.DOUBLE_MIDDLE_DIVIDER).removeAttr(_.attr.class),K.find(_.selectors.priceRow).not(_.selectors.subsectionTableHeader).append(Y),K.find(_.selectors.priceRow).find("td:last-child span").text("").removeClass(_.classes.availablePrice).removeClass(_.classes.unavailablePrice),K.find(_.selectors.priceRow).find("td:last-child p").text(_.operators.MIDDLE_DIVIDER).removeClass(_.classes.availablePrice).removeClass(_.classes.unavailablePrice),H.find(_.tags.row).not(_.selectors.subsectionTableHeader).append(V)},tabSwitch:function(b){var c=a(b.target),d=c.data(_.data.tabID),e=_.analyticsManager,f=e.trackingVars.toggle,g=e.getTrackingObjectProperties(f),h={};h[g.componentId]=ja,h[g.toggleType]="Comparison-tool",h[g.toggleValue]=c.text(),c.hasClass(_.classes.active)||e.track(f,h),c.addClass(_.classes.active).siblings().removeClass(_.classes.active),this.$tabsSelect.val(d),aa.$tabsActive=c.text(),this.$tablesList.eq(d).addClass(_.classes.active).siblings().removeClass(_.classes.active)},selectSwitch:function(b){var c=a(b.target),d=c.val();this.$tabsList.eq(d).trigger(_.events.click)},setupAccordion:function(){var b=[];y.find(_.selectors.accordionChildWrapper).each(function(){var c=[],d=a(this);d.children(_.selectors.accordionGroup).each(function(){var b=a(this),d=b.children(_.selectors.accordionChildHeader),e=b.children(_.selectors.accordionPanel);c.push(new h({$contentElement:e,$headerElement:d,isDisabled:!1,isOpen:0===c.length}))}),b.push(new g({$container:d,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:!0,items:c})),y.off(_.events.click,_.selectors.accordionChildHeader).on(_.events.click,_.selectors.accordionChildHeader,a.proxy(p,this))})},addStickyNavItem:function(a){L.append(this.stickyNavItemTemplate({title:a}))},updateStickyNavItem:function(a,b){L.children("li:eq("+a+")").length?L.children("li:eq("+a+")").html(b):this.addStickyNavItem(b)},removeStickyNavItem:function(a){L.children("li:eq("+a+")").remove()},updateNextStepsItem:function(a,b){var c=N.find(_.selectors.name+":eq("+a+")"),d=O.find(".ctas:eq("+a+")");c.html(this.nextSteps.headerTemplate(b)).addClass(_.classes.active).attr("tabindex","0"),d.html(this.nextSteps.ctasTemplate(b)),this.setVisibilityNextSteps()},setVisibilityNextSteps:function(){N.find(_.selectors.active).length?(M.removeClass(_.classes.hidden),this.setSelectedItem()):M.addClass(_.classes.hidden)},setSelectedItem:function(a){N.find(_.selectors.selected).length||(a=0),N.find(_.selectors.name+":eq("+a+")").addClass(_.classes.selected).siblings().removeClass(_.classes.selected),O.find(_.selectors.ctas+":eq("+a+")").addClass(_.classes.selected).siblings().removeClass(_.classes.selected)},removeNextStepsItem:function(a){N.append(this.nextSteps.infoClone).find(_.selectors.name+":eq("+a+")").remove(),O.append(this.nextSteps.ctasClone).find(_.selectors.ctas+":eq("+a+")").remove(""),this.setVisibilityNextSteps()},isSelectedCTAVisible:function(){N.find(_.selectors.active).length&&!N.find(_.selectors.selected+":visible").length&&this.setSelectedItem(0)},changeNextStepsVehicle:function(b){if(b.type===_.events.click||b.type===_.events.keydown&&13===b.keyCode){var c=a(b.currentTarget),d=a(b.target);d.is("a")?r(d):da!==c.index()&&(da=c.index(),this.setSelectedItem(c.prevAll().length),q(b))}},scrollToTop:function(){a("html, body").animate({scrollTop:z.position().top-16},800)},showOverlay:function(b){var c=a(b.currentTarget);n.loadModal(c.data(_.data.info))}},ca.publishVehicle=function(b,c,d,e,g,h){var i,k,m,n=c>=0?"update":"add",p=-1,q={},r=F.parent().find(_.selectors.vehicleModel),t=b.gradePriceDisabled,u=b.vehiclePriceDisabled;w.info("publishVehicle"),"update"===n?(k=a(T).html(),i=z.find(_.selectors.addedVehicleContainer).eq(c),i.append(k).removeClass(_.classes.editMode)):(ca.resetGenerator(),B.before(T),i=B.prev()),S+=1,ea||(p=aa.getRecord("gradeId"),q=aa.getRecord("versionPossibilities")),m=i.find(_.selectors.universalPrice),(m.data("price-vehicle-disabled")||t||u)&&m.addClass(_.classes.hidden),ba.push(new s({$element:i,gradeId:p,versionPossibilities:q,vehicleData:b,vehicleModel:r.data("modelName"),vehicleGrade:h,vehicleVersion:e,vehicleGradeId:g,vehicleversionId:d})),f.init(i),j.renderDisclaimers(y),o(h,g,e,d,n),fa=!1,l.deferredReset.notify(!0)},ca.resetGenerator=function(){ea?aa.resetVehicleVersionSelectBox(B):(aa.resetGradeSelectBox(B),aa.resetVersionSelectBox(B,!0))},ca.bindEvents=function(){a(_.selectors.gradeSelectBox).children(),a(_.selectors.versionSelectBox).children(),a(_.selectors.vehicleVersionsSelectBox).children();ea?C=E:D.on(_.events.change,{templateInstance:B},aa.getEngines),C.on(_.events.change,function(){aa.removeState(F,_.classes.eleDisabled,_.prop.disabled)}),F.on(_.events.click,function(a){a.preventDefault(),aa.getVehicleSpecs(F,C),ca.resetGenerator()})},s.prototype.setVehicleTitle=function(){this.$element.find(_.selectors.vehicleTitle).text(this.vehicleData.name),aa.updateStickyNavItem(this.getIndex(),this.vehicleData.name),aa.updateNextStepsItem(this.getIndex(),this.vehicleData)},s.prototype.setVehiclePrice=function(){var a,b=this.$element.find(_.selectors.universalPrice);b.length?(a=new k.UniversalPricing({$element:b,manualPriceFormatting:b.data("manualPriceFormatting"),priceUrl:b.data("priceUrl"),dataPath:b.data("modelPath"),modelKey:b.data("modelCode"),gradeKey:this.vehicleData.gradeKey,versionKey:this.vehicleData.versionKey,priceCode:b.data("priceCode")||"default",extraInfoPathPrefix:b.data("extraInfoPathPrefix"),extraInfoPathSuffix:this.vehicleData.path}),a.refreshPrice()):(b=this.$element.find(_.selectors.c_184B),b.length&&(b.data({modelGrade:this.vehicleData.gradeKey||this.vehicleGradeId,modelVersion:this.vehicleData.versionKey,priceDescription:this.vehicleData.priceDescription,priceDisclaimer:this.vehicleData.priceDisclaimer,priceDisabled:this.vehicleData.vehiclePriceDisabled,priceDisabledDescription:this.vehicleData.vehiclePriceDisabledDescription,priceDisabledLabel:this.vehicleData.vehiclePriceDisabledLabel,hasDescriptionOverrideCondition:this.vehicleData.priceDescriptionOverride,hasDisclaimerOverrideCondition:this.vehicleData.priceDisclaimerOverride,vehicleVersionCode:this.vehicleData.versionKey,vehicleVersionName:this.vehicleData.name}),t(this.$element)))},s.prototype.setVehicleImage=function(){var a=A.find('div[value="'+this.vehicleGradeId+'"]').find(_.tags.img).attr(_.attr.src);this.$element.find(_.tags.img).attr(_.attr.src,a)},s.prototype.setVehicleImageDisclaimer=function(){var a=A.find('div[value="'+this.vehicleGradeId+'"]').find(".disclaimer").text();this.$element.find(_.selectors.vehicleImageDisclaimer).text(a)},s.prototype.setSelectValues=function(){ea?(this.versionSelectBox.val(this.vehicleData.versionKey),aa.updateSelectText(this.versionSelectBox,this.versionSelectBox.find(_.selectors.optionSelected).text())):(aa.loadVersionOptions(this.versionPossibilities,this.$element),this.gradeSelectBox.val(this.gradeId),this.versionSelectBox.val(this.vehicleData.versionKey),aa.updateSelectText(this.gradeSelectBox,this.gradeSelectBox.find(_.selectors.optionSelected).text()),aa.updateSelectText(this.versionSelectBox,this.versionSelectBox.find(_.selectors.optionSelected).text()))},s.prototype.setTableData=function(){var a=this.$element.prevAll().length;this.loadVehicleSpecifications(a,"techSpecs",G,"value"),this.loadVehicleEmissions(a,I,H,"value"),this.loadVehicleEquipment(a),this.loadVehiclePacks(a)},s.prototype.renderEmissionsDisclaimers=function(a){var c=a.closest(_.selectors.universalPrice),d=[{label:c.data(_.data.fuelConsumptionDisclaimerLabel),key:"combined"},{label:c.data(_.data.co2EmissionsDisclaimerLabel),key:"co2Emissions"},{label:c.data(_.data.efficiencyDisclaimerLabel),key:"efficiency"}],e=this.vehicleData;b.each(d,function(b){var c;e.fuelConsumption&&e.fuelConsumption[b.key]&&(c=e.fuelConsumption[b.key])&&c.value&&a.append("<p>"+b.label+" "+c.value+"</p>")}),a.find(_.tags.priceValue).length||a.hide()},s.prototype.loadVehicleSpecifications=function(a,c,d,e){var f=this.vehicleData.versionKey;b.each(this.vehicleData[c],function(c){b.each(c.specs,function(c){b.each(c,function(b){var c,g=d.find('tr[data-section-id="'+b.customKey+'"]');g.length&&(c=g.find(_.tags.cell).eq(a),c.data("isPopulated")&&f===c.data("vehicleVersion")||(c.html(b[e]),c.data("isPopulated",!0),c.data("vehicleVersion",f)))})})})},s.prototype.loadVehicleEmissions=function(a,c,d,e){var f,g=this.vehicleData;b.each(g.consumptionSpecs,function(b){var h,i;b&&(h=d.find('tr[data-section-id="'+b.groupKey+'"]'),h.length&&(f=document.createElement(_.tags.img),f.setAttribute(_.attr.src,g.efficiencyImage),i=h.find(_.tags.cell).eq(a),i.html(b[e]),c.find(_.tags.cell).eq(a).empty().append(f)))})},s.prototype.loadVehicleEquipment=function(c){var d=b.flatten(b.pluck(this.vehicleData.equipmentSpecs,_.data.specsKey)),e=J.find(_.selectors.datarow);a.each(e,function(b,d){a(d).find(_.tags.cell).eq(c).find(_.tags.labelText).removeClass(_.classes.iconOptional).removeClass(_.classes.iconIncluded).addClass(_.classes.iconNotIncluded)}),a.each(d,function(a,d){var e,f,g=J.find('tr[data-section-id="'+d.customKey+'"]');g.length&&(e=d.type.toLowerCase(),f=g.find(_.tags.cell).eq(c).find(_.tags.labelText),b.indexOf([_.tags.option,"optional"],e)>=0?f.addClass(_.classes.iconOptional).removeClass(_.classes.iconNotIncluded):b.indexOf(["systematic","default","included"],e)>=0&&f.addClass(_.classes.iconIncluded).removeClass(_.classes.iconNotIncluded))})},s.prototype.loadVehiclePacks=function(a){var c,d,e=this.vehicleData.packs.packs,f=[];f=b.map(e,function(a){return{title:a.name,pack:a,subsections:a.specs}}),ga=b.uniq(b.union(f,ga),!1,function(a){return a.pack.name}),ha.push({positionIndex:a,packsListSpecs:b.flatten(b.pluck(e,_.data.specsKey))}),c={positionIndex:a,packList:e,versionKey:this.vehicleData.versionKey},d={positionIndex:a,packsListSpecs:b.flatten(b.pluck(e,_.data.specsKey))},ia.splice(a,1,c),ha.splice(a,1,d),this.packsRenderSpecs(a),this.packsLoadPrices(a)},s.prototype.packsLoadPrices=function(){var c=a(_.selectors.packsSection).data(_.data.packIncluded),d=a(_.selectors.packsSection).data(_.data.packNotIncluded),e=K.find(_.selectors.priceRow);K.find(_.selectors.priceRow).find(_.tags.cell).find(_.tags.priceValue).text(_.operators.MIDDLE_DIVIDER).removeClass(_.classes.unavailablePrice).removeClass(_.classes.availablePrice),K.find(_.selectors.priceRow).find(_.tags.cell).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice).removeClass(_.classes.availablePrice),b.each(ia,b.bind(function(f,g){a(e).each(function(){a(this).find(_.tags.cell).eq(g).find(_.tags.priceValue).text(_.operators.MIDDLE_DIVIDER).removeClass(_.classes.unavailablePrice).removeClass(_.classes.availablePrice),a(this).find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice).removeClass(_.classes.availablePrice)}),f.packList.length>0&&b.each(f.packList,b.bind(function(a){e=K.find("[data-accordion-id="+a.pricesKeyList[0]+"] "+_.selectors.priceRow),e.length&&(a.type===_.packTypes.option?""===a.price||b.isUndefined(a.price)?(e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text(_.operators.MIDDLE_DIVIDER).removeClass(_.classes.unavailablePrice).addClass(_.classes.availablePrice),e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice).addClass(_.classes.availablePrice)):(e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text(this.formatCurrency(a.price)).removeClass(_.classes.unavailablePrice).addClass(_.classes.availablePrice),e.find(_.tags.cell).eq(g).find(_.tags.labelText).text(HELIOS.components.c059.priceTitle).removeClass(_.classes.unavailablePrice).addClass(_.classes.availablePrice)):(a.type===_.packTypes.forbidden&&(""===d?(e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice).removeClass(_.classes.availablePrice),e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text("").removeClass(_.classes.availablePrice).addClass(_.classes.unavailablePrice)):(e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice),e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text(d).removeClass(_.classes.unavailablePrice))),a.type!==_.packTypes.systematic&&a.type!==_.packTypes.default||(""===c?(e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice).removeClass(_.classes.availablePrice),e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text("").removeClass(_.classes.availablePrice).addClass(_.classes.unavailablePrice)):(e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice),e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text(c).removeClass(_.classes.unavailablePrice)))))},this))},this))},s.prototype.formatCurrency=function(a){var c=parseFloat(a),d=new m({HELIOS:_.HELIOS});return b.isFinite(c)?d.asCurrency(c):a},s.prototype.packsRenderSpecs=function(){var c=K.find(_.selectors.datarow),d=J.find(_.selectors.datarow);b.each(ha,function(e){b.each(c,function(b){a(b).find(_.tags.cell).eq(e.positionIndex).find(_.tags.labelText).empty().removeClass(_.classes.iconOptional+" "+_.classes.iconIncluded).addClass(_.classes.iconNotIncluded)}),b.each(d,function(b){var c,d,f,g=a(b);g.find(_.tags.cell).eq(e.positionIndex).find(_.tags.labelText).hasClass(_.classes.iconIncluded)&&(c=g.data("section-id"),d=K.find('tr[data-section-id="'+c+'"]').find(_.tags.labelText),f=d.eq(e.positionIndex),f.empty().removeClass(_.classes.iconOptional).removeClass(_.classes.iconNotIncluded).addClass(_.classes.iconIncluded))}),b.each(e.packsListSpecs,function(a){var c,d,f,g,h=K.find('tr[data-section-id="'+a.key+'"]'),i=J.find('tr[data-section-id="'+a.key+'"]');h.length&&(d=a.type.toLowerCase(),f=h.find(_.tags.cell).eq(e.positionIndex).find(_.tags.labelText),g=f.hasClass(_.classes.iconIncluded),b.contains(_.data.packsRequired,d)&&!g&&f.empty().removeClass(_.classes.iconNotIncluded).addClass(_.classes.iconOptional),i.length&&(c=i.find(_.tags.cell).eq(e.positionIndex).find("span"),(g=c.hasClass(_.classes.iconIncluded))&&f.empty().removeClass(_.classes.iconNotIncluded+" "+_.classes.iconOptional).addClass(_.classes.iconIncluded)))})})},s.prototype.removeVehicle=function(){var b=this.getIndex(),c=ba[b];aa.removeVehicle(this.$element),aa.removeStickyNavItem(b),aa.removeNextStepsItem(b),o(a.trim(c.vehicleGrade),c.vehicleGradeId,c.vehicleVersion,c.vehicleVersion,"remove")},s.prototype.toggleEditMode=function(b){var c=this.getIndex(),d=ba[c];b&&o(a.trim(d.vehicleGrade),d.vehicleGradeId,d.vehicleVersion,d.vehicleversionId,"edit"),this.$element.toggleClass(_.classes.editMode),this.enableUpdateBtn()},s.prototype.updateVehicle=function(a){a.preventDefault(),this.vehicleData.versionKey!==this.versionSelectBox.val()?aa.updateVehicle(this.$element,this.versionSelectBox,this.addVehicleBtn):this.toggleEditMode()},s.prototype.enableUpdateBtn=function(){this.addVehicleBtn.hasClass(_.classes.eleDisabled)&&aa.removeState(this.addVehicleBtn,_.classes.eleDisabled,_.prop.disabled)},s.prototype.getIndex=function(){return this.$element.prevAll().length},s.prototype.bindEvents=function(){ea||this.gradeSelectBox.on(_.events.change,{templateInstance:this.$element},aa.getEngines),this.versionSelectBox.on(_.events.change,this.enableUpdateBtn.bind(this)),this.$element.find(_.selectors.removeVehicleBtn).on(_.events.click,this.removeVehicle.bind(this)),this.$element.find(_.selectors.editVehicleBtn).on(_.events.click,this.toggleEditMode.bind(this)),this.addVehicleBtn.on(_.events.click,this.updateVehicle.bind(this))},{init:v,pageCtrlHandler:aa}}),define("c_059B",["jquery","underscore","c_184B","handlebars","logger","customSelect","accordion","accordionItem","waypoints","disclaimers","c_184","c_099_4","numberFormat","c_100"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(a,c,d,e,f){var g=ba.length,h=_.analyticsManager,i=h.trackingVars.vehicleCompare,j=h.getTrackingObjectProperties(i),k={};("undefined"!=typeof CQ&&CQ.WCM&&!CQ.WCM.isEditMode(!0)&&!CQ.WCM.isDesignMode(!0)||"undefined"==typeof CQ)&&(ba[g-1]&&ba[g-1].vehicleModel),k[j.componentId]=ka,k[j.vehicleGrade]=a,k[j.vehicleGradeId]=c,k[j.vehicleVersion]=d,k[j.vehicleVersionId]=e,k[j.vehicleCompare]=d.toLowerCase(),k[j.vehicleGradeCompare]=b.pluck(ba,_.data.vehicleGradeReference).reverse().join(","),k[j.vehicleVersionCompare]=b.pluck(ba,_.data.vehicleVersionReference).reverse().join(","),k[j.numVehicles]=g,k[j.interactionType]=f,k[j.vehicleModel]=d,h.tag(i,k)}function p(c){var d,e=a(c.target).attr("data-state"),f=a(c.target),g=a.trim(f.text().toLowerCase()),h=_.analyticsManager,i=h.trackingVars.accordionExpansion,j=h.getTrackingObjectProperties(i),k=f.siblings(_.selectors.accordionPanel).find(_.selectors.packPriceValue)||"",l=k.length,m=[],n={};"open"===e&&(l&&(b.each(k,function(a,b){a.textContent!==_.operators.MIDDLE_DIVIDER&&a.textContent!==_.operators.DOUBLE_MIDDLE_DIVIDER&&a.textContent!==_.constants.NOT_AVAILABLE&&m.push(a.textContent)}),d=m.join(":")),n[j.componentId]=ka,n[j.accordionType]=a.trim(aa.$tabsActive),n[j.accordionText]=l?g+_.operators.MIDDLE_DIVIDER+d:g,h.track(i,n))}function q(b){var c=a(b.target),d=a.trim(c.find(":selected").text()),e=_.analyticsManager,f=e.trackingVars.toggle,g=e.getTrackingObjectProperties(f),h={};h[g.componentId]=ka,h[g.toggleType]="Comparison-tool",h[g.toggleValue]="Next steps - "+d,e.track(f,h)}function r(b){var c=a(b),d=c.attr("href")||"",e=a.trim(c.text()),f=_.analyticsManager,g=f.trackingVars.genericClick,h=f.getTrackingObjectProperties(g),i={};i[h.componentId]=ka,i[h.destination]=d,i[h.locationInPage]="Comparison-tool",i[h.buttonText]=e,f.track(g,i)}function s(a){var b,c;a=a||{};for(b in a)this[b]=a[b];ea?this.versionSelectBox=this.$element.find(_.selectors.vehicleVersionsSelectBox):(this.gradeSelectBox=this.$element.find(_.selectors.gradeSelectBox),this.versionSelectBox=this.$element.find(_.selectors.versionSelectBox)),c=this.$element.find(_.selectors.universalPrice),this.addVehicleBtn=this.$element.find(_.selectors.addVehicleBtn),this.bindEvents(),this.setVehicleImage(),this.setVehicleTitle(),this.setSelectValues(),this.setTableData(),this.renderEmissionsDisclaimers(c.find(_.selectors.emissionsDisclaimers)),this.setVehiclePrice()}function t(a){c.init({$el:a,analyticsManager:_.analyticsManager,financeManager:_.financeManager,HELIOS:_.HELIOS,heliosAppContext:_.heliosAppContext,numberFormat:_.numberFormat,priceCodes:_.priceCodes,priceManager:_.priceManager,window:_.window})}function u(){T=0,z=y.find(_.selectors.comparisonHolder),G=y.find(_.selectors.compareStats),H=y.find(_.selectors.compareEmissions),I=y.find(_.selectors.efficiencyChart),J=y.find(_.selectors.equipStats),K=y.find(_.selectors.packsStats),B=y.find(_.selectors.vehicleGenerator),A=y.find(_.selectors.imagesPlaceholder),S=y.find(_.selectors.tooltipEnabled),Z=!1,B.find(_.selectors.vehicleVersionsSelectBox).length?(ea=!0,E=B.find(_.selectors.vehicleVersionsSelectBox)):(C=B.find(_.selectors.versionSelectBox),D=B.find(_.selectors.gradeSelectBox)),F=B.find(_.selectors.addVehicleBtn),U=y.find(_.selectors.vehicleTemplate).html(),V=y.find(_.selectors.versionOptionTemplate).html(),L=y.find(_.selectors.stickyWrapper),M=y.find(_.selectors.stickyNav),Q=y.find(_.selectors.waypointActive),R=a(_.selectors.dockedNav),W=G.find(_.tags.cell).first().prop("outerHTML"),X=J.find(_.tags.cell).first().prop("outerHTML"),N=y.find(_.selectors.nextSteps),O=y.find(_.selectors.selectionInfo),P=y.find(_.selectors.selectionCtas)}function v(b){return _=a.extend({},$,b),x=a("html").hasClass("ltie9"),y=a(_.selectors.root),!!y.length&&(!!(Y=_.HELIOS.components.c059B.grades)&&(w=new e({prefix:"C59B"}),u(),ca.bindEvents(),aa.init(),void w.info("init")))}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$={events:{click:"click",keydown:"keydown",change:"change"},classes:{eleDisabled:"btn-disabled",disabled:"disabled",ajaxLoading:"loading-engines",active:"active",selected:"selected",hidden:"hidden",editMode:"is-editing",carFadeOut:"fade-out",iconNotIncluded:"icon-not-included",iconIncluded:"icon-included",iconOptional:"icon-optional",stickyTitles:"sticky-titles",dockedNavActive:"docked-nav-active",packsStats:"packs-stats",hideTabTitle:"hide-tab-title",availablePrice:"available-price",unavailablePrice:"unavailable-price"},selectors:{c_184B:".c_184B",root:".c_059B",universalPrice:".c_184",comparisonHolder:".comparison-selection-holder",imagesPlaceholder:".grade-images-placeholder",vehicleGenerator:".vehicle-generator",gradeSelectBox:".grade-select",versionSelectBox:".engine-select",vehicleVersionsSelectBox:".version-select",selectSpan:".selectedValue",addVehicleBtn:".add-vehicle-button",addVehicleVersionBtn:".add-vehicle-version-button",removeVehicleBtn:".remove-vehicle-btn",editVehicleBtn:".edit-vehicle-btn",vehicleTemplate:".vehicle-template",versionOptionTemplate:".version-select-option",vehicleTitle:".vehicle-model-title",addedVehicleContainer:".added-vehicle",compareStats:".compare-stats",compareEmissions:".compare-emissions",efficiencyChart:".efficiency-chart",equipStats:".equipment-stats",packsStats:".packs-stats",subsectionTableHeader:".subsection-header",tabs:".tabs > .tab-title",dataTabSection:".data-tab-section",tabsSelect:".section-headers select",accordionChildWrapper:".accordion-child-wrapper",accordionGroup:".accordion-group",accordionChildHeader:".accordion-child-header",accordionPanel:".accordion-panel",packPriceValue:"p.available-price",stickyWrapper:".container-sticky",stickyNav:".container-sticky > ul",waypointActive:".waypoint-active",stickyNavItemTemplate:".sticky-nav-item",fullPrice:".full-price",dockedNav:".docked-nav-wrapper",nextSteps:".next-steps",selectionInfo:".selection-information",selectionCtas:".selection-ctas",name:".name",ctas:".ctas",active:".active",selected:".selected",nextStepsHeaderTemplate:".next-steps-header",nextStepsCtasTemplate:".next-steps-ctas",vehicleGradeOptionSelected:".grade-select option:selected",vehicleGradeSelect:".vehicle-generator .grade-select option:selected",vehicleVersionSelect:".vehicle-generator .engine-select",vehicleModel:"h3",emissionsDisclaimers:".emissions-disclaimers",priceRow:".price-row",sectionHide:".section-headers .tab-title:last-child",packsTemplate:".packs-template",tooltipEnabled:".tooltip-enabled",packsSection:".packs-section",specskey:".specs-key",packIncluded:".included",packNotIncluded:".not-available",toplink:".top-link",optionFirstChild:"option:first-child",optionSelected:"option:selected",firstChild:":first-child"},operators:{MIDDLE_DIVIDER:"-",DOUBLE_MIDDLE_DIVIDER:"--"},constants:{NOT_AVAILABLE:"Not available"},data:{fuelConsumptionDisclaimerLabel:"fuel-consumption-disclaimer-label",co2EmissionsDisclaimerLabel:"co2-emissions-disclaimer-label",efficiencyDisclaimerLabel:"efficiency-disclaimer-label",vehicleGradeReference:"vehicleGrade",vehicleVersionReference:"vehicleVersion",packsOptional:["option_pack"],packsRequired:["pack"],specsKey:"specs",info:"info",packIncluded:"included-label",packNotIncluded:"not-included-label"},tags:{stickyNavBar:"li",img:"img",priceValue:"p",row:"tr",cell:"td",labelText:"span",option:"option"},packTypes:{option:"OPTION",forbidden:"FORBIDDEN",systematic:"SYSTEMATIC",default:"DEFAULT"}},_=null,aa={},ba=[],ca={},da=0,ea=!1,fa=!1,ga=!1,ha=[],ia=[],ja=[],ka="C59B_Comparison_List";return aa={$tabsList:"",$tabsActive:"",$tablesList:"",stickyNavItemTemplate:"",records:{},nextSteps:{},defaultLabels:function(){ea?this.versionSelectText=E.find("option:first-child").val():(this.gradeSelectText=D.find("option:first-child").val(),this.versionSelectText=C.find("option:first-child").val())},init:function(){this.defaultLabels(),this.selectRequiredElements(),this.$tabsList.first().addClass(_.classes.active),this.$tabsActive=this.$tabsList.first().text(),this.setupAccordion(),this.bindEvents(),this.compileTemplate(),this.preSelectCarToCompareOnLoad()},preSelectTheFirstCar:function(){var a=D.find("option[value]").eq(0);a.val()&&(ga=!0,a.attr("selected","selected").trigger(_.events.change))},preSelectCarToCompareOnLoad:function(){w.info("preSelectCarToCompareOnLoad");var a=y.data("grade"),b=D.find('option[value="'+a+'"]');a?(fa=!0,b.attr("selected","selected").trigger(_.events.change)):this.preSelectTheFirstCar()},compileTemplate:function(){var a,b,c;a=y.find(_.selectors.stickyNavItemTemplate).html(),this.stickyNavItemTemplate=d.compile(a),b=y.find(_.selectors.nextStepsHeaderTemplate).html(),this.nextSteps.headerTemplate=d.compile(b),c=y.find(_.selectors.nextStepsCtasTemplate).html(),this.nextSteps.ctasTemplate=d.compile(c),this.nextSteps.infoClone=O.find(".name:eq(0)").prop("outerHTML"),this.nextSteps.ctasClone=P.find(".ctas:eq(0)").prop("outerHTML")},handleError:function(){w.warn("Payload data is not available.")},selectRequiredElements:function(){var a=parseInt(y.data("tab"),10)||0;this.$tabsList=y.find(_.selectors.tabs),this.$tablesList=y.find(_.selectors.dataTabSection),this.$tabsSelect=y.find(_.selectors.tabsSelect),this.$tabsList.removeClass(_.classes.active);var c=this.$tabsList.eq(a);c.addClass(_.classes.active),setTimeout(b.bind(function(){c.trigger(_.events.click),this.$tabsSelect.trigger(_.events.change)},this),500),this.$tabsActive=this.$tabsList.first().text()},bindEvents:function(){if(Q.waypoint(function(){ba.length&&y.toggleClass(_.classes.stickyTitles)},{offset:0}),R.waypoint(function(){z.toggleClass(_.classes.dockedNavActive)}),this.$tabsList.on(_.events.click,b.bind(this.tabSwitch,this)),this.$tabsSelect.on(_.events.change,b.bind(this.selectSwitch,this)),L.on(_.events.click,_.selectors.toplink,this.scrollToTop),N.on(_.events.click+" "+_.events.keydown,_.selectors.active+","+_.selectors.ctas,this.changeNextStepsVehicle.bind(this)),window.matchMedia&&window.matchMedia("all").addListener){var a=window.matchMedia(_.HELIOS.config.common.mediaQuery.is.small),c=window.matchMedia(_.HELIOS.config.common.mediaQuery.is.medium),d=window.matchMedia(_.HELIOS.config.common.mediaQuery.is.large);a.addListener(this.checkForBreakpointOnResize.bind(this)),c.addListener(this.checkForBreakpointOnResize.bind(this)),d.addListener(this.checkForBreakpointOnResize.bind(this))}y.on(_.events.click,_.selectors.tooltipEnabled,this.showOverlay)},checkForBreakpointOnResize:function(a){a.matches&&this.isSelectedCTAVisible()},saveRecord:function(a,b){this.records[a]=b},getRecord:function(a){return this.records[a]},clearRecords:function(){var a;for(a in this.records)delete this.records[a]},getEngines:function(b){var c,d,e,f=a(b.target).val(),g=b.data.templateInstance,h=g.find(_.selectors.gradeSelectBox),i=h.parent(),j=g.parent().find(_.tags.stickyNavBar).index(g),k=g.find(_.selectors.versionSelectBox),l=k.siblings(_.tags.labelText);g.find(_.selectors.addVehicleBtn);if(w.info("getEngines"),fa?aa.saveRecord("gradeId",f):(i.addClass(_.classes.ajaxLoading),aa.addState([k,l],_.classes.disabled,_.classes.disabled),aa.addState(k,null,_.classes.disabled),aa.resetVersionSelectBox(g,!1),aa.clearRecords(),aa.saveRecord("gradeId",f),aa.removeState([k,l],_.classes.disabled,_.classes.disabled)),Y[f]?(aa.saveRecord("versionPossibilities",Y[f].versions),aa.removeState(h,null,_.classes.disabled),i.removeClass(_.classes.ajaxLoading),aa.loadVersionOptions(Y[f].versions,g)):aa.handleError(),c=h.prop("selectedIndex"),d=h.find("option:eq("+c+")").text(),e=parseInt(k.prop("selectedIndex")),h.parent().find(_.selectors.selectSpan).html(d),0===e){var m=1,n=y.data("version");0===j?(void 0!==n&&n.length>0&&!Z?(m=n,k.find('option[value="'+m+'"]').prop("selected",!0)):k.find("option:eq("+m+")").prop("selected",!0),k.trigger(_.events.change)):j>0&&(k.find("option:eq("+m+")").prop("selected",!0),k.trigger(_.events.change))}Z=!0},getVehicleSpecs:function(c,d,e){var f,g,h,i=c.val(),j=c.find("option:selected").text();e?(f=c.parents("form.configure-vehicle").find(_.selectors.vehicleGradeOptionSelected).text(),g=c.parents("form.configure-vehicle").find(_.selectors.vehicleGradeOptionSelected+"[value]").val()):(f=y.find(_.selectors.vehicleGradeSelect).text(),g=y.find(_.selectors.vehicleGradeSelect+"[value]").val()),w.info("getVehicleSpecs"),g=a.trim(g||b.keys(Y)[0]),void 0!==(h=Y[g].versions[i])&&(h.gradeKey=g,ca.publishVehicle(h,d,i,j,g,f))},loadVersionOptions:function(b,c){
var e=c.find(_.selectors.versionSelectBox),f=(e.siblings(_.tags.labelText),d.compile(V));w.info("loadVersionOptions"),a.each(b,function(a,b){var c=f(b);e.append(c)}),l.deferredEngine.notify(!0)},resetGradeSelectBox:function(a){var b=a.find(_.selectors.gradeSelectBox);b.find("option:first-child").prop("selected",!0),this.updateSelectText(b,aa.gradeSelectText)},resetVersionSelectBox:function(a,b){var c=a.find(_.selectors.versionSelectBox),d=c.siblings(_.tags.labelText),e=c.find("option:first-child");c.find("option").not(":first-child").remove(),e.prop("selected",!0),this.updateSelectText(c,aa.versionSelectText),b&&this.addState([c,d],_.classes.disabled,_.classes.disabled)},resetVehicleVersionSelectBox:function(a){var b=a.find(_.selectors.vehicleVersionsSelectBox);b.find("option:first-child").prop("selected",!0),this.updateSelectText(b,aa.versionSelectText)},updateSelectText:function(a,b){a.siblings(_.tags.labelText).text(b)},removeState:function(c,d,e){b.isArray(c)?a.each(c,function(a,b){b.removeClass(d).prop(e,!1)}):c.removeClass(d).prop(e,!1)},addState:function(c,d,e){b.isArray(c)?a.each(c,function(a,b){b.prop(e,!0).addClass(d)}):c.prop(e,!0).addClass(d)},updateVehicle:function(a,b,c){var d=a.prevAll().length;w.info("updateVehicle"),ba.splice(d,1),T-=1,a.empty(),this.getVehicleSpecs(b,d,!0)},removeVehicle:function(a){var b=a.prevAll().length,c=z.css("height");w.info("removeVehicle"),z.css("height",c),this.removeVehicleSpecs(b),ba.splice(b,1),T-=1,x?z.css("height","auto"):(a.addClass(_.classes.carFadeOut),setTimeout(function(){a.remove(),z.css("height","auto")},500))},removeVehicleSpecs:function(a){w.info("removeVehicleSpecs"),a+=1,G.find("td:nth-child("+a+")").remove(),J.find("td:nth-child("+a+")").remove(),H.find("td:nth-child("+a+")").remove(),G.find("tr").not(_.selectors.subsectionTableHeader).append(W),J.find("tr").not(_.selectors.subsectionTableHeader).append(X),H.find("tr").not(_.selectors.subsectionTableHeader).append(W)},tabSwitch:function(b){var c=a(b.target),d=c.data("tab-id"),e=_.analyticsManager,f=e.trackingVars.toggle,g=e.getTrackingObjectProperties(f),h={};h[g.componentId]=ka,h[g.toggleType]="Comparison-tool",h[g.toggleValue]=c.text(),e.track(f,h),c.addClass(_.classes.active).siblings().removeClass(_.classes.active),this.$tabsSelect.val(d),aa.$tabsActive=c.text(),this.$tablesList.eq(d).addClass(_.classes.active).siblings().removeClass(_.classes.active)},selectSwitch:function(b){var c=a(b.target),d=c.val();this.$tabsList.eq(d).trigger(_.events.click)},setupAccordion:function(){var b=[];y.find(_.selectors.accordionChildWrapper).each(function(){var c=[],d=a(this);d.children(_.selectors.accordionGroup).each(function(){var b=a(this),e=b.children(_.selectors.accordionChildHeader),f=b.children(_.selectors.accordionPanel);c.push(new h({$contentElement:f,$headerElement:e,isDisabled:!1,isOpen:0===c.length&&!d.hasClass(_.classes.packsStats)}))}),b.push(new g({$container:d,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:!0,items:c})),y.off(_.events.click,_.selectors.accordionChildHeader).on(_.events.click,_.selectors.accordionChildHeader,a.proxy(p,this))})},addStickyNavItem:function(a,b){M.append(this.stickyNavItemTemplate({title:a,imgSrc:b}))},updateStickyNavItem:function(a,b,c){var d=this.getVehicleImage(A,c);M.children("li:eq("+a+")").length?M.children("li:eq("+a+")").html('<img src="'+d+'" alt="" />'+b):this.addStickyNavItem(b,d)},removeStickyNavItem:function(a){M.children("li:eq("+a+")").remove()},updateNextStepsItem:function(a,b,c){var d=O.find("img:eq("+a+")"),e=O.find(_.selectors.name+":eq("+a+")"),f=P.find(".ctas:eq("+a+")");c?d.attr("src","").addClass("hidden"):d.attr("src",this.getVehicleImage(A,b.gradeKey)).removeClass("hidden"),e.html(this.nextSteps.headerTemplate(b)).addClass(_.classes.active).attr("tabindex","0"),f.html(this.nextSteps.ctasTemplate(b)),this.setVisibilityNextSteps()},setVisibilityNextSteps:function(){O.find(_.selectors.active).length?(N.removeClass(_.classes.hidden),this.setSelectedItem()):N.addClass(_.classes.hidden)},setSelectedItem:function(a){O.find(_.selectors.selected).length||(a=0),O.find(_.selectors.name+":eq("+a+")").addClass(_.classes.selected).siblings().removeClass(_.classes.selected),P.find(_.selectors.ctas+":eq("+a+")").addClass(_.classes.selected).siblings().removeClass(_.classes.selected)},removeNextStepsItem:function(a){O.append(this.nextSteps.infoClone).find(_.selectors.name+":eq("+a+")").remove(),P.append(this.nextSteps.ctasClone).find(_.selectors.ctas+":eq("+a+")").remove("")},isSelectedCTAVisible:function(){O.find(_.selectors.active).length&&!O.find(_.selectors.selected+":visible").length&&this.setSelectedItem(0)},changeNextStepsVehicle:function(b){if(b.type===_.events.click||b.type===_.events.keydown&&13===b.keyCode){var c=a(b.currentTarget),d=a(b.target);d.is("a")?r(d):da!==c.index()&&(da=c.index(),this.setSelectedItem(c.prevAll().length),q(b))}},scrollToTop:function(){a("html, body").animate({scrollTop:z.position().top-16},800)},showOverlay:function(b){var c=a(b.currentTarget);n.loadModal(c.data(_.data.info))},getVehicleImage:function(a,b){return a.find('div[value="'+b+'"]').find(_.tags.img).attr("src")}},ca.publishVehicle=function(b,c,d,e,g,h){var i,k,m=c>=0?"update":"add",n=-1,p={},q=F.parent().find(_.selectors.vehicleModel);w.info("publishVehicle"),"update"===m?(k=a(U).html(),i=z.find(_.selectors.addedVehicleContainer).eq(c),i.append(k)):(ca.resetGenerator(),B.before(U),i=B.prev()),T+=1,ea||(n=a.trim(aa.getRecord("gradeId")),p=aa.getRecord("versionPossibilities"),n!==a.trim(g)&&(n=g,Y&&(p=Y[n].versions))),ba.push(new s({$element:i,gradeId:n,versionPossibilities:p,vehicleData:b,vehicleModel:q.data("modelName"),vehicleGrade:h,vehicleVersion:e,vehicleGradeId:g,vehicleversionId:d})),f.init(i),j.renderDisclaimers(y),o(h,g,e,d,m),fa=!1,l.deferredReset.notify(!0)},ca.resetGenerator=function(){ea?aa.resetVehicleVersionSelectBox(B):(aa.resetGradeSelectBox(B),aa.resetVersionSelectBox(B,!0))},ca.bindEvents=function(){ea?C=E:D.off().on(_.events.change,{templateInstance:B},aa.getEngines),C.off().on(_.events.change,function(){aa.getVehicleSpecs(C)})},s.prototype.setVehicleTitle=function(){this.$element.find(_.selectors.vehicleTitle).text(this.vehicleData.name),aa.updateStickyNavItem(this.getIndex(),this.vehicleData.name,this.vehicleData.gradeKey),aa.updateNextStepsItem(this.getIndex(),this.vehicleData,!1)},s.prototype.setVehiclePrice=function(){var a,b=this.$element.find(_.selectors.universalPrice);b.length?(a=new k.UniversalPricing({$element:b,manualPriceFormatting:b.data("manualPriceFormatting"),priceUrl:b.data("priceUrl"),dataPath:b.data("modelPath"),modelKey:b.data("modelCode"),gradeKey:this.vehicleData.gradeKey,versionKey:this.vehicleData.versionKey,priceCode:b.data("priceCode")||"default",extraInfoPathPrefix:b.data("extraInfoPathPrefix"),extraInfoPathSuffix:this.vehicleData.path}),a.refreshPrice()):(b=this.$element.find(_.selectors.c_184B),b.length&&(b.data({modelGrade:this.vehicleData.gradeKey||this.vehicleGradeId,modelVersion:this.vehicleData.versionKey,priceDescription:this.vehicleData.priceDescription,priceDisclaimer:this.vehicleData.priceDisclaimer,priceDisabled:this.vehicleData.vehiclePriceDisabled,priceDisabledDescription:this.vehicleData.vehiclePriceDisabledDescription,priceDisabledLabel:this.vehicleData.vehiclePriceDisabledLabel,hasDescriptionOverrideCondition:this.vehicleData.priceDescriptionOverride,hasDisclaimerOverrideCondition:this.vehicleData.priceDisclaimerOverride}),t(this.$element)))},s.prototype.setVehicleImage=function(){var a=aa.getVehicleImage(A,this.vehicleGradeId);this.carImage=a,this.$element.find(_.tags.img).attr("src",a)},s.prototype.setSelectValues=function(){ea?(this.versionSelectBox.val(this.vehicleData.versionKey),aa.updateSelectText(this.versionSelectBox,this.versionSelectBox.find("option:selected").text())):(aa.loadVersionOptions(this.versionPossibilities,this.$element),this.gradeSelectBox.val(this.gradeId),this.versionSelectBox.val(this.vehicleData.versionKey),aa.updateSelectText(this.gradeSelectBox,this.gradeSelectBox.find("option:selected").text()),aa.updateSelectText(this.versionSelectBox,this.versionSelectBox.find("option:selected").text()))},s.prototype.setTableData=function(){var a=this.$element.prevAll().length;this.loadVehicleSpecifications(a,"techSpecs",G,"value"),this.loadVehicleEmissions(a,I,H,"value"),this.loadVehicleEquipment(a),this.loadVehiclePacks(a)},s.prototype.renderEmissionsDisclaimers=function(a){var c=a.closest(_.selectors.universalPrice),d=[{label:c.data(_.data.fuelConsumptionDisclaimerLabel),key:"combined"},{label:c.data(_.data.co2EmissionsDisclaimerLabel),key:"co2Emissions"},{label:c.data(_.data.efficiencyDisclaimerLabel),key:"efficiency"}],e=this.vehicleData;b.each(d,function(b){var c;e.fuelConsumption&&e.fuelConsumption[b.key]&&(c=e.fuelConsumption[b.key])&&c.value&&a.append("<p>"+b.label+" "+c.value+"</p>")}),a.find("p").length||a.hide()},s.prototype.loadVehicleSpecifications=function(a,c,d,e){var f=this.vehicleData.versionKey;b.each(this.vehicleData[c],function(c){b.each(c.specs,function(c){b.each(c,function(b){var c,g=d.find('tr[data-section-id="'+b.customKey+'"]');g.length&&(c=g.find(_.tags.cell).eq(a),c.data("isPopulated")&&f===c.data("vehicleVersion")||(c.html(b[e]),c.data("isPopulated",!0),c.data("vehicleVersion",f)))})})})},s.prototype.loadVehicleEmissions=function(a,c,d,e){var f,g=this.vehicleData;b.each(g.consumptionSpecs,function(b){var h,i;b&&(h=d.find('tr[data-section-id="'+b.groupKey+'"]'),h.length&&(f=document.createElement(_.tags.img),f.setAttribute("src",g.efficiencyImage),i=h.find(_.tags.cell).eq(a),i.html(b[e]),c.find(_.tags.cell).eq(a).empty().append(f)))})},s.prototype.loadVehicleEquipment=function(c){var d=b.flatten(b.pluck(this.vehicleData.equipmentSpecs,_.data.specsKey)),e=J.find(".data-row");a.each(e,function(b,d){a(d).find(_.tags.cell).eq(c).find(_.tags.labelText).removeClass(_.classes.iconOptional).removeClass(_.classes.iconIncluded).addClass(_.classes.iconNotIncluded)}),a.each(d,function(a,d){var e,f,g=J.find('tr[data-section-id="'+d.customKey+'"]');g.length&&(e=d.type.toLowerCase(),f=g.find(_.tags.cell).eq(c).find(_.tags.labelText),b.indexOf(["option","optional"],e)>=0?f.addClass(_.classes.iconOptional).removeClass(_.classes.iconNotIncluded):b.indexOf(["systematic","default","included"],e)>=0&&f.addClass(_.classes.iconIncluded).removeClass(_.classes.iconNotIncluded))})},s.prototype.removeVehiclePacks=function(a){this.packsBuildSpecsAccordion(a),ja=b.without(ja,b.findWhere(ja,{positionIndex:a})),this.packsLoadPrices(a),ia=b.without(ia,b.findWhere(ia,{positionIndex:a})),this.packsRenderSpecs(a)},s.prototype.loadVehiclePacks=function(a){var c=this.vehicleData.packs.packs,d=[],e={},f={};d=b.map(c,function(a){return{title:a.name,pack:a,subsections:a.specs}}),ha=b.uniq(b.union(d,ha),!1,function(a){return a.pack.name}),this.packsBuildSpecsAccordion(a),e={positionIndex:a,packList:c,versionKey:this.vehicleData.versionKey},ja.splice(a,1,e),f={positionIndex:a,packsListSpecs:b.flatten(b.pluck(c,_.data.specsKey))},ia.splice(a,1,f),this.packsLoadPrices(a),this.packsRenderSpecs(a)},s.prototype.packsBuildSpecsAccordion=function(){var a=d.compile(y.find(_.selectors.packsTemplate).html());ha.length&&(y.find(_.selectors.packsStats).empty().append(a({sections:ha})),aa.setupAccordion())},s.prototype.packsLoadPrices=function(){var c=a(_.selectors.packsSection).data(_.data.packIncluded),d=a(_.selectors.packsSection).data(_.data.packNotIncluded),e=K.find(_.selectors.priceRow);b.each(ja,b.bind(function(f,g){a(e).each(function(){a(this).find(_.tags.cell).eq(g).find(_.tags.priceValue).text(_.operators.MIDDLE_DIVIDER).removeClass(_.classes.unavailablePrice).removeClass(_.classes.availablePrice),a(this).find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice).removeClass(_.classes.availablePrice)}),f.packList.length>0&&b.each(f.packList,b.bind(function(a){var e;e=K.find("[data-accordion-id="+a.pricesKeyList[0]+"] "+_.selectors.priceRow),e.length&&(a.type===_.packTypes.option?""===a.price||b.isUndefined(a.price)?(e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text(_.operators.MIDDLE_DIVIDER).removeClass(_.classes.unavailablePrice).addClass(_.classes.availablePrice),e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice).addClass(_.classes.availablePrice)):(e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text(this.formatCurrency(a.price)).removeClass(_.classes.unavailablePrice).addClass(_.classes.availablePrice),e.find(_.tags.cell).eq(g).find(_.tags.labelText).text(HELIOS.components.c059B.priceTitle).removeClass(_.classes.unavailablePrice).addClass(_.classes.availablePrice)):(a.type===_.packTypes.forbidden&&(""===d?(e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.availablePrice).removeClass(_.classes.unavailablePrice),e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text("").removeClass(_.classes.availablePrice).addClass(_.classes.unavailablePrice)):(e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice),e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text(d).removeClass(_.classes.unavailablePrice))),a.type!==_.packTypes.systematic&&a.type!==_.packTypes.default||(""===c?(e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.availablePrice).removeClass(_.classes.unavailablePrice),e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text("").removeClass(_.classes.availablePrice).addClass(_.classes.unavailablePrice)):(e.find(_.tags.cell).eq(g).find(_.tags.labelText).text("").removeClass(_.classes.unavailablePrice),e.find(_.tags.cell).eq(g).find(_.tags.priceValue).text(c).removeClass(_.classes.unavailablePrice)))))},this))},this))},s.prototype.formatCurrency=function(a){var c=parseFloat(a),d=new m({HELIOS:_.HELIOS});return b.isFinite(c)?d.asCurrency(c):a},s.prototype.packsRenderSpecs=function(){b.each(ia,function(a){b.each(a.packsListSpecs,function(c){var d,e,f=K.find('tr[data-section-id="'+c.key+'"]');f.length&&(d=c.type.toLowerCase(),e=f.find(_.tags.cell).eq(a.positionIndex).find(_.tags.labelText),b.contains(_.data.packsOptional,d)?e.empty().addClass(_.classes.iconNotIncluded).removeClass(_.classes.iconIncluded):b.contains(_.data.packsRequired,d)&&e.empty().addClass(_.classes.iconIncluded).removeClass(_.classes.iconNotIncluded))})}),ia.length?y.find(_.selectors.sectionHide).removeClass(_.classes.hideTabTitle):(y.find(_.selectors.sectionHide).addClass(_.classes.hideTabTitle),y.find(_.selectors.tabs).first().trigger(_.events.click))},s.prototype.removeVehicle=function(){var b=this.getIndex(),c=ba[b];aa.removeVehicle(this.$element),aa.removeStickyNavItem(b),aa.removeNextStepsItem(b),o(a.trim(c.vehicleGrade),c.vehicleGradeId,c.vehicleVersion,c.vehicleVersion,"remove"),this.removeVehiclePacks(b)},s.prototype.toggleEditMode=function(b){var c=this.getIndex(),d=ba[c];b&&o(a.trim(d.vehicleGrade),d.vehicleGradeId,d.vehicleVersion,d.vehicleVersionId,"edit")},s.prototype.updateVehicle=function(a){a.preventDefault(),this.vehicleData.versionKey!==this.versionSelectBox.val()?aa.updateVehicle(this.$element,this.versionSelectBox,this.addVehicleBtn):this.toggleEditMode()},s.prototype.enableUpdateBtn=function(){this.addVehicleBtn.hasClass(_.classes.eleDisabled)&&aa.removeState(this.addVehicleBtn,_.classes.eleDisabled,"disabled")},s.prototype.getIndex=function(){return this.$element.prevAll().length},s.prototype.bindEvents=function(){ea||this.gradeSelectBox.off().on(_.events.change,{templateInstance:this.$element},function(b){var c=a(b.currentTarget).parents("ul.comparison-selection-holder"),d=a(b.currentTarget).parents("li.added-vehicle");c.find(_.tags.stickyNavBar).index(d);aa.resetVersionSelectBox(d,!0),aa.getEngines(b)}),this.versionSelectBox.off().on(_.events.change,this.updateVehicle.bind(this))},{init:v,pageCtrlHandler:aa}}),define("c_059C",["jquery","underscore","getConfiguratorCode","c_184B","handlebars","logger","customSelect","accordion","accordionItem","waypoints","disclaimers","c_184","numberFormat","c_100"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(a,c,d,e,f){var g=x.data(ka.data.serviceModel),h=ma.length,i=ka.analyticsManager,j=i.trackingVars.vehicleCompare,k=i.getTrackingObjectProperties(j),l={};l[k.componentId]=ta,l[k.vehicleGrade]=a,l[k.vehicleGradeId]=c,l[k.vehicleVersion]=d,l[k.vehicleVersionId]=e,l[k.vehicleCompare]=g?g.toLowerCase():"",l[k.vehicleGradeCompare]=b.pluck(ma,ka.data.vehicleGradeReference).reverse().join(","),l[k.vehicleVersionCompare]=b.pluck(ma,ka.data.vehicleVersionReference).reverse().join(","),l[k.numVehicles]=h,l[k.interactionType]=f,l[k.vehicleModel]=g,i.tag(j,l)}function p(b){var c=a(b.target),d=c.attr(ka.attr.dataState),e=a.trim(c.text().toLowerCase()),f=ka.analyticsManager,g=f.trackingVars.accordionExpansion,h=f.getTrackingObjectProperties(g),i=c.hasClass(ka.classes.emissionAccordion),j={};d===ka.attr.open&&(j[h.componentId]=ta,j[h.accordionType]=i?ka.constants.EMISSION:ka.constants.SPECIFICATION,j[h.accordionText]=e,f.track(g,j))}function q(b){var c=a(b),d=c.attr(ka.attr.href)||"",e=c.text(),f=ka.analyticsManager,g=f.trackingVars.genericClick,h=f.getTrackingObjectProperties(g),i={};i[h.componentId]=ta,i[h.destination]=d,i[h.locationInPage]="comparison-tool",i[h.buttonText]=e,f.track(g,i)}function r(a,b,d,e,f){var g=x.data(ka.data.serviceDataPath),h=e.find(ka.selectors.configureLink).attr(ka.attr.href);c.configureRemoteServices(a,b,d,g,h,f).done(function(a){e.find(ka.selectors.configureLink).attr(ka.attr.href,a)}).fail(function(){e.find(ka.selectors.configureLink).attr(ka.attr.href,h)})}function s(a){var b,c,d,e;a=a||{},d=a.vehicleGradeId||"",e=a.vehicleVersionId||"";for(b in a)this[b]=a[b];oa&&(this.gradeSelectBox=this.$element.find(ka.selectors.gradeSelectBox),la.resetGradeSelectBox(D,!0)),pa&&(this.versionSelectBox=this.$element.find(ka.selectors.versionSelectBox)),this.$element.attr(ka.attr.gradeID,d),this.$element.attr(ka.attr.versionID,e),c=this.$element.find(ka.selectors.universalPrice),this.addVehicleBtn=this.$element.find(ka.selectors.addVehicleBtn),this.setCtas(),this.bindEvents(),this.setVehicleImage(),this.setVehicleImageDisclaimer(),this.setVehicleTitle(),this.setTableData(),this.renderEmissionsDisclaimers(c.find(ka.selectors.emissionsDisclaimers)),this.setVehiclePrice(),this.setKeyFeatures(),la.getTallestBlock()}function t(a){d.init({$el:a,analyticsManager:ka.analyticsManager,financeManager:ka.financeManager,HELIOS:ka.HELIOS,heliosAppContext:ka.heliosAppContext,numberFormat:ka.numberFormat,priceCodes:ka.priceCodes,priceManager:ka.priceManager,window:ka.window})}function u(){T=0,B=x.find(ka.selectors.comparisonHolder),J=x.find(ka.selectors.compareStats),K=x.find(ka.selectors.compareEmissions),L=x.find(ka.selectors.efficiencyChart),M=x.find(ka.selectors.packsStats),D=x.find(ka.selectors.vehicleGenerator),C=x.find(ka.selectors.imagesPlaceholder),Q=x.find(ka.selectors.tooltipEnabled),oa=D.find(ka.selectors.gradeSelectBox).length,pa=D.find(ka.selectors.versionSelectBox).length,da=x.find(ka.selectors.accessoriesStats),fa=x.find(ka.selectors.noCarAvailableMessage),oa&&(F=D.find(ka.selectors.gradeSelectBox)),pa&&(E=D.find(ka.selectors.versionSelectBox)),G=D.find(ka.selectors.addVehicleBtn),S=x.find(ka.selectors.gradeOptionTemplate).html(),U=x.find(ka.selectors.vehicleTemplate).html(),V=x.find(ka.selectors.versionOptionTemplate).html(),W=x.find(ka.selectors.keyFeaturesListTemplate).html(),X=x.find(ka.selectors.ctaTemplate).html(),N=x.find(ka.selectors.stickyNav),O=x.find(ka.selectors.waypointActive),P=a(ka.selectors.dockedNav),Y=J.find(ka.tags.cell).first().prop(ka.prop.outerHTML),aa="cta-configure",I=x.find(ka.selectors.maxVehicleAlert),H=x.find(ka.selectors.maxVehicleClose),z=x.find(ka.selectors.filters),y=x.find(ka.selectors.c_0996),A=x.find(ka.selectors.filterToggle)}function v(b){return ka=a.extend({},ja,b),x=a(ka.selectors.root),!!x.length&&(ca=ka.HELIOS.components.c059C.grades,ba=ka.HELIOS.components.c059C.filteredData.grades,ha=!1,ga={},ia=[],!!ca&&(w=new f({prefix:"C59C"}),u(),na.bindEvents(),la.init(),void w.info("init")))}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja={events:{click:"click",change:"change",keyPress:"keypress"},classes:{elDisabled:"btn-disabled",disabled:"disabled",active:"active",selected:"selected",hidden:"hidden",carFadeOut:"fade-out",iconNotIncluded:"icon-not-included",iconIncluded:"icon-included",iconOptional:"icon-optional",stickyTitles:"sticky-titles",dockedNavActive:"docked-nav-active",vehicleHeadingActive:"vehicle-heading-active",hideBtnAlphaRight:"hide-btn-alpha-right",packsStats:"packs-stats",hideTabTitle:"hide-tab-title",includeFeature:"include-feature",availablePrice:"available-price",unavailablePrice:"unavailable-price",wrapperLoaded:"loader",vehicleGeneratorArrow:["vehicle-generator-arrow-1","vehicle-generator-arrow-2","vehicle-generator-arrow-3","vehicle-generator-arrow-4"],ctaPrimary:"btn-alpha-right",ctaSecondary:"btn-beta-right",standardIcon:"standard-icon",noCarAvailable:"not-available",emissionAccordion:"emissions-accordion"},selectors:{c_184B:".c_184B",root:".c_059C",universalPrice:".c_184",comparisonHolder:".comparison-selection-holder",imagesPlaceholder:".grade-images-placeholder",vehicleGenerator:".vehicle-generator",gradeSelectBox:".grade-select",gradeSelectBoxOption:".vehicle-generator .grade-select option",gradeOptionTemplate:".grade-select-option",firstElement:":eq(0)",versionSelectBox:".engine-select",selectSpan:".selectedValue",addVehicleBtn:".add-vehicle-button",addVehicleVersionBtn:".add-vehicle-version-button",removeVehicleBtn:".remove-vehicle-btn",vehicleTemplate:".vehicle-template",versionOptionTemplate:".version-select-option",vehicleTitle:".vehicle-model-title",vehicleVersion:".vehicle-model-version",vehicleImage:".vehicle-image",vehicleImageDisclaimer:".vehicle-image-disclaimer",addedVehicleContainer:".added-vehicle",compareStats:".specifications-stats",compareEmissions:".compare-emissions",efficiencyChart:".efficiency-chart",packsStats:".packs-stats",subsectionTableHeader:".subsection-header",tabs:".tabs > .tab-title",dataTabSection:".data-tab-section",tabsSelect:".section-headers select",accordionChildWrapper:".accordion-child-wrapper",accordionGroup:".accordion-group",accordionChildHeader:".accordion-child-header",accordionPanel:".accordion-panel",packPriceValue:"p.available-price",stickyNav:".container-sticky > ul",waypointActive:".waypoint-active",stickyNavItemTemplate:".sticky-nav-item",fullPrice:".full-price",dockedNav:".docked-nav-wrapper",name:".name",active:".active",selected:".selected",vehicleGradeSelect:".vehicle-generator .grade-select option:selected",vehicleVersionSelect:".vehicle-generator .engine-select",vehicleModel:"h3",emissionsDisclaimers:".emissions-disclaimers",datarow:".data-row",priceRow:".price-row",sectionHide:".section-headers .tab-title:last-child",packsTemplate:".packs-template",tooltipEnabled:".tooltip-enabled",packsSection:".packs-section",specskey:".specs-key",packIncluded:".included",packNotIncluded:".not-included",optionFirstChild:"option:first-child",optionSelected:"option:selected",firstChild:":first-child",wrapperLoaded:".loader",errorNoResultsMessage:".error-no-results",errorNoCarsMessage:".error-no-cars",vehicleHeading:".vehicle-heading",headerSticky:".header-sticky",borderBottomSticky:".border-bottom-sticky",stickyVehicleHeading:".header-sticky .vehicle-heading",headerStickyCta:".header-sticky .ctas",vehiclePrice:".vehicle-details-price",vehicleFeatures:".features-list",vehicleFeaturesUl:".features-list-ul",keyFeaturesListTemplate:".usp-list",c_0996:".c_099-6",filters:".filters",ctaBlock:".ctas",ctaTemplate:".cta-template",configureLink:".cta-configure",maxVehicleAlert:".max-vehicle-notification-wrapper",maxVehicleClose:".max-vehicle-notification .close",filterToggle:".filters-toggle",accessoriesStats:".accessories-stats",accessoryRow:".accessory-row",noCarAvailableMessage:".no-car-available-message",mobileTabs:".change-compare",accessoriesTd:".accessories-stats .accessory-row td"},operators:{MIDDLE_DIVIDER:"-",DOUBLE_MIDDLE_DIVIDER:"--",VERSIONSEPARATOR:"@"},constants:{NOT_AVAILABLE:"Not available",PACKS_TAB_LABEL:"packs",STANDARD:"included",OPTIONAL:"optional",TECHNICAL:"technical",EQUIPMENT:"equipment",EMISSION:"emission",SPECIFICATION:"specification",SYSTEMATIC:"systematic",DEFAULT:"default",PACK:"pack",enterKeycode:13},tags:{stickyNavBar:"li",img:"img",priceValue:"p",row:"tr",cell:"td",labelText:"span",option:"option",select:"select",input:"input"},data:{fuelConsumptionDisclaimerLabel:"fuel-consumption-disclaimer-label",co2EmissionsDisclaimerLabel:"co2-emissions-disclaimer-label",efficiencyDisclaimerLabel:"efficiency-disclaimer-label",vehicleGradeReference:"vehicleGrade",vehicleVersionReference:"vehicleVersion",packsOptional:["option_pack"],packsRequired:["pack"],specsKey:"specs",info:"info",showEngine:"show-engine",tabID:"tab-id",packIncluded:"included-label",packNotIncluded:"not-included-label",modelCode:"model-code",urlExtension:"url-extension",serviceModel:"service-model",serviceDataPath:"service-datapath",isPopulated:"isPopulated",vehicleVersion:"vehicleVersion"},attr:{href:"href",src:"src",open:"open",dataState:"data-state",class:"class",placeholder:"placeholder",closed:"closed",isPopulated:"data-is-populated",vehicleVersion:"data-vehicle-version",gradeID:"data-grade-id",versionID:"data-version-id",tabSectionID:"data-tab-section-id"},cssValues:{auto:"auto",height:"height",minHeight:"min-height"},prop:{selected:"selected",disabled:"disabled",outerHTML:"outerHTML",innerText:"innerText"},packTypes:{option:"OPTION",forbidden:"FORBIDDEN",systematic:"SYSTEMATIC",default:"DEFAULT",optionPack:"OPTION_PACK",pack:"PACK"}},ka=null,la={},ma=[],na={},oa=!1,pa=!1,qa=[],ra=[],sa=[],ta="C59C_Comparison_List";return la={$tabsList:"",$tabsActive:"",$tablesList:"",stickyNavItemTemplate:"",records:{},defaultLabels:function(){oa&&(this.gradeSelectText=F.find(ka.selectors.optionFirstChild).val()),pa&&(this.versionSelectText=E.find(ka.selectors.optionFirstChild).val())},changeFilter:function(a){if(!(ba=a.grades||{})||b.isEmpty(ba))return this.handleError(),!1;ha=!1,na.resetGenerator(!0)},init:function(){this.defaultLabels(),this.selectRequiredElements(),this.$tabsList.first().addClass(ka.classes.active),this.$tabsActive=this.$tabsList.first().text(),this.setupAccordion(),this.bindEvents(),this.compileTemplate(),this.preSelectCarToCompareOnLoad()},preSelectCarToCompareOnLoad:function(){var b,c,d,e,f,g=-1;if(a.each(ba,function(f,g){if(g.containsBaseGrade)return b=g.gradeKey,d=g.name,a.each(ba[f].versions,function(a,b){if(b.isBaseGrade)return c=b.versionKey,e=b.name,!1}),!1}),!b||!ca[b].versions[c])return la.handleError(),!1;f=ca[b].versions[c],f.gradeUsp=ca[b].usp,f.gradeKey=b,d=oa?d:e,na.publishVehicle(f,g,c,e,b,d),x.find(ka.selectors.wrapperLoaded).removeClass(ka.classes.wrapperLoaded),a(ka.selectors.vehiclePrice).eq(0).waypoint(function(){var b=a(ka.selectors.headerSticky),c=a(ka.selectors.addedVehicleContainer).width();b.toggleClass(ka.classes.vehicleHeadingActive).siblings(ka.selectors.ctaBlock).toggleClass(ka.classes.hideBtnAlphaRight),b.width(c+1),la.getTallestStickyBlock()},{offset:50})},stickyHeaderWidthAdjustment:function(){var b=a(ka.selectors.addedVehicleContainer).width();a(ka.selectors.headerSticky).width(b+1)},compileTemplate:function(){var a;a=x.find(ka.selectors.stickyNavItemTemplate).html(),this.stickyNavItemTemplate=e.compile(a)},handleError:function(){ha=!0,la.disableSelectBox(),x.find(ka.selectors.wrapperLoaded).removeClass(ka.classes.wrapperLoaded),D.find(ka.selectors.errorNoCarsMessage).addClass(ka.classes.hidden),D.find(ka.selectors.errorNoResultsMessage).removeClass(ka.classes.hidden),T||this.showNoCarMessage()},selectRequiredElements:function(){this.$tabsList=x.find(ka.selectors.tabs),this.$tablesList=x.find(ka.selectors.dataTabSection),this.$tabsSelect=x.find(ka.selectors.tabsSelect)},bindEvents:function(){if(O.waypoint(function(){ma.length&&x.toggleClass(ka.classes.stickyTitles)},{offset:0}),P.waypoint(function(){B.toggleClass(ka.classes.dockedNavActive)}),this.$tabsList.on(ka.events.click,b.bind(this.tabSwitch,this)),this.$tabsList.on(ka.events.keyPress,b.bind(this.tabSwitch,this)),this.$tabsSelect.on(ka.events.change,b.bind(this.selectSwitch,this)),N.on(ka.events.click,ka.tags.stickyNavBar,this.scrollToTop),ka.window.matchMedia&&ka.window.matchMedia("all").addListener){var a=ka.window.matchMedia(ka.HELIOS.config.common.mediaQuery.is.small),c=ka.window.matchMedia(ka.HELIOS.config.common.mediaQuery.is.medium),d=ka.window.matchMedia(ka.HELIOS.config.common.mediaQuery.is.large);a.addListener(this.checkForBreakpointOnResize.bind(this)),c.addListener(this.checkForBreakpointOnResize.bind(this)),d.addListener(this.checkForBreakpointOnResize.bind(this))}x.on(ka.events.click,ka.selectors.tooltipEnabled,this.showOverlay)},checkForBreakpointOnResize:function(a){a.matches&&(this.filterStatus(),this.getTallestBlock(),this.stickyHeaderWidthAdjustment(),this.getTallestStickyBlock())},saveRecord:function(a,b){this.records[a]=b},getRecord:function(a){return this.records[a]},clearRecords:function(){var a;for(a in this.records)delete this.records[a]},getGrades:function(a){var b=a.find(ka.selectors.gradeSelectBox),c=a.find(ka.selectors.versionSelectBox),d=a.find(ka.selectors.addVehicleBtn);la.addState(b,null,ka.classes.disabled),la.addState(c,null,ka.classes.disabled),la.loadGradeOptions(a,ba),la.addState(d,ka.classes.elDisabled,ka.classes.disabled)},getEngines:function(b){var c=a(b.target).val(),d=b.data.templateInstance,e=d.find(ka.selectors.gradeSelectBox),f=d.find(ka.selectors.versionSelectBox),g=f.siblings(ka.tags.labelText),h=d.find(ka.selectors.addVehicleBtn),i=e.attr(ka.attr.placeholder);return w.info("getEngines"),la.addState([f,g],ka.classes.disabled,ka.classes.disabled),la.addState(h,ka.classes.elDisabled,ka.classes.disabled),c!==i&&(pa?(la.resetVersionSelectBox(d,oa),la.clearRecords(),la.saveRecord("gradeId",c),void(ca[c]?(la.saveRecord("versionPossibilities",ca[c].versions),la.loadVersionOptions(c,d)):la.handleError())):(la.removeState(h,ka.classes.elDisabled,ka.classes.disabled),!1))},getVehicleSpecs:function(a,c,d,e,f){var g,h,i,j=d?d.val():void 0,k=d?d.find(ka.selectors.optionSelected).text():void 0;g=c?c.find(ka.selectors.optionSelected).text():k,h=c?c.val():void 0,w.info("getVehicleSpecs"),this.addState(a,ka.classes.elDisabled,ka.classes.disabled),h||(h=b.findKey(ca,function(a){return a.versions[j]})),j||(j=Object.keys(ca[h].versions)[0]),i=ca[h].versions[j],i.gradeUsp=ca[h].usp,i.gradeKey=h,na.publishVehicle(i,e,j,k,h,g)},updateFilteredData:function(c){var d=a.extend(!0,{},c);return b.each(ia,function(a,c){var e,f,g=ia[c].gradeID,h=ia[c].versionID;g in d&&(e=d[g].versions,e.length>=1&&(f=b.filter(e,function(a,b){if(e[b].versionKey!==h)return a})),e=f,d[g].versions=e,pa&&!e.length&&delete d[g],pa||g!==d[g].gradeKey||delete d[g])}),d},loadGradeOptions:function(c,d){var f=c.find(ka.selectors.gradeSelectBox),g=e.compile(S);if(w.info("loadGradeOptions"),ia&&ia.length&&(!(d=this.updateFilteredData(d)||{})||b.isEmpty(d)))return la.disableSelectBox(),D.find(ka.selectors.errorNoResultsMessage).addClass(ka.classes.hidden),D.find(ka.selectors.errorNoCarsMessage).removeClass(ka.classes.hidden),!1;a.each(d,function(a,b){var c=g(b);f.append(c)}),D.find(ka.selectors.errorNoCarsMessage).addClass(ka.classes.hidden),D.find(ka.selectors.errorNoResultsMessage).addClass(ka.classes.hidden),this.removeState([f],ka.classes.disabled,ka.classes.disabled)},loadVersionOptions:function(c,d){var f,g=d.find(ka.selectors.versionSelectBox),h=g.siblings(ka.tags.labelText),i=e.compile(V);if(ia&&ia.length){if(f=this.updateFilteredData(ba)||{},!oa&&!f||b.isEmpty(f))return la.disableSelectBox(),D.find(ka.selectors.errorNoResultsMessage).addClass(ka.classes.hidden),
D.find(ka.selectors.errorNoCarsMessage).removeClass(ka.classes.hidden),!1}else f=ba;w.info("loadVersionOptions"),c?a.each(f[c].versions,function(a,b){var c=i(b);g.append(c)}):b.each(f,function(b,c){a.each(f[c].versions,function(a,b){var c=i(b);g.append(c)})}),D.find(ka.selectors.errorNoCarsMessage).addClass(ka.classes.hidden),D.find(ka.selectors.errorNoResultsMessage).addClass(ka.classes.hidden),this.removeState([g,h],ka.classes.disabled,ka.classes.disabled)},disableSelectBox:function(){var a=D.find(ka.selectors.gradeSelectBox),b=D.find(ka.selectors.versionSelectBox),c=D.find(ka.selectors.addVehicleBtn);this.updateSelectText(a,la.gradeSelectText),this.updateSelectText(b,la.versionSelectText),la.addState(a,null,ka.classes.disabled),la.addState(b,null,ka.classes.disabled),la.addState(c,ka.classes.elDisabled,ka.classes.disabled)},resetGradeSelectBox:function(a,b){var c=a.find(ka.selectors.gradeSelectBox);c.find(ka.selectors.optionFirstChild).prop(ka.prop.selected,!0),this.updateSelectText(c,la.gradeSelectText),b&&(c.find(ka.tags.option).not(ka.selectors.firstChild).remove(),this.getGrades(a))},resetVersionSelectBox:function(a,b){var c=a.find(ka.selectors.versionSelectBox),d=c.siblings(ka.tags.labelText);c.find(ka.selectors.optionFirstChild).prop(ka.prop.selected,!0),this.updateSelectText(c,la.versionSelectText),c.find(ka.tags.option).not(ka.selectors.firstChild).remove(),b?this.addState([c,d],ka.classes.disabled,ka.classes.disabled):la.loadVersionOptions(!1,a)},updateSelectText:function(a,b){a.siblings(ka.tags.labelText).text(b)},removeState:function(c,d,e){b.isArray(c)?a.each(c,function(a,b){b.removeClass(d).prop(e,!1)}):c.removeClass(d).prop(e,!1)},addState:function(c,d,e){b.isArray(c)?a.each(c,function(a,b){b.prop(e,!0).addClass(d)}):c.prop(e,!0).addClass(d)},removeVehicle:function(a){var c,d=a.prevAll().length,e=B.css(ka.cssValues.height),f=a.attr(ka.attr.gradeID),g=a.attr(ka.attr.versionID);c=b.filter(ia,function(a,b){return ia[b].gradeID===f&&ia[b].versionID!==g?a:ia[b].gradeID!==f&&ia[b].versionID!==g?a:void 0}),ia=c,w.info("removeVehicle"),B.css(ka.cssValues.height,e),this.removeVehicleSpecs(d),ma.splice(d,1),ra.splice(d,1),sa.splice(d,1),T-=1,a.addClass(ka.classes.carFadeOut),na.resetGenerator(!0),setTimeout(function(){a.remove(),B.css(ka.cssValues.height,ka.cssValues.auto),la.getTallestBlock(),la.filterStatus()},500),T||this.showNoCarMessage()},showNoCarMessage:function(){var b=K.find(ka.selectors.accordionChildHeader).attr(ka.attr.dataState);fa.removeClass(ka.classes.hidden),this.$tabsList.removeClass(ka.classes.active).addClass(ka.classes.disabled),this.$tablesList.removeClass(ka.classes.active),x.find(ka.selectors.mobileTabs).addClass(ka.classes.disabled).siblings(ka.tags.select).prop(ka.prop.disabled,!0),K.find(ka.tags.stickyNavBar).addClass(ka.classes.disabled),b===ka.attr.open&&K.find(ka.selectors.vehicleModel).trigger(ka.events.click),a.isNestedProp(ka.HELIOS,["config","common","mediaQuery","is","small"])&&a.isNestedProp(ka.HELIOS,["config","common","mediaQuery","is","medium"])&&(ka.window.matchMedia(ka.HELIOS.config.common.mediaQuery.is.small).matches||ka.window.matchMedia(ka.HELIOS.config.common.mediaQuery.is.medium).matches)&&this.$tabsList.first().addClass(ka.classes.active)},removeVehicleSpecs:function(a){w.info("removeVehicleSpecs"),Z=M.find(ka.tags.row).not(ka.selectors.subsectionTableHeader&&ka.selectors.priceRow).find(ka.tags.cell).first().prop(ka.prop.outerHTML),$=M.find(ka.selectors.priceRow).find(ka.tags.cell).first().prop(ka.prop.outerHTML),_=K.find(ka.tags.row).not(ka.selectors.subsectionTableHeader).find(ka.tags.cell).first().prop(ka.prop.outerHTML),ea=x.find(ka.selectors.accessoriesTd).first().prop(ka.prop.outerHTML),a+=1,J.find("td:nth-child("+a+")").remove(),M.find("td:nth-child("+a+")").remove(),da.find("td:nth-child("+a+")").remove(),K.find("td:nth-child("+a+")").remove(),J.find(ka.tags.row).not(ka.selectors.subsectionTableHeader).append(Y),M.find(ka.tags.row).not(ka.selectors.subsectionTableHeader).not(ka.selectors.priceRow).append(Z).find("td:last-child span").text(ka.operators.DOUBLE_MIDDLE_DIVIDER).removeAttr(ka.attr.class),M.find(ka.selectors.priceRow).not(ka.selectors.subsectionTableHeader).append($),M.find(ka.selectors.priceRow).find("td:last-child span").text("").removeClass(ka.classes.availablePrice+" "+ka.classes.unavailablePrice),M.find(ka.selectors.priceRow).find("td:last-child p").text("").removeClass(ka.classes.availablePrice+" "+ka.classes.unavailablePrice+" "+ka.classes.noCarAvailable+" "+ka.classes.standardIcon),K.find(ka.tags.row).not(ka.selectors.subsectionTableHeader).append(_).find("td:last-child").text(""),da.find(ka.selectors.accessoryRow).append(ea).find("td:last-child span").removeAttr(ka.attr.class)},tabSwitch:function(b){var c,d,e,f,g,h={};b.type!==ka.events.click&&b.which!==ka.constants.enterKeycode||(c=a(b.target),d=c.data(ka.data.tabID),e=ka.analyticsManager,f=e.trackingVars.toggle,g=e.getTrackingObjectProperties(f),h[g.componentId]=ta,h[g.toggleType]="Comparison-tool",h[g.toggleValue]=c.text(),c.hasClass(ka.classes.active)||e.track(f,h),c.addClass(ka.classes.active).siblings().removeClass(ka.classes.active),this.$tabsSelect.val(d),la.$tabsActive=c.text(),a(ka.selectors.dataTabSection+"["+ka.attr.tabSectionID+"="+d+"]").addClass(ka.classes.active).siblings().removeClass(ka.classes.active))},selectSwitch:function(b){var c=a(b.target),d=c.val();this.$tabsList.eq(d).trigger(ka.events.click)},setupAccordion:function(){var b=[];x.find(ka.selectors.accordionChildWrapper).each(function(){var c=[],d=a(this);d.children(ka.selectors.accordionGroup).each(function(){var b=a(this),d=b.children(ka.selectors.accordionChildHeader),e=b.children(ka.selectors.accordionPanel),f=!this.hasAttribute(ka.attr.dataState);c.push(new i({$contentElement:e,$headerElement:d,isDisabled:!1,isOpen:0===c.length&&f}))}),b.push(new h({$container:d,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:!0,items:c})),x.off(ka.events.click,ka.selectors.accordionChildHeader).on(ka.events.click,ka.selectors.accordionChildHeader,a.proxy(p,this))})},addStickyNavItem:function(a){N.append(this.stickyNavItemTemplate({title:a}))},updateStickyNavItem:function(a,b){N.children("li:eq("+a+")").length?N.children("li:eq("+a+")").html(b):this.addStickyNavItem(b)},removeStickyNavItem:function(a){N.children("li:eq("+a+")").remove()},scrollToTop:function(){a("html, body").animate({scrollTop:B.position().top-16},800)},showOverlay:function(b){var c=a(b.currentTarget);n.loadModal(c.data(ka.data.info))},getTallestBlock:function(){var b,c=[x.find(ka.selectors.vehicleHeading),x.find(ka.selectors.vehicleFeatures),x.find(ka.selectors.vehicleImage)];if(x.find(ka.selectors.vehicleHeading).removeAttr("style"),x.find(ka.selectors.vehiclePrice).removeAttr("style"),x.find(ka.selectors.vehicleFeatures).removeAttr("style"),x.find(ka.selectors.ctaBlock).removeAttr("style"),x.find(ka.selectors.vehicleImage).removeAttr("style"),!ma.length)return!1;c.forEach(function(c,d){b=0,x.find(c).each(function(c,d){b<=a(d).outerHeight()&&(b=a(d).outerHeight())}),a(c).css("min-height",b+"px")})},filterStatus:function(){var b,c,d;switch(a.isNestedProp(ka.HELIOS,["config","common","mediaQuery","is","small"])&&(b=ka.window.matchMedia(ka.HELIOS.config.common.mediaQuery.is.small).matches),a.isNestedProp(ka.HELIOS,["config","common","mediaQuery","is","medium"])&&(c=ka.window.matchMedia(ka.HELIOS.config.common.mediaQuery.is.medium).matches),a.isNestedProp(ka.HELIOS,["config","common","mediaQuery","is","large"])&&(d=ka.window.matchMedia(ka.HELIOS.config.common.mediaQuery.is.large).matches),d&&z.removeAttr("style"),ma.length>=4&&d?(y.addClass(ka.classes.disabled),z.find(ka.tags.input).prop(ka.prop.disabled,!0),I.removeClass(ka.classes.hidden)):ma.length>=3&&c?(A.addClass(ka.classes.elDisabled).prop(ka.prop.disabled,!0),z.find(ka.tags.input).prop(ka.prop.disabled,!0),I.removeClass(ka.classes.hidden)):ma.length>=2&&b?(A.addClass(ka.classes.elDisabled).prop(ka.prop.disabled,!0),z.find(ka.tags.input).prop(ka.prop.disabled,!0),I.addClass(ka.classes.hidden)):(y.removeClass(ka.classes.disabled),A.removeClass(ka.classes.elDisabled).prop(ka.prop.disabled,!1),z.find(ka.tags.input).prop(ka.prop.disabled,!1),I.addClass(ka.classes.hidden)),ma.length){case 0:a(ka.selectors.filters).removeClass(ka.classes.vehicleGeneratorArrow.join(" ")).addClass(ka.classes.vehicleGeneratorArrow[0]);break;case 1:a(ka.selectors.filters).removeClass(ka.classes.vehicleGeneratorArrow.join(" ")).addClass(ka.classes.vehicleGeneratorArrow[1]);break;case 2:a(ka.selectors.filters).removeClass(ka.classes.vehicleGeneratorArrow.join(" ")).addClass(ka.classes.vehicleGeneratorArrow[2]);break;case 3:a(ka.selectors.filters).removeClass(ka.classes.vehicleGeneratorArrow.join(" ")).addClass(ka.classes.vehicleGeneratorArrow[3]);break;case 4:a(ka.selectors.filters).removeClass(ka.classes.vehicleGeneratorArrow.join(" "))}},getTallestStickyBlock:function(){var b,c=[x.find(ka.selectors.stickyVehicleHeading)];x.find(ka.selectors.stickyVehicleHeading).removeAttr("style"),c.forEach(function(c,d){b=0,x.find(c).each(function(c,d){b<=a(d).outerHeight()&&(b=a(d).outerHeight())}),a(c).css("min-height",b+"px"),a(ka.selectors.borderBottomSticky).css(ka.cssValues.minHeight,a(ka.selectors.headerSticky).outerHeight())})}},na.publishVehicle=function(a,b,c,d,e,f){var h,i,j="add",l=-1,m={},n=G.parent().find(ka.selectors.vehicleModel);w.info("publishVehicle"),i={gradeID:e,versionID:c},ia.push(i),na.resetGenerator(),D.before(U),h=D.prev(),T+=1,pa||(l=la.getRecord("gradeId"),m=la.getRecord("versionPossibilities")),ma.push(new s({$element:h,gradeId:l,versionPossibilities:m,vehicleData:a,vehicleModel:n.data("modelName"),vehicleGrade:f,vehicleVersion:d,vehicleGradeId:e,vehicleVersionId:c})),g.init(h),la.filterStatus(),k.renderDisclaimers(x),b||o(f,e,d,c,j),T&&(fa.hasClass(ka.classes.hidden)||(fa.addClass(ka.classes.hidden),x.find(ka.selectors.tabs).removeClass(ka.classes.disabled).first().addClass(ka.classes.active),x.find(ka.selectors.dataTabSection).first().addClass(ka.classes.active),x.find(ka.selectors.mobileTabs).removeClass(ka.classes.disabled).siblings(ka.tags.select).prop(ka.prop.disabled,!1),K.find(ka.tags.stickyNavBar).removeClass(ka.classes.disabled),K.find(ka.selectors.accordionChildHeader).attr(ka.attr.dataState)===ka.attr.closed&&K.find(ka.selectors.vehicleModel).trigger(ka.events.click)))},na.resetGenerator=function(a){if(ha)return!1;oa&&la.resetGradeSelectBox(D,a),pa&&la.resetVersionSelectBox(D,oa)},na.bindEvents=function(){var b,c;a(ka.selectors.gradeSelectBox).children(),a(ka.selectors.versionSelectBox).children();oa&&F.on(ka.events.change,{templateInstance:D},la.getEngines),pa&&E.on(ka.events.change,function(d){b=E.attr(ka.attr.placeholder),c=a(d.target).val(),c===b?la.addState(G,ka.classes.elDisabled,ka.prop.disabled):la.removeState(G,ka.classes.elDisabled,ka.prop.disabled)}),G.on(ka.events.click,function(a){a.preventDefault(),la.getVehicleSpecs(G,F,E)}),H.on(ka.events.click,function(a){a.preventDefault(),I.addClass(ka.classes.hidden)})},s.prototype.setVehicleTitle=function(){this.$element.find(ka.selectors.vehicleTitle).text(this.vehicleGrade),oa&&pa&&this.$element.find(ka.selectors.vehicleVersion).text(this.vehicleVersion),la.updateStickyNavItem(this.getIndex(),this.vehicleVersion)},s.prototype.setVehiclePrice=function(){var a,b=this.$element.find(ka.selectors.universalPrice);b.length?(a=new l.UniversalPricing({$element:b,manualPriceFormatting:b.data("manualPriceFormatting"),priceUrl:b.data("priceUrl"),dataPath:b.data("modelPath"),modelKey:b.data("modelCode"),gradeKey:this.vehicleData.gradeKey,versionKey:this.vehicleData.versionKey,priceCode:b.data("priceCode")||"default",extraInfoPathPrefix:b.data("extraInfoPathPrefix"),extraInfoPathSuffix:this.vehicleData.path}),a.refreshPrice()):(b=this.$element.find(ka.selectors.c_184B),b.length&&(b.data({modelGrade:this.vehicleData.gradeKey||this.vehicleGradeId,modelVersion:this.vehicleData.versionKey,priceDescription:this.vehicleData.priceDescription,priceDisclaimer:this.vehicleData.priceDisclaimer,priceDisabled:this.vehicleData.vehiclePriceDisabled,priceDisabledDescription:this.vehicleData.vehiclePriceDisabledDescription,priceDisabledLabel:this.vehicleData.vehiclePriceDisabledLabel}),t(this.$element)))},s.prototype.setKeyFeatures=function(){var b=e.compile(W),c=this.$element.find(ka.selectors.vehicleFeaturesUl),d=[],f=!1;if(this.vehicleData.gradeUsp&&this.vehicleData.usp)d=this.vehicleData.usp.concat(this.vehicleData.gradeUsp);else if(this.vehicleData.gradeUsp)d=this.vehicleData.gradeUsp;else{if(!this.vehicleData.usp)return!1;d=this.vehicleData.usp}a.each(d,function(a,d){var e=b(d);d.value&&(c.append(e),f=!0)}),d.length&&f&&this.$element.find(ka.selectors.vehicleFeatures).addClass(ka.classes.active)},s.prototype.setCtas=function(){var b=e.compile(X),c=this.$element.find(ka.selectors.ctaBlock),d=c.data(ka.data.modelCode),f=c.data(ka.data.urlExtension),g=this.vehicleData.gradeKey,h=this.vehicleData.versionKey;a.each(this.vehicleData.ctas,function(a,e){var i;e.ctaClass=0===a?ka.classes.ctaPrimary:ka.classes.ctaSecondary,i=b(e),e.linkPath&&e.linkText&&(c.append(i),R=c.children()),d&&g&&e.linkIcon===aa&&e.linkPath&&e.linkText&&r(d,g,h,c,f)})},s.prototype.setVehicleImage=function(){var a=C.find('div[value="'+this.vehicleGradeId+'"]').find(ka.tags.img).attr(ka.attr.src);this.$element.find(ka.tags.img).attr(ka.attr.src,a)},s.prototype.setVehicleImageDisclaimer=function(){var a=C.find('div[value="'+this.vehicleGradeId+'"]').find(".disclaimer").text();this.$element.find(ka.selectors.vehicleImageDisclaimer).text(a)},s.prototype.setTableData=function(){var a=this.$element.prevAll().length;this.loadVehicleSpecifications(a,"specifications",J,"value"),this.loadVehicleEmissions(a,L,K,"value"),this.loadVehiclePacks(a),this.loadVehicleAccessories(a)},s.prototype.renderEmissionsDisclaimers=function(a){var c=a.closest(ka.selectors.universalPrice),d=[{label:c.data(ka.data.fuelConsumptionDisclaimerLabel),key:"combined"},{label:c.data(ka.data.co2EmissionsDisclaimerLabel),key:"co2Emissions"},{label:c.data(ka.data.efficiencyDisclaimerLabel),key:"efficiency"}],e=this.vehicleData;b.each(d,function(b){var c;e.fuelConsumption&&e.fuelConsumption[b.key]&&(c=e.fuelConsumption[b.key])&&c.value&&a.append("<p>"+b.label+" "+c.value+"</p>")}),a.find(ka.tags.priceValue).length||a.hide()},s.prototype.loadVehicleSpecifications=function(c,d,e,f){var g=this.vehicleData.versionKey,h=J.find(ka.selectors.datarow);a.each(h,function(b,d){a(d).find(ka.tags.cell).eq(c).find(ka.tags.labelText).addClass(ka.classes.iconNotIncluded)}),b.each(this.vehicleData[d],function(a){b.each(a.specs,function(a){var d,h,i=e.find('tr[data-section-id="'+a.customKey+'"]');i.length&&(a.specType===ka.constants.TECHNICAL?(d=i.find(ka.tags.cell).eq(c),d.data(ka.data.isPopulated)&&g===d.data(ka.data.vehicleVersion)||(d.html(a[f]),d.attr(ka.attr.isPopulated,!0),d.attr(ka.attr.vehicleVersion,g))):a.specType===ka.constants.EQUIPMENT&&(h=a.type.toLowerCase(),d=i.find(ka.tags.cell).eq(c).find(ka.tags.labelText),b.indexOf([ka.tags.option,ka.constants.OPTIONAL],h)>=0?d.addClass(ka.classes.iconOptional).removeClass(ka.classes.iconNotIncluded):b.indexOf([ka.constants.SYSTEMATIC,ka.constants.DEFAULT,ka.constants.STANDARD],h)>=0&&d.addClass(ka.classes.iconIncluded).removeClass(ka.classes.iconNotIncluded)))})}),b.each(this.vehicleData.packs.packs,function(a){var d=a.type.toLowerCase();b.indexOf([ka.tags.option,ka.constants.OPTIONAL],d)>=0&&b.each(a.specs,function(a){var d=a.type.toLowerCase();if(b.indexOf([ka.constants.PACK],d)>=0){var f,g,h,i=e.find('tr[data-section-id="'+a.key+'"]');i.length&&(f=i.find(ka.tags.cell).eq(c).find(ka.tags.labelText),g=f.hasClass(ka.classes.iconOptional),h=f.hasClass(ka.classes.iconIncluded),g||h||f.addClass(ka.classes.iconOptional).removeClass(ka.classes.iconNotIncluded))}})})},s.prototype.loadVehicleEmissions=function(a,c,d,e){var f,g=this.vehicleData;b.each(g.consumptionSpecs,function(b){var h,i;b&&(h=d.find('tr[data-section-id="'+b.groupKey+'"]'),h.length&&(f=document.createElement(ka.tags.img),f.setAttribute(ka.attr.src,g.efficiencyImage),i=h.find(ka.tags.cell).eq(a),i.html(b[e]),c.find(ka.tags.cell).eq(a).empty().append(f)))})},s.prototype.loadVehiclePacks=function(a){var c,d,e=this.vehicleData.packs.packs,f=[];f=b.map(e,function(a){return{title:a.name,pack:a,subsections:a.specs}}),qa=b.uniq(b.union(f,qa),!1,function(a){return a.pack.name}),ra.push({positionIndex:a,packsListSpecs:b.flatten(b.pluck(e,ka.data.specsKey))}),c={positionIndex:a,packList:e,versionKey:this.vehicleData.versionKey},d={positionIndex:a,packsListSpecs:b.flatten(b.pluck(e,ka.data.specsKey))},sa.splice(a,1,c),ra.splice(a,1,d),this.packsRenderSpecs(a),this.packsLoadPrices(a)},s.prototype.packsLoadPrices=function(){var c,d=(a(ka.selectors.packsSection).data(ka.data.packIncluded),a(ka.selectors.packsSection).data(ka.data.packNotIncluded),M.find(ka.selectors.priceRow));M.find(ka.selectors.priceRow).find(ka.tags.cell).find(ka.tags.priceValue).text("").removeClass(ka.classes.unavailablePrice).removeClass(ka.classes.availablePrice).removeClass(ka.classes.standardIcon),M.find(ka.selectors.priceRow).find(ka.tags.cell).find(ka.tags.labelText).text("").removeClass(ka.classes.unavailablePrice).removeClass(ka.classes.availablePrice),b.each(sa,b.bind(function(e,f){a(d).each(function(){a(this).find(ka.tags.cell).eq(f).find(ka.tags.priceValue).text("").removeClass(ka.classes.availablePrice).removeClass(ka.classes.standardIcon).addClass(ka.classes.noCarAvailable),a(this).find(ka.tags.cell).eq(f).find(ka.tags.labelText).text("").removeClass(ka.classes.availablePrice)}),e.packList.length>0&&b.each(e.packList,b.bind(function(a){c=M.find('[data-accordion-id="'+a.pricesKeyList[0]+'"] '+ka.selectors.priceRow),c.length&&(a.type===ka.packTypes.option?""===a.price||b.isUndefined(a.price)?(c.find(ka.tags.cell).eq(f).find(ka.tags.priceValue).text("").removeClass(ka.classes.noCarAvailable).addClass(ka.classes.availablePrice),c.find(ka.tags.cell).eq(f).find(ka.tags.labelText).text("").addClass(ka.classes.availablePrice)):(c.find(ka.tags.cell).eq(f).find(ka.tags.priceValue).text(this.formatCurrency(a.price)).removeClass(ka.classes.noCarAvailable).addClass(ka.classes.availablePrice),c.find(ka.tags.cell).eq(f).find(ka.tags.labelText).text(HELIOS.components.c059C.priceTitle).removeClass(ka.classes.unavailablePrice).addClass(ka.classes.availablePrice)):(a.type!==ka.packTypes.forbidden&&a.type!==ka.packTypes.optionPack&&a.type!==ka.packTypes.pack||(c.find(ka.tags.cell).eq(f).find(ka.tags.labelText).text("").removeClass(ka.classes.unavailablePrice),c.find(ka.tags.cell).eq(f).find(ka.tags.priceValue).text("").removeClass(ka.classes.unavailablePrice).addClass(ka.classes.noCarAvailable)),a.type!==ka.packTypes.systematic&&a.type!==ka.packTypes.default||(c.find(ka.tags.cell).eq(f).find(ka.tags.labelText).text("").removeClass(ka.classes.unavailablePrice),c.find(ka.tags.cell).eq(f).find(ka.tags.priceValue).text("").removeClass(ka.classes.noCarAvailable).addClass(ka.classes.standardIcon))))},this))},this))},s.prototype.loadVehicleAccessories=function(c){var d=b.flatten(b.pluck(this.vehicleData.accessoriesSpecs,ka.data.specsKey)),e=da.find(ka.selectors.accessoryRow);a.each(e,function(b,d){a(d).find(ka.tags.cell).eq(c).find(ka.tags.labelText).addClass(ka.classes.iconNotIncluded)}),a.each(d,function(a,b){var d,e,f=da.find('tr[data-section-id="'+b.customKey+'"]');f.length&&(d=b.type.toLowerCase(),e=f.find(ka.tags.cell).eq(c).find(ka.tags.labelText),d===ka.constants.OPTIONAL?e.addClass(ka.classes.iconOptional).removeClass(ka.classes.iconNotIncluded):d===ka.constants.STANDARD&&e.addClass(ka.classes.iconIncluded).removeClass(ka.classes.iconNotIncluded))})},s.prototype.formatCurrency=function(a){var c=parseFloat(a),d=new m({HELIOS:ka.HELIOS});return b.isFinite(c)?d.asCurrency(c):a},s.prototype.packsRenderSpecs=function(){var c=M.find(ka.selectors.datarow);b.each(ra,function(d){b.each(c,function(b){a(b).find(ka.tags.cell).eq(d.positionIndex).find(ka.tags.labelText).empty().removeClass(ka.classes.iconOptional+" "+ka.classes.iconIncluded).addClass(ka.classes.iconNotIncluded)}),b.each(d.packsListSpecs,function(a){var c,e,f,g=M.find('tr[data-section-id="'+a.key+'"]');g.length&&(c=a.type.toLowerCase(),e=g.find(ka.tags.cell).eq(d.positionIndex).find(ka.tags.labelText),f=e.hasClass(ka.classes.iconIncluded),b.contains(ka.data.packsRequired,c)&&!f&&e.empty().removeClass(ka.classes.iconNotIncluded).addClass(ka.classes.iconOptional))})})},s.prototype.removeVehicle=function(){var b=this.getIndex(),c=ma[b];la.removeVehicle(this.$element),la.removeStickyNavItem(b),o(a.trim(c.vehicleGrade),c.vehicleGradeId,c.vehicleVersion,c.vehicleVersion,"remove")},s.prototype.getIndex=function(){return this.$element.prevAll().length},s.prototype.bindEvents=function(){oa&&this.gradeSelectBox.on(ka.events.change,{templateInstance:this.$element},la.getEngines),this.$element.find(ka.selectors.removeVehicleBtn).on(ka.events.click,this.removeVehicle.bind(this)),R&&R.on(ka.events.click,function(a){q(a.target)})},{init:v,pageCtrlHandler:la}}),define("tabbedContent",["jquery","underscore"],function(a,b){"use strict";function c(b,c){return!!b.length&&(this.windowContext=window,this.settings=a.extend(!0,{},d,c),this.$container=b,this.isAccordion=!1,this.init(),this)}var d={classes:{activeTab:"active-tab",activeSection:"active-section",activeHeader:"active-header",accordion:"accordion",hidden:"hidden"},selectors:{tabsContainer:".tabs-container-ex",tabsContainerHead:".tabs-container-head",tabsContainerHeadUl:".tabs-container-head ul",sectionHeader:".section-header",activeSection:".active-section",sectionHeaderA:".section-header a",tabsContainerHeadA:".tabs-container-head a",contentWrapper:".content-wrapper",tabsContent:".tabs-content",singleTab:".tabs-container-head li",tabs:"li",selected:":selected",tabsDropdownContainer:".tabs-container-select",tabsDropdown:".tabs-container-select select"},events:{click:"click.tabs",resize:"resize.tabs",onAccordionChange:"tabs.onAccordionChange",onSectionChange:"tabs.onSectionChange",change:"change"},attrs:{title:"data-title"},data:{title:"title"},analytics:{toggleType:"content",toggleValue:""}};return c.prototype.init=function(){this.getDisplayConditions(),this.isAccordion&&this.switchToAccordion(),this.$tabsContainer=a(this.settings.selectors.tabsContainer),this.$tabsDropdownContainer=a(this.settings.selectors.tabsDropdownContainer),this.bindEvents()},c.prototype.isSmall=function(){return this.windowContext.matchMedia(HELIOS.config.common.mediaQuery.is.small).matches},c.prototype.isMedium=function(){return this.windowContext.matchMedia(HELIOS.config.common.mediaQuery.is.medium).matches},c.prototype.getTabs=function(){return a(this.settings.selectors.tabsContainerHead,this.$container).find(this.settings.selectors.tabs)},c.prototype.getActiveTabs=function(){return a(this.settings.selectors.activeSection,this.$container)},c.prototype.getDisplayConditions=function(){a(this.settings.selectors.tabsContainer,this.$container).each(b.bind(this.getDisplayConditionsHandler,this))},c.prototype.getDisplayConditionsHandler=function(){var a=this.getTabs().length;this.isAccordion=!1,a>2&&this.isSmall()?this.isAccordion=!0:a>3&&this.isMedium()&&(this.isAccordion=!0)},c.prototype.switchToAccordion=function(){this.$container.addClass(this.settings.classes.accordion),this.$container.trigger(this.settings.events.onAccordionChange)},c.prototype.switchToTabs=function(){0===this.getActiveTabs().length&&this.switchToTabsEnableFirst(),this.$container.removeClass(this.settings.classes.accordion),this.$container.trigger(this.settings.events.onAccordionChange)},c.prototype.setActive=function(a){b.isArray(a)&&b.each(a,b.bind(function(a){this.setActiveFirstOrSupplied(a[0],a[1])},this))},c.prototype.setActiveFirstOrSupplied=function(c,d){var e,f,g;b.isString(c)&&b.has(this.settings.selectors,c)&&b.has(this.settings.classes,d)?(e=this.settings.selectors[c],f=this.settings.classes[d],g=a(e,this.$container).first()):b.has(this.settings.classes,d)&&(f=this.settings.classes[d],g=c),g&&g.addClass(f).siblings().removeClass(f)},c.prototype.switchToTabsEnableFirst=function(){this.setActive([["singleTab","activeTab"],["tabsContent","activeSection"],["sectionHeader","activeHeader"]])},c.prototype.resizeHandler=function(){this.getDisplayConditions(),this.isAccordion?this.switchToAccordion():this.switchToTabs()},c.prototype.switchSection=function(b){var c=a(b.currentTarget);c.data(this.settings.data.title);b.preventDefault(),this.getDisplayConditions(),this.isAccordion?this.switchSectionAccordion(c):this.switchSectionTabs(c),this.$container.trigger(this.settings.events.onSectionChange,c)},c.prototype.switchSectionAccordion=function(b){var c,d,e,f=a.trim(b.data(this.settings.data.title));c=b.parents(this.settings.selectors.sectionHeader),d=this.$container.find(this.settings.selectors.tabsContent+"["+this.settings.attrs.title+'="'+f+'"]'),e=a(this.settings.selectors.singleTab,this.$container).find("["+this.settings.attrs.title+'="'+f+'"]').parents(this.settings.selectors.tabs),this.setActive([[c,"activeHeader"],[d,"activeSection"],[e,"activeTab"]])},c.prototype.switchSectionTabs=function(b){var c,d,e,f=a.trim(b.data(this.settings.data.title));c=b.parents(this.settings.selectors.tabs),d=this.$container.find(this.settings.selectors.contentWrapper,this.$container).find("["+this.settings.attrs.title+'="'+f+'"]'),e=a(this.settings.selectors.sectionHeader,this.$container).find("["+this.settings.attrs.title+'="'+f+'"]').parent(),this.setActive([[c,"activeTab"],[d,"activeSection"],[e,"activeHeader"]])},c.prototype.switchSectionDropDown=function(b){var c,d=a(b.currentTarget),e=d.find(this.settings.selectors.selected),f=a.trim(e.data(this.settings.data.title));c=this.$container.find(this.settings.selectors.contentWrapper).find("["+this.settings.attrs.title+'="'+f+'"]'),this.setActive([[d,"activeTab"],[c,"activeSection"],[e,"activeHeader"]])},c.prototype.trackAnalytics=function(b,c){if(this.settings.analyticsManager){var d=a(c),e=a.trim(d.text()),f=(a.trim(d.attr("href")),this.settings.analyticsManager.trackingVars.toggle),g={componentId:this.settings.analytics.componentId,toggleType:this.settings.analytics.toggleType,toggleValue:e};e!==this.settings.analytics.toggleValue&&(this.settings.analyticsManager.tag(f,g),this.settings.analytics.toggleValue=e)}},c.prototype.bindEvents=function(){var c=[this.settings.selectors.tabsContainerHeadA,this.settings.selectors.sectionHeaderA].join(", ");this.$container.find(c).on(this.settings.events.click,b.bind(this.switchSection,this)),this.$container.find(this.settings.selectors.tabsDropdown).on(this.settings.events.change,b.bind(this.switchSectionDropDown,this)),this.settings.analytics&&this.settings.analytics.componentId&&this.$container.on(this.settings.events.onSectionChange,b.bind(this.trackAnalytics,this)),a(this.windowContext).on(this.settings.events.resize,b.bind(this.resizeHandler,this))},c}),define("hbars!/components/c_008/html/c_008",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return" tooltip-label-central"}function g(a,b){return" tooltip-label-hidden"}function h(a,b){var d,e,f="";return f+=" tooltip-icon-",(e=c.tooltipIcon)?d=e.call(a,{hash:{},data:b}):(e=a&&a.tooltipIcon,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)}function i(a,b){var d,e,f="";return f+='\n    \t\t<span class="tooltip-heading">',(e=c.tooltipHeadline)?d=e.call(a,{hash:{},data:b}):(e=a&&a.tooltipHeadline,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</span>\n    \t"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this;return l+='<div class="c_008">\n    <a href="" data-parent-component="',(k=c.parentComponent)?j=k.call(b,{hash:{},data:e}):(k=b&&b.parentComponent,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" class="has-tooltip',j=c.if.call(b,b&&b.labelCenter,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),j=c.if.call(b,b&&b.tooltipLabelHidden,{hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e}),(j||0===j)&&(l+=j),l+=" ",j=c.if.call(b,b&&b.tooltipIcon,{hash:{},inverse:o.noop,fn:o.program(5,h,e),data:e}),(j||0===j)&&(l+=j),l+='" data-tooltip-id="',(k=c.tooltipID)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipID,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" data-tooltip-my="',(k=c.tooltipMy)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipMy,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" data-tooltip-at="',(k=c.tooltipAt)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipAt,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" tabindex="0"><span>',(k=c.tooltipLabel)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipLabel,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'</span></a>\n    <div class="tooltip-panel" data-tooltip-id="',(k=c.tooltipID)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipID,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'">\n    \t',j=c.if.call(b,b&&b.tooltipHeadline,{hash:{},inverse:o.noop,fn:o.program(7,i,e),data:e}),(j||0===j)&&(l+=j),l+="\n        <p>",(k=c.tooltipContent)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipContent,j=typeof k===m?k.call(b,{hash:{},data:e}):k),(j||0===j)&&(l+=j),l+="</p>\n    </div>\n</div>\n"})}),define("c_059D",["jquery","underscore","c_184B","handlebars","logger","customSelect","accordion","accordionItem","waypoints","disclaimers","c_184","c_099_4","numberFormat","tabbedContent","hbars!/components/c_008/html/c_008","c_008","modal"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";function r(a,c,d,e,f){var g="",h=oa.length,i=ma.analyticsManager,j=i.trackingVars.vehicleCompare,k=i.getTrackingObjectProperties(j),l={};("undefined"!=typeof CQ&&CQ.WCM&&!CQ.WCM.isEditMode(!0)&&!CQ.WCM.isDesignMode(!0)||"undefined"==typeof CQ)&&(g=oa[h-1]?oa[h-1].vehicleModel||"":""),l[k.componentId]=ta,l[k.vehicleGrade]=a,l[k.vehicleGradeId]=c,l[k.vehicleVersion]=d,l[k.vehicleVersionId]=e,l[k.vehicleCompare]=g.toLowerCase(),l[k.vehicleGradeCompare]=b.pluck(oa,ma.data.vehicleGradeReference).reverse().join(","),l[k.vehicleVersionCompare]=b.pluck(oa,ma.data.vehicleVersionReference).reverse().join(","),l[k.numVehicles]=h,l[k.interactionType]=f,l[k.vehicleModel]=g,i.tag(j,l)}function s(c){var d,e=a(c.target).attr(ma.attr.dataState),f=a(c.target),g=a.trim(f.text().toLowerCase()),h=ma.analyticsManager,i=h.trackingVars.accordionExpansion,j=h.getTrackingObjectProperties(i),k=f.siblings(ma.selectors.accordionPanel).find(ma.selectors.packPriceValue),l=k.length,m=[],n={};e===ma.attr.open&&(l&&(b.each(k,function(a){a.textContent!==ma.operators.MIDDLE_DIVIDER&&a.textContent!==ma.operators.DOUBLE_MIDDLE_DIVIDER&&a.textContent!==ma.constants.NOT_AVAILABLE&&m.push(a.textContent)}),d=m.join(":")),n[j.componentId]=ta,n[j.accordionType]=l?ma.constants.PACKS_TAB_LABEL:na.$tabsActive,n[j.accordionText]=l?g+ma.operators.MIDDLE_DIVIDER+d:g,h.track(i,n))}function t(b){var c=a(b.target),d=a.trim(c.text().toLowerCase()),e=ma.analyticsManager,f=e.trackingVars.toggle,g=e.getTrackingObjectProperties(f),h={};h[g.componentId]=ta,h[g.toggleType]="Comparison-tool",h[g.toggleValue]="Next steps - "+d,e.track(f,h)}function u(b){var c=a(b),d=c.attr(ma.attr.href)||"",e=c.text(),f=ma.analyticsManager,g=f.trackingVars.genericClick,h=f.getTrackingObjectProperties(g),i={};i[h.componentId]=ta,i[h.destination]=d,i[h.locationInPage]="comparison-tool",i[h.buttonText]=e,f.track(g,i)}function v(a){var b,c;a=a||{};for(b in a)this[b]=a[b];ra?this.versionSelectBox=this.$element.find(ma.selectors.vehicleVersionsSelectBox):(this.gradeSelectBox=this.$element.find(ma.selectors.gradeSelectBox),this.versionSelectBox=this.$element.find(ma.selectors.versionSelectBox)),c=this.$element.find(ma.selectors.universalPrice),this.addVehicleBtn=this.$element.find(ma.selectors.addVehicleBtn),this.cancelEditBtn=this.$element.find(ma.selectors.cancelEditBtn),
this.removeVehicleBtn=this.$element.find(ma.selectors.removeVehicleBtn),this.$vehicleTitleGrade=this.$element.find(ma.selectors.vehicleTitleGrade),this.$vehicleTitleDetail=this.$element.find(ma.selectors.vehicleTitleDetail),this.bindEvents(),this.setVehicleImage(),this.setVehicleImageDisclaimer(),this.setVehicleTitle(),this.setSelectValues(),this.setTableData(),this.renderEmissionsDisclaimers(c.find(ma.selectors.emissionsDisclaimers)),this.setVehiclePrice()}function w(a){c.init({$el:a,analyticsManager:ma.analyticsManager,financeManager:ma.financeManager,HELIOS:ma.HELIOS,heliosAppContext:ma.heliosAppContext,numberFormat:ma.numberFormat,priceCodes:ma.priceCodes,priceManager:ma.priceManager,window:ma.window})}function x(){U=0,O=B.find(ma.selectors.compareWrapper),P=B.find(ma.selectors.iconicDetails),N=B.find(ma.selectors.contentWrapper),C=B.find(ma.selectors.comparisonHolder),J=B.find(ma.selectors.compareStats),K=B.find(ma.selectors.compareEmissions),L=B.find(ma.selectors.efficiencyChart),M=B.find(ma.selectors.equipStats),Q=B.find(ma.selectors.packsStats),E=B.find(ma.selectors.vehicleGenerator),D=B.find(ma.selectors.imagesPlaceholder),da=B.find(".sticky-wrapper"),ea=B.find(".compare-page-details"),E.find(ma.selectors.vehicleVersionsSelectBox).length?(ra=!0,H=E.find(ma.selectors.vehicleVersionsSelectBox)):(F=E.find(ma.selectors.versionSelectBox),G=E.find(ma.selectors.gradeSelectBox)),I=E.find(ma.selectors.addVehicleBtn),V=B.find(ma.selectors.vehicleTemplate).html(),W=B.find(ma.selectors.versionOptionTemplate).html(),R=B.find(ma.selectors.nextSteps),S=B.find(ma.selectors.selectionInfo),T=B.find(ma.selectors.selectionCtas),X=B.find(ma.selectors.compareTable),Y=X.find(ma.selectors.datarow),fa=N.data(ma.data.tooltipPackOnly),ga=N.data(ma.data.tooltipPackAlso),ha=N.data(ma.data.packLabel),ia=N.data(ma.data.optionPackLabel),ja=N.data(ma.data.tooltipPackOnlyHeading),ka=N.data(ma.data.tooltipPackAlsoHeading)}function y(b){return ma=a.extend({},la,b),A=a("html").hasClass("ltie9"),B=a(ma.selectors.root),!!B.length&&($=ma.HELIOS.components.c059D,!!(Z=$.grades)&&(z=new e({prefix:"C59"}),ca=a("body"),x(),pa.bindEvents(),na.init(),void z.info("init")))}var z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la={events:{click:"click",keydown:"keydown",change:"change",noDataFound:"noDataFound",accordionStateChange:"accordion-state-change",modalOpen:"modal.open",tooltipEvent:"mouseenter touchend",orientationchange:"orientationchange",tableShown:"compare-table-shown",priceSuccess:"priceSuccess.c_184",priceFinanceDataSuccess:"priceDataSuccess.c_184B"},classes:{eleDisabled:"btn-disabled",disabled:"disabled",ajaxLoading:"loading-engines",active:"active",selected:"selected",hidden:"hidden",editMode:"is-editing",carFadeOut:"fade-out",iconNotIncluded:"icon-not-included",iconIncluded:"icon-included",noData:"no-data",longText:"long-text",fullHeading:"full-heading",bold:"bold",barFixed:"bar-fixed",stickyHeaderEnabled:"sticky-header-enable",emissionIcon:"emission-icon",removedVehicleName:"remove-vehicle-details",vehicleVersionName:"vehicle-version-name",rightTooltipCell:"right-tooltip-cell"},selectors:{c_184B:".c_184B",root:".c_059D",c_008:".c_008",universalPrice:".c_184",comparisonHolder:".comparison-selection-holder",imagesPlaceholder:".grade-images-placeholder",vehicleGenerator:".vehicle-generator",gradeSelectBox:".grade-select",gradeSelectBoxOption:".vehicle-generator .grade-select option",versionSelectBox:".engine-select",vehicleVersionsSelectBox:".version-select",selectSpan:".selectedValue",addVehicleBtn:".add-vehicle-button",addVehicleVersionBtn:".add-vehicle-version-button",removeVehicleBtn:".remove-vehicle-btn",editVehicleBtn:".edit-vehicle-btn",vehicleTemplate:".vehicle-template",versionOptionTemplate:".version-select-option-compare",vehicleTitle:".vehicle-model-title",vehicleImageDisclaimer:".vehicle-image-disclaimer",compareStats:".compare-stats",compareEmissions:".compare-emissions",efficiencyChart:".efficiency-chart",equipStats:".equipment-stats",packsStats:".packs-stats",accordionChildWrapper:".accordion-child-wrapper",accordionGroup:".accordion-group",accordionChildHeader:".accordion-child-header",accordionPanel:".accordion-panel",packPriceValue:"p.available-price",nextSteps:".next-steps",selectionInfo:".selection-information",selectionCtas:".selection-ctas",name:".name",ctas:".ctas",active:".active",selected:".selected",nextStepsHeaderTemplate:".next-steps-header",nextStepsCtasTemplate:".next-steps-ctas",vehicleGradeOptionSelected:".grade-select option:selected",vehicleGradeSelect:".vehicle-generator .grade-select option:selected",vehicleVersionSelect:".vehicle-generator .engine-select",vehicleModel:"h3",emissionsDisclaimers:".emissions-disclaimers",datarow:".data-row",packsSection:".packs-section",specskey:".specs-key",optionFirstChild:"option:first-child",optionSelected:"option:selected",optionWithValue:"option[value]",firstChild:":first-child",disabled:":disabled",tabsContainer:".compare-tabs-list",tabsDropdownContainer:".compare-tab-select",compareTable:".compare-table",contentWrapper:".content-wrapper",compareWrapper:".compare-wrapper",iconicDetails:".iconic-details",longText:".long-text",availableGradeByPackTpl:".all-available-packs-template",availableGradeByPack:".all-available-packs",vehicleTitleGrade:".vehicle-model-grade",vehicleTitleDetail:".vehicle-model-other-detail",cancelEditBtn:".cancel-edit-btn",confirmRemoveLabel:".confirm-label",confirmCancelButton:".c_129.modal .cancel-remove-btn",confirmRemoveButton:".c_129.modal .remove-confirm-btn",subSectionHeader:".subsection-header"},operators:{MIDDLE_DIVIDER:"-",DOUBLE_MIDDLE_DIVIDER:"--"},constants:{NOT_AVAILABLE:"Not available",PACKS_TAB_LABEL:"packs"},tags:{img:"img",priceValue:"p",row:"tr",cell:"td",mobileCell:"th",labelText:"span",option:"option",list:"li"},data:{fuelConsumptionDisclaimerLabel:"fuel-consumption-disclaimer-label",co2EmissionsDisclaimerLabel:"co2-emissions-disclaimer-label",efficiencyDisclaimerLabel:"efficiency-disclaimer-label",vehicleGradeReference:"vehicleGrade",vehicleVersionReference:"vehicleVersion",specsKey:"specs",info:"info",showEngine:"show-engine",optionLabel:"option-label",optionPackLabel:"option-pack-label",packLabel:"pack-label",tooltipPackOnly:"tooltip-pack-only",tooltipPackAlso:"tooltip-pack-also",tooltipPackOnlyHeading:"tooltip-pack-only-heading",tooltipPackAlsoHeading:"tooltip-pack-also-heading",removeText:"remove-text"},attr:{href:"href",src:"src",open:"open",dataState:"data-state",class:"class",alt:"alt"},cssValues:{auto:"auto",height:"height",marginTop:"margin-top"},prop:{selected:"selected",disabled:"disabled",outerHTML:"outerHTML"},specStatusType:{systematic:"SYSTEMATIC",default:"DEFAULT",option:"OPTION",optionPack:"OPTION_PACK",pack:"PACK",forbidden:"FORBIDDEN"},tooltips:{tooltipMy:"top center",tooltipAt:"bottom center",xOffsetCentral:0,hideEvent:"click unfocus mouseleave"}},ma=null,na={},oa=[],pa={},qa=0,ra=!1,sa=!1,ta="C59_Comparison_List";return na={$tabsActive:"",$tablesList:"",records:{},nextSteps:{},defaultLabels:function(){ra?this.versionSelectText=H.find(ma.selectors.optionFirstChild).val():(this.gradeSelectText=G.find(ma.selectors.optionFirstChild).val(),this.versionSelectText=F.find(ma.selectors.optionFirstChild).val())},init:function(){this.defaultLabels(),this.setupAccordion(),this.bindEvents(),this.compileTemplate(),this.preSelectCarToCompareOnLoad(),this.setUpTabbedConent(),this.stickyHeader(),this.initModal()},initModal:function(){_=new q({displayType:q.TYPE_CENTERED,customClass:"modal-without-margins remove-vehicle-modal",customOverlayClass:"modal-overlay-light remove-modal-overlay"})},setUpTabbedConent:function(){var a;a=new n(B),a.isSmall()?(a.$tabsContainer.hide(),a.$tabsDropdownContainer.show()):(a.$tabsContainer.show(),a.$tabsDropdownContainer.hide()),a.$container.on(a.settings.events.onSectionChange,function(){Waypoint.refreshAll()})},preSelectCarToCompareOnLoad:function(){z.info("preSelectCarToCompareOnLoad"),G&&G.val()&&G.trigger(ma.events.change),F&&F.val()&&(sa=!0,b.isUndefined(G)?(na.removeState(I,ma.classes.eleDisabled,ma.prop.disabled),I.trigger(ma.events.click)):G.trigger(ma.events.change))},compileTemplate:function(){var a,b;a=B.find(ma.selectors.nextStepsHeaderTemplate).html(),this.nextSteps.headerTemplate=d.compile(a),b=B.find(ma.selectors.nextStepsCtasTemplate).html(),this.nextSteps.ctasTemplate=d.compile(b),this.nextSteps.infoClone=S.find(".name:eq(0)").prop(ma.prop.outerHTML),this.nextSteps.ctasClone=T.find(".ctas:eq(0)").prop(ma.prop.outerHTML)},handleError:function(){z.warn("Payload data is not available.")},bindEvents:function(){if(R.on(ma.events.click+" "+ma.events.keydown,ma.selectors.active+","+ma.selectors.ctas,this.changeNextStepsVehicle.bind(this)),B.on(ma.events.click,ma.selectors.longText,this.showFullHeading.bind(this)),a(ma.window).on(ma.events.orientationchange,this.checkOrientationChange.bind(this)),window.matchMedia&&window.matchMedia("all").addListener){var b=window.matchMedia(ma.HELIOS.config.common.mediaQuery.is.small),c=window.matchMedia(ma.HELIOS.config.common.mediaQuery.is.medium),d=window.matchMedia(ma.HELIOS.config.common.mediaQuery.is.large);b.addListener(this.checkForBreakpointOnResize.bind(this)),c.addListener(this.checkForBreakpointOnResize.bind(this)),d.addListener(this.checkForBreakpointOnResize.bind(this))}},checkForBreakpointOnResize:function(a){a.matches&&this.isSelectedCTAVisible()},checkOrientationChange:function(a){setTimeout(function(){window.matchMedia&&(window.matchMedia(ma.HELIOS.config.common.mediaQuery.is.small).matches?(B.find(ma.selectors.tabsContainer).hide(),B.find(ma.selectors.tabsDropdownContainer).show()):(B.find(ma.selectors.tabsContainer).show(),B.find(ma.selectors.tabsDropdownContainer).hide()))},500)},saveRecord:function(a,b){this.records[a]=b},getRecord:function(a){return this.records[a]},clearRecords:function(){var a;for(a in this.records)delete this.records[a]},getEngines:function(b){var c=a(b.target).val(),d=b.data.templateInstance,e=d.find(ma.selectors.gradeSelectBox),f=e.parent(),g=d.find(ma.selectors.versionSelectBox),h=g.siblings(ma.tags.labelText),i=d.find(ma.selectors.addVehicleBtn),j=G&&G.data(ma.data.showEngine);if(z.info("getEngines"),sa)return na.removeState(I,ma.classes.eleDisabled,ma.prop.disabled),I.trigger(ma.events.click),void na.saveRecord("gradeId",c);f.addClass(ma.classes.ajaxLoading),na.addState([g,h],ma.classes.disabled,ma.classes.disabled),na.addState(e,null,ma.classes.disabled),na.resetVersionSelectBox(d,!1),na.addState(i,ma.classes.eleDisabled,ma.classes.disabled),na.clearRecords(),na.saveRecord("gradeId",c),Z[c]?(na.saveRecord("versionPossibilities",Z[c].versions),na.removeState(e,null,ma.classes.disabled),f.removeClass(ma.classes.ajaxLoading),na.loadVersionOptions(Z[c].versions,d),1===Object.keys(Z[c].versions).length&&(na.removeState(i,ma.classes.eleDisabled,ma.classes.disabled),d.hasClass(ma.classes.editMode)&&i.hasClass(ma.classes.hidden)&&(d.find(ma.selectors.cancelEditBtn).addClass(ma.classes.hidden),i.removeClass(ma.classes.hidden),d.find(ma.selectors.removeVehicleBtn).addClass(ma.classes.hidden)))):na.handleError(),j||na.removeState(I,ma.classes.eleDisabled,ma.prop.disabled)},getVehicleSpecs:function(a,c,d,e){var f,g,h,i=c.val(),j=c.find(ma.selectors.optionSelected).text();e?(f=a.parent().find(ma.selectors.vehicleGradeOptionSelected).text(),g=a.parent().find(ma.selectors.vehicleGradeOptionSelected).val()):(f=B.find(ma.selectors.vehicleGradeSelect).text(),g=B.find(ma.selectors.vehicleGradeSelect).val()),z.info("getVehicleSpecs"),this.addState(a,ma.classes.eleDisabled,ma.classes.disabled),g||(g=b.findKey(Z,function(a){return a.versions[i]})),i||(i=Object.keys(Z[g].versions)[0]),h=Z[g].versions[i],h.gradeKey=g,pa.publishVehicle(h,d,i,j,g,f)},loadVersionOptions:function(c,e){var f,g,h,i=e.find(ma.selectors.versionSelectBox),j=i.siblings(ma.tags.labelText),k=d.compile(W);z.info("loadVersionOptions"),h=b.pluck(oa,"vehicleversionId"),sa||(a.each(c,function(a,c){b.contains(h,c.versionKey)?c.disabled=!0:c.disabled=!1,f=k(c),i.append(f)}),1===Object.keys(c).length&&(g=i.find(ma.selectors.optionWithValue).not(ma.selectors.disabled).first(),g.length&&(i.val(g.val()),this.updateSelectText(i,g.html())))),l.deferredEngine.notify(!0),this.removeState([i,j],ma.classes.disabled,ma.classes.disabled)},resetGradeSelectBox:function(c){var d,e,f=c.find(ma.selectors.gradeSelectBox),g=f.find(ma.selectors.optionFirstChild);oa.length?f.find(ma.selectors.optionWithValue).each(function(c,g){d=b.pluck(b.where(oa,{gradeId:g.value}),"vehicleversionId"),e=d.filter(function(a){return Object.keys(Z[g.value].versions).indexOf(a)>-1}),e.length===Object.keys(Z[g.value].versions).length?a(g).prop(ma.prop.disabled,!0):a(g).prop(ma.prop.disabled,!1),f.data(ma.data.showEngine)||(b.contains(b.pluck(oa,"gradeId"),g.value)?a(g).prop(ma.prop.disabled,!0):a(g).prop(ma.prop.disabled,!1))}):f.children(ma.selectors.optionWithValue).prop(ma.prop.disabled,!1),g.prop(ma.prop.selected,!0),this.updateSelectText(f,na.gradeSelectText)},resetVersionSelectBox:function(a,b){var c=a.find(ma.selectors.versionSelectBox),d=c.siblings(ma.tags.labelText),e=c.find(ma.selectors.optionFirstChild);c.find(ma.tags.option).not(ma.selectors.firstChild).remove(),e.prop(ma.prop.selected,!0),this.updateSelectText(c,na.versionSelectText),b&&this.addState([c,d],ma.classes.disabled,ma.classes.disabled)},resetVehicleVersionSelectBox:function(c){var d,e=c.find(ma.selectors.vehicleVersionsSelectBox),f=e.find(ma.selectors.optionFirstChild);oa.length?e.find(ma.selectors.optionWithValue).each(function(c,e){d=b.pluck(oa,"vehicleversionId"),b.contains(d,e.value)?a(e).prop(ma.prop.disabled,!0):a(e).prop(ma.prop.disabled,!1)}):e.children(ma.selectors.optionWithValue).prop(ma.prop.disabled,!1),f.prop(ma.prop.selected,!0),this.updateSelectText(e,na.versionSelectText)},updateSelectText:function(a,b){a.siblings(ma.tags.labelText).text(b)},removeState:function(c,d,e){b.isArray(c)?a.each(c,function(a,b){b.removeClass(d).prop(e,!1)}):c.removeClass(d).prop(e,!1)},addState:function(c,d,e){b.isArray(c)?a.each(c,function(a,b){b.prop(e,!0).addClass(d)}):c.prop(e,!0).addClass(d)},updateVehicle:function(a,b,c){var d=a.prevAll().length;z.info("updateVehicle"),oa.splice(d-1,1),U-=1,a.empty(),this.getVehicleSpecs(c,b,d,!0)},removeVehicle:function(b){var c=b.prevAll().length,d=b.nextAll().length,e=C.css(ma.cssValues.height);z.info("removeVehicle"),C.css(ma.cssValues.height,e),this.removeVehicleSpecs(c),oa.splice(c-1,1),this.resetPacksSection(c),pa.resetGenerator(),U-=1,A?C.css(ma.cssValues.height,ma.cssValues.auto):(b.addClass(ma.classes.carFadeOut),setTimeout(function(){b.remove(),C.css(ma.cssValues.height,ma.cssValues.auto)},100)),1===d&&1===c&&(O.hide(),a(ma.selectors.tabsDropdownContainer).addClass(ma.classes.hidden),P.addClass(ma.classes.hidden))},removeVehicleSpecs:function(c){z.info("removeVehicleSpecs"),b.each(Y,function(b){var d;d=a(b).find(ma.tags.cell).eq(c),d.addClass(ma.classes.noData).find(ma.tags.labelText).empty(),d.insertAfter(d.siblings().last())})},setupAccordion:function(){var b=[],c=this;B.find(ma.selectors.accordionChildWrapper).each(function(){var d=[],e=a(this);e.find(ma.selectors.accordionGroup).each(function(){var b=a(this),f=b.children(ma.selectors.accordionChildHeader),g=b.children(ma.selectors.accordionPanel);d.push(new h({$contentElement:g,$headerElement:f,isDisabled:!1,isOpen:0===d.length,transitionToClose:"toggle"})),e.on(ma.events.tableShown,function(){c.appendChevronIcon(g,!0)}),g.on(ma.events.accordionStateChange,function(b,d){c.appendChevronIcon(a(this),d),Waypoint.refreshAll()})}),b.push(new g({$container:e,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:!0,items:d})),B.off(ma.events.click,ma.selectors.accordionChildHeader).on(ma.events.click,ma.selectors.accordionChildHeader,a.proxy(s,this))})},appendChevronIcon:function(c,d){var e,f=c.find(ma.tags.row);d&&b.each(f,function(b){e=a(b).children().eq(0),e.find(ma.tags.labelText).height()>66&&e.addClass(ma.classes.longText)})},showFullHeading:function(b){a(b.currentTarget).toggleClass(ma.classes.fullHeading)},updateNextStepsItem:function(a,b){var c=S.find(ma.selectors.name+":eq("+a+")"),d=T.find(".ctas:eq("+a+")");c.html(this.nextSteps.headerTemplate(b)).addClass(ma.classes.active).attr("tabindex","0"),d.html(this.nextSteps.ctasTemplate(b)),this.setVisibilityNextSteps()},setVisibilityNextSteps:function(){S.find(ma.selectors.active).length?(R.removeClass(ma.classes.hidden),this.setSelectedItem()):R.addClass(ma.classes.hidden)},setSelectedItem:function(a){S.find(ma.selectors.selected).length||(a=1),S.find(ma.selectors.name+":eq("+a+")").addClass(ma.classes.selected).siblings().removeClass(ma.classes.selected),T.find(ma.selectors.ctas+":eq("+a+")").addClass(ma.classes.selected).siblings().removeClass(ma.classes.selected)},removeNextStepsItem:function(a){S.append(this.nextSteps.infoClone).find(ma.selectors.name+":eq("+a+")").remove(),T.append(this.nextSteps.ctasClone).find(ma.selectors.ctas+":eq("+a+")").remove(""),this.setVisibilityNextSteps()},isSelectedCTAVisible:function(){S.find(ma.selectors.active).length&&!S.find(ma.selectors.selected+":visible").length&&this.setSelectedItem(1)},changeNextStepsVehicle:function(b){if(b.type===ma.events.click||b.type===ma.events.keydown&&13===b.keyCode){var c=a(b.currentTarget),d=a(b.target);d.is("a")?u(d):qa!==c.index()&&(qa=c.index(),this.setSelectedItem(c.prevAll().length),t(b))}},resetPacksSection:function(c){var d;oa.length>1?Q.find("tr[data-section-id]").each(function(c,e){d=b.some(oa,function(c){return b.some(c.vehicleData.packs.packs,function(b){return b.key===a(e).data("section-id")&&b.type!==ma.specStatusType.forbidden})}),a(e).children().find(ma.selectors.availableGradeByPack).toggleClass(ma.classes.hidden,d)}):Q.find("tr[data-section-id]").find(ma.selectors.availableGradeByPack).addClass(ma.classes.hidden)},stickyHeader:function(){var c=0;if(ca.find(".c_046 .docked-nav-wrapper").length&&ca.find(".c_046 .docked-nav-wrapper").is(":visible")&&(c=a(".c_046 .docked-nav-outer").height()),!da.length)return!1;new Waypoint({element:da.parent(),handler:b.bind(function(a){this.initStickyNav(c,a)},this),offset:function(){return da.hasClass(ma.classes.barFixed)?c-(parseFloat(O.css("margin-top").slice(0,-2))+ea.outerHeight()-20):c-(da.outerHeight()+ea.outerHeight())}})},initStickyNav:function(a,b){var c;if(!da.find(".added-vehicle").length||window.pageYOffset<0)return void da.removeClass(ma.classes.barFixed);c=da.height()+20,da.toggleClass(ma.classes.barFixed,"down"===b),B.toggleClass(ma.classes.stickyHeaderEnabled,"down"===b),da.hasClass(ma.classes.barFixed)?(O.css(ma.cssValues.marginTop,c+"px"),C.css(ma.cssValues.marginTop,a+"px")):(O.css(ma.cssValues.marginTop,0),C.css(ma.cssValues.marginTop,0))},hideStickyNav:function(){var a;a||(a=new Waypoint({element:R,handler:b.bind(function(a){da.toggleClass(ma.classes.hidden,"down"===a),B.toggleClass(ma.classes.stickyHeaderEnabled,"up"===a)},this),offset:0}))}},pa.publishVehicle=function(b,c,d,e,g,h){var i,k,m,n,o=c>=0?"update":"add",p=-1,q={},s=I.parent().find(ma.selectors.vehicleModel),t=b.gradePriceDisabled,u=b.vehiclePriceDisabled;z.info("publishVehicle"),"update"===o?(k=a(V).html(),i=C.children(ma.tags.list).eq(c),i.append(k).removeClass(ma.classes.editMode)):(E.before(V),i=E.prev()),U+=1,ra||(p=na.getRecord("gradeId"),q=na.getRecord("versionPossibilities")),n=i.find(ma.selectors.universalPrice),(n.data("price-vehicle-disabled")||t||u)&&(n.addClass(ma.classes.hidden),n.after("<strong>"+b.vehiclePriceDisabledLabel+"</strong>")),m=new v({$element:i,gradeId:p,versionPossibilities:q,vehicleData:b,vehicleModel:s.data("modelName"),vehicleGrade:h,vehicleVersion:e,vehicleGradeId:g,vehicleversionId:d}),"update"===o?oa.splice(c-1,0,m):(oa.push(m),Waypoint.refreshAll()),f.init(i),j.renderDisclaimers(B),r(h,g,e,d,o),sa=!1,l.deferredReset.notify(!0),pa.resetGenerator(),na.hideStickyNav()},pa.resetGenerator=function(){ra?na.resetVehicleVersionSelectBox(E):(na.resetGradeSelectBox(E),na.resetVersionSelectBox(E,!0))},pa.bindEvents=function(){var b;a(ma.selectors.gradeSelectBox).children(),a(ma.selectors.versionSelectBox).children(),a(ma.selectors.vehicleVersionsSelectBox).children();ra?F=H:G.on(ma.events.change,{templateInstance:E},na.getEngines),F.on(ma.events.change,function(){na.removeState(I,ma.classes.eleDisabled,ma.prop.disabled)}),I.on(ma.events.click,function(a){a.preventDefault(),na.getVehicleSpecs(I,F),pa.resetGenerator()}),ca.on(ma.events.modalOpen,_,function(a){b=_.$content.find(ma.selectors.confirmRemoveLabel),b.html(b.data(ma.data.removeText).replace("%","<span class='"+ma.classes.removedVehicleName+"'>"+aa+"</span>")),_.$closeButton.addClass(ma.classes.hidden)}),a(document).on(ma.events.click,ma.selectors.confirmCancelButton,function(a){_.close()}),a(document).on(ma.events.click,ma.selectors.confirmRemoveButton,function(a){na.removeVehicle(ba),_.close()})},v.prototype.setVehicleTitle=function(){ra?this.$vehicleTitleGrade.addClass(ma.classes.vehicleVersionName).text(this.vehicleVersion):(this.$vehicleTitleGrade.text(this.vehicleGrade),this.$vehicleTitleDetail.text(this.vehicleData.engineName+", "+this.vehicleData.transmissionValue+", "+this.vehicleData.driveTrainValue)),na.updateNextStepsItem(this.getIndex(),this.vehicleData)},v.prototype.setVehiclePrice=function(){var a,b=this.$element.find(ma.selectors.universalPrice);b.length?(a=new k.UniversalPricing({$element:b,manualPriceFormatting:b.data("manualPriceFormatting"),priceUrl:b.data("priceUrl"),dataPath:b.data("modelPath"),modelKey:b.data("modelCode"),gradeKey:this.vehicleData.gradeKey,versionKey:this.vehicleData.versionKey,priceCode:b.data("priceCode")||"default",extraInfoPathPrefix:b.data("extraInfoPathPrefix"),extraInfoPathSuffix:this.vehicleData.path}),a.refreshPrice()):(b=this.$element.find(ma.selectors.c_184B),b.length&&(b.data({modelGrade:this.vehicleData.gradeKey||this.vehicleGradeId,modelVersion:this.vehicleData.versionKey,priceDescription:this.vehicleData.priceDescription,priceDisclaimer:this.vehicleData.priceDisclaimer,priceDisabled:this.vehicleData.vehiclePriceDisabled,priceDisabledDescription:this.vehicleData.vehiclePriceDisabledDescription,priceDisabledLabel:this.vehicleData.vehiclePriceDisabledLabel,hasDescriptionOverrideCondition:this.vehicleData.priceDescriptionOverride,hasDisclaimerOverrideCondition:this.vehicleData.priceDisclaimerOverride}),w(this.$element)))},v.prototype.setVehicleImage=function(){var a=D.find('div[value="'+this.vehicleGradeId+'"]').find(ma.tags.img).attr(ma.attr.src);this.$element.find(ma.tags.img).attr(ma.attr.src,a)},v.prototype.setVehicleImageDisclaimer=function(){var a=D.find('div[value="'+this.vehicleGradeId+'"]').find(".disclaimer").text();this.$element.find(ma.selectors.vehicleImageDisclaimer).text(a)},v.prototype.setSelectValues=function(){ra?(this.versionSelectBox.val(this.vehicleData.versionKey),na.updateSelectText(this.versionSelectBox,this.versionSelectBox.find(ma.selectors.optionSelected).text())):(na.loadVersionOptions(this.versionPossibilities,this.$element),this.gradeSelectBox.val(this.gradeId),this.versionSelectBox.val(this.vehicleData.versionKey),na.updateSelectText(this.gradeSelectBox,this.gradeSelectBox.find(ma.selectors.optionSelected).text()),na.updateSelectText(this.versionSelectBox,this.versionSelectBox.find(ma.selectors.optionSelected).text()))},v.prototype.setTableData=function(){var c=this.$element.prevAll().length;O.show(),a(ma.selectors.tabsDropdownContainer).removeClass(ma.classes.hidden),P.removeClass(ma.classes.hidden),B.find(ma.selectors.accordionChildWrapper).trigger(ma.events.tableShown),b.each(Y,function(b){a(b).find(ma.tags.cell).eq(c).removeClass(ma.classes.noData)}),this.loadVehicleSpecifications(c),this.loadVehicleEmissions(c,L,K,"value"),this.loadVehicleEquipment(c),this.loadVehiclePacks(c)},v.prototype.renderEmissionsDisclaimers=function(a){var c=a.closest(ma.selectors.universalPrice),d=[{label:c.data(ma.data.fuelConsumptionDisclaimerLabel),key:"combined"},{label:c.data(ma.data.co2EmissionsDisclaimerLabel),key:"co2Emissions"},{label:c.data(ma.data.efficiencyDisclaimerLabel),key:"efficiency"}],e=this.vehicleData;b.each(d,function(b){var c;e.fuelConsumption&&e.fuelConsumption[b.key]&&(c=e.fuelConsumption[b.key])&&c.value&&a.append("<p>"+b.label+" "+c.value+"</p>")}),a.find(ma.tags.priceValue).length||a.hide()},v.prototype.loadVehicleSpecifications=function(c){var d,e,f,g,h,i=b.flatten(b.pluck(this.vehicleData.techSpecs,ma.data.specsKey)),j=b.findWhere(this.vehicleData.techSpecs,{key:"fuelConsumption"});j&&(f=b.pluck(b.flatten(j.specs),"customKey")),$.emissionIconDetails,this.clearColumnData(J,c,!0),a.each(i,b.bind(function(i,j){d=J.find('tr[data-section-id="'+j.customKey+'"]'),g=d.find(ma.tags.cell).eq(0),h=d.prev(ma.selectors.subSectionHeader).find(ma.tags.mobileCell).eq(0),d.length&&(d.each(b.bind(function(b,d){e=a(d).find(ma.tags.cell).eq(c).find(ma.tags.labelText),e.text(j.value)},this)),b.contains(f,j.customKey)&&(g.find(ma.tags.img).length||this.displayEmissionIcon(g),h.find(ma.tags.img).length||this.displayEmissionIcon(h)))},this))},v.prototype.loadVehicleEmissions=function(a,c,d,e){var f,g,h,i=this.vehicleData;b.each(i.consumptionSpecs,b.bind(function(b){var j,k;b&&(j=d.find('tr[data-section-id="'+b.groupKey+'"]'),h=j.find(ma.tags.cell).eq(0),g=j.prev(ma.selectors.subSectionHeader).find(ma.tags.mobileCell).eq(0),j.length&&(f=document.createElement(ma.tags.img),f.setAttribute(ma.attr.src,i.efficiencyImage),k=j.find(ma.tags.cell).eq(a).find(ma.tags.labelText),k.html(b[e]),c.find(ma.tags.cell).eq(a).find(ma.tags.labelText).empty().append(f),h.find(ma.tags.img).length||this.displayEmissionIcon(h),g.find(ma.tags.img).length||this.displayEmissionIcon(g)))},this))},v.prototype.loadVehicleEquipment=function(c){var d,e,f=b.flatten(b.pluck(this.vehicleData.equipmentSpecs,ma.data.specsKey));this.clearColumnData(M,c),a.each(f,b.bind(function(a,b){d=M.find('tr[data-section-id="'+b.customKey+'"]'),d.length&&(e=d.find(ma.tags.cell).eq(c).find(ma.tags.labelText),this.addSpecsStatusByType(e,b.specStatus,b.equipmentPrice,b.customKey))},this)),this.addIfAvailableInPacks(c)},v.prototype.addIfAvailableInPacks=function(c){var d,e,f,g;M.find(ma.tags.row).each(b.bind(function(h,i){d=a(i),e=d.data("section-id"),f=d.find(ma.tags.cell).eq(c).find(ma.tags.labelText),g=b.where(b.flatten(b.pluck(this.vehicleData.packs.packs,ma.data.specsKey)),{key:e,type:"PACK"}),g.length&&(f.empty().removeClass(),fa?this.enableTooltip(f,e,ha,ja):f.html(ha))},this))},v.prototype.loadVehiclePacks=function(c){var d,e,f=this.vehicleData.packs.packs,g=[];this.clearColumnData(Q,c),g=b.map(f,function(a){return{title:a.name,type:a.type,key:a.key,price:a.price}}),a.each(g,b.bind(function(a,b){d=Q.find('tr[data-section-id="'+b.key+'"]'),d.length&&(e=d.find(ma.tags.cell).eq(c).find(ma.tags.labelText),this.addSpecsStatusByType(e,b.type,b.price))},this)),this.showAvailablePackContainer(g,c)},v.prototype.displayEmissionIcon=function(a){var b,c;c=$.emissionIconDetails,c.emissionIconCheck&&(b=document.createElement(ma.tags.img),b.setAttribute(ma.attr.src,c.emissionIconPath),b.setAttribute(ma.attr.alt,c.emissionIconAltText),a.append(b).addClass(ma.classes.emissionIcon))},v.prototype.showAvailablePackContainer=function(c,e){var f,g,h,i,j,k,l,m,n,o,p={},q={};Q.find(ma.tags.row).each(function(r,s){f=a(s),g=f.data("section-id"),k=[],h=b.findWhere(c,{key:g}),i=f.find(ma.tags.cell).eq(e).find(ma.tags.labelText),(b.isUndefined(h)||h.type===ma.specStatusType.forbidden)&&oa.length>=1?(Object.keys(Z).forEach(function(a){p={},l=Z[a],j=b.assign.apply(b,b.pluck(b.pluck(l.versions,"packs"),"packs")),p.gradeName=b.findWhere($.gradeList,{gradeId:a}).gradeName,j.length&&(m=b.some(j,function(a){return a.key===g&&a.type!==ma.specStatusType.forbidden}),p.thisPackExists=m),k.push(p)}),n=b.some(oa,function(a){return b.some(a.vehicleData.packs.packs,function(a){return a.key===g&&a.type!==ma.specStatusType.forbidden})}),q.allPacks=k,o=b.some(q.allPacks,function(a){return!0===a.thisPackExists}),f.children().find(ma.selectors.availableGradeByPack).length||f.children().find(ma.selectors.accordionPanel).append(d.compile(a(ma.selectors.availableGradeByPackTpl).html())(q)),f.children().find(ma.selectors.availableGradeByPack).toggleClass(ma.classes.hidden,n||!o)):f.children().find(ma.selectors.availableGradeByPack).addClass(ma.classes.hidden)})},v.prototype.formatCurrency=function(a){var c=parseFloat(a),d=new m({HELIOS:ma.HELIOS});return b.isFinite(c)?d.asCurrency(c):a},v.prototype.clearColumnData=function(b,c,d){var e,f,g=b.find(ma.selectors.datarow);a.each(g,function(d,g){e=a(g),f=e.find(ma.tags.cell).eq(c).find(ma.tags.labelText),f.empty().removeClass(),b!==J&&f.addClass(ma.classes.iconNotIncluded)})},v.prototype.addSpecsStatusByType=function(a,b,c,d){var e;e=c?N.data(ma.data.optionLabel).replace("%",this.formatCurrency(c)):"",a.empty().removeClass(),b===ma.specStatusType.systematic||b===ma.specStatusType.default?a.addClass(ma.classes.iconIncluded):b===ma.specStatusType.option?this.vehicleData.vehiclePriceDisabled?a.text(this.vehicleData.vehiclePriceDisabledLabel):a.addClass(ma.classes.bold).text(e):b===ma.specStatusType.pack?fa?this.enableTooltip(a,d,ha,ja):a.html(ha):b===ma.specStatusType.optionPack?(this.vehicleData.vehiclePriceDisabled?a.text(this.vehicleData.vehiclePriceDisabledLabel):a.addClass(ma.classes.bold).text(e),ga?this.enableTooltip(a,d,ia,ka):a.append("<h5>"+ia+"</h5>")):a.addClass(ma.classes.iconNotIncluded)},v.prototype.enableTooltip=function(b,c,e,f){var g,h={};g=this.getEquipInPacksByKey(c),g.length&&(h.tooltipContentData=g,h.tooltipHeading=f,ma.tooltips.tooltipID="tooltip_"+c,ma.tooltips.tooltipLabel=e,ma.tooltips.tooltipContent=d.compile(a(".tooltip-content-template").html())(h),window.matchMedia&&window.matchMedia(ma.HELIOS.config.common.mediaQuery.is.small).matches&&b.parent().is(":nth-child(3)")&&(b.addClass(ma.classes.rightTooltipCell),ma.tooltips.tooltipMy="top right",ma.tooltips.tooltipAt="bottom right",ma.tooltips.xOffsetCentral=B.find(ma.selectors.compareTable).first().width()/4-6),b.append(o(ma.tooltips)),ma.tooltips.tooltipContainer=b.find(ma.selectors.c_008),p.createTooltips(b.find(".has-tooltip"),ma),b.find(".has-tooltip").click(function(a){a.preventDefault()}))},v.prototype.getEquipInPacksByKey=function(a){var c;return b.chain(this.vehicleData.packs.packs).filter(function(c){return b.findWhere(c.specs,{key:a})}).map(function(a){return c={},c.specKey=a.key,c.name=a.name,c}).value()},v.prototype.removeVehicle=function(){var a=this.getIndex();oa[a-1];aa=this.$vehicleTitleGrade.text()+" "+this.$vehicleTitleDetail.text(),ba=this.$element,na.removeNextStepsItem(a),_.open("#c_59D-remove-modal")},v.prototype.toggleEditMode=function(b){var c=this.getIndex(),d=oa[c-1];b&&r(a.trim(d.vehicleGrade),d.vehicleGradeId,d.vehicleVersion,d.vehicleversionId,"edit"),this.resetselectBox(c),this.$element.toggleClass(ma.classes.editMode),Waypoint.refreshAll()},v.prototype.resetselectBox=function(){ra?this.resetVersionSelectBox():(this.resetGradeSelectBox(),this.resetVersionSelectBox())},v.prototype.resetGradeSelectBox=function(){var c,d;this.gradeSelectBox.find(ma.selectors.optionWithValue).each(function(e,f){d=b.pluck(b.where(oa,{gradeId:f.value}),"vehicleversionId"),c=d.filter(function(a){return Object.keys(Z[f.value].versions).indexOf(a)>-1}),f.value!==a(f).parent().val()&&(a(f).parent().data(ma.data.showEngine)?c.length===Object.keys(Z[f.value].versions).length?a(f).prop(ma.prop.disabled,!0):a(f).prop(ma.prop.disabled,!1):b.contains(b.pluck(oa,"gradeId"),f.value)?a(f).prop(ma.prop.disabled,!0):a(f).prop(ma.prop.disabled,!1))})},v.prototype.resetVersionSelectBox=function(){var c=b.pluck(oa,"vehicleversionId");this.versionSelectBox.find(ma.selectors.optionWithValue).each(function(d,e){b.contains(c,e.value)&&e.value!==a(e).parent().val()?a(e).prop(ma.prop.disabled,!0):a(e).prop(ma.prop.disabled,!1)})},
v.prototype.updateVehicle=function(a){a.preventDefault(),this.vehicleData.versionKey!==this.versionSelectBox.val()?na.updateVehicle(this.$element,this.versionSelectBox,this.addVehicleBtn):this.toggleEditMode()},v.prototype.enableUpdateBtn=function(){this.addVehicleBtn.hasClass(ma.classes.eleDisabled)&&na.removeState(this.addVehicleBtn,ma.classes.eleDisabled,ma.prop.disabled),this.cancelEditBtn.addClass(ma.classes.hidden),this.addVehicleBtn.removeClass(ma.classes.hidden),this.removeVehicleBtn.addClass(ma.classes.hidden)},v.prototype.getIndex=function(){return this.$element.prevAll().length},v.prototype.bindEvents=function(){ra||this.gradeSelectBox.on(ma.events.change,{templateInstance:this.$element},na.getEngines),this.versionSelectBox.on(ma.events.change,this.enableUpdateBtn.bind(this)),this.$element.find(ma.selectors.removeVehicleBtn).on(ma.events.click,this.removeVehicle.bind(this)),this.$element.find(ma.selectors.editVehicleBtn).on(ma.events.click,this.toggleEditMode.bind(this)),this.$element.find(ma.selectors.cancelEditBtn).on(ma.events.click,this.toggleEditMode.bind(this)),this.addVehicleBtn.on(ma.events.click,this.updateVehicle.bind(this)),a(document).on(ma.events.priceSuccess+" "+ma.events.priceFinanceDataSuccess,function(){setTimeout(function(){Waypoint.refreshAll()},500)})},{init:y,pageCtrlHandler:na}}),define("c_060",["jquery"],function(a){"use strict";function b(b){f=a.extend({},e,b);var g=a(f.root);if(d=g.attr("data-vehicle-model"),!g.length)return!1;c()}function c(){var a={componentId:"C60_Request_A_Call_Back_Confirmation",vehicleModel:d};f.analyticsManager.append("formSteps",a)}var d,e={root:".c_060"},f=null;return{init:b}}),define("c_061",["jquery","googleMapsSingleton","logger","underscore","accordion","accordionItem"],function(a,b,c,d,e,f){"use strict";function g(b,d){var e;return h=a(l.selectors.root),!!h.length&&(i=new c({prefix:"C61"}),e=new j(h,b),(void 0===d||d)&&e.init(),e)}var h,i,j,k="c_061",l={events:{click:"click."+k,resize:"resize."+k},classes:{open:"open",animate:"animate",active:"active"},selectors:{root:".c_061",mainContainer:".dealership-block",expandContainer:".detail-info",moreDetail:".more-detail",lessDetail:".less-detail",map:".map",iconDirections:".icon-directions",html:"html",labelHoliday:".holiday h5",inner:".inner",tagging:"[data-adobe-tagging]",accordion:".accordion",accordionHeader:"h5",accordionContent:".opening-content",callLinks:".contact .cta-group .icon-telephone",headerCallLinks:".info .cta-group .icon-telephone",emailLinks:".cta-group .icon-mail",getDirectionsLinks:".cta-group .icon-directions",discoverDealerLinks:".cta-group .icon-external-link",serviceCallLinks:".list-company .icon-telephone",dealerInformation:".information",openingInformation:".heading-group .content"},data:{dealerIdReference:"dealerId",dealerTypeReference:"dealerType"},defaultStyle:{styles:[],image:{url:""}},timeout:900},m=[],n=!1;return j=function(b,c){var e,f=this;this.$el=a(b),this.settings=a.extend({},l,c),e=this.settings.selectors,this.$html=a(e.html),this.$root=a(e.root),this.$map=this.$el.find(e.map),this.$moreDetail=this.$el.find(e.moreDetail),this.$lessDetail=this.$el.find(e.lessDetail),this.$mainContainer=this.$el.find(e.mainContainer),this.$expandContainer=this.$el.find(e.expandContainer),this.$getDirection=this.$el.find(e.iconDirections),this.$labelHoliday=this.$el.find(e.labelHoliday),this.$accordion=this.$el.find(e.accordion),this.$callLinks=this.$el.find(e.callLinks),this.$headerCallLinks=this.$el.find(e.headerCallLinks),this.$emailLinks=this.$el.find(e.emailLinks),this.$getDirectionsLinks=this.$el.find(e.getDirectionsLinks),this.$discoverDealerLinks=this.$el.find(e.discoverDealerLinks),this.$serviceCallLinks=this.$el.find(e.serviceCallLinks),this.$dealerInformation=this.$root.find(e.dealerInformation),this.mediaQueries=this.settings.HELIOS.config.common.mediaQuery,this.componentId="C61_Dealer_Details",this.dealerAddress=function(){var b=[];return f.$root.find("address span").each(function(){var c=a(this).text();c&&b.push(c)}),b.join(",")}(),this.dealerName=a.trim(this.$root.find("h1").text().replace(/(\r\n|\n|\r)/gm,"")),this.dealerId=this.$dealerInformation.data(this.settings.data.dealerIdReference)||"dealer id not found",this.dealerType=this.$dealerInformation.data(this.settings.data.dealerTypeReference)||"unknown",this.$innerDetailInfo=this.$expandContainer.find(e.inner),d.bindAll(this,"requestGeolocationCallback","geoErrorCallback","showMap","openSubNav","triggerCloseSubNav","closeSubNav","togglePanel","openingAnimationEnded","closingAnimationEnded","resize"),this.$openingInformation=this.$root.find(l.selectors.openingInformation)},j.prototype={init:function(){this.oldIE=a("html").hasClass("ie9")||a("html").hasClass("ltie9"),this.oldIE&&(this.settings.timeout=0),this.bindEvents(),void 0!==b&&b.getDeferred().done(this.showMap),this.requestGeolocation(),this.setupAccordions(this.$accordion),this.loadCurrentDealerTimings(),this.setDealerStatus(this.$openingInformation)},trackOpenSubNav:function(a){var b=this.settings.analyticsManager,c=b.trackingVars.buttonNoCookie,d=b.getTrackingObjectProperties(c),e={};e[d.componentId]=this.componentId,e[d.buttonText]=a.currentTarget.innerHTML,e[d.contentAction]="show more",e[d.locationInPage]="Dealer details",b.track(c,e)},trackEvent:function(a){var b=this.settings.analyticsManager,c=b.trackingVars.dealerInteraction,d=b.getTrackingObjectProperties(c),e={};e[d.componentId]=this.componentId,e[d.dealerId]=this.dealerId,e[d.dealerName]=this.dealerName,e[d.dealerAddress]=this.dealerAddress,e[d.dealerType]=this.dealerType,a&&(e[d.dealerAction]=a),b.track(c,e)},loadCurrentDealerTimings:function(){if(!this.settings.HELIOS.components.hasOwnProperty(k))return i.warn("No opening/closing hours data on page"),!1;this.dealerOpeningData=HELIOS.components.c_061.openingHours},timeToDate:function(a){if(d.isString(a)&&!d.isEmpty(a))return a=a.split(/[: ]/),this.dateObj.setHours(a[0],+a[1],0),this.dateObj},getDayOfWeek:function(){var a;return this.dateObj=new Date,a=d.keys(this.dealerOpeningData.openingHoursSpec),this.nextAvailableDay?a[this.dateObj.getDay()+1]:a[this.dateObj.getDay()]},getDealerOpeningHours:function(a){var b,c=this.getDayOfWeek(),e=this.dealerOpeningData.specialDates,f=!1;d.each(e,function(a){b=new Date(a.specialDate+", "+this.dateObj.getFullYear()),+c===b.getDate()&&this.dateObj.getMonth()===b.getMonth()&&(f=!0,this.dealerOpeningHours=a)},this),f||d.each(a.openingHoursSpec,function(a,b){b===c&&(this.dealerOpeningHours=a)},this),d.each(this.dealerOpeningHours,function(a,b){this.dealerTimes=this.dealerOpeningHours[b].times,d.each(this.dealerTimes,function(a){this.currentDealerTimes.push({open:a.start,close:a.end})},this)},this)},getDealerAvailability:function(){var a;return this.currentDealerTimes=[],this.currentDate=new Date,this.getDealerOpeningHours(this.dealerOpeningData),a=d.every(this.dealerTimes,function(a,b){return""===a.start&&""===a.end}),a&&(this.nextAvailableDay=!0,this.dealerClosed=!0,this.currentDealerTimes=[],this.getDealerOpeningHours(this.dealerOpeningData)),this.currentDealerTimes},setDealerStatus:function(b){var c,e,f,g=[],h=this.getDealerAvailability(),i=/%%closeTime%%/gi,j=/%%openTime%%/gi,k=/%%date%%/gi;h.length&&(this.nextAvailableDay=!1,d.each(this.dealerOpeningData.localisation,function(a){g.push({openStatus:a.openText,closedStatus:a.closedText})}),f=d.some(h,function(a){return!(!a.open||!a.close)&&(!(!a.open||!a.close)||void 0)}),f||(h=[{open:h[0].open,close:h[h.length-1].close}]),e=d.every(h,function(b){return!b.open||!b.close||(this.currentDate<this.timeToDate(b.open)?(c=g[0].closedStatus.replace(k,a.padWithZeros(this.currentDate.getDate(),2)+"/"+a.padWithZeros(this.currentDate.getMonth()+1,2)).replace(j,b.open),!1):this.currentDate>this.timeToDate(b.close)||(c=g[0].openStatus.replace(j,b.open).replace(i,b.close),!1))},this),(e||this.dealerClosed)&&(this.nextAvailableDay=!0,this.currentDealerTimes=[],h=this.getDealerAvailability(),c=g[0].closedStatus.replace(k,a.padWithZeros(this.currentDate.getDate()+1,2)+"/"+a.padWithZeros(this.currentDate.getMonth()+1,2)).replace(j,h[0].open)),c&&b.html(c))},requestGeolocation:function(){Modernizr.geolocation&&navigator.geolocation.getCurrentPosition&&navigator.geolocation.getCurrentPosition(this.requestGeolocationCallback,this.geoErrorCallback)},requestGeolocationCallback:function(a){var b=a.coords.latitude,c=a.coords.longitude,d="&saddr="+b+","+c,e=this.$getDirection.prop("href")+d;this.$getDirection.prop("href",e)},geoErrorCallback:function(a){var b;switch(a.code){case a.PERMISSION_DENIED:b="User denied the request for Geolocation.";break;case a.POSITION_UNAVAILABLE:b="Location information is unavailable.";break;case a.TIMEOUT:b="The request to get user location timed out.";break;default:b="An unknown error occurred."}this.settings.debug&&b&&i.error(b)},openSubNav:function(a){a.preventDefault(),this.$mainContainer.addClass(this.settings.classes.animate),this.$expandContainer.css({height:this.$innerDetailInfo.innerHeight()}),this.trackOpenSubNav(a),setTimeout(this.openingAnimationEnded,this.settings.timeout)},openingAnimationEnded:function(){this.$mainContainer.addClass(this.settings.classes.open).removeClass(this.settings.classes.animate),this.clearHeight()},triggerCloseSubNav:function(a){a.preventDefault(),this.$expandContainer.css({height:this.$innerDetailInfo.innerHeight()}),d.delay(this.closeSubNav,100)},closeSubNav:function(){this.$mainContainer.addClass(this.settings.classes.animate).removeClass(this.settings.classes.open),this.$expandContainer.css({height:"0"}),setTimeout(this.closingAnimationEnded,this.settings.timeout)},closingAnimationEnded:function(){this.$mainContainer.removeClass(this.settings.classes.animate),this.clearHeight(),this.showButton()},showButton:function(){var b=this.$mainContainer.offset().top;a("html, body").animate({scrollTop:b},200)},bindEvents:function(){var b=this;this.$moreDetail.on(this.settings.events.click,this.openSubNav),this.$lessDetail.on(this.settings.events.click,this.triggerCloseSubNav),this.$labelHoliday.on(this.settings.events.click,this.togglePanel),a(this.settings.window).on(this.settings.events.resize,d.debounce(this.resize,200)),this.$headerCallLinks.on(this.settings.events.click,function(){b.trackEvent("call|header-link")}),this.$callLinks.on(this.settings.events.click,function(){b.trackEvent("call|information-link")}),this.$emailLinks.on(this.settings.events.click,function(){b.trackEvent("email")}),this.$getDirectionsLinks.on(this.settings.events.click,function(){b.trackEvent("get directions")}),this.$discoverDealerLinks.on(this.settings.events.click,function(){b.trackEvent("discover dealer")}),this.$serviceCallLinks.on(this.settings.events.click,function(){b.trackEvent("call|services-link")})},getStyleGoogleMap:function(){return this.settings.HELIOS&&this.settings.HELIOS.components&&this.settings.HELIOS.components.c_061?this.settings.HELIOS.components.c_061.settings:this.settings.defaultStyle},showMap:function(){var a,b=this.getStyleGoogleMap(),c=this.$map.data("latitude"),d=this.$map.data("longitude"),e=new google.maps.LatLng(c,d),f={zoom:12,center:e,disableDefaultUI:!0,styles:b&&b.styles},g=new google.maps.Map(this.$map[0],f),h="";b&&b.image.url&&(h={url:b.image.url,scaledSize:new google.maps.Size(b.image.width,b.image.height)}),a=new google.maps.Marker({position:e,icon:h}),a.setMap(g)},togglePanel:function(b){a(b.target).parent().toggleClass(this.settings.classes.active)},resize:function(){this.setupAccordions(this.$accordion)},setupAccordions:function(b){var c=this;!n&&window.matchMedia&&window.matchMedia(this.mediaQueries.is.smallOrMedium).matches?(b.each(function(){c.setupAccordion(a(this))}),n=!0):window.matchMedia&&window.matchMedia(this.mediaQueries.is.large).matches&&(c.disableAccordion(b),n=!1,m=[])},setupAccordion:function(b){var c,d,g=a(this.settings.selectors.accordionContent,b),i=a(this.settings.selectors.accordionHeader,b);for(d=0,c=i.length;d<c;d++)m.push(new f({$contentElement:g.eq(d),$headerElement:i.eq(d),transitionToClose:"toggle"}));new e({$container:h,items:m})},disableAccordion:function(a){var b,c=a.find(this.settings.selectors.accordionContent);for(c.show(),b=0;b<m.length;b++)m[b].disable()},clearHeight:function(){this.$expandContainer.css("height","")}},{init:g}}),define("c_062",["jquery"],function(a){"use strict";function b(b){f=a.extend({},e,b),c()}function c(){a(f.selectors.analyticButton,f.selectors.root).on("click",function(){d(this)})}function d(b){var c=b,d=a(c),e=c.href,g=d.text(),h=f.analyticsManager,i=h.trackingVars.genericClick,j=h.getTrackingObjectProperties(i),k={};k[j.componentId]="C62_Welcome_Message",k[j.destination]=e,k[j.locationInPage]="welcome",k[j.buttonText]=g,h.track(i,k)}var e={fooSelect:"#foo",fooTemplateSelect:"#foo-template",selectors:{root:".c_062",analyticButton:".desc a"},fooItemClass:"foo-item",fooEmptyClass:"foo-empty"},f=null;return{init:b}}),define("c_063_0",["jquery","underscore","storeDealer","goTo"],function(a,b,c,d){"use strict";function e(d){if(this.settings=b.extend({},i,d),this.$el=a(this.settings.selectors.root),!this.$el.length)return!1;this.$dealerLinks=this.$el.find("a"),this.bindEvents(),g=new c({HELIOS:this.settings.HELIOS}),g.init()}function f(a){return new e(a)}var g,h=".c_063-0",i={events:{click:"click"+h},attrs:{dealerID:"data-dealer-id",target:"target",componentId:"C63_DWZ_Action_Panel"},selectors:{root:".c_063-0"}};return e.prototype.bindEvents=function(){return this.$dealerLinks.on(this.settings.events.click,b.bind(this.handleClick,this)),this},e.prototype.handleClick=function(c){var e=c.currentTarget,f=a(e),h=e.href,i=f.attr(this.settings.attrs.target),j=f.attr(this.settings.attrs.dealerID);c.preventDefault(),g.save(j),b.isString(h)&&h.length&&d.run(i,h);var k={componentId:this.settings.attrs.componentId,destination:h,locationInPage:"action panel",buttonText:f.text()};this.settings.analyticsManager.tag("genericClick",k)},{init:f}}),define("c_064",["jquery"],function(a){"use strict";function b(b){g=a.extend({},f,b),c(),void 0!==a(g.root).html()&&d()}function c(){a(g.findMoreButton,g.root).on("click",function(){e(this)})}function d(){var b=g.analyticsManager.trackingVars.contentDisplayed,c=a(g.headingText,g.root).find("h2").text(),d=g.analyticsManager.getTrackingObjectProperties(b),e={};e[d.componentId]="C64_Promotion",e[d.offerId]="ID947",e[d.offerText]=c,g.analyticsManager.track(b,e)}function e(b){var c=b,d=a(c),e=g.findMoreButton_href,f=d.text(),h=g.analyticsManager.trackingVars.genericClick,i=g.analyticsManager.getTrackingObjectProperties(h),j={};j[i.componentId]="C64_DWS_Promotion",j[i.destination]=e,j[i.locationInPage]="promotion",j[i.buttonText]=f,g.analyticsManager.track(h,j)}var f={root:".c_064",mainContent:".c_64-content",findMoreButton:".cta-outer",headingText:".heading-group",findMoreButton_href:window.location.href},g=null;return{init:b}}),define("c_069_10",["jquery"],function(a){"use strict";function b(b){if(w=a.extend({},t,b),o=a(".c_069-10"),!o.length)return!1;w.location&&(y=w.location),p=o.find("iframe"),q=p.attr("src"),r=c(q),h(),u.resize(l),p.data(w.data.deepLinking)&&d()}function c(a){var b=document.createElement("a");return b.href=a,b.protocol+"//"+b.hostname}function d(){var a,b,c=y.search;c?f(a,q,c):(b=y.href,a=b.substr(b.lastIndexOf("/")+1).split(".").slice(1,-1),a.length&&e(a,q,c))}function e(a,b,c){var d;-1!==b.indexOf("?")?g(a,b,c):(a.forEach(function(b,c){a[c]+=c%2==0?"=":"&"}),d=a.join("").slice(0,-1),p.attr("src",b+"?"+d))}function f(a,b,c){-1!==b.indexOf("?")?g(a,b,c):p.attr("src",b+c)}function g(a,b,c){var d,e,f,g=b.split("?")[0],h=b.split("?")[1].split(/[&=]/),i=h;d=c?c.slice(1).split(/[&=]/):a,d.forEach(function(a,b){b%2==0&&(e=h.indexOf(d[b]),-1!==e&&""!==d[b+1]?i[e+1]=d[b+1]:i.push(d[b],d[b+1]))}),i.forEach(function(a,b){i[b]+=b%2==0?"=":"&"}),f=i.join("").slice(0,-1),p.attr("src",g+"?"+f)}function h(){window.addEventListener?addEventListener("message",k,!1):attachEvent("onmessage",k),p.ready(i)}function i(){s=setInterval(j,150)}function j(){!x&&p[0].contentWindow?p[0].contentWindow.postMessage("need_height",r):clearInterval(s)}function k(b){var c,d;if(b.origin===r&&"targetjsHandShake"!==b.data.action)switch(d=JSON.parse(b.data),d.type){case"resize":x=!0,c=parseInt(d.height,10),isNaN(c)||p.css("height",c);break;case"scrolltopiframe":a("html, body").animate({scrollTop:p.offset().top},500)}}function l(a){clearTimeout(v),v=setTimeout(m,150)}function m(){n()}function n(){return p[0].contentWindow&&p[0].contentWindow.postMessage("need_height",r),!1}var o,p,q,r,s,t={data:{deepLinking:"deeplinkingenabled"}},u=a(window),v=-1,w=null,x=!1,y=document.location;return{init:b}}),define("c_071",["jquery","c_008"],function(a,b){"use strict";function c(b){if(h=a.extend({},g,b),e=a(h.root),e.length){if(f=e.find(h.selectors.optionsButton),!f.length)return!1;d()}}function d(){f.on("click",function(b){var c=a(b.target),d=c.attr("href"),e=c.text(),f={componentId:h.analytics.componentId,destination:d,locationInPage:"Pricing strip",buttonText:e};h.analyticsManager.tag(h.analyticsManager.trackingVars.genericClick,f)})}var e,f,g={root:".c_071",selectors:{optionsButton:".actions li a"},analytics:{componentId:"C71_Pricing_Strip"}},h=null;return{init:c}}),define("c_072",["jquery"],function(a){"use strict";function b(b){if(g=a.extend({},f,b),e=a(g.selectors.root,g.$scope),!e.length)return!1;c(e,g.classes.accordionItem,g.classes.active)}function c(b,c,e){b.each(function(b,f){a(f).find(c).on(g.events.click,function(){var b=a(this);b.hasClass(e)&&(a("html,body").animate({scrollTop:b.closest(c).offset().top-50},500),d(b)),b.toggleClass(e).next().toggleClass(g.classes.isHidden)})})}function d(b){var c=g.analyticsManager,d=g.analyticsManager.trackingVars.accordionExpansion,e={componentId:g.analytics.componentId,accordionType:g.analytics.accordionType,accordionText:a(b).text()};c.tag(d,e)}var e,f={classes:{accordionItem:".accordion-toggle",active:"active",isHidden:"is-hidden"},events:{click:"click"},selectors:{root:".c_072",accordionItem:".accordion-toggle"},analytics:{componentId:"C72_Emission_Disclaimer",accordionType:"Emission disclaimer"}},g=null;return{init:b}}),define("c_073_autocomplete",["jquery","googleMapsSingleton"],function(a,b){"use strict";function c(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c)}function d(b,d){return this.settings=a.extend({},e,d),this.$element=a(b),!!this.$element.length&&(c(this.settings.heliosToGoogleMapping,this.settings.googleToHeliosMapping),this.settings.googleMapsSingleton.getDeferred().done(a.proxy(function(){void 0!==this.settings.window.google&&this.settings.window.google.maps&&this.settings.window.google.maps.places&&b&&this.init()},this)),this.bindHeliosEvents(),this)}var e={selectors:{pacContainer:".pac-container"},window:window,googleMapsSingleton:b,heliosToGoogleMapping:{streetNumber:"street_number",road:"route",town:"postal_town",location:"locality",country:"country",postalCode:"postal_code"},googleToHeliosMapping:{}};return d.prototype.init=function(){this.googleMapsAutocompleteService=new this.settings.window.google.maps.places.Autocomplete(this.$element[0],{types:["geocode"]}),this.bindGoogleEvents()},d.prototype.bindGoogleEvents=function(){this.googleMapsAutocompleteService.addListener("place_changed",a.proxy(this.placeChanged,this))},d.prototype.bindHeliosEvents=function(){this.$element.on("keydown",a.proxy(function(b){13===b.which&&a(this.settings.selectors.pacContainer+":visible").length&&b.preventDefault()},this))},d.prototype.placeChanged=function(){this.setLocation(this.googleMapsAutocompleteService.getPlace())},d.prototype.setLocation=function(a){this._location=a},d.prototype.getLocation=function(b){var c={};return!(!this._location||!this._location.address_components||a(this.settings.selectors.pacContainer+":visible").length)&&(b&&"string"==typeof b&&(b=[b]),a.each(this._location.address_components,a.proxy(function(d,e){a.each(e.types,a.proxy(function(a,d){if(this.settings.googleToHeliosMapping.hasOwnProperty(d)&&(!b||b.indexOf(this.settings.googleToHeliosMapping[d])>-1))return c[this.settings.googleToHeliosMapping[d]]=e.long_name,!1},this))},this)),c)},d}),define("c_079_0",["jquery"],function(a){"use strict";function b(b){if(j=a.extend({},i,b),f=a(j.selectors.root),g=a(j.selectors.linkButton),h=j.HELIOS.adobe.tagging.componentId,!f.length)return!1;c(),HELIOS.adobe.tagging.pageType="errorPage"}function c(){g.on(j.events.click,function(a){e(a)}),d()}function d(){var a=j.analyticsManager,b=a.trackingVars.virtualPageError,c=(a.getTrackingObjectProperties(b),{componentId:h,pageName:"Error 404 page",pageType:"Error page",pageUrl:window.location.href});a.append(b,c)}function e(b){var c=a(b.currentTarget),d=c.text(),e={componentId:h,destination:c.attr("href"),locationInPage:"Error page",buttonText:d};j.analyticsManager.tag("genericClick",e)}var f,g,h,i={events:{click:"click"},classes:{fooItemClass:"foo-item",fooEmptyClass:"foo-empty"},selectors:{root:".c_079-0",fooSelect:"#foo",fooTemplateSelect:"#foo-template",linkButton:".search-links a"}},j=null;return{init:b}}),define("c_080B_2",["jquery","underscore","validation","urlParameterDecoder"],function(a,b,c,d){"use strict";function e(b){if(xa=a.extend({},ua,b),d.init(),N=a(xa.selectors.root),P=a(xa.selectors.form,N),Q=a(xa.selectors.signUpSubmitButton,N),R=a(xa.selectors.ajaxLoading,N),S=a(xa.selectors.mainError,N),T=a(xa.selectors.title,P),V=a(xa.selectors.emailInput,N),W=a(xa.selectors.passwordInput,N),X=N.find(xa.selectors.passwordElement),U=T.parent().find(xa.selectors.selectedValue),Y=a(xa.selectors.marketingChannelsToggle,P),Z=a(xa.selectors.marketingChannelsToggleOn,P),$=a(xa.selectors.marketingChannelsWrapper,P),_=a(xa.selectors.marketingChannels,$),aa=a(xa.selectors.addressFields,P),da=a(xa.selectors.postcode.searchButton,P),ea=a(xa.selectors.postcode.postcodeInput,P),ba=P.find(xa.selectors.address),ca=ba.parent().find(xa.selectors.selectedValue),fa=a(xa.selectors.postcode.manualAddressLink,P),ga=a(xa.selectors.postcode.searchAgainLink,P),O=a(xa.selectors.parentComponent),qa=P.attr("action"),na=Q.data(xa.attributes.successUrl),oa=Q.data(xa.attributes.activationSuccessUrl),pa=da.data(xa.attributes.searchPostcodeUrl),ka=P.data(xa.attributes.noResponse),sa=P.data(xa.attributes.customerInfoUrl),ra=$.data("display-channels"),la=ba.data(xa.attributes.defaultText),va=d.getUrlParams(),!N.length)return!1;ja=window.location!=window.parent.location,h(),ia=new c(P),D(),i(),m(),sa&&H(),f()&&g().done(o).fail(p)}function f(){return!b.isUndefined(N)&&N.get(0).hasAttribute(xa.data.gigyaValidationCustomRegexPattern)}function g(){var b=a.Deferred(),c=0,d=setInterval(function(){c+=1,xa.window.gigya?(clearInterval(d),b.resolve()):c>=xa.config.maxAttempts&&(clearInterval(d),b.reject())},xa.config.readyInterval);return b.promise()}function h(){Q.on("click",y),Y.change(k),P.on("submit",function(b){b.preventDefault(),q(),a(b.target).submit()}),O.on("togglesections",function(){ia.reset(),D()})}function i(){j(),a.validator.addMethod("marketing-channels-required",function(b){return!l()||!a("input:checkbox:enabled",$).length||a("input:checked:enabled",$).length>0},$.data("validation-msg")),a.each(_,function(b,c){a(c).rules("add",{"marketing-channels-required":"marketing-channels-required"})})}function j(){ra&&l()?$.show():$.hide(),_.prop("disabled",!l())}function k(){var a=l();ra&&(a?$.show():$.hide()),_.prop("disabled",!a)}function l(){return Z.is(":checked")}function m(){a(xa.selectors.postcode.search).length?w(xa.selectors.postcode.search):a(xa.selectors.postcode.section).addClass(xa.classes.inactive),da.on("click",s),fa.on("click",function(a){a.preventDefault(),w(xa.selectors.postcode.searchAgain),aa.removeClass(xa.classes.inactive),q()}),ga.on("click",function(a){a.preventDefault(),w(xa.selectors.postcode.search),ea.focus()}),ba.on("change",function(a){a.preventDefault(),w(xa.selectors.postcode.searchAgain),aa.removeClass(xa.classes.inactive),q(),r(a)})}function n(a){b.isEmpty(a.passwordComplexity.regExp)||X.attr(xa.data.validationCustomRegexPattern,a.passwordComplexity.regExp)}function o(){var a={sections:"passwordComplexity",callback:n};xa.window.gigya.accounts.getPolicies(a)}function p(){N.remove()}function q(b){var c=xa||ua,d=c.selectors.marketingChannelsWrapper+" *";b=b||P,a(b).find("input:not([type=hidden]),select").not(d).each(function(){var b=a(this),c=b.is(":visible");b.prop("disabled",!c)})}function r(b){var c=a(b.target).val(),d=a.extend(!0,{},ma[c]);d.AddressLine1&&d.AddressLine2&&(d.AddressLine1=d.AddressLine1+" "+d.AddressLine2,delete d.AddressLine2),a.each(d,function(a,b){var c=P.find("input[data-address-key="+xa.addressMap[a]+"]");c.val(b),c.closest(xa.selectors.formGroup).removeClass(xa.classes.error)})}function s(b){b.preventDefault(),ea.valid()?(z(),S.removeClass(xa.classes.errorGroup).empty(),R.addClass(xa.classes.active),ha=a.ajax({url:pa+"/postcode/"+encodeURIComponent(ea.val())+"/data.json",dataType:"json"}).done(u).fail(v)):(ea.focus(),L({errorMessage:P.validate().errorMap[ea.attr("name")]}))}function t(a){return a||null}function u(b){var c,d,e="<option>";if(R.removeClass(xa.classes.active),b.status_code===xa.statusCodes.lookupSuccess){for(ca.text(la),ma=b.addresses,ba.closest(xa.selectors.formGroup).removeClass(xa.classes.error),ba.empty(),ba.append(a(e)),c=0;c<ma.length;c++)d=a.map(ma[c],t).join(", "),d=d.limitLineCharacters(50),ba.append(a(e,{value:c}).html(d));w(xa.selectors.postcode.selectAddress+", "+xa.selectors.postcode.searchAgain),ba.focus(),L()}else S.addClass(xa.classes.errorGroup),F(S),S.empty().append(b.status_message),L({errorMessage:b.status_message})}function v(a){R.removeClass(xa.classes.active),S.addClass(xa.classes.errorGroup),F(S),S.empty().append(ka),L({errorMessage:ka})}function w(b){a(xa.selectors.postcode.section).addClass(xa.classes.inactive),a(b).removeClass(xa.classes.inactive),aa.addClass(xa.classes.inactive),q()}function x(){var b,c,d={};return c=a("input:checked:enabled",$),c.length&&(b=c.eq(0).attr("name"),d[b]=c.map(function(){return this.value}).get()),d}function y(b){var c,d;b.preventDefault(),P.valid()&&(z(),R.addClass(xa.classes.active),d=a.trim(V.val()),V.val(d),c=P.find(xa.selectors.formElements).not(xa.selectors.marketingChannelsInputs).serializeObject(),c=a.extend(c,x()),wa&&(c.customAttributes=wa),ha=a.ajax({type:"POST",contentType:"application/json; charset=UTF-8",url:qa,data:JSON.stringify(c),dataType:"json"}).done(A).fail(B))}function z(){ha&&ha.abort&&ha.abort()}function A(a,b,c){var d,e,f,g=a.code;1040006==g?(f=oa,g="0"):(f=na,a.email&&(d="email="+a.email,f=E(f,d))),g&&(e="errorCode="+g,f=E(f,e)),R.removeClass(xa.classes.active),D(),M({signupSuccess:"yes",destination:f,errorMessage:""}),ja?xa.window.top.location.href=f:xa.window.location.href=f}function B(a,b,c){var d;d=a.responseJSON&&a.responseJSON.status_message?a.responseJSON.status_message:ka,C(d),M({signupSuccess:"no",errorMessage:d,destination:""})}function C(a){R.removeClass(xa.classes.active),S.addClass(xa.classes.errorGroup),F(S),S.empty().append(a),W.val("")}function D(){P.trigger("reset"),U.text(T.data(xa.attributes.defaultText))}function E(a,b){return/[?]/.test(a)?a+"&"+b:a+"?"+b}function F(b){a("html, body").animate({scrollTop:b.offset().top},"slow")}function G(a){if(va[a])return va[a]}function H(){(ta=G(xa.urlParams.prospectId))&&(I(ta),N.parents(xa.selectors.inactiveSection).length&&O.length&&O.trigger(xa.events.toggleRegistrationSection))}function I(b){R.addClass(xa.classes.active),a.ajax({url:sa,type:"GET",dataType:"json",data:{id:b}}).done(function(a){J(a),a&&a.customAttributes&&(wa=a.customAttributes)}).always(function(){return R.removeClass(xa.classes.active),!1})}function J(a){a&&(fa.trigger("click"),K(a))}function K(c){var d,e=b.keys(c);b.each(e,function(b){"address"===b?K(c[b]):(d=a('[name="'+b+'"]',P),d.length&&(d.is(":checkbox")?d.prop("checked",c[b]):(d.val(c[b]),d.is("select")&&d.find('option[value="'+c[b]+'"]').length&&d.trigger("change"))))})}function L(a){var b;a=a||{},b={componentId:xa.analytics.componentId,errorMessage:a.errorMessage||""},xa.analyticsManager.tag("postcodeLookup",b)}function M(b){var c={componentId:xa.analytics.componentId,locationInPage:xa.analytics.locationInPage,signupType:xa.analytics.signupType,contentAction:xa.analytics.contentAction,buttonText:Q.text()};xa.analyticsManager.tag("buttonNoCookie",a.extend({},c,b))}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua={analytics:{componentId:"C80.B.2_Sign_Up",locationInPage:"sign up",contentAction:"sign-up",signupType:"standard"},classes:{active:"active",inactive:"inactive",errorGroup:"error-group"},selectors:{root:".c_080B-2",parentComponent:".c_080B",inactiveSection:".form-section.inactive",form:"form",signUpSubmitButton:".sign-up-cta",title:".title",selectedValue:".selectedValue",ajaxLoading:".ajax-loading",mainError:".main-error",inputError:".error-message",emailInput:".textfield.email input[type=text]",passwordInput:"input[type=password]",passwordElement:".password input[type=password]",marketingChannelsToggle:".marketing-channels-toggle",marketingChannelsToggleOn:".marketing-channels-toggle[value=true]",marketingChannelsWrapper:".marketing-channels",marketingChannelsInputs:".marketing-channels input",marketingChannels:"input[type=checkbox]",addressFields:".address-field",formElements:"input, select",address:".address-select",postcode:{section:".postcode-section",search:".section-search",searchAgain:".section-search-again",selectAddress:".section-select-address",postcodeInput:".postcode-lookup .section-search input",searchButton:".postcode-lookup .section-search button",manualAddressLink:".manual-address-link",searchAgainLink:".search-again-link",address:".address-select"},fieldName:"input#firstName",fieldLastName:"input#lastName",fieldPostalCode:"input#postalCode",fieldEmail:"input#email",fieldAddressLine1:"input#addressLine1",fieldCity:"input#city"},statusCodes:{loginSuccess:"login_success",accountPending:"account_pending",lookupSuccess:"lookup_success",success:200},urlParams:{prospectId:"id"},attributes:{successUrl:"success-url",activationSuccessUrl:"activation-success-url",noResponse:"no-response",defaultText:"defaulttext",searchPostcodeUrl:"search-postcode-url",customerInfoUrl:"customer-info-url"},events:{toggleRegistrationSection:"toggleRegistration.c080B"},addressMap:{AddressLine1:"addressLine1",AddressLine2:"addressLine2",Town:"city",County:"region",Postcode:"postalCode"},data:{validationCustomRegexPattern:"data-validation-customregex-pattern",gigyaValidationCustomRegexPattern:"data-gigya-is-active"},config:{readyInterval:500,maxAttempts:6},window:window},va={},wa=null,xa=null;return{init:e,adjustValidationRules:q}}),define("c_080B",["jquery","c_080B_2","c_008","storageManager","storageManagerKeys"],function(a,b,c,d,e){"use strict";function f(b){if(p=a.extend({},o,b),k=a(p.selectors.root),l=a(p.selectors.section,k),m=a(p.selectors.tooltipTriggers,k),n=k.find(p.selectors.statusMessage),!k.length)return!1;switch(g(),c.createTooltips(m),window.location.hash){case"#register":h()}j()}function g(){a(p.selectors.toggleSection,k).on("click",function(a){a.preventDefault(),h()}),k.on(p.events.toggleRegistration,i)}function h(){k.trigger("togglesections"),l.toggleClass(p.classes.inactive),b.adjustValidationRules(a(p.selectors.registrationForm))}function i(){l.length&&l.eq(1).hasClass(p.classes.inactive)&&h()}function j(){var a=d.loadItem(e.c_081_3.statusKey);a&&a.status_message&&(d.deleteItem(e.c_081_3.statusKey),n.html(a.status_message))}var k,l,m,n,o={classes:{inactive:"inactive"},selectors:{root:".c_080B",registrationForm:".c_080B-2",heading:".heading",toggleSection:".heading .toggle-section",tooltipTriggers:".has-tooltip",section:".form-section",statusMessage:".heading p.activated-message"},events:{toggleRegistration:"toggleRegistration.c080B"}},p=null;return{init:f}}),
define("c_080B_1",["jquery","scriptLoader","underscore","urlParameterDecoder","disclaimers","c_008","storageManager","storageManagerKeys","logger"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(b,d){var e,f;return f=a(m.selectors.root),!!f.length&&(e=new k(f,b),(c.isUndefined(d)||d)&&e.init(b),g.init(),g.deleteItem("c_141"),e)}var k,l="c_080B-1",m={config:{readyInterval:500,maxAttempts:6},selectors:{root:".c_080B-1.login-screen-set-container",loginBtn:".log-in-cta:visible",form:"form:visible",id:"c_080B-1",mainError:".main-error",gigyaScreenContent:".gigya-screen-content",passwordInput:".password",emailInput:".email",rememberInput:".remember",ajaxLoading:".ajax-loading",dockNavigationWrapperClass:".docked-nav-outer",loggedInStateNameSelector:".logged-in-state.see-profile span",loggedInStateSelector:".login",parentComponent:".c_080B",toggleSection:".toggle-section",activationMsgSection:".heading p.activated-message",signupLoginLinks:".sign-up-link, .log-in-link"},classes:{errorGroup:"error-group",gigyaErrorMsgActive:"gigya-error-msg-active",gigyaErrorMsg:"gigya-error-msg",gigyaError:"gigya-error",active:"active",isLoggedInClass:"logged-in"},screenSetParams:{screenSet:"login-screen-set",containerID:null,onAfterScreenLoad:null,onError:null},data:{submitUrl:"submitUrl",redirectUrl:"redirectUrl",gigyaApiKey:"gigyaApiKey",gigyaGlobalConfig:"gigyaGlobalConfig",gigyaLogUrl:"gigyaLog",checkEmailUrl:"checkEmailUrl",validateEmailPassword:"invalidUserOrPassword",validateUserLockOut:"userLockout",noResponse:"noResponse",logoutUrl:"logoutUrl",loggedOut:"loggedOut",activationSuccess:"activationSuccess",activationExpired:"activationExpired",activationError:"activationError"},events:{click:"click."+l,gigyaPageShow:"pageshow."+l,focusout:"focusout."+l},attributes:{disabled:"disabled"},urlParams:{statusMessage:"status_message",sessionToken:"sessionToken",id:"id",errorCode:"errorCode"},cookie:{ownerServicesLoggedInCookie:"OwnerServicesLoggedInName"},storageManagerKeys:h,storageManagerMode:{mode:"localStorage"}},n=new i({prefix:l});return k=function(b,d){this.$root=b,this.settings=a.extend({},m,d),this.storageManagerKeys=this.settings.storageManagerKeys,this.settings.screenSetParams.containerID=this.settings.selectors.id,this.settings.screenSetParams.onAfterScreenLoad=c.bind(this.onAfterScreenLoaded,this),this.settings.screenSetParams.onError=c.bind(this.onError,this),this.settings.screenSetParams.onBeforeSubmit=c.bind(this.showAjaxLoading,this),this.settings.screenSetParams.onAfterSubmit=c.bind(this.authenticationTrack,this),this.settings.screenSetParams.customLang={invalid_login_or_password:this.$root.data(this.settings.data.validateEmailPassword),account_temporarily_locked_out:this.$root.data(this.settings.data.validateUserLockOut)},this.scriptSettings={apiKey:null,scriptText:null,HELIOS:d.HELIOS},c.bindAll(this,"showGigyaScreenSet","cacheElements","bindEvents","submitLoginForm","isGigyaReady","overrideVendorStyles","clearPasswordInput","clearEmailInput","onAjaxFail","removeComponent","refreshErrorMessage","refreshMainErrorMessage","showAjaxLoading","hideAjaxLoading","scrollToFirstError","scrollToErrorBlock","getDockNavigationHeight","onPageShow","logoutUser","updateLoggedInState","getAccountInfoCallback","onLoginBtnClick","onInputFocusout","onAfterAjaxSubmit","onAjaxDone","onAjaxFail","onToggleSectionClick","clearActivationMsg")},k.prototype={init:function(a){this.gigyaApiKey=this.$root.data(this.settings.data.gigyaApiKey),this.gigyaGlobalConfig=this.$root.data(this.settings.data.gigyaGlobalConfig),this.gigyaApiKey&&this.gigyaGlobalConfig&&(this.scriptSettings.apiKey=this.gigyaApiKey,this.scriptSettings.scriptText=this.gigyaGlobalConfig,this.gigyaScript=b.include("gigya",this.scriptSettings),this.isGigyaReady().done(this.showGigyaScreenSet).fail(this.removeComponent))},isGigyaReady:function(){var b=a.Deferred(),c=0;return function(a){var d=setInterval(function(){c+=1,a.window.gigya?(clearInterval(d),b.resolve()):c>=a.config.maxAttempts&&(clearInterval(d),b.reject())},a.config.readyInterval)}(this.settings),b.promise()},showGigyaScreenSet:function(a){d.init(),this.urlParams=d.getUrlParams(),this.settings.window.gigya.accounts.showScreenSet(this.settings.screenSetParams)},getAccountInfoCallback:function(a){this.logGigyaResponse(a),0===a.errorCode&&this.submitLoginForm(a)},onAfterScreenLoaded:function(){this.cacheElements(),this.logoutUser(),this.bindEvents(),this.overrideVendorStyles(),this.$emailInput.focus(),this.settings.window.gigya.accounts.getAccountInfo({callback:this.getAccountInfoCallback}),e.renderDisclaimers(a(this.disclaimerWrapSelector)),f.createTooltips(this.$root.find(".has-tooltip"))},logGigyaResponse:function(b){var d={},e={UID:!1,isActive:!1,created:!1,lastLogin:!1,lastUpdated:!1,registered:!1,statusCode:!1,errorCode:!1,callId:!1,time:!1,errorDetails:!1,errorMessage:!1};c.extendOwn(d,c(b).pick(c(e).keys())),b.data&&b.data.accountSfdcId&&(d.sfdcId=b.data.accountSfdcId),b.data&&b.data.accountSfdcActivated&&(d.accountSfdcActivated=b.data.accountSfdcActivated),c(b).hasPath("response.info.response.requestParams.loginID")?d.email=c(b).getPath("response.info.response.requestParams.loginID"):b.profile&&b.profile.email&&(d.email=b.profile.email),d.statusMessage=b.response&&b.response.statusMessage?b.response.statusMessage:b.statusMessage,d.errorCode=b.errorCode.toString(),a.post(this.gigyaLogUrl,c.omit(d,c.isEmpty)).fail(function(){n.info("Failed to send Gigya log to Helios.")})},onError:function(a){var b=500,d={};this.logGigyaResponse(a),this.clearActivationMsg(),this.$signupLoginLinks.show(),this.$toggleSection.parent().show(),this.$mainError.addClass(this.settings.classes.errorGroup),this.isIE8&&(this.$mainError.removeClass(this.settings.classes.errorGroup),c.delay(this.refreshMainErrorMessage,b)),a.response&&206002===a.errorCode?(a.response.params&&a.response.params.regToken&&a.response.info&&a.response.info.response.emails.unverified.length&&(d={regToken:a.response.params.regToken,email:a.response.info.response.emails.unverified[0]},this.settings.window.gigya.accounts.resendVerificationCode(d)),this.checkEmailUrl=this.appendUrlParams(this.checkEmailUrl,"email="+a.response.info.response.emails.unverified[0]),c.delay(c.bind(this.setNewUrl,this,this.checkEmailUrl),b)):this.scrollToFirstError(),this.hideAjaxLoading(),this.clearPasswordInput(),this.scrollToErrorBlock()},clearPasswordInput:function(){this.$passwordInput.val("")},clearEmailInput:function(){this.$emailInput.val("")},clearActivationMsg:function(){this.$activationMsgSection.empty()},overrideVendorStyles:function(){this.$gigyaScreenContent.css({"max-width":""})},cacheElements:function(){var b=this.settings.selectors,c=this.settings.data;this.$parentComponent=a(b.parentComponent),this.$toggleSection=this.$parentComponent.find(b.toggleSection),this.$activationMsgSection=this.$parentComponent.find(b.activationMsgSection),this.$signupLoginLinks=this.$parentComponent.find(b.signupLoginLinks),this.$gigyaScreenContent=this.$root.find(b.gigyaScreenContent),this.$mainError=this.$root.find(b.mainError),this.$form=this.$root.find(b.form),this.$loginBtn=this.$form.find(b.loginBtn),this.$passwordInput=this.$form.find(b.passwordInput),this.$emailInput=this.$form.find(b.emailInput),this.$rememberInput=this.$form.find(b.rememberInput),this.$gigyaErrorMsg=this.$form.find("."+this.settings.classes.gigyaErrorMsg),this.$ajaxLoading=this.$root.find(b.ajaxLoading),this.$dockNavigation=a(b.dockNavigationWrapperClass),this.$pageBody=a("html, body"),this.$loggedInState=a(b.loggedInStateSelector),this.isIE8=a("html").hasClass("ltie9"),this.submitUrl=this.$loginBtn.data(c.submitUrl),this.redirectUrl=this.$loginBtn.data(c.redirectUrl),this.checkEmailUrl=this.$loginBtn.data(c.checkEmailUrl),this.logoutUrl=this.$loginBtn.data(this.settings.data.logoutUrl),this.gigyaLogUrl=this.$form.data(this.settings.data.gigyaLogUrl),this.noResponse=this.$loginBtn.data(c.noResponse),this.loggedOutMsg=this.$loginBtn.data(c.loggedOut),this.activationSuccessMsg=this.$loginBtn.data(c.activationSuccess),this.activationExpiredMsg=this.$loginBtn.data(c.activationExpired),this.activationErrorMsg=this.$loginBtn.data(c.activationError),this.isAjaxLoading=!1,this.isSubmitInProgress=!1,this.getDockNavigationHeight(),this.disclaimerWrapSelector=".c_080B-1"},bindEvents:function(){var b=this.settings.events;this.settings.window.gigya.accounts.addEventHandlers({onLogin:this.submitLoginForm}),this.$loginBtn.on(b.click,this.onLoginBtnClick),this.$toggleSection.on(b.click,this.onToggleSectionClick),this.isIE8&&this.$emailInput.on(b.focusout,this.onInputFocusout),a(this.settings.window).on(b.gigyaPageShow,this.onPageShow)},onToggleSectionClick:function(){this.cacheElements(),this.hideMainError(),this.hideGigyaError(),this.clearEmailInput(),this.clearPasswordInput()},onPageShow:function(a){this.clearEmailInput(),this.hideGigyaError(),this.hideMainError(),this.$emailInput.focus(),a.persisted&&this.settings.window.location.reload()},onInputFocusout:function(b){var d=a(b.target);this.$gigyaErrorMsg.hasClass(this.settings.classes.gigyaErrorMsgActive)&&!c.isEmpty(d.val())&&(this.$gigyaErrorMsg.removeClass(this.settings.classes.gigyaErrorMsg),c.delay(this.refreshErrorMessage,100))},onLoginBtnClick:function(){this.settings.classes;this.$mainError.hide(),this.isIE8&&(this.$gigyaErrorMsg.removeClass(this.settings.classes.gigyaErrorMsg),c.delay(this.refreshErrorMessage,100)),this.hideMainError()},scrollToFirstError:function(){this.$mainError.show();var a=this.$form.find("."+this.settings.classes.gigyaErrorMsgActive).first();a.length&&this.$pageBody.animate({scrollTop:a.parent().offset().top-this.dockNavigationHeight},"slow")},scrollToErrorBlock:function(){this.$pageBody.animate({scrollTop:this.$mainError.offset().top-this.dockNavigationHeight},"slow")},getDockNavigationHeight:function(){this.dockNavigationHeight=this.$dockNavigation.height()||0},refreshErrorMessage:function(){var a=this.settings.classes.gigyaErrorMsg;this.$gigyaErrorMsg.addClass(a)},refreshMainErrorMessage:function(){var a=this.settings.classes.errorGroup;this.$mainError.addClass(a)},showAjaxLoading:function(){this.$ajaxLoading.addClass(this.settings.classes.active)},hideMainError:function(){var a=this.settings.classes;this.$mainError.removeClass(a.gigyaErrorMsgActive).removeClass(a.errorGroup)},hideGigyaError:function(){this.$gigyaErrorMsg.removeClass(this.settings.classes.gigyaErrorMsgActive),this.$emailInput.removeClass(this.settings.classes.gigyaError),this.$passwordInput.removeClass(this.settings.classes.gigyaError)},submitLoginForm:function(b){var c=b.UIDSignature,d=b.signatureTimestamp,e=b.UID,f=(b.data||{}).accountSfdcId,g=(b.data||{}).accountSfdcActivated,h=(b.profile||{}).email,i=this.$form;this.showAjaxLoading(),i&&!this.isSubmitInProgress?(i=i.serializeArray(),i.push({name:"signature",value:c},{name:"timeStamp",value:d},{name:"uid",value:e},{name:"email",value:h},{name:"isRegistered",value:b.isRegistered},{name:"isActive",value:b.isActive},{name:"isLockedOut",value:b.isLockedOut},{name:"isVerified",value:b.isVerified},{name:"sfdcId",value:f},{name:"sfdcActivated",value:g},{name:"callId",value:b.callId},{name:"time",value:b.time},{name:"errorCode",value:b.errorCode}),this.submitUrl&&this.redirectUrl?(this.isSubmitInProgress=!0,a.ajax({url:this.submitUrl,dataType:"json",method:"POST",data:i}).done(this.onAjaxDone).fail(this.onAjaxFail).always(this.onAfterAjaxSubmit)):this.hideAjaxLoading()):this.hideAjaxLoading()},hideAjaxLoading:function(){this.$ajaxLoading.removeClass(this.settings.classes.active)},onAfterAjaxSubmit:function(){this.isAjaxLoading=!0,this.isSubmitInProgress=!1,this.hideAjaxLoading()},onAjaxDone:function(a){var b,d;this.storageManagerKeys.loginWidgetData;if(d=a.redirect_url&&""!==a.redirect_url?a.redirect_url:this.redirectUrl,c.isUndefined(a.accessToken)&&c.isUndefined(a.expiresIn))switch(a.code){case 104e4:a.email&&(b="email="+encodeURIComponent(a.email),this.checkEmailUrl=this.appendUrlParams(this.checkEmailUrl,b)),this.setNewUrl(this.checkEmailUrl);break;default:this.setError(a.message),this.trackLogin(!1,d,a.message)}else this.setNewUrl(d,!0),this.trackLogin(!0,d)},onAjaxFail:function(a){this.setError(this.noResponse),this.trackLogin(!1,this.redirectUrl,this.noResponse)},authenticationTrack:function(a){this.logGigyaResponse(a.response),0!==a.response.errorCode&&this.trackLogin(!1,this.redirectUrl,a.response.errorMessage)},trackLogin:function(a,b,c){var d={componentId:"C80.B.1_Login",destination:this.getFullPathUrl(b),locationInPage:"login",buttonText:this.$loginBtn.text(),loginType:"standard",contentAction:"login",loginSuccess:a?"yes":"no"};a||(d.errorMessage=c),this.$rememberInput.length&&(d.loginPersistence=a&&this.$rememberInput.is(":checked")?"yes":"no"),this.settings.analyticsManager.tag("buttonNoCookie",d)},setError:function(a){var b=this.settings.classes;this.clearActivationMsg(),this.$mainError.text(a).addClass(b.errorGroup).addClass(b.gigyaErrorMsgActive),this.isIE8&&c.delay(this.refreshMainErrorMessage,100),this.clearPasswordInput(),this.scrollToErrorBlock()},logoutUser:function(){var b;if(this.urlParams&&this.urlParams[this.settings.urlParams.errorCode]&&(b=this.urlParams[this.settings.urlParams.errorCode].split(" ")[0]),c.isString(b)){switch(b){case"0":this.$toggleSection.parent().hide(),this.$activationMsgSection.text(this.activationSuccessMsg),this.showAjaxLoading(),this.settings.window.gigya.accounts.logout(),a.ajax({url:this.logoutUrl,method:"GET",async:!1,data:{redirect:!1},statusCode:{200:this.updateLoggedInState}}).fail(this.hideAjaxLoading);break;case"403":this.$activationMsgSection.text(this.loggedOutMsg);break;case"403002":this.$activationMsgSection.text(this.activationExpiredMsg);break;default:this.$activationMsgSection.text(this.activationErrorMsg)}this.$signupLoginLinks.hide()}},updateLoggedInState:function(){var b=a.cookie(this.settings.cookie.ownerServicesLoggedInCookie);(c.isUndefined(b)||c.isNull(b))&&this.$loggedInState.removeClass(this.settings.classes.isLoggedInClass).find(this.settings.selectors.loggedInStateNameSelector).text(""),this.hideAjaxLoading()},setNewUrl:function(a,b){a=this.getFullPathUrl(a),b?this.settings.window.top.gigya?this.settings.window.top.gigya.setSSOToken({redirectURL:a}):this.settings.window.gigya.setSSOToken({redirectURL:a}):this.settings.window.location.href=a},getFullPathUrl:function(){var a;return function(b){return a||(a=document.createElement("a")),a.href=b,a.href}}(),appendUrlParams:function(a,b){return/[?]/.test(a)?a+"&"+b:a+"?"+b},removeComponent:function(){this.$root.remove()}},{init:j}}),define("c_080C",["jquery","c_080B_1","storageManager","storageManagerKeys"],function(a,b,c,d){"use strict";function e(b){if(m=a.extend({},l,b),j=a(m.selectors.root),!j.length)return!1;k=f(b),g(),h(),i()}function f(a){return k||(k=b.init(a,!0)),k}function g(){k.cacheElements=function(){var b=this.settings.selectors,c=this.settings.data;this.$parentComponent=a(b.parentComponent),this.$toggleSection=this.$parentComponent.find(b.toggleSection),this.$activationMsgSection=this.$parentComponent.find(b.activationMsgSection),this.$signupLoginLinks=this.$parentComponent.find(b.signupLoginLinks),this.$gigyaScreenContent=this.$root.find(b.gigyaScreenContent),this.$mainError=this.$root.find(b.mainError),this.$form=this.$root.find(b.form),this.$loginBtn=this.$form.find(b.loginBtn),this.$passwordInput=this.$form.find(b.passwordInput),this.$emailInput=this.$form.find(b.emailInput),this.$rememberInput=this.$form.find(b.rememberInput),this.$gigyaErrorMsg=this.$form.find("."+this.settings.classes.gigyaErrorMsg),this.$ajaxLoading=this.$root.find(b.ajaxLoading),this.$dockNavigation=a(b.dockNavigationWrapperClass),this.$pageBody=a("html, body"),this.$loggedInState=a(b.loggedInStateSelector),this.isIE8=a("html").hasClass("ltie9"),this.submitUrl=this.$loginBtn.data(c.submitUrl),this.redirectUrl=m.window.location.href,this.checkEmailUrl=this.$loginBtn.data(c.checkEmailUrl),this.logoutUrl=this.$loginBtn.data(this.settings.data.logoutUrl),this.noResponse=this.$loginBtn.data(c.noResponse),this.loggedOutMsg=this.$loginBtn.data(c.loggedOut),this.activationSuccessMsg=this.$loginBtn.data(c.activationSuccess),this.activationExpiredMsg=this.$loginBtn.data(c.activationExpired),this.activationErrorMsg=this.$loginBtn.data(c.activationError),this.isAjaxLoading=!1,this.isSubmitInProgress=!1,this.getDockNavigationHeight(),this.disclaimerWrapSelector=l.selectors.root}}function h(){k.trackLogin=function(a,b,c){var d={componentId:"C80C_Login",destination:this.getFullPathUrl(b),locationInPage:"login",buttonText:this.$loginBtn.text(),loginType:"standard",contentAction:"login",loginSuccess:a?"yes":"no"};a||(d.errorMessage=c),this.$rememberInput.length&&(d.loginPersistence=a&&this.$rememberInput.is(":checked")?"yes":"no"),this.settings.analyticsManager.append("buttonNoCookie",d)}}function i(){k.setNewUrl=function(a,b){a=this.getFullPathUrl(a),c.saveItem(d.loginWidgetData.loginSuccess,!0,this.settings.storageManagerMode),b?this.settings.window.top.gigya?this.settings.window.top.gigya.setSSOToken({redirectURL:a}):this.settings.window.gigya.setSSOToken({redirectURL:a}):this.settings.window.location.href=a}}var j,k,l={events:{clickLogInCta:"click.log-in-cta"},selectors:{root:".c_080C"}},m=null;return{init:e}}),define("c_080_4",["jquery","scriptLoader","underscore"],function(a,b,c){"use strict";function d(b,d){var f,h;return h=a(g.selectors.root),!!h.length&&(f=new e(h,b),(c.isUndefined(d)||d)&&f.init(b),f)}var e,f="c_080-4",g={config:{readyInterval:500,maxAttempts:6},selectors:{root:".c_080-4:visible",loginBtn:".log-in-cta:visible",form:"form:visible",id:"c_080-4",mainError:".main-error",gigyaScreenContent:".gigya-screen-content",passwordInput:".password",emailInput:".email",ajaxLoading:".ajax-loading",dockNavigationWrapperClass:".docked-nav-outer"},classes:{errorGroup:"error-group",gigyaErrorMsgActive:"gigya-error-msg-active",gigyaErrorMsg:"gigya-error-msg",active:"active"},screenSetParams:{screenSet:"login-screen-set",enableSSOToken:!0,containerID:null,onAfterScreenLoad:null,onError:null},data:{submitUrl:"submitUrl",redirectUrl:"redirectUrl",gigyaApiKey:"gigyaApiKey",gigyaGlobalConfig:"gigyaGlobalConfig",checkEmailUrl:"checkEmailUrl",noResponse:"noResponse"},events:{click:"click."+f,gigyaPageShow:"pageshow"+f},attributes:{disabled:"disabled"}};return e=function(b,d){this.$root=a(b),this.settings=a.extend({},g,d),this.settings.screenSetParams.containerID=this.settings.selectors.id,this.settings.screenSetParams.onAfterScreenLoad=c.bind(this.onAfterScreenLoaded,this),this.settings.screenSetParams.onError=c.bind(this.onError,this),this.settings.screenSetParams.onBeforeSubmit=c.bind(this.showAjaxLoading,this),this.scriptSettings={apiKey:null,scriptText:null,HELIOS:d.HELIOS},c.bindAll(this,"showGigyaScreenSet","cacheElements","bindEvents","submitLoginForm","isGigyaReady","overrideVendorStyles","clearPasswordInput","clearEmailInput","onAjaxFail","removeComponent","refreshErrorMessage","showAjaxLoading","scrollToFirstError","scrollToErrorBlock","getDockNavigationHeight","onPageShow")},e.prototype={init:function(a){this.gigyaApiKey=this.$root.data(this.settings.data.gigyaApiKey),this.gigyaGlobalConfig=this.$root.data(this.settings.data.gigyaGlobalConfig),this.gigyaApiKey&&this.gigyaGlobalConfig&&(this.scriptSettings.apiKey=this.gigyaApiKey,this.scriptSettings.scriptText=this.gigyaGlobalConfig,this.gigyaScript=b.include("gigya",this.scriptSettings),this.isGigyaReady().done(this.showGigyaScreenSet).fail(this.removeComponent))},isGigyaReady:function(){var b=a.Deferred(),c=0;return function(a){var d=setInterval(function(){c+=1,a.window.gigya?(clearInterval(d),b.resolve()):c>=a.config.maxAttempts&&(clearInterval(d),b.reject())},a.config.readyInterval)}(this.settings),b.promise()},showGigyaScreenSet:function(a){this.settings.window.gigya.accounts.showScreenSet(this.settings.screenSetParams)},onAfterScreenLoaded:function(){this.cacheElements(),this.bindEvents(),this.overrideVendorStyles()},onError:function(a){this.$mainError.addClass(this.settings.classes.errorGroup),a.errorCode&&a.response&&206002===a.errorCode?this.submitLoginForm(a.response):this.hideAjaxLoading(),this.clearPasswordInput(),this.scrollToErrorBlock()},clearPasswordInput:function(){this.$passwordInput.val("")},clearEmailInput:function(){this.$emailInput.val("")},overrideVendorStyles:function(){this.$gigyaScreenContent.css({"max-width":""})},cacheElements:function(){var b=this.settings.selectors,c=this.settings.data;this.$gigyaScreenContent=this.$root.find(b.gigyaScreenContent),this.$mainError=this.$root.find(b.mainError),this.$form=this.$root.find(b.form),this.$loginBtn=this.$form.find(b.loginBtn),this.$passwordInput=this.$form.find(b.passwordInput),this.$emailInput=this.$form.find(b.emailInput),this.$gigyaErrorMsg=this.$form.find("."+this.settings.classes.gigyaErrorMsg),this.$ajaxLoading=this.$root.find(b.ajaxLoading),this.$dockNavigation=a(b.dockNavigationWrapperClass),this.$body=a("body"),this.isIE8=a("html").hasClass("ltie9"),this.submitUrl=this.$loginBtn.data(c.submitUrl),this.redirectUrl=this.$loginBtn.data(c.redirectUrl),this.checkEmailUrl=this.$loginBtn.data(c.checkEmailUrl),this.noResponse=this.$loginBtn.data(c.noResponse),this.isAjaxLoading=!1,this.getDockNavigationHeight()},bindEvents:function(){var b=this.settings.events;this.settings.window.gigya.accounts.addEventHandlers({onLogin:this.submitLoginForm}),this.$loginBtn.on(b.click,c.bind(this.onLoginBtnClick,this)),a(this.settings.window).on(b.gigyaPageShow,this.onPageShow)},onPageShow:function(a){this.clearEmailInput(),this.hideGigyaError(),this.hideMainError()},onLoginBtnClick:function(){var a=(this.settings.classes,10);this.isIE8&&c.delay(this.refreshErrorMessage,a),c.delay(this.scrollToFirstError,a),this.hideMainError()},scrollToFirstError:function(){var a=this.$form.find("."+this.settings.classes.gigyaErrorMsgActive).first();a.length&&this.$body.animate({scrollTop:a.parent().offset().top-this.dockNavigationHeight},"slow")},scrollToErrorBlock:function(){this.$body.animate({scrollTop:this.$mainError.offset().top-this.dockNavigationHeight},"slow")},getDockNavigationHeight:function(){this.dockNavigationHeight=this.$dockNavigation.height()||0},refreshErrorMessage:function(){var a=this.settings.classes.gigyaErrorMsg;this.$gigyaErrorMsg.removeClass(a).addClass(a)},showAjaxLoading:function(){this.$ajaxLoading.addClass(this.settings.classes.active)},hideMainError:function(){var a=this.settings.classes;this.$mainError.removeClass(a.gigyaErrorMsgActive).removeClass(a.errorGroup)},hideGigyaError:function(){this.$gigyaErrorMsg.removeClass(this.settings.classes.gigyaErrorMsgActive)},submitLoginForm:function(b){var d=b.UIDSignature,e=b.signatureTimestamp,f=b.UID,g=this.$form;g?(g=g.serializeArray(),g.push({name:"signature",value:d},{name:"timeStamp",value:e},{name:"uid",value:f}),this.submitUrl&&this.redirectUrl?a.ajax({url:this.submitUrl,dataType:"json",method:"POST",data:g}).done(c.bind(this.onAjaxDone,this)).fail(c.bind(this.onAjaxFail,this)):this.hideAjaxLoading()):this.hideAjaxLoading()},hideAjaxLoading:function(){this.$ajaxLoading.removeClass(this.settings.classes.active)},onAjaxDone:function(a){var b;if(this.isAjaxLoading=!0,a.status_code)switch(a.status_code){case"login_success":this.setNewUrl(this.redirectUrl,!0);break;case"new_email_pending":case"account_pending":a.email&&(b="email="+encodeURIComponent(a.email),this.checkEmailUrl=this.appendUrlParams(this.checkEmailUrl,b)),this.setNewUrl(this.checkEmailUrl);break;default:this.setError(a.status_message),this.clearPasswordInput(),this.hideAjaxLoading()}else this.hideAjaxLoading()},onAjaxFail:function(a){this.isAjaxLoading=!0,this.setError(this.noResponse),this.clearPasswordInput(),this.hideAjaxLoading()},setError:function(a){var b=this.settings.classes;this.$mainError.text(a).addClass(b.errorGroup).addClass(b.gigyaErrorMsgActive)},setNewUrl:function(a,b){b?this.settings.window.gigya.setSSOToken({redirectURL:a}):this.settings.window.location.href=a},appendUrlParams:function(a,b){return/[?]/.test(a)?a+"&"+b:a+"?"+b},removeComponent:function(){this.$root.remove()}},{init:d}}),define("c_081_1",["jquery","underscore","validation"],function(a,b,c,d,e){"use strict";function f(b){if(I=a.extend({},H,b),q=a(I.selectors.component),!q.length)return!1;r=q.find("form"),o(),s=r.find(I.selectors.formElements),t=r.find(I.selectors.sendEmailButton),u=q.find(I.selectors.sendBack),v=q.find(I.selectors.contactUsButton),w=q.find(I.selectors.mainError),x=q.find(I.selectors.ajaxLoading),y=r.attr("action"),C=a.trim(t.text()),D=a.trim(u.text()),E=a.trim(v.text()),z=t.data(I.attributes.sendEmailSuccessUrl),B=r.data(I.attributes.noResponse),F=I.HELIOS.adobe.tagging.componentId,i(),p()}function g(a,b,c){var d=I.analyticsManager,e=d.trackingVars.buttonNoCookie,f=d.getTrackingObjectProperties(e),g={};g[f.componentId]=F,g[f.locationInPage]="forgot-password",g[f.buttonText]=a,c&&(g[f.errorMessage]="sorry! something went wrong. please try again."),d.track(e,g)}function h(b){var c=a(b.currentTarget),d=I.analyticsManager,e=d.trackingVars.genericClick,f=d.getTrackingObjectProperties(e),g={};g[f.componentId]=F,g[f.destination]=c.attr("href"),g[f.locationInPage]="forgot-password",g[f.buttonText]=D,I.analyticsManager.tag(e,g)}function i(){s.on(I.events.keyPress,j),t.on(I.events.click,k),u.on(I.events.click,h)}function j(c){var d,e;8===c.which||46===c.which?(d=a(c.target),e=d.val(),e.length||b.defer(function(){A._removeError(c.target)})):13===c.which&&(c.preventDefault(),t.trigger(I.events.click))}function k(b){b.preventDefault(),r.valid()&&(x.addClass(I.classes.active),a.ajax({type:"POST",url:y,data:r.serialize(),dataType:"json"}).done(l).fail(m))}function l(a){var b;x.removeClass(I.classes.active),"reset_password_mail_sent"===a.status_code?(a.email&&(b="email="+a.email+"&from_page=forgot_password",z=n(z,b)),g(C,"email-confirmation"),I.window.location.href=z):(w.addClass(I.classes.errorGroup),w.empty().append("<p>"+a.status_message+"</p>"),g(C,"email-confirmation",a.status_message))}function m(a){x.removeClass(I.classes.active),w.addClass(I.classes.errorGroup),w.empty().append("<p>"+B+"</p>"),g(C,"email-confirmation",a.status)}function n(a,b){return/[?]/.test(a)?a+"&"+b:a+"?"+b}function o(){A=new c(r,{validation:{rules:{email:{email:!1}}}})}function p(){var a;b.defer(function(){a=s.filter(":visible:first"),a.focus()})}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G="c_081-1",H={selectors:{component:".c_081-1",formElements:"input",sendEmailButton:"button",sendBack:".go-back",mainError:".main-error",ajaxLoading:".ajax-loading",contactUsButton:".cta-list a"},events:{click:"click."+G,keyPress:"keypress."+G},classes:{errorGroup:"error-group-light error-group",active:"active"},attributes:{sendEmailSuccessUrl:"success-url",noResponse:"no-response"}},I=null;return{init:f}}),define("c_081_2",["jquery"],function(a){"use strict";function b(b){if(n=a.extend({},m,b),g=a(n.selectors.component),!g.length)return!1;d(),h=g.find(n.selectors.contactUsButton),i=g.find(n.selectors.sendBack),j=a.trim(i.text()),k=a.trim(h.text()),f()}function c(a,b,c){var d=n.analyticsManager,e=d.trackingVars.genericClick,f=d.getTrackingObjectProperties(e),g={};g[f.componentId]=o,g[f.destination]=b,g[f.locationInPage]="Forgot password email sent",g[f.buttonText]=a,c&&(g[f.errorMessage]=c),d.track(e,g)}function d(){var a=n.analyticsManager,b=a.trackingVars.formSteps,c=(a.getTrackingObjectProperties(b),{componentId:o,formStepName:"email-sent",formName:"forgot-password",formStepNumber:"step-1"});a.append(b,c)}function e(b){var c=a(b.currentTarget),d=n.analyticsManager,e=d.trackingVars.genericClick,f=d.getTrackingObjectProperties(e),g={};g[f.componentId]=o,g[f.destination]=c.attr("href"),g[f.locationInPage]="forgot-password",g[f.buttonText]=j,n.analyticsManager.tag(e,g)}function f(){h.on(n.events.click,function(){c(k,"contact")}),i.on(n.events.click,e)}var g,h,i,j,k,l="c_081-2",m={selectors:{component:".c_081-2",sendBack:".go-back",contactUsButton:".cta-list a"},events:{click:"click."+l}},n={},o="C81-2_Enter_New_Password";return{init:b}}),define("c_081_3",["jquery","underscore","validation","urlParameterDecoder","storageManager","storageManagerKeys"],function(a,b,c,d,e,f){"use strict";function g(b){if(O=a.extend({},N,b),x=a(O.selectors.component),!x.length)return!1;L=O.HELIOS.adobe.tagging.componentId,y=x.find("form"),t(),z=y.find(O.selectors.formElements),E=y.find(O.selectors.passwordInput),A=y.find(O.selectors.resetButton),B=x.find(O.selectors.mainError),C=x.find(O.selectors.ajaxLoading),D=x.find(O.selectors.tokenInput),G=y.attr("action"),K=a.trim(A.text()),H=A.data(O.attributes.resetSuccessUrl),d.init(),I=d.getUrlParams(),e.init(),w(),o(),u(),h()&&i().done(k).fail(l)}function h(){return!b.isUndefined(x)&&x.get(0).hasAttribute(O.data.gigyaValidationCustomRegexPattern)}function i(){var b=a.Deferred(),c=0,d=setInterval(function(){c+=1,O.window.gigya?(clearInterval(d),b.resolve()):c>=O.config.maxAttempts&&(clearInterval(d),b.reject())},O.config.readyInterval);return b.promise()}function j(a){b.isEmpty(a.passwordComplexity.regExp)||E.attr(O.data.validationCustomRegexPattern,a.passwordComplexity.regExp)}function k(){var a={sections:"passwordComplexity",callback:j};O.window.gigya.accounts.getPolicies(a)}function l(){x.remove()}function m(a){var b=O.analyticsManager,c=b.trackingVars.formSteps,d=b.getTrackingObjectProperties(c),e={};a&&(e[d.formStepName]="submit",e[d.formStepNumber]="step-3",e[d.errorMessage]=a),b.track(c,e)}function n(){var a=O.analyticsManager,b=a.trackingVars.formSteps,c=a.getTrackingObjectProperties(b),d={};d[c.errorMessage]="passwords don't match",a.track(b,d)}function o(){z.on(O.events.keyUp,p),A.on(O.events.click,q)}function p(c){var d,e;8!==c.which&&46!==c.which||(d=a(c.target),e=d.val(),e.length||b.defer(function(){J._removeError(c.target)}))}function q(b){if(b.preventDefault(),y.valid())C.addClass(O.classes.active),a.ajax({type:"POST",url:G,data:y.serialize(),dataType:"json"}).done(r).fail(s);else for(var c in J.errors)J.settings.validation.rules["confirm-password"]["helios_equal-to"]===J.errors[c]?n():m(c)}function r(a){C.removeClass(O.classes.active),"0"===a.status_code?(a.status_message&&e.saveItem(f.c_081_3.statusKey,{status_message:a.status_message}),m(),window.location.href=H):(B.addClass(O.classes.errorGroup),B.empty().append(a.status_message),m(a.status_message),y.trigger("reset"))}function s(a){C.removeClass(O.classes.active),B.addClass(O.classes.errorGroup),B.empty().append(P),m(P),y.trigger("reset")}function t(){J=new c(y,{})}function u(){var a;b.defer(function(){a=z.filter(":visible:first"),a.focus()})}function v(a){if(I[a])return I[a]}function w(){(F=v(O.urlParams.token))&&D&&D.val(F)}var x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M="c_081-3",N={selectors:{component:".c_081-3",formElements:"input",resetButton:".reset-cta",mainError:".main-error",ajaxLoading:".ajax-loading",tokenInput:".token",passwordInput:"input[type=password]"},events:{click:"click."+M,keyUp:"keyup."+M},classes:{errorGroup:"error-group",active:"active"},attributes:{resetSuccessUrl:"success-url"},urlParams:{token:"pwrt"},data:{validationCustomRegexPattern:"data-validation-customregex-pattern",gigyaValidationCustomRegexPattern:"data-gigya-is-active"},config:{readyInterval:500,maxAttempts:6},window:window},O=null,P="no-response";return{init:g}}),define("c_082",["underscore","jquery","c_133","jqueryCookie"],function(a,b,c,d){"use strict";function e(a){b(o.containerSelector).each(function(){var c=b(this);new f(b.extend({$container:c},n,a))})}function f(a){this.options=a,this.buildDataModelFromHtml(),this.populateStateDropDownList(),b(o.cityDropDownSelector).prop("disabled",!0),this.bindEvents(),this.setLocationFromCookie(),b(document).on(n.events.financeCalcInitialised,b.proxy(function(){this.initFinanceCalculator(a.$container)},this))}function g(){}function h(){}function i(){}function j(){}
var k="pricelist",l="C82_Regional_Prices",m=b.Deferred(),n={cookieConfig:{expires:365,path:"/"},cookieKeyCity:"PreferredDealerCity",cookieKeyState:"PreferredDealerState",events:{financeCalcInitialised:"calculator.initialised"}},o={cityDropDownSelector:".select-city",cityElementSelector:".city",cityNameElementSelector:".city-name",containerSelector:".c_082",dataStatePropertyName:"data-state",dataStateValueVisible:"visible",pricingContainerSelector:".pricing",stateDropDownSelector:".select-state",stateElementSelector:".state",stateNameElementSelector:".state-name",priceInfoList:".city[data-state=visible] tbody tr",financeCalculator:".c_133"};return f.prototype.bindEvents=function(){b(o.stateDropDownSelector,this.options.$container).on("change."+k,b.proxy(this.onSelectedStateChange,this)),b(o.cityDropDownSelector,this.options.$container).on("change."+k,b.proxy(this.onSelectedCityChange,this))},f.prototype.initFinanceCalculator=function(a){var b,d=a.find(o.financeCalculator),e=d.data("simulatorCurrency");d.length&&(e=e.length?e:this.options.HELIOS.config.common.formatting.currency.symbol,b={currency:e,currencyCalc:"INR",price:d.data("simulatorPrice"),priceType:d.data("simulatorPriceType")},this.calculator=new c.FinanceCalculator(d,b))},f.prototype.buildDataModelFromHtml=function(){this.dataModel={states:new g},this.getStateElements().each(b.proxy(function(a,c){this.dataModel.states.push(this.createStateFromElement(b(c)))},this))},f.prototype.createCityFromElement=function(a){var b=new j;return a&&(b.$element=a,b.name=a.find(o.cityNameElementSelector).text(),b.isVisible=!1),b},f.prototype.createStateFromElement=function(a){var c=new h;return a&&(c.$element=a,c.name=a.find(o.stateNameElementSelector).text(),c.isVisible=!1,c.cities=new i,this.getCityElements(a).each(b.proxy(function(a,d){c.cities.push(this.createCityFromElement(b(d)))},this))),c},f.prototype.getCityByName=function(b,c){var d;return b&&b.cities&&(d=a.findWhere(b.cities,{name:c})),d},f.prototype.getCityElements=function(a){return b(o.cityElementSelector,a)},f.prototype.getCityNameFromCookie=function(){return b.cookie(n.cookieKeyCity)},f.prototype.getStateByName=function(b){return a.findWhere(this.dataModel.states,{name:b})},f.prototype.getStateElements=function(){return b(o.stateElementSelector,this.options.$container)},f.prototype.getStateNameFromCookie=function(){return b.cookie(n.cookieKeyState)},f.prototype.hideAllCities=function(){a.each(this.dataModel.states,function(b){a.invoke(b.cities.getVisibleCities(),"hide")})},f.prototype.hidePricing=function(){b(o.pricingContainerSelector,this.options.$container).removeAttr(o.dataStatePropertyName)},f.prototype.onSelectedCityChange=function(){var a=this.getStateByName(b(o.stateDropDownSelector,this.options.$container).val()),c=this.getCityByName(a,b(o.cityDropDownSelector,this.options.$container).val());a&&c&&(this.showPricing(),a.show(),this.hideAllCities(),c.show(),b.cookie(n.cookieKeyState,a.name,n.cookieConfig),b.cookie(n.cookieKeyCity,c.name,n.cookieConfig),b.when(m).done(this.trackPricing.bind(this)))},f.prototype.onSelectedStateChange=function(){var c=this.getStateByName(b(o.stateDropDownSelector).val());this.hidePricing(),a.invoke(this.dataModel.states.getVisibleStates(),"hide"),this.hideAllCities(),this.populateCityDropDownList(c)},f.prototype.populateCityDropDownList=function(a){var c=b(o.cityDropDownSelector,this.options.$container),d=b("<option />").prop("disabled",!0).text(c.attr("data-defaulttext"));a&&a.cities&&b.each(a.cities,function(a,c){d=d.add(b("<option />").attr("value",c.name).text(c.name))}),c.empty().append(d).prop("selectedIndex",-1).trigger("change").prop("disabled",d.find("option:not([disabled])").length>0)},f.prototype.populateStateDropDownList=function(){var a=b(o.stateDropDownSelector,this.options.$container),c=b("<option />").prop("disabled",!0).text(a.attr("data-defaulttext"));b.each(this.dataModel.states,function(a,d){c=c.add(b("<option />").attr("value",d.name).text(d.name))}),a.empty().append(c).prop("selectedIndex",-1).prop("disabled",c.find("option:not([disabled])").length>0)},f.prototype.setLocationFromCookie=function(){var a=this.getStateNameFromCookie(),c=this.getCityNameFromCookie();a&&c&&(b(o.stateDropDownSelector,this.options.$container).val(a).trigger("change"),b(o.cityDropDownSelector,this.options.$container).val(c).trigger("change"))},f.prototype.showPricing=function(){var a=b(o.pricingContainerSelector,this.options.$container);a.attr(o.dataStatePropertyName)!==o.dataStateValueVisible&&a.attr(o.dataStatePropertyName,o.dataStateValueVisible)},f.prototype.trackPricing=function(){var a=b(o.stateDropDownSelector,this.options.$container).val(),c=b(o.cityDropDownSelector,this.options.$container).val(),d=b(o.pricingContainerSelector,this.options.$container),e=b(o.priceInfoList,d),f={componentId:l,searchType:"regional-prices",searchFilter:"state,city",searchFilterValue:a+","+c,searchResults:e.length};this.options.analyticsManager&&this.options.analyticsManager.tag("search",f)},g.prototype=[],g.prototype.getVisibleStates=function(){return a.where(this,{isVisible:!0})},h.prototype.hide=function(){this.$element&&this.$element.removeAttr(o.dataStatePropertyName),this.isVisible=!1},h.prototype.show=function(){this.$element&&this.$element.attr(o.dataStatePropertyName,o.dataStateValueVisible),this.isVisible=!0},i.prototype=[],i.prototype.getVisibleCities=function(){return a.where(this,{isVisible:!0})},j.prototype.hide=function(){this.$element&&this.$element.removeAttr(o.dataStatePropertyName),this.isVisible=!1},j.prototype.show=function(){this.$element&&this.$element.attr(o.dataStatePropertyName,o.dataStateValueVisible),this.isVisible=!0,m.resolve()},{init:e,City:j,CityCollection:i,PriceList:f,State:h,StateCollection:g}}),define("c_095",["jquery","logger"],function(a,b){"use strict";function c(c){if(o=new b({prefix:"C095"}),s=a.extend({},q,c),j=a(s.selectors.root),!j.length)return!1;o.info("init"),d(),e(),f()}function d(){p=j.data("liveChatLabel"),k=a(s.selectors.liveChatHeader),l=k.find(s.selectors.liveChatPrepend),m=a(s.selectors.liveChatMobile),n=a(s.selectors.liveChatFooter)}function e(){a(document).on(s.events.liveChatReady,function(a,b){h(b)})}function f(){a(document).on("click",s.selectors.liveChatButton,function(b){b.preventDefault(),a(document).trigger(s.events.openLiveChat),o.info("trigger openLiveChat event"),g()})}function g(){var a=s.analyticsManager,b=a.trackingVars.liveChat,c=a.getTrackingObjectProperties(b),d={};d[c.componentId]=r,a.track(b,d)}function h(a){o.info("Insert liveChat buttons"),"before"===a.insert&&l.before(i("li")),"after"===a.insert&&k.append(i("li")),a.mobile&&m.prepend(i("li")),n.append(i("dd"))}function i(b){return a("<a />",{href:"",class:s.classes.liveChatButton}).wrap(document.createElement(b)).html(p).parent()}var j,k,l,m,n,o,p,q={selectors:{root:".c_095",liveChatHeader:".c_010 .global-nav-container .nav-global",liveChatPrepend:"li:not([class]):first",liveChatMobile:".c_010 .nav-global-small",liveChatFooter:".c_054-3 dl:first-child",liveChatButton:".c_095-live-chat"},classes:{liveChatButton:"c_095-live-chat"},events:{liveChatReady:"liveChatReady",openLiveChat:"openLiveChat"}},r="C95_LiveChat",s=null;return{init:c}}),define("c_095A",["jquery","analyticsManager"],function(a,b){"use strict";function c(b){C=a.extend({},B,b),p=a(C.selectors.root),p.length&&(q=a(C.selectors.liveChatScript),q.length&&(r=a(C.selectors.body),t=a(C.selectors.liveChatHeader),u=a(C.selectors.liveChatFooter),v=a(C.selectors.liveChatMobile),x=p.data(C.attributes.buttonId),w=p.data(C.attributes.scriptUrl),d(),f(),n()))}function d(){D={constants:{HELIOS:C.HELIOS,window:C.window,_satellite:C.window._satellite,eventEl:a(C.selectors.root),componentId:"C95_LiveChat"},component:{}},z=D.constants.componentId,D.component[z]={},y=new b(D.constants),y.trackComponent(D.component[z])}function e(){D.component[z]={componentId:"C95_LiveChat"},y.submitTracking("liveChat",D.component[z])}function f(){a.getScript(w),g().done(j).fail(l)}function g(){var b=a.Deferred(),c=0;return function(){var a=setInterval(function(){c+=1,window.liveagent?(clearInterval(a),b.resolve()):c>=C.config.maxAttempts&&(clearInterval(a),b.reject())},C.config.timeout)}(),b.promise()}function h(a){C.window.liveagent&&C.window.liveagent.BUTTON_EVENT&&C.window.liveagent.BUTTON_EVENT.BUTTON_AVAILABLE===a&&C.window.setTimeout(i,10)}function i(){a(C.selectors.liveChat).css("display","").addClass("active")}function j(){var b;m(),b=a(C.selectors.liveChat),liveagent.addButtonEventHandler(x,h),liveagent.init(p.data(C.attributes.liveChatInitUrl),p.data(C.attributes.liveChatInitParam1),p.data(C.attributes.liveChatInitParam2)),window._laq||(window._laq=[]),window._laq.push(function(){liveagent.showWhenOnline(x,b[0]),liveagent.showWhenOffline(x,b[0])}),k()}function k(){var a,b=p.data(C.attributes.liveChatCustomDetail);if(b)for(a in b)liveagent.addCustomDetail(a,b[a])}function l(){p.remove()}function m(){var b,c;b=a(C.selectors.liveChat).length,c=q.html(),b||(a("<li>").html(c).appendTo(t),a("<dd>").html(c).appendTo(u),a("<li>").html(c).appendTo(v),s=a(C.selectors.liveChat))}function n(){r.on(C.events.click,C.selectors.liveChat,o)}function o(){e(),liveagent.startChat(x)}var p,q,r,s,t,u,v,w,x,y,z,A="c_095A",B={config:{timeout:500,maxAttemtps:6},selectors:{root:".c_095A",liveChat:".c_095A-live-chat",body:"body",liveChatHeader:".global-nav-container .nav-global",liveChatFooter:".c_054-3 dl:first-child",liveChatScript:'script[data-component="c_095A"]',liveChatMobile:".c_010B .nav-global-small"},events:{click:"click."+A},attributes:{buttonId:"live-chat-button-id",scriptUrl:"script-url",liveChatInitUrl:"live-chat-init-url",liveChatInitParam1:"live-chat-init-param1",liveChatInitParam2:"live-chat-init-param2",liveChatCustomDetail:"live-chat-custom-detail"}},C=null,D={};return{init:c,liveAgentStatusCallback:h,showLiveChatCTA:i}}),define("c_095B",["jquery","analyticsManager"],function(a,b){"use strict";function c(b){if(x=a.extend({},w,b),m=a(x.selectors.root),!m.length)return!1;n=a(x.selectors.liveChatScript),n.length&&(o=a(x.selectors.body),p=a(x.selectors.liveChatHeaderLarge),q=a(x.selectors.liveChatHeaderSmall),r=a(x.selectors.liveChatFooter),s=m.data(x.attributes.scriptUrl),e(),d(),k())}function d(){s="//"+s,a.getScript(s),g().done(i).fail(j)}function e(){y={constants:{HELIOS:x.HELIOS,window:x.window,_satellite:x.window._satellite,eventEl:a(x.selectors.root),componentId:"C95_LiveChat"},component:{}},u=y.constants.componentId,y.component[u]={},t=new b(y.constants),t.trackComponent(y.component[u])}function f(){y.component[u]={componentId:"C95_LiveChat"},t.submitTracking("liveChat",y.component[u])}function g(){var b=a.Deferred(),c=0;return function(){var a=setInterval(function(){c+=1,window.vee24?(clearInterval(a),b.resolve()):c>=x.config.maxAttempts&&(clearInterval(a),b.reject())},x.config.timeout)}(),b.promise()}function h(b,c){var d=document.createElement(b);return a(d).html(c)}function i(){var a;a=n.html(),p.before(h("li",a)),q.prepend(h("li",a)),r.append(h("dd",a))}function j(){m.remove()}function k(){o.on(x.events.click,x.selectors.liveChat,l)}function l(){f(),vee24.api.helpMeNow(!0)}var m,n,o,p,q,r,s,t,u,v="c_095B",w={config:{timeout:500,maxAttemtps:4},events:{click:"click."+v},selectors:{root:".c_095B",body:"body",liveChat:".c_095B-live-chat",liveChatHeaderLarge:".c_010 .nav-global > li:not([class]):first",liveChatHeaderSmall:".c_010 .nav-global-small",liveChatFooter:".c_054-3 dl:first-child",liveChatScript:'script[data-component="c_095B"]'},attributes:{scriptUrl:"script-url"}},x=null,y={};return{init:c}}),define("c_097",["jquery","urlParameterDecoder"],function(a,b){"use strict";function c(c){var d={pl:null};if(n=a.extend({},m,c),f=a(n.selectors.component),!f.length)return!1;l=n.HELIOS.adobe.tagging.componentId,g=f.find(n.selectors.messageEmail),h=f.find(n.selectors.goBack),b.init(d),i=b.getUrlParams(),e()}function d(a){if(i[a])return i[a]}function e(){j=d(n.urlParams.email),k=d(n.urlParams.fromPage),j&&g&&(g.html(j),g.removeClass(n.classes.hidden)),k&&h&&h.removeClass(n.classes.hidden)}var f,g,h,i,j,k,l,m={selectors:{component:".c_097",messageEmail:".mail",goBack:".go-back"},urlParams:{email:"email",fromPage:"from_page"},classes:{hidden:"hidden"}},n=null;return{init:c}}),define("c_099_1",["jquery","underscore","accordion","accordionItem","c_100"],function(a,b,c,d,e){"use strict";function f(b){if(p=a.extend({},q,b),k=a(p.selectors.root),n=a(p.selectors.tooltipEnabled,k),!k.length)return!1;g(),m=decodeURI(location.hash.substring(1)),i(p.selectors.accordionPanel,p.selectors.accordionHeader,p.multipleOpenItemsAccordion)}function g(){n.on(p.events.click,h)}function h(b){var c=a(b.currentTarget);e.loadModal(c.data(p.data.info))}function i(b,e,f){var g,h,i=a(b,k),n=m.split("|"),o=[];-1!==m.indexOf("|")&&(g=n[1]),n=n[0],a(e,k).each(function(b,c){var e=!1,f=a(this).closest(p.selectors.root),g=f.prop("id");g===n&&(e=!0,f.addClass(p.classes.c_099_2_visible),a("html,body").animate({scrollTop:f.find(p.selectors.accordionGroup).offset().top},500)),i.each(function(b,c){a(c).find(p.selectors.tabHeaders).each(function(b,c){a(c).find("a").attr("href","#"+g+"|"+a(c).data(p.data.sectionTargetGroup))})}),o.push(new d({$contentElement:i.eq(b),$headerElement:a(c),isDisabled:!1,isOpen:e,noTabindex:!0}))}),l=new c({$container:k,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:f,items:o}),i.on(p.events.accordionStateChange,function(b,c){var d,e=a(this),f=e.closest(p.selectors.childRoot);f.length?a("html,body").animate({scrollTop:e.closest(p.selectors.accordionGroup).offset().top+50},500):(d=e.closest(p.selectors.root),c?(d.addClass(p.classes.c_099_2_visible),location.hash=d.attr("id"),a("html,body").animate({scrollTop:e.closest(p.selectors.accordionGroup).offset().top},500),j(d)):(b.preventDefault(),d.removeClass(p.classes.c_099_2_visible),location.hash="-"))}),g&&(h=a("#"+n).find("li[data-"+p.data.sectionTargetGroup+'="'+g+'"] a'),h.trigger(p.events.deepLink))}function j(a){var b,c,d,e,f=(a.data("gradeId"),{}),g={};p.analyticsManager?(b=p.analyticsManager.trackingVars.accordionExpansion,g=p.analyticsManager.getTrackingObjectProperties(b),c=a.data("gradeTitle"),e=a.find(".grade-info .c_184 .full-price").text(),e&&(c+=" - "+e),d=a.find(p.selectors.accordionHeader+" .show-btn").text(),f[g.componentId]=o,f[g.accordionType]=c,f[g.accordionText]=d,f[g.status]="open",p.analyticsManager.tag(b,f)):log.warn("analyticsManager not defined")}var k,l,m,n,o="C99.1_Grade_Overview",p=null,q={selectors:{root:".c_099-1",childRoot:".c_099-2",accordionPanel:"> .grade-wrapper > .accordion-group > .accordion-panel",accordionHeader:"> .grade-wrapper > .accordion-group > .accordion-header",accordionHeaderText:".show-btn",tooltipEnabled:".tooltip-enabled",accordionGroup:".accordion-group",tabHeaders:".c_099-2-section-headers > ul li"},events:{accordionStateChange:"accordion-state-change",click:"click",deepLink:"deepLink"},classes:{c_099_2_visible:"c_099-2-visible"},data:{info:"info",sectionTargetGroup:"section-target-group"},multipleOpenItemsAccordion:!1};return{init:f}}),define("c_099_2",["jquery","underscore","handlebars","accordion","accordionItem","storageManager","c_008"],function(a,b,c,d,e,f,g){"use strict";function h(b){return F=a.extend({},D,b),B=a(F.selectors.root),C=F.data.notFoundProperty,!!B.length&&(B.each(function(b,c){var d=a(c);d.find(F.selectors.sections).not(":eq(0)").addClass(F.classes.hidden),s(d,null),t(d,d.find(F.selectors.sectionHeaders+" select").val(),!1)}),B.find(F.selectors.versionContent).each(function(){p(a(this),F.selectors.accordionPanel,F.selectors.accordionHeader)}),f.init(),i(),n(F),o(),!0)}function i(){B.find(F.selectors.versionSelectBoxes).change(function(b){var c=a(b.currentTarget);b.originalEvent&&r(a(this).closest(F.selectors.root),a(this).val(),c,!0)}),B.find(F.selectors.sectionHeaders+" select").change(function(){q(a(this).closest(F.selectors.root),a(this).val(),!0)}),B.find(F.selectors.sectionHeaders+" a").on(F.events.click,j),B.find(F.selectors.sectionHeaders+" a").on(F.events.deepLink,k),B.find(F.selectors.ctaTabSwitch+" button").on(F.events.click,l),B.find(F.selectors.cta).on(F.events.click,m)}function j(b){var c=a(b.currentTarget),d=c.closest(F.selectors.root),e=d.find(F.selectors.sections).not(F.selectors.hidden),f=c.parent();f.hasClass(F.selectors.selected)||q(c.closest(F.selectors.root),f.data(F.data.sectionTargetGroup),!0,e),b.preventDefault()}function k(b){var c=a(b.currentTarget);q(c.closest(F.selectors.root),c.parent().data(F.data.sectionTargetGroup),!1),b.preventDefault()}function l(b){var c=a(b.currentTarget),d=c.closest(F.selectors.root),e=d.find(F.selectors.sections).not(F.selectors.hidden);q(d,c.data(F.data.sectionTargetGroup),!1),r(d,c.data(F.data.engineId),c,!1,e),a("html, body").animate({scrollTop:a(F.selectors.currentSectionHeaders).offset().top-50},500)}function m(b){var c=a(b.currentTarget);A(c),v(c)}function n(a){g.createTooltips(B.find(D.selectors.tooltipTriggers))}function o(){a("ul.spec-content-detail ").not(":has(li)").each(function(){a(this).hide(),a(this).closest(F.selectors.accordionUnit).find(F.selectors.accordionHeader).addClass("accordion-header-nodata"),a(this).closest(F.selectors.accordionUnit).find(F.selectors.accordionPanel).css("padding",0)})}function p(b,c,f){var g=a(c,b),h=a(f,b),i=[];h.each(function(b,c){i.push(new e({$contentElement:g.eq(b),$headerElement:a(c),isDisabled:!1,transitionToOpen:"toggle",transitionToClose:"hide",isOpen:!1}))}),new d({$container:b.find("> "+F.selectors.accordionUnit),isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:!1,items:i}),g.on(F.events.accordionStateChange,function(b,c){var d=a(this).closest(".accordion-group");c&&(a("html,body").animate({scrollTop:d.offset().top-50},500),x(d)),b.stopPropagation()})}function q(a,b,c,d){t(a,b,c),w(a,b,d)}function r(a,b,c,d,e){s(a,b),y(a,b,c,d,e)}function s(a,b){var c=a.find(F.selectors.versionSelectBoxes).eq(0);b||(b=c.find("option").eq(0).attr("value")),a.find(F.selectors.versionContent).addClass(F.classes.hidden).filter("["+F.attrs.versionId+'="'+b+'"]').removeClass(F.classes.hidden),a.find(F.selectors.versionSelectedTitle).text(c.find('option[value="'+b+'"]').text()),a.find(F.selectors.versionSelectBoxes).val(b)}function t(a,b,c){var d,e,f=a.closest(F.selectors.parent);a.find("["+F.attrs.sectionGroup+'="'+b+'"]').removeClass(F.classes.hidden),a.find(F.selectors.sections).not("["+F.attrs.sectionGroup+'="'+b+'"]').addClass(F.classes.hidden),d=a.find(F.selectors.sectionHeaders+" li"),d.removeClass("selected"),e=d.filter("["+F.attrs.sectionTargetGroup+'="'+b+'"]'),e.addClass("selected"),a.find(F.selectors.sectionHeaders+" select").val(b),c&&(location.hash=f.attr("id")+"|"+b)}function u(a,b,c,d){var e,f,g,h={};return c&&(e=c.find(F.selectors.priceWrapperA),f=c.find(F.selectors.priceWrapperB),1===e.length?g=e.data("priceCode")||C:1===f.length&&(g=f.data("vehiclePriceCode")||C),h[a.vehiclePrice]=c.find(F.selectors.gradePrice).text()||c.find(F.selectors.gradePrice2).text()||C,h[a.vehicleVersion]=String(c.data(F.data.gradeTitle))||C,h[a.vehicleVersionId]=String(c.data(F.data.gradeId))||C),h[a.componentId]=E||C,h[a.priceCurrency]=HELIOS.config.common.currencyCode||C,h[a.priceType]=g||C,h[a.vehicleGrade]=b.data(F.data.gradeTitle)||C,h[a.vehicleGradeId]=String(b.data(F.data.gradeId))||C,h[a.vehicleCategory]=HELIOS.adobe.tagging.vehicleCategory||C,h[a.vehicleModel]=HELIOS.adobe.tagging.vehicleModel||C,h[a.vehicleId]=HELIOS.adobe.tagging.vehicleId||C,h}function v(b){var c,d,e,f,g,h,i,j,k,l,m,n,o={},p=b.closest(F.selectors.root),q=b.closest(F.selectors.parent),r=b.closest(F.selectors.internalGrade),s=F.selectors.generalVersionContent;d=F.analyticsManager.trackingVars.genericClick,c=F.analyticsManager.getTrackingObjectProperties(d),o=a.extend({},u(c,q,r)),e=z(p),e+=" - "+p.find(F.selectors.sectionHeaders+" select").val(),o[c.locationInPage]=e,o[c.buttonText]=b.text(),o[c.destination]=b.attr("href"),1===b.closest(F.selectors.generalVersionContent).length&&(f=b.closest(s).data("version-id").toString().split("/")[1],g=F.selectors.sectionsWrapper,h=q.find(F.selectors.versionSelectedTitle).html(),i=b.closest(g).find(F.selectors.internalGrade),k=F.selectors.gradePrice,l=F.selectors.gradePrice2,m=F.selectors.priceWrapperA,n=F.selectors.priceWrapperB,j=i.filter(function(){return a(this).data("grade-id")===f}),o[c.vehicleVersionId]=String(f),o[c.vehicleVersion]=String(h),o[c.vehiclePrice]=j.find(k).text()||j.find(l).text()||C,o[c.priceType]=j.find(m).data(F.data.priceCode)||j.find(n).data(F.data.vehiclePriceCode)||C),F.analyticsManager.tag(d,o)}function w(c,d,e){var f,g,h,i,j,k,l,m,n,o={};j=c.closest(F.selectors.parent),k=c.find(F.selectors.sections).not(F.selectors.hidden),k.data(F.data.sectionGroup)!==F.data.overview&&(l=k.find(F.selectors.generalVersionContent).not(F.selectors.hidden),m=b.last(l.data(F.data.versionId).toString().split("/")),n=c.find(F.selectors.internalGrade).filter(function(){return a(this).data(F.data.versionId).toString()===m})),F.analyticsManager?(g=F.analyticsManager.trackingVars.buttonNoCookie,f=F.analyticsManager.getTrackingObjectProperties(g),o=a.extend({},u(f,j,n)),o[f.componentId]=E,o[f.buttonText]=d,o[f.contentAction]="show more",o[f.destinantion]=d,i=o[f.vehicleGrade]||"",e&&(h=e.data(F.data.sectionGroup),o[f.locationInPage]=i+"-"+h),F.analyticsManager.tag(g,o)):log.warn("analyticsManager not defined")}function x(a){var b,c,d,e,f,g,h={},i={};F.analyticsManager?(b=F.analyticsManager.trackingVars.accordionExpansion,i=F.analyticsManager.getTrackingObjectProperties(b),e=a.closest(F.selectors.root),c=a.closest("div["+F.attrs.sectionGroup+"]").find("> "+F.selectors.sectionTitle).text(),d=z(e),d+=" - "+c+" - "+e.find(F.selectors.versionSelectedTitle).eq(0).text(),f=a.find(F.selectors.accordionHeaderTitle).text(),g=a.find(F.selectors.packPriceValue).text()||"",h[i.componentId]=E,h[i.accordionType]=d,h[i.accordionText]=g?f+F.operators.MIDDLE_DIVIDER+g:f,h[i.status]="open",F.analyticsManager.tag(b,h)):log.warn("analyticsManager not defined")}function y(b,c,d,e,f){var g,h,i,j,k,l,m={},n=b.closest(F.selectors.parent),o=d.closest(F.selectors.internalGrade),p=n.find(F.selectors.equipmentVersionContent).not(F.selectors.hidden);f&&(k=f.data(F.data.sectionGroup)),h=F.analyticsManager.trackingVars.buttonNoCookie,g=F.analyticsManager.getTrackingObjectProperties(h),m=a.extend({},u(g,n,o)),i=b.find(F.selectors.sectionHeaders+" .selected").text(),j=d?d.text():null,m[g.buttonText]=j,m[g.contentAction]="anchor link",m[g.destination]=i,l=m[g.vehicleGrade]||"",m[g.locationInPage]=l+"-"+k,e&&(m[g.buttonText]=d.find("option:selected").text(),m[g.vehicleVersion]=n.find(F.selectors.versionSelectedTitle).html()||C,m[g.vehicleVersionId]=String(p.data("version-id"))||C,m[g.vehiclePrice]=C),F.analyticsManager.tag(h,m)}function z(a){var b,c,d;return c=a.closest(".c_099-1"),b=c.data("gradeTitle"),d=c.find(".grade-info .c_184 .full-price").text(),d&&(b+=" - "+d),b}function A(a){var b=a.closest(F.selectors.dataStorage),c=b.data(F.data.versionId),d=b.data(F.data.modelId),e=b.data(F.data.gradeId);f.saveItem(F.selectors.root,{versionId:c,modelId:d,gradeId:e})}var B,C,D={events:{accordionStateChange:"accordion-state-change",click:"click",deepLink:"deepLink"},selectors:{root:".c_099-2",parent:".c_099-1",sections:".c_099-2-sections > div[data-section-group]",sectionHeaders:".c_099-2-section-headers",currentSectionHeaders:".c_099-2-visible .c_099-2-section-headers",sectionTitle:".c_099-2-section-title",versionSelectedTitle:".c_099-2-version-selector-choice",versionSelectBoxes:".c_099-2-version-selector select",versionContent:".c_099-2-version-content",dataStorage:".c_099-2-data-storage",accordionPanel:".accordion-panel",accordionHeader:".accordion-header",accordionHeaderTitle:".accordion-header-title",packPriceValue:".available-price",accordionUnit:".accordion-group",cta:".c_099-2-actions a",ctaTabSwitch:".cta-tab-switch",tooltipTriggers:".has-tooltip",internalGrade:".c_099-2-overview-version",gradePrice:".price-wrapper .primary-price .price",gradePrice2:".price-wrapper .price .full-price",equipmentVersionContent:".c_099-2-equipment .c_099-2-version-content",priceWrapperA:".price-wrapper .c_184",priceWrapperB:".price-wrapper .c_184B",generalVersionContent:".c_099-2-version-content",sectionsWrapper:".c_099-2-sections",hidden:".hidden",overviewSection:".c_099-2-overview",selected:"selected"},attrs:{sectionGroup:"data-section-group",sectionTargetGroup:"data-section-target-group",sectionGradeId:"data-section-grade-id",engineId:"data-engine-id",versionId:"data-version-id",gradeId:"data-grade-id",modelId:"data-model-id"},data:{sectionTargetGroup:"sectionTargetGroup",engineId:"engineId",versionId:"versionId",gradeId:"gradeId",modelId:"modelId",notFoundProperty:"not found",priceCode:"priceCode",vehiclePriceCode:"vehiclePriceCode",sectionGroup:"section-group",overview:"overview",gradeTitle:"grade-title"},operators:{MIDDLE_DIVIDER:"-"},classes:{hidden:"hidden"}},E="C99.2_Grade_Versions",F=null;return{init:h}}),define("c_099_3",["jquery"],function(a){"use strict";function b(b){var e;if(M=a.extend({},L,b),t=a(M.selectors.root),!t.length)return!1;C=t.find(M.selectors.labelFilter),B=t.find(M.selectors.containerRadios),A=t.find(M.selectors.btnAccordion),z=t.find(M.selectors.undoSelector),u=t.find(M.selectors.radioFilter),v=t.find(M.selectors.btnFiltersToggle),w=t.find(M.selectors.filters),x=t.find(M.selectors.filtersWrapper),y=t.find(M.selectors.countTextLabel),E=t.data(M.selectors.collapseOpen),F=t.data(M.selectors.collapseClose),D=t.find(M.selectors.filtersClose),K=t.data(M.selectors.model),J=t.data(M.selectors.errorTitle),H=t.data(M.selectors.collapseState),m(),!0===H&&(x.addClass(M.classes.active),v.addClass(M.classes.active)),c(),n(),d(),e=M.window.location.pathname.split("/"),o(e)}function c(){u.on(M.events.click,i),v.on(M.events.click,h),z.on(M.events.click,e),A.on(M.events.click,f),D.on(M.events.click,g)}function d(){v.hasClass(M.classes.active)?v.text(F):v.text(E)}function e(){var b=a(this),c=a('[data-filter-value="'+M.data.allGrades+'"]');I=!0,b.hasClass(M.classes.active)&&s(this),c.prop("checked",!0),c.trigger(M.events.click)}function f(){var b=a(this),c=a(this).parent().find(B);B.not(c).removeClass(M.classes.active),A.not(b).removeClass(M.classes.active),b.toggleClass(M.classes.active),c.toggleClass(M.classes.active),b.hasClass(M.classes.active)&&q(this)}function g(){v.trigger(M.events.click)}function h(){var b=a(this);b.toggleClass(M.classes.active),x.slideToggle(),b.hasClass(M.classes.active)?(b.text(F),r(this)):b.text(E)}function i(){var b,c,d=a(this);k(d),b=d.parents(M.selectors.containerRadios),c=b.parent().find(M.selectors.btnAccordion),a("input",b).removeClass(M.classes.active),d.addClass(M.classes.active),b.removeClass(M.classes.active),c.removeClass(M.classes.active),I||(p(this),I=!1)}function j(){var b;b=a(M.selectors.listGrades),b.addClass(M.classes.isGradeActive),b.each(function(b,c){var d,e=a(c);d=a(M.selectors.filterVersionApplied,e),d.length>0?a(M.selectors.countVersions,e).html(d.length):e.removeClass(M.classes.isGradeActive)}),m()}function k(b){var c,d,e,f,g;c=b?b.data(M.attrs.dataFilterValue):"",d=a(M.selectors.filter,w),e=a(M.selectors.listVersions),f=b.siblings("label").text(),g=b.closest(d).find(C),e.addClass(M.classes.isVersionActive),g.text(f),d.each(function(b,d){var f,g,h,i;h=a(M.selectors.radioFilterChecked,a(d)),f=h.parents(M.selectors.filter).data(M.attrs.dataFilterType).toLowerCase(),g=h.data(M.attrs.dataFilterValue),i=a(M.selectors.filterVersionApplied),g!==M.data.allGrades?i.each(function(b,c){var d=a(c);d.data(f)===g?(d.hasClass(M.classes.isVersionActive)||d.addClass(M.classes.isVersionActive),l(d,M.data.showVersion)):(d.removeClass(M.classes.isVersionActive),l(d,M.data.hideVersion))}):c===M.data.allGrades&&l(e,M.data.showAllVersions)}),j()}function l(b,c){var d,e,f;switch(e=b.data(M.attrs.dataGradeTitle),f=b.parents(M.selectors.sectionsVersion),c){case M.data.hideVersion:_.isUndefined(e)||(d=a(M.selectors.versionSelector+' option:contains("'+e.trim()+'")',f).prop("disabled",!0),d.prop("selected")&&d.parent().find("option:not(:disabled):first").prop("selected",!0).trigger("change"));break;case M.data.showVersion:_.isUndefined(e)||a(M.selectors.versionSelector+' option:contains("'+e.trim()+'")',f).prop("disabled",!1);break;case M.data.showAllVersions:a(M.selectors.versionSelector+" option",f).prop("disabled",!1)}}function m(){var b,c=a(M.selectors.filterVersionApplied);c.length>0?(G=t.data(M.selectors.filterText),b=a("<span>",{class:M.classes.counterFilter,text:c.length}),G=G.replace(/\{.*?\}\s?/g,b.prop("outerHTML")),a(M.selectors.errorGroup,t).removeClass(M.classes.loadError),a(M.selectors.undoSelector,t).removeClass(M.classes.active)):(G="",a(M.selectors.errorGroup,t).addClass(M.classes.loadError),a(M.selectors.undoSelector,t).addClass(M.classes.active)),y.html(G)}function n(){var b=a(M.selectors.filter,w);b.each(function(c,d){var e,f,g;e=a(M.selectors.radioFilterChecked,a(d)),f=e.siblings("label").text(),g=e.closest(b).find(C),g.text(f)})}function o(b){var c,d;c=b,d=/=/,_.each(c,function(b){var c,e,f;d.test(b)&&(f=b.split("="),c=t.find('[data-filter-type="'+decodeURIComponent(f[0])+'"]'),e=a('input[data-filter-value="'+decodeURIComponent(f[1].replace(".html",""))+'"]',c),e.trigger(M.events.click))})}function p(b){var c,d,e,f=a(b),g=f.data(M.attrs.dataFilterValue),h="search",i=a(M.selectors.filterVersionApplied);d=i.length>0?"":J,c=f.parents(M.selectors.filter).data(M.attrs.dataFilterType),e={componentId:N,searchFilter:c,searchFilterValue:g,searchType:"Specifications",searchResults:String(i.length),errorMessage:d},M.analyticsManager.tag(h,e)}function q(b){var c=a(b),d=c.siblings(M.selectors.filterName).text(),e={componentId:N,accordionText:d,accordionType:K};M.analyticsManager.tag("accordionExpansion",e)}function r(b){var c=a(b),d=c.text(),e={componentId:N,accordionText:d,accordionType:K};M.analyticsManager.tag("accordionExpansion",e)}function s(b){var c=a(b),d=c.text(),e={componentId:N,destination:"#",locationInPage:"Vehicle filter",buttonText:d};M.analyticsManager.tag("genericClick",e)}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L={events:{click:"click"},classes:{selected:"selected",active:"active",isGradeActive:"is-grade-active",isVersionActive:"is-version-active",loadError:"load-error",counterFilter:"counter-filter"},selectors:{root:".c_099-3",listGrades:".c_099-1",listVersions:".c_099-2-overview-version",sectionsVersion:".c_099-2-sections",radioFilter:".filter-radio",btnFiltersToggle:".filters-toggle",filters:".filters",filter:".filter",filterVersionApplied:".c_099-2-overview-version.is-version-active",filterGradeApplied:".c_099-1.is-grade-active",filterName:".filter-name",radioFilterChecked:"input:radio:checked",filtersWrapper:".filters-wrapper",countTextLabel:".countText",collapseState:"service-collapse",filterText:"service-showing",countVersions:".accordion-header .counterVersions",errorTitle:"error-title",model:"service-model",collapseOpen:"collapse-open",collapseClose:"collapse-close",errorGroup:".error-groups",overviewVersion:".c_099-2-overview-version",versionSelector:".version-selector",undoSelector:".undo-button",btnAccordion:".btn-accordion",containerRadios:".container-radios",labelFilter:".label-filter",filtersClose:".filters-close"},attrs:{dataFilterType:"filterType",dataFilterValue:"filterValue",dataGradeTitle:"gradeTitle"},data:{allGrades:"All",hideVersion:"hide",showVersion:"show",showAllVersions:"showAll",dataFilterValue:"filter-value"}},M=null,N="C99.3_Vehicle_Specifications_Filter";return{init:b,checkInitToggle:d,onClickUndo:e,onClickBtnAccordion:f,onClickRadioFilter:i,onClickFiltersToggle:h,fillFiltersByUrl:o,defaults:L}}),define("c_099_5",["jquery","handlebars","disclaimers","c_020"],function(a,b,c,d){function e(b){if(R=a.extend({},Q,b),w=a(R.selectors.root),!w.length)return!1;P=w.data(R.attrs.filterUrl),serviceUrl=w.data(R.attrs.serviceUrl),y=w.find(R.selectors.script),
z=a(d.defaults.selectors.chooseModel+" "+R.selectors.select),G=a(d.defaults.selectors.chooseGrade+" "+R.selectors.select),H=a(d.defaults.selectors.chooseEngine+" "+R.selectors.select),I=a(d.defaults.selectors.chooseVersion+" "+R.selectors.select),J=a(d.defaults.selectors.root),M=J.data(d.defaults.attrs.filterLevels),J.data(R.data.info)&&(O=J.data(R.data.info)),z.on(R.events.change,r)}function f(a,b){var c="service"===b?"":R.data.extension;return a+U+encodeURIComponent(z.find("option:selected").text())+c}function g(){var b=a.ajax({url:f(P,"filter"),dataType:"json",method:"POST",data:{nameAndPath:z.find(R.selectors.optionSelected).data(R.attrs.namePath)}});b.done(h),b.fail(function(a){w.empty()})}function h(a){var d,e=y.html(),f=b.compile(e);d=f(a),w.empty(),w.append(d),B=w.find(R.selectors.btnAccordion),A=w.find(R.selectors.btnFiltersToggle),K=A.data(R.attrs.collapseOpen),L=A.data(R.attrs.collapseClose),C=w.find(R.selectors.containerRadios),E=w.find(R.selectors.filtersWrapper),x=w.find(R.selectors.radioFilter),D=w.find(R.selectors.filters),$filter=w.find(R.selectors.filter),F=w.find(R.selectors.filtersClose),i(),j(),c.renderDisclaimers(w)}function i(){A.on(R.events.click,k),F.on(R.events.click,k),B.on(R.events.click,l),x.on(R.events.click,m),M===R.data.engines&&G.on(R.events.change,function(a){s(R.data.engines)}),M===R.data.versions&&G.on(R.events.change,function(a){s(R.data.versions)})}function j(){A.hasClass(R.classes.active)?A.text(L):A.text(K)}function k(){var b=a(this);b.toggleClass(R.classes.active),E.slideToggle(),b.hasClass(R.classes.active)?(b.text(L),t(this)):b.text(K)}function l(){var b=a(this),c=a(this).parents(R.selectors.filter);$filter.not(c).removeClass(R.classes.active),c.toggleClass(R.classes.active),b.hasClass(R.classes.active)&&u(this)}function m(){var b,c,d=a(this);b=d.parents(R.selectors.filter),c=a(R.selectors.labelFilter,b),a(R.selectors.input,b).removeClass(R.classes.active),d.addClass(R.classes.active),b.removeClass(R.classes.active),c.text(d.siblings(R.selectors.label).text()),n(),v(this)}function n(){var b,c,d,e="",g="",h=a(R.selectors.filter,D);_.each(h,function(f,g){b=a(R.selectors.filterRadioActive,a(f)),d=b.data(R.attrs.dataFilterValue),c=b.parents(R.selectors.filter).data(R.attrs.dataFilterType),R.data.allOption!==d&&(e+=U+c+"="+d)}),g=f(serviceUrl,"service"),""===e?(T=!1,q(O)):(T=!0,g+=e+R.data.extension,a.ajax({url:g,dataType:"json",success:p,error:o,method:"POST",data:{nameAndPath:z.find(R.selectors.optionSelected).data(R.attrs.namePath)}}))}function o(){G.prop("disabled",!0),I.prop("disabled",!0),H.prop("disabled",!0)}function p(a){_.each(a,function(a,b){S[b]=_.filter(O[b],function(b){return _.find(a,function(a){if(a.id===b.id)return!b.gradeId||b.gradeId===a.gradeId})})}),q(S)}function q(b){d.populateDropdownChildren(d.defaults.selectors.chooseGrade,d.defaults.selectors.chooseModel,"nameAndPath",b.grades,J),d.populateDropdownChildren(d.defaults.selectors.chooseVersion,d.defaults.selectors.chooseModel,"nameAndPath",b.versions,J),"engines"===M&&(H.prop("disabled",!0),H.siblings(R.selectors.selectedValue).html(a(R.selectors.engineSelect+" option:first").val())),"versions"===M&&G.length>0&&(I.prop("disabled",!0),I.siblings(R.selectors.selectedValue).html(a(R.selectors.versionSelect+" option:first").val()))}function r(){T=!1,N=z.val(),g(),w.show()}function s(b){var c;c=b===R.data.engines?H:I,S[b]&&T&&(a("option",c).hide(),_.each(S[b],function(b,d){_.each(a("option",c),function(c,d){a(c).val()!==b.id&&0!==d||a(c).show()})}))}function t(b){var c=a(b),d=c.text(),e={componentId:V,accordionText:d,accordionType:N};R.analyticsManager.tag("accordionExpansion",e)}function u(b){var c=a(b),d=c.parents(R.selectors.filter).data(R.attrs.dataFilterType),e={componentId:V,accordionText:d,accordionType:N};R.analyticsManager.tag("accordionExpansion",e)}function v(b){var c,d,e=a(b),f=e.siblings("label").text(),g="search";c=e.parents(R.selectors.filter).data(R.attrs.dataFilterType),d={componentId:V,searchFilter:c,searchFilterValue:f,searchType:"Specifications"},R.analyticsManager.tag(g,d)}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q={events:{click:"click",change:"change.modelId"},classes:{active:"active",loadError:"load-error",staticComponents:"static-components"},selectors:{root:".c_099-5",btnAccordion:".btn-accordion",btnFiltersToggle:".filters-toggle",containerRadios:".container-radios",labelFilter:".label-filter",filtersWrapper:".filters-wrapper",filter:".filter",filters:".filters",filterRadioActive:".filter-radio.active",radioFilter:".filter-radio",script:"script[data-component='c_099-5']",filterName:".filter-name",filtersClose:".filters-close",selectedValue:".selectedValue",input:"input",label:"label",select:"select",optionSelected:"option:selected"},attrs:{collapseClose:"collapse-close",collapseOpen:"collapse-open",filterUrl:"filter-url",serviceUrl:"service-url",dataFilterType:"filterType",dataFilterValue:"filterValue",namePath:"name-and-path"},data:{allOption:"all",extension:".car",engines:"engines",versions:"versions",info:"info"}},R=null,S={},T=!1,U="!/-",V="C99.5_Form_Builder_Filter";return{init:e,defaults:Q,checkInitToggle:j,onClickFiltersToggle:k,onClickBtnAccordion:l,onChangeModel:r,renderFilter:h}}),define("c_099_6",["underscore","jquery","handlebars","disclaimers","c_059C"],function(a,b,c,d,e){"use strict";function f(a){if(v=b.extend({},u,a),m=b(v.selectors.root),!m.length)return!1;n=m.find(v.selectors.radioFilter),o=m.find(v.selectors.btnFiltersToggle),q=m.data(v.data.collapseOpen),r=m.data(v.data.collapseClose),p=m.find(v.selectors.filters),s=m.data(v.data.serviceUrl),g()}function g(){o.on(v.events.click,h),n.on(v.events.click,i)}function h(a){var c=b(a.target);if(c.hasClass(v.classes.disabled))return!1;c.toggleClass(v.classes.active),p.slideToggle(),c.hasClass(v.classes.active)?c.text(r):c.text(q)}function i(){j()}function j(){var c,d,f,g="",h=b(v.selectors.filter,p);if(a.each(h,function(a){c=b(v.selectors.radioFilterChecked,a),f=c.data(v.data.dataFilterValue),d=c.parents(v.selectors.filter).data(v.data.dataFilterType),g+="/"+d+"/"+f}),t===g)return!1;e.pageCtrlHandler.disableSelectBox(),t=g,b.ajax({url:s+(g.length?g+".json":""),dataType:"json",type:"GET",success:k,error:l})}function k(b){b=a.isObject(b)?b:JSON.parse(b),d.renderDisclaimers(m),e.pageCtrlHandler.changeFilter(b)}function l(){e.pageCtrlHandler.handleError()}var m,n,o,p,q,r,s,t,u={events:{click:"click"},classes:{active:"active",disabled:"btn-disabled"},selectors:{root:".c_099-6",radioFilter:".filter-radio",btnFiltersToggle:".filters-toggle",filters:".filters",filter:".filter",radioFilterChecked:"input:radio:checked"},data:{serviceUrl:"service-url",dataFilterType:"filterType",dataFilterValue:"filterValue",collapseOpen:"collapse-open",collapseClose:"collapse-close"}},v=null;return{init:f,onClickRadioFilter:i,onClickFiltersToggle:h,defaults:u}}),define("c_099B_2",["jquery","c_042","c_072","c_184","c_184B","accordion","accordionItem","storageManager","c_100","c_008"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b){return I=a.extend({},J,b),G=I.$root,!!G.length&&(H=a(I.selectors.tooltipEnabled,G),G.find(I.selectors.versionContent).each(function(){v(a(this),I.selectors.accordionPanel,I.selectors.accordionHeader),G.each(function(b,c){var d=a(c);d.find(I.selectors.sections).not(":eq(0)").addClass(I.classes.hidden),y(d,null),z(d,d.find(I.selectors.sectionHeaders+I.classes.select).val())})}),h.init(),p(),m(I),!0)}function l(a){c.init({$scope:G,analyticsManager:a.analyticsManager})}function m(a){l(a),n(a),o(a),u(a)}function n(a){b.init({$scope:G})}function o(b){G.find(b.selectors.c_184).each(function(b,c){var e,f=a(c);e=new d.UniversalPricing({$element:f,manualPriceFormatting:f.data("manualPriceFormatting"),priceUrl:f.data("priceUrl"),dataPath:f.data("modelPath"),modelKey:f.data("modelCode"),gradeKey:f.data("modelGrade"),versionKey:f.data("modelVersion"),priceCode:f.data("priceCode")||"default",extraInfoPathPrefix:f.data("extraInfoPathPrefix"),extraInfoPathSuffix:f.data("extraInfoPathSuffix")}),e.refreshPrice()}),e.init({$el:G,analyticsManager:b.analyticsManager,financeManager:b.financeManager,HELIOS:b.HELIOS,heliosAppContext:b.heliosAppContext,numberFormat:b.numberFormat,priceCodes:b.priceCodes,priceManager:b.priceManager,window:b.window})}function p(){G.find(I.selectors.versionSelectBoxes).change(function(){x(a(this).closest(I.selectors.root),a(this).val())}),G.find(I.selectors.sectionHeaders+" select").change(function(){w(a(this).closest(I.selectors.root),a(this).val())}),G.find(I.selectors.sectionHeaders+" a").on(I.events.click,r),G.find(I.selectors.ctaTabSwitch+" button").on(I.events.click,s),G.find(I.selectors.cta).on(I.events.click,t),H.on(I.events.click,q)}function q(b){var c=a(b.currentTarget);i.loadModal(c.data(I.data.info))}function r(b){var c=a(b.currentTarget),d=c.parent();d.hasClass(I.selectors.selected)||w(c.closest(I.selectors.root),d.data(I.data.sectionTargetGroup)),b.preventDefault()}function s(b){var c=a(b.currentTarget),d=c.closest(I.selectors.root);w(d,c.data(I.data.sectionTargetGroup)),x(d,c.data(I.data.engineId),c),a("html, body").animate({scrollTop:a(I.selectors.currentSectionHeaders).offset().top-50},500)}function t(b){var c=a(b.currentTarget);F(c),A(c)}function u(a){j.createTooltips(G.find(J.selectors.tooltipTriggers))}function v(b,c,d){var e=a(c,b),h=a(d,b),i=[];h.each(function(b,c){i.push(new g({$contentElement:e.eq(b),$headerElement:a(c),isDisabled:!1,transitionToOpen:"toggle",transitionToClose:"hide",isOpen:!1}))}),new f({$container:b.find("> "+I.selectors.accordionUnit),isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:!1,items:i}),e.on(I.events.accordionStateChange,function(b,c){var d=a(this).closest(".accordion-group");c&&(a("html,body").animate({scrollTop:d.offset().top-50},500),C(d)),b.stopPropagation()})}function w(a,b){z(a,b),B(a,b)}function x(a,b,c){y(a,b),D(a,b,c)}function y(a,b){var c=a.find(I.selectors.versionSelectBoxes).eq(0);b||(b=c.find("option").eq(0).attr("value")),a.find(I.selectors.versionContent).addClass(I.classes.hidden).filter("["+I.attrs.versionId+'="'+b+'"]').removeClass(I.classes.hidden),a.find(I.selectors.versionSelectedTitle).text(c.find('option[value="'+b+'"]').text()),a.find(I.selectors.versionSelectBoxes).val(b)}function z(a,b){var c,d;a.find("["+I.attrs.sectionGroup+'="'+b+'"]').removeClass(I.classes.hidden),a.find(I.selectors.sections).not("["+I.attrs.sectionGroup+'="'+b+'"]').addClass(I.classes.hidden),c=a.find(I.selectors.sectionHeaders+" li"),c.removeClass("selected"),d=c.filter("["+I.attrs.sectionTargetGroup+'="'+b+'"]'),d.addClass("selected"),a.find(I.selectors.sectionHeaders+" select").val(b)}function A(a){var b,c,d,e={},f=a.closest(I.selectors.root);c=I.analyticsManager.trackingVars.genericClick,b=I.analyticsManager.getTrackingObjectProperties(c),d=E(f),d+=" - "+f.find(I.selectors.sectionHeaders+" select").val(),e[b.componentId]=K,e[b.locationInPage]=d,e[b.buttonText]=a.text(),e[b.destination]=a.attr("href"),I.analyticsManager.tag(c,e)}function B(a,b){var c,d,e={};I.analyticsManager?(d=I.analyticsManager.trackingVars.buttonNoCookie,c=I.analyticsManager.getTrackingObjectProperties(d),e[c.componentId]=K,e[c.buttonText]=b,e[c.contentAction]="show more",e[c.destinantion]=b,e[c.locationInPage]="comparision-engine-sectionHeaders",I.analyticsManager.tag(d,e)):log.warn("analyticsManager not defined")}function C(a){var b,c,d,e,f,g,h={},i={};I.analyticsManager?(b=I.analyticsManager.trackingVars.accordionExpansion,i=I.analyticsManager.getTrackingObjectProperties(b),e=a.closest(I.selectors.root),c=a.closest("div["+I.attrs.sectionGroup+"]").find("> "+I.selectors.sectionTitle).text(),d=E(e),d+=" - "+c+" - "+e.find(I.selectors.versionSelectedTitle).eq(0).text(),f=a.find(I.selectors.accordionHeaderTitle).text(),g=a.find(I.selectors.packPriceValue).text()||"",h[i.componentId]=K,h[i.accordionType]=d,h[i.accordionText]=g?f+I.operators.MIDDLE_DIVIDER+g:f,h[i.status]="open",I.analyticsManager.tag(b,h)):log.warn("analyticsManager not defined")}function D(a,b,c){var d,e,f,g,h={};e=I.analyticsManager.trackingVars.buttonNoCookie,d=I.analyticsManager.getTrackingObjectProperties(e),f=a.find(I.selectors.sectionHeaders+" .selected").text(),f=a.find(I.selectors.sectionHeaders+" .selected").text(),g=c?c.text():null,h[d.componentId]=K,h[d.buttonText]=g,h[d.contentAction]="anchor link",h[d.destinantion]=f,h[d.locationInPage]="comparision-engine-overview",I.analyticsManager.tag(e,h)}function E(a){var b,c,d;return c=a.closest(".c_099B-1"),b=c.data("gradeTitle"),d=c.find(".grade-info .c_184 .full-price").text(),d&&(b+=" - "+d),b}function F(a){var b=a.closest(I.selectors.dataStorage),c=b.data(I.data.versionId),d=b.data(I.data.modelId),e=b.data(I.data.gradeId);h.saveItem(I.selectors.root,{versionId:c,modelId:d,gradeId:e})}var G,H,I,J={events:{accordionStateChange:"accordion-state-change",click:"click"},selectors:{c_184:".c_184",root:".c_099B-2",sections:".c_099B-2-sections > div[data-section-group]",sectionHeaders:".c_099B-2-section-headers",currentSectionHeaders:".c_099B-2-visible .c_099B-2-section-headers",sectionTitle:".c_099B-2-section-title",versionSelectedTitle:".c_099B-2-version-selector-choice",versionSelectBoxes:".c_099B-2-version-selector select",versionContent:".c_099B-2-version-content",dataStorage:".c_099B-2-data-storage",accordionPanel:".accordion-panel",accordionHeader:".accordion-header",accordionHeaderTitle:".accordion-header-title",packPriceValue:".available-price",accordionUnit:".accordion-group",cta:".c_099B-2-actions a",ctaTabSwitch:".cta-tab-switch",tooltipTriggers:".has-tooltip",tooltipEnabled:".tooltip-enabled",selected:"selected"},attrs:{sectionGroup:"data-section-group",sectionTargetGroup:"data-section-target-group",sectionGradeId:"data-section-grade-id",engineId:"data-engine-id",versionId:"data-version-id",gradeId:"data-grade-id",modelId:"data-model-id"},data:{sectionTargetGroup:"sectionTargetGroup",engineId:"engineId",versionId:"versionId",gradeId:"gradeId",modelId:"modelId",info:"info"},operators:{MIDDLE_DIVIDER:"-"},classes:{hidden:"hidden",select:" select"}},K="C99B.2_Grade_Versions";return{init:k}}),define("c_099B_1",["jquery","underscore","accordion","accordionItem","c_099B_2","c_100","disclaimers"],function(a,b,c,d,e,f,g){"use strict";function h(b){if(C=a.extend({},G,b),A=a(C.selectors.root),!A.length)return!1;E=a(C.selectors.tooltipEnabled,A),i(),g.init(),D=location.hash.substring(1),k(C.selectors.accordionPanel,C.selectors.accordionHeader,C.multipleOpenItemsAccordion)}function i(){E.on(C.events.click,j)}function j(b){var c=a(b.currentTarget);f.loadModal(c.data(C.data.info))}function k(b,e,f){var g=a(b,A),h=[];a(e,A).each(function(b,c){var e=!1,f=a(this).closest(C.selectors.root);f.prop("id")===D&&(e=!0,f.addClass(C.classes.c_099B_2_visible)),h.push(new d({$contentElement:g.eq(b),$headerElement:a(c),isDisabled:!1,isOpen:e,noTabindex:!0}))}),B=new c({$container:A,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:f,items:h}),g.on(C.events.accordionStateChange,function(b,c){var d,e=a(this),f=e.closest(C.selectors.childRoot);f.length?a("html,body").animate({scrollTop:e.closest(".accordion-group").offset().top+50},500):(d=e.closest(C.selectors.root),c?(d.addClass(C.classes.c_099B_2_visible),a("html,body").animate({scrollTop:e.closest(".accordion-group").offset().top},500),l(d),s(d.data(C.dataAttributes.gradeId))):(d.removeClass(C.classes.c_099B_2_visible),r(d.data(C.dataAttributes.gradeId))))})}function l(a){var b,c,d,e,f=(a.data("gradeId"),{}),g={};C.analyticsManager?(b=C.analyticsManager.trackingVars.accordionExpansion,g=C.analyticsManager.getTrackingObjectProperties(b),c=a.data("gradeTitle"),e=a.find(".grade-info .c_184 .full-price").text(),e&&(c+=" - "+e),d=a.find(C.selectors.accordionHeader+" .show-btn").text(),f[g.componentId]=F,f[g.accordionType]=c,f[g.accordionText]=d,f[g.status]="open",C.analyticsManager.tag(b,f)):log.warn("AnalyticsManager not defined")}function m(a){return A.filter('[data-grade-id="'+a+'"]')}function n(a){return m(a).data(C.dataAttributes.versionsDataError)}function o(a){return m(a).find(C.selectors.accordionPanel)}function p(a){return m(a).data(C.dataAttributes.versionsDataUrl)}function q(b){return a.get(p(b),void 0,void 0,"html")}function r(a){w(a),o(a).empty()}function s(a){z(a),q(a).done(b.partial(t,b,a)).fail(b.partial(v,a))}function t(b,c){y(c),e.init({$root:o(c).html(b),analyticsManager:C.analyticsManager,financeManager:C.financeManager,heliosAppContext:C.heliosAppContext,HELIOS:C.HELIOS,numberFormat:C.numberFormat,priceCodes:C.priceCodes,priceManager:C.priceManager,window:C.window}),u(a(C.selectors.childRoot))}function u(a){g.getDisclaimerNodes(a),g.renderDisclaimers(a)}function v(a){y(a),x(a),o(a).text(n(a))}function w(a){m(a).toggleClass(C.classes.error,!1)}function x(a){m(a).toggleClass(C.classes.error,!0)}function y(a){m(a).toggleClass(C.classes.loading,!1)}function z(a){m(a).toggleClass(C.classes.loading,!0)}var A,B,C,D,E,F="C99B.1_Grade_Overview",G={dataAttributes:{gradeId:"gradeId",versionsDataError:"versionsDataError",versionsDataUrl:"versionsDataUrl"},selectors:{root:".c_099B-1",childRoot:".c_099B-2",accordionPanel:"> .grade-wrapper > .accordion-group > .accordion-panel",accordionHeader:"> .grade-wrapper > .accordion-group > .accordion-header",accordionHeaderText:".show-btn",tooltipEnabled:".tooltip-enabled"},events:{accordionStateChange:"accordion-state-change",click:"click"},classes:{c_099B_2_visible:"c_099B-2-visible",error:"error",loading:"loading"},data:{info:"info"},multipleOpenItemsAccordion:!1};return{init:h}}),define("c_099C_2",["jquery","underscore","handlebars","c_042","c_072","c_184","c_184B","accordion","accordionItem","storageManager","c_008"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(c){return J=a.extend({},M,c),I=a(J.selectors.root),K=J.data.notFoundProperty,!!I.length&&(I.each(function(c,d){var e,f=a(d),g=J.window.location.hash;f.find(J.selectors.sections).not(":eq(0)").addClass(J.classes.hidden),z(f,null),e=g&&-1!==g.indexOf(J.helpers.urlSeparator)?b.last(g.split(J.helpers.urlSeparator)):f.find(J.selectors.sectionHeaders+" "+J.selectors.select).val(),A(f,e)}),I.find(J.selectors.versionContent).each(function(){w(a(this),J.selectors.accordionPanel,J.selectors.accordionHeader)}),j.init(),q(),n(J),!0)}function m(a){e.init({$scope:I,analyticsManager:a.analyticsManager})}function n(a){m(a),o(),p(a),v()}function o(){d.init({$scope:I})}function p(b){I.find(b.selectors.c_184).each(function(b,c){var d,e=a(c);d=new f.UniversalPricing({$element:e,manualPriceFormatting:e.data("manualPriceFormatting"),priceUrl:e.data("priceUrl"),dataPath:e.data("modelPath"),modelKey:e.data("modelCode"),gradeKey:e.data("modelGrade"),versionKey:e.data("modelVersion"),priceCode:e.data("priceCode")||"default",extraInfoPathPrefix:e.data("extraInfoPathPrefix"),extraInfoPathSuffix:e.data("extraInfoPathSuffix")}),d.refreshPrice()}),g.init({$el:I,analyticsManager:b.analyticsManager,financeManager:b.financeManager,HELIOS:b.HELIOS,heliosAppContext:b.heliosAppContext,numberFormat:b.numberFormat,priceCodes:b.priceCodes,priceManager:b.priceManager,window:b.window})}function q(){I.find(J.selectors.versionSelectBoxes).change(function(b){var c=a(b.currentTarget);y(a(this).closest(J.selectors.root),a(this).val(),c,!0)}),I.find(J.selectors.sectionHeaders+" select").change(function(){x(a(this).closest(J.selectors.root),a(this).val(),!0)}),I.find(J.selectors.sectionHeaders+" a").on(J.events.click,r),I.find(J.selectors.sectionHeaders+" a").on(J.events.deepLink,s),I.find(J.selectors.ctaTabSwitch+" button").on(J.events.click,t),I.find(J.selectors.cta).on(J.events.click,u)}function r(b){var c=a(b.currentTarget),d=c.closest("li").data("section-target-group");d!==c.closest(I).data(J.data.activeTab)&&(x(c.closest(J.selectors.root),c.parent().data(J.data.sectionTargetGroup)),c.closest(I).data(J.data.activeTab,d)),b.preventDefault()}function s(b){var c=a(b.currentTarget);x(c.closest(J.selectors.root),c.parent().data(J.data.sectionTargetGroup)),b.preventDefault()}function t(b){var c=a(b.currentTarget),d=c.closest(J.selectors.root),e=a(J.selectors.currentSectionHeaders);L=c.attr(J.data.targetTab),d.data(J.data.activeTab,L),x(d,c.data(J.data.sectionTargetGroup)),y(d,c.data(J.data.engineId),c),a("html, body").animate({scrollTop:e.offset().top-50},500)}function u(b){var c=a(b.currentTarget);H(c),C(c)}function v(){k.createTooltips(I.find(M.selectors.tooltipTriggers))}function w(b,c,d){var e=a(c,b),f=a(d,b),g=[];f.each(function(b,c){g.push(new i({$contentElement:e.eq(b),$headerElement:a(c),isDisabled:!1,transitionToOpen:"toggle",transitionToClose:"hide",isOpen:!1}))}),new h({$container:b.find(">"+J.selectors.accordionUnit),isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:!1,items:g}),e.on(J.events.accordionStateChange,function(b,c){var d=a(this).closest(".accordion-group");c&&(a("html,body").animate({scrollTop:d.offset().top-50},500),E(d)),b.stopPropagation()})}function x(a,b){D(a,b),A(a,b)}function y(a,b,c,d){z(a,b),F(a,b,c,d)}function z(a,b){var c=a.find(J.selectors.versionSelectBoxes).eq(0);b||(b=c.find("option").eq(0).attr("value")),a.find(J.selectors.versionContent).addClass(J.classes.hidden).filter("["+J.attrs.versionId+'="'+b+'"]').removeClass(J.classes.hidden),a.find(J.selectors.versionSelectedTitle).text(c.find('option[value="'+b+'"]').text()),a.find(J.selectors.versionSelectBoxes).val(b)}function A(a,b){var c,d,e=a.closest(J.selectors.parent);a.find("["+J.attrs.sectionGroup+'="'+b+'"]').removeClass(J.classes.hidden),a.find(J.selectors.sections).not("["+J.attrs.sectionGroup+'="'+b+'"]').addClass(J.classes.hidden),c=a.find(J.selectors.optionTabs),c.removeClass("selected"),d=c.filter("["+J.attrs.sectionTargetGroup+'="'+b+'"]'),d.addClass("selected"),a.find(J.selectors.sectionHeaders+"select").val(b),location.hash=e.attr("id")+J.helpers.urlSeparator+b}function B(a,b,c,d){var e,f={},g=c.find(J.selectors.priceWrapperA),h=c.find(J.selectors.priceWrapperB);return 1===g.length?e=g.data(J.data.priceCode)||K:1===h.length&&(e=h.data(J.data.vehiclePriceCode)||K),f[a.componentId]=N||K,f[a.vehiclePrice]=c.find(J.selectors.gradePrice).text()||c.find(J.selectors.gradePrice2).text()||K,f[a.priceCurrency]=HELIOS.config.common.currencyCode||K,f[a.priceType]=e||K,f[a.vehicleVersion]=String(c.data("grade-title"))||K,f[a.vehicleVersionId]=String(c.data("grade-id"))||K,f[a.vehicleGrade]=b.data("grade-title")||K,f[a.vehicleGradeId]=String(b.data("grade-id"))||K,f[a.vehicleCategory]=HELIOS.adobe.tagging.vehicleCategory||K,f[a.vehicleModel]=HELIOS.adobe.tagging.vehicleModel||K,f[a.vehicleId]=HELIOS.adobe.tagging.vehicleId||K,f}function C(b){var c,d,e,f,g,h,i,j,k,l,m,n,o={},p=b.closest(J.selectors.root),q=b.closest(J.selectors.parent),r=b.closest(J.selectors.internalGrade),s=J.selectors.generalVersionContent;d=J.analyticsManager.trackingVars.genericClick,c=J.analyticsManager.getTrackingObjectProperties(d),o=a.extend({},B(c,q,r)),e=G(p,!0),e+=" - "+p.find(J.selectors.sectionHeaders+" select").val(),o[c.componentId]=N,o[c.locationInPage]=e,o[c.buttonText]=b.text(),o[c.destination]=b.attr("href"),1===b.closest(J.selectors.generalVersionContent).length&&(f=b.closest(s).data("version-id"),g=J.selectors.sectionsWrapper,h=q.find(J.selectors.versionSelectedTitle).html(),i=b.closest(g).find(J.selectors.internalGrade),k=J.selectors.gradePrice,l=J.selectors.gradePrice2,m=J.selectors.priceWrapperA,n=J.selectors.priceWrapperB,j=i.filter(function(){return a(this).data("grade-id")===f}),o[c.vehicleVersionId]=String(f),o[c.vehicleVersion]=String(h),o[c.vehiclePrice]=j.find(k).text()||j.find(l).text()||K,o[c.priceType]=j.find(m).data(J.data.priceCode)||j.find(n).data(J.data.vehiclePriceCode)||K),J.analyticsManager.tag(d,o)}function D(a,b){var c,d,e={},f=J.selectors.sections,g=a.find(f).not(J.selectors.hidden).data("section-group");J.analyticsManager?(d=J.analyticsManager.trackingVars.buttonNoCookie,c=J.analyticsManager.getTrackingObjectProperties(d),e[c.componentId]=N,e[c.buttonText]=b,e[c.contentAction]="show more",e[c.destinantion]=b,e[c.locationInPage]="comparison-engine-"+g,J.analyticsManager.tag(d,e)):log.warn("analyticsManager not defined")}function E(a){var b,c,d,e,f,g,h={},i={};J.analyticsManager?(b=J.analyticsManager.trackingVars.accordionExpansion,i=J.analyticsManager.getTrackingObjectProperties(b),e=a.closest(J.selectors.root),c=a.closest("div["+J.attrs.sectionGroup+"]").find("> "+J.selectors.sectionTitle).text(),d=G(e),d+=" - "+c+" - "+e.find(J.selectors.versionSelectedTitle).eq(0).text(),f=a.find(J.selectors.accordionHeaderTitle).text(),g=a.find(J.selectors.packPriceValue).text()||"",h[i.componentId]=N,h[i.accordionType]=d,h[i.accordionText]=g?f+J.operators.MIDDLE_DIVIDER+g:f,h[i.status]="open",J.analyticsManager.tag(b,h)):log.warn("analyticsManager not defined")}function F(b,c,d,e){var f,g,h,i,j={},k=b.closest(J.selectors.parent),l=d.closest(J.selectors.internalGrade),m=k.find(J.selectors.equipmentVersionContent).not(J.selectors.hidden);g=J.analyticsManager.trackingVars.buttonNoCookie,f=J.analyticsManager.getTrackingObjectProperties(g),j=a.extend({},B(f,k,l)),h=b.find(J.selectors.sectionHeaders+" .selected").text(),i=d?d.text():null,j[f.buttonText]=i,j[f.contentAction]="anchor link",j[f.destination]=h,j[f.locationInPage]="comparision-engine-overview",e&&(j[f.buttonText]=d.find("option:selected").text(),j[f.vehicleVersion]=k.find(J.selectors.versionSelectedTitle).html()||K,j[f.vehicleVersionId]=String(m.data("version-id"))||K,j[f.vehiclePrice]=K),J.analyticsManager.tag(g,j)}function G(a,b){var c,d,e;return d=a.closest(".c_099C-1"),c=d.data("gradeTitle"),e=d.find(".grade-info .c_184 .full-price").text(),e&&!b&&(c+=" - "+e),c}function H(a){var b=a.closest(J.selectors.dataStorage),c=b.data(J.data.versionId),d=b.data(J.data.modelId),e=b.data(J.data.gradeId);j.saveItem(J.selectors.root,{versionId:c,modelId:d,gradeId:e})}var I,J,K,L,M={events:{accordionStateChange:"accordion-state-change",click:"click",deepLink:"deepLink"},selectors:{c_184:".c_184",root:".c_099C-2",parent:".c_099C-1",sections:".c_099C-2-sections > div[data-section-group]",sectionHeaders:".c_099C-2-section-headers",currentSectionHeaders:".c_099C-2-visible .c_099C-2-section-headers",sectionTitle:".c_099C-2-section-title",versionSelectedTitle:".c_099C-2-version-selector-choice",versionSelectBoxes:".c_099C-2-version-selector select",versionContent:".c_099C-2-version-content",dataStorage:".c_099C-2-data-storage",accordionPanel:".accordion-panel",accordionHeader:".accordion-header",accordionHeaderTitle:".accordion-header-title",packPriceValue:".available-price",accordionUnit:".accordion-group",cta:".c_099C-2-actions a",ctaTabSwitch:".cta-tab-switch",tooltipTriggers:".has-tooltip",internalGrade:".c_099C-2-overview-version",gradePrice:".price-wrapper .primary-price .price",gradePrice2:".price-wrapper .price .full-price",equipmentVersionContent:".c_099C-2-equipment .c_099-2-version-content",priceWrapperA:".price-wrapper .c_184",priceWrapperB:".price-wrapper .c_184B",generalVersionContent:".c_099C-2-version-content",sectionsWrapper:".c_099C-2-sections",hidden:".hidden",overviewSection:".c_099C-2-overview",optionTabs:".c_099C-2-section-headers li",select:"select"},attrs:{sectionGroup:"data-section-group",sectionTargetGroup:"data-section-target-group",sectionGradeId:"data-section-grade-id",engineId:"data-engine-id",versionId:"data-version-id",gradeId:"data-grade-id",modelId:"data-model-id"},data:{sectionTargetGroup:"sectionTargetGroup",engineId:"engineId",versionId:"versionId",gradeId:"gradeId",modelId:"modelId",notFoundProperty:"not found",priceCode:"priceCode",vehiclePriceCode:"vehiclePriceCode",sectionGroup:"section-group",overview:"overview",gradeTitle:"grade-title",activeTab:"active-tab",targetTab:"data-section-target-group"},operators:{MIDDLE_DIVIDER:"-"},classes:{hidden:"hidden"},helpers:{urlSeparator:"|"}},N="C99C-2_Vehicle_Version";return{init:l}}),define("c_099C_1",["jquery","underscore","accordion","accordionItem","c_100","c_099C_2","disclaimers"],function(a,b,c,d,e,f,g){"use strict";function h(b){if(N=a.extend({},R,b),L=a(N.selectors.root),!L.length)return!1;i(),P=D(),g.init(),O=N.window.location.hash.substring(1),l(N.selectors.accordionPanel,N.selectors.accordionHeader,N.multipleOpenItemsAccordion),k()}function i(){L.parent().on(N.events.click,N.selectors.toolTipEnabled,j)}function j(b){var c=a(b.currentTarget);e.loadModal(c.data(N.data.info))}function k(){a(N.selectors.root).find(N.selectors.accordionButton).each(function(b,c){B(a(c),a(c).attr(N.data.dataShowDialog))})}function l(e,f,g){var h,i,j=a(e,L),k=O.split("|"),l=[];-1!==O.indexOf("|")&&(h=k[1]),k=k[0],a(f,L).each(function(b,c){var e=a(this).closest(N.selectors.root),f=e.prop("id");f===k&&(e.addClass(N.classes.c_099C_2_visible),setTimeout(function(){e.find(N.selectors.specificAccordionButton).trigger(N.events.click)},N.values.timeout)),j.each(function(b,c){a(c).find(N.selectors.tabHeaders).each(function(b,c){a(c).find("a").attr("href","#"+f+"|"+a(c).data(N.data.sectionTargetGroup))})}),l.push(new d({$contentElement:j.eq(b),$headerElement:a(c),isDisabled:!1,isOpen:!1,noTabindex:!0}))}),M=new c({$container:L,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:g,items:l}),j.on(N.events.accordionStateChange,function(c,d){var e,f,g,h,i,j=a(this),k=j.closest(N.selectors.childRoot);k.length?(i=!0,g=j.closest(N.selectors.accordionGroup).offset(),C(g,i)):(e=j.closest(N.selectors.root),f=e.data(N.data.gradeId),d?(g=e.offset().top,i=!1,h=[b.partial(m,e),b.partial(t,f,e)],A(f,e),C(g,i,h)):(c.preventDefault(),s(f,e)))}),h&&(i=a("#"+k).find("li[data-"+N.data.sectionTargetGroup+'="'+h+'"] a'),i.trigger(N.events.deepLink))}function m(a){var b,c,d,e,f=(a.data("gradeId"),{}),g={};N.analyticsManager?(b=N.analyticsManager.trackingVars.accordionExpansion,g=N.analyticsManager.getTrackingObjectProperties(b),c=a.data("gradeTitle"),e=a.find(".grade-info .c_184 .full-price").text(),e&&(c+=" - "+e),d=a.find(N.selectors.accordionHeader+" .show-btn").text(),f[g.componentId]=Q,f[g.accordionType]=c,f[g.accordionText]=d,f[g.status]="open",N.analyticsManager.tag(b,f)):log.warn("AnalyticsManager not defined")}function n(a){return L.filter('[data-grade-id="'+a+'"]')}function o(a){return n(a).data(N.data.versionsDataError)}function p(a){return n(a).find(N.selectors.accordionPanel)}function q(a){return n(a).data(N.data.versionsDataUrl)}function r(b){return a.get(q(b),void 0,void 0,"html")}function s(a,b){var c=b.find(N.selectors.accordionButton);b.removeClass(N.classes.c_099C_2_visible),b.find(N.selectors.accordionButton).toggleClass(N.classes.open,!1),x(a),p(a).empty(),B(c,c.attr(N.data.dataShowDialog))}function t(a,c){N.window.location.hash=N.window.location.hash||c.attr(N.data.id),A(a,c),r(a).done(b.partial(u,b,a,c)).fail(b.partial(w,a,c))}function u(b,c,d){var e=d.find(N.selectors.accordionButton);z(c,d),f.init({$root:p(c).html(b),analyticsManager:N.analyticsManager,financeManager:N.financeManager,HELIOS:N.HELIOS,heliosAppContext:N.heliosAppContext,numberFormat:N.numberFormat,priceCodes:N.priceCodes,priceManager:N.priceManager,window:N.window}),J(d),v(a(N.selectors.childRoot)),B(e,e.attr(N.data.dataHideDialog)),window.picturefill(d)}function v(a){g.getDisclaimerNodes(a),g.renderDisclaimers(a)}function w(a,b){z(a,b),y(a),p(a).text(o(a))}function x(a){n(a).toggleClass(N.classes.error,!1)}function y(a){n(a).toggleClass(N.classes.error,!0)}function z(a,b){b.find(N.selectors.accordionButton).toggleClass(N.classes.loading,!1)}function A(c,d){var e=a(N.selectors.root).data(N.data.loadingText),f=d.find(N.selectors.accordionButton);f.toggleClass(N.classes.loading,!0),b.defer(function(){B(f,"",e)})}function B(a,b,c){var d,e=a.attr(N.data.dataCounterDialog)||"";d=c||e,d?a.text(b+" "+d):a.text(b)}function C(c,d,e){var f,g=parseInt(a(N.selectors.accordionHeaderParagraph).first().css(N.properties.marginBottom),10);c=c||a(N.selectors.currentAccordionOpen).closest(N.selectors.accordionGroup).offset().top,f=d?c+g:c-g,
a(N.selectors.documentReference).stop().animate({scrollTop:f},N.values.scrollAccordionClosedDuration,function(){e&&b.each(e,function(a){a()})})}function D(){var a,c,d,e,f,g=N.window.location.pathname.split("/"),h="%20",i=4,j=".";return d=new RegExp(h,"g"),a=b.last(g),-1!==a.indexOf(j)&&(c=a.split(j),c.length===i&&(c.pop(),e=b.last(c),f=e.replace(d," "))),f||""}function E(){return N.window.filterJson||a(N.selectors.gradesWrapper).data(N.data.content)}function F(){var c,d=[];return c=E(),a.isNestedProp(c,["grades","grades"])&&b.each(c.grades.grades,function(a){b.each(a.versions.versions,function(a){d.push(a)})}),d.map(function(c){var d={};return d.gradeId=b.has(c,"gradeId")?c.gradeId:N.properties.notFound,d.versionId=b.has(c,"key")?c.key:N.properties.notFound,d.bodytype=a.isNestedProp(c,["body","type","value"])?c.body.type.value:N.properties.notFound,d})}function G(c){var d=F(),e=[],f=[];return a(c).each(function(b,c){f.push(a(c).data(N.data.versionId))}),b.each(d,function(a){b.contains(f,a.versionId)&&a.bodytype===P&&e.push(a.versionId)}),e.length?e:f}function H(c,d,e){d?a(e).each(function(d,e){var f=a(e),g=f.attr(N.data.dataVersionId);f.toggleClass(N.classes.isVersionActive,b.contains(c,g))}):a(e).addClass(N.classes.isVersionActive)}function I(){var c=N.window.location.hash,d=b.last(c.split(N.helpers.urlSeparator)),e=a(N.selectors.childRoot).last().find(N.selectors.childRootSections).find(N.selectors.childRoot+N.helpers.classBinder+d).css(N.properties.height);return parseInt(e,10)}function J(b,c){var d=!1,e=N.selectors.listVersions;if(c=c||a(N.selectors.gradesWrapper).data(N.data.validVersions),c?H(c,!0,e):P?H(G(e),!0,e):H(e,!1,e),b){var f=b.attr(N.data.id)+N.helpers.urlSeparator+N.text.defaultAccordionSection;b.addClass(N.classes.c_099C_2_visible),b.find(N.selectors.accordionButton).toggleClass(N.classes.open,!0),I()&&setTimeout(function(){N.window.location.hash=N.window.location.hash||f,C("",d)},N.values.scrollAccordionOpenDuration)}}function K(a,b){var c=a.find(N.selectors.accordionButton).first(),d=c.hasClass(N.classes.open)?c.attr(N.data.dataHideDialog):c.attr(N.data.dataShowDialog);c.attr(N.data.dataCounterDialog,"("+b+")"),B(c,d,c.attr(N.data.dataCounterDialog))}var L,M,N,O,P,Q="C99C.1_Grade_Overview",R={selectors:{documentReference:"html, body",root:".c_099C-1",childRoot:".c_099C-2",childRootSections:".c_099C-2-sections",accordionPanel:"> .grade-wrapper > .accordion-group > .accordion-panel",accordionHeader:"> .grade-wrapper > .accordion-group > .accordion-header",accordionHeaderText:".show-btn",accordionHeaderParagraph:".grade-wrapper > .accordion-group > .accordion-header p",tooltipEnabled:".tooltip-enabled",accordionGroup:".accordion-group",accordionButton:"button",loadingText:".loading-text",tabHeaders:".c_099-2-section-headers > ul li",gradesWrapper:".c_099C",listVersions:".c_099C-2-overview-version",currentAccordionOpen:".c_099C-2-visible .grade-wrapper .accordion-group .accordion-panel .open",specificAccordionButton:".grade-wrapper .accordion-group .accordion-header button",toolTipEnabled:".tooltip-enabled"},events:{accordionStateChange:"accordion-state-change",click:"click",deepLink:"deepLink"},classes:{c_099C_2_visible:"c_099C-2-visible",error:"error",loading:"loading",open:"open",isVersionActive:"is-version-active"},properties:{marginBottom:"margin-bottom",notFound:"not-found",height:"height"},data:{info:"info",sectionTargetGroup:"section-target-group",validVersions:"validVersions",invalidVersions:"invalidVersions",content:"content",versionId:"versionId",id:"id",gradeId:"gradeId",versionsDataError:"versionsDataError",versionsDataUrl:"versionsDataUrl",loadingText:"loading-text",dataShowDialog:"data-show-dialog",dataHideDialog:"data-hide-dialog",dataCounterDialog:"data-counter-dialog",dataVersionId:"data-version-id"},text:{defaultAccordionSection:"overview"},values:{scrollAccordionOpenDuration:1300,scrollAccordionClosedDuration:1e3,timeout:1500},helpers:{classBinder:"-",urlSeparator:"|"},multipleOpenItemsAccordion:!1};return{init:h,getAccordionValidVersions:J,changeAccordionButtonNumberOfVersions:K}}),define("c_099C_3",["jquery","handlebars","jqueryUtilityPlugins","underscore","c_099C_1"],function(a,b,c,d,e){function f(b){var c,d;if(U=a.extend({},T,b),A=a(U.selectors.root),!A.length)return!1;K=A.find(U.selectors.labelFilter),J=A.find(U.selectors.containerRadios),G=A.find(U.selectors.inputs),I=A.find(U.selectors.btnAccordion),H=A.find(U.selectors.undoSelector),B=A.find(U.selectors.radioFilter),C=A.find(U.selectors.btnFiltersToggle),D=A.find(U.selectors.filters),E=A.find(U.selectors.filtersWrapper),F=A.find(U.selectors.countTextLabel),M=A.data(U.selectors.collapseOpen),N=A.data(U.selectors.collapseClose),L=A.find(U.selectors.filtersClose),R=A.data(U.selectors.model),Q=A.data(U.selectors.errorTitle),O=A.data(U.selectors.collapseState),d=p(),t(d.length),!0===O&&(E.addClass(U.classes.active),C.addClass(U.classes.active)),h(),u(),i(),c=U.window.location.pathname.split("/"),v(c),g()}function g(){var b=new RegExp("all","i"),c=new RegExp("[A-Z]+\\w+");d.each(B,function(d){var e=a(d),f=e.attr(U.data.dataFilterValue);b.test(f)&&c.test(f)&&e.attr(U.data.dataFilterValue,U.data.allGrades)})}function h(){B.on(U.events.click,n),C.on(U.events.click,m),H.on(U.events.click,j),I.on(U.events.click,k),L.on(U.events.click,l)}function i(){C.hasClass(U.classes.active)?C.text(N):C.text(M)}function j(b){var c=a(this),d=a(U.selectors.selectorAll);P=!0,c.hasClass(U.classes.active)&&z(this),d.prop("checked",!0),n(b,d)}function k(){var b=a(this),c=b.closest(U.selectors.filter).find(U.selectors.containerRadios);b.closest(U.selectors.categories).find(U.selectors.containerRadios).not(c).removeClass(U.classes.active),I.not(b).removeClass(U.classes.active),b.toggleClass(U.classes.active),c.toggleClass(U.classes.active),b.hasClass(U.classes.active)&&x(b)}function l(){C.trigger(U.events.click)}function m(){var b=a(this);b.toggleClass(U.classes.active),E.slideToggle(),b.hasClass(U.classes.active)?(b.text(N),y(b)):b.text(M)}function n(b,c){var d,e,f=c||a(this);q(f),J=f.parents(U.selectors.containerRadios),d=J.find(U.selectors.inputs),e=J.parent().find(U.selectors.btnAccordion),d.removeClass(U.classes.active),J.removeClass(U.classes.active),f.addClass(U.classes.active),J.removeClass(U.classes.active),e.removeClass(U.classes.active),P||(w(this),P=!1)}function o(){return U.window.filterJson?U.window.filterJson:a(U.selectors.gradesWrapper).data("content")}function p(){var b,c,d=[],e=[];return b=o(),b&&b.grades&&b.grades.grades&&b.grades.grades.forEach(function(a){for(S=0;S<a.versions.versions.length;S++)c=a.versions.versions[S],c.gradeId=a.key,e.push(c);W[a.key]=a.versions.versions.length}),e.forEach(function(b){var c={},e="not-found";c.gradeId=a.isNestedProp(b,["gradeId"])?b.gradeId:e,c.versionId=a.isNestedProp(b,["key"])?b.key:e,c.bodytype=a.isNestedProp(b,["body","type","value"])?b.body.type.value:e,c.capacity=a.isNestedProp(b,["engine","capacity","value"])?b.engine.capacity.value:e,c.fueltype=a.isNestedProp(b,["engine","fuelType","value"])?b.engine.fuelType.value:e,c.drivetrain=a.isNestedProp(b,["engine","driveTrain","value"])?b.engine.driveTrain.value:e,c.transmission=a.isNestedProp(b,["engine","transmission","gearBoxType","value"])?b.engine.transmission.gearBoxType.value:e,c.height=a.isNestedProp(b,["dimensions","height","value"])?b.dimensions.height.value:e,c.length=a.isNestedProp(b,["dimensions","length","value"])?b.dimensions.length.value:e,c.heightgroup=a.isNestedProp(b,["dimensions","heightGroup","value"])?b.dimensions.heightGroup.value:e,c.lengthgroup=a.isNestedProp(b,["dimensions","lengthGroup","value"])?b.dimensions.lengthGroup.value:e,c.volume=a.isNestedProp(b,["volume","standardLoad","value"])?b.volume.standardLoad.value:e,c.numberdoors=a.isNestedProp(b,["body","doors","value"])?b.body.doors.value:e,c.numberseats=a.isNestedProp(b,["seating","seats","value"])?b.seating.seats.value:e,c.payload=a.isNestedProp(b,["weight","maxPayload","value"])?b.weight.maxPayload.value:e,c.visible=!0,d.push(c)}),d}function q(b){var c,d,e,f;c=a(U.selectors.filter,D),d=b.siblings("label").text(),e=b.closest(c).find(K),f=p(),e.text(d),c.each(function(b,c){var d,e,g,h;g=a(U.selectors.radioFilterChecked,a(c)),d=g.parents(U.selectors.filter).data(U.attrs.dataFilterType).toLowerCase(),(e=g.data(U.attrs.dataFilterValue).toString().toLowerCase())!==U.data.allGrades.toLowerCase()&&f.forEach(function(a,b){a[d]?(h=a[d].toString().toLowerCase())!==e&&(f[b].visible=!1):f[b].visible=!1})}),r(f)}function r(b){var c,d,f=[],g={},h=[];a(U.selectors.listVersions).removeClass(U.classes.isVersionActive),b.forEach(function(a){c=a.versionId,d=a.gradeId,g[d]||(g[d]=0),a.visible&&(f.push(c),g[d]+=1)}),a.each(g,function(a,b){b&&h.push({grade:a,total:b})}),a(U.selectors.listVersions).length>0&&e.getAccordionValidVersions("",f),a(U.selectors.gradesWrapper).data("validVersions",f),s(h)}function s(b){var c=0,f=a(U.selectors.listGrades),g=[];f.removeClass(U.classes.gradeActive),f.each(function(b,c){g.push(a(c).attr(U.attrs.dataGradeId))}),d.each(b,function(b){var f=b.total,h=b.grade,i=a(U.selectors.listGrades+"["+U.attrs.dataGradeId+'="'+h+'"]');c+=b.total,i.toggleClass(U.classes.gradeActive,d.contains(g,b.grade)),e.changeAccordionButtonNumberOfVersions(i,f)}),t(c)}function t(b){var c,d;b>0?(d=A.data(U.selectors.filterText),c=a("<span>",{class:U.classes.counterFilter,text:b}),d=d.replace(/\{.*?\}\s?/g,c.prop("outerHTML")),a(U.selectors.errorGroup,A).removeClass(U.classes.loadError),a(U.selectors.undoSelector,A).removeClass(U.classes.active)):(d="",a(U.selectors.errorGroup,A).addClass(U.classes.loadError),a(U.selectors.undoSelector,A).addClass(U.classes.active)),F.html(d)}function u(){var b=a(U.selectors.filter,D);b.each(function(c,d){var e,f,g;e=a(U.selectors.radioFilterChecked,a(d)),f=e.siblings("label").text(),g=e.closest(b).find(K),g.text(f)})}function v(b){var c,e;c=b,e=/=/,d.each(c,function(b){var c,d,f;e.test(b)&&(f=b.split("="),c=A.find('[data-filter-type="'+decodeURIComponent(f[0])+'"]'),d=a('input[data-filter-value="'+decodeURIComponent(f[1].replace(".html",""))+'"]',c),d.trigger(U.events.click))})}function w(b){var c,d,e,f=a(b),g=f.text(),h="search",i=a(U.selectors.filterVersionApplied);d=i.length>0?"":Q,c=f.parents(U.selectors.filter).data(U.attrs.dataFilterType),e={componentId:V,searchFilter:c,searchFilterValue:g,searchType:"Specifications",searchResults:String(i.length),errorMessage:d},U.analyticsManager.tag(h,e)}function x(b){var c=a(b),d=c.siblings(U.selectors.filterName).text(),e={componentId:V,accordionText:d,accordionType:R};U.analyticsManager.tag("accordionExpansion",e)}function y(b){var c=a(b),d=c.text(),e={componentId:V,accordionText:d,accordionType:R};U.analyticsManager.tag("accordionExpansion",e)}function z(b){var c=a(b),d=c.text(),e={componentId:V,destination:"#",locationInPage:"Vehicle filter",buttonText:d};U.analyticsManager.tag("genericClick",e)}var A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T={events:{click:"click"},classes:{selected:"selected",active:"active",gradeActive:"grade-active",isVersionActive:"is-version-active",loadError:"load-error",counterFilter:"counter-filter"},selectors:{categories:".categories",root:".c_099C-3",listGrades:".c_099C-1",listVersions:".c_099C-2-overview-version",sectionsVersion:".c_099C-2-sections",radioFilter:".filter-radio",btnFiltersToggle:".filters-toggle",filters:".filters",filter:".filter",filterVersionApplied:".c_099C-2-overview-version.is-version-active",filterGradeApplied:".c_099C-1.grade-active",filterName:".filter-name",radioFilterChecked:"input:radio:checked",filtersWrapper:".filters-wrapper",countTextLabel:".countText",collapseState:"service-collapse",filterText:"service-showing",countVersions:".accordion-header .counterVersions",errorTitle:"error-title",model:"service-model",collapseOpen:"collapse-open",collapseClose:"collapse-close",errorGroup:".error-groups",overviewVersion:".c_099C-2-overview-version",versionSelector:".version-selector",undoSelector:".undo-button",btnAccordion:".btn-accordion",containerRadios:".container-radios",inputs:"input",labelFilter:".label-filter",filtersClose:".filters-close",gradesWrapper:".c_099C",selectorAll:'[data-filter-value="all"]'},attrs:{dataFilterType:"filterType",dataFilterValue:"filterValue",dataGradeTitle:"gradeTitle",dataGradeId:"data-grade-id"},data:{allGrades:"all",hideVersion:"hide",showVersion:"show",showAllVersions:"showAll",dataFilterValue:"data-filter-value"}},U=null,V="C99.3_Vehicle_Specifications_Filter",W={};return{init:f,defaults:T}}),define("c_103",["jquery","analyticsManager"],function(a,b){"use strict";function c(b){if(k.initRoot=a(".c_103").eq(0),!k.initRoot.length)return!1;e(b),j=a.extend({},i,b),f()}function d(a,b){var c={componentId:l,contentShown:a,socialNetwork:b,urlShared:j.window.location.href};j.analyticsManager.tag("socialShare",c)}function e(a){i.apiKey=encodeURIComponent(k.initRoot.data("share-api")),i.apiUrl=k.initRoot.data("share-url"),i.pageTitle=document.title||"",i.pageUrl=a.uniqueUrl||a.window.location.href}function f(){a(".c_103").on("click",".social-icon",g)}function g(b){var c,e=a(b.currentTarget),f=encodeURIComponent(e.data(j.attributes.name)||"Social - C_103"),g=e.closest("."+h).data(j.attributes.shortenedUrl)||j.pageUrl,i=e.closest("."+h).data(j.attributes.shareUrl)||j.pageUrl||"Unknown content";b.preventDefault(),j.apiUrl&&(!1!==j.isAnalyticsEnabled&&d(i,f),c=j.apiUrl.replace("%%pageSocial%%",f).replace("%%pageUrl%%",j.window.encodeURIComponent(g)).replace("%%pageTitle%%",j.window.encodeURIComponent(j.pageTitle)).replace("%%apiKey%%",j.apiKey),j.window.open(c,"_blank"))}var h="c_103",i={attributes:{name:"name",shareUrl:"shareUrl",shortenedUrl:"shortened-url"}},j={},k={},l="C103_Social_Shares";return{init:c}}),define("c_111",["jquery"],function(a){"use strict";function b(b){g=a.extend({},f,b),d=a(".c_111"),e=a(g.closeSelector),c()}function c(){e.on("click",function(){d.hide()})}var d,e,f={closeSelector:".close-window"},g=null;return{init:b}}),define("c_120_1",["jquery","handlebars","disclaimers","storageManager"],function(a,b,c,d){"use strict";function e(b){p=a.extend({},n,b),l=a('script[data-component="c_120-1"]'),l.length&&(HELIOS.ownerServices&&HELIOS.ownerServices.myCar&&HELIOS.ownerServices.myCar.then(function(b){g(b),j(b),k=a(p.selectors.root),i(),c.renderDisclaimers(k)}),HELIOS.ownerServices&&HELIOS.ownerServices.dashboard&&HELIOS.ownerServices.dashboard.then(function(b){f(b),c.renderDisclaimers(a(p.selectors.root))}))}function f(a){(a.vehicles.owned||a.vehicles.ordered)&&(a.vehicles.owned.length||a.vehicles.ordered.length)||g(a)}function g(a){var c=l.html(),d=b.compile(c),e=d(a);l.after(e),window.picturefill(l)}function h(b){var c,d=p.analyticsManager,e=a(b.currentTarget),f="not-found",g=p.analyticsManager.trackingVars.genericClick;HELIOS.ownerServices&&HELIOS.ownerServices.myCar&&HELIOS.ownerServices.myCar.then(function(a){f=a.vehicleName}),c={componentId:o,buttonText:e.text(),locationInPage:"os-manuals guides-"+f.toLowerCase().split(" ")[0],destination:e.attr("href"),vehicleModel:f},d.tag(g,c)}function i(){k.find(p.selectors.ctaButton).on(p.events.click,h)}function j(b){m=a(".c_120-1 .show-maintenance"),m.length&&(d.init(),m.on(p.events.click,function(a){d.saveItem("c_120-1",{vin:b.vin,name:b.vehicleName})}))}var k,l,m,n={selectors:{root:".c_120-1",ctaButton:"a"},events:{click:"click"}},o="C120-1_Signpost",p=null;return{init:e,verifyForRendering:f}}),define("c_124",["jquery"],function(a){"use strict";function b(a){}return{init:b}}),define("c_125",["jquery","handlebars","disclaimers","urlParameterDecoder"],function(a,b,c,d){"use strict";function e(b){O=a.extend({},L,b),K=O.HELIOS.adobe.tagging.componentId,u=a(O.selectors.root),u.length&&(d.init(),H=d.getUrlParams(),f(),I?j(I):v.removeClass(O.classes.loading),g())}function f(){A=u.find(O.selectors.template),v=u.find(O.selectors.resultsWrapper),w=u.find(O.selectors.noResults),x=u.find(O.selectors.searchForm),y=u.find(O.selectors.loadMore),z=y.find("button"),C=u.data("searchUrl"),I=H.query,F=u.data("resultsPerPage")}function g(){z.on("click",function(b){var c=a(b.target);c.addClass(O.classes.ajaxBtnLoading),j(I),t(c)}),u.on("click",O.selectors.resultsWrapper,function(b){s(a(b.target))}),I&&(J=I.replace(/(<([^>]+)>)/gi,""),x.find("input").attr("placeholder",J)),h()}function h(){x.submit(function(a){a.preventDefault(),m()})}function i(a){var b=new RegExp("[?&]"+a+"=([^&]*)").exec(E);return b&&decodeURIComponent(b[1].replace(/\+/g," "))}function j(b){D={m_results_per_page:F,r:F,q:b},E&&(D=a.extend({},D,{page:i("page",E)})),a.ajax({url:C,dataType:"jsonp",jsonpCallback:"searchResultsCallback",data:D}).done(function(a){k(a)}).fail(l)}function k(a){if(v.removeClass(O.classes.loading),M&&r(a.results.length,a.resultcount.total),!a.results.length)return w.removeClass(O.classes.hide),q(),void(M=!1);p(a),c.renderDisclaimers(v)}function l(){z.removeClass(O.classes.ajaxBtnLoading),v.removeClass(O.classes.loading),w.removeClass(O.classes.hide),r(0)}function m(){I=x.find(O.selectors.searchBar).val(),E="",M=!0,w.addClass(O.classes.hide),v.addClass(O.classes.loading),q(),j(I)}function n(b){a.each(b.results,function(a,c){var d=b.general.query,e=new RegExp("(\\s)*"+d+"(\\s|^\\.|$)*","ig");e&&(c.body=c.body.replace(e,function(a){return"<strong>"+a+"</strong>"}))})}function o(b){a.each(b.results,function(a,b){(G=u.data("resultsChar"))&&(b.body=b.body.slice(0,G))})}function p(a){E=a.pagination.next,B=b.compile(A.html(),{noEscape:!0}),w.addClass(O.classes.hide),o(a),n(a),M?(v.html(B(a)),M=!1):(v.append(B(a)),z.removeClass(O.classes.ajaxBtnLoading)),E?y.addClass(O.classes.show):y.removeClass(O.classes.show)}function q(){v.html(""),y.removeClass(O.classes.show)}function r(a,b){var c,d,e="search";c=0===a?w.find("p").text():"",d={componentId:K,action:O.HELIOS.adobe.tagging.action,searchType:O.HELIOS.adobe.tagging.searchType,searchTerm:I,searchResults:""+b,errorMessage:c},N?(d.componentId=K,O.analyticsManager.tag(e,d)):(N=!0,O.analyticsManager.append(e,d))}function s(a){var b=a,c=b.attr("href")||"",d=b.text(),e={componentId:K,destination:c,locationInPage:"Site search results",buttonText:d};O.analyticsManager.tag("genericClick",e)}function t(a){var b=a,c=b.text(),d={componentId:K,contentAction:"Show more",destination:"#",locationInPage:"Site search results",buttonText:c};O.analyticsManager.tag("buttonNoCookie",d)}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L={classes:{show:"show",hide:"hide",loading:"loading",ajaxBtnLoading:"ajax-btn-loading"},selectors:{root:".c_125",searchForm:".c_124 form",template:"script[data-template='c_125']",resultsWrapper:".search-results",noResults:".no-results",loadMore:".show-more",resultsCopy:".result-text",searchBar:".search-bar",ctaButton:".c_124 .btn-search"}},M=!0,N=!1,O=null;return{init:e}}),define("c_128",["jquery","storageManager","handlebars","waypoints"],function(a,b,c,d){"use strict";function e(){n=a(p.classes.cookiesTemplate),n.length&&(k=a(p.classes.cookiesTemplate).html(),l=c.compile(k)),m=a(p.classes.cookiesTemplate).data(p.selectors.brandString),r=f(),b.init({defaultLifetime:q}),s.mode=r?"localStorage":"cookie",!(j=b.loadItem(m,s))&&n.length&&(a(p.selectors.body).addClass("cookie-enabled").prepend(l()),i=a(o),a(p.selectors.button).on(p.events.click,h))}function f(){try{return localStorage.setItem("test","test"),!0}catch(e){return!1}}function g(){i.remove(),Waypoint.refreshAll()}function h(){j=!0,b.saveItem(m,j,s),i.find(p.classes.cookieContent).addClass(p.classes.closed),i.trigger("cookies.removed"),g(),a(p.selectors.body).removeClass("cookie-enabled")}var i,j,k,l,m,n,o=".c_128",p={selectors:{body:"body",button:".c_128 button",brandString:"brand"},classes:{cookiesTemplate:".template-cookies",closed:"closed",cookieContent:".cookies-content"},events:{click:"click"+o,transition:"transitionend"+o}},q=365,r=!1,s={};return{init:e}}),define("c_129",["jquery","modal"],function(a,b){"use strict";function c(){var c;if(d=a.extend(!0,{},e),c=a(d.selectors.root),!c.length)return!1;a("[data-modal]").length>0&&new b({openSelector:"[data-modal]",defaultInstance:!0})}var d,e={selectors:{root:".c_129"}};return{init:c}}),define("c_001B",["jquery","accordion","accordionItem"],function(a,b,c){"use strict";var d;return d=function(a,b){this.settings=this.initSettings(b),this.$el=a,this.$accordion=this.$el.find(this.settings.selectors.accordion),this.setupMultipleAccordion(),this.bindEvents()},d.prototype.initSettings=function(b){var c={selectors:{accordion:".accordion",accordionHeader:".accordion-header",accordionPanel:".accordion-panel",cta:".cta-list a",c001:".c_001",spanTitle:"h2 span"},accordionItem:{$contentElement:null,$headerElement:null,isDisabled:!1,transitionToOpen:"toggle",transitionToClose:"toggle"},events:{toggleAccordion:"toggle.accordion",click:"click"},trackingObject:{componentId:"C1-B_Contact_us_Accordion",contentAction:"show more",locationInPage:"action-panel",buttonText:""},classes:{expanded:"expanded"},attributes:{collapsed:"accordion-collapsed-text",expanded:"accordion-expanded-text"}};return a.extend({},c,b)},d.prototype.setupMultipleAccordion=function(){this.$accordion.each(this.setupSingleAccordion.bind(this))},d.prototype.setupSingleAccordion=function(c,d){this.accordionItems=a(d).map(this.setUpAccordionItem.bind(this)),new b({$container:a(this.settings.selectors.accordion),isScrollOnOpenEnabled:!1,items:this.accordionItems})},d.prototype.setUpAccordionItem=function(b,d){return new c(this.getItemProperties(a(d)))},d.prototype.getItemProperties=function(a){var b=this.settings.accordionItem;return b.$contentElement=a.find(this.settings.selectors.accordionPanel),b.$headerElement=a.find(this.settings.selectors.accordionHeader),b},d.prototype.bindEvents=function(){this.accordionItems.each(this.bindHeaderEvents.bind(this)),this.$el.find(this.settings.selectors.cta).on(this.settings.events.click,this.handleClick.bind(this))},d.prototype.bindHeaderEvents=function(a,b){b.options.$headerElement.on(this.settings.events.toggleAccordion,this.toggleAccordionHandler.bind(this))},d.prototype.toggleAccordionHandler=function(b){var c=a(b.currentTarget);c.toggleClass(this.settings.classes.expanded),c.hasClass(this.settings.classes.expanded)?(c.text(c.data(this.settings.attributes.collapsed)),this.settings.trackingObject.buttonText=c.html(),this.settings.analyticsManager.tag(this.settings.analyticsManager.trackingVars.buttonNoCookie,this.settings.trackingObject)):c.text(c.data(this.settings.attributes.expanded))},d.prototype.handleClick=function(b){var c=a(b),d=c.parents().eq(2).find(this.settings.selectors.spanTitle).text()+"|"+c.text(),e=b.href,f=this.settings.trackingObject;c.closest(this.settings.selectors.c001).length||(f.destination=e,f.buttonText=d,this.settings.analyticsManager.tag(this.settings.analyticsManager.trackingVars.buttonNoCookie,f))},d}),define("c_023_2",["jquery","waypoints","trackingCodes"],function(a,b,c){"use strict";function d(b){if(w=a.extend({},v,b),n=a(w.selectors.root),!n.length)return!1;q=n.find(w.selectors.dockedNav),s=a(w.selectors.gradePageComponent),t=s.find(w.selectors.gradeCarSelector),o=a(w.selectors.parent),u=n.height(),r=a(),e();for(var c=0;c<w.selectors.navSecondLevel.length;c++)if(p=a(w.selectors.navSecondLevel[c]),p.length){var d=w.selectors.navSecondLevel[c].substring(1);return n.addClass("below-"+d),void h()}}function e(){w.window.onload=function(){var b=document.location.hash;b&&a('a[href="'+b+'"]').trigger(w.events.click)},n.find("a").on(w.events.click,f)}function f(b){var c=a(b.currentTarget),d=a(c.attr("href"));r=d,d.length&&(b.preventDefault(),m()),c.hasClass(w.classes.active)||_.isUndefined(b.originalEvent)||g(b.currentTarget)}function g(b){var d=a(b),e=d.text(),f=b.href,g=w.analyticsManager.trackingVars.buttonNoCookie,h={};h[c.trackingVars.buttonNoCookie.componentId]=c.componentIds.c023_2Anchor_Links_Panel,h[c.trackingVars.buttonNoCookie.destination]=f,h[c.trackingVars.buttonNoCookie.locationInPage]="header-links",h[c.trackingVars.buttonNoCookie.buttonText]=e.trim(),h[c.trackingVars.buttonNoCookie.contentAction]="anchor links",w.analyticsManager.tag(g,h)}function h(){if(!q.length)return!1;new Waypoint({element:n,handler:i,offset:25})}function i(b){"up"===b&&(r=a()),a("html,body").stop(),s.length?(q.addClass(w.classes.navFixed),p.addClass(w.classes.isNavSticky),o.addClass(w.classes.isNavSticky)):(q.toggleClass(w.classes.navFixed),p.toggleClass(w.classes.isNavSticky),o.toggleClass(w.classes.isNavSticky)),j(),m()}function j(){var a=q.length&&"fixed"===q.css("position")?u:"auto";q.parent().height(a)}function k(a){var b=a.find(w.selectors.hr);return b.length?l(b,b.outerHeight()):l(a,0)}function l(a,b){var c=0;return a.addClass(w.classes.topOffset),c=parseInt(a.css(w.attributes.marginTop),10)+b,a.removeClass(w.classes.topOffset),c}function m(){var b,c=0,d=a(w.selectors.dockedNavContainer).height()||0,e=r.find(w.selectors.sectionHeadingComponent).outerHeight()/2;s.length&&(e<0&&(e=0),d+=t.outerHeight(!0)+e),r.length&&(a(w.selectors.navFixed).each(function(){c+=a(this).height()}),b=parseInt(r.position().top,10)+k(r)-d,"fixed"===q.css("position")&&(b-=c),a("html, body").animate({scrollTop:b}))}var n,o,p,q,r,s,t,u,v={selectors:{parent:".c_023",root:".c_023-2",navSecondLevel:[".c_046",".c_046B"],gradePageComponent:".c_221",gradeCarSelector:".car-selector",sectionHeadingComponent:".c_004",dockedNav:".docked-nav-wrapper",dockedNavContainer:".docked-nav-container",navFixed:".nav-fixed",hr:"hr"},classes:{navFixed:"nav-fixed",isNavSticky:"is-sticky-nav",active:"active",contentDivider:"content-divider",topOffset:"top-offset"},events:{click:"click.c_023_2"},attributes:{marginTop:"margin-top"}},w=null;return{init:d,scrollNav:h,initStickyNav:i,defaults:v}}),define("c_024",["jquery","contentCarousel"],function(a,b){"use strict";function c(b,c){var d=o.analyticsManager,e=a(b.$slides.get(c)),f=a.trim(e.find("h2 span").text()),g=c+1+"/"+b.$slides.length,h={componentId:n,promoText:f,interactionType:"carousel slider",itemNumber:g};d.tag("carouselInteraction",h)}function d(b){var c=a(b.target),d=c.closest(o.slide),e=c.text(),f=c.attr("href"),g=a.trim(d.find("h2 span").text()),h=o.analyticsManager,i={componentId:n,promoText:g,locationInPage:"content-carousel",buttonText:e,destination:f};h.tag("carouselButtonClick",i)}function e(b,d){var e=a(b.$slides.get(d));if(c(b,d),a(document).trigger("afterSlickSlideChange"),i.find(o.selectors.c_28_6).each(function(b,c){a(c).find(".video")[0].pause()}),e.find(o.selectors.c_28_6).length){var f=e.find(o.selectors.c_28_6);if(f.data("autoplay")){var g=f.find(".video")[0];f.attr("data-pause")?g.pause():g.play()}}}function f(a,b,c){b!==c&&e(a,c)}function g(){i.find(o.cta).on(o.events.click,d)}function h(c){o=a.extend(!0,{},m,c),i=a(o.root),j=a(o.html),i.length&&("rtl"===j.attr("dir")&&(o.slick.rtl=!0),a(o.root).each(function(c,d){var e=a(d).find(o.el);e.length>0&&b.init(e,o)}),g())}var i,j,k=580,l="c_024",m={root:".c_024",html:"html",el:".slick-carousel",contentSelect:".slick-slide .grid-row",customPagingSelect:".slick-custom-paging",cta:".cta-link",slide:".slick-slide",slideLimit:!1,setItemHeight:!0,attr:{prefix:"data-prefix",separator:"data-separator",suffix:"data-suffix"},events:{click:"click."+l},selectors:{c_28_6:".c_028-6"},addFiller:!1,slick:{cssEase:"ease-in-out",onInit:b.onInstanceInit,onBeforeChange:f,dots:!0,adaptiveHeight:!0,speed:400,infinite:!0,rtl:!1,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:k,settings:{cssEase:"ease-in-out",onInit:b.onInstanceInit,dots:!0,speed:300,slidesToShow:1,slidesToScroll:1}}]}},n="C24_Content_Carousel",o=null;return{init:h}}),define("c_057",["jquery","validation"],function(a,b){"use strict";function c(b){if(k=a.extend({},i,b),j=a(k.root),g=j.find("form").attr("data-form-name"),h=j.attr("data-vehicle-model"),!j.length)return!1;e(),d()}function d(){var b=j.find("form"),c=j.find("form fieldset").children();b.find('button[type="submit"]');if(!c.length)return!1;a.each(c,function(b,c){var d=a(this);a(this).find("*[name]").change(function(){var c=a(this).attr("name"),e="Step "+(b+1);setTimeout(function(){var a=d.find(".error-message"),b=a.text();a.length?f(c,e,b):f(c,e)},50)})}),b.on("submit",function(){f("submit","finalStep")})}function e(){var a={submitButtonSelector:'.submit-form button[type="submit"]',validation:{rules:{email:{email:!1}}}},c=j.find("form:eq(0)");new b(c,a)}function f(a,b,c){var d={componentId:k.HELIOS.adobe.tagging.componentId,formName:g,vehicleModel:h,formStepName:a,formStepNumber:b,errorMessage:c};k.analyticsManager.tag(k.trackingVar,d)}var g,h,i={root:".c_057",componentId:"C57_Request_A_Call_Back",trackingVar:"formSteps"},j=null,k=null;return{init:c}}),define("c_131",["jquery"],function(a){"use strict";function b(){var b,e,f,g,h=a(d.container);return!!h.length&&(b=h.attr(d.attrs.vendorURL)||"",e=h.attr(d.attrs.moduleURL)||"",!(!b.length||!e.length)&&(f=a.ajax(b,d.ajaxSettings),g=a.ajax(e,d.ajaxSettings),void a.when(f,g).then(c)))}function c(){a(d.container).trigger(d.evts.loaded)}var d={container:".c_131",ajaxSettings:{dataType:"script",cache:!0},attrs:{vendorURL:"data-asset-object2vr-vendor-url",moduleURL:"data-asset-visualizer-lib-url"},evts:{loaded:"loaded.visualizer-api"}};return{init:b}}),define("c_031B",["jquery","colorPicker"],function(a,b){"use strict";function c(c){return g=a.extend({},h,c),a(".c_031B").each(function(){var c=a(this);c.find(g.selectorColorSelector).each(function(a,d){var e=new b(g.colorpicker,c);f.push(e)})}),f}function d(a){var b=a.children(),c=b.parents(".c_031B"),d=c.children(".c_031"),e=c.data("component-id"),f="colour-picker",h=b.attr("alt"),i=d.data("vehicle-model"),j=d.data("vehicle-id"),k=d.data("vehicle-category"),l=g.analyticsManager,m={componentId:e,colour:h,interactionType:f,vehicleModel:i,vehicleId:j,vehicleCategory:k};l.tag("colourPicker",m)}function e(b){var c=this,e=a(".image-pan",c.$component).first().data("ImagePan"),f=a(".image-pan-image");0!==b.parent().not(".selected").length&&d(b),f.replaceWith(c.getTemplate()),e.options.$container.trigger("resize")}var f=[],g=null,h={selectorColorSelector:".color-selection-panel",colorpicker:{updateActiveImageHandler:e}};return{init:c}}),define("hbars!/components/c_136/html/mainView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n\t\t<a href="',(e=c.link)?d=e.call(a,{hash:{},data:b}):(e=a&&a.link,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'" ',d=c.if.call(a,a&&a.linkTarget,{hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+=">",(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</a>\n\t"}function g(a,b){return'target="_blank"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div class="heading-group">\n    <h2><span>',(i=c.strapline)?h=i.call(b,{hash:{},data:e}):(i=b&&b.strapline,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"</span></h2>\n    <p><span>",(i=c.title)?h=i.call(b,{hash:{},data:e}):(i=b&&b.title,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'</span></p>\n</div>\n\n\x3c!-- categories --\x3e\n<div class="categories-tab-view"></div>\n\n\x3c!-- categories --\x3e\n<div class="categories-dropdown-view custom-selectbox custom-selectbox-form"></div>\n\n\x3c!-- vehicle Carousel --\x3e\n<div class="vehicle-view"></div>\n\n\x3c!-- footer --\x3e\n<div class="footer-link">\n\t',h=c.if.call(b,b&&b.label,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+="\n</div>\n"})}),define("C_136_CONSTANTS",[],function(){"use strict";return{APPLICATION:{REGIONS:{TITLE:"titleView"},SELECTORS:{TITLE:".title-view"},ERRORS:{NOT_DEFINED:"Undefined"},PROPERTIES:{NAME:"Helios Vehicle Range Promotion Carousel"}},EVENTS:{CAROUSEL:{INITIALIZE:"carousel:initialize",SLIDE_CHANGE:"carousel:slideChange",FILTER_CHANGE:"carousel:filterChange"},BACKBONE:{CHANGE:"change"}},ANALYTICS:{CATEGORY:{
COMPONENT_ID:"C136.2_Category_Component",TOGGLE_TYPE:"range promotion:category"},CAROUSEL:{COMPONENT_ID:"C136.3_Carousel_Stage",LINKS:{LOCATION_IN_PAGE:"range promotion:carousel stage",BUTTON_TEXT:{TITLE:"(item %index%) %model%",CTA:"(item %index%) %model%:%cta.linkText%"}},NAVIGATION:{CAROUSEL_TYPE:"normal",INTERACTION_TYPE:"range promotion:carousel stage",ITEM_NUMBER:"%index%/%total%"}},THUMBNAILS:{COMPONENT_ID:"C136.4_Thumbnail_Tray",TOGGLE_TYPE:"range promotion:thumbnail tray"},CTA_TRAY:{COMPONENT_ID:"C136.5_CTA_Tray",LOCATION_IN_PAGE:"range promotion:CTA tray"}}}}),define("c_136_MainView",["jquery","marionette","hbars!/components/c_136/html/mainView","C_136_CONSTANTS"],function(a,b,c,d){"use strict";var e=d.APPLICATION.REGIONS,f=d.APPLICATION.SELECTORS;return b.LayoutView.extend({template:c,regions:{vehicleRegion:".vehicle-view",categoryRegionTab:".categories-tab-view",categoryRegionDropdown:".categories-dropdown-view"},initialize:function(a){this.options=a,this.window=a.window},initRegions:function(){var a={};a[e.TITLE]=f.TITLE,this.addRegions(a)}})}),define("c_136_CategoryModel",["backbone"],function(a){"use strict";return a.Model.extend({isEnabled:function(){return this.get("enabled")},setEnabled:function(a){this.set("enabled",this.getCategory()===a)},getId:function(){return this.get("id")},getCategory:function(){return this.get("category")},getLabel:function(){return this.get("label")}})}),define("c_136_CategoryCollection",["underscore","backbone","c_136_CategoryModel"],function(a,b,c){"use strict";return b.Collection.extend({model:c,initialize:function(a,b){this.options=b||{}},parse:function(b){var c=b.categories;return a.first(c)&&(a.first(c).enabled=!0),c},setEnabledCategory:function(b){var c=this.models;b&&a.invoke(c,function(){this.setEnabled(b)})},getEnabledCategory:function(){return this.findWhere({enabled:!0})}})}),define("c_136_VehicleModel",["backbone"],function(a){"use strict";return a.Model.extend({isEnabled:function(){return this.get("enabled")},setEnabled:function(a){this.set("enabled",this.getModelId()===a)},getModelId:function(){return this.get("modelid")},getModel:function(){return this.get("model")},getCategory:function(){return this.get("category")},getCta:function(){return this.get("cta")}})}),define("c_136_VehicleCollection",["underscore","backbone","c_136_VehicleModel"],function(a,b,c){"use strict";return b.Collection.extend({model:c,initialize:function(a,b){this.options=b||{}},parse:function(b){return a.chain(b.categories).map(function(b){return a.each(b.models,function(a){a.category=b.category}),b}).pluck("models").flatten(!0).each(function(a){var b=this.options.optionalSettings;a.pricing.formattedPrice=this.options.numberFormat.asCurrency(a.pricing.startingPrice),a.showCTA=b.showModelCta,a.showModelPrice=b.showModelPrices,a.showPriceDisclaimer=b.showPriceDisclaimer,a.showPriceDescription=b.showPriceDescription,a.isPriceSymbolEnabledForModel=b.isPriceSymbolEnabledForModel,a.startingPriceSymbol=b.startingPriceSymbol,a.thumbnailText=this.options.thumbnailText,a.tooltip={tooltipMy:"top center",tooltipAt:"bottom right",tooltipID:"vehicle-carousel-pricing-tooltip-"+a.id,tooltipContent:a.pricing.disclaimer,tooltipLabel:a.pricing.disclaimerLabel,tooltipIcon:"asterisk"}},this).value()},setEnabledModel:function(b){var c=this.models;a.invoke(c,function(){this.setEnabled(b)})},getEnabledModel:function(){return this.find(function(a){return a.isEnabled()})},getEnabledModelCategory:function(){var a=this.getEnabledModel();return a?a.getCategory():null},getModelsByCategory:function(a){return this.where({category:a})}})}),define("c_136_CategoryItemViewBase",["jquery","backbone","marionette"],function(a,b,c){"use strict";return c.ItemView.extend({modelEvents:{change:"updateSelection"},attributes:function(){var a;return this.model&&(a={value:this.model.getCategory()},this.model.isEnabled()&&(a.selected="selected")),a},updateSelection:function(){this.$el.attr("selected",this.model.isEnabled())}})}),define("hbars!/components/c_136/html/categoriesViewTab",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<button type="button">',(g=c.label)?f=g.call(b,{hash:{},data:e}):(g=b&&b.label,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h+=i(f)+"</button>\n"})}),define("c_136_CategoryItemViewTab",["jquery","backbone","marionette","c_136_CategoryItemViewBase","hbars!/components/c_136/html/categoriesViewTab"],function(a,b,c,d,e){"use strict";return d.extend({template:e,tagName:"li",events:{click:"onCategoryClick"},onCategoryClick:function(a){this.model.set("enabled",!0)}})}),define("c_136_CategoryCollectionViewTab",["backbone","marionette","c_136_CategoryItemViewTab"],function(a,b,c){"use strict";return a.Marionette.CollectionView.extend({tagName:"ul",className:"categories",childView:c})}),define("hbars!/components/c_136/html/categoriesViewDropdown",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h=this.escapeExpression;return(g=c.label)?f=g.call(b,{hash:{},data:e}):(g=b&&b.label,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h(f)})}),define("c_136_CategoryItemViewDropdown",["jquery","backbone","marionette","c_136_CategoryItemViewBase","hbars!/components/c_136/html/categoriesViewDropdown"],function(a,b,c,d,e){"use strict";return d.extend({template:e,tagName:"option"})}),define("hbars!/components/c_136/html/categoriesViewCustomDropdown",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<select></select>\n<span class="selectedValue">',(g=c.enabledCategory)?f=g.call(b,{hash:{},data:e}):(g=b&&b.enabledCategory,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h+=i(f)+"</span>"})}),define("c_136_CategoryCompositeViewDropdown",["jquery","backbone","marionette","customSelect","c_136_CategoryItemViewDropdown","hbars!/components/c_136/html/categoriesViewCustomDropdown"],function(a,b,c,d,e,f){"use strict";return b.Marionette.CompositeView.extend({template:f,className:"categories-mobile",childView:e,childViewContainer:"select",events:{change:"onCategoryChange"},ui:{selectedValue:".selectedValue"},serializeData:function(){return{enabledCategory:this.collection.getEnabledCategory().getLabel()}},onShow:function(){d.init(this.$el)},onCategoryChange:function(a){this.collection.at(a.target.selectedIndex).set("enabled",!0),this.ui.selectedValue.text(this.collection.getEnabledCategory().getLabel())}})}),define("hbars!/components/c_136/html/vehicleView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var e,f="";return f+='\n        <figure class="car-image">\n            ',e=r.invokePartial(d["c_029-1"],"c_029-1",a,c,d,b),(e||0===e)&&(f+=e),f+="\n        </figure>\n        "}function g(a,b){var d,e="";return e+="\n                ",d=c.if.call(a,(d=a&&a.pricing,null==d||!1===d?d:d.disclaimerLabel),{hash:{},inverse:r.noop,fn:r.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function h(a,b){var e,f="";return f+="\n                    ",e=r.invokePartial(d.c_008,"c_008",a&&a.tooltip,c,d,b),(e||0===e)&&(f+=e),f+="\n                "}function i(a,b){var d,e="";return e+="\n                ",d=c.if.call(a,(d=a&&a.pricing,null==d||!1===d?d:d.startingPrice),{hash:{},inverse:r.noop,fn:r.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function j(a,b){var d,e="";return e+='\n                    <span class="car-price">'+t((d=a&&a.pricing,d=null==d||!1===d?d:d.formattedPrice,typeof d===s?d.apply(a):d))+" ",d=c.if.call(a,a&&a.isPriceSymbolEnabledForModel,{hash:{},inverse:r.noop,fn:r.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+="</span>\n                "}function k(a,b){var d,e;return(e=c.startingPriceSymbol)?d=e.call(a,{hash:{},data:b}):(e=a&&a.startingPriceSymbol,d=typeof e===s?e.call(a,{hash:{},data:b}):e),t(d)}function l(a,b){var c,d="";return d+='\n                <span class="car-price-description">',c=a&&a.pricing,c=null==c||!1===c?c:c.description,c=typeof c===s?c.apply(a):c,(c||0===c)&&(d+=c),d+="</span>\n            "}function m(a,b){var d,e="";return e+="\n            ",d=c.if.call(a,(d=a&&a.cta,null==d||!1===d?d:d.linkText),{hash:{},inverse:r.noop,fn:r.program(13,n,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function n(a,b){var c,d="";return d+='\n                <a href="'+t((c=a&&a.cta,c=null==c||!1===c?c:c.linkPath,typeof c===s?c.apply(a):c))+'" class="cta">'+t((c=a&&a.cta,c=null==c||!1===c?c:c.linkText,typeof c===s?c.apply(a):c))+"</a>\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var o,p,q="",r=this,s="function",t=this.escapeExpression;return q+='<div class="grid-row">\n    <div class="col-12">\n        ',o=c.if.call(b,b&&b.images,{hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e}),(o||0===o)&&(q+=o),q+='\n        <div class="pricing-group">\n            <h3 class="car-name">\n                <a href="',(p=c.modelPagePath)?o=p.call(b,{hash:{},data:e}):(p=b&&b.modelPagePath,o=typeof p===s?p.call(b,{hash:{},data:e}):p),q+=t(o)+'">',(p=c.model)?o=p.call(b,{hash:{},data:e}):(p=b&&b.model,o=typeof p===s?p.call(b,{hash:{},data:e}):p),q+=t(o)+'</a>\n            </h3>\n            <p class="strapline">',(p=c.strapline)?o=p.call(b,{hash:{},data:e}):(p=b&&b.strapline,o=typeof p===s?p.call(b,{hash:{},data:e}):p),(o||0===o)&&(q+=o),q+="</p>\n            ",o=c.if.call(b,b&&b.showPriceDisclaimer,{hash:{},inverse:r.noop,fn:r.program(3,g,e),data:e}),(o||0===o)&&(q+=o),q+="\n            ",o=c.if.call(b,b&&b.showModelPrice,{hash:{},inverse:r.noop,fn:r.program(6,i,e),data:e}),(o||0===o)&&(q+=o),q+="\n            ",o=c.if.call(b,b&&b.showPriceDescription,{hash:{},inverse:r.noop,fn:r.program(10,l,e),data:e}),(o||0===o)&&(q+=o),q+="\n        </div>\n        ",o=c.if.call(b,b&&b.showCTA,{hash:{},inverse:r.noop,fn:r.program(12,m,e),data:e}),(o||0===o)&&(q+=o),q+="\n    </div>\n</div>\n"})}),define("c_136_VehicleItemView",["backbone","marionette","underscore","hbars!/components/c_136/html/vehicleView","pictureFill"],function(a,b,c,d,e){"use strict";return b.ItemView.extend({template:d,className:"slick-slide",initialize:function(){e(this.$el.get(0))}})}),define("hbars!/components/c_136/html/thumbnailView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n    ",d=c.if.call(a,(d=a&&a.pricing,null==d||!1===d?d:d.startingPrice),{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n  "}function g(a,b){var d,e,f="";return f+='\n\t    <span class="model-price"><span>',(e=c.thumbnailText)?d=e.call(a,{hash:{},data:b}):(e=a&&a.thumbnailText,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+"</span> "+m((d=a&&a.pricing,d=null==d||!1===d?d:d.formattedPrice,typeof d===l?d.apply(a):d))+" ",d=c.if.call(a,a&&a.isPriceSymbolEnabledForModel,{hash:{},inverse:n.noop,fn:n.program(3,h,b),data:b}),(d||0===d)&&(f+=d),f+="</span>\n\t  "}function h(a,b){var d,e;return(e=c.startingPriceSymbol)?d=e.call(a,{hash:{},data:b}):(e=a&&a.startingPriceSymbol,d=typeof e===l?e.call(a,{hash:{},data:b}):e),m(d)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this;return k+='<div class="thumbnail" data-model=',(j=c.model)?i=j.call(b,{hash:{},data:e}):(j=b&&b.model,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+">\n\t<img src=",(j=c.thumbnailImage)?i=j.call(b,{hash:{},data:e}):(j=b&&b.thumbnailImage,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+' />\n\t<span class="model-name">',(j=c.model)?i=j.call(b,{hash:{},data:e}):(j=b&&b.model,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+"</span>\n\t",i=c.if.call(b,b&&b.showModelPrice,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+="\n</div>\n"})}),define("hbars!/components/c_029-1/html/c_029-1",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n            <span data-src="',(e=c.src)?d=e.call(a,{hash:{},data:b}):(e=a&&a.src,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'" ',d=c.if.call(a,a&&a.media,{hash:{},inverse:o.noop,fn:o.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+=" ",d=c.if.call(a,a&&a.density,{hash:{},inverse:o.noop,fn:o.program(4,h,b),data:b}),(d||0===d)&&(f+=d),f+="></span>\n        "}function g(a,b){var d,e,f="";return f+='data-media="',(e=c.media)?d=e.call(a,{hash:{},data:b}):(e=a&&a.media,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'"'}function h(a,b){var d,e,f="";return f+='data-density="',(e=c.density)?d=e.call(a,{hash:{},data:b}):(e=a&&a.density,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'"'}function i(a,b){var d,e,f="";return f+='\n        <p class="disclaimer">',(e=c["image-disclaimer"])?d=e.call(a,{hash:{},data:b}):(e=a&&a["image-disclaimer"],d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</p>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this;return l+='<span class="c_029-1">\n    <span class="picture-element" data-alt="',(k=c.alt)?j=k.call(b,{hash:{},data:e}):(k=b&&b.alt,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" data-title="',(k=c.title)?j=k.call(b,{hash:{},data:e}):(k=b&&b.title,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'">\n        ',j=c.each.call(b,b&&b.images,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),l+='\n        <noscript>\n            <img alt="',(k=c.alt)?j=k.call(b,{hash:{},data:e}):(k=b&&b.alt,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" title="',(k=c.alt)?j=k.call(b,{hash:{},data:e}):(k=b&&b.alt,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" src="'+n((j=b&&b.images,j=null==j||!1===j?j:j[0],j=null==j||!1===j?j:j.src,typeof j===m?j.apply(b):j))+'" />\n        </noscript>\n    </span>\n    ',j=c.if.call(b,b&&b["image-disclaimer"],{hash:{},inverse:o.noop,fn:o.program(6,i,e),data:e}),(j||0===j)&&(l+=j),l+="\n</span>\n"})}),define("c_136_VehicleCollectionView",["jquery","underscore","backbone","marionette","handlebars","contentCarousel","c_136_VehicleItemView","C_136_CONSTANTS","hbars!/components/c_136/html/thumbnailView","hbars!/components/c_008/html/c_008","c_008","hbars!/components/c_029-1/html/c_029-1","pictureFill"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=h.EVENTS;return c.Marionette.CollectionView.extend({tagName:"div",className:"slick-carousel",childView:g,defaults:{slick:{dots:!0,initialSlide:0,rtl:"rtl"===a("html").attr("dir")}},initialize:function(){e.registerPartial("c_008",j),e.registerPartial("c_029-1",l),this.filtered=!1,b.bindAll(this,"generateThumbnail","onCarouselInit","onCarouselSlideChangeRequest","onCarouselSlideChange")},onShow:function(){this.initialCategoryModels=this.collection.getModelsByCategory(this.collection.getEnabledModelCategory()),this.initialModel=this.collection.getEnabledModel();var b=a.extend(!0,this.defaults,{slick:{customPaging:this.generateThumbnail,onBeforeChange:this.onCarouselSlideChangeRequest,onAfterChange:this.onCarouselSlideChange,initialSlide:this.initialCategoryModels.indexOf(this.initialModel)}});f.init(this.$el,b).then(this.onCarouselInit)},onCarouselInit:function(){this.trigger(n.CAROUSEL.INITIALIZE),this.setArrowHeight()},onCarouselSlideChangeRequest:function(){this.trigger(n.CAROUSEL.SLIDE_CHANGE,this.collection.getEnabledModel())},onCarouselSlideChange:function(a,b){this.selectedModel=this.activeModels?this.activeModels[b]:this.collection.getModelsByCategory()[b],this.collection.setEnabledModel(this.selectedModel.get("modelid")),this.setArrowHeight()},generateThumbnail:function(a,b){return this.filtered&&this.thumbnailModels?this.thumbnailModels?i(this.thumbnailModels[b].toJSON()):void 0:i(this.collection.at(b).toJSON())},filterVehiclesByCategory:function(c){var d;this.filtered&&(this.filtered=!1,f.slickUnfilter(this.$el)),this.$el.find(".has-tooltip").each(function(){d=a(this),d.data("qtip")&&(d.qtip("destroy",!0),d.removeData("hasqtip"),d.removeAttr("data-hasqtip"))}),f.slickFilter(this.$el,b.bind(function(a){return this.filtered=!0,this.collection.at(a).getCategory()===c&&(this.thumbnailModels=this.collection.getModelsByCategory(c)),this.collection.at(a).getCategory()===c},this)),this.activeModels=this.collection.getModelsByCategory(c),this.selectedModel=this.collection.getEnabledModel()||this.activeModels[this.$el.slickCurrentSlide()],this.collection.setEnabledModel(this.selectedModel.getModelId()),this.$el.slickCurrentSlide()<=this.activeModels.indexOf(this.selectedModel)?this.$el.slickGoTo(this.activeModels.indexOf(this.selectedModel)):this.$el.slickGoTo(0),this.trigger(n.CAROUSEL.FILTER_CHANGE),k.createTooltips(this.$el.find(".has-tooltip")),m(this.$el.get(0))},setArrowHeight:function(){var a=this.$el.find(".slick-active").find("img");a.load(b.bind(function(){this.$el.find("button").height(a.height())},this))}})}),define("c_136_AnalyticsController",["jquery","underscore","backbone","marionette","C_136_CONSTANTS","trackingCodes"],function(a,b,c,d,e,f){"use strict";return d.Object.extend({initialize:function(a){this.analyticsManager=a.analyticsManager,this.categoryCollection=a.categoryCollection,this.vehicleCollection=a.vehicleCollection,this.vehicleCollectionView=a.vehicleCollectionView,this.mainView=a.mainView,this.thumbnailTriggered=!1,this.addCategoryTracking(),this.addVehicleCarouselTracking(),this.addThumbnailTracking(),this.addFooterTracking()},addCategoryTracking:function(){var a=e.ANALYTICS.CATEGORY;this.categoryCollection.on(e.EVENTS.BACKBONE.CHANGE,function(b){b.isEnabled()&&this.analyticsManager.tag(f.eventTypes.toggle,{componentId:a.COMPONENT_ID,toggleType:a.TOGGLE_TYPE,toggleValue:b.getLabel()})},this)},addVehicleCarouselTracking:function(){var a=e.EVENTS.CAROUSEL,c=e.ANALYTICS.CAROUSEL;this.vehicleCollectionView.$el.on("click",".car-name a",b.bind(function(a){this.trackVehicleCtaClick(c.LINKS.BUTTON_TEXT.TITLE,a.target.href)},this)),this.vehicleCollectionView.$el.on("click",".cta",b.bind(function(a){this.trackVehicleCtaClick(c.LINKS.BUTTON_TEXT.CTA,a.target.href)},this)),this.vehicleCollectionView.on(a.SLIDE_CHANGE,function(a){var b=this.thumbnailTriggered?this.thumbnailModel:a,d=this.vehicleCollection.getModelsByCategory(b.getCategory()),f=c.NAVIGATION.INTERACTION_TYPE;this.thumbnailTriggered&&(f=e.ANALYTICS.THUMBNAILS.TOGGLE_TYPE,this.thumbnailTriggered=!1),this.analyticsManager.tag("carouselInteraction",{componentId:c.COMPONENT_ID,carouselType:c.NAVIGATION.CAROUSEL_TYPE,interactionType:f,itemNumber:c.NAVIGATION.ITEM_NUMBER.replace("%index%",d.indexOf(b)+1).replace("%total%",d.length),promoText:b.getModel()})},this)},trackVehicleCtaClick:function(a,b){var c=e.ANALYTICS.CAROUSEL,d=this.vehicleCollection.getEnabledModel(),g=d.getCta()||{},h=this.vehicleCollection.getModelsByCategory(d.getCategory());this.analyticsManager.tag(f.eventTypes.genericClick,{componentId:c.COMPONENT_ID,destination:b,locationInPage:c.LINKS.LOCATION_IN_PAGE,buttonText:a.replace("%index%",h.indexOf(d)+1).replace("%model%",d.getModel()).replace("%cta.linkText%",g.linkText)})},addThumbnailTracking:function(){var a=e.EVENTS.CAROUSEL,c="click.c_136_CarouselThumbnail",d=b.bind(this.trackThumbailClick,this);this.vehicleCollectionView.on(a.FILTER_CHANGE,function(){this.activeThumbnails&&this.activeThumbnails.off(c,d),this.activeThumbnails=this.vehicleCollectionView.$el.find(".thumbnail"),this.activeThumbnails.on(c,d)},this)},trackThumbailClick:function(b){var c=this.activeThumbnails.index(a(b.target).closest(".thumbnail")),d=this.activeThumbnails.index(this.vehicleCollectionView.$el.slickCurrentSlide()),e=this.vehicleCollection.getModelsByCategory(this.categoryCollection.getEnabledCategory().getCategory())[c];c!==d&&(this.thumbnailTriggered=!0,this.thumbnailModel=e)},addFooterTracking:function(){var a=e.ANALYTICS.CTA_TRAY;this.mainView.$el.find(".footer-link a").on("click",b.bind(function(b){this.analyticsManager.tag(f.eventTypes.genericClick,{componentId:a.COMPONENT_ID,destination:b.target.href,locationInPage:a.LOCATION_IN_PAGE,buttonText:b.target.innerHTML})},this))}})}),define("c_136_MainController",["jquery","underscore","backbone","marionette","numberFormat","c_136_MainView","c_136_CategoryCollection","c_136_VehicleCollection","c_136_CategoryCollectionViewTab","c_136_CategoryCompositeViewDropdown","c_136_VehicleCollectionView","C_136_CONSTANTS","c_136_AnalyticsController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=l.EVENTS;return d.Object.extend({initialize:function(a){this.options=a||{},this.initModels(),this.applyDeeplinks(this.options.deeplink),this.initMainView(),this.initCarousel(),this.initCategories(),this.initAnalytics()},initModels:function(){this.mainViewModel=new c.Model({title:this.options.content.overview.title,strapline:this.options.content.overview.strapline,label:this.options.content.overview.cta.label,link:this.options.content.overview.cta.url,linkTarget:this.options.content.overview.cta.openInNewWindow}),this.categoryCollection=new g(this.options.content.cars,{parse:!0}),this.vehicleCollection=new h(this.options.content.cars,{parse:!0,numberFormat:new e({HELIOS:this.options.window.HELIOS}),optionalSettings:this.options.content.optional,thumbnailText:this.options.content.overview.thumbnailText}),this.vehicleCollection.setEnabledModel(b.first(this.vehicleCollection.getModelsByCategory(this.categoryCollection.getEnabledCategory().getCategory())).getModelId()),this.categoryCollection.on(n.BACKBONE.CHANGE,b.bind(function(a){a.isEnabled()&&(this.categoryCollection.setEnabledCategory(a.getCategory()),this.applyFilters())},this))},applyDeeplinks:function(a){a&&a.modelId&&(this.vehicleCollection.setEnabledModel(a.modelId),this.categoryCollection.setEnabledCategory(this.vehicleCollection.getEnabledModelCategory()))},initMainView:function(){this.mainView=new f({el:this.options.el,window:this.options.window,model:this.mainViewModel}),this.mainView.render()},initCategories:function(){this.categoryCollection.length>1&&(this.mainView.showChildView("categoryRegionTab",new i({collection:this.categoryCollection})),this.mainView.showChildView("categoryRegionDropdown",new j({collection:this.categoryCollection})))},initCarousel:function(){this.vehicleCollectionView=new k({collection:this.vehicleCollection}),this.vehicleCollectionView.on(n.CAROUSEL.INITIALIZE,b.bind(function(){this.applyFilters()},this)),this.mainView.showChildView("vehicleRegion",this.vehicleCollectionView)},applyFilters:function(){var a;this.vehicleCollectionView&&(a=this.categoryCollection.getEnabledCategory().getCategory())&&this.vehicleCollectionView.filterVehiclesByCategory(a)},initAnalytics:function(){this.analyticsController=new m({analyticsManager:this.options.analyticsManager,categoryCollection:this.categoryCollection,vehicleCollection:this.vehicleCollection,vehicleCollectionView:this.vehicleCollectionView,mainView:this.mainView})}})}),define("c_136",["jquery","underscore","backbone","marionette","c_136_MainController","C_136_CONSTANTS","urlParameterDecoder"],function(a,b,c,d,e,f,g){"use strict";function h(b){var c=a.extend({},j,b),d=[];return a(c.selectors.root).each(function(a,c){d.push(new i(c,b))}),d}var i,j={selectors:{root:".c_136"}},k=f.APPLICATION.PROPERTIES;return g.init(),i=function(b,c){var d=a.extend({},j,c);d.content=this._getContentObject(b),d.urlParams=g.getUrlParams(),this._setupApplication(b,d)},i.prototype._getContentObject=function(c){var d,e=a(c).find("script[data-content]");try{d=JSON.parse(b.unescape(e.html()))}catch(e){throw new Error("Cannot parse C136 JSON")}return d},i.prototype._setupApplication=function(a,f){var g=new d.Application;g.name=k.NAME,g.mainController=new e(b.extend(f,{app:g,el:a,window:f.window,region:g.getRegions(),eventAggregator:b.extend({},c.Events),analyticsManager:f.analyticsManager,content:f.content,deeplink:{modelId:f.urlParams.modelid}})),this.application=g},{C_136:i,init:h}}),define("c_137_0",["jquery","underscore","analyticsManager"],function(a,b,c){"use strict";function d(c,d){if(b.bindAll(this,"toggle","show","select","set","highlight","unhighlight","onFocus","elementClick"),this.isVisible=!1,this.settings=d,this.$el=c,this.$dropdown=a(d.selectors.dropdown,this.$el),this.$dropdown.find("li").length<2)return this.$el.addClass(d.classes.noDropdowns);this.$tabs=a(d.selectors.tab,this.$el),this.$wrapper=a(d.selectors.wrapper,this.$el),this.$placeholders=a(d.selectors.placeholder,this.$el),this.$items=a(d.selectors.dropdownTrigger,this.$dropdown),this.$tabElement=a(d.selectors.tabElement,this.$el),this.componentId="C137_Homepage_Toggle",this.bindEvents()}function e(b){var c=a.extend({},f,b);a(c.selectors.root).each(function(b,e){var f=a(e);f.data("tabber",new d(f,c))})}var f={selectors:{root:".c_137-0",wrapper:".inner",tab:".tab",placeholder:".placeholder",dropdown:".tabs-dropdown",dropdownListItem:"li",dropdownTrigger:"button",tabElement:".tab li"},attrs:{tabTrigger:"data-tab-trigger",tabTarget:"data-tab-id"},events:{click:"click.tabber-api",over:"mouseover.tabber-api",out:"mouseout.tabber-api",focus:"focus.tabber-api"},classes:{active:"active",fade:"unhighlight",dropdownOpen:"dropdown-open",noDropdowns:"no-dropdown"}};return d.prototype.trackToggle=function(a){var b=this.settings.analyticsManager,c=b.trackingVars.toggle,d={componentId:this.componentId,toggleType:"homepage toggle",toggleValue:a};b.track(c,d)},d.prototype.bindEvents=function(){this.$placeholders.on(this.settings.events.click,this.toggle),this.$items.on(this.settings.events.click,this.select).on(this.settings.events.over,this.highlight).add(this.$placeholders).on(this.settings.events.out,this.unhighlight).on(this.settings.events.focus,this.onFocus),this.$tabElement.on(this.settings.events.click,this.elementClick)},d.prototype.elementClick=function(b){var c=this.settings.analyticsManager,d=a(b.currentTarget).find(".label").text(),e=this.$placeholders.find("span").text(),f=a(b.currentTarget).find("a").attr("href"),g=c.trackingVars.genericClick,h={componentId:this.componentId,destination:f,locationInPage:"homepage toggle",buttonText:e+" - "+d};c.track(g,h)},d.prototype.toggle=function(a){this[this.isVisible?"close":"show"](a)},d.prototype.show=function(b){this.isVisible=!0,this.$el.addClass(this.settings.classes.dropdownOpen),this.$dropdown.addClass(this.settings.classes.active),this.set(a(b.currentTarget).attr(this.settings.attrs.tabTrigger)),this.$el.add(this.$wrapper).css("min-height",this.getComponentHeight())},d.prototype.getComponentHeight=function(){var a=this.$dropdown.find("ul");return a.outerHeight(!0)+(a.offset().top-this.$el.offset().top)+parseInt(this.$wrapper.css("padding-top"),10)},d.prototype.select=function(b){var c=a(b.currentTarget).attr(this.settings.attrs.tabTrigger),d=a(b.currentTarget).text().toLowerCase();b.preventDefault(),this.set(c),this.trackToggle(d),this.close()},d.prototype.onFocus=function(a){this.dropdownFocused=!0},d.prototype.set=function(b){var c=this.settings.classes.active,d=this.settings.selectors.dropdownTrigger,e=this.settings.selectors.dropdownListItem,f=this.settings.attrs.tabTrigger,g=this.settings.attrs.tabTarget,h=a(e,this.$dropdown).show().filter(function(){return a(d,this).attr(f)===b}).hide(),i=a(d,h).text();this.$placeholders[0].focus(),this.$placeholders.attr(this.settings.attrs.tabTrigger,b).find("span").html(i),this.$tabs.removeClass(c).filter(function(){return a(this).attr(g)===b}).addClass(c)},d.prototype.highlight=function(a){this.$placeholders.addClass(this.settings.classes.fade)},d.prototype.unhighlight=function(a){this.$placeholders.removeClass(this.settings.classes.fade)},d.prototype.close=function(a){this.isVisible=!1,this.$dropdown.removeClass(this.settings.classes.active),this.$el.removeClass(this.settings.classes.dropdownOpen).add(this.$wrapper).css("min-height","")},{init:e}}),define("c_151_1",["jquery","underscore","handlebars","logger","urlParameterDecoder"],function(a,b,c,d,e){"use strict";function f(a){return new g(a)}function g(c){if(A=a.extend({},y,c),h=a(A.selectors.root),!h.length)return!1;r=/\/$/.test(B)?B:B+"/",z=a(".ie9, .ltie9").length,s=h.data(A.selectors.reviewsSize)+"",x=a(A.selectors.loadingAjax),q=this.getHashVars(),v=A.HELIOS.config.common.api.apigee.apiKey,w=A.HELIOS.config.common.api.apigee.clientKey,u=!1,t=new d({level:"warn",prefix:"C151-1"}),r+=z?"v2/proxy/v1/dealers":"v1/dealers",t.info("init"),a(A.window).on(A.events.hashchange,b.bind(function(){q=this.getHashVars(),this.initJson(this.createUrlAjax(q),q,u)},this)),this.initJson(this.createUrlAjax(q),q,u)}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y={selectors:{root:".c_151-1",parentComponent:".c_151-0",reviewsWrapper:".review-wrapper",nextPage:".next",previousPage:".prev",pageStatus:".page-number",typeSales:".rating-type a.sales",typeAfterSales:".rating-type a.after-sales",dealerName:".content-review h2",customSelectbox:".custom-selectbox select",activeStars:".active-stars",hbsTemplate:".review-result-template",reviewsSize:"dealer-reviews-size",loadingAjax:".ajax-btn-loading",reviewsPerPage:"reviews-per-page",percentage:".stars span.percent",ratingType:"p.dealer-name"},cssClasses:{active:"is-active",disable:"disable"},events:{click:"click",change:"change",hashchange:"hashchange"}},z=!1,A=null,B=HELIOS.config.common.api.apigee.url;return g.prototype.createUrlAjax=function(a){var b=a.id;return r&&b&&s?r+"/"+b+"/reviews?size="+s:(t.warn("the dealerId, url or size var is not set "),!1)},g.prototype.getHashVars=function(){var a=A.window.document.location.hash.substr(2);return e.init(),e.getUrlParams(a)},g.prototype.initialization=function(a){if(q.dealer&&q.salesType){var c=a;b.each(c.reviews,function(a,b){var c=a.published.substring(a.published.indexOf("T"),0);a.published=c}),o=q.dealer,k=this.camelize(q.salesType).replace(" ",""),l=h.find(A.selectors.customSelectbox).val(),m=parseInt(h.data(A.selectors.reviewsPerPage))||5,n=1,i=c,j=this.allInitialFilters(c.reviews),this.render(j),t.info("initialization"),u||(t.info("events"),this.bindEvents())}return j},g.prototype.camelize=function(a){return a.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(a,b){return 0===a?"":0===b?a.toLowerCase():a.toUpperCase()})},g.prototype.bindEvents=function(){h.find(A.selectors.nextPage).on(A.events.click,b.bind(function(){this.nextPage(j,n,p)},this)),h.find(A.selectors.previousPage).on(A.events.click,b.bind(function(){this.previousPage(j,n,p)},this)),h.find(A.selectors.typeSales).on(A.events.click,b.bind(function(a){a.preventDefault(),l=h.find(A.selectors.customSelectbox).val(),this.salesSelect(this,i,n)},this)),h.find(A.selectors.typeAfterSales).on(A.events.click,b.bind(function(a){a.preventDefault(),l=h.find(A.selectors.customSelectbox).val(),this.afterSalesSelect(this,i,n)},this)),h.find(A.selectors.customSelectbox).on(A.events.change,b.bind(function(b){l=h.find(A.selectors.customSelectbox).val(),this.selectFilter(j,a(b.currentTarget))},this)),u=!0},g.prototype.typeFilter=function(a,c){return b.where(a,{type:c})},g.prototype.allInitialFilters=function(a){var b=a;return b=this.typeFilter(b,k),b=this.customFilter(b,l)},g.prototype.customFilter=function(a,c){switch(c){case"ratingLower":return b.sortBy(a,function(a){return a.starRating});case"ratingHighest":return b.sortBy(a,function(a){return-a.starRating});case"dateLower":return a.sort(function(a,b){return new Date(a.published).getTime()-new Date(b.published).getTime()});case"dateHighest":return a.sort(function(a,b){return new Date(b.published).getTime()-new Date(a.published).getTime()})}},g.prototype.average=function(a){var c=b.reduce(a,function(a,b){return a+b.starRating},0);return c=c/a.length*100/5},g.prototype.initJson=function(c,d,e){var f=h.find(A.selectors.reviewsWrapper),g={type:"GET",url:c,dataType:"json",context:this};c||(g.url=""),
f.empty().append(x),z?g.url+="&apiKey="+v+"&clientkey="+w:g.headers={apikey:""+v,clientkey:""+w},a.ajax(g).done(b.bind(this.initialization,this)).fail(function(a,b,c){t.warn("We could not access the request due to"+c)})},g.prototype.render=function(d){var e,f,g,i,j,l,q,r;p=d.length/m,n=Math.ceil(n),p=Math.ceil(p),f=a(A.selectors.hbsTemplate).html(),e=c.compile(f),n>=p&&(n=p),1===n||0===n?a(A.selectors.previousPage,A.selectors.root).addClass(A.cssClasses.disable):a(A.selectors.previousPage,A.selectors.root).removeClass(A.cssClasses.disable),n===p?a(A.selectors.nextPage,A.selectors.root).addClass(A.cssClasses.disable):a(A.selectors.nextPage,A.selectors.root).removeClass(A.cssClasses.disable),h.find(A.selectors.reviewsWrapper).empty(),h.find(A.selectors.dealerName).text(o),h.find(A.selectors.pageStatus).html(n+"/"+p),"afterSales"===k?(h.find(A.selectors.typeAfterSales).addClass(A.cssClasses.active),h.find(A.selectors.typeSales).removeClass(A.cssClasses.active)):(h.find(A.selectors.typeSales).addClass(A.cssClasses.active),h.find(A.selectors.typeAfterSales).removeClass(A.cssClasses.active)),a(A.selectors.parentComponent).find("ul li").each(function(){var b=a(this).find("span.title").first().text().toLowerCase();b===h.find(A.selectors.typeSales).find(A.selectors.ratingType).first().text().toLowerCase()&&(q=a(this)),b===h.find(A.selectors.typeAfterSales).find(A.selectors.ratingType).first().text().toLowerCase()&&(r=a(this))}),q?(j=q.find(A.selectors.percentage).first().text(),h.find(A.selectors.typeSales).show().find(A.selectors.activeStars).css("width",j)):h.find(A.selectors.typeSales).hide(),r?(l=r.find(A.selectors.percentage).first().text(),h.find(A.selectors.typeAfterSales).show().find(A.selectors.activeStars).css("width",l)):h.find(A.selectors.typeAfterSales).hide(),b.each(d,function(a,b){b<m*n&&b>=m*(n-1)&&(g=100*a.starRating/5,a.percentage=g,i=e(a),h.find(A.selectors.reviewsWrapper).append(i))})},g.prototype.nextPage=function(a,b,c){b<c&&(n++,this.render(a))},g.prototype.previousPage=function(a,b,c){b>1&&(n--,this.render(a))},g.prototype.salesSelect=function(a,b,c){k="sales",j=this.allInitialFilters(b.reviews),this.render(j)},g.prototype.afterSalesSelect=function(a,b,c){k="afterSales",j=this.allInitialFilters(b.reviews),this.render(j)},g.prototype.selectFilter=function(a,b){l=b.val(),j=this.customFilter(a,l),this.render(j)},{init:f}}),define("c_132",["jquery","analyticsManager","c_152_0"],function(a,b,c){"use strict";function d(b){var c,d=a(p.selector.root);0!==d.length&&(m=d.find(".location-input"),q=a.extend(!0,{},p,b),e(),(c=h(d))&&(c.init(),i(c,d)))}function e(){r={constants:{HELIOS:q.HELIOS,window:window,_satellite:window._satellite,eventEl:a(q.selector.root),componentId:"C132_ActionZone"},component:{}},o=r.constants.componentId,r.component[o]={},n=new b(r.constants),n.trackComponent(r.component)}function f(a,b){r.component[o]={componentId:"C132_ActionZone",locationInPage:"action zone",buttonText:a,Destination:b},n.submitTracking("genericClick",r.component[o])}function g(a){r.component[o]={componentId:"C132_ActionZone",searchType:"dealer",searchTerm:a},n.submitTracking("search",r.component[o])}function h(a){var b,d={collection:{},settings:{autocomplete:!0}};return b=a.find(c.defaults.selector),0!==b.length&&c.init(d,b)}function i(b,c){b.on("open update",function(a,d){j(b,c,d)}).on("close",function(){l(c)}),c.find(".pushes li a").on("click",function(){var b=a(this).attr("href");f(a(this).find(".label").text(),b)}),c.find(".btn-search").on("click",function(){g(m.val())})}function j(a,b,c){var d,e=b.offset().top,f=a.$suggestions.offset().top,g=a.$suggestions.outerHeight(),h=f+g-e+20;"open"===c?(d=b.offset().height,k(b,d),_.defer(k,b,h)):k(b,h)}function k(a,b){a.css("min-height",b)}function l(a){k(a,"")}var m,n,o,p={selector:{root:".c_132"},datas:{urls:"dealersUrl"}},q=null,r={};return{init:d}}),define("c_142B_2",["jquery","underscore","handlebars"],function(a,b,c){"use strict";function d(b,c,d){var f,g;return c=c||document.body,g=a(h.selectors.root),f=new e(g,b,d),g.data(h.data.moduleInstance,f),f}var e,f="c_142B_2",g="car",h={events:{click:"click."+f,change:"change."+f,focus:"focus."+f,blur:"blur."+f,keyup:"keyup."+f},selectors:{root:".c_142B-2",group:".form-group",submit:".submit-module",toggler:".toggler",togglerMain:".toggler-main",togglerTarget:".toggler-target",template:'script[type="text/x-handlebars-template"]',checkboxes:"input[type=checkbox]",servicesContainer:".services",cartContainer:".cart",overlayCartContainer:".overlay-cart",servicesInput:".services-list",tagging:"[data-adobe-tagging]",textarea:"textarea",checkbox:".checkbox",error:".error-message"},data:{moduleInstance:"basModule",jsonServices:"services-url",iconsArray:"domain-icons",labelNone:"labels-none",labelOne:"labels-one",labelMulti:"labels-multi"},classNames:{open:"open",show:"show",selected:"selected",ie8:"ltie9"},cartTimer:2500,cartScrollTimer:230},i="C142_Book_A_Service";return e=function(c,d,e){this.$el=a(c),this.name=g,this.settings=a.extend({},h,d),this.$servicesContainer=this.$el.find(this.settings.selectors.servicesContainer),this.$cartContainer=this.$el.find(this.settings.selectors.cartContainer),this.$overlayCartContainer=this.$el.find(this.settings.selectors.overlayCartContainer),this.$servicesInput=this.$el.find(this.settings.selectors.servicesInput),this.$submit=this.$el.find(this.settings.selectors.submit),this.$textarea=this.$el.find(this.settings.selectors.textarea),this.$textareaSwitch=this.$textarea.parent().siblings(this.settings.selectors.checkbox).find("input"),this.$error=this.$el.find(this.settings.selectors.error),this.labelNone=this.$el.data(this.settings.data.labelNone),this.labelOne=this.$el.data(this.settings.data.labelOne),this.labelMulti=this.$el.data(this.settings.data.labelMulti),this.labelValue=this.labelNone,this.cart={services:[],currency:"",totalPrice:0},this.services=[],this.ajaxCallData=e,this.validated=!1,this.mediaQueries=this.settings.HELIOS.config.common.mediaQuery,b.bindAll(this,"toggleContent","updateCart","setListData","addToCart","scrollToCart","calculateTotalPrice","textareaOnFocus","textareaOnBlur","textareaOnKeyUp","textareaSwitchOnClick","textareaSwitchOnChange","closeAllContent")},e.prototype.init=function(){this.templates=this.getTemplates(),this.settings.url=this.$el.data(this.settings.data.jsonServices),this.getServices()},e.prototype.bindEvents=function(){return this.$el.find(this.settings.selectors.toggler).on(this.settings.events.click,this.toggleContent),this.$el.find(this.settings.selectors.servicesContainer).on(this.settings.events.change,this.settings.selectors.checkboxes,this.updateCart),this.$overlayCartContainer.find("button").on(this.settings.events.click,this.scrollToCart),this.$textarea.on(this.settings.events.focus,this.textareaOnFocus),this.$textarea.on(this.settings.events.blur,this.textareaOnBlur),this.$textareaSwitch.on(this.settings.events.click,this.textareaSwitchOnClick),this.$textareaSwitch.on(this.settings.events.change,this.textareaSwitchOnChange),document.body.onresize=function(){b.debounce(this.closeAllContent,200)},this},e.prototype.textareaSwitchOnClick=function(){this.validated&&this.validateComponent()},e.prototype.textareaSwitchOnChange=function(){this.$textareaSwitch.prop("checked")?this.$servicesInput.rules("remove","helios_notblank"):this.$servicesInput.rules("add",{helios_notblank:this.$servicesInput.data("validation-notblank")})},e.prototype.validateComponent=function(){var a=this.$textareaSwitch.is(":checked")||this.$servicesInput.valid();return this.validated=!0,this.triggerError(!a),this.submitTracking(a),a},e.prototype.triggerError=function(a){this.$error.toggleClass(this.settings.classNames.show,a)},e.prototype.submitTracking=function(a){var b=this.settings.analyticsManager,c={componentId:i,formName:"Book-a-service",formStepName:"select-a-service",formStepNumber:"step-3"};a||(c.errorMessage=this.$error.text()),b.tag(b.trackingVars.formSteps,c)},e.prototype.textareaOnFocus=function(a){this.$textarea.on(this.settings.events.keyup,this.textareaOnKeyUp),this.$textareaSwitch.is(":checked")||this.$textareaSwitch.trigger(this.settings.events.click)},e.prototype.textareaOnBlur=function(a){this.$textarea.off(this.settings.events.keyup),!this.$textarea.val().length&&this.$textareaSwitch.is(":checked")&&this.$textareaSwitch.trigger(this.settings.events.click)},e.prototype.textareaOnKeyUp=function(a){var b=this.$textarea.val().length,c=this.$textareaSwitch.is(":checked");(!b&&c||b&&!c)&&this.$textareaSwitch.trigger(this.settings.events.click)},e.prototype.getServices=function(c){c=c||this.ajaxCallData,this.dealerId=c.dealerId,this.vinCode=c.vinCode,a.ajax({url:this.settings.url,dataType:"json",data:c,success:this.setListData,error:b.bind(this.getServicesFail,this)})},e.prototype.getServicesFail=function(){},e.prototype.updateCart=function(c){var d,e=a(c.currentTarget),f=e.is(":checked");e.closest("li").toggleClass(h.classNames.selected,f),f?(d={serviceTitle:e.closest("li").find(".title").text(),servicePrice:e.closest(".selection").find(".price").text()},this.addToCart(d),this.calculateTotalPrice(e.closest("li").data("price"))):(this.getServiceInArray(e,b.bind(this.removeFromCart,this)),this.calculateTotalPrice(-e.closest("li").data("price"))),this.$overlayCartContainer.find(".price").text(this.cart.currency+this.cart.totalPrice),this.updateFormData(),this.validated&&this.validateComponent(),this.renderCart()},e.prototype.emptyCart=function(){this.cart.services=[],this.cart.totalPrice=0,this.renderCart()},e.prototype.scrollToCart=function(){a("html, body").animate({scrollTop:this.$el.offset().top+this.$el.outerHeight()-window.innerHeight},this.settings.cartScrollTimer)},e.prototype.getServiceInArray=function(a,b){this.cart.services.forEach(function(c,d,e){if(c.servicePrice===a.closest(".selection").find(".price").text()&&c.serviceTitle===a.closest("li").find(".title").text())return void b(d)})},e.prototype.refreshServices=function(a){a.dealerId===this.dealerId&&a.vinCode===this.vinCode||(this.$el.find(this.settings.selectors.servicesContainer).off(this.settings.events.change,this.settings.selectors.checkboxes),this.getServices(a),this.emptyCart())},e.prototype.updateFormData=function(){switch(this.services.length){case 0:this.labelValue=this.labelNone;break;case 1:this.labelValue=this.labelOne;break;default:this.labelValue=this.labelMulti}this.$servicesInput.val(this.services.join(";"))},e.prototype.addToCart=function(a){this.cart.services.push(a),this.services.push(a.serviceTitle)},e.prototype.removeFromCart=function(a){this.cart.services.splice(a,1),this.services.splice(a,1)},e.prototype.calculateTotalPrice=function(a){this.cart.totalPrice+=parseInt(a,10)},e.prototype.toggleContent=function(b){var c=a(b.currentTarget),d=c.siblings(this.settings.selectors.togglerTarget),e=c.closest(this.settings.selectors.group).index(),f=(this.$groups.eq(this.currentFormGroup),e+2),g=a("html").hasClass(this.settings.classNames.ie8);null===this.currentFormGroup&&this.$groups.eq(e),d.length||(d=c.parent().siblings(this.settings.selectors.togglerTarget),(g||this.settings.window.matchMedia&&this.settings.window.matchMedia(this.mediaQueries.is.large).matches)&&(d=c.closest(this.settings.selectors.group).siblings().eq(f).children(this.settings.selectors.togglerTarget))),d.hasClass(this.settings.classNames.open)?(d.add(c).toggleClass(this.settings.classNames.open),c.is(this.settings.selectors.togglerMain)&&this.closeAllContent()):(e<3&&this.currentFormGroup!==e&&this.closeAllContent(),this.currentFormGroup=e,d.add(c).addClass(this.settings.classNames.open),this.$groups.eq(this.currentFormGroup).add(this.$servicesContainer).addClass(this.settings.classNames.open))},e.prototype.closeAllContent=function(){this.$servicesContainer.add(this.$groups).add(this.$groups.find(this.settings.selectors.togglerTarget+", "+this.settings.selectors.toggler)).removeClass(this.settings.classNames.open)},e.prototype.toggleCarts=function(a){this.cartTimeout&&clearTimeout(this.cartTimeout),this.$overlayCartContainer.addClass(this.settings.classNames.show),this.$cartContainer.toggleClass(this.settings.classNames.show,a),this.cartTimeout=setTimeout(b.bind(function(){this.$overlayCartContainer.removeClass(this.settings.classNames.show)},this),this.settings.cartTimer)},e.prototype.setListData=function(a){var c=a.domain[0].items[0].service[0].servicePriceCurrency,d=a.domain,e=this.$servicesContainer.data(this.settings.data.iconsArray);e&&"object"==typeof e&&b.each(e,function(a,b){d[b]&&(d[b].icon=a)}),c&&(this.cart.currency=c),this.renderList(a)},e.prototype.renderList=function(a){var b=this.templates.services(a);this.$servicesContainer.html(b),this.onListRendered()},e.prototype.renderCart=function(){this.cart.services.length?this.$cartContainer.html(this.templates.cart(this.cart)):this.$cartContainer.empty(),this.toggleCarts(!!this.cart.services.length)},e.prototype.onListRendered=function(a){this.$groups=this.$el.find(this.settings.selectors.group),this.currentFormGroup=null,this.bindEvents()},e.prototype.getTemplates=function(){var b,d,e={};return this.$el.find(h.selectors.template).each(function(){b=a(this),d=b.data("name"),e[d]=c.compile(b.html()),b.remove()}),e},c.registerHelper("setIndex",function(a){this.index=parseInt(a,10)+1}),{init:d}}),define("c_142A_3",["jquery","appointment","underscore","logger"],function(a,b,c,d){"use strict";function e(b,c,d,e){var g,h;return c=c||document.body,h=a(j.selectors.root),g=new f(h,b),h.data(j.data.moduleInstance,g),void 0!==d&&!d||!h.length||a(j.selectors.embeddedContainer).find(h).length||g.init(e),g}var f,g="c_142A_3",h="date",i=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],j={events:{click:"click."+g,appointmentUpdate:"appointmentUpdate"},selectors:{root:".c_142A-3",embeddedContainer:".c_142",submit:".submit-module",time:".time",date:".date",parent:".inner",tagging:"[data-adobe-tagging]",timeSlot:"time",shortTimeSlots:".minutes",longTimeSlots:".hours",showSlots:".display-slots",appointmentContainer:".appointment",appointmentDate:".appointment-datetime",quarterTimeSlots:"ul li:nth-child(2n)",inputDate:"input[type=date]"},className:{open:"open",show:"show",deployed:"deployed",IE8OrLower:"ltie9"},data:{moduleInstance:"basModule",appointmentURL:"appointment-url",dayOpeningTime:"data-opening-time-",dayClosingTime:"data-closing-time-",daysClosed:"data-closed-on",slotsUnavailable:"data-unavailable-on",prefill:"prefill",timeFormat:"timeformat",timeSlot:"timeslot",appointmentDate:"data-appointment-date",appointmentTime:"data-appointment-time"},alwaysOpenStores:{openFrom:"00:00",openUntil:"23:59"},bookingDelay:2},k={1:i[0],2:i[1],3:i[2],4:i[3],5:i[4],6:i[5],7:i[6]};return f=function(b,c){this.$el=a(b),this.name=h,this.settings=a.extend({},j,c)},f.prototype.init=function(b){return this.requestData=b,this.settings.url=this.$el.data(this.settings.data.appointmentURL),this.$submit=this.$el.find(j.selectors.submit),this.$timeContainer=this.$el.find(this.settings.selectors.time),this.$dateContainer=this.$el.find(this.settings.selectors.date),this.$timeSlots=this.$timeContainer.find(this.settings.selectors.timeSlot),this.$shortTimeSlots=this.$timeContainer.find(this.settings.selectors.shortTimeSlots),this.$longTimeSlots=this.$timeContainer.find(this.settings.selectors.longTimeSlots),this.$quarterTimeSlots=this.$shortTimeSlots.find(this.settings.selectors.quarterTimeSlots),this.$appointmentContainer=this.$el.find(this.settings.selectors.appointmentContainer),this.$appointmentDate=this.$el.find(this.settings.selectors.appointmentDate),this.$inputDate=this.$el.find(this.settings.selectors.inputDate),this.standAlone=!this.$timeContainer.closest(this.settings.selectors.parent).length,this.timeFormat=parseInt(this.$el.data(this.settings.data.timeFormat),10),this.displayTimeslots(),a("html").hasClass(this.settings.className.IE8OrLower)&&(delete a.validator.methods.date,this.$inputDate.rules("add","dateISO"),this.maskUnavailablesTimeslots()),this.bindEvents(),this.requestData?this.getAppointments(b).then(c.bind(this.render,this)):this.standAlone&&(this.reset(!0),this.render()),this.log=new d({prefix:"C_142A-3"}),this.log.info("init"),this},f.prototype.render=function(){var a={appointmentTime:{bookingDelay:this.settings.bookingDelay},appointmentDate:{datepicker:{maxDate:null}}},c=this.$el.data(this.settings.data.prefill);c&&(a.today=c),this.appointment=new b(a),this.formatTimeTable(),this.updateAppointment()},f.prototype.formatTimeTable=function(){var b=this,c=this.$el.find(this.settings.selectors.timeSlot);12===this.timeFormat&&c.each(function(){var c=a(this),d=c.text().split(":");c.text(b.appointment.toAmPm(d[0],d[1]))})},f.prototype.displayTimeslots=function(){var a=this.$el.data(this.settings.data.timeSlot);this.timeSlot=parseInt(a,10),this.timeSlot>=60||c.isNaN(this.timeSlot)?(this.$shortTimeSlots.remove(),this.$longTimeSlots.addClass(this.settings.className.show)):(this.$longTimeSlots.remove(),this.$shortTimeSlots.addClass(this.settings.className.show),30===this.timeSlot&&this.$quarterTimeSlots.remove()),this.$timeContainer.addClass("slots-"+this.timeSlot)},f.prototype.maskUnavailablesTimeslots=function(){var a=this.$timeSlots.closest("li");a.show(),120===this.timeSlot&&a.filter(":nth-child(2n)").hide(),240===this.timeSlot&&(a.hide(),a.filter(":nth-child(4n+1)").show())},f.prototype.updateAppointment=function(){c.isUndefined(this.appointment)||this.$appointmentDate.text(this.appointment.getLocalisedAppointmentString(this.timeFormat))},f.prototype.bindEvents=function(){this.$shortTimeSlots.find(this.settings.selectors.showSlots).on(this.settings.events.click,c.bind(function(b){a(b.currentTarget).closest("li").hasClass(this.settings.className.deployed)?(a(b.currentTarget).closest("li").removeClass(this.settings.className.deployed),this.$shortTimeSlots.removeClass(this.settings.className.open)):(this.$shortTimeSlots.addClass(this.settings.className.open),this.$shortTimeSlots.find("> li").removeClass(this.settings.className.deployed),a(b.currentTarget).closest("li").addClass(this.settings.className.deployed),c.isUndefined(this.appointment)||this.appointment.TimeSelector.selectFirstAvailableChildrenSlot(a(b.currentTarget)))},this)),this.$appointmentContainer.on(this.settings.events.appointmentUpdate,c.bind(this.updateAppointment,this))},f.prototype.getAppointments=function(b){var d="",e=b||this.requestData;return this.reset(),d+="/service/"+e.selectedService+"/dealerId/"+e.dealerId,c.has(e,"requestDate")&&(d+="/date/"+e.requestDate),a.ajax({url:this.settings.url+d+"/data.json",dataType:"json",success:c.bind(this.setAppointmentData,this),error:c.bind(this._onGetAppointmentsError,this)})},f.prototype._onGetAppointmentsError=function(){this.log.warn("Get Appointments Data is not available.")},f.prototype.setAppointmentData=function(a){var b,d,e,f,g,h,i=[],j=[],l=this.settings.data,m=this.$timeContainer;if(!c.isArray(a.days)||!a.days.length)return this.reset(!0);b=a.days,c.each(b,function(a){var b=a.date;d=new Date(b).getDay(),e=l.dayOpeningTime+k[d],f=l.dayClosingTime+k[d],a.slots.length?(g=this.formatTime(a.slots[0].start),h=this.formatTime(a.slots[a.slots.length-1].end),m.attr(e,g).attr(f,h),c.each(a.slots,function(b){b.free||j.push(a.date+"."+b.start)},this)):i.push(b)},this),i.length&&this.$dateContainer.attr(l.daysClosed,i.join(",")),j.length&&m.attr(l.slotsUnavailable,j.join(",")),this.render()},f.prototype.formatTime=function(a){return a.slice(0,2)+":"+a.slice(2,4)},f.prototype.reset=function(a){var b,d,e=this.settings,f=this.$timeContainer;c.each(i,function(c){b=e.data.dayOpeningTime+c,d=e.data.dayClosingTime+c,a?f.attr(b,e.alwaysOpenStores.openFrom).attr(d,e.alwaysOpenStores.openUntil):f.removeAttr(b).removeAttr(d)}),this.$dateContainer.removeAttr(e.data.daysClosed)},{init:e}}),define("c_142_module",["jquery","c_040","c_142B_2","c_142A_3"],function(a,b,c,d){"use strict";function e(a,b,c,d,e){this.$el=a,this.$el.data(f.attributes.instance,this),this.value=null,this.name=b,this.events={},this.initialised=!1,this.HELIOS=c,this.window=d,this.analyticsManager=e,_.bindAll(this,"initialiseDealer","showDealerValidationButton","setDealerValue")}var f={attributes:{instance:"builder"},stepNames:{dealer:"dealer",services:"services",date:"date"}};return e.prototype={init:function(a,b){return this.context=a,b&&(this.name=b),this},change:function(){return this.trigger("change"),this},validate:function(){return this.trigger("validate"),this},set:function(a,b){return this.value=a,b?this.validate():this.change()},on:function(a,b){this.events[a]=this.events[a]||[b]},trigger:function(a){var b,c,d=this.events[a];if(d)for(b=0,c=d.length;b<c;b++)d[b].call(this)},onShow:function(){var a;this.name===f.stepNames.dealer&&(this.initialised?(this.dealer.map.refresh(),this.dealer.markersLoaded().done(_.bind(function(){this.dealer.viewOnMap(!1,this.selectedDealer)},this))):this.initialiseDealer()),this.name===f.stepNames.services&&this.fullJourney&&!this.expressBooking&&(a={dealerId:this.dealerId,vinCode:this.vinCode},this.initialisedNonExpress?this.services.refreshServices(a):this.initialiseServices(a),this.initialisedNonExpress=!0),this.name===f.stepNames.date&&(a={dealerId:this.shortDealerId,selectedService:this.serviceIndex},this.initialisedAppointment?this.date.getAppointments(a):this.initialiseAppointment(a),this.initialisedAppointment=!0),this.initialised=!0},initialiseDealer:function(a,c){var d={};this.selectedDealer=c,this.initialised=!0,this.silent=a,this.dealer=b.newInstance(this.$el,{HELIOS:this.HELIOS,config:{simpleDetail:!0,noList:!0}}),c&&(d={storedDealer:{id:this.selectedDealer}}),this.dealer.init(d),this.$elDealer=this.dealer.$el,this.$innerModule=this.$elDealer.closest(".inner"),this.$elDealer.on("dealerSelected",this.showDealerValidationButton),this.$innerModule.find(".btn-fad.btn-select").on("click.bas",this.setDealerValue)},showDealerValidationButton:function(){this.$innerModule.find(".module-validation").show(),this.silent&&(this.dealerId=this.dealer.value.id,this.shortDealerId=this.dealer.value.shortDealerId,this.set(this.dealer.value.name,!0))},setDealerValue:function(){this.dealerId=this.dealer.value.id,this.selectedDealer=this.dealerId,this.shortDealerId=this.dealer.value.shortDealerId,this.set(this.dealer.value.name)},initialiseServices:function(b){this.services=c.init({HELIOS:this.HELIOS,window:this.window,analyticsManager:this.analyticsManager},document.body,b),this.services.init(),this.services.$submit.on("click.bas",a.proxy(function(){this.services.validateComponent()&&(this.services.closeAllContent(),this.set(this.services.labelValue))},this))},initialiseAppointment:function(b){this.date=d.init({HELIOS:this.HELIOS,window:this.window},document.body,!1),this.date.init(b),this.date.$submit.on("click.bas",a.proxy(function(){var a=this.date.appointment.getLocalisedAppointmentString(this.date.timeFormat);a&&(this.date.appointment.confirmOptions(),this.set(a))},this))}},e}),define("c_142",["jquery","c_142_module","validation","storageManager"],function(a,b,c,d){"use strict";function e(b,c,d,e){this.$el=a(b),this.$form=a("form",this.$el),this.settings=a.extend(!0,j,c||{}),this.defaults=i,this.HELIOS=d,this.window=e,this.togglerClickHandler=_.bind(this.togglerClickHandler,this),this.clickHandler=_.bind(this.clickHandler,this),this.expressBooking=!1,this.fullJourney=!1,this.dealerModAlreadyValidate=!1,this.$customerDetails=this.$el.find(i.selectors.customerDetails),this.$servicesExpressBooking=this.$el.find(i.selectors.servicesExpressBooking),this.$submitButton=this.$el.find(j.form.formSubmitButton),this.$services=this.$el.find(i.selectors.services),this.$servicesList=this.$services.find(i.selectors.servicesList),this.$fullJourneyInput=this.$services.find(i.selectors.fullJourneyInput),this.$expressBookingVin=this.$el.find(i.selectors.expressBookingVin),this.$expressBookingModel=this.$el.find(i.selectors.expressBookingModel),this.$expressBookingServicesOtherServices=this.$el.find(i.selectors.expressBookingServicesOtherServices),this.$expressBookingServicesRadio=this.$el.find(i.selectors.expressBookingServicesRadio),this.$expressBookingServices=this.$el.find(i.selectors.expressBookingServices),this.$expressServicesRadio=this.$el.find(i.selectors.expressServicesRadio),this.$longJourneyServices=this.$el.find(i.selectors.longJourneyServices),this.$expressBookingDateMod=this.$el.find(i.selectors.expressBookingDateMod),this.$expressBookingTitle=this.$el.find(i.selectors.expressBookingTitle),this.$expressBookingFirstName=this.$el.find(i.selectors.expressBookingFirstName),this.$expressBookingLastName=this.$el.find(i.selectors.expressBookingLastName),this.$emailInput=this.$el.find(i.selectors.emailInput),this.$phoneInput=this.$el.find(i.selectors.phoneInput),this.$servicesListInput=this.$el.find(i.selectors.phoneInput)}function f(a,c,d,e){var f,g;return!!a.closest(i.selectors.root).length&&(f=a.data(i.attributes.instance),f||(g=a.closest(i.selectors.module).data(i.attributes.moduleName),f=new b(a,g,c,d,e)),f)}function g(a,b){var c,d={};return!!a.length&&(c=a.data(i.attributes.rootInstance),c instanceof e||(b.HELIOS&&b.HELIOS.components&&b.HELIOS.components.c_142&&(d=b.HELIOS.components.c_142),d.analyticsManager=b.analyticsManager,c=new e(a,d,b.HELIOS,b.window),a.data(i.attributes.rootInstance,c)),c)}var h="c_142",i={events:{click:"click."+h,prefill:"prefill."+h},selectors:{root:".c_142",module:".module-container",inner:".inner",moduleElement:".bas-module",customerDetails:".customer-details",toggler:".btn-toggler",emailInput:".c_142A-4 .email-input",phoneInput:".c_142A-4 .phone-input",vinInput:".c_142B-1 .vin-input",modelInput:".c_142B-1 .model-input",servicesExpressBooking:".c_142A-2",services:".c_142B-2",servicesList:".services-list",fullJourneyInput:".service-full-journey",expressBookingVin:".c_142A-1 [name=carIdentifier]",expressBookingModel:".c_142B-1 [name=plateNumber]",expressBookingServicesOtherServices:".c_142A-2 .other-services",expressBookingServicesRadio:"#c_142A_2_more_services",expressBookingServices:".c_142A-2 [name=serviceIssue]",expressServicesRadio:".c_142A-2 [type=radio]",longJourneyServices:".c_142B-2",expressBookingDateMod:".c_142A-3",expressBookingTitle:".c_142A-4 [name=title]",expressBookingFirstName:".c_142A-4 [name=firstName]",expressBookingLastName:".c_142A-4 [name=lastName]",selectedValue:".selectedValue",moduleValidator:".module-validation button"},attributes:{instance:"builder",moduleName:"name",rootInstance:"rootInstance",prefill:"prefill",lockDealer:"lockDealer"},classNames:{open:"open",hiding:"hiding",animating:"animating",complete:"complete",active:"active",visible:"visible",ready:"ready"}},j={list:["car","dealer","services","date"],form:{formSubmitButton:".btn-book[type=submit]",submitButtonSelector:".btn-book[type=submit]",formToggleButton:".btn-book[type=button]",validation:{rules:{telephone:{required:function(b){return 0===a(i.selectors.root).find(i.selectors.emailInput).val().length}},email:{required:function(b){return 0===a(i.selectors.root).find(i.selectors.phoneInput).val().length}},vin:{required:function(b){return 0===a(i.selectors.root).find(i.selectors.vinInput).val().length}},model:{required:function(b){return 0===a(i.selectors.root).find(i.selectors.modelInput).val().length}}}}}};return e.prototype={init:function(){var b=this.settings.analyticsManager,c={};return this.$togglerButtons=this.$el.find(i.selectors.toggler),this.$moduleValidation=this.$el.find(i.selectors.moduleValidator),this.initModules().initEvents().initValidation().hideCustomerDetails(),this.oldIE=a("html").hasClass("ie9")||a("html").hasClass("ltie9"),this.$servicesList.length&&this.$servicesList.rules("remove","helios_notblank"),this.initStorageManager(),b.append(b.trackingVars.formSteps,c),this},togglerClickHandler:function(b){var c=a(b.currentTarget),d=c.data(i.attributes.moduleName),e=this.settings.analyticsManager,f={componentId:this.HELIOS.adobe.tagging.componentId,formName:this.HELIOS.adobe.tagging.formName,formStepName:"select-booking-mode",formStepNumber:"step-1"};return b.preventDefault(),c.hasClass(i.classNames.active)?this.hideModule(c.data(i.attributes.moduleName)):(!this.lockDealer||d!==this.settings.list[1])&&(this.previousIsValid(d)&&this.showModule(d),void e.tag(e.trackingVars.formSteps,f))},clickHandler:function(a){var b=this.settings.analyticsManager,c={componentId:this.settings.HELIOS.adobe.tagging.componentId,formName:this.settings.HELIOS.adobe.tagging.formName,formStepName:"select-your-service",formStepNumber:"step-3"};b.tag(b.trackingVars.formSteps,c)},trackSubmit:function(a){var b=a.currentTarget.innerText,c={componentId:this.settings.HELIOS.adobe.tagging.componentId,locationInPage:"book-a-service",buttonText:b};j.analyticsManager.tag(j.analyticsManager.trackingVars.genericClick,c)},initEvents:function(){return this.$togglerButtons.on(i.events.click,this.togglerClickHandler),this.$moduleValidation.on(i.events.click,this.clickHandler),this.$submitButton.on(i.events.click,this.trackSubmit),this},initValidation:function(){var a=this.settings.form;return this.validation=new c(this.$form,a),this},initModules:function(){var b=this,c={};return this.$el.find(i.selectors.module).each(function(){var d=a(this),e=d.data(i.attributes.moduleName),f=b.buildModule(d,e);f&&(c[e]=f)}),this.modules=c,this.each(function(a,c){c.value&&c.app.init(b.getValues(),a)}),this},initStorageManager:function(){d.init(),this.storedData=d.loadItem("c_141"),this.storedDealer=d.loadItem("dealerID"),this.storedData&&this.storedData.bookAService&&this.storedData.bookAService.favouriteDealers&&this.storedData.bookAService.favouriteDealers.length&&(this.storedDealer=null),this.clearForm(),this.prefillForm()},prefillForm:function(){var a,b;this.lockDealer=this.$form.data(i.attributes.lockDealer)&&this.storedDealer,this.storedDealer&&this.storedDealer.dealerID&&this.modules[this.settings.list[1]].app.initialiseDealer(!0,this.storedDealer.dealerID),this.storedData&&(b=this.storedData.bookAService,this.storedData.vin&&this.$expressBookingVin.val(this.storedData.vin),this.storedData.serviceMonth&&this.storedData.serviceYear&&(a=new Date(this.storedData.serviceMonth+" 01 "+this.storedData.serviceYear),a.getTime()>(new Date).getTime()&&this.$expressBookingDateMod.data(i.attributes.prefill,("0"+(a.getMonth()+1)).slice(-2)+" 01 "+a.getFullYear())),b&&(b.vehicleName&&this.$expressBookingModel.val(b.vehicleName),b.favouriteDealers.length?this.modules[this.settings.list[1]].app.initialiseDealer(!0,b.favouriteDealers[0]):this.showModule(this.settings.list[1]),b.upcomingServices&&(this.$expressBookingServicesRadio.prop("checked",!0),this.$expressBookingServices.val(b.upcomingServices),this.$expressBookingServicesOtherServices.addClass("open"),this.$longJourneyServices.addClass("hiding"),this.$servicesList.rules("remove","helios_notblank"),this.$servicesList.valid())),this.$el.trigger(i.events.prefill))},clearPrefilledData:function(){localStorage.removeItem("c_141")},clearForm:function(){this.$form.get(0).reset(),this.$customerDetails.find(i.selectors.selectedValue).text(this.$expressBookingTitle.find("option").eq(0).text())},getToggler:function(b){return this.$togglerButtons.filter(function(){return a(this).data(i.attributes.moduleName)===b})},setTogglerValue:function(a,b){var c=this.getToggler(a).find("span[data-original]");c.text(b||c.attr("data-original"))},disableToggler:function(a){this.getToggler(a).removeClass(i.classNames.active)},enableToggler:function(a){this.getToggler(a).addClass(i.classNames.active)},hideModule:function(a,b){var c=this.modules[a];this.disableToggler(a),void 0!==b&&!b||this.oldIE?c.$container.removeClass(i.classNames.open):(c.$inner.css("height",c.$inner.outerHeight()).addClass(i.classNames.animating),c.$container.addClass(i.classNames.hiding),_.defer(function(){c.$inner.css("height",0)}),clearTimeout(c.timeout),c.timeout=window.setTimeout(_.bind(this.onInnerTransitionEnd,this,this.modules[a]),200))},
showModule:function(a,b){var c,d=this.modules[a];return this.currentModule=a,this.hideContainers().showContainer(a,b),"services"===a&&this.fullJourney&&(this.expressBooking?(this.$servicesExpressBooking.removeClass(i.classNames.hiding),this.$services.addClass(i.classNames.hiding),this.$expressServicesRadio.rules("add",{required:!0}),this.$servicesList.rules("remove","helios_notblank"),this.$servicesList.valid()):(this.$servicesExpressBooking.addClass(i.classNames.hiding),this.$services.removeClass(i.classNames.hiding),this.$servicesList.rules("add",{helios_notblank:this.$servicesList.data("validation-notblank")}),this.$expressServicesRadio.rules("add",{required:!1}),this.$expressServicesRadio.valid()),this.$fullJourneyInput.val(!this.expressBooking)),"undefined"!=typeof animation&&!animation||this.oldIE?d.$container.addClass(i.classNames.open).removeClass(i.classNames.hiding):(d.$inner.prop("style").removeProperty("height"),c=d.$inner.outerHeight(),d.$inner.addClass(i.classNames.animating),_.defer(function(){d.$inner.css({height:c})}),clearTimeout(d.timeout),d.timeout=window.setTimeout(_.bind(this.onInnerTransitionEnd,this,this.modules[a]),200),d.$container.addClass(i.classNames.open)),d.app.onShow(),this.validation.hideGroupErrors(),this},onInnerTransitionEnd:function(a){clearTimeout(a.timeout),a.$container.hasClass(i.classNames.hiding)&&a.$container.removeClass(i.classNames.open),a.$inner.removeClass(i.classNames.animating).prop("style").removeProperty("height"),a.$container.removeClass(i.classNames.hiding)},hideContainers:function(){var a=this;return this.each(function(b,c){a.hideModule(b,c.$container.hasClass(i.classNames.open)),a.disableToggler(b)}),this},showContainer:function(a,b){var c=this.modules[a].$container;return this.hideCustomerDetails(),this.enableToggler(a),this.scrollTo(c,b),this},scrollTo:function(b,c){var d;this.scrollTimeout&&window.clearTimeout(this.scrollTimeout),c&&c<this.settings.list.length&&(d=this.settings.list[c-1],b=this.modules[d].$container),this.scrollTimeout=window.setTimeout(function(){a("html, body").animate({scrollTop:b.offset().top},230)},500)},buildModule:function(c,d){var e,f=c.find(i.selectors.moduleElement),g=null;return this.settings.values&&this.settings.values[d]&&(g=this.settings.values[d]),e=f.data(i.attributes.instance)?f.data(i.attributes.instance):new b(f,d,this.HELIOS,this.window),this.initModulesEvents(e),-1!==a.inArray(d,this.settings.list)&&{$container:c,$inner:f.closest(i.selectors.inner),$el:f,value:g,app:e}},initModulesEvents:function(b){b.on("change",a.proxy(this.onModuleChange,this,b)),b.on("validate",a.proxy(this.validateSilently,this,b))},onModuleChange:function(a){var b=a.name,c=a.value,d={},e=!1;return void 0!==a.expressBooking&&(this.expressBooking=a.expressBooking,this.fullJourney=d.fullJourney=!0,e=!0,d.expressBooking=a.expressBooking),"car"===a.name&&(d.vinCode=a.value,e=!0),a.dealerId&&(d.dealerId=a.dealerId,e=!0),a.shortDealerId&&(d.shortDealerId=a.shortDealerId,e=!0),"services"===a.name&&(e=!0,d.service=a.value,d.serviceIndex=a.index),"date"===a.name&&(e=!0),e&&this.setModValues(d),this.setTogglerValue(b,c),this.completeModule(b),this.hideModule(b),this.lockDealer&&b===this.settings.list[0]?this.showNext(this.settings.list[1]):this.showNext(b),this},validateSilently:function(a){var b=a.name,c=a.value,d={},e=!1;this.setTogglerValue(b,c),this.completeModule(b),a.dealerId&&(d.dealerId=a.dealerId,e=!0),a.shortDealerId&&(d.shortDealerId=a.shortDealerId,e=!0),"services"===a.name&&(d.serviceIndex=a.index,e=!0),e&&this.setModValues(d),"dealer"!==a.name||this.dealerModAlreadyValidate||(this.$expressBookingDateMod.closest(i.selectors.module).find(i.selectors.toggler).click(),this.dealerModAlreadyValidate=!0,this.clearPrefilledData())},showNext:function(a){var b,c,d=this.settings.list,e=1;for(b=_.indexOf(d,a),c=d[b+e];c&&!_.isNull(this.modules[c].app.value);)e++,c=d[b+e];c?this.showModule(c,b+1):this.showCustomerDetails()},each:function(b){return a.each(this.modules,b),this},getValues:function(){var a={};return this.each(function(b,c){a[b]=c.value}),a},completeModule:function(a){this.modules[a].$container.addClass(i.classNames.complete)},hideCustomerDetails:function(){this.validation.disableFormSubmitButton(),a(i.selectors.customerDetails).find("input, select").prop("disabled",!0).end().removeClass(i.classNames.visible)},showCustomerDetails:function(){var b,c=this.settings.analyticsManager,d={componentId:this.settings.HELIOS.adobe.tagging.componentId,formStepName:"input-customer-details",formStepNumber:"step-5",formName:this.settings.HELIOS.adobe.tagging.formName};this.validation.enableFormSubmitButton(),this.validation.disableGroupErrors(),this.validation.hideGroupErrors(),b=a(i.selectors.customerDetails),b.find("input, select").prop("disabled",!1).end().addClass(i.classNames.visible),this.scrollTo(b),c.tag(c.trackingVars.formSteps,d)},previousIsValid:function(a){var b=HELIOS.components.c_142.settings.list.indexOf(a)-1;return-1===b||null!==this.modules[HELIOS.components.c_142.settings.list[b]].app.value},setModValues:function(b){this.each(function(){a.extend(this.app,b)})}},{App:e,init:g,Module:b,getInstance:f}}),define("c_142A_0",["jquery","c_142"],function(a,b){"use strict";function c(c){var e,f=a(d.selectors.root);return!!f.length&&(e=b.init(f,c),e.init(),e)}var d={selectors:{root:".c_142A-0"}};return{init:c,getInstance:b.getInstance}}),define("c_142A_1",["jquery","c_142"],function(a,b){"use strict";function c(b,c,e){var f,h;return c=c||document.body,h=a(g.selectors.root),f=new d(h,b),h.data(g.data.moduleInstance,f),(void 0===e||e)&&f.init(),f}var d,e="c_142A_1",f="car",g={events:{click:"click."+e,keyup:"keyup."+e},selectors:{root:".c_142A-1",submit:".submit-module",carIdentifier:"#carIdentifier"},data:{moduleInstance:"basModule"}},h="C142_Book_A_Service";return d=function(b,c){this.$el=a(b),this.name=f,this.settings=a.extend({},g,c)},d.prototype.init=function(){this.instance=b.getInstance(this.$el,this.settings.HELIOS),this.instance&&(this.instance.app=this),this.bindEvents(),_.isEmpty(a(this.settings.selectors.carIdentifier).val())||this.validatePrefilled()},d.prototype.bindEvents=function(){return this.$el.find(this.settings.selectors.submit).on(this.settings.events.click,_.bind(this.clickHandler,this)),this.$el.find(g.selectors.carIdentifier).on(this.settings.events.keyup,_.bind(this.onInputKeyup,this)),this},d.prototype.onInputKeyup=function(a){13===a.which&&(a.preventDefault(),this.clickHandler())},d.prototype.clickHandler=function(){var b=a(this.settings.selectors.carIdentifier).val(),c=this.settings.analyticsManager,d={componentId:h,formName:"Book-a-service",formStepName:"select-your-dealer",formStepNumber:"step-2"};this.instance&&this.instance.set(b),c.tag(c.trackingVars.formSteps,d)},d.prototype.validatePrefilled=function(){this.instance&&this.instance.set(a(this.settings.selectors.carIdentifier).val(),!0)},{init:c}}),define("c_142A_2",["jquery","c_142A_0"],function(a,b){"use strict";function c(b,c,e){var f,h;return c=c||document.body,h=a(g.selectors.root),f=new d(h,b),h.data(g.data.moduleInstance,f),(void 0===e||e)&&f.init(),f}var d,e="c_142A_2",f="services",g={events:{click:"click."+e,change:"change."+e,prefill:"prefill.c_142"},selectors:{root:".c_142A-2",radio:"input[type=radio]",serviceContainer:".service",moreServicesRadio:".more-services-radio",submit:".submit-module",otherServices:".other-services",error:".error-message",serviceName:".custom-radio label",tooltipIndex:".c_042B",tooltipButton:".tooltip-button",tooltipContentTitle:".tooltip-content h3"},classes:{open:"open",show:"show",active:"active"},data:{moduleInstance:"basModule",serviceTitle:"service-title"}},h="C142_Book_A_Service";return d=function(b,c){this.$el=a(b),this.name=f,this.settings=a.extend({},g,c),this.clickHandler=_.bind(this.clickHandler,this),this.tooltipTracking=_.bind(this.tooltipTracking,this)},d.prototype.init=function(){this.instance=b.getInstance(this.$el,this.settings.HELIOS,this.settings.window,this.settings.analyticsManager),this.instance&&(this.instance.app=this),this.$radios=this.$el.find(this.settings.selectors.radio),this.$moreServicesWrapper=this.$el.find(this.settings.selectors.otherServices),this.$error=this.$el.find(this.settings.selectors.error),this.validated=!1,this.bindEvents()},d.prototype.bindEvents=function(){this.$el.find(this.settings.selectors.submit).on(this.settings.events.click,_.bind(this.clickHandler,this)),this.$radios.on(this.settings.events.change,_.bind(this.toggleHandler,this)),this.$el.closest(".c_142").on(this.settings.events.prefill,_.bind(this.validatePrefilled,this)),this.$el.find(this.settings.selectors.tooltipButton).on(this.settings.events.click,this.tooltipTracking)},d.prototype.tooltipTracking=function(b){var c=a(b.currentTarget),d=a(this.settings.selectors.tooltipIndex),e=d.find(this.settings.selectors.tooltipButton),f=this.settings.analyticsManager,g=c.closest(this.settings.selectors.serviceContainer).data(this.settings.data.serviceTitle),i={componentId:h,tooltipTitle:g};e.hasClass(this.settings.classes.active)&&f.tag(f.trackingVars.tooltipDisplay,i)},d.prototype.toggleHandler=function(){var a=this.getChecked(),b=a.closest(this.settings.selectors.serviceContainer),c=this.settings.analyticsManager,d=b.data(this.settings.data.serviceTitle),e=a.is(this.settings.selectors.moreServicesRadio),f={componentId:h,contentAction:d};this.triggerError(!1),this.$moreServicesWrapper.toggleClass(this.settings.classes.open,e),e&&this.$moreServicesWrapper.find("textarea").focus(),c.tag(c.trackingVars.buttonNoCookie,f)},d.prototype.getChecked=function(){return this.$radios.filter(":checked")},d.prototype.getServiceIndex=function(){var a=this.getChecked().closest(".service");return a.length?a.index()+1:4},d.prototype.clickHandler=function(){var a=this.getChecked(),b=this.settings.analyticsManager,c={componentId:h,formName:"book-a-service",formStepName:"select-your-date-time",formStepNumber:"step-4"},d="";a.length?(d=a.val(),this.instance&&(this.instance.index=this.getServiceIndex(),this.instance.set(d))):(this.triggerError(!0),c.errorMessage=this.$error.text()),b.tag(b.trackingVars.formSteps,c)},d.prototype.validatePrefilled=function(){var a,b=this.getChecked();this.validated||(b.length&&(a=b.val(),this.instance&&(this.instance.index=this.getServiceIndex(),this.instance.set(a,!0))),this.validated=!0)},d.prototype.triggerError=function(a){this.$error.toggleClass(this.settings.classes.show,a)},{init:c}}),define("c_142A_4",["jquery"],function(a){"use strict";function b(){}return{init:b}}),define("c_142A_5",["jquery","c_022","storageManager"],function(a,b,c){"use strict";function d(){var a=m.$el,b={latitude:a.data("lat"),longitude:a.data("lon")},c={title:""};m.addMarker(c,b,"alpha",!0)}function e(a){var c=a.find(o.mapContainerSelect)[0],e={HELIOS:o.HELIOS};m=b.initInstance(c,e,!1),m.promise().done(d)}function f(b){c.init(),o=a.extend({},n,b),l=a(o.selectors.root),l.length&&(e(l),g(),h(),i(),j())}function g(){var a=c.loadItem(o.analytics.formCount,{mode:o.sessionStorage});a?c.saveItem(o.analytics.formCount,a+1,{mode:o.sessionStorage}):c.saveItem(o.analytics.formCount,1,{mode:o.sessionStorage})}function h(){var a=o.analyticsManager,b=c.loadItem(o.analytics.formCount,{mode:o.sessionStorage}),d={componentId:o.selectors.componentId,formCount:b};a.append(a.trackingVars.formCount,d)}function i(){var a=o.analyticsManager,b={componentId:o.selectors.componentId,formStepName:o.analytics.formStepName,formStepNumber:o.analytics.formStepNumber,formName:o.analytics.formName,serviceType:l.find(o.selectors.serviceName).text()};a.append(a.trackingVars.pageLoad,b)}function j(){a(o.selectors.directionsButton).on("click",function(){k(this)})}function k(a){var b=l.find(o.selectors.info),c=o.analyticsManager,d=l.find(o.selectors.dealerName).text(),e=l.find(o.selectors.dealerAddressPlace).text(),f=l.find(o.selectors.dealerAddressCity).text(),g=l.find(o.selectors.dealerAddressNumber).text(),h=b.data(o.data.dealerId),i=b.data(o.data.dealerType),j={componentId:o.selectors.componentId,dealerId:h,dealerType:i,dealerName:d,dealerAddress:e+","+f+","+g,dealerAction:"get-directions"};c.tag(c.trackingVars.dealerInteraction,j)}var l,m,n={mapContainerSelect:".c_022",selectors:{root:".c_142A-5",info:".col-4",directionsButton:".get-directions",componentId:"C142-5_Book_A_Service",serviceName:".service-name",bookingReference:".booking-reference-number",dealerName:".dealer-name",dealerAddressPlace:".dealer-address p:nth-child(2)",dealerAddressCity:".dealer-address p:nth-child(3)",dealerAddressNumber:".dealer-address p:last-child"},analytics:{componentId:"C58_Book_A_Test_Drive_Confirmation",formName:"book-a-service",formStepName:"complete",formStepNumber:"complete",formCount:"formCount"},data:{dealerId:"dealerid",dealerType:"dealertype"},sessionStorage:"sessionStorage"},o=null;return{init:f}}),define("c_142B_0",["jquery","c_142"],function(a,b){"use strict";function c(c){var e,f=a(d.selectors.root);return!!f.length&&(e=b.init(f,c),e.init(),e)}var d={selectors:{root:".c_142B-0"}};return{init:c,getInstance:b.getInstance}}),define("c_142B_1",["jquery","c_142"],function(a,b){"use strict";function c(b,c,e){var f,h;return c=c||document.body,h=a(g.selectors.root),f=new d(h,b),h.data(g.data.moduleInstance,f),(void 0===e||e)&&f.init(),f}var d,e="c_142B_1",f="car",g={events:{click:"click."+e,keyUp:"keyup."+e},selectors:{root:".c_142B-1",group:".form-group",submit:".submit-module",toggler:".btn-subtoggler",searchWrapper:".search-wrapper",input:"input[type=text]",carIdentifier:"#carIdentifier",plateNumber:"#plateNumber",tooltipIndex:".c_042B",tooltipButton:".tooltip-button",tooltipContentTitle:".tooltip-content h3"},data:{moduleInstance:"basModule"},classNames:{open:"open",expressBookingInput:"express-booking",active:"active"}},h="C142_Book_A_Service";return d=function(b,c){this.$el=a(b),this.name=f,this.settings=a.extend({},g,c),this.clickHandler=_.bind(this.clickHandler,this),this.tooltipTracking=_.bind(this.tooltipTracking,this),this.toggleContent=_.bind(this.toggleContent,this),this.keyboardHandler=_.bind(this.keyboardHandler,this)},d.prototype.init=function(){this.instance=b.getInstance(this.$el,this.settings.HELIOS),this.$groups=a(this.settings.selectors.root).find(this.settings.selectors.group),this.current=null,this.opened=!1,this.bindEvents(),_.isEmpty(a(this.settings.selectors.plateNumber).val())||this.validatePrefilled()},d.prototype.bindEvents=function(){return this.$el.find(this.settings.selectors.submit).on(this.settings.events.click,this.clickHandler),this.$el.find(this.settings.selectors.toggler).on(this.settings.events.click,this.toggleContent),this.$el.find(this.settings.selectors.tooltipButton).on(this.settings.events.click,this.tooltipTracking),this.$el.find(this.settings.selectors.input).on(this.settings.events.keyUp,this.keyboardHandler),this},d.prototype.keyboardHandler=function(b){b.preventDefault(),13===b.which&&a(b.target).blur().closest(this.settings.selectors.searchWrapper).find(this.settings.selectors.submit).trigger(this.settings.events.click)},d.prototype.tooltipTracking=function(b){var c=a(b.currentTarget),d=a(this.settings.selectors.tooltipIndex),e=d.find(this.settings.selectors.tooltipButton),f=this.settings.analyticsManager,g=c.closest(this.settings.selectors.tooltipIndex).find(this.settings.selectors.tooltipContentTitle).text(),i={componentId:h,tooltipTitle:g};e.hasClass(this.settings.classNames.active)&&f.tag(f.trackingVars.tooltipDisplay,i)},d.prototype.clickHandler=function(b){var c,d=a(b.currentTarget),e=d.closest(this.settings.selectors.searchWrapper).find("input"),f=d.closest(this.settings.selectors.group).siblings().find("input"),g=this.settings.analyticsManager,i={componentId:h,formName:"Book-a-service",formStepName:"select-your-dealer",formStepNumber:"step-2"};g.tag(g.trackingVars.formSteps,i),this.toggleRequired(e,f),f.val(""),this.instance&&e.valid()&&(c=e.val(),this.instance.expressBooking=e.hasClass(this.settings.classNames.expressBookingInput),this.instance.set(c))},d.prototype.toggleRequired=function(a,b){b.length&&(a.rules("add","required"),b.rules("remove","required"))},d.prototype.toggleContent=function(b){var c=a(b.currentTarget),d=c.closest(this.settings.selectors.group).index(),e=this.settings.analyticsManager,f=c.text(),g={componentId:h,buttonText:f,contentAction:"VIN selection",locationInPage:"book a service-select a vehicle"};null===this.current?this.openContent(d):(this.opened=!1,this.$groups.eq(this.current).removeClass(this.settings.classNames.open),this.current!==d?this.openContent(d):this.current=null),this.$el.toggleClass(this.settings.classNames.open,this.opened),e.tag(e.trackingVars.buttonNoCookie,g)},d.prototype.openContent=function(a){this.opened=!0,this.current=a,this.$groups.eq(this.current).addClass(this.settings.classNames.open)},d.prototype.validatePrefilled=function(){var b=a(this.settings.selectors.plateNumber),c=a(this.settings.selectors.carIdentifier);this.instance&&(this.toggleRequired(b,c),c.val(""),this.instance.expressBooking=b.hasClass(this.settings.classNames.expressBookingInput),this.instance.set(b.val(),!0))},{init:c}}),define("c_142B_5",["jquery","c_022"],function(a,b){"use strict";function c(){a(j.toggler,j.root).on("click",d)}function d(b){a(j.togglerContent).slideToggle(),a(".icon",b.target).toggleClass("icon-plus")}function e(){var a,b={};if(!h)return!1;a=h.$el,b.latitude=a.data("lat"),b.longitude=a.data("lon"),h.addMarker({},b,"alpha",!0)}function f(a){var c=a.find(j.mapContainerSelect)[0],d={HELIOS:j.HELIOS};c&&(h=b.initInstance(c,d,!1),h.promise().done(e))}function g(b){var d;j=a.extend({},i,b),d=a(j.root),d.length&&(f(d),c())}var h,i={root:".c_142B-5",mapContainerSelect:".c_022",toggler:".toggle-special",togglerContent:".special-days"},j=null;return{init:g}}),define("c_154",["jquery","underscore","accordion","accordionItem","waypoints"],function(a,b,c,d,e){"use strict";function f(b){if(m=a.extend({},k,b),j=a(m.selectors.root),!j.length)return!1;j.each(function(){i(a(this))}),g()}function g(){j.find(m.selectors.accordionHeaderContent).on("click",m.selectors.accordionDisclaimer,function(a){a.stopPropagation()}),a(m.selectors.accordionUnit,m.selectors.root).on("click",function(b){"open"===a(b.currentTarget).attr("data-state")&&h(this)})}function h(b){var c=a(b),d=c.find(m.selectors.accordionHeaderSpan).text(),e=a(m.selectors.root).attr("data-vehicle-category"),f=a(m.selectors.root).attr("data-vehicle-id"),g=a(m.selectors.root).attr("data-vehicle-model"),h=m.analyticsManager.trackingVars.accordionExpansion,i=m.analyticsManager.getTrackingObjectProperties(h),j={};j[i.componentId]=l,j[i.vehicleCategory]=e,j[i.vehicleId]=f,j[i.accordionText]=d,j[i.vehicleModel]=g,j[i.accordionType]="responsive",m.analyticsManager.tag(h,j)}function i(e){var f,g,h=a(m.classes.panelContentClass,e),i=a(m.classes.panelHeaderClass,e),k=function(){Waypoint.refreshAll()},l=[],n=[],o=i.filter('[data-state="open"]').parent();if(o.size()>0){var p=i.parent();o.each(function(){n.push(p.index(a(this)))})}for(g=0,f=i.length;g<f;g++)l.push(new d({$contentElement:h.eq(g),$headerElement:i.eq(g),isDisabled:!1,isOpen:b.contains(n,g),multipleOpenEnabled:m.accordion.multipleOpenEnabled,transitionToClose:"slideUp",callback:k}));new c({$container:j,isScrollOnOpenEnabled:m.accordion.scrollOnOpenEnabled,isMultipleOpenItemsEnabled:m.accordion.multipleOpenEnabled,items:l,transitionToClose:"slideUp"})}var j,k={classes:{groupClass:".accordion-group",panelContentClass:".accordion-panel",panelHeaderClass:".accordion-header"},selectors:{root:".c_154",accordionUnit:".accordion-header",accordionHeaderContent:"h2.accordion-header span",accordionHeaderSpan:"span",accordionDisclaimer:".c_008",pageTitle:"h1",trackingExceptChild:".c_028"},accordion:{scrollOnOpenEnabled:!0,multipleOpenEnabled:!0,defaultOpen:-1}},l="C154_Responsive_Accordion",m=null;return{init:f}}),define("c_160",["jquery","underscore","handlebars","trackingCodes","dateFormat","storageManager","storageManagerKeys","disclaimers"],function(a,b,c,d,e,f,g,h){"use strict";function i(c,d){var e,f=[];return m=a.extend({},c,l),e=a(m.selectors.content).html(),j=a(e),!!j.length&&(j.each(function(a,e){f.push(new k(j,m)),(b.isUndefined(d)||d)&&f[a].init(c)}),f)}var j,k,l={events:{click:"click"},classes:{component:"c_160",loading:"loading",vehicleDetailsHide:"vehicle-details-hide",hide:"vehicle-details-hide"},selectors:{root:".c_160",content:'script[data-component="c_160"]',parentRoot:"body",parentContainer:".vehicle-details-container",error:".ajax-errors",vehicleDetails:".vehicle-details",vehicleCta:".vehicle-cta",vehicleDetailsTemplate:".vehicle-details-template",vehicleDetailsItems:".vehicle-details-items",vehicleDetailsHeader:".vehicle-details-items span",vehicleDetailsContent:".vehicle-details-items strong",vehicleDetailsErrorContent:".vehicle-details-error-content",vehicleDetailsCta:".vehicle-cta .cta-link",basicInformationLabels:".basic-information-labels li"},data:{url:"url",display:"display",list:"list",labels:{vin:"Vin",firstRegistered:"First registered"}},prop:{outerHTML:"outerHTML"},clean:{cta:"cta",all:"all"},storageManagerOptions:{mode:"localStorage"}},m=null;return k=function(a,c){this.cacheElements(a,c),this.vehicleDetailsData=f.loadItem(g.vehicleDetails.data,this.settings.storageManagerOptions),this.vehicleDetailsData?this.endPoint=this.$partial.find(this.settings.selectors.vehicleDetails).data(this.settings.data.url)+"?vin="+this.vehicleDetailsData.vin:this.endPoint=this.$partial.find(this.settings.selectors.vehicleDetails).data(this.settings.data.url),this.compileDetailsTemplate(),b.bindAll(this,"onAjaxDone","onAjaxFail","handleAnalyticsClick","cleanPartial","addVehicleInformation")},k.prototype={init:function(){this.fetchVehicleDetail(),a(this.settings.selectors.parentRoot).on(this.settings.events.click,this.settings.selectors.vehicleDetailsCta,this.handleAnalyticsClick)},compileDetailsTemplate:function(){var b;this.displayCTA||this.$vehicleCta.remove(),b=j.find(this.settings.selectors.vehicleDetailsTemplate).html(),this.vehicleDetailsTemplate=c.compile(a.trim(b))},cacheElements:function(b,c){this.settings=c,this.$partial=b,this.$error=this.$partial.find(this.settings.selectors.error),this.$vehicleDetails=this.$partial.find(this.settings.selectors.vehicleDetails),this.$vehicleDetailsTemplate=this.$partial.find(this.settings.selectors.vehicleDetailsTemplate),this.$vehicleDetailsErrorContent=this.$partial.find(this.settings.selectors.vehicleDetailsErrorContent),this.$vehicleCta=this.$partial.find(c.selectors.vehicleCta),this.$parentContainer=a(c.selectors.parentContainer),this.$parentRoot=a(c.selectors.parentRoot),this.labelsDictionary=this.createLabelsConfigurationObject(),this.displayCTA=this.$vehicleCta.data(this.settings.data.display)},createLabelsConfigurationObject:function(){var a=this.$partial.find(this.settings.selectors.vehicleDetails).data(this.settings.data.list).split("|"),c={};return b.each(a,function(a,b,d){c[a.split("=")[0]]=a.split("=")[1]}),c},fetchVehicleDetail:function(){a.ajax({url:this.endPoint,type:"GET"}).done(this.onAjaxDone).fail(this.onAjaxFail)},onAjaxDone:function(c){var d,e;b.isEmpty(c)?this.cleanPartial(this.settings.clean.all):(this.cleanPartial(),this.addVehicleInformation(c),d=b.clone(c.basicInformation),c.basicInformation=this.mapBasicInformation(c.basicInformation),this.$vehicleDetails.append(this.vehicleDetailsTemplate({basicInformation:this.slidesToTable(c.basicInformation,5)})),this.detailedName=c.detailedName,this.$parentContainer.append(this.$partial.prop("outerHTML")),this.$parentRoot.find("h1").append("<span>"+c.detailedName+"</span>"),e=a(m.selectors.root),b.has(this.vehicleDetailsData,"basicInformation")||(this.vehicleDetailsData.basicInformation=d),b.has(this.vehicleDetailsData,"equipment")||(this.vehicleDetailsData.equipment=c.equipment),b.has(this.vehicleDetailsData,"detailedName")||(this.vehicleDetailsData.detailedName=c.detailedName)),e.length&&this.renderDisclaimerInformation(e),this.vehicleDetailsData.isEmptyResponse=b.isEmpty(c),this.updateVehicleDetails()},updateVehicleDetails:function(){f.saveItem(g.vehicleDetails.data,this.vehicleDetailsData,this.settings.storageManagerOptions)},renderDisclaimerInformation:function(a){h.renderDisclaimers(a)},addVehicleInformation:function(a){a.basicInformation.unshift({name:this.labelsDictionary[this.settings.data.labels.vin],value:this.vehicleDetailsData.vin,label:this.settings.data.labels.vin}),a.basicInformation.unshift({name:this.labelsDictionary[this.settings.data.labels.firstRegistered],value:this.formatDate3t(this.vehicleDetailsData.firstRegistrationDate),label:this.settings.data.labels.firstRegistered})},mapBasicInformation:function(a){var c=[];return b.each(a,function(a,b,d){a.label&&this.labelsDictionary[a.label]&&a.value&&a.value.length?(a.name=this.labelsDictionary[a.label],c.push(a)):a.label||(a.name&&this.labelsDictionary[a.name]?(a.name=this.labelsDictionary[a.name],c.push(a)):c.push(a))},this),c},onAjaxFail:function(a){this.cleanPartial(this.settings.clean.cta),this.$vehicleDetailsErrorContent.removeClass(this.settings.classes.hide),this.$vehicleDetails.addClass(this.settings.classes.hide),this.$parentContainer.append(this.$partial.prop("outerHTML")),this.error=a.status,this.vehicleDetailsData.statusCode=a.status,this.updateVehicleDetails()},cleanPartial:function(a){switch(this.$vehicleDetails.empty(),this.$parentContainer.removeClass(this.settings.classes.loading),a){case this.settings.clean.cta:this.$vehicleCta.remove();break;case this.settings.clean.all:this.$parentContainer.remove(),this.$vehicleCta.remove()}},slidesToTable:function(a,c){var d=[],e=[];return b.each(a,function(a,b){b>0&&b%c==0&&(d.push(e),e=[]),e.push(a)}),e.length>0&&d.push(e),d},handleAnalyticsClick:function(b){var c=a(b.currentTarget),e=c.text(),f=b.currentTarget.href,g=m.analyticsManager,h={componentId:d.componentIds.C118_My_Car,destination:f,locationInPage:"os-my car",buttonText:e,vehicleModel:this.detailedName};g.tag(g.trackingVars.genericClick,h)},formatDate3t:function(a){return Date.parse(a)?e.formatThreeTier(new Date(a))||a:a}},{init:i,App:k}}),define("c_170",["jquery"],function(a){"use strict";function b(){if(e=a(f.selectors.root),!e.length)return!1;c()}function c(){var b=e.data(f.datas.url);b&&!g&&a.getScript(b,d)}function d(){g=!0}var e,f={selectors:{root:".c_170"},datas:{url:"script-url"}},g=!1;return{init:b,onSuccess:d}}),define("c_180",["jquery","modal","storageManager"],function(a,b,c){"use strict";function d(b){if(l=a.extend({},k,b),i=a(l.selectors.root),!i.length)return!1;c.init(),f(),e()}function e(){a("body").on(l.events.priceWarning,function(a,b){!0===b&&g(!1),h()||j.open()}),j.$root.on(l.events.modalClose,function(){g(!0)})}function f(){j=new b({content:i.html(),displayType:b.TYPE_CENTERED,customClass:l.classes.modal,customOverlayClass:"modal-overlay-dark"})}function g(a){c.saveItem(l.storageKey,!!a)}function h(){return!0===c.loadItem(l.storageKey)}var i,j,k={events:{priceWarning:"priceManager.priceWarning",modalClose:"modal.close"},selectors:{root:".c_180"},classes:{modal:"c_180-modal"},storageKey:"c_180-priceWarningRead"},l=null;return{init:d}}),define("c_185",["jquery","underscore"],function(a,b){"use strict";function c(a,c){if(b.bindAll(this,"alignItems"),this.settings=c,this.$el=a,!this.$el.length)return!1}function d(d,e){var g=a.extend({},f,d),h=a(g.selectors.root),i=[];if(h.length)return b.each(h,function(d,f){i[f]=new c(a(d),g),a(d).data("app",i[f]),(e||b.isUndefined(e))&&i[f].render()}),i}var e=".c_185",f={maxStackableElms:4,events:{resize:"resize"+e},selectors:{root:".c_185",items:"li",achievements:".achievements"}};return c.prototype.render=function(){return this.$items=a(this.settings.selectors.items,this.$el),this.$achievements=a(this.settings.selectors.achievements,this.$el),this.bindEvents(),this.$items.length<=this.settings.maxStackableElms&&this.swapLayout(),this},c.prototype.refresh=function(){this.alignItems()},c.prototype.swapLayout=function(){this.$achievements.each(function(){a(this).addClass("columns has-"+a("li",this).length+"-children")})},c.prototype.alignItems=function(){var c=this.$items.height("auto").map(function(){return a(this).height()});this.$items.height(b.max(c))},c.prototype.bindEvents=function(){var c=this.settings.events.resize,d=b.throttle(this.alignItems,100);a(window).on(c,d).trigger(c)},{init:d}}),define("c_186_0",["jquery","underscore"],function(a,b){"use strict";function c(b){var c,d,f=o.classes.active,g=a(o.selectors.tabsSelectValue,j),h=a(o.selectors.tabsSelect,j),i=o.events.click.split(".")[0];b.type===i?(b.preventDefault(),c=a(b.target).closest("li"),d=c.index(),h[0].selectedIndex=d):(d=h[0].selectedIndex,c=a(o.selectors.tabsItems,j).eq(d)),c.addClass(f).siblings().removeClass(f),g.text(c.find("button").text()),n.eq(d).addClass(f).siblings().removeClass(f),e()}function d(b){a(b.currentTarget).closest(o.selectors.schedule).find("li").hide().eq(a(b.currentTarget).val()).show()}function e(){var c=a(o.selectors.tabsItems).is(":visible"),d=n.filter("."+o.classes.active),e=d.find(k),g=d.find(l),h=d.find(m),i=h.data("app");e.add(g).height("auto"),c&&(f(e),f(g)),b.isUndefined(i)||i.refresh()}function f(c){var d;if(!c||!c.length)return!1;d=c.map(function(){return a(this).height()}),c.height(b.max(d))}function g(){a(o.selectors.tabsBtn,j).on(o.events.click,c),a(o.selectors.tabsSelect,j).on(o.events.change,c),a(o.window).on(o.events.resize,b.throttle(e,200)),a(o.selectors.selectServices).on(o.events.change,d)}function h(b){o=a.extend({},q,b),j=a(o.selectors.root),j.length&&(k=a(o.selectors.membersItems,j),l=a(o.selectors.servicesItems,j),m=a(o.selectors.achievements,j),n=a(o.selectors.tabs,j),g(),e()),a(o.selectors.contact,j).on(o.events.click,function(){i(this)})}function i(b){var c=b,d=a(c),e=c.href,f=d.text(),g=o.analyticsManager.trackingVars.genericClick,h=o.analyticsManager.getTrackingObjectProperties(g),i={};i[h.componentId]="C186_Services",i[h.destination]=e,i[h.locationInPage]="aftersales-services",i[h.buttonText]=f,o.analyticsManager.track(g,i)}var j,k,l,m,n,o,p=".c186-0",q={events:{click:"click"+p,change:"change"+p,resize:"resize"+p},classes:{active:"active"},selectors:{root:".c_186-0",contact:".contact-btn",tagging:"[data-adobe-tagging]",servicesItems:".services li",achievements:".c_185",membersItems:".members li",tabsItems:".tabs-control li",tabsBtn:".tabs-control button",tabsSelect:".tabs-control .custom-selectbox select",tabsSelectValue:".tabs-control .custom-selectbox .selectedValue",tabs:".tab",schedule:".schedule",selectServices:".schedule select"}};return{init:h}}),define("c_182_1",["jquery"],function(a){"use strict";function b(b){if(f=a.extend({},e,b),d=a(f.selectors.root),!d.length)return!1;c()}function c(){d.find(f.classes.tabsInfo).each(function(b,c){var d=a(c),g=d.find("ul li"),h=d.find(f.classes.tabsContent);g.each(function(b){a(this).attr("data-tab-id",b)}),g.eq(0).addClass(e.selectors.activeTag),h.eq(0).addClass(e.selectors.activeTag),g.on("click",function(){var b=a(this);d.find(f.classes.activeClass).removeClass(f.selectors.activeTag),b.addClass(f.selectors.activeTag),h.eq(b.data("tabId")).addClass(f.selectors.activeTag)})})}var d,e={classes:{tabsInfo:".tabs-info",tabsContent:".tabs-content",activeClass:".active"},selectors:{root:".c_182_1",activeTag:"active"}},f=null;return{init:b}}),define("c_188_0",["jquery"],function(a){"use strict";function b(b){var j,k,l,m,n;if(i=a.extend({},h,b),j=i.window.document.URL,k=i.urlArgs.inventoryArg,l=k.test(j),g=a(i.selectors.root),m=g.find(i.selectors.tooltipTriggers),g.find(".tooltip-panel"),n=g.find(i.selectors.closeTooltip),!g.length)return!1;m.on("click",d),n.on("click",e),c(),l&&f()}function c(){var b=a(i.selectors.priceCurrency),c=a(i.selectors.priceValue);"right"===g.data(i.dataAttr.currencyAlignment)?c.after(b):c.before(b)}function d(b){var c=a(b.currentTarget),d=c.find(".tooltip-panel");b.preventDefault(),
d.hasClass("active")?d.removeClass("active"):d.addClass("active")}function e(b){b.preventDefault(),a(b.currentTarget).parent().find(".tooltip-panel").removeClass("active")}function f(){var a=g.data(i.dataAttr.model)||g.data(i.dataAttr.modelC);i.eventAggregator&&a&&i.eventAggregator.trigger(i.events.selectFacet,a.replace(i.regEx.pipe,"").replace(i.regEx.space,i.replaceEl.hyphen).toLowerCase())}var g,h={selectors:{root:".c_188-0",priceCurrency:".monthly-price .price-currency",priceValue:".monthly-price .price-value",tooltipTriggers:".tooltip-symbol",closeTooltip:".close-tooltip"},dataAttr:{currencyAlignment:"currency-alignment",model:"model",modelC:"model-c"},events:{selectFacet:"selectModelFacet"},urlArgs:{inventoryArg:/inventoryId/},replaceEl:{hyphen:"-"},regEx:{pipe:/(\\|\/)/g,space:/ /g}},i=null;return{init:b}}),define("c_189",["jquery","accordion","accordionItem","noUiSlider"],function(a,b,c,d){"use strict";function e(b){if(l=a.extend({},k,b),j=a(l.selectors.root),!j.length)return!1;f(),h(l.selectors.panelContentClass,l.selectors.panelHeaderClass,!1,i)}function f(){var b=a(l.selectors.elementRange),c=a(l.sliderOptions.tooltipsOptions),d=parseInt(b.data("low"),10),e=parseInt(b.data("high"),10),f=5*d,h=7*d,i=b.data("step");b.noUiSlider({connect:!0,step:i,range:{min:[d],max:[e]},start:[f,h]}),c.each(function(){g(this,b)})}function g(b,c){c.Link(b).to(l.sliderOptions.tooltipWrapper,function(b){a(this).html(b)})}function h(d,e,f,g){var h,i,k=a(d,j),l=a(e,j),m=[];for(i=0,h=l.length;i<h;i++)m.push(new c({$contentElement:k.eq(i),$headerElement:l.eq(i),isDisabled:!1,isOpen:0===i}));new b({$container:j,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:f,items:m})}var i,j,k={selectors:{root:".c_189",elementRange:".input-range",groupClass:".accordion-group",panelContentClass:".accordion-panel",panelHeaderClass:".accordion-header"},sliderOptions:{tooltipWrapper:"-inline-",tooltipsOptions:["lower","upper"]}},l=null;return{init:e}}),define("c_190_2",["jquery","slick","pictureFill"],function(a,b,c){"use strict";function d(b){l=a.extend({},k,b),g=a(l.selectors.root),h=a(l.selectors.carouselMain),i=a(l.selectors.thumbnailsMain),j=a(l.selectors.thumbnailEl),e(),f(),c()}function e(){j.on("click",function(b){var c=j.index(this);h.slickGoTo(c),j.removeClass(l.classes.activeClass),a(this).addClass(l.classes.activeClass)})}function f(){h.slick({arrows:j.length>1,asNavFor:l.selectors.thumbnailsContainer,onAfterChange:function(){var a=h.find(l.selectors.slickActive),b=a.index()-1;j.removeClass(l.classes.activeClass),j.eq(b).addClass(l.classes.activeClass)}})}var g,h,i,j,k={classes:{activeClass:"active",slickActiveClass:"active"},selectors:{thumbnailsContainer:".carousel-main-thumbnails",slickActive:".slick-active",carouselMain:".carousel-main-container",thumbnailsMain:".carousel-main-thumbnails",thumbnailEl:".thumbnail-el"}},l=null;return{init:d}}),define("c_139",["jquery"],function(a){"use strict";function b(b){if(f=a.extend({},e,b),d=a(f.selectors.printButton),!d.length)return!1;c()}function c(){d.on("click",function(b){var c=a(this),d=c.text(),e={componentId:f.analytics.componentId,destination:window.location.href,locationInPage:"print button",buttonText:d,contentAction:"print"};window&&window.print&&(f.analyticsManager.tag("buttonNoCookie",e),window.print())})}var d,e={selectors:{printButton:".c_139 button"},analytics:{componentId:"C139_Print_Button"}},f=null;return{init:b}}),define("c_190_6",["jquery","accordion","accordionItem","handlebarsHelpersLogic"],function(a,b,c,d){"use strict";function e(b){if(j=a.extend({},i,b),h=a(j.selectors.root),!h.length)return!1;f(j.selectors.panelContentClass,j.selectors.panelHeaderClass,!1,g)}function f(d,e,f,i){var k,l,m,n=a(d,h),o=a(e,h),p=[];for(g=o.data(j.properties.status),l=g?0:-1,m=0,k=o.length;m<k;m++)p.push(new c({$contentElement:n.eq(m),$headerElement:o.eq(m),isDisabled:!1,isOpen:m===l}));new b({$container:h,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:f,items:p})}var g,h,i={selectors:{root:".c_190-6",groupAccordion:".accordion-group",panelContentClass:".accordion-panel",panelHeaderClass:".accordion-header"},properties:{status:"default"}},j=null;return{init:e}}),define("c_190_7",["jquery"],function(a){"use strict";function b(b){if(f=a.extend({},g,b),e=a(f.selectors.root),!e.length)return!1;d(),c(f)}function c(){var a=e.find(f.selectors.tooltipSymbol),b=e.find(f.selectors.tooltiPanel),c=e.find(f.selectors.contactDealer);f.argusUrl&&c.on(f.events.click,function(a){a.preventDefault(),f.window.open(f.argusUrl)}),a.on(f.events.click,function(){a.toggleClass(f.classes.active,b.hasClass(f.classes.active))})}function d(){var b=a(f.selectors.availableLabel);f.distanceDealer&&b.append(" - "+f.distanceDealer+" "+f.distanceUnitName)}var e,f,g={selectors:{root:".c_190-7",tooltiPanel:".tooltip-panel",tooltipSymbol:".tooltip-symbol",contactDealer:".contact-dealer",availableLabel:".dealer-name"},events:{click:"click"},classes:{active:"active"}};return{init:b}}),define("c_190_3",["jquery","c_008"],function(a,b){"use strict";function c(b){var c=a.extend({},g,b);if(e=a(c.selectors.root),!e.length)return!1;d(c)}function d(a){f=e.find(a.selectors.hasTooltip),b.createTooltips(f,a)}var e,f,g={selectors:{root:".c_190-3",hasTooltip:".has-tooltip"},tooltips:{useQtipContainer:!0}};return{init:c}}),define("c_190_4",["jquery","accordion","accordionItem"],function(a,b,c){"use strict";function d(b){if(i=a.extend({},h,b),g=a(i.selectors.root),!g.length)return!1;e(i.selectors.panelContentClass,i.selectors.panelHeaderClass,!1,f)}function e(d,e,h,j){var k,l,m,n=a(d,g),o=a(e,g),p=a(i.selectors.bodyUpdate),q=[];for(f=o.data(i.properties.status),l=f?0:-1,m=0,k=o.length;m<k;m++)q.push(new c({$contentElement:n.eq(m),$headerElement:o.eq(m),isDisabled:!1,isOpen:m===l}));new b({$container:g,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:h,items:q}),p.trigger(i.events.heliosUpdate)}var f,g,h={selectors:{root:".c_190-4",groupAccordion:".accordion-group",panelContentClass:".accordion-panel",panelHeaderClass:".accordion-header",bodyUpdate:"body"},properties:{status:"default"},events:{heliosUpdate:"helios.dealer.update"}},i=null;return{init:d}}),define("c_190_5",["jquery"],function(a){"use strict";function b(b){if(e=a.extend({},d,b),c=a(e.selectors.root),!c.length)return!1}var c,d={selectors:{root:".c_190-5"}},e=null;return{init:b}}),define("c_190_0",["jquery","handlebarsHelpersLogic","logger","underscore","c_133","numberFormat"],function(a,b,c,d,e,f){"use strict";function g(b){if(t=a.extend({},s,b),n=a(t.selectors.root),o=a(t.selectors.dealer),p=a(t.selectors.price),q=new c({prefix:"C190"}),!n.length)return!1;r=new f({HELIOS:t.HELIOS}),o.find(t.selectors.requestCallback).on(t.events.click,h),i()}function h(b){var c=a(b.currentTarget),d=c.data("href"),e=t.window.innerWidth,f=t.window.innerHeight,g=300,h=300,i=e/2-h/2,j=f/2-g/2;b.preventDefault(),t.window.open(d,t.callBackTitle,"top="+j+", left="+i+"px, resizable=no ,width="+h+"px, height="+g+"px")}function i(){a.ajax({url:t.HELIOS.config.common.pricing.rciProxyScriptUrl,dataType:"script"}).done(function(){k()}).fail(function(){j()})}function j(){p.find(t.selectors.monthlyPrice).removeClass(t.classes.loading).addClass(t.classes.hidden)}function k(){var b,c=p.data(),d=m(c);d.age&&(d.age=l(d.age)),d&&(b=new t.window.RCIProxy(d),b.addListener(t.events.proxyReady,function(){b.calculateFinancialOffer()}),b.addListener(t.events.financialOfferReloaded,function(){var c,d,f,g,h=b.getFinancialOffer(),i=h.getMonthlyPayment(),j=h.getShortOfferBody(),k=(h.getCurrency(),h.getDetailedOfferH1()),l=h.getDetailedOfferH2(),m=h.getDetailedOfferText(),n=h.getDetailedOfferLegalText(),o=t.window.cataloguejson.localisationData,q=p.find(t.selectors.monthlyPriceValue),r=p.find(t.selectors.monthlyPriceLabel),s=p.find(t.selectors.monthlyPrice).find(t.selectors.tooltipPanel),u=s.find(t.selectors.tooltipHeading),v=s.find(t.selectors.tooltipMainText),w=p.find(t.selectors.monthlyPrice);w.removeClass(t.classes.loading),q.length&&i?(c=i.split("."),d=c[0],f=c[1],u.html(k),v.html(l+m+n),w.addClass(t.classes.active),g=o.universalPrice.showDecimalZeroes?d+o.currency.decimalSeparatorSymbol+f:d,q.html(g),j&&r.html(j)):w.addClass(t.classes.hidden),h.getShortOfferSimulatorLink()&&(new e.FinanceCalculator(a(t.selectors.price+" "+t.selectors.monthlyPrice+" "+t.selectors.c_133),{}),a(t.selectors.price+" "+t.selectors.monthlyPrice+" "+t.selectors.c_133).addClass(t.classes.active))}))}function l(a){var b=12,c=new Date,d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate(),g=new Date(a),h=g.getFullYear(),i=g.getMonth()+1,j=g.getDate(),k=d-h,l=e-i,m=f-j,n=k*b+l;return m||(n-=1),n}function m(a){return d.pick(a,function(a){return""!==a&&null!==a&&!d.isUndefined(a)})}var n,o,p,q,r,s={selectors:{root:".c_190-0",dealer:".c_190-7",price:".c_188-0",monthlyPrice:".monthly-price",monthlyPriceValue:".monthly-price .value .price-value",monthlyPriceLabel:".monthly-price .price-label",requestCallback:".request-callback",c_133:".c_133",tooltipPanel:".tooltip-panel",tooltipHeading:".tooltip-heading",tooltipMainText:"p",priceCurrency:"price-currency"},classes:{active:"active",loading:"loading",hidden:"hidden"},events:{click:"click",proxyReady:"proxyReady",financialOfferReloaded:"financialOfferReloaded"},callBackTitle:"webCallback"},t=null;return{init:g}}),define("c_193_1",["jquery","underscore","storageManager"],function(a,b,c){"use strict";function d(b){m=a.extend({},l,b),k=a(m.selectors.root),k.length&&(e(k.data("offerId")),picturefill(a("body").get(0)))}function e(a){return remoteServices.getOffer(a).done(function(a){g(a),f(a),i(a)})}function f(a){var b,c=a.table;c.dataCol1=[],c.dataCol2=[],c&&c.data&&c.data.length>1&&(b=Math.ceil(c.data.length/2),c.dataCol1=c.data.slice(0,b),c.dataCol2=c.data.slice(b))}function g(b){a(document).on("click",m.selectors.root+" "+m.selectors.actions,function(c){var d=a(this);"contact"===d.data("action")&&h(b),"print"===d.data("action")&&(c.preventDefault(),window.print()),j(b,d)})}function h(a){var d,e;a.additionalTitle&&a.additionalTitle.headline&&a.additionalTitle.strapline&&(d=a.additionalTitle.headline,e=a.additionalTitle.strapline),m.analyticsManager.storeJourneyData("offer",b.now(),{offerId:a.id,offerTypeTitle:a.offerTypeTitle,offerHeadline:a.title.headline,offerStrapline:a.title.strapline,offerAdditionalHeadline:d||"",offerAdditionalStrapline:e||"",offerHighlight:a.highlight,vehicleModel:a.model.code,vehicleId:"not available",vehicleCategory:"not available"}),c.saveItem(m.localStorageKey,{offerId:a.id,offerModelName:a.model.name,offerApplicability:a.applicability,offerCaveat:a.caveat,offerTypeTitle:a.offerTypeTitle,offerStatus:a.status,offerHeadline:a.title.headline,offerStrapline:a.title.strapline,offerAdditionalHeadline:d||"",offerAdditionalStrapline:e||"",offerHighlight:a.highlight,offerRegion:a.region,offerValidity:a.validity})}function i(a){var b=m.analyticsManager.trackingVars.contentDisplayed,c=m.analyticsManager.getTrackingObjectProperties(b),d={};d[c.componentId]=n,d.offerId=a.id,d.offerText=a.title.headline,m.analyticsManager.track(b,d)}function j(a,b){var c=m.analyticsManager.trackingVars.genericClick,d=m.analyticsManager.getTrackingObjectProperties(c),e={};e[d.componentId]=n,e[d.destination]=b.attr("href"),e[d.locationInPage]=a.offerTypeTitle+" - "+a.model.name,e[d.buttonText]=b.text(),e[d.contentAction]=b.data("action"),e.offerId=a.id,e.offerText=a.title.headline,m.analyticsManager.track(c,e)}var k,l={selectors:{root:".c_193-1",actions:".action"}},m=null,n="C193_Model_Specific_Offer_Detail_Overlay";return{init:d}}),define("c_193B_1",["jquery","underscore","storageManager"],function(a,b,c){"use strict";function d(b){m=a.extend({},l,b),k=a(m.selectors.root),k.length&&(e(k.data("offerId")),picturefill(a("body").get(0)))}function e(a){return remoteServices.getOffer(a).done(function(a){g(a),f(a),i(a)})}function f(a){var b,c=a.table;c.dataCol1=[],c.dataCol2=[],c&&c.data&&c.data.length>1&&(b=Math.ceil(c.data.length/2),c.dataCol1=c.data.slice(0,b),c.dataCol2=c.data.slice(b))}function g(b){a(document).on("click",m.selectors.root+" "+m.selectors.actions,function(c){var d=a(this);"contact"===d.data("action")&&h(b),"print"===d.data("action")&&(c.preventDefault(),window.print()),j(b,d)})}function h(a){var d,e;a.additionalTitle&&a.additionalTitle.headline&&a.additionalTitle.strapline&&(d=a.additionalTitle.headline,e=a.additionalTitle.strapline),m.analyticsManager.storeJourneyData("offer",b.now(),{offerId:a.id,offerTypeTitle:a.offerTypeTitle,offerHeadline:a.title.headline,offerStrapline:a.title.strapline,offerAdditionalHeadline:d||"",offerAdditionalStrapline:e||"",offerHighlight:a.highlight,vehicleModel:a.model.code,vehicleId:"not available",vehicleCategory:"not available"}),c.saveItem(m.localStorageKey,{offerId:a.id,offerModelName:a.model.name,offerApplicability:a.applicability,offerCaveat:a.caveat,offerTypeTitle:a.offerTypeTitle,offerStatus:a.status,offerHeadline:a.title.headline,offerStrapline:a.title.strapline,offerAdditionalHeadline:d||"",offerAdditionalStrapline:e||"",offerHighlight:a.highlight,offerRegion:a.region,offerValidity:a.validity})}function i(a){var b=m.analyticsManager.trackingVars.contentDisplayed,c=m.analyticsManager.getTrackingObjectProperties(b),d={};d[c.componentId]=n,d.offerId=a.id,d.offerText=a.title.headline,m.analyticsManager.track(b,d)}function j(a,b){var c=m.analyticsManager.trackingVars.genericClick,d=m.analyticsManager.getTrackingObjectProperties(c),e={};e[d.componentId]=n,e[d.destination]=b.attr("href"),e[d.locationInPage]=a.offerTypeTitle+" - "+a.model.name,e[d.buttonText]=b.text(),e[d.contentAction]=b.data("action"),e.offerId=a.id,e.offerText=a.title.headline,m.analyticsManager.track(c,e)}var k,l={selectors:{root:".c_193B-1",actions:".action"}},m=null,n="C193B_Model_Specific_Offer_Detail_Overlay";return{init:d}}),define("c_195_0_analytics",["jquery","underscore","logger"],function(a,b,c){"use strict";function d(b){m=a.extend({},l,b)}function e(a,b){a&&("type"===a.prop("name")?g(a,b):f(a,b))}function f(a,b){var c,d,e={};return m.analyticsManager?(c=m.analyticsManager.trackingVars.search,d=m.analyticsManager.getTrackingObjectProperties(c),e[d.componentId]=k,e[d.searchType]="offers-filter",e[d.searchFilter]=i(a),e[d.searchFilterValue]=a.val(),e[d.offerCount]=b.toString(),m.analyticsManager.track(c,e),!0):(j.warn("Analytics manager not defined. Exiting"),!1)}function g(a,b){var c,d,e={},f="offers-filter";return m.analyticsManager?(a.prop("checked")||(f="offers-unfilter"),c=m.analyticsManager.trackingVars.search,d=m.analyticsManager.getTrackingObjectProperties(c),e[d.componentId]=k,e[d.searchType]=f,e[d.searchFilter]=i(a),e[d.searchFilterValue]=a.val(),e[d.offerCount]=b.toString(),m.analyticsManager.track(c,e),!0):(j.warn("Analytics manager not defined. Exiting"),!1)}function h(b){return i(a(".c_195-0").find(':input[name="'+a.escapeHtml(b)+'"]').eq(0))}function i(a){return"type"===a.prop("name")?a.closest(".accordion-group").find(".accordion-header").text():a.closest(".form-group").find("label").text()}var j=new c({prefix:"C195 Analytics"}),k="C195_Offer_Filters",l={},m={};return{init:d,trackOfferTypeChange:g,trackDropDownChange:f,trackChange:e,getSearchFilterForFacetType:h,getSearchFilterForFacetElement:i}}),define("c_195_0",["jquery","underscore","remoteServices","handlebars","customSelect","accordion","accordionItem","heliosObject","profileManager","smartLocationContext","c_195_0_analytics"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(b){var c,e=a.Deferred();return ma=a.extend({},la,b),P=a(ma.selectors.root),!!P.length&&(fa=P.find(ma.selectors.locationFacet),ga=!!fa.length,ia="",ga&&(ja=fa.data("object"),ia=ja.getType()),i.init({HELIOS:h}),ka=b.smartLocationContext,ha="",ga?ka.get().always(function(a){p(a),e.resolve()}):e.resolve(),c=e.promise(),S=d.compile(P.find(ma.selectors.categoriesTemplate).html()),T=d.compile(P.find(ma.selectors.modelsTemplate).html()),U=d.compile(P.find(ma.selectors.gradesTemplate).html()),V=d.compile(P.find(ma.selectors.versionsTemplate).html()),W=d.compile(P.find(ma.selectors.typesTemplate).html()),X=P.find(ma.selectors.categoriesContainer),Y=P.find(ma.selectors.modelsContainer),Z=P.find(ma.selectors.gradesContainer),$=P.find(ma.selectors.versionsContainer),_=P.find(ma.selectors.typesContainer),x(),E(),D(),m(),c)}function m(){P.on(ma.events.change,ma.selectors.categorySelect,function(){var b=a(this);H(),r(),G(b.attr("name"),b),b.blur()}),P.on(ma.events.change,ma.selectors.modelSelect,function(){var b=a(this);n(ca),n(da),G(b.attr("name"),b),b.blur()}),P.on(ma.events.change,ma.selectors.gradeSelect,function(){var b=a(this);n(da),G(b.attr("name"),b),b.blur()}),P.on(ma.events.change,ma.selectors.versionSelect,function(){var b=a(this);G(b.attr("name"),b),b.blur()}),P.on(ma.events.change,ma.selectors.typeInputs,function(){var b=a(this);G(b.attr("name"),b)}),ga&&i.onLocationChange(function(a,b){p(b),H(),r(),G("location")}),a(window).on("resize",b.debounce(function(){D()},200))}function n(a){a.children().slice(1).remove(),a.prop(ma.properties.disabled,!0),a.siblings(".selectedValue").text(a.find(":selected").text())}function o(d){return _.addClass(ma.classes.loading),c.getOffersFilters(null,d.category,ha).then(function(e){var f,g=!1,h=e.facets&&e.facets.filtered,i=[];return Q=h,h&&h.hasOwnProperty(ma.properties.models)&&(ba.find(ma.selectors.option).slice(1).remove(),i=b.map(h.models,function(b){return na[a.escapeHtml(b.key)]}),ba.append(i)),e.facets&&(d.category?(b.each(e.facets.preFiltered.categories,function(a){a.key===d.category&&(g=!0)}),f=g?d.category:e.facets.preFiltered.categories[0].key):f=e.facets.preFiltered.categories[0].key,v(e.facets.preFiltered.categories,f),e.facets.filtered&&w(e.facets.filtered.offerTypes,d.type)),d.model&&I(d.model)&&d.grade&&J(d.grade)&&d.version&&K(d.version),e.facets&&!e.facets.filtered?c.getOffersFilters(null,f,ha).then(function(a){return u(a.facets.filtered.offerTypes,"category"),_.removeClass(ma.classes.loading),N()}):(_.removeClass(ma.classes.loading),N())})}function p(a){a&&("postalCode"===ia?ha=a.postalCode:"location"===ia&&(ha=h.config.common.smartLocation.postalCodeSearch?a.postalCode:a.location&&a.location.address))}function q(){return H(),N()}function r(){P.addClass(ma.classes.disableInteractivity)}function s(){P.removeClass(ma.classes.disableInteractivity)}function t(a){function c(a,c,d,e,f,g){var h=[];b.each(c,function(a,c){b.contains(f,c)&&e[c+g]&&h.push(e[c+g].prop("selected",c===d))}),a.children(":not(:first-child)").remove(),a.append(h),a.siblings(".selectedValue").text(a.find(":selected").text())}var d=ba.val(),e=ca.val(),f=da.val();return s(),d&&c(ca,HELIOS.components.c_195.vehicles[d]&&HELIOS.components.c_195.vehicles[d].grades,e,oa,b.pluck(Q.grades,"key"),d),ca.prop(ma.properties.disabled,!d),e&&c(da,HELIOS.components.c_195.vehicles[d]&&HELIOS.components.c_195.vehicles[d].grades&&HELIOS.components.c_195.vehicles[d].grades[e]&&HELIOS.components.c_195.vehicles[d].grades[e].versions,f,pa,b.pluck(Q.versions,"key"),d+e),da.prop(ma.properties.disabled,!e),N()}function u(c,d){var e=[];b.each(c,function(a,b,c){e.push(a.key)}),ea&&ea.length&&ea.each(function(c,f){var g=a(f);-1!==b.indexOf(e,g.val())?(g.prop(ma.properties.disabled,!1),g.parent().removeClass(ma.classes.inactiveOption+" "+ma.classes.hidden)):(g.prop(ma.properties.disabled,!0),"category"===d?g.parent().addClass(ma.classes.hidden):g.parent().addClass(ma.classes.inactiveOption))})}function v(a,c){a.key=b.first(a).key,X.empty().append(S(a)),a.length>1&&P.find(ma.selectors.categoryBlock).removeClass(ma.classes.hidden),aa=X.find(ma.selectors.categorySelect),e.init(P),c&&y(c)}function w(a,b){_.empty().append(W(a)),ea=_.find(ma.selectors.typeInputs),b&&z(b)}function x(){var c,d,f=[],g=[],i=[];return h.components.hasOwnProperty("c_195")?(c=h.components.c_195.vehicles,b.each(c,function(a,c,d){var e=c;f.push({code:c,name:a.name}),b.each(a.grades,function(a,c,d){var f=c;g.push({code:c,name:a.name,model:e}),b.each(a.versions,function(a,b,c){i.push({code:b,name:a.name,model:e,grade:f})})})}),Y.append(T(f)),e.init(Y),Z.append(U(g)),e.init(Z),$.append(V(i)),e.init($),ba=Y.find(ma.selectors.modelSelect),ca=Z.find(ma.selectors.gradeSelect),da=$.find(ma.selectors.versionSelect),b.each(ba.find("option:gt(0)"),function(b){d=a(b),na[d[0].value]=d.clone()}),b.each(ca.find("option:gt(0)"),function(b){d=a(b),oa[d[0].value+d.data("model")]=d.clone()}),b.each(da.find("option:gt(0)"),function(b){d=a(b),pa[d[0].value+d.data("model")+d.data("grade")]=d.clone()}),ca.attr(ma.properties.disabled,!0),da.attr(ma.properties.disabled,!0),!0):(log.warn("No model/grade/version data on page"),!1)}function y(a){aa.val(a),aa.siblings(".selectedValue").text(a)}function z(c){var d;ea.prop("checked",!1),b.isArray(c)?ea.each(function(d,e){-1!==b.indexOf(c,a(e).val())&&a(e).prop("checked",!0)}):c&&(d=ea.filter('[value="'+a.escapeHtml(c)+'"]'),d.length&&d.prop("checked",!0))}function A(b){switch(b.property){case"type":ea.filter('[value="'+a.escapeHtml(b.value)+'"]').prop("checked",!1);break;case"model":I("");break;case"grade":L(ba.val());break;case"version":M(ca.val())}return N()}function B(a){R=a}function C(a){P.find(ma.selectors.matchCount).text(a),s(),ba.prop(ma.properties.disabled,!a)}function D(){var b,c,d=!window.matchMedia||window.matchMedia(h.config.common.mediaQuery.is.large).matches,e=a(ma.selectors.filter,P),f=a(ma.selectors.mainHeader),g=a(ma.selectors.stickHeader,P),i=0;d?(e.css("padding-top",0),g.css("top",i),clearTimeout(c)):c=setTimeout(function(){b=f.is(":visible")?f.height():0,i+=b+a(ma.selectors.inPageNavigation).height(),e.css("padding-top",g.outerHeight()+i),g.css("top",i)},1e3)}function E(){a(ma.selectors.accordion,P).each(function(){F(a(this))})}function F(b){var c,d=a(ma.selectors.accordionPanel,b),e=a(ma.selectors.accordionHeader,b),h=[],i=e.length;for(c=0;c<i;c++){var j=new g({$contentElement:d.eq(c),$headerElement:e.eq(c),isDisabled:!1,isOpen:!0,transitionToOpen:"toggle",transitionToClose:"toggle"});h.push(j)}qa.push(new f({$container:b,isScrollOnOpenEnabled:!1,items:h}))}function G(a,c){b.isFunction(R)&&R.call(null,N(),a,c)}function H(){I(""),P.find(ma.selectors.typeInputs).prop("checked",!1)}function I(b){return!!ba.find('option[value="'+a.escapeHtml(b)+'"]').length&&(ba.val(b).triggerHandler(ma.events.change),L(b),!0)}function J(b){return!!ca.find('option[value="'+a.escapeHtml(b)+'"]').length&&(ca.val(b).triggerHandler(ma.events.change),M(b),!0)}function K(b){return!!da.find('option[value="'+a.escapeHtml(b)+'"]').length&&(da.val(b).triggerHandler(ma.events.change),!0)}function L(a){a?ca.prop(ma.properties.disabled,!1):ca.prop(ma.properties.disabled,!0),ca.val("").triggerHandler(ma.events.change),M("")}function M(a){a?da.prop(ma.properties.disabled,!1):da.prop(ma.properties.disabled,!0),da.val("").triggerHandler(ma.events.change)}function N(){var b,c={};return aa&&aa.val()&&(c.category={value:aa.val(),label:aa.find(ma.selectors.optionSelected).text()}),ga&&ha&&(c.location={value:ha,label:ha}),ba.val()&&(c.model={value:ba.val(),label:ba.find(ma.selectors.optionSelected).text()},ca.val()&&(c.grade={value:ca.val(),label:ca.find(ma.selectors.optionSelected).text()},da.val()&&(c.version={value:da.val(),label:da.find(ma.selectors.optionSelected).text()}))),b=ea&&ea.filter(ma.selectors.checked).filter(ma.selectors.enabled),b&&b.length&&(c.type=[],b.each(function(b,d){var e=a(d);c.type.push({value:e.val(),label:e.siblings("label").text()})})),c}function O(c){return ea.each(function(){var d=a(this),e=b.contains(c,d.val());d.prop(ma.properties.disabled,!e).toggleClass(ma.classes.inactiveOption,!e)}),N()}var P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la={selectors:{root:".c_195-0",option:"option",categoriesContainer:".categories-container",modelsContainer:".models-container",gradesContainer:".grades-container",versionsContainer:".versions-container",typesContainer:".types-container",categoriesTemplate:".categories-template",modelsTemplate:".models-template",gradesTemplate:".grades-template",versionsTemplate:".versions-template",typesTemplate:".types-template",typeInputs:'input[type="checkbox"][name="type"]',categorySelect:'select[name="category"]',locationInput:'input[name="location"]',modelSelect:'select[name="model"]',gradeSelect:'select[name="grade"]',versionSelect:'select[name="version"]',accordion:".accordion-group",accordionHeader:".accordion-header",accordionPanel:".accordion-panel",matchCount:".number-results",stickHeader:".header-filters",filter:".filter",locationFacet:".c_073",mainHeader:".c_010, .c_010B",inPageNavigation:".c_046, .c_046B",optionSelected:"option:selected",categoryBlock:".category-block",checked:":checked",enabled:":enabled"},classes:{loading:"loading",inactiveOption:"inactive",hidden:"hidden",disableInteractivity:"disable-interactivity"},events:{change:"change",click:"click"},properties:{models:"models",grades:"grades",versions:"versions",type:"type",disabled:"disabled"}},ma=null,na={},oa={},pa={},qa=[];return{init:l,onFilterChange:B,loadFilters:o,clearFilters:q,removeFilter:A,setMatchCount:C,filterFacets:t,setFilterTopMargin:D,setValidOfferTypes:O}}),define("c_196_0",["jquery","underscore","handlebars","remoteServices","disclaimers","c_193_0"],function(a,b,c,d,e,f){"use strict";function g(b){s=a.extend({},q,b),n=a(s.selectors.root),h(),f.init({analyticsManager:s.analyticsManager,modelCode:s.modelCode,vehicleId:s.vehicleId,vehicleCategories:s.vehicleCategories,events:{onCloseOverlay:s.events.onCloseOverlay}})}function h(){a(document).on("click",s.selectors.root+" "+s.selectors.btnViewDetails,function(b){i(a(this)),b.preventDefault()}),a(document).on("click",s.selectors.root+" "+s.selectors.btnContactDealer,function(){var b=a(this),c=k(b);l(c,b),f.populateOfferOnLocalStorage(c)}),a(window).resize(b.debounce(function(){p&&(p.$dialog.height(a(window).height()-120),p.$content.height(p.$dialog.height()-20))},250))}function i(b){var c;b.parent().hasClass(s.classes.loading)||(b.parent().addClass(s.classes.loading),c=k(b),location.hash=a.param.fragment(location.hash,{offerId:c.id}),j(c.id).done(function(){b.parent().removeClass(s.classes.loading)}))}function j(a){return d.getOffer(a).done(function(b){f.loadOverlay(b,a)})}function k(a){return a.closest(s.selectors.root).data(s.data.offer)}function l(a,b){var c=s.analyticsManager.trackingVars.genericClick,d=s.analyticsManager.getTrackingObjectProperties(c),e={};e[d.componentId]=r,e[d.destination]=b.attr("href"),e[d.locationInPage]=a.offerTypeTitle+" - "+a.model.name,e[d.buttonText]=b.text(),e.offerId=a.id,e.offerText=a.title.headline,s.analyticsManager.track(c,e)}function m(d,f,g){var h;o||(o=c.compile(a(q.selectors.template).html())),g&&(g=c.compile(g)),b.each(d,function(a,b){h=o(a),g?f.append(g({offer:h})):f.append(h),f.find('.c_196-0[data-offer-id="'+a.id+'"]').data(s.data.offer,a)}),e.renderDisclaimers(f)}var n,o,p,q={selectors:{template:"#template-c_196-0",root:".c_196-0",btnViewDetails:".actions-primary > a",btnContactDealer:".actions-secondary > a"},classes:{loading:"loading"},events:{onCloseOverlay:a.noop},data:{offer:"offer"}},r="C196_Model_Specific_Offer",s=null;return{init:g,appendItemsToElement:m,loadOfferOverlay:j}}),define("c_194_0_analytics",["jquery","underscore","logger","c_195_0_analytics"],function(a,b,c,d){"use strict";function e(b){k=a.extend({},j,b)}function f(a){var b,c,d={};return k.analyticsManager?(b=k.analyticsManager.trackingVars.buttonNoCookie,c=k.analyticsManager.getTrackingObjectProperties(b),d[c.componentId]=i,d[c.destination]=location.href,d[c.locationInPage]="offer",d[c.buttonText]=a.text(),d[c.contentAction]="show more",k.analyticsManager.track(b,d),!0):(h.warn("Analytics manager not defined. Exiting"),!1)}function g(a,b){var c,e,f={};return k.analyticsManager?(c=k.analyticsManager.trackingVars.search,e=k.analyticsManager.getTrackingObjectProperties(c),f[e.componentId]=i,f[e.searchType]="offers-unfilter",f[e.searchFilter]=d.getSearchFilterForFacetType(a.data("property")),f[e.searchFilterValue]=a.val(),f[e.offerCount]=b.toString(),k.analyticsManager.track(c,f),!0):(h.warn("Analytics manager not defined. Exiting"),!1)}var h=new c({prefix:"C194 Analytics"}),i="C194_Offer_Container",j={},k={};return{init:e,trackLoadMore:f,trackRemoveActiveFilter:g}}),define("c_194_0",["jquery","underscore","remoteServices","handlebars","matchHeight","pictureFill","c_195_0","c_196_0","c_194_0_analytics","c_195_0_analytics","heliosObject","profileManager","smartLocationContext","jqueryBbq"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(c){ea=a.extend({},da,c),L=a(ea.selectors.root),L.length&&(R=a(ea.selectors.matchCount),S=a(ea.selectors.totalResults),T=a(ea.selectors.activeFilterWrapper),W=d.compile(a(ea.selectors.activeFiltersTemplate).html()),N=L.find(ea.selectors.activeFilters),U=a(ea.selectors.navContainer),V=a(ea.selectors.headerFilters),M=L.find(ea.selectors.listContainer),O=a(window),ha=M.data(ea.data.itemsPerPage)||ha,ga=M.data(ea.data.itemsOnLoad)||ga,h.init({analyticsManager:ea.analyticsManager,vehicleCategories:"",events:{onCloseOverlay:s}}),l.init({HELIOS:k}),ca=c.smartLocationContext,b.extend(ba,b.pick(a.deparam.fragment(),Z)),a.when(g.init({analyticsManager:ea.analyticsManager,smartLocationContext:ca})).done(function(){var b=a.Deferred();K(!0),ba.category?b.resolve():p().done(function(a){ba.category=a,b.resolve()}),b.done(function(){q(),t(),F(),G(ea.selectors.btnFilter,"opened"),H(ea.selectors.headerFilters,"opened"),ba.offerId&&h.loadOfferOverlay(ba.offerId)}).fail(function(){K(!1),E()})}))}function p(){var b=a.Deferred();return c.getOffersFilters().done(function(c){a.isNestedProp(c,["facets","preFiltered","categories"])&&c.facets.preFiltered.categories[0]&&c.facets.preFiltered.categories[0].key?b.resolve(c.facets.preFiltered.categories[0].key):b.reject()}).fail(b.reject),b}function q(){K(!0),g.loadFilters(ba).done(function(a){r(a).done(function(b){a=g.setValidOfferTypes(b),y(a).done(function(a){u(g.filterFacets({allowedFilters:a.facets&&a.facets.filtered,isDeepLinked:!0}))}).fail(function(){E()})}).fail(function(){E()}),g.onFilterChange(function(a,b,c){"category"===b?(u(a),q()):(K(!0),r(a).done(function(d){a=g.setValidOfferTypes(d),y(a).done(function(a){u(g.filterFacets({allowedFilters:a.facets&&a.facets.filtered,source:b})),j.trackChange(c,a.totalResults)}).fail(function(){E()})}).fail(function(){E()}))})}).fail(function(){E()})}function r(d){var e=a.Deferred(),f={};return d.grade&&d.grade.value&&(f.grade=d.grade.value),d.version&&d.version.value&&(f.version=d.version.value),c.getOffersFilters(d.model&&d.model.value,d.category&&d.category.value,d.location&&d.location.value,f).done(function(a){var c=b.pluck(a&&a.facets&&a.facets.filtered&&a.facets.filtered.offerTypes,"key");e.resolve(c)}).fail(e.reject),e}function s(){u({offerId:{value:""}},!1)}function t(){L.find(ea.selectors.loadMore+" button").click(function(){return z(a(this)),i.trackLoadMore(a(this)),!1}),L.find(ea.selectors.activeFilters).on("click","button",function(){var b=a(this),c=g.removeFilter({property:b.data("property"),value:b.val()});return K(!0),r(c).done(function(a){c=g.setValidOfferTypes(a),y(c).done(function(a){w(g.filterFacets({allowedFilters:a.facets.filtered,source:b.data("property")})),i.trackRemoveActiveFilter(b,a.totalResults)}).fail(function(){E()})}).fail(function(){E()}),!1})}function u(a,c){var d={};b.each(a,function(a,c,e){b.isArray(a)?(d[c]=[],b.each(a,function(a,b,e){d[c].push(a.value)})):d[c]=a.value}),c=!(!b.isUndefined(c)&&!c),d&&(c?b.extend(ba,$,b.pick(d,Z)):b.extend(ba,b.pick(d,Z))),v(ba),c&&w(a)}function v(c){var d={};b.each(c,function(a,c,e){b.isEmpty(a)||(d[c]=a)}),location.hash=a.param.fragment("",b.pick(d,aa))}function w(a){var c=b.without(_),d=[];b.isObject(a)&&(a=b.pick(a,c),b.each(a,function(a,c,e){b.isArray(a)&&a.length?b.each(a,function(a,b,e){d.push({property:c,label:a.label,value:a.value})}):a&&d.push({property:c,label:a.label,value:a.value})})),
d.length?T.find("span").addClass(ea.classes.hidden):T.find("span").removeClass(ea.classes.hidden),N.empty().append(W(d))}function x(){ea.matchHeight.forEach(function(b){a(b).matchHeight()})}function y(a){var d;return ia=a&&a.hasOwnProperty("model")?a.model.value:"",u(a),A(),L.find(ea.selectors.noOffers).addClass(ea.classes.hidden),d=b.clone(ba),d.hasOwnProperty("offerId")&&delete d.offerId,Y=c.getOffers(ia,0,ga,d,!0),Y.done(function(a){a.totalResults?(R.text(a.totalResults),g.setMatchCount(a.totalResults),D(a,!0),B()):E()}).fail(function(){E()}).always(function(){K(!1)}),Y}function z(a){var b;A(a),fa<X&&c.getOffers(ia,fa,ha,ba,!0).done(function(c){c.totalResults?(b=M.find("> ul > li:last"),D(c),C(b)):L.find(ea.selectors.loadMore).addClass(ea.classes.hidden),B(a)})}function A(a){a||(a=L.find(ea.selectors.loadMore+" button")),a.addClass(ea.classes.btnLoadMoreDisabled),a.closest(ea.selectors.loadMore).addClass(ea.classes.loadMoreLoading),a.prop("disabled","disabled")}function B(a){a||(a=L.find(ea.selectors.loadMore+" button")),a.prop("disabled",null),a.removeClass(ea.classes.btnLoadMoreDisabled),a.closest(ea.selectors.loadMore).removeClass(ea.classes.loadMoreLoading)}function C(b){a("html,body").animate({scrollTop:b.offset().top+b.height()-50},500)}function D(c,d){var e=M.find("> ul");d&&(e.empty(),fa=0),h.appendItemsToElement(c.offers,e,ea.templates.offerCard),f(e.get(0)),a(ea.selectors.img,e).load(b.debounce(x,250)),X=c.totalResults,fa+=c.offers.length,fa===X?L.find(ea.selectors.loadMore).addClass(ea.classes.hidden):L.find(ea.selectors.loadMore).removeClass(ea.classes.hidden)}function E(){R.text(0),g.setMatchCount(0),M.find("> ul").empty(),L.find(ea.selectors.noOffers).removeClass(ea.classes.hidden),a(ea.selectors.headerComponent).addClass(ea.classes.headerComponentHideCopy),a(ea.selectors.legalNotices).addClass(ea.classes.legalNoticesHidden),K(!1)}function F(){var c,d=!0,e=0,f=0,g=0,h=0;P=a(ea.selectors.mainHeader),Q=a(ea.selectors.inPageNavigation),e=P.height()||0,f=Q.height()||0,g=U.height()||0,h=e+f+g,c=b.throttle(function(){var a=O.scrollTop();a<=h&&!d?(d=!0,U.removeClass(ea.classes.stick).css("top",0),V.removeClass(ea.classes.stick)):a>h&&d&&(d=!1,U.addClass(ea.classes.stick).css("top",f),V.addClass(ea.classes.stick))},100),O.on("scroll",c),a(ea.selectors.btnMenu).on("click",I)}function G(b,c){a(b).on("click",function(){L.toggleClass(c),a("body").addClass("no-scroll")})}function H(b,c){a(b).on("click",function(){a("body").removeClass("no-scroll"),L.removeClass(c),V.removeClass(ea.classes.stick)})}function I(){var b=a("html, body").animate({scrollTop:0}).promise(),c=a(ea.selectors.btnMenu,L),d=a(ea.selectors.inPageNavigation,L);b.done(function(){var a=d.height();P.is(":visible")?(P.slideUp("fast"),c.removeClass(ea.classes.open),V.css("top",a)):(c.addClass(ea.classes.open),V.add(U).removeClass(ea.classes.stick).end().css("top",a+P.height()),P.slideDown("fast")),g.setFilterTopMargin()})}function J(c){return a.param.fragment("",b.pick(c,Z)).substring(1)}function K(a){M.toggleClass(ea.classes.loading,!!a),S.toggleClass(ea.classes.loading,!!a)}var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da={selectors:{root:".c_194-0",listContainer:".c_194-0-container",activeFilters:".c_194-0-active-filters",body:"body",loadMore:".action-load-more",noOffers:".c_194-0-container > .no-offers",headerComponent:".c_023-1",legalNotices:".c_029B",mainHeader:".c_010, .c_010B",inPageNavigation:".c_046, .c_046B",btnMenu:".btn-menu",btnFilter:".btn-filter",offerFilters:".offer-filters",filterMenu:".filter",navContainer:".main-nav-filters",headerFilters:".header-filters",activeFiltersTemplate:".c_194-0-active-filters-template",matchCount:".c_194-0-match-count em",activeFilterWrapper:".c_194-0-filter-wrap",totalResults:".total-results",card:".c_196-0",img:"img"},classes:{headerComponentHideCopy:"hide-copy",btnLoadMoreDisabled:"btn-disabled",loadMoreLoading:"action-load-more-loading",legalNoticesHidden:"hidden",hidden:"hidden",stick:"stick-header",open:"open",loading:"loading"},data:{modelCode:"modelCode",vehicleId:"vehicleId",vehicleCategories:"vehicleCategories",itemsOnLoad:"itemsOnLoad",itemsPerPage:"itemsPerPage"},templates:{offerCard:"<li>{{{offer}}}</li>"},hash:{offerId:"offerId"},matchHeight:[".vehicle h2",".conditions",".subtext",".c_196-0 .picture-element img",".image-disclaimer",".detail h2",".detail-teaser",".detail-editorial",".detail-editorial-disclaim",".detail-ends",".detail",".smallprint"]},ea=null,fa=0,ga=6,ha=10,ia=null;return Z=["category","location","model","grade","version","type","offerId"],$={category:"",location:"",model:"",grade:"",version:"",type:""},_=["model","grade","version","type"],aa=["category","model","grade","version","type","offerId"],ba={category:null,location:"",model:"",grade:"",version:"",type:[]},{init:o,generateDeepLinkHash:J}}),define("c_195B_0_analytics",["jquery","underscore","logger"],function(a,b,c){"use strict";function d(b){m=a.extend({},l,b)}function e(a,b){a&&("type"===a.prop("name")?g(a,b):f(a,b))}function f(a,b){var c,d,e={};return m.analyticsManager?(c=m.analyticsManager.trackingVars.search,d=m.analyticsManager.getTrackingObjectProperties(c),e[d.componentId]=k,e[d.searchType]="offers-filter",e[d.searchFilter]=i(a),e[d.searchFilterValue]=a.val(),e[d.offerCount]=b.toString(),m.analyticsManager.track(c,e),!0):(j.warn("Analytics manager not defined. Exiting"),!1)}function g(a,b){var c,d,e={},f="offers-filter";return m.analyticsManager?(a.prop("checked")||(f="offers-unfilter"),c=m.analyticsManager.trackingVars.search,d=m.analyticsManager.getTrackingObjectProperties(c),e[d.componentId]=k,e[d.searchType]=f,e[d.searchFilter]=i(a),e[d.searchFilterValue]=a.val(),e[d.offerCount]=b.toString(),m.analyticsManager.track(c,e),!0):(j.warn("Analytics manager not defined. Exiting"),!1)}function h(b){return i(a(".c_195B-0").find(':input[name="'+a.escapeHtml(b)+'"]').eq(0))}function i(a){return"type"===a.prop("name")?a.closest(".accordion-group").find(".accordion-header").text():a.closest(".form-group").find("label").text()}var j=new c({prefix:"C195B Analytics"}),k="C195B_Offer_Filters",l={},m={};return{init:d,trackOfferTypeChange:g,trackDropDownChange:f,trackChange:e,getSearchFilterForFacetType:h,getSearchFilterForFacetElement:i}}),define("c_195B_0",["jquery","underscore","remoteServices","handlebars","customSelect","accordion","accordionItem","heliosObject","profileManager","smartLocationContext","c_195B_0_analytics"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(b){var c,e,f=a.Deferred();return ga=a.extend({},fa,b),N=a(ga.selectors.root),c=N.data(ga.data.headerToken),!!N.length&&(Z=N.find(ga.selectors.locationFacet),_=!!Z.length,ba="",_&&(ca=Z.data("object"),ba=ca.getType()),i.init({HELIOS:h}),da=b.smartLocationContext,aa="",_?da.get().always(function(a){r(a),f.resolve()}):f.resolve(),e=f.promise(),ea=Boolean(c),Q=d.compile(N.find(ga.selectors.categoriesTemplate).html()),R=d.compile(N.find(ga.selectors.modelsTemplate).html()),S=d.compile(N.find(ga.selectors.typesTemplate).html()),T=N.find(ga.selectors.categoriesContainer),U=N.find(ga.selectors.modelsContainer),V=N.find(ga.selectors.typesContainer),$=N.find(ga.selectors.headingFilter),G(),F(),m(),e)}function m(){N.on(ga.events.change,ga.selectors.categorySelect,function(){var b=a(this);J(),t(),I(b.attr("name"),b)}),N.on(ga.events.change,ga.selectors.modelSelect,function(){var b=a(this);I(b.attr("name"),b)}),N.on(ga.events.change,ga.selectors.typeInputs,function(){var b=a(this);I(b.attr("name"),b)}),_&&i.onLocationChange(function(a,b){r(b),J(),t(),I("location")}),a(window).on("resize",b.debounce(function(){F()},200))}function n(a){return a.replace(/-/g,"<br/>")}function o(a){var b=p(a);$.html(b)}function p(b){return ea?b?a(ga.selectors.root).data(ga.data.headerOffersAvailableLabel)+"<span>"+n(b)+"</span>":a(ga.selectors.root).data(ga.data.headerDmaDefault):a(ga.selectors.root).data(ga.data.headerTitle)}function q(a){return V.addClass(ga.classes.loading),c.getOffersFiltersModelName(null,a.category,aa).then(function(d){var e,f,g=!1,h=d.facets&&d.facets.filtered;return O=h,h&&h.hasOwnProperty(ga.properties.modelNames)&&(X&&X.find(ga.selectors.option).slice(1).remove(),f=HELIOS.components.c195B_customModelFilter&&!b.isEmpty(HELIOS.components.c195B_customModelFilter)?HELIOS.components.c195B_customModelFilter:h.modelNames,z(f)),d.facets&&(a.category?(b.each(d.facets.preFiltered.categories,function(b){b.key===a.category&&(g=!0)}),e=g?a.category:d.facets.preFiltered.categories[0].key):e=d.facets.preFiltered.categories[0].key,x(d.facets.preFiltered.categories,e),d.facets.filtered&&y(d.facets.filtered.offerTypes,a.type)),o(d.marketingGroupName),a.modelName&&K(a.modelName),d.facets&&!d.facets.filtered?c.getOffersFiltersModelName(null,e,aa).then(function(a){return w(a.facets.filtered.offerTypes,"category"),V.removeClass(ga.classes.loading),L()}):(V.removeClass(ga.classes.loading),L())})}function r(a){a&&("postalCode"===ba?aa=a.postalCode:"location"===ba&&(aa=h.config.common.smartLocation.postalCodeSearch?a.postalCode:a.location&&a.location.address))}function s(){return J(),L()}function t(){N.addClass(ga.classes.disableInteractivity)}function u(){N.removeClass(ga.classes.disableInteractivity)}function v(a){return u(),a.marketingGroupName&&o(a.marketingGroupName),L()}function w(c,d){var e=[];b.each(c,function(a,b,c){e.push(a.key)}),Y&&Y.length&&Y.each(function(c,f){var g=a(f);-1!==b.indexOf(e,g.val())?(g.prop(ga.properties.disabled,!1),g.parent().removeClass(ga.classes.inactiveOption+" "+ga.classes.hidden)):(g.prop(ga.properties.disabled,!0),"category"===d?g.parent().addClass(ga.classes.hidden):g.parent().addClass(ga.classes.inactiveOption))})}function x(a,c){a.key=b.first(a).key,T.empty().append(Q(a)),a.length>1&&N.find(ga.selectors.categoryBlock).removeClass(ga.classes.hidden),W=T.find(ga.selectors.categorySelect),e.init(N),c&&A(c)}function y(a,b){V.empty().append(S(a)),Y=V.find(ga.selectors.typeInputs),b&&B(b)}function z(c){var d,f=[];return b.each(c,function(a,b){f.push({name:a.key})}),U.html(R(f)),e.init(U),X=U.find(ga.selectors.modelSelect),b.each(X.find("option:gt(0)"),function(b){d=a(b),ha[d[0].value]=d.clone()}),!0}function A(a){W.val(a),W.siblings(".selectedValue").text(a)}function B(c){var d;Y.prop("checked",!1),b.isArray(c)?Y.each(function(d,e){-1!==b.indexOf(c,a(e).val())&&a(e).prop("checked",!0)}):c&&(d=Y.filter('[value="'+a.escapeHtml(c)+'"]'),d.length&&d.prop("checked",!0))}function C(b){switch(b.property){case"type":Y.filter('[value="'+a.escapeHtml(b.value)+'"]').prop("checked",!1);break;case"modelName":K("")}return L()}function D(a){P=a}function E(a){N.find(ga.selectors.matchCount).text(a),u(),a||o()}function F(){var b,c,d=!window.matchMedia||window.matchMedia(h.config.common.mediaQuery.is.large).matches,e=a(ga.selectors.filter,N),f=a(ga.selectors.mainHeader),g=a(ga.selectors.stickHeader,N),i=0;d?(e.css("padding-top",0),g.css("top",i),clearTimeout(c)):c=setTimeout(function(){b=f.is(":visible")?f.height():0,i+=b+a(ga.selectors.inPageNavigation).height(),e.css("padding-top",g.outerHeight()+i),g.css("top",i)},1e3)}function G(){a(ga.selectors.accordion,N).each(function(){H(a(this))})}function H(b){var c,d=a(ga.selectors.accordionPanel,b),e=a(ga.selectors.accordionHeader,b),h=[],i=e.length;for(c=0;c<i;c++){var j=new g({$contentElement:d.eq(c),$headerElement:e.eq(c),isDisabled:!1,isOpen:!0,transitionToOpen:"toggle",transitionToClose:"toggle"});h.push(j)}ia.push(new f({$container:b,isScrollOnOpenEnabled:!1,items:h}))}function I(a,c){b.isFunction(P)&&P.call(null,L(),a,c)}function J(){X&&K(""),N.find(ga.selectors.typeInputs).prop("checked",!1)}function K(b){return!!X.find('option[value="'+a.escapeHtml(b)+'"]').length&&(X.val(b).triggerHandler(ga.events.change),!0)}function L(){var b,c={};return W&&W.val()&&(c.category={value:W.val(),label:W.find(ga.selectors.optionSelected).text()}),_&&aa&&(c.location={value:aa,label:aa}),X&&X.val()&&(c.modelName={value:X.val(),label:X.find(ga.selectors.optionSelected).text()}),b=Y&&Y.filter(ga.selectors.checked).filter(ga.selectors.enabled),b&&b.length&&(c.type=[],b.each(function(b,d){var e=a(d);c.type.push({value:e.val(),label:e.siblings("label").text()})})),c}function M(c){return Y.each(function(){var d=a(this),e=b.contains(c,d.val());d.prop(ga.properties.disabled,!e).toggleClass(ga.classes.inactiveOption,!e)}),L()}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa={selectors:{root:".c_195B-0",option:"option",categoriesContainer:".categories-container",modelsContainer:".models-container",typesContainer:".types-container",categoriesTemplate:".categories-template",modelsTemplate:".models-template",typesTemplate:".types-template",typeInputs:'input[type="checkbox"][name="type"]',categorySelect:'select[name="category"]',locationInput:'input[name="location"]',modelSelect:'select[name="modelName"]',accordion:".accordion-group",accordionHeader:".accordion-header",accordionPanel:".accordion-panel",matchCount:".number-results",stickHeader:".header-filters",filter:".filter",locationFacet:".c_073",mainHeader:".c_010, .c_010B",inPageNavigation:".c_046, .c_046B",optionSelected:"option:selected",categoryBlock:".category-block",checked:":checked",enabled:":enabled",headingFilter:".heading-filter h4"},classes:{loading:"loading",inactiveOption:"inactive",hidden:"hidden",disableInteractivity:"disable-interactivity"},data:{headerTitle:"header-title",headerToken:"header-token",headerOffersAvailableLabel:"header-offers-available-label",headerDmaDefault:"header-dma-default"},events:{change:"change",click:"click"},properties:{modelNames:"modelNames",type:"type",disabled:"disabled"}},ga=null,ha={},ia=[];return{init:l,onFilterChange:D,loadFilters:q,clearFilters:s,removeFilter:C,setMatchCount:E,filterFacets:v,setFilterTopMargin:F,setValidOfferTypes:M}}),define("c_196B_0",["jquery","underscore","handlebars","remoteServices","getConfiguratorCode","disclaimers","c_193B_0",""],function(a,b,c,d,e,f,g){"use strict";function h(b){w=a.extend(!0,{},v,b),s=a(w.selectors.root),i(),g.init({analyticsManager:w.analyticsManager,modelCode:w.modelCode,vehicleId:w.vehicleId,vehicleCategories:w.vehicleCategories,events:{onCloseOverlay:w.events.onCloseOverlay,onClick:w.events.onClick}})}function i(){a(document).on(v.events.onClick,w.selectors.root+" "+w.selectors.btnViewDetails,function(b){var c=a(this),d=m(c);k(c),n(d,c),b.preventDefault()}),a(document).on(v.events.onClick,w.selectors.root+" "+w.selectors.btnSecondary,r),a(document).on(v.events.onClick,w.selectors.root+" "+w.selectors.btnPrimary,r),a(document).on(v.events.onClick,w.selectors.root+" "+w.selectors.tooltipLabel,j),a(document).on(v.events.onClick,w.selectors.root+" "+w.selectors.tooltipPanel,j),a(window).resize(b.debounce(function(){u&&(u.$dialog.height(a(window).height()-120),u.$content.height(u.$dialog.height()-20))},250))}function j(b){var c=a(b.currentTarget),d=c.parentsUntil(w.selectors.root),e=w.classes.dataTooltipId,f=w.classes.show,g=c.attr(e),h="["+e+'="'+g+'"]',i=d.find(w.selectors.tooltipPanel+h),j=d.find(w.selectors.tooltipLabel+h),k=i.is(":hidden");j.toggleClass(f,k),i.toggleClass(f,k)}function k(b){var c;c=m(b),location.hash=a.param.fragment(location.hash,{offerId:c.id}),l(c.id,b)}function l(a,b){return d.getOffer(a).done(function(c){g.loadOverlay(c,a,b)})}function m(a){return a.closest(w.selectors.root).data(w.data.offer)}function n(a,b){var c=w.analyticsManager.trackingVars.genericClick,d=w.analyticsManager.getTrackingObjectProperties(c),e={};e[d.componentId]=b.parents(w.selectors.offerComp).length?w.CONSTANTS.C194B:w.CONSTANTS.C197B,e[d.destination]=b.attr(w.data.href),e[d.locationInPage]=w.CONSTANTS.OFFERS,e[d.buttonText]=b.text(),e[d.offerId]=a.id,e[d.offerText]=a.title.headline,w.analyticsManager.track(c,e)}function o(d,e,g){var h,i=a(w.selectors.offersTemplate),j=i.data(w.data.primaryCtaType),k=i.data(w.data.primaryCtaLabel),l=i.data(w.data.primaryCtaLink),m=i.data(w.data.primaryCtaTarget),n=i.data(w.data.secondaryCtaType),o=i.data(w.data.secondaryCtaLabel),q=i.data(w.data.secondaryCtaLink),r=i.data(w.data.secondaryCtaTarget),s=HELIOS.components.c_196B.offersCTAJson,u={};s&&(s=JSON.parse(s)),u.ctas={},j&&(u.ctas.primaryCta={type:j,label:k,link:l,target:m}),n&&(u.ctas.secondaryCta={type:n,label:o,link:q,target:r}),t||(t=c.compile(a(w.selectors.template).html())),g&&(g=c.compile(g)),b.each(d,function(a,b){a.ctaObj=p(a,u.ctas,s),h=t(a),g?e.append(g({offer:h})):e.append(h),e.find('.c_196B-0[data-offer-id="'+a.id+'"]').data(w.data.offer,a)}),f.renderDisclaimers(e)}function p(a,c,d){var e,f,g={};return a.model&&b.each(c,function(b,c){g[c]=g[c]||{},c!==w.CONSTANTS.PRIMARY&&c!==w.CONSTANTS.SECONDARY||(g[c].type=c),b.type===w.CONSTANTS.INTERNAL?(g[c].label=b.label,f=q(decodeURI(b.link),a),g[c].path=f,b.target&&(g[c].newWindow=w.htmlValue.targetBlank)):d[a.model.code]&&(e=a.model.code,(b.type===w.CONSTANTS.CONFIGURE_FALL_INVENTORY||b.type===w.CONSTANTS.CONFIGURE_CTA&&d[e].configCTA)&&(g[c].label=d[e].ctaLabel,g[c].path=q(decodeURI(d[e].ctaPath),a),g[c].dataPath=d[e].dataPath,g[c].deepLinkString=d[e].deepLinkString||"",d[e].openInNewWindow&&(g[c].newWindow=w.htmlValue.targetBlank)),d[e].configCTA||(b.type===w.CONSTANTS.CONFIGURE_FALL_INVENTORY?delete g[c].dataPath:b.type===w.CONSTANTS.CONFIGURE_CTA&&delete g[c]))}),g}function q(a,b){var c=b.model,d=w.CONSTANTS.EMPTY_STRING,e=w.CONSTANTS.EMPTY_STRING;return b.grade&&(d=b.grade.code),b.version&&(e=b.version.code),a=a.replace("^MODEL_CODE^",c.code).replace("^GRADE_CODE^",d).replace("^VERSION_CODE^",e).replace("^MODEL_NAME^",c.name),encodeURI(a)}function r(b){var c,d,f,g=a(b.currentTarget),h=m(g),i=g.attr(w.selectors.dataPath),j=g.attr(w.data.href),k=g.attr(w.selectors.target),l=g.data(w.data.urlExtension);b.preventDefault(),n(h,g),k!==w.htmlValue.targetBlank&&(k=w.htmlValue.targetParent),h.model&&h.grade&&i?(c=h.model.code,d=h.grade.code,h.version&&h.version.code&&(f=h.version.code),e.configureRemoteServices(c,d,f,i,j,l).done(function(a){g.attr(w.data.href,a),g.removeAttr(w.selectors.dataPath),w.window.open(a,k)}).fail(function(){w.window.open(j,k)})):w.window.open(j,k)}var s,t,u,v={selectors:{template:"#template-c_196B-0",offersTemplate:".offers-list-template",root:".c_196B-0",btnViewDetails:".cta-view-more",btnPrimary:".actions-primary > a",btnSecondary:".actions-secondary > a",offerComp:".c_194B-0",dataPath:"data-datapath",target:"target",tooltipLabel:".tooltip-label",tooltipPanel:".tooltip-panel"},classes:{loading:"loading",dataTooltipId:"data-tooltip-id",show:"show"},events:{onClick:"click",onCloseOverlay:a.noop},data:{offer:"offer",primaryCtaType:"primary-cta-type",primaryCtaLabel:"primary-internal-cta-label",primaryCtaLink:"primary-internal-cta-url",primaryCtaTarget:"primary-cta-target",secondaryCtaType:"secondary-cta-type",secondaryCtaLabel:"secondary-internal-cta-label",secondaryCtaLink:"secondary-internal-cta-url",secondaryCtaTarget:"secondary-cta-target",dataPath:"datapath",href:"href",urlExtension:"url-extension",tooltipLabel:".tooltip-label",tooltipPanel:".tooltip-panel"},CONSTANTS:{PRIMARY:"primaryCta",SECONDARY:"secondaryCta",CONFIGURE_CTA:"configure-cta",CONFIGURE_FALL_INVENTORY:"configure-fall-inventory",INTERNAL:"cta-internal",OFFERS:"offers",C194B:"C194.0B_Offers_Hub",C197B:"C197.0B_Model_Specific_Offers_Listing",EMPTY_STRING:""},htmlValue:{targetBlank:"_blank",targetParent:"_parent"}},w=null;return{init:h,appendItemsToElement:o,loadOfferOverlay:l}}),define("c_194B_0_analytics",["jquery","underscore","logger","c_195B_0_analytics"],function(a,b,c,d){"use strict";function e(b){l=a.extend({},k,b)}function f(a){var b,c,d={};return l.analyticsManager?(b=l.analyticsManager.trackingVars.buttonNoCookie,c=l.analyticsManager.getTrackingObjectProperties(b),d[c.componentId]=j,d[c.destination]=location.href,d[c.locationInPage]="offer",d[c.buttonText]=a.text(),d[c.contentAction]="show more",l.analyticsManager.track(b,d),!0):(i.warn("Analytics manager not defined. Exiting"),!1)}function g(a){var b,c,d={};return l.analyticsManager?(b=l.analyticsManager.trackingVars.genericClick,c=l.analyticsManager.getTrackingObjectProperties(b),d[c.componentId]="C194B_Offer_Container",d[c.destination]=a.context.href,d[c.locationInPage]="offer",d[c.buttonText]=a.text(),d[c.completionType]="findDealer",l.analyticsManager.track(b,d),!0):(i.warn("Analytics manager not defined. Exiting"),!1)}function h(a,b){var c,e,f={};return l.analyticsManager?(c=l.analyticsManager.trackingVars.search,e=l.analyticsManager.getTrackingObjectProperties(c),f[e.componentId]=j,f[e.searchType]="offers-unfilter",f[e.searchFilter]=d.getSearchFilterForFacetType(a.data("property")),f[e.searchFilterValue]=a.val(),f[e.offerCount]=b.toString(),l.analyticsManager.track(c,f),!0):(i.warn("Analytics manager not defined. Exiting"),!1)}var i=new c({prefix:"C194B_0 Analytics"}),j="C195B_Offer_Filters",k={},l={};return{init:e,trackLoadMore:f,trackCtaNoOffer:g,trackRemoveActiveFilter:h}}),define("c_194B_0",["jquery","underscore","remoteServices","handlebars","matchHeight","pictureFill","c_195B_0","c_196B_0","c_194B_0_analytics","c_195B_0_analytics","heliosObject","profileManager","smartLocationContext","jqueryBbq"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(c){ea=a.extend({},da,c),L=a(ea.selectors.root),L.length&&(R=a(ea.selectors.matchCount),S=a(ea.selectors.totalResults),T=a(ea.selectors.activeFilterWrapper),W=d.compile(a(ea.selectors.activeFiltersTemplate).html()),N=L.find(ea.selectors.activeFilters),U=a(ea.selectors.navContainer),V=a(ea.selectors.headerFilters),M=L.find(ea.selectors.listContainer),O=a(window),ha=M.data(ea.data.itemsPerPage)||ha,ga=M.data(ea.data.itemsOnLoad)||ga,h.init({analyticsManager:ea.analyticsManager,vehicleCategories:"",events:{onCloseOverlay:s},window:ea.window}),l.init({HELIOS:k}),ca=c.smartLocationContext,b.extend(ba,b.pick(a.deparam.fragment(),Z)),a.when(g.init({analyticsManager:ea.analyticsManager,smartLocationContext:ca})).done(function(){var b=a.Deferred();K(!0),ba.category?b.resolve():p().done(function(a){ba.category=a,b.resolve()}),b.done(function(){q(),t(),F(),G(ea.selectors.btnFilter,"opened"),H(ea.selectors.headerFilters,"opened"),ba.offerId&&h.loadOfferOverlay(ba.offerId)}).fail(function(){E()})}))}function p(){var b=a.Deferred();return c.getOffersFiltersModelName().done(function(c){a.isNestedProp(c,["facets","preFiltered","categories"])&&c.facets.preFiltered.categories[0]&&c.facets.preFiltered.categories[0].key?b.resolve(c.facets.preFiltered.categories[0].key):b.reject()}).fail(b.reject),b}function q(){K(!0),g.loadFilters(ba).done(function(a){r(a).done(function(b){a=g.setValidOfferTypes(b),y(a).done(function(a){u(g.filterFacets({allowedFilters:a.facets&&a.facets.filtered,isDeepLinked:!0,marketingGroupName:a.marketingGroupName}))}).fail(function(){E()})}).fail(function(){E()}),g.onFilterChange(function(a,b,c){"category"===b?(u(a),q()):(K(!0),r(a).done(function(d){a=g.setValidOfferTypes(d),y(a).done(function(a){u(g.filterFacets({allowedFilters:a.facets&&a.facets.filtered,source:b,marketingGroupName:a.marketingGroupName})),j.trackChange(c,a.totalResults)}).fail(function(){E()})}).fail(function(){E()}))})}).fail(function(){E()})}function r(d){var e=a.Deferred(),f={};return c.getOffersFiltersModelName(d.modelName&&d.modelName.value,d.category&&d.category.value,d.location&&d.location.value,f).done(function(a){var c=b.pluck(a&&a.facets&&a.facets.filtered&&a.facets.filtered.offerTypes,"key");e.resolve(c)}).fail(e.reject),e}function s(){u({offerId:{value:""}},!1)}function t(){L.find(ea.selectors.ctaContactDealer).click(function(){i.trackCtaNoOffer(a(this))}),L.find(ea.selectors.loadMore+" button").click(function(){return z(a(this)),i.trackLoadMore(a(this)),!1}),L.find(ea.selectors.activeFilters).on("click","button",function(){var b=a(this),c=g.removeFilter({property:b.data("property"),value:b.val()});return K(!0),r(c).done(function(a){c=g.setValidOfferTypes(a),y(c).done(function(a){w(g.filterFacets({allowedFilters:a.facets.filtered,source:b.data("property")})),i.trackRemoveActiveFilter(b,a.totalResults)}).fail(function(){E()})}).fail(function(){E()}),!1})}function u(a,c){var d={};b.each(a,function(a,c,e){b.isArray(a)?(d[c]=[],b.each(a,function(a,b,e){d[c].push(a.value)})):d[c]=a.value}),c=!(!b.isUndefined(c)&&!c),d&&(c?b.extend(ba,$,b.pick(d,Z)):b.extend(ba,b.pick(d,Z))),v(ba),c&&w(a)}function v(c){var d={};b.each(c,function(a,c,e){b.isEmpty(a)||(d[c]=a)}),location.hash=a.param.fragment("",b.pick(d,aa))}function w(a){var c=b.without(_),d=[];b.isObject(a)&&(a=b.pick(a,c),b.each(a,function(a,c,e){b.isArray(a)&&a.length?b.each(a,function(a,b,e){d.push({property:c,label:a.label,value:a.value})}):a&&d.push({property:c,label:a.label,value:a.value})})),d.length?T.find("span").addClass(ea.classes.hidden):T.find("span").removeClass(ea.classes.hidden),N.empty().append(W(d))}function x(){ea.matchHeight.forEach(function(b){a(b).matchHeight()})}function y(a){var d;return ia=a&&a.hasOwnProperty("modelName")?a.modelName.value:"",u(a),A(),L.find(ea.selectors.noOffers).addClass(ea.classes.hidden),d=b.clone(ba),d.hasOwnProperty("offerId")&&delete d.offerId,Y=c.getOffersModelName(ia,0,ga,d,!0),Y.done(function(a){a.totalResults?(R.text(a.totalResults),g.setMatchCount(a.totalResults),D(a,!0),B()):E()}).fail(function(){E()}).always(function(){K(!1)}),Y}function z(a){var b;A(a),fa<X&&c.getOffersModelName(ia,fa,ha,ba,!0).done(function(c){c.totalResults?(b=M.find("> ul > li:last"),D(c),C(b)):L.find(ea.selectors.loadMore).addClass(ea.classes.hidden),B(a)})}function A(a){a||(a=L.find(ea.selectors.loadMore+" button")),a.addClass(ea.classes.btnLoadMoreDisabled),a.closest(ea.selectors.loadMore).addClass(ea.classes.loadMoreLoading),a.prop("disabled","disabled")}function B(a){a||(a=L.find(ea.selectors.loadMore+" button")),a.prop("disabled",null),a.removeClass(ea.classes.btnLoadMoreDisabled),a.closest(ea.selectors.loadMore).removeClass(ea.classes.loadMoreLoading)}function C(b){a("html,body").animate({scrollTop:b.offset().top+b.height()-50},500)}function D(c,d){var e=M.find("> ul");d&&(e.empty(),fa=0),h.appendItemsToElement(c.offers,e,ea.templates.offerCard),f(e.get(0)),a(ea.selectors.img,e).load(b.debounce(x,250)),X=c.totalResults,fa+=c.offers.length,fa===X?L.find(ea.selectors.loadMore).addClass(ea.classes.hidden):L.find(ea.selectors.loadMore).removeClass(ea.classes.hidden)}function E(){R.text(0),g.setMatchCount(0),M.find("> ul").empty(),L.find(ea.selectors.noOffers).removeClass(ea.classes.hidden),a(ea.selectors.headerComponent).addClass(ea.classes.headerComponentHideCopy),a(ea.selectors.legalNotices).addClass(ea.classes.legalNoticesHidden),K(!1),a(ea.selectors.loadMore).addClass(ea.classes.hidden)}function F(){var c,d=!0,e=0,f=0,g=0,h=0;P=a(ea.selectors.mainHeader),Q=a(ea.selectors.inPageNavigation),e=P.height()||0,f=Q.height()||0,g=U.height()||0,h=e+f+g,c=b.throttle(function(){var a=O.scrollTop();a<=h&&!d?(d=!0,U.removeClass(ea.classes.stick).css("top",0),V.removeClass(ea.classes.stick)):a>h&&d&&(d=!1,U.addClass(ea.classes.stick).css("top",f),V.addClass(ea.classes.stick))},100),O.on("scroll",c),a(ea.selectors.btnMenu).on("click",I)}function G(b,c){a(b).on("click",function(){L.toggleClass(c),a("body").addClass("no-scroll")})}function H(b,c){a(b).on("click",function(){a("body").removeClass("no-scroll"),L.removeClass(c),V.removeClass(ea.classes.stick)})}function I(){var b=a("html, body").animate({scrollTop:0}).promise(),c=a(ea.selectors.btnMenu,L),d=a(ea.selectors.inPageNavigation,L);b.done(function(){var a=d.height();P.is(":visible")?(P.slideUp("fast"),c.removeClass(ea.classes.open),V.css("top",a)):(c.addClass(ea.classes.open),V.add(U).removeClass(ea.classes.stick).end().css("top",a+P.height()),P.slideDown("fast")),g.setFilterTopMargin()})}function J(c){return a.param.fragment("",b.pick(c,Z)).substring(1)}function K(a){M.toggleClass(ea.classes.loading,!!a),S.toggleClass(ea.classes.loading,!!a)}var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da={selectors:{root:".c_194B-0",listContainer:".c_194B-0-container",activeFilters:".c_194B-0-active-filters",body:"body",loadMore:".action-load-more",noOffers:".c_194B-0-container > .no-offers",headerComponent:".c_023-1",legalNotices:".c_029B",mainHeader:".c_010, .c_010B",inPageNavigation:".c_046, .c_046B",btnMenu:".btn-menu",btnFilter:".btn-filter",offerFilters:".offer-filters",filterMenu:".filter",navContainer:".main-nav-filters",headerFilters:".header-filters",activeFiltersTemplate:".c_194B-0-active-filters-template",matchCount:".c_194B-0-match-count em",activeFilterWrapper:".c_194B-0-filter-wrap",totalResults:".total-results",ctaContactDealer:".cta-contact-dealer",img:"img"},classes:{headerComponentHideCopy:"hide-copy",btnLoadMoreDisabled:"btn-disabled",loadMoreLoading:"action-load-more-loading",legalNoticesHidden:"hidden",hidden:"hidden",stick:"stick-header",open:"open",loading:"loading"},data:{modelCode:"modelCode",vehicleId:"vehicleId",vehicleCategories:"vehicleCategories",itemsOnLoad:"itemsOnLoad",itemsPerPage:"itemsPerPage"},templates:{offerCard:"<li>{{{offer}}}</li>"},hash:{offerId:"offerId"},matchHeight:[".vehicle h2",".conditions",".subtext",".c_196B-0 .picture-element img",".image-disclaimer",".detail h2",".detail-teaser",".detail-editorial",".detail-editorial-disclaim",".detail-ends",".detail",".smallprint",".actions"]},ea=null,fa=0,ga=6,ha=10,ia=null;return Z=["category","location","modelName","type","offerId"],$={category:"",location:"",modelName:"",type:""},_=["modelName","type"],aa=["category","modelName","type","offerId"],ba={category:null,location:"",modelName:"",type:[]},{init:o,generateDeepLinkHash:J,bindEvents:t}}),define("c_197_0",["jquery","underscore","remoteServices","c_196_0"],function(a,b,c,d){"use strict";function e(b){var c;y=a.extend({},x,b),r=a(y.selectors.root),r.length&&(C=r.data(y.data.itemsPerPage)||C,B=r.data(y.data.itemsOnLoad)||B,t=r.data(y.data.modelCode),u=r.data(y.data.vehicleId),v=r.data(y.data.vehicleCategories),w=r.data(y.data.dealerDma),d.init({analyticsManager:y.analyticsManager,modelCode:t,vehicleId:u,vehicleCategories:v,events:{onCloseOverlay:f}}),c=g(),!1!==c&&d.loadOfferOverlay(c),h(),w?j():i())}function f(){location.hash=y.hash.offerId+"="}function g(){var a="";return!(!location.hash||location.hash.substring(1,y.hash.offerId.length+2)!==y.hash.offerId+"="||""===(a=location.hash.substring(y.hash.offerId.length+2)))&&a}function h(){r.find(y.selectors.loadMore+" button").click(function(){var b=a(this);return q(b),k(b),!1}),r.on(y.events.click,y.selectors.actionsSecondary,function(b){var c=a(b.currentTarget),d=c.closest(y.selectors.c_196).data(y.data.offerId);w&&(b.preventDefault(),p(c.attr(y.strings.href),d))})}function i(){c.getOffers(u,0,B).done(function(a){a.totalResults?n(a):o(),r.removeClass(y.classes.loading)}).fail(function(){r.removeClass(y.classes.loading),o()})}function j(){var a="start="+D+"&size="+B+"&includeResults=true&includeFilteredFacets=false&includePreFilteredFacets=false&marketingGroupId="+w;c.getOffersByQuery(a).done(function(a){a.totalResults?(n(a),D++):o(),r.removeClass(y.classes.loading)}).fail(function(){r.removeClass(y.classes.loading),o()})}function k(a){var b;a.addClass(y.classes.btnLoadMoreDisabled),a.closest(y.selectors.loadMore).addClass(y.classes.loadMoreLoading),a.prop("disabled","disabled"),A<s&&(w?(b="start="+D+"&size="+B+"&includeResults=true&includeFilteredFacets=false&includePreFilteredFacets=false&marketingGroupId="+w,c.getOffersByQuery(b).done(function(b){l(b,a),D++})):c.getOffers(u,A,C).done(function(b){l(b,a)}))}function l(a,b){var c;a.totalResults?(c=r.find("> ul > li:last"),n(a),m(c)):r.find(y.selectors.loadMore).addClass(y.classes.hidden),b.prop("disabled",null),b.removeClass(y.classes.btnLoadMoreDisabled),b.closest(y.selectors.loadMore).removeClass(y.classes.loadMoreLoading)}function m(b){a("html,body").animate({scrollTop:b.offset().top+b.height()-50},500)}function n(a){var b=r.find("> ul");d.appendItemsToElement(a.offers,b,y.templates.offerCard),s=a.totalResults,A+=a.offers.length,
A===s?r.find(y.selectors.loadMore).addClass(y.classes.hidden):r.find(y.selectors.loadMore).removeClass(y.classes.hidden)}function o(){r.find(y.selectors.noOffers).removeClass(y.classes.hidden),a(document).find(y.selectors.headerComponent).addClass(y.classes.headerComponentHideCopy),a(document).find(y.selectors.legalNotices).addClass(y.classes.legalNoticesHidden)}function p(a,b){a=a.split(y.strings.html)[0]+"."+w+y.strings.html+"?offerId="+y.window.encodeURIComponent(b),y.window.location=a}function q(b){var c,d=y.analyticsManager.trackingVars.accordionExpansion,e=y.analyticsManager.getTrackingObjectProperties(d),f={},g="unknown";c=a(document).find(y.selectors.headerComponent+" h1"),1===c.length&&(g=c.text()),f[e.componentId]=z,f[e.accordionText]=b.text(),f[e.accordionType]=g,f[e.status]="open",y.analyticsManager.track(d,f)}var r,s,t,u,v,w,x={selectors:{root:".c_197-0",loadMore:".action-load-more",noOffers:"> .no-offers",headerComponent:".c_023-1",legalNotices:".c_029B",actionsSecondary:".actions-secondary a",c_196:".c_196-0"},classes:{headerComponentHideCopy:"hide-copy",btnLoadMoreDisabled:"btn-disabled",loadMoreLoading:"action-load-more-loading",legalNoticesHidden:"hidden",hidden:"hidden",loading:"loading"},data:{modelCode:"modelCode",vehicleId:"vehicleId",vehicleCategories:"vehicleCategories",itemsOnLoad:"itemsOnLoad",itemsPerPage:"itemsPerPage",dealerDma:"dealerDma",offerId:"offerId"},templates:{offerCard:"<li>{{{offer}}}</li>"},hash:{offerId:"offerId"},events:{click:"click"},strings:{html:".html",href:"href"}},y=null,z="C197_Model_Specific_Offer_Listing",A=0,B=6,C=10,D=0;return{init:e}}),define("c_197B_0",["jquery","underscore","matchHeight","pictureFill","remoteServices","c_196B_0","c_073","trackingCodes"],function(a,b,c,d,e,f,g,h){"use strict";function i(b){var c;T=a.extend({},S,b),D=a(T.selectors.root),J=a(T.selectors.location),K=a(T.selectors.results),D.length&&(X=D.data(T.data.itemsPerPage)||X,W=D.data(T.data.itemsOnLoad)||W,F=D.data(T.data.modelCode),G=D.data(T.data.vehicleId),H=D.data(T.data.vehicleCategories),I=D.data(T.data.dealerDma),R=T.heliosLocationProperties,O=h.trackingVars.search,P=O.searchTermType,Q=T.analyticsEvents,f.init({analyticsManager:T.analyticsManager,modelCode:F,vehicleId:G,vehicleCategories:H,events:{onCloseOverlay:l},window:T.window}),c=m(),!1!==c&&f.loadOfferOverlay(c),y(),n(),z())}function j(a,b){I&&a?q(a):I?q():o(b)}function k(){T.matchHeight.forEach(function(b){a(b).matchHeight()})}function l(){location.hash=T.hash.offerId+"="}function m(){var a="";return!(!location.hash||location.hash.substring(1,T.hash.offerId.length+2)!==T.hash.offerId+"="||""===(a=location.hash.substring(T.hash.offerId.length+2)))&&a}function n(){D.find(T.selectors.loadMore+" button").click(function(){var b=a(this);return x(b),r(b),!1}),D.on(T.events.click,T.selectors.actionsSecondary,function(b){var c=a(b.currentTarget),d=c.closest(T.selectors.c_196B).data(T.data.offerId);I&&(b.preventDefault(),w(c.attr(T.strings.href),d))}),Z&&(a(document).on(T.events.locationChanged+" "+T.events.setHeliosLocationByAutocomplete+" "+T.events.setHeliosLocationByGeolocate,z),J.on(Q.offersResultsByAutoAdjust,function(){L=P.autoAdjust}).on(Q.offersResultsByGeolocation,function(){L=P.geolocation}).on(Q.offersResultsByUserSearch,function(a,b){L=P.userSearch,M=b}))}function o(a){var b;e.getOffers(G,0,W,"",!1,N).done(function(c){switch(b=c.totalResults,c.totalResults?u(c):v(),L){case P.autoAdjust:case P.geolocation:g.buildAnalyticsGeneralSearchData(L,a,$,b,U);break;case P.userSearch:g.buildAnalyticsGeneralSearchData(L,a,$,b,U,M)}K.removeClass(T.classes.loading)}).fail(function(){v(),K.removeClass(T.classes.loading)})}function p(a){return T.CONSTANTS.LOCATION+a}function q(a){var b="start="+Y+"&size="+W+"&includeResults=true&includeFilteredFacets=false&includePreFilteredFacets=false&marketingGroupId="+I;a&&(b=b+"&"+p(a)),e.getOffersByQuery(b).done(function(a){a.totalResults?(u(a),Y++):v()}).fail(function(){v()}),K.removeClass(T.classes.loading)}function r(a){var b;a.addClass(T.classes.btnLoadMoreDisabled),a.closest(T.selectors.loadMore).addClass(T.classes.loadMoreLoading),a.prop("disabled","disabled"),V<E&&(I?(b="start="+Y+"&size="+W+"&includeResults=true&includeFilteredFacets=false&includePreFilteredFacets=false&marketingGroupId="+I,N&&(b=b+"&"+p(N)),e.getOffersByQuery(b).done(function(b){s(b,a),Y++})):e.getOffers(G,V,X,"",!1,N).done(function(b){s(b,a)}))}function s(a,b){var c;a.totalResults?(c=D.find("> ul > li:last"),u(a),t(c)):D.find(T.selectors.loadMore).addClass(T.classes.hidden),b.prop("disabled",null),b.removeClass(T.classes.btnLoadMoreDisabled),b.closest(T.selectors.loadMore).removeClass(T.classes.loadMoreLoading)}function t(b){a("html,body").animate({scrollTop:b.offset().top+b.height()-50},500)}function u(c){var e=D.find("> ul");f.appendItemsToElement(c.offers,e,T.templates.offerCard),d(e.get(0)),D.find(T.selectors.noOffers).addClass(T.classes.hidden),a(T.selectors.img,e).load(b.debounce(k,250)),E=c.totalResults,V+=c.offers.length,D.data(T.data.DmaEnabled)&&(c?C(c.marketingGroupName):C()),V===E?D.find(T.selectors.loadMore).addClass(T.classes.hidden):D.find(T.selectors.loadMore).removeClass(T.classes.hidden)}function v(){D.find(T.selectors.noOffers).removeClass(T.classes.hidden),a(document).find(T.selectors.headerComponent).addClass(T.classes.headerComponentHideCopy),a(document).find(T.selectors.legalNotices).addClass(T.classes.legalNoticesHidden),C()}function w(a,b){a=a.split(T.strings.html)[0]+"."+I+T.strings.html+"?offerId="+T.window.encodeURIComponent(b),T.window.location=a}function x(b){var c,d=T.analyticsManager.trackingVars.buttonNoCookie,e=T.analyticsManager.getTrackingObjectProperties(d),f={};c=a(document).find(T.selectors.headerComponent+" h1"),1===c.length&&c.text(),f[e.componentId]=U,f[e.destination]=b.attr(T.strings.href),f[e.locationInPage]=T.CONSTANTS.OFFERS,f[e.buttonText]=b.text(),f[e.contentAction]=T.CONSTANTS.SHOWMORE,T.analyticsManager.track(d,f)}function y(){Z=Boolean(D.find(T.selectors.location).length)}function z(){A(),K.addClass(T.classes.loading),Z?B().get().done(function(a){(a=a)&&a.hasOwnProperty(R.postalCode)&&(N=a.postalCode,j(N,a))}).fail(function(){j()}):j()}function A(){D.find(T.selectors.loadMore).addClass(T.classes.hidden),D.find(T.selectors.results).html(""),V=0}function B(){return T.smartLocationContext}function C(a){var b;a?(a=a.replace(/-/g,", "),b=a+" "+D.data(T.data.DmaRegionalLabel)):b=D.data(T.data.DmaNationalLabel),D.find(T.selectors.headingGroupText).html(b)}var D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S={selectors:{root:".c_197B-0",loadMore:".action-load-more",noOffers:"> .no-offers",headerComponent:".c_023-1",legalNotices:".c_029B",actionsSecondary:".actions-secondary a",c_196B:".c_196B-0",location:".c_073",results:".offers",headingGroupText:".heading-group h2 span",img:"img"},classes:{headerComponentHideCopy:"hide-copy",btnLoadMoreDisabled:"btn-disabled",loadMoreLoading:"action-load-more-loading",legalNoticesHidden:"hidden",hidden:"hidden",loading:"loading"},data:{modelCode:"modelCode",vehicleId:"vehicleId",vehicleCategories:"vehicleCategories",itemsOnLoad:"itemsOnLoad",itemsPerPage:"itemsPerPage",dealerDma:"dealerDma",offerId:"offerId",DmaRegionalLabel:"dma-regional-suffix-label",DmaEnabled:"dma-enabled",DmaNationalLabel:"dma-national-default-label"},templates:{offerCard:"<li>{{{offer}}}</li>"},hash:{offerId:"offerId"},events:{click:"click",locationChanged:"universalLocationChanged",setHeliosLocationByAutocomplete:"setHeliosLocationByAutocomplete",setHeliosLocationByGeolocate:"setHeliosLocationByGeolocate"},strings:{html:".html",href:"href"},heliosLocationProperties:{postalCode:"postalCode"},analyticsEvents:{offersResultsByUserSearch:"OFFERS_RESULTS_BY_USERSEARCH",offersResultsByGeolocation:"OFFERS_RESULTS_BY_GEOLOCATION",offersResultsByAutoAdjust:"OFFERS_RESULTS_BY_AUTOADJUST"},CONSTANTS:{OFFERS:"offer",SHOWMORE:"show more",LOCATION:"location="},matchHeight:[".vehicle",".detail",".bottom-interaction",".actions",".vehicle h2",".conditions",".subtext",".c_196B-0 .picture-element img",".image-disclaimer",".detail h2",".detail-teaser",".detail-editorial",".detail-editorial-disclaim",".detail-ends",".smallprint"]},T=null,U="C197_Model_Specific_Offer_Listing",V=0,W=6,X=10,Y=0,Z=!0,$="offers";return{init:i}}),define("c_206",["jquery"],function(a){"use strict";function b(b){if(n=a.extend({},m,b),j=a(n.root),!j.length)return!1;l=window,c(),k&&d(),i(),h(k)}function c(){a(n.selectors.tabsContainer).each(function(){var b=a(n.selectors.tabsContainerHead,this),c=b.find(n.selectors.tabs).length;k=!1,c>2&&l.matchMedia(HELIOS.config.common.mediaQuery.is.small).matches?k=!0:c>3&&l.matchMedia(HELIOS.config.common.mediaQuery.is.medium).matches&&(k=!0)})}function d(){j.addClass(n.classes.accordion)}function e(){0===a(n.selectors.activeSection,j).length&&(a(n.selectors.singleTab,j).first().addClass(n.classes.activeTab).siblings().removeClass(n.classes.activeTab),a(n.selectors.tabsContent,j).first().addClass(n.classes.activeSection).siblings().removeClass(n.classes.activeSection),a(n.selectors.sectionHeader,j).first().addClass(n.classes.activeHeader).siblings().removeClass(n.classes.activeHeader)),j.removeClass(n.classes.accordion)}function f(b){var d,e,f,h,i=a(b.currentTarget),l=i.data(n.data.title);c(),k?(d=i.parents(n.selectors.sectionHeader),e=i.closest(j).find(n.selectors.tabsContent+"["+n.attrs.title+'="'+l+'"]'),h=a(n.selectors.singleTab,j).find("["+n.attrs.title+'="'+l+'"]').parents(n.selectors.tabs),d.toggleClass(n.classes.activeHeader).siblings().removeClass(n.classes.activeHeader),e.toggleClass(n.classes.activeSection).siblings().removeClass(n.classes.activeSection),h.addClass(n.classes.activeTab).siblings().removeClass(n.classes.activeTab)):(d=i.parents(n.selectors.tabs),e=i.closest(j).find(n.selectors.contentWrapper,j).find("["+n.attrs.title+'="'+l+'"]'),f=a(n.selectors.sectionHeader,j).find("["+n.attrs.title+'="'+l+'"]').parent(),d.addClass(n.classes.activeTab).siblings().removeClass(n.classes.activeTab),e.addClass(n.classes.activeSection).siblings().removeClass(n.classes.activeSection),f.addClass(n.classes.activeHeader).siblings().removeClass(n.classes.activeHeader)),g(i),b.preventDefault()}function g(b){var c=a(b),d=c.text(),e=(b.href,n.analyticsManager.trackingVars.toggle),f={componentId:n.analytics.componentId,toggleType:n.analytics.toggleType,toggleValue:d};n.analyticsManager.tag(e,f)}function h(){j.find(n.selectors.tabsContainerHeadA).on(n.events.click,f),j.find(n.selectors.sectionHeaderA).on(n.events.click,f),a(l).resize(function(){c(),k?d():e()})}function i(){j.addClass(n.classes.active)}var j,k,l,m={root:".c_206",events:{click:"click"},classes:{activeTab:"active-tab",activeSection:"active-section",activeHeader:"active-header",accordion:"accordion",hidden:"hidden",active:"active"},selectors:{tabsContainer:".tabs-container-ex",tabsContainerHead:".tabs-container-head",tabsContainerHeadUl:".tabs-container-head ul",sectionHeader:".section-header",activeSection:".active-section",sectionHeaderA:".section-header a",tabsContainerHeadA:".tabs-container-head a",contentWrapper:".content-wrapper",tabsContent:".tabs-content",singleTab:".tabs-container-head li",tabs:"li"},attrs:{title:"data-title"},data:{title:"title"},analytics:{componentId:"C206_Content_Tabs",toggleType:"content"}},n=null;return{init:b}}),define("c_207_ApplicationConstants",[],function(){"use strict";return{APPLICATION:{ANALYTICS:{SEARCH_TYPE:"dealer-userselected",LOCATION_IN_PAGE:{FOOTER:"find-a-dealer:legal-footer",ACTION_PANEL:"find-a-dealer:action-panel",PREFERRED_DEALER_DETAILS:"find-a-dealer:preferred-dealer-details",SERVICES:"find-a-dealer:services",HOLIDAY_CALENDAR:"find-a-dealer:holiday calendar"},TOGGLE_TYPE:{DEALER_DETAILS:"find-a-dealer:dealer-details"},DEALER_ACTION:{MAP:"Map",LIST:"List",SET_AS_PREFERRED:"Set as preferred"},REVIEWS_ACTION:{TYPE_SALES:"reviews-sales",TYPE_AFTERSALES:"reviews-aftersales"}},EVENTS:{APPLICATION_READY:"applicationReady",ANALYTICS:{SEARCH:"analyticsSearch",GENERIC_CLICK:"analyticsGenericClick",DEALER_INTERACTION:"analyticsDealerInteraction",TOGGLE:"analyticsToggle",ACCORDION_EXPANSION:"analyticsAccordionExpansion",TOOLTIP_DISPLAY:"tooltipDisplay"},SEARCH:{PREDICTIONS_CHANGED:"predictionsChanged",USER_QUERY_CHANGED:"userQueryChanged",QUERY_SUBMITTED:"querySubmitted",SELECTED_PLACE_CHANGE:"selectedPlaceChange",USE_CURRENT_LOCATION_CHANGED:"useCurrentLocationChanged",PRIOR_PLACE_CHANGED:"priorPlaceChanged"},POSITION:{FOCUS_POSITION_CHANGED:"focusPositionChanged"},DEALER:{SEARCH_DEALERS_SUBMITTED:"searchDealersSumitted",DEALER_SELECT:"dealerSelect",SHOW_SALES_REVIEWS:"showSalesReviews",SHOW_AFTERSALES_REVIEWS:"showAfterSalesReviews",DEALERS_UPDATED:"onUpdateDealers",DEALER_DETAILS_CHANGE:"dealerDetailsChange",BACK_TO_RESULTS:"backToResults",DEALERS_RESPONSE:"dealerResponse"},PREFERRED_DEALER:{REQUEST_NEW:"requestNewPreferredDealer",ADD:"preferredDealerAdd"},FILTERS:{CLEAR_FILTERS:"clearFilters"},MAP:{API_READY:"mapApiReady",MAP_OPTIONS_UPDATE:"mapOptionsUpdate"},USER:{USER_CONTEXT_UPDATE:"userContextUpdate",SET_USER_CONTEXT:"setUserContext",LOGIN_SUCCESSFUL:"loginSuccessful"},VIEWPORT:{DIMENSIONS_UPDATED:"dimensionsUpdated",SET_ACTIVE_TAB:"activeTabChange",CLICK:"click",RESIZE:"resize"},FIXED_HEADER:{AUTO_HIDE:"autoHide",HIDE_HEADER:"hideHeader",SHOW_HEADER:"showHeader",CLICK:"click",DIRECTION:{DOWN:"down"}},ERRORS:{LOCATION_NOT_FOUND:"locationNotFound",DEALERS_NOT_FOUND:"dealersNotFound"},LOCATION:{DEEP_LINK_LOCATION_FOUND:"deepLinkLocationFound",SET_SMART_LOCATION:"setSmartLocation",SMART_LOCATION_FOUND:"smartLocationFound",SMART_LOCATION_NOT_FOUND:"smartLocationNotFound"},LOADING:"loading",LOADED:"loaded",SHOW_ICON_KEYS:"showIconKeys",HIDE_ICON_KEYS:"hideIconKeys"},PROPERTIES:{NAME:"Helios Dealer Locator",MODEL:"0.1",VIEWPORT:{MAP_PREFERRED:"MAP",LIST_PREFERRED:"LIST",IS_SMALL:"isSmall",IS_MEDIUM:"isMedium",IS_LARGE:"isLarge"},PRINT:"print",DEALER:{GENERAL_DETAILS_TYPE:"generalDetails",GENERAL_BACK_LINK:"backLink",GENERAL_PREFERRED_DEALER:"preferredDealer",GENERAL_SET_PREFERRED_DEALER_CTA:"setPreferredDealer",SET_PREFERRED_CONFIRM_OVERLAY:"setConfirmOverlay",SET_PREFERRED_SUCCESS_OVERLAY:"setSuccessOverlay",GENERAL_CONTACT_TYPE:"contact",GENERAL_OPENING_HOURS_TYPE:"openingHours",GENERAL_SERVICES_TYPE:"services",GENERAL_SALES_TYPE:"sales",GENERAL_HOLIDAY_CALENDER:"holidayCalendarUrl",GENERAL_OPENING_HOURS_URL:"openingHoursUrl",GENERAL_CTAS_TYPE:"ctas",GENERAL_AWARDS_TYPE:"awards",GENERAL_AVERAGE_RATINGS_TYPE:"averageStarRating",GENERAL_SPONSORED_AWARDS_TYPE:"sponsoredAwards",GENERAL_SPOKEN_LANGUAGES_TYPE:"spokenLanguages",GENERAL_PRIMARY_CTA_TYPE:"dealerPrimaryCTA",GENERAL_SECONDARY_CTAS_TYPE:"dealerSecondaryCTAs",ID:"id",DEALER_ID:"dealerId",SITE_ID:"siteId",URL_ID:"urlId",URL:"url",NAME:"name",GROUP:"group",TYPE:"type",ACCORDION_SERVICES:"accordionServices",ACCORDION_SALES:"accordionSales",MARKER_STYLE:"markerStyle",GEOLOCATION:"geolocation",GET_DIRECTIONS:"getDirections",BASE_URL:"baseURL",ADDRESS:"address",DEALER_WEBSITE:"dealerWebsite",DEALER_EMAIL:"dealerEmail",DEALER_GET_DIRECTIONS:"dealerGetDirectionsLabel",DEALER_GET_DIRECTIONS_URL:"dealerGetDirectionsURL",DEALER_PHONES:"dealerPhones",WEEK_DAYS_LABELS:"weekDaysLabels",IS_PREFERRED_DEALER:"isPreferredDealer",DEALER_FILTERS:"dealerFilters"},USER:{USER_CONTEXT:"userContext",ORIGINS:"origins",RESULTS:"results",NONE:"none",STATES:{DEEP_LINK:"deepLink",AUTOMATIC_SEARCH:"automaticSearch",MANUAL_SEARCH:"manualSearch"}},URL:{DEALER_ID:"dealerId",ORIGIN:"origin",DEALER_PHONES:"dealerPhones",WEEK_DAYS_LABELS:"weekDaysLabels",SHORT:"short",NUMERIC:"numeric"}},ERRORS:{INIT:{MULTIPLE_INSTANCES:"Cannot initialise multiple instances of c_207/Dealer Locator"},CONFIG:{NOT_DEFINED:"Config data expected in 'script[data-content]'",UNABLE_TO_PARSE:"Unable to parse JSON data provided in 'script[data-content]'"},MAP_INTERFACE:{NOT_AVAILABLE:"Google Maps API is not available"}},CSS_CLASSES:{C_207_EXIT_BUTTON:"c_207-exit-button",C_207:"c_207",IS_LOCKED:"is-locked",SEARCH_ACTIVE:"search-active",HEAD_BAR_DISABLED:"head-bar-disabled",HIDE:"hide",DISPLAY:"display",NONE:"none",BLOCK:"block",REVIEWS_OVERLAY:"c_236-overlay",OVERLAY_CUSTOM_CLASS:"modal-overlay-dark"},IDS:{REVIEW_APP_CONTAINER:"dealer-locator-reviews"},SELECTORS:{HTML:"html",ROOT:".c_207",DEALER_LOCATOR:".dealer-locator",LOADER:".loader",LOGO_PRINT:".logo-print",AREA_TO_PRINT_LOGO:".header-bar div",REVIEWS_APP_BASE:".c_207 .c_236"},REGIONS:{HEADER_BAR:"headerBarView",SEARCH_BOX:"searchBox",TABS_NAVIGATION:"tabsNavigation",DEALERS_VIEW:"dealersView",DEALERS_LIST_PANEL:"dealerListPanel",DEALERS_LIST:"dealerList",DEALERS_ORIGIN_LINK:"dealersOriginLink",DEALERS_RESULTS_INSTRUCTION:"dealersResultsInstruction",DEALER_DETAILS:"dealerDetails",DEALERS_RESULT_TITLE:"dealersTitle",DEALERS_ERRORS:"dealer",DEALER_OVERLAY:"dealerOverlay",MAP_MAIN:"mapMain",MAP_OVERLAY:"mapOverlay",MAP:"map",ICON_KEYS:"iconKeys",FOOTER:"footer",ERRORS:"errors",FILTERS:"filters"},REGIONS_SELECTORS:{HEADER_BAR:".header-bar",SEARCH_BOX:".search-view",TABS_NAVIGATION:".tabs-navigation",DEALERS_VIEW:".dealers-view",MAP_MAIN:".map-main-view",MAP_OVERLAY:".map-overlay",MAP:".map",ICON_KEYS:".icon-keys",DEALERS_LIST_PANEL:".dealers-list-panel",DEALERS_ORIGIN_LINK:".dealers-origin-link",DEALERS_RESULTS_INSTRUCTION:".dealers-results-instruction",DEALER_DETAILS:".dealer-details-panel",FOOTER:".footer",DEALERS_LIST:".dealers-list",ERRORS:".dealer-errors",FILTERS:".filters",DEALER_OVERLAY:".dealer-modal-container"}},BACKBONE:{EVENTS:{COLLECTION:{ERROR:"error",SORT:"sort",SYNC:"sync",CHANGE:"change",RESET:"reset"}}}}}),define("c_207_ModelConstants",[],function(){"use strict";return{c_207_1:{MODEL:{EVENTS:{DISPLAYED_PLACE_NAME_CHANGE:"change:displayedPlaceName",PLACE_PREDICTIONS_CHANGE:"change:placePredictions",SELECTED_PLACE_CHANGE:"change:selectedPlace",USER_QUERY_CHANGE:"change:userQuery",USE_CURRENT_LOCATION_CHANGE:"change:useCurrentLocation",PRIOR_PLACE_CHANGE:"change:priorPlace"},PROPERTIES:{DISPLAYED_PLACE_NAME:"displayedPlaceName",TITLE:"title",COMPONENT:"C_207_1",USER_QUERY:"userQuery",PLACE_PREDICTIONS:"placePredictions",NO_MATCH_FOUND:"noMatchFound",SELECTED_PLACE:"selectedPlace",PRIOR_PLACE:"priorPlace",HELIOS_LOCATION:"heliosLocation"}},COLLECTION:{PROPERTIES:{LOCATION:"location"}},VIEW:{SELECTORS:{ROOT:".c_207_1",QUERY_INPUT:"[name=query-input-field]",PREDICTIONS_LIST:"ul.predictions-list",PREDICTIONS_ELEM:"ul.predictions-list li.prediction-ele",SEARCH_CTA:".search-cta",OPTION_SELECTED:".option-selected",DETECT_LOCATION_CTA:".detect-location-cta",template:"#new-autocomplete-ctx",INPUT:".c_207_1 .places-search-box",spanAutocomplete:".c_207_1 .autocomplete-suggestions",resultItem:".pac-item"},CSS_CLASSES:{PREDICTION_ELEM:"prediction-ele",PREDICTIONS_LIST:"predictions-list",HIDE:"hide",OPTION_SELECTED:"option-selected"},EVENTS:{GET_POSTAL_CODE_BY_ADDRESS_NAME:"getPostalCodeByAddressName"}}},c_207_2:{MODEL:{DEALER_ITEM:{PROPERTIES:{DEALER_ID:"dealerId",DISTANCE:"distance"},EVENTS:{DEALER_CHANGED:"change",BACK_TO_RESULTS_CHANGED:"backToResultsChanged"}},DEALER_DETAIL:{PROPERTIES:{ID:"id",NAME:"name",DATA:"data",TYPE:"type",ACCORDION_SERVICES:"accordionServices",ACCORDION_SALES:"accordionSales",ACCORDION_CLOSE:"accordionClose",GET_SERVICES:"services",GET_SALES:"sales",DESCRIPTION:"description",TITLE:"title",TOOLTIP:"tooltip",OPENING_HOURS:"openingHours",PHONES:"phones",SHOW_PHONES:"showPhones",SHOW_STRUCTURED_OPENING_HOURS:"showStructuredOpeningHours",SHOW_OPENING_HOURS_TEXT:"showOpeningHoursText",GET_EXCLUDE_SERVICE_DETAIL:"getExcludeServiceDetail",SHOW_LINK:"showLink",SHOW_EXPAND_ACCORDION:"showExpandAccordion",SHOW_EXCLUDE_SERVICE_DETAIL:"showExcludeServiceDetail"}},ERRORS:{PROPERTIES:{CURRENT_ERROR:"currentError"},EVENTS:{CURRENT_ERROR_CHANGE:"change:currentError"}}},VIEW:{SELECTORS:{ACCORDION:".accordion",ACCORDION_HEADER:".accordion-header",ACCORDION_PANEL:".accordion-panel",CTA:".button",ROOT:".c_207_2",DEALER_RESULTS:".result-dealers-items",BACK_TO_RESULTS_BUTTON:".back-to-results button",BACK_TO_LINK_CTA:".back-to-results a",DEALER_ITEM:".dealer-item",DEALER_INFO:".dealer-info",DEALER_INFO_NAME:".dealer-info-name",DEALER_DETAILS:".dealer-details-panel",DEALERS_LIST_PANEL:".dealers-list-panel",DEALERS_LIST:".dealers-list",BACK_TO_RESULTS:".back-to-results",FOOTER:".footer",ERROR_MESSAGE:".error-message",NO_RESULTS_FILTER:".no-results-filter",TOOLTIP:".has-tooltip",TOOLTIP_CONTAINER:".award-items",TOOLTIP_VIEWPORT:".award-items",TOOLTIP_SERVICES_ACCORDION:".accordion",TOOLTIP_SERVICES_LIST:".services-list-tooltip-related",TOOLTIP_SALES_LIST:".sales-list-tooltip-related",BODY:"body",ANALYTICS_TARGET_DEALER_INTERACTION:".analytics-dealer-interaction",ANALYTICS_TARGET_GENERIC_CLICK:".analytics-generic-click",VIEW_AFTERSALES_REVIEWS:".view-aftersales-reviews",VIEW_SALES_REVIEWS:".view-sales-reviews",SET_PREFERRED_DEALER_CTA:".set-preferred-dealer-cta",DEALER_AWARDS:".dealer-awards",PICTURE_ELEMENT:".picture-element",DEALER_LIST_LINKS:".dealers-list-panel a",DEALER_TITLE:".dealer-info h3",ACCORDION_PANEL_CHECKBOX:".accordion-panel input",DEALER_DETAILS_LINKS:".dealer-details-panel a"},EVENTS:{SELECT_DEALER:"click @ui.dealer-item",DEALERS_PHONE_UPDATE:"helios.dealer.update",SET_PREFERRED_DEALER:"click @ui.set-preferred-dealer-cta",DEALER_INFO:"click @ui.dealerInfo",DEALER_INFO_NAME:"click @ui.dealerInfoName",ANALYTICS_TARGET_PHONE_INTERACTION:"click @ui.analyticsTargetPhoneInteraction"},CSS_CLASSES:{HIDE:"hide",NEXT_SIBLING_RELATED:"next-sibling-related",ERROR_MESSAGE:"error-message",DISABLE_CONTENT:"disable-content"},OPTIONS:{SCROLL_TOP:0},DATA_ATTRIBUTES:{DEALER_ACTION:"dealer-action",SITE_NAME:"site-name"},PROPERTIES:{CONTACT:"contact",TYPE:"type",DATA:"data",GENERAL_DETAILS:"generalDetails"}}},c_207_3:{MODEL:{EVENTS:{MAP_OPTIONS_CHANGE:"change:mapOptions",VIEWPORT_DIMENSIONS_CHANGE:"change:viewportDimensions"},PROPERTIES:{TITLE:"title",MAP_READY:"mapReady",MAP_OPTIONS:"mapOptions",VIEWPORT_DIMENSIONS:"viewportDimensions",IS_SMALL:"isSmall",IS_MEDIUM:"isMedium",IS_LARGE:"isLarge",RESIZE:"resize"}},VIEW:{SELECTORS:{ROOT:".c_207_3"},EVENTS:{MAP_READY:"change:mapReady"},PROPERTIES:{SCROLLWHEEL:"scrollwheel",DRAGGABLE:"draggable"}}},c_207_4:{MODEL:{EVENTS:{MARKERS_CHANGE:"change:markers"},PROPERTIES:{YOUR_LOCATION:"yourLocation",MARKER_STYLES:"markerStyles",DEALER_ICON_KEYS:"dealerIconKeys",GEOMARKER:"geoMarker",MARKERS:"markers"}}},TABS_VIEW:{VIEW:{CSS_CLASSES:{VIEW_TAB:"priority-region",ACTIVE_TAB:"active"},SELECTORS:{TAB_MAP:".tab-title[data-tab-id=map-main-view]",TAB_DEALER_LIST:".tab-title[data-tab-id=dealers-view]"}}},c_207_5:{VIEW:{SELECTORS:{LINK:"a"}}},c_207_6:{VIEW:{SELECTORS:{ACCORDION:".accordion",ACCORDION_HEADER:".accordion-header",ACCORDION_PANEL:".accordion-panel",FILTERS_TITLE:".accordion-header .filters-title",FILTERS_NUMBER:".accordion-header .filters-number",FILTER_CHECKBOX:"input[type=checkbox]",TOOLTIP:".has-tooltip",HEADER:"h3",RESET_BUTTON:".reset-button",TOOLTIP_CONTAINER:".filter-item",TOOLTIP_VIEWPORT:".filter-item"},CSS_CLASSES:{HIDE:"hide"},PROPERTIES:{TOOLTIP_PARTIALS:"c_207_tooltip"}},MODEL:{PROPERTIES:{ACTIVE:"active",DESCRIPTION:"description",NAME:"name",REQUEST_PARAM_VALUE:"requestParamValue",TOOLTIP:"tooltip",USER_SELECTED:"userSelected"}},COLLECTION:{PROPERTIES:{ACTIVE_VISIBLE_FILTERS:"activeVisibleFilters"},EVENTS:{CHANGE_ACTIVE_VISIBLE_FILTERS:"change:activeVisibleFilters"}}},c_207_7:{MODEL:{DEALER_ITEM:{PROPERTIES:{DEALER_ID:"dealerId"}},DEALER_DETAIL:{PROPERTIES:{ID:"id",NAME:"name",DATA:"data",TYPE:"type"}}},VIEW:{SELECTORS:{CONFIRM_PREFERRED_DEALER_CTA:".confirm-set-preferred",OK_PREFERRED_DEALER_CTA:".ok-set-preferred",CANCEL_PREFERRED_DEALER_CTA:".cancel-set-preferred",ERROR_BLOCK:".error-box"},EVENTS:{CONFIRM_PREFERRED_DEALER:"click @ui.confirm-set-preferred",CANCEL_PREFERRED_DEALER:"click @ui.cancel-set-preferred",OK_PREFERRED_DEALER:"click @ui.ok-set-preferred",CONFIRM_SET_REQUEST_PREFERRED_DEALER:"confirmSetRequestPreferredDealer",CANCEL_SET_REQUEST_PREFERRED_DEALER:"cancelSetRequestPreferredDealer",OK_SET_REQUEST_PREFERRED_DEALER:"okSetRequestPreferredDealer"},CSS_CLASSES:{LOADER:"ajax-btn-loading",HIDE:"hidden",SET_PREFERRED_DEALER_OVERLAY:"set-preferred-dealer-overlay"},DATA_ATTRIBUTES:{DEALER_ACTION:"dealer-action"},PROPERTIES:{CONTACT:"contact",TYPE:"type",DATA:"data"}}},MAPS_INTERFACE:{MODEL:{CSS_CLASSES:{INACTIVE_LABEL:"inactive-label",ACTIVE_LABEL:"active-label"},EVENTS:{MAP_API_INSTANCE_CHANGE:"change:mapApiInstance",PLACES_CHANGE:"change:places",MAP_OPTIONS_CHANGE:"change:mapOptions",MAP_STYLES_CHANGE:"change:mapStyles",COUNTRY_GEOLOCATION_CHANGE:"change:countryGeolocationData",SEARCH_LOCATION_CHANGE:"change:searchLocation",CURRENT_PLACE_CHANGE:"change:currentPlace",DEALER_MARKERS_CHANGE:"change:dealerMarkers",USER_MARKER_CHANGE:"change:userMarker",ACTIVE_DEALER_CHANGE:"change:activeDealer",IDLE:"idle",UPDATE_MAP:"updateMap"},PROPERTIES:{GOOGLE_MAPS_API:"googleMapsApis",TITLE:"title",NAME:"name",DEALER_ID:"dealerId",LETTER:"letter",SELECTOR:"selector",MAP_API_INSTANCE:"mapApiInstance",USER_MARKER:"userMarker",GEOLOCATION:"geolocation",COUNTRY_GEOLOCATION_DATA:"countryGeolocationData",COUNTRY_LAT_LNG:"countryLatLng",COUNTRY_BOUNDS:"countryBounds",COUNTRY_ZOOM_LEVEL:"countryZoomLevel",MAP_OPTIONS:"mapOptions",DRAGGABLE:"draggable",SCROLLWHEEL:"scrollwheel",ZOOM:"zoom",DISABLE_DEFAULT_UI:"disableDefaultUI",ZOOM_CONTROL:"zoomControl",STREETVIEW_CONTROL:"streetViewControl",DEFAULT_MAP_STYLE:"defaultMapStyle",DEFAULT_MARKER_PROPERTIES:"defaultMarkerProperties",ICONS:"icons",BOUNDS:"bounds",MAP_STYLES:"mapStyles",PLACES:"places",MARKERS:"markers",MARKER:"marker",DEALER_MARKERS:"dealerMarkers",TYPE:"type",ACTIVE_DEALER:"activeDealer",CURRENT_PLACE:"currentPlace",SEARCH_LOCATION:"searchLocation",LABEL_CLASS:"labelClass",LABEL_ANCHOR:"labelAnchor",ACTIVE_WIDTH:"activeWidth",ACTIVE_HEIGHT:"activeHeight",ICON_STYLE:"iconStyle",SALES_TYPE_UPDATE:"salesType",SERVICES_TYPE_UPDATE:"services",AUTOMATIC_ZOOM_LEVEL:"automaticZoomLevel",MARKER_CLUSTER:"markerCluster",SPIDERFIER:"spiderfier"},VALUES:{ZOOM_LOGIC:{MINIMUM_VISIBLE_DEALERS_REQUIRED:1,DEFAULT_AUTOMATIC_ZOOM_LEVEL:3},DEALER:{INITIAL_STATE:"initialState",CURRENT_STATE:"currentState"},CLUSTERING:{MAX_ZOOM:17,MINIMUM_CLUSTER_SIZE:2,SPIDER_EVENT:"idle",SPIDER_DEFAULT_STROKE_COLOR:"#000"},MAP_RENDER_THROTTLE_DELAY:50,DEFAULT_Z_INDEX:1,DEFAULT_INITIAL_MIN_ZOOM:0,DEFAULT_MAX_ZOOM:21},MARKER_FILE_TYPE:".png",OPERATORS:{MIDDLE_DIVIDER:2,SHADOW_OFFSET:5},ERRORS:{ACTIVE_DEALER_NOT_CHANGED:"ACTIVE_DEALER_NOT_CHANGED"}}},DEALERS:{MODEL:{PROPERTIES:{DEALER_ID:"dealerId",LOCATION:"location",SIZE:"size",DEALERS:"dealers",LETTER:"letter",DEALER_LETTERS:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",INITIAL_STATE:"initialState",CURRENT_STATE:"currentState",FORMATTED_ADDRESS:"formattedAddress",SALES_TYPE_UPDATE:"sales",SERVICES_TYPE_UPDATE:"services",SALES_ORDER_UI_UP:"up",SALES_ORDER_UI_DOWN:"down"},OPTIONS:{DECIMAL_POINTS:1,DISTANCE_COMPARATOR:"distanceComparator",DISTANCE_SELECTED:"distanceSelected",DISTANCE_UNITS_NAME:"distanceUnitsName",ICON_STYLE:"iconStyle",SALES_TYPE_UPDATE:"sales",SERVICES_TYPE_UPDATE:"services",DEALER_TYPE_DEFAULT:"default"},VALUES:{STATES:{DEFAULT:"default",SECONDARY:"secondary",ACTIVE:"active"}},ADDRESS:{ITEMS:{NEXT_LINE:"nextLine",COMMA_AND_SPACE:"commaAndSpace"},VALUES:{COMMA_AND_SPACE:", "}},AWARDS_VISIBILITY:{ICON_LABEL:"iconLabel",AWARD_IMAGE:"awardImage",AWARD_IMAGE_LABEL:"awardImageLabel"},EVENTS:{DEALERS_CHANGED:"change:dealers"}}},DEALER_DETAILS:{MODEL:{ELEMENTS:{TYPES:{ADDRESS:"address",CONTACT:"contact",OPENING_HOURS:"openingHours",SERVICES_LIST:"servicesList",PRIMARY_CTA:"dealerPrimaryCTA",SECONDARY_CTAS:"dealerSecondaryCTAs",FOOTER:"footer",PAGING:"paging",FILTERS:"filters",AWARDS:"awards",RATINGS:"ratings",REVIEWS:"reviews",LANGUAGES_SPOKEN:"languagesSpoken"},OPTIONS:{PREFERRED_DEALER:{IS_ENABLED:"isEnabled",IS_PREFERRED_DEALER:"isPreferredDealer",MANDATORY_SERVICES:"mandatoryServices",ADDED_IN_CURRENT_SESSION:"addedInCurrentSession"}}},PROPERTIES:{BASE_URL:"baseURL",DEALER_ID_TOKEN:"{DEALER_ID}",DEALER_ID:"dealerId",SITE_ID:"siteId",LETTER:"letter",DISTANCE_SELECTED:"distanceSelected",DISTANCE_UNIT_NAME:"distanceUnitsName",RANK:"rank",FORMATTED_ADDRESS:"formattedAddress",ICON_STYLE:"iconStyle",SALES_TYPE_UPDATE:"sales",SERVICES_UPDATE:"services",LABELS_UPDATE:"salesServiceLabel",INITIAL_STATE:"initialState",CURRENT_STATE:"currentState",DEALER_TYPE_DEFAULT:"default",GEOLOCATION:"geolocation",SPONSORED_AWARD:"sponsoredAward"},VALUES:{STATES:{DEFAULT:"default",SECONDARY:"secondary",ACTIVE:"active"}},ADDRESS:{ITEMS:{NEXT_LINE:"nextLine",COMMA_AND_SPACE:"commaAndSpace"},VALUES:{COMMA_AND_SPACE:", "}},DEFAULT_SECTIONS:[{group:"backLink",method:"getBackLinkDetails"},{group:"generalDetails",method:"getGeneralDealerDetails"},{group:"preferredDealer",method:"getPreferredDealer"},{group:"dealerContact",method:"getDealerContact"}],DETAILS_SECTIONS:[{group:"openingHours",method:"getOpeningHours"},{group:"sales",method:"getSales"},{group:"holidayCalendarUrl",method:"getHolidayCalendarUrl"},{group:"services",method:"getServices"},{group:"awards",method:"getAwards"},{group:"ratings",method:"getRatings"},{group:"dealerPrimaryCTA",method:"getPrimaryCtas"},{group:"dealerSecondaryCTAs",method:"getSecondaryCtas"},{group:"spokenLanguages",method:"getSpokenLanguages"}],EVENTS:{DEALER_ID_CHANGED:"change:dealerId",ERROR:"error"},CTAS:{MODEL_MAPPINGS:[{PLACEHOLDER:"DEALER_ID",PROPERTY:"dealerId"},{PLACEHOLDER:"SITE_ID",PROPERTY:"siteId"}],URL_PARAM_TOKEN:"^"}}},USER_MODEL:{MODEL:{PROPERTIES:{CURRENT_LOCATION:"currentLocation",USER_CONTEXT:"userContext",IS_LOGGED_IN:"isLoggedIn"},EVENTS:{CURRENT_LOCATION_CHANGE:"change:currentLocation",USER_CONTEXT_CHANGE:"change:userContext"}}},FILTERS:{GROUPS:{PROPERTIES:{FILTERS:"filters",FILTER_GROUP_NAME:"filterGroupName"},EVENTS:{CHANGE:"change",FILTERS_CLEARED:"filtersCleared"},METHODS:{RESET_FILTERS:"resetFilters"}},OPTIONS:{PROPERTIES:{ACTIVE:"active",VISIBLE:"visible",NAME:"name",SERVICES_IDS:"serviceIds",ATTRIBUTES:"attributes",APPLY_ON_LOAD:"applyOnLoad",USER_SELECTED:"userSelected",REQUEST_PARAM_VALUE:"requestParamValue"}}},TOOLTIP:{MODEL:{PROPERTIES:{TOOLTIP_MY_POSITION:"top center",TOOLTIP_AT_TARGET:"bottom left"}},VIEW:{SELECTORS:{TOOLTIP_TRIGGER:".has-tooltip",TOOLTIP_DATA_ID:"data-tooltip-id",TOOLTIP_DATA_AT_TARGET:"tooltip-at",TOOLTIP_DATA_MY_POSITION:"tooltip-my",TOOLTIP_DATA_CONTAINER:"tooltip-container",TOOLTIP_DATA_VIEWPORT:"tooltip-viewport",TOOLTIP_PANEL:".tooltip-panel",TOOLTIP_CONTAINER:".qtip",TOOLTIP_HEADING:".tooltip-heading",OPEN_QTIP:"div.qtip:visible",ROOT:".c_207"},CSS_CLASSES:{TOOLTIP_TRIGGER_ACTIVE:"tooltip-active",TOOLTIP_LABEL_CENTRAL:"tooltip-label-central",TOOLTIP_LABEL_HIDDEN:"tooltip-label-hidden",TOOLTIP_CLOSE:"qtip-close"},EVENTS:{TOOLTIP_EVENT:"click",FOCUS:"focus",TOOLTIP_HIDE:"tooltiphide",VIEWPORT_RESIZE:"resize",HIDE:"hide"},OPTIONS:{DEBOUNCE_TIME:100}},OPTIONS:{PROPERTIES:{MY_POSITION:"top center",AT_TARGET:"bottom center",Y_OFFSET_TOP:10,Y_OFFSET_BOTTOM:0,X_OFFSET_CENTRAL:0,HIDE_EVENT:"click unfocus",VIEWPORT_FLIP_METHOD:"shift none",POSITION_TARGET:"position.target"}}}}}),define("locationControllerDealerLocator",["backbone","c_207_ApplicationConstants","c_207_ModelConstants","marionette"],function(a,b,c,d){"use strict";var e=_.extend({},b,c);return d.Object.extend({initialize:function(a){this.options=a,this.TRACKING_CODES=a.TRACKING_CODES,this._bindEvents()},persistLocation:function(a){this.options.smartLocationContext.set(a)},_bindEvents:function(){var a=e.APPLICATION.EVENTS;this.options.eventAggregator.on(a.ERRORS.LOCATION_NOT_FOUND,this._onLocationNotFound,this).on(a.USER.USER_CONTEXT_UPDATE,this._onUserContextUpdate,this).on(a.LOCATION.SET_SMART_LOCATION,this._onSetSmartLocation,this).on(a.SEARCH.SELECTED_PLACE_CHANGE,this._onSelectedPlaceChange,this),
this.options.mapsInterface.on(e.MAPS_INTERFACE.MODEL.EVENTS.CURRENT_PLACE_CHANGE,function(a,b){this.persistLocation(b)},this)},_checkForInitialLocation:function(){this._getHeliosLocationFromUrl().done(_.bind(function(a){this.persistLocation(a),this.options.eventAggregator.trigger(e.APPLICATION.EVENTS.LOCATION.DEEP_LINK_LOCATION_FOUND,a)},this)).fail(_.bind(function(){this._getHeliosLocationFromSmartLocationContext().done(_.bind(function(a){_.isEmpty(a.getUserMapId())?this._getHeliosLocationByLatLng(a.getUserLat(),a.getUserLng()).done(_.bind(function(b){b.postalCode=a.getPostalCode(),this.persistLocation(b),this.options.eventAggregator.trigger(e.APPLICATION.EVENTS.LOCATION.SMART_LOCATION_FOUND,b),this.options.eventAggregator.trigger(e.APPLICATION.EVENTS.ANALYTICS.SEARCH,this.TRACKING_CODES.trackingVars.search.searchTermType.autoAdjust,b)},this)).fail(_.bind(function(){this.options.eventAggregator.trigger(e.APPLICATION.EVENTS.LOCATION.SMART_LOCATION_NOT_FOUND)},this)):(this.options.eventAggregator.trigger(e.APPLICATION.EVENTS.LOCATION.SMART_LOCATION_FOUND,a),this.options.eventAggregator.trigger(e.APPLICATION.EVENTS.ANALYTICS.SEARCH,this.TRACKING_CODES.trackingVars.search.searchTermType.autoAdjust,a))},this)).fail(_.bind(function(){this.options.eventAggregator.trigger(e.APPLICATION.EVENTS.LOCATION.SMART_LOCATION_NOT_FOUND)},this))},this))},_getHeliosLocationByLatLng:function(a,b){return this.options.mapsInterface.getHeliosLocationByLatLng(a,b)},_getHeliosLocationFromSmartLocationContext:function(){return this.options.smartLocationContext.get()},_getHeliosLocationFromUrl:function(){var a=$.Deferred(),b=/[?&]dealersNearLocation=([^&]*)/.exec(this.options.window.location.search),c=b&&b[1];return c?this._getHeliosLocationByAddress(decodeURIComponent(c)).done(a.resolve).fail(a.reject):a.reject(),a},_getHeliosLocationByAddress:function(a){return this.options.mapsInterface.getHeliosLocationByAddress(a)},_onLocationNotFound:function(){this.options.smartLocationContext.clearPostalCode().clearUserLocation()},_onUserContextUpdate:function(a){a.state===e.APPLICATION.PROPERTIES.USER.STATES.AUTOMATIC_SEARCH&&this._checkForInitialLocation()},_onSelectedPlaceChange:function(a,b){b&&b.isFromSmartLocationContext||this._getHeliosLocationByAddress(a.getUserAddress()).done(_.bind(this.persistLocation,this))},_onSetSmartLocation:function(a){this.persistLocation(a)}})}),define("hbars!/components/c_207/html/mainView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="header-bar"></div>\n<div class="search-view"></div>\n<div class="tabs-navigation"></div>\n<div class="dealers-view"></div>\n<div class="map-main-view"></div>\n'})}),define("mainViewDealerLocator",["jquery","marionette","hbars!/components/c_207/html/mainView"],function(a,b,c){"use strict";return b.LayoutView.extend({template:c,className:"search-active",initialize:function(a){this.options=a,this.window=a.window,this.VIEWPORT_MATCHERS=a.VIEWPORT_MATCHERS,this.eventAggregator=a.eventAggregator,this.CONSTANTS=a.CONSTANTS,this.initRegions()},initRegions:function(){var a={},b=this.CONSTANTS.APPLICATION.REGIONS,c=this.CONSTANTS.APPLICATION.REGIONS_SELECTORS;a[b.HEADER_BAR]=c.HEADER_BAR,a[b.SEARCH_BOX]=c.SEARCH_BOX,a[b.TABS_NAVIGATION]=c.TABS_NAVIGATION,a[b.DEALERS_VIEW]=c.DEALERS_VIEW,a[b.MAP_MAIN]=c.MAP_MAIN,this.addRegions(a)},setActiveTab:function(a){a!==this.activeTabName&&(this.activeTabRegion&&this.activeTabRegion.$el.removeClass(this.CONSTANTS.TABS_VIEW.VIEW.CSS_CLASSES.VIEW_TAB),this.activeTabName=a,this.activeTabRegion=this.getRegionByTabName(this.activeTabName),this.activeTabRegion.$el.addClass(this.CONSTANTS.TABS_VIEW.VIEW.CSS_CLASSES.VIEW_TAB),this.getRegion(this.CONSTANTS.APPLICATION.REGIONS.TABS_NAVIGATION).currentView.setActiveTab(a))},getRegionByTabName:function(a){var b,c=this.CONSTANTS.APPLICATION.PROPERTIES.VIEWPORT;switch(a){case c.MAP_PREFERRED:b=this.CONSTANTS.APPLICATION.REGIONS.MAP_MAIN;break;case c.LIST_PREFERRED:b=this.CONSTANTS.APPLICATION.REGIONS.DEALERS_VIEW}return this.getRegion(b)},initializeViewportResizing:function(){this.fillViewportHeight(),a(this.options.window).on(this.CONSTANTS.APPLICATION.EVENTS.VIEWPORT.RESIZE,_.throttle(_.bind(this.fillViewportHeight,this),100))},beforePrint:function(){a(this.CONSTANTS.APPLICATION.SELECTORS.AREA_TO_PRINT_LOGO).append(a(this.CONSTANTS.APPLICATION.SELECTORS.LOGO_PRINT)),a(this.CONSTANTS.APPLICATION.SELECTORS.AREA_TO_PRINT_LOGO+" "+this.CONSTANTS.APPLICATION.SELECTORS.LOGO_PRINT).css(this.CONSTANTS.APPLICATION.CSS_CLASSES.DISPLAY,this.CONSTANTS.APPLICATION.CSS_CLASSES.BLOCK)},afterPrint:function(){a(this.CONSTANTS.APPLICATION.SELECTORS.AREA_TO_PRINT_LOGO+" "+this.CONSTANTS.APPLICATION.SELECTORS.LOGO_PRINT).css(this.CONSTANTS.APPLICATION.CSS_CLASSES.DISPLAY,this.CONSTANTS.APPLICATION.CSS_CLASSES.NONE)},versionPrint:function(){if(this.window.matchMedia){this.window.matchMedia(this.CONSTANTS.APPLICATION.PROPERTIES.PRINT).addListener(_.bind(function(a){a.matches?this.beforePrint():this.afterPrint()},this))}this.window.onbeforeprint=this.beforePrint(),this.window.onafterprint=this.afterPrint()},fillViewportHeight:function(){this.calculateViewHeights(),a(this.CONSTANTS.APPLICATION.SELECTORS.ROOT).height(this.resizedValues.heightBrowser),this.dealersView.$el.css(this.resizedValues.smallBreakpointTabRegionStyles),this.window.matchMedia(this.VIEWPORT_MATCHERS.IS_SMALL).matches||this.window.matchMedia(this.VIEWPORT_MATCHERS.IS_MEDIUM).matches?this.mapMain.$el.css(this.resizedValues.smallBreakpointTabRegionStyles):this.window.matchMedia(this.VIEWPORT_MATCHERS.IS_LARGE).matches&&this.mapMain.$el.css(this.resizedValues.largeBreakpointMapMainStyles),this.dealersView.currentView.setRegionsMinHeight(this.resizedValues.heightDealersViews)},calculateViewHeights:function(){this.setRegionsHeights(),this.resizedValues={},this.resizedValues.heightBrowser=this.heightBrowser,this.resizedValues.heightHeadbarSearchboxTabs=this.heightHeaderBarView+this.heightSearchBox+this.heightTabsNavigation,this.resizedValues.heightTabRegion=this.heightBrowser-this.resizedValues.heightHeadbarSearchboxTabs,this.resizedValues.smallBreakpointTabRegionStyles={height:this.resizedValues.heightTabRegion,top:this.resizedValues.heightHeadbarSearchboxTabs},this.resizedValues.largeBreakpointMapMainStyles={height:"100%",top:0},this.resizedValues.heightDealersViews=this.heightBrowser-this.resizedValues.heightHeadbarSearchboxTabs-this.heightFooter},setRegionsHeights:function(){this.heightBrowser=this.getWindowHeight(),this.heightHeaderBarView=this.getRegion(this.CONSTANTS.APPLICATION.REGIONS.HEADER_BAR).$el.height(),this.heightSearchBox=this.getRegion(this.CONSTANTS.APPLICATION.REGIONS.SEARCH_BOX).$el.height(),this.heightTabsNavigation=this.getRegion(this.CONSTANTS.APPLICATION.REGIONS.TABS_NAVIGATION).$el.height(),this.heightFooter=this.dealersView.currentView.getRegion(this.CONSTANTS.APPLICATION.REGIONS.FOOTER).$el.height()},getWindowHeight:function(){return this.options.window.document.documentElement.clientHeight},setSearchboxDisabledLayout:function(){this.$el.removeClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.SEARCH_ACTIVE)},showHeaderBar:function(){a(this.CONSTANTS.APPLICATION.SELECTORS.DEALER_LOCATOR).removeClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.HEAD_BAR_DISABLED)},toggleTabsNavigationView:function(a){this.tabsNavigation.$el.toggleClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.HIDE,a),this.fillViewportHeight()}})}),define("hbars!/components/c_207/html/tabsView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li class="tab-title" data-tab-id="dealers-view"><span>'+i((f=b&&b.content,f=null==f||!1===f?f:f.listView,typeof f===h?f.apply(b):f))+'</span></li>\n<li class="tab-title" data-tab-id="map-main-view"><span>'+i((f=b&&b.content,f=null==f||!1===f?f:f.mapView,typeof f===h?f.apply(b):f))+"</span></li>\n"})}),define("c_207_tabsNavigationView",["jquery","marionette","hbars!/components/c_207/html/tabsView"],function(a,b,c){"use strict";return b.ItemView.extend({template:c,tagName:"ul",events:{"click @ui.tabMap":"onTabMapClick","click @ui.tabDealerList":"onTabDealerListClick"},initialize:function(a){this.options=a,this.eventAggregator=this.model.getEventAggregator(),this.CONSTANTS=this.model.getConstants(),this.VIEWPORT=this.CONSTANTS.APPLICATION.PROPERTIES.VIEWPORT,this.CSS_CLASSES=this.CONSTANTS.VIEW.CSS_CLASSES,this.initUI()},initUI:function(){this.ui={tabMap:this.CONSTANTS.VIEW.SELECTORS.TAB_MAP,tabDealerList:this.CONSTANTS.VIEW.SELECTORS.TAB_DEALER_LIST}},onTabMapClick:function(){this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.VIEWPORT.SET_ACTIVE_TAB,this.CONSTANTS.APPLICATION.PROPERTIES.VIEWPORT.MAP_PREFERRED)},onTabDealerListClick:function(){this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.VIEWPORT.SET_ACTIVE_TAB,this.CONSTANTS.APPLICATION.PROPERTIES.VIEWPORT.LIST_PREFERRED)},setActiveTab:function(a){a!==this.activeTabView&&(this.$activeTabElement&&this.$activeTabElement.removeClass(this.CSS_CLASSES.ACTIVE_TAB),this.activeTabView=a,this.$activeTabElement=this.getTabElementByName(a),this.$activeTabElement.addClass(this.CSS_CLASSES.ACTIVE_TAB))},getTabElementByName:function(a){var b;switch(a){case this.VIEWPORT.LIST_PREFERRED:b=this.ui.tabDealerList;break;case this.VIEWPORT.MAP_PREFERRED:b=this.ui.tabMap}return b}})}),define("c_207_ErrorConstants",[],function(){"use strict";return{ERROR:{COMMON:{ABSTRACT_CLASS_INSTANTIATED:"Abstract Class should not be instantiated directly."},MODEL:{NO_EVENT_AGGREGATOR:"No EventAggregator Defined"}}}}),define("c_207_Constants",["underscore","c_207_ErrorConstants","c_207_ModelConstants"],function(a,b,c){"use strict";var d={};return a.extend(d,b),a.extend(d,c),d}),define("userControllerDealerLocator",["underscore","marionette","backbone","c_207_ApplicationConstants","c_207_Constants","positionErrorCodes","urlParameterDecoder"],function(a,b,c,d,e,f,g){"use strict";var h=a.extend({},e,d);return b.Object.extend({initialize:function(){this.userModel=this.options.userModel,this.mapsInterface=this.options.mapsInterface,this.searchBoxComponent=this.options.searchBoxComponent,this.eventAggregator=this.options.eventAggregator,this.bindEvents()},bindEvents:function(){var a=h.APPLICATION.EVENTS;this.eventAggregator.on(a.APPLICATION_READY,this.onApplicationReady,this).on(a.ERRORS.LOCATION_NOT_FOUND,this.onLocationNotFound,this).on(a.LOCATION.DEEP_LINK_LOCATION_FOUND,this.onDeepLinkLocationFound,this).on(a.LOCATION.SMART_LOCATION_FOUND,this.onSmartLocationFound,this).on(a.SEARCH.SELECTED_PLACE_CHANGE,this.onSelectedPlaceChange,this).on(a.SEARCH.PRIOR_PLACE_CHANGED,this.onPriorPlaceChanged,this).on(a.USER.SET_USER_CONTEXT,this.onUserContextSet,this).on(a.USER.LOGIN_SUCCESSFUL,this.onUserLoginSuccessful,this).on(a.SEARCH.USE_CURRENT_LOCATION_CHANGED,this.useCurrentLocationChanged,this),this.userModel.on(h.USER_MODEL.MODEL.EVENTS.CURRENT_LOCATION_CHANGE,this.onCurrentLocationChanged,this),this.userModel.on(h.USER_MODEL.MODEL.EVENTS.USER_CONTEXT_CHANGE,this.onUserContextChanged,this),this.mapsInterface.on(h.MAPS_INTERFACE.MODEL.EVENTS.CURRENT_PLACE_CHANGE,this.onCurrentPlaceChanged,this)},onApplicationReady:function(){var a=g.getUrlParams()[h.APPLICATION.PROPERTIES.URL.DEALER_ID],b=g.getUrlParams()[h.APPLICATION.PROPERTIES.URL.ORIGIN],c=a?h.APPLICATION.PROPERTIES.USER.STATES.DEEP_LINK:h.APPLICATION.PROPERTIES.USER.STATES.AUTOMATIC_SEARCH,d={dealerId:a,origin:b};this.eventAggregator.trigger(h.APPLICATION.EVENTS.USER.SET_USER_CONTEXT,c,d)},onPriorPlaceChanged:function(){this.eventAggregator.trigger(h.APPLICATION.EVENTS.USER.SET_USER_CONTEXT,h.APPLICATION.PROPERTIES.USER.STATES.MANUAL_SEARCH)},onUserContextSet:function(a,b){this.userModel.setUserContext(a,b)},onUserLoginSuccessful:function(){this.userModel.set(h.USER_MODEL.MODEL.PROPERTIES.IS_LOGGED_IN,!0)},onDeepLinkLocationFound:function(a){this.eventAggregator.trigger(h.APPLICATION.EVENTS.SEARCH.SELECTED_PLACE_CHANGE,a)},onLocationNotFound:function(){this.searchBoxComponent.model.unset(h.c_207_1.MODEL.PROPERTIES.DISPLAYED_PLACE_NAME)},onSelectedPlaceChange:function(a,b){var c;c=b&&b.isFromSmartLocationContext?"":a.getUserAddress(),this.searchBoxComponent.model.set(h.c_207_1.MODEL.PROPERTIES.DISPLAYED_PLACE_NAME,c)},onSmartLocationFound:function(a){this.eventAggregator.trigger(h.APPLICATION.EVENTS.SEARCH.SELECTED_PLACE_CHANGE,a,{isFromSmartLocationContext:!0})},useCurrentLocationChanged:function(){this.userModel.set(h.USER_MODEL.MODEL.PROPERTIES.CURRENT_LOCATION,null,{silent:!0}),this.options.enableSmartLocation&&this.searchCurrentLocation()},searchCurrentLocation:function(){this.options.navigator.geolocation&&this.options.navigator.geolocation.getCurrentPosition(a.bind(this.onCurrentPositionFound,this),a.bind(this.onPositionNotFound,this))},onCurrentPositionFound:function(a){this.userModel.setCurrentLocation({latitude:a.coords.latitude,longitude:a.coords.longitude})},onPositionNotFound:function(a){a.code!==f.PERMISSION_DENIED&&this.eventAggregator.trigger(h.APPLICATION.EVENTS.ERRORS.LOCATION_NOT_FOUND)},onCurrentLocationChanged:function(a,b){this.mapsInterface.setCurrentLocationWithCoordinates(b.latitude,b.longitude)},onUserContextChanged:function(a,b){this.eventAggregator.trigger(h.APPLICATION.EVENTS.USER.USER_CONTEXT_UPDATE,b)},onCurrentPlaceChanged:function(a,b){this.eventAggregator.trigger(h.APPLICATION.EVENTS.SEARCH.SELECTED_PLACE_CHANGE,b,{isFromGeoLocationApi:!0})}})}),define("analyticsControllerDealerLocator",["underscore","marionette","c_207_ApplicationConstants","c_207_Constants"],function(a,b,c,d){"use strict";var e=a.extend({},d,c);return b.Object.extend({initialize:function(a){this.options=a,this.TRACKING_CODES=a.TRACKING_CODES,this.eventAggregator=this.options.eventAggregator,this.analyticsManager=a.analyticsManager,this.filterGroupCollection=this.options.filterGroupCollection,this.bindEvents()},bindEvents:function(){var a=e.APPLICATION.EVENTS.ANALYTICS;this.eventAggregator.on(a.SEARCH,this.onSearch,this).on(a.GENERIC_CLICK,this.onGenericClick,this).on(a.TOGGLE,this.onToggle,this).on(a.DEALER_INTERACTION,this.onDealerInteraction,this).on(a.ACCORDION_EXPANSION,this.onAccordionExpansion,this).on(a.TOOLTIP_DISPLAY,this.onTooltipDisplay,this)},onSearch:function(a,b,c){var d=this.TRACKING_CODES.trackingVars.search.componentId;arguments.length?this.generalSearchData=this.getGeneralSearchData(a,b,c):this.generalSearchData[d]=this.TRACKING_CODES.componentIds.C207_6_Filter,this.eventAggregator.once(e.APPLICATION.EVENTS.DEALER.DEALERS_RESPONSE,function(a){this.onDealersResponse(a,this.generalSearchData)},this)},getGeneralSearchData:function(a,b,c){var d=this.TRACKING_CODES.trackingVars.search,f=d.searchTermType,g={};switch(g[d.componentId]=this.TRACKING_CODES.componentIds.C207_1_Location_Input,g[d.searchType]=e.APPLICATION.ANALYTICS.SEARCH_TYPE,g[d.action]=this.TRACKING_CODES.eventTypes.search,a){case f.userSearch:g[d.searchTerm]=c+"|"+b.location.address;break;case f.geolocation:g[d.searchTerm]=f.geolocation+"|"+b.location.address;break;case f.autoAdjust:g[d.searchTerm]=f.autoAdjust+"|"+b.location.address}return g},onDealersResponse:function(a,b){var c=this.TRACKING_CODES.trackingVars.search,d=this.filterGroupCollection.getActiveSelectedFiltersValue();b[c.searchResults]=a.getPrimaryDealers().length,d.length&&(b[c.searchFilterValue]=d.join(),b[c.searchFilter]=this.filterGroupCollection.getActiveSelectedGroupFilters().join()),this.analyticsManager.tag(this.TRACKING_CODES.eventTypes.search,b)},onGenericClick:function(a,b,c){var d=this.TRACKING_CODES.trackingVars.genericClick,e={},f=$(c);e[d.componentId]=a,e[d.buttonText]=f.text(),e[d.destination]=f.attr("href"),e[d.locationInPage]=b,this.analyticsManager.tag(this.TRACKING_CODES.eventTypes.genericClick,e)},onToggle:function(a,b,c){var d=this.TRACKING_CODES.trackingVars.toggle,e={},f=$(c);e[d.componentId]=a,e[d.toggleValue]=f.text(),e[d.toggleType]=b,this.analyticsManager.tag(this.TRACKING_CODES.eventTypes.toggle,e)},onDealerInteraction:function(a,b,c,d){var f=this.TRACKING_CODES.trackingVars.dealerInteraction,g=b.get(e.APPLICATION.PROPERTIES.DEALER.ADDRESS),h={};h[f.componentId]=a,h[f.dealerAction]=c,h[f.dealerId]=b.get(e.APPLICATION.PROPERTIES.DEALER.ID),h[f.dealerName]=b.get(e.APPLICATION.PROPERTIES.DEALER.NAME),d&&(h[f.buttonText]=d),h[f.dealerAddress]=g.addressLine1+", "+(g.city?g.city+", ":"")+g.postalCode,this.options.SETTINGS.analytics.shouldTrackDealerType&&(h[f.dealerType]=b.get(e.APPLICATION.PROPERTIES.DEALER.TYPE)),this.analyticsManager.tag(this.TRACKING_CODES.eventTypes.dealerInteraction,h)},onAccordionExpansion:function(a,b,c){var d=this.TRACKING_CODES.trackingVars.accordionExpansion,e={};e[d.componentId]=a,e[d.accordionText]=c.clone().children().remove().end().text(),e[d.accordionType]=b,this.analyticsManager.tag(this.TRACKING_CODES.eventTypes.accordionExpansion,e)},onTooltipDisplay:function(a,b){var c=this.TRACKING_CODES.trackingVars.tooltipDisplay,d={};d[c.componentId]=a,d[c.tooltipTitle]=b.text.trim(),this.analyticsManager.tag(this.TRACKING_CODES.eventTypes.tooltipDisplay,d)}})}),define("mapControllerDealerLocator",["jquery","underscore","marionette","backbone","c_207_ApplicationConstants","c_207_Constants"],function(a,b,c,d,e,f){"use strict";var g=b.extend({},f,e);return c.Object.extend({initialize:function(a){this.options=a,this.eventAggregator=this.options.eventAggregator,this.mapsInterface=this.options.mapsInterface,this.mapComponent=this.options.mapComponent,this.searchBoxComponent=this.options.searchBoxComponent,this.iconKeysComponent=this.options.iconKeysComponent,this.dealerCollection=this.options.dealerCollection,this.mapMainView=this.options.mapMainView,this.bindEvents(),this.initializeMapViews()},bindEvents:function(){var a=g.APPLICATION.EVENTS;this.eventAggregator.on(a.ERRORS.LOCATION_NOT_FOUND,this.onLocationNotFound,this).on(a.MAP.MAP_OPTIONS_UPDATE,this.mapOptionsUpdate,this).on(a.VIEWPORT.DIMENSIONS_UPDATED,this.onViewportDimensionsUpdate,this).on(a.DEALER.DEALERS_UPDATED,this.onDealersUpdate,this).on(a.USER.USER_CONTEXT_UPDATE,this.onUserContextUpdate,this).on(a.DEALER.DEALER_DETAILS_CHANGE,this.onDealerDetailsChange,this).on(a.ERRORS.DEALERS_NOT_FOUND,this.onDealersNotFound,this).on(a.SEARCH.SELECTED_PLACE_CHANGE,this.onSelectedPlaceChange,this).on(a.SEARCH.PRIOR_PLACE_CHANGED,this.onPriorPlaceChanged,this).on(a.DEALER.DEALER_SELECT,this.onDealerSelect,this).on(a.DEALER.BACK_TO_RESULTS,this.onBackToResults,this).on(a.SHOW_ICON_KEYS,this.onShowIconkeys,this).on(a.HIDE_ICON_KEYS,this.onHideIconkeys,this),this.mapsInterface.on(g.MAPS_INTERFACE.MODEL.EVENTS.PLACES_CHANGE,this.onPlacesChange,this),this.mapsInterface.on(g.MAPS_INTERFACE.MODEL.EVENTS.MAP_API_INSTANCE_CHANGE,b.once(this.onMapInstanceCreate),this),this.mapsInterface.on(g.MAPS_INTERFACE.MODEL.EVENTS.SEARCH_LOCATION_CHANGE,this.onSearchLocationChange,this),this.mapsInterface.on(g.MAPS_INTERFACE.MODEL.EVENTS.MAP_STYLES_CHANGE,b.once(this.onMapStylesChange),this),this.mapsInterface.on(g.MAPS_INTERFACE.MODEL.EVENTS.COUNTRY_GEOLOCATION_CHANGE,b.once(this.onCountryGeolocationChange),this),this.mapsInterface.on(g.MAPS_INTERFACE.MODEL.EVENTS.MAP_OPTIONS_CHANGE,b.once(this.onMapOptionsChange),this)},onLocationNotFound:function(){this.mapsInterface.resetAllMarkers()},initializeMapViews:function(){var c=b.first(a(this.options.app.el).find(g.c_207_3.VIEW.SELECTORS.ROOT)),d={markerStyles:this.iconKeysComponent.model.options.SETTINGS.markers.types,yourLocation:this.iconKeysComponent.options.templateHelpers.content.dealerLocatorDialog.mapView.yourLocation,dealerIconKeys:this.iconKeysComponent.options.templateHelpers.content.dealerLocatorSiteAdminSettings.dealerIconKeys};this.updateIconKeys(d),this.mapsInterface.initializeMap(c)},onUserContextUpdate:function(a){var b={markerStyles:this.iconKeysComponent.model.options.SETTINGS.markers.types,yourLocation:a.showYourLocationIcon&&this.iconKeysComponent.options.templateHelpers.content.dealerLocatorDialog.mapView.yourLocation,dealerIconKeys:this.iconKeysComponent.options.templateHelpers.content.dealerLocatorSiteAdminSettings.dealerIconKeys};this.updateIconKeys(b),this.eventAggregator.trigger(g.APPLICATION.EVENTS.SHOW_ICON_KEYS)},mapOptionsUpdate:function(a){this.mapsInterface.updateMapOptions(a)},onPlacesChange:function(a,c){this.searchBoxComponent.cleanPredictionsList(),this.searchBoxComponent.collection.reset(b.isArray(c)?c:void 0)},updateIconKeys:function(a){var c=[],d=a[g.c_207_4.MODEL.PROPERTIES.MARKER_STYLES],e=a[g.c_207_4.MODEL.PROPERTIES.YOUR_LOCATION],f=a[g.c_207_4.MODEL.PROPERTIES.DEALER_ICON_KEYS];b.each(f,function(a){c.push({legendLabel:a.legendLabel,path:d[a.iconStyle].default+g.MAPS_INTERFACE.MODEL.MARKER_FILE_TYPE})}),e&&c.push({legendLabel:e,path:d[g.c_207_4.MODEL.PROPERTIES.GEOMARKER].default+g.MAPS_INTERFACE.MODEL.MARKER_FILE_TYPE}),this.iconKeysComponent.model.setMarkers(c)},onMapInstanceCreate:function(){this.mapComponent.updateMapViewport(),this.dealerCollection.length&&this.onDealersUpdate(this.dealerCollection)},onMapStylesChange:function(){this.mapsInterface.updateCountryGeolocationData()},onCountryGeolocationChange:function(){this.mapsInterface.initMapOptions()},onMapOptionsChange:function(){this.mapsInterface.createMapInstance()},onViewportDimensionsUpdate:function(){this.mapsInterface.renderMap()},onSearchLocationChange:function(){this.mapsInterface.updateUserMarker(),this.updateMap()},onSelectedPlaceChange:function(a){a&&this.mapsInterface.setSearchLocation(a.getUserMapId())},onPriorPlaceChanged:function(a){a&&this._setSelectedPlace(a)},_setSelectedPlace:function(a){this.eventAggregator.trigger(g.APPLICATION.EVENTS.SEARCH.SELECTED_PLACE_CHANGE,a)},onDealersUpdate:function(a){this.mapsInterface.setDealersMarkers(a),this.updateMap()},onDealersNotFound:function(){this.mapsInterface.resetDealersMarkers(),this.updateMap()},onDealerSelect:function(a,b){b&&this.mapsInterface.setActiveDealer(a)},onDealerDetailsChange:function(a){this.mapsInterface.setActiveDealer(a)},onBackToResults:function(){this.mapsInterface.disableActiveDealer()},setMapSearchLocation:function(a){this.mapsInterface.setSearchLocation(a)},onShowIconkeys:function(){this.mapMainView.showIconKeys()},onHideIconkeys:function(){this.mapMainView.hideIconKeys()},isDealerRequestInProgress:function(){return this.dealerCollection._status===g.BACKBONE.EVENTS.COLLECTION.SYNC},updateMap:function(){this.isDealerRequestInProgress()||this.mapsInterface.trigger(g.MAPS_INTERFACE.MODEL.EVENTS.UPDATE_MAP)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-listcontainer-backLink",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<a href="'+i((f=b&&b.data,f=null==f||!1===f?f:f.link,typeof f===h?f.apply(b):f))+'">'+i((f=b&&b.data,f=null==f||!1===f?f:f.text,typeof f===h?f.apply(b):f))+"</a>"})}),define("c_207_2DealerListBackLinkView",["marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-listcontainer-backLink"],function(a,b){"use strict";return a.ItemView.extend({template:b})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-listcontainer-instruction",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+="<p>",(g=c.instruction)?f=g.call(b,{hash:{},data:e}):(g=b&&b.instruction,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h+=i(f)+"</p>\n"})}),define("c_207_2DealerListInstructionView",["marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-listcontainer-instruction"],function(a,b){"use strict";return a.ItemView.extend({template:b})}),define("heliosUserAccountDealer",["jquery","underscore","storageManager","heliosObject","heliosAppContext"],function(a,b,c,d,e){"use strict";var f,g=null,h={KEYS:{LOGGED_IN_NAME:"OwnerServicesLoggedInName"},STORAGEMODE:{COOKIE:"cookie"},ENDPOINTS:{PREFERRED_DEALER:".setPreferredDealer.json"}},g=a.extend({},h),i=new e({HELIOS:d}),j=i.getAemAdminResourcePath()+g.ENDPOINTS.PREFERRED_DEALER;return f=function(a){this.userAccountData=a||{}},f.prototype.setValue=function(d,e){var f=c.loadItem(g.KEYS.LOGGED_IN_NAME,g.STORAGEMODE.COOKIE),h=a.Deferred();return f?a.ajax({url:d,method:"post",data:e}).done(b.bind(function(a){a&&!0===a.success?h.resolve(a):h.reject()},this)).fail(b.bind(h.reject,this)):h.reject(),h},f.prototype.getPreferredDealers=function(){var a=[];return b.isEmpty(this.userAccountData.favouriteDealers)||(a=a.concat(this.userAccountData.favouriteDealers)),this.userAccountData.vehicles&&b.each(this.userAccountData.vehicles.owned,function(b){b.dealerId&&a.push(b.dealerId)}),a},f.prototype.getUserLevelPreferredDealer=function(){return b.first(this.userAccountData.favouriteDealers)},f.prototype.setUserLevelPreferredDealer=function(a,b,c){var d={};return d.dealerId=a,d.isPreferredDealerByOwnerStr=b,c&&(d.vehicleId=c),this.setValue(j,d)},f}),define("heliosUserAccountCustomer",["jquery","underscore"],function(a,b){"use strict";var c;return c=function(a){this.userAccountData=a||{}},c.prototype.getFullName=function(){return this.userAccountData.firstName+" "+this.userAccountData.lastName},c}),define("heliosUserAccount",["jquery","underscore","heliosUserAccountDealer","heliosUserAccountCustomer"],function(a,b,c,d){"use strict";return function(a){this.dealers=new c(a),this.customer=new d(a)}}),define("userAccountContext",["jquery","heliosUserAccount","jqueryUtilityPlugins","heliosObject","heliosAppContext","storageManager"],function(a,b,c,d,e,f){"use strict";function g(){return a.Deferred()}function h(c){var g=new e({HELIOS:d}),h=g.getAemAdminResourcePath()+k.ENDPOINTS.CUSTOMER;f.loadItem(k.KEYS.LOGGED_IN_NAME,k.STORAGEMODE.COOKIE)?a.ajax(h).done(function(a){var d=new b(a);c.resolve(d)}).fail(function(){c.reject()}):c.reject()}function i(a){return j&&!a||(j=g(),h(j)),j}var j,k=null,l={KEYS:{LOGGED_IN_NAME:"OwnerServicesLoggedInName"},STORAGEMODE:{COOKIE:"cookie"},ENDPOINTS:{CUSTOMER:".customer.json"}};return k=a.extend({},l),{get:i}}),define("dealersController",["underscore","marionette","backbone","jquery","jqueryUtilityPlugins","c_207_2DealerListBackLinkView","c_207_2DealerListInstructionView","c_207_ApplicationConstants","c_207_Constants","userAccountContext"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=a.extend({},i,h);return b.Object.extend({initialize:function(a){this.options=a,this.content=this.options.content,this.eventAggregator=this.options.eventAggregator,this.searchBoxComponent=this.options.searchBoxComponent,this.dealerListPanel=this.options.dealerListPanel,this.dealerListComponent=this.options.dealerListComponent,this.dealerCollection=this.options.dealerCollection,this.mainView=this.options.mainView,this.dealerMainView=this.options.dealerMainView,this.mapMainView=this.options.mapMainView,this.filterGroupCollection=this.options.filterGroupCollection,this.filtersComponent=this.options.filtersComponent,this.isPreferredDealerByOwner=this.content.dealerLocatorSiteAdminSettings.isPreferredDealerByOwner,this.bindEvents()},bindEvents:function(){var a=k.APPLICATION.EVENTS,b=k.BACKBONE.EVENTS.COLLECTION;this.eventAggregator.on(a.APPLICATION_READY,this.onApplicationReady,this).on(a.ERRORS.LOCATION_NOT_FOUND,this.onLocationNotFound,this).on(a.SEARCH.SELECTED_PLACE_CHANGE,this.onSelectedPlaceChange,this).on(a.DEALER.DEALERS_UPDATED,this.onUpdateDealersCollection,this).on(a.DEALER.BACK_TO_RESULTS,this.onBackToResults,this).on(a.FILTERS.CLEAR_FILTERS,this.onFiltersReset,this).on(a.USER.USER_CONTEXT_UPDATE,this.onUserContextUpdate,this).on(a.PREFERRED_DEALER.ADD,this.onPreferredDealerAdd,this),this.dealerCollection.on(b.SYNC,this.onDealersSync,this).on(b.ERROR,this.onDealersError,this),this.filterGroupCollection.on(b.CHANGE,this.onFiltersChange,this).on(k.FILTERS.GROUPS.EVENTS.FILTERS_CLEARED,this.onFiltersChange,this)},onApplicationReady:function(){this.dealerMainView.switchView(k.APPLICATION.REGIONS.DEALERS_LIST_PANEL)},onLocationNotFound:function(){this.dealerCollection.reset(),this.hideIconKeysComponent()},onSelectedPlaceChange:function(a){a&&this.setDealersCollectionQuery({lat:a.getUserLat(),long:a.getUserLng()})},onDealersError:function(a){this.eventAggregator.trigger(k.APPLICATION.EVENTS.LOADED),this.validateDealersCollection(a),this.showIconKeysComponent()},onDealersSync:function(a){this.eventAggregator.trigger(k.APPLICATION.EVENTS.LOADED),this.validateDealersCollection(a),this.showIconKeysComponent()},validateDealersCollection:function(a){a.length||!a.options.locationChange?this.eventAggregator.trigger(k.APPLICATION.EVENTS.DEALER.DEALERS_UPDATED,a):this.eventAggregator.trigger(k.APPLICATION.EVENTS.ERRORS.DEALERS_NOT_FOUND),this.hideMapOverlayView(),this.eventAggregator.trigger(k.APPLICATION.EVENTS.DEALER.DEALERS_RESPONSE,a)},showIconKeysComponent:function(){this.eventAggregator.trigger(k.APPLICATION.EVENTS.SHOW_ICON_KEYS)},hideIconKeysComponent:function(){this.eventAggregator.trigger(k.APPLICATION.EVENTS.HIDE_ICON_KEYS)},onUpdateDealersCollection:function(a){this.updateDealersListView(a),this.showTabsNavigation(),this.dealerMainView.switchView(k.APPLICATION.REGIONS.DEALERS_LIST_PANEL)},updateDealersListView:function(b,c){j.get(c).done(a.bind(function(c){var d=this.isPreferredDealerByOwner?new Array(c.dealers.getUserLevelPreferredDealer()):c.dealers.getPreferredDealers();b.each(function(b){b.set(k.APPLICATION.PROPERTIES.DEALER.IS_PREFERRED_DEALER,a.contains(d,b.get(k.APPLICATION.PROPERTIES.DEALER.ID)))}),this.eventAggregator.trigger(k.APPLICATION.EVENTS.USER.LOGIN_SUCCESSFUL)},this)).always(a.bind(function(){this.dealerListComponent.collection.reset(a.map(b.getPrimaryDealers(),function(a){return a.clone()})),this.showTabsNavigation(),this.dealerMainView.switchView(k.APPLICATION.REGIONS.DEALERS_LIST_PANEL),this.dealerMainView.showImages()},this))},showTabsNavigation:function(){this.mainView.toggleTabsNavigationView(!1)},hideMapOverlayView:function(){this.mapMainView.hideMapOverlay()},onBackToResults:function(){this.dealerMainView.switchView(k.APPLICATION.REGIONS.DEALERS_LIST_PANEL)},setDealersCollectionQuery:function(a){this.dealerCollection.setQuery(a)},onFiltersChange:function(){this.filtersComponent.model.set(k.c_207_6.COLLECTION.PROPERTIES.ACTIVE_VISIBLE_FILTERS,this.filterGroupCollection.getActiveVisibleFilterCount()),this.dealerCollection.setFilters(this.filterGroupCollection.getActiveFilters())},onFiltersReset:function(){this.filterGroupCollection.resetFilters()},onPreferredDealerAdd:function(){this.updateDealersListView(this.dealerCollection,!0)},onUserContextUpdate:function(a){var b,e=d.getDataFromObject(a,[k.APPLICATION.PROPERTIES.USER.ORIGINS,k.APPLICATION.REGIONS.DEALERS_LIST]);e&&!this.content.dealerLocatorSiteAdminSettings.disableSetPreferredDealer&&(b=h.APPLICATION.REGIONS,this.dealerListPanel.showChildView(b.DEALERS_ORIGIN_LINK,new f({model:new c.Model({data:e})})),this.dealerListPanel.showChildView(b.DEALERS_RESULTS_INSTRUCTION,new g({model:new c.Model({instruction:this.content.dealerLocatorDialog.resultDetails.listDescription})})))}})}),define("c_236_ApplicationConstants",[],function(){"use strict";return{APPLICATION:{ANALYTICS:{TOGGLE_TYPE:"review",RANKING_TYPE:"review"},REGIONS:{HEADER_VIEW:"headerView",SALES_REVIEWS_VIEW:"salesReviewsView",AFTER_SALES_REVIEWS_VIEW:"afterSalesReviewsView",SORT_BY_VIEW:"sortByView"},PROPERTIES:{NAME:"Helios Dealer Reviews",VERSION:"0.1",DEFAULT_REVIEWS_PER_PAGE:10,REVIEW_TYPE:{SALES:"sales",AFTER_SALES:"afterSales"}},ERRORS:{NOT_DEFINED:"Config data expected in 'script[data-content]'",UNABLE_TO_PARSE:"Unable to parse JSON data provided in 'script[data-content]'",
REVIEWS_FETCH_FAILED:"Failed to fetch reviews"},EVENTS:{SORT_BY_CHANGED:"c_236:sortByChanged",DEALER_CHANGED:"c_236:dealerChanged",ACTIVE_TAB_CHANGED:"c_236:activeTabChanged",END_OF_RESULTS:"c_236:endOfResults",ANALYTICS:{TOGGLE:"c_236:analyticsToggle",RANKING:"c_236:analyticsRanking"}}}}}),define("c_236_ModelConstants",[],function(){"use strict";return{MODEL:{HEADER:{PROPERTIES:{TITLE:"title",ACTIVE_TAB:"activeTab"}},DEALER:{PROPERTIES:{ID:"id",NAME:"name"},EVENTS:{CURRENT_DEALER_CHANGE:"change:currentDealer"}},SORT_BY:{PROPERTIES:{DEFAULT_OPTION:"defaultOption"}},REVIEW_ITEMS:{PROPERTIES:{SCROLL_LOAD_INACTIVE:"scrollLoadInactive",DATA_REFRESHING:"dataRefreshing",LOCKED:"locked",STAR_RATING:"starRating"}}}}}),define("c_236_ReviewsController",["jquery","underscore","backbone","marionette","c_236_ApplicationConstants","c_236_ModelConstants","logger"],function(a,b,c,d,e,f,g){"use strict";var h=e.APPLICATION,i=f.MODEL,j=new g({prefix:"c_236:ReviewsController"});return d.Object.extend({initialize:function(a){this.options=a||{},this.mainView=this.options.mainView,this.headerModel=this.options.headerModel,this.salesReviewsCollection=this.options.salesReviewsCollection,this.afterSalesReviewsCollection=this.options.afterSalesReviewsCollection,this.salesReviewItemsModel=this.options.salesReviewItemsModel,this.afterSalesReviewItemsModel=this.options.afterSalesReviewItemsModel,this.updateReviews(),this.bindEvents()},bindEvents:function(){this.getEventAggregator().on(h.EVENTS.SORT_BY_CHANGED,this.onSortByChange,this).on(h.EVENTS.DEALER_CHANGED,this.onDealerChange,this).on(h.EVENTS.ACTIVE_TAB_CHANGED,this.onActiveTabChange,this).on(h.EVENTS.END_OF_RESULTS,this.onEndOfResults,this)},onActiveTabChange:function(){this.setSortByVisibility()},onDealerChange:function(a){this.salesReviewsCollection.reset(),this.afterSalesReviewsCollection.reset(),this.salesReviewsCollection.setDealerId(a.id),this.afterSalesReviewsCollection.setDealerId(a.id),this.salesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.LOCKED,!1),this.afterSalesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.LOCKED,!1),this.updateReviews(),this.setSortByVisibility()},onSortByChange:function(a){this.salesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.LOCKED,!1),this.afterSalesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.LOCKED,!1),this.salesReviewsCollection.resetData(),this.afterSalesReviewsCollection.resetData(),this.salesReviewsCollection.setCurrentSortBy(a),this.afterSalesReviewsCollection.setCurrentSortBy(a),this.updateReviews()},onEndOfResults:function(a){a===h.PROPERTIES.REVIEW_TYPE.SALES?this.salesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.LOCKED,!0):this.afterSalesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.LOCKED,!0)},setSortByVisibility:function(){var a=this.headerModel.get(i.HEADER.PROPERTIES.ACTIVE_TAB),b=!1;b=a===h.PROPERTIES.REVIEW_TYPE.AFTER_SALES?!this.afterSalesReviewsCollection.length:!this.salesReviewsCollection.length,this.mainView.setReviewRegionsVisibility(a),this.mainView.setSortByVisibility(b)},updateReviews:function(){var c,d;this.salesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.DATA_REFRESHING,!0),c=this.salesReviewsCollection.fetch(),this.afterSalesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.DATA_REFRESHING,!0),d=this.afterSalesReviewsCollection.fetch(),a.when(c,d).done(b.bind(function(){this.setSortByVisibility()},this)).fail(function(){j.error(h.ERRORS.REVIEWS_FETCH_FAILED)}).always(b.bind(function(){this.afterSalesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.DATA_REFRESHING,!1),this.salesReviewItemsModel.set(i.REVIEW_ITEMS.PROPERTIES.DATA_REFRESHING,!1)},this))},loadMore:function(b){var c,d,e=a.Deferred();return b===h.PROPERTIES.REVIEW_TYPE.AFTER_SALES?(c=this.afterSalesReviewsCollection,d=this.afterSalesReviewItemsModel):(c=this.salesReviewsCollection,d=this.salesReviewItemsModel),!d.get(i.REVIEW_ITEMS.PROPERTIES.LOCKED)&&d.get(i.REVIEW_ITEMS.PROPERTIES.SCROLL_LOAD_INACTIVE)?(d.set(i.REVIEW_ITEMS.PROPERTIES.SCROLL_LOAD_INACTIVE,!1),c.loadMoreReviews().done(e.resolve).fail(e.resolve).always(function(){d.set(i.REVIEW_ITEMS.PROPERTIES.SCROLL_LOAD_INACTIVE,!0)})):e.reject(),e.promise()},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_236_HeaderController",["jquery","underscore","backbone","marionette","c_236_ApplicationConstants","c_236_ModelConstants"],function(a,b,c,d,e,f){"use strict";var g=e.APPLICATION,h=f.MODEL.HEADER.PROPERTIES;return d.Object.extend({initialize:function(a){this.options=a||{},this.headerModel=this.options.headerModel,this.bindEvents()},bindEvents:function(){this.getEventAggregator().on(g.EVENTS.DEALER_CHANGED,this.onDealerChange,this)},onDealerChange:function(a){this.headerModel.set(h.TITLE,a.name)},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_236_SortByController",["jquery","underscore","backbone","marionette"],function(a,b,c,d){"use strict";return d.Object.extend()}),define("c_236_ViewConstants",[],function(){"use strict";return{VIEW:{GENERAL:{CLASSES:{SELECTED:"selected",HIDDEN:"hidden",LOADING:"loading"}},REGIONS:{SELECTORS:{HEADER:".header",SALES_REVIEWS:".c_236-reviews-sales",AFTER_SALES_REVIEWS:".c_236-reviews-aftersales",SORT_BY:".c_236-sort"},ATTRIBUTES:{ARIA_HIDDEN:"aria-hidden"}},HEADER:{SELECTORS:{TITLE:".heading-group > h2",TABS_CONTAINER:".c_236-section-headers",TAB:".c_236-section-header",AFTER_SALES:".c_236-section-header.after-sales",SALES:".c_236-section-header.sales",TOGGLE_SOURCE:"[data-analytics-toggle-value]"},DATA_ATTRIBUTES:{TOGGLE_SOURCE:"analyticsToggleValue",SECTION_TARGET_GROUP:"sectionTargetGroup"},MODEL_EVENTS:{TITLE:"title",ACTIVE_TAB:"activeTab"}},SORT_BY:{SELECTORS:{SORT_BY:".sort_by",SELECTED:":selected",SORT_ORDER:"data-sort-order",SORT_FIELD:"data-sort-field"},ATTRIBUTES:{SELECTED:"selected"}},REVIEW_ITEMS:{SELECTORS:{REVIEWS:"ul.c_236-reviews",NO_REVIEWS:".c_236-no-reviews"},CLASSES:{REVIEWS:"c_236-reviews",NO_REVIEWS:"c_236-no-reviews"}}}}}),define("hbars!/components/c_236/html/mainView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="header"></div>\n\n<div class="c_236-sort"></div>\n\n<div class="c_236-section c_236-sales" data-section-group="sales" class="hidden" aria-hidden="true">\n\n    <div id="sales-panel" class="c_236-reviews-container c_236-reviews-sales" role="tabpanel" aria-live="polite"></div>\n\n</div>\n\n<div class="c_236-section c_236-aftersales" data-section-group="afterSales">\n\n    <div id="aftersales-panel" class="c_236-reviews-container c_236-reviews-aftersales hidden" role="tabpanel" aria-live="polite"></div>\n\n</div>\n'})}),define("c_236_MainView",["jquery","marionette","c_236_ApplicationConstants","c_236_ViewConstants","hbars!/components/c_236/html/mainView"],function(a,b,c,d,e){"use strict";var f=c.APPLICATION.REGIONS,g=c.APPLICATION.PROPERTIES,h=(c.APPLICATION.EVENTS,d.VIEW.REGIONS.SELECTORS),i=d.VIEW.REGIONS.ATTRIBUTES,j=d.VIEW.GENERAL.CLASSES;return b.LayoutView.extend({template:e,ui:{afterSalesRegion:h.AFTER_SALES_REVIEWS,salesRegion:h.SALES_REVIEWS,sortByRegion:h.SORT_BY},initialize:function(a){this.options=a||{},this.initRegions()},onRender:function(){this.setSortByVisibility(!0),this.setReviewRegionsVisibility(this.options.activeReviewType)},initRegions:function(){var a={};a[f.HEADER_VIEW]=h.HEADER,a[f.SALES_REVIEWS_VIEW]=h.SALES_REVIEWS,a[f.AFTER_SALES_REVIEWS_VIEW]=h.AFTER_SALES_REVIEWS,a[f.SORT_BY_VIEW]=h.SORT_BY,this.addRegions(a)},setReviewRegionsVisibility:function(a){a===g.REVIEW_TYPE.AFTER_SALES?(this.ui.salesRegion.addClass(j.HIDDEN).attr(i.ARIA_HIDDEN,!0),this.ui.afterSalesRegion.removeClass(j.HIDDEN).attr(i.ARIA_HIDDEN,!1)):(this.ui.afterSalesRegion.addClass(j.HIDDEN).attr(i.ARIA_HIDDEN,!0),this.ui.salesRegion.removeClass(j.HIDDEN).attr(i.ARIA_HIDDEN,!1))},setSortByVisibility:function(a){this.ui.sortByRegion.toggleClass(j.HIDDEN,!!a).attr(i.ARIA_HIDDEN,!!a)},getEventAggregator:function(){return this.options.eventAggregator}})}),define("hbars!/components/c_236/html/headerView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="heading-group">\n    <h2>',(g=c.title)?f=g.call(b,{hash:{},data:e}):(g=b&&b.title,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</h2>\n</div>\n\n\x3c!-- Start - section headers --\x3e\n<div class="c_236-section-headers">\n    <ul role="tablist">\n        <li role="presentation" data-section-target-group="sales" class="c_236-section-header sales selected" data-analytics-toggle-value="sales">\n            <a href="#" role="tab" aria-controls="sales-panel"><span>'+j((f=b&&b.tabs,f=null==f||!1===f?f:f.salesLabel,typeof f===i?f.apply(b):f))+'</span></a>\n        </li>\n        <li role="presentation" data-section-target-group="afterSales" class="c_236-section-header after-sales" data-analytics-toggle-value="afterSales">\n            <a href="#" role="tab" aria-controls="aftersales-panel"><span>'+j((f=b&&b.tabs,f=null==f||!1===f?f:f.afterSalesLabel,typeof f===i?f.apply(b):f))+"</span></a>\n        </li>\n    </ul>\n</div>\n\x3c!-- End - section headers --\x3e\n"})}),define("c_236_HeaderView",["jquery","underscore","backbone","marionette","hbars!/components/c_236/html/headerView","c_236_ApplicationConstants","c_236_ViewConstants","c_236_ModelConstants"],function(a,b,c,d,e,f,g,h){"use strict";var i=g.VIEW.HEADER,j=h.MODEL.HEADER,k=g.VIEW.GENERAL.CLASSES,l=f.APPLICATION.EVENTS,m=f.APPLICATION.PROPERTIES;return c.Marionette.ItemView.extend({template:e,events:{"click @ui.tab":"onTabClick"},modelEvents:function(){var a={};return a["change:"+i.MODEL_EVENTS.TITLE]="onDealerNameChange",a["change:"+i.MODEL_EVENTS.ACTIVE_TAB]="onActiveTabChange",a},ui:{title:i.SELECTORS.TITLE,tab:i.SELECTORS.TAB,tabSales:i.SELECTORS.SALES,tabAfterSales:i.SELECTORS.AFTER_SALES},initialize:function(a){this.options=a||{}},onRender:function(){this.setActiveTab(this.model.get(j.PROPERTIES.ACTIVE_TAB))},onDealerNameChange:function(){this.ui.title.text(this.model.get(j.PROPERTIES.TITLE))},onActiveTabChange:function(){var a=this.model.get(j.PROPERTIES.ACTIVE_TAB);this.setActiveTab(a)},setActiveTab:function(a){a===m.REVIEW_TYPE.AFTER_SALES?(this.ui.tab.removeClass(k.SELECTED),this.ui.tabAfterSales.addClass(k.SELECTED)):(this.ui.tab.removeClass(k.SELECTED),this.ui.tabSales.addClass(k.SELECTED))},onTabClick:function(b){var c=a(b.target).closest(i.SELECTORS.TOGGLE_SOURCE),d=c.data(i.DATA_ATTRIBUTES.SECTION_TARGET_GROUP);b.preventDefault(),c.hasClass(k.SELECTED)||(this.model.set(h.MODEL.HEADER.PROPERTIES.ACTIVE_TAB,d),this.getEventAggregator().trigger(l.ANALYTICS.TOGGLE,c.data(i.DATA_ATTRIBUTES.TOGGLE_SOURCE)).trigger(l.ACTIVE_TAB_CHANGED))},getEventAggregator:function(){return this.options.eventAggregator}})}),define("hbars!/components/c_236/html/sortBy",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n                <option data-sort-order="',(e=c.sortOrder)?d=e.call(a,{hash:{},data:b}):(e=a&&a.sortOrder,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'" data-sort-field="',(e=c.sortField)?d=e.call(a,{hash:{},data:b}):(e=a&&a.sortField,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'" value="'+j((d=null==b||!1===b?b:b.index,typeof d===i?d.apply(a):d))+'">',(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"</option>\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<div class="form-group">\n    <label>'+j((g=b&&b.content,g=null==g||!1===g?g:g.sortByLabel,typeof g===i?g.apply(b):g))+'</label>\n    <div class="custom-selectbox custom-selectbox-form">\n        <select name="Brand" required class="sort_by">\n            ',g=c.each.call(b,b&&b.options,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+='\n        </select>\n        <span class="selectedValue"></span>\n    </div>\n</div>\n'})}),define("c_236_SortByView",["jquery","backbone","marionette","hbars!/components/c_236/html/sortBy","c_236_ApplicationConstants","c_236_ViewConstants","c_236_ModelConstants","customSelect"],function(a,b,c,d,e,f,g,h){"use strict";var i=f.VIEW.SORT_BY,j=e.APPLICATION.EVENTS,k=g.MODEL.SORT_BY.PROPERTIES;return c.ItemView.extend({template:d,events:{"change @ui.sortBy":"onSortByChange"},ui:{sortBy:i.SELECTORS.SORT_BY},initialize:function(a){this.options=a||{}},onRender:function(){this.setSelectedOptionToDefault(),h.init(this.$el)},onSortByChange:function(b){var c=a(b.target).find(i.SELECTORS.SELECTED),d=c.text();this.getEventAggregator().trigger(j.ANALYTICS.RANKING,d),this.getEventAggregator().trigger(j.SORT_BY_CHANGED,c.data())},setSelectedOptionToDefault:function(){var a=this.model.get(k.DEFAULT_OPTION);this.ui.sortBy.find("["+i.SELECTORS.SORT_FIELD+'="'+a.sortField+'"]['+i.SELECTORS.SORT_ORDER+'="'+a.sortOrder+'"]').attr(i.ATTRIBUTES.SELECTED,i.ATTRIBUTES.SELECTED)},getEventAggregator:function(){return this.options.eventAggregator}})}),define("hbars!/components/c_236/html/reviewItem",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var c="";return c+='\n                <span class="rating__star-container"><span class="rating__star rating__star_active" style="width:'+k(typeof a===j?a.apply(a):a)+'%"></span></span>\n            '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="rating">\n    <div class="rating__stars" aria-hidden="true">\n        <div class="rating__stars-inactive">\n            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n        </div>\n        <div class="rating__stars-active">\n            ',g=c.each.call(b,b&&b.activeStarWidths,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(g||0===g)&&(i+=g),i+='\n        </div>\n    </div>\n\n    <span class="rating__total-value rating__total-value_hidden">'+k((g=b&&b.content,g=null==g||!1===g?g:g.rated,typeof g===j?g.apply(b):g))+" ",(h=c.starRating)?g=h.call(b,{hash:{},data:e}):(h=b&&b.starRating,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</span>\n</div>\n\n<p class="c_236-review-date">'+k((g=b&&b.content,g=null==g||!1===g?g:g.reviewDate,typeof g===j?g.apply(b):g))+" <em>",(h=c.published)?g=h.call(b,{hash:{},data:e}):(h=b&&b.published,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</em></p>\n\n<p class="c_236-review-comment">',(h=c.comment)?g=h.call(b,{hash:{},data:e}):(h=b&&b.comment,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+"</p>\n"})}),define("c_236_ReviewItemView",["jquery","underscore","backbone","marionette","hbars!/components/c_236/html/reviewItem","c_236_ModelConstants"],function(a,b,c,d,e,f){"use strict";var g=f.MODEL.REVIEW_ITEMS.PROPERTIES;return d.ItemView.extend({template:e,tagName:"li",initialize:function(a){this.options=a||{},this.content=this.options.content},templateHelpers:function(){return{activeStarWidths:b.bind(function(){for(var a=this.model.get(g.STAR_RATING),b=[],c=0;c<Math.floor(a);c++)b.push(100);return a%1>0&&b.push(Math.floor(a%1*100)),b},this),content:this.content}}})}),define("hbars!/components/c_236/html/noReviews",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return(g=c.noReviews)?f=g.call(b,{hash:{},data:e}):(g=b&&b.noReviews,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h+=i(f)+"\n"})}),define("c_236_NoReviewsView",["jquery","underscore","backbone","marionette","hbars!/components/c_236/html/noReviews"],function(a,b,c,d,e){"use strict";return d.ItemView.extend({tagName:"p",template:e,initialize:function(a){this.options=a||{},this.noReviews=this.options.noReviews},templateHelpers:function(){return{noReviews:this.noReviews}}})}),define("c_236_ReviewItemsModel",["underscore","backbone"],function(a,b){"use strict";return b.Model.extend()}),define("hbars!/components/c_236/html/reviewItems",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return"loading"}function g(a,b){return"c_236-loader_hidden"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j=this;return i+='<ul class="c_236-reviews ',h=c.if.call(b,b&&b.dataRefreshing,{hash:{},inverse:j.noop,fn:j.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='"></ul>\n\n<div class="c_236-no-reviews"></div>\n\n<div class="c_236-loader ',h=c.if.call(b,b&&b.scrollLoadInactive,{hash:{},inverse:j.noop,fn:j.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+='" aria-hidden="true"></div>\n'})}),define("c_236_ReviewsCollectionView",["jquery","backbone","marionette","c_236_ReviewItemView","c_236_NoReviewsView","c_236_ReviewItemsModel","hbars!/components/c_236/html/reviewItems","c_236_ViewConstants"],function(a,b,c,d,e,f,g,h){"use strict";var i=h.VIEW.REVIEW_ITEMS.SELECTORS;return c.CompositeView.extend({model:f,template:g,childView:d,childViewContainer:i.REVIEWS,emptyView:e,emptyViewContainer:i.NO_REVIEWS,initialize:function(a){this.options=a||{},this.content=this.options.content},modelEvents:{change:"modelChanged"},modelChanged:function(){this.render()},childViewOptions:function(){return{eventAggregator:this.getEventAggregator(),content:this.content}},emptyViewOptions:function(){return{noReviews:this.content.noReviews}},attachHtml:function(a,b,c){this.collection.length?a.$el.find(this.childViewContainer).append(b.el):a.$el.find(this.emptyViewContainer).append(b.el)},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_236_DealerModel",["underscore","backbone","c_236_ApplicationConstants","c_236_ModelConstants"],function(a,b,c,d){"use strict";var e=d.MODEL.DEALER.PROPERTIES,f=c.APPLICATION.EVENTS;return b.Model.extend({initialize:function(a){this.options=a||{}},updateDealerDetails:function(a){var b={id:void 0,name:void 0};a&&a.id&&a.name&&(b.id=a.id,b.name=a.name),this.set(e.ID,b.id),this.set(e.NAME,b.name),this.getEventAggregator().trigger(f.DEALER_CHANGED,b)},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_236_HeaderModel",["underscore","backbone","c_236_ApplicationConstants","c_236_ModelConstants"],function(a,b,c,d){"use strict";var e=c.APPLICATION.EVENTS,f=c.APPLICATION.PROPERTIES,g=d.MODEL.HEADER.PROPERTIES;return b.Model.extend({defaults:{activeTab:f.REVIEW_TYPE.SALES},initialize:function(a){this.options=a||{}},updateActiveTab:function(a){var b=a||f.REVIEW_TYPE.SALES;this.get(g.ACTIVE_TAB)!==b&&(this.set(g.ACTIVE_TAB,b),this.getEventAggregator().trigger(e.ACTIVE_TAB_CHANGED))},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_236_ReviewsCollection",["underscore","backbone","remoteServices","c_236_ApplicationConstants"],function(a,b,c,d){"use strict";var e=d.APPLICATION.PROPERTIES,f=d.APPLICATION.EVENTS;return b.Collection.extend({initialize:function(a,b){this.options=b||{},this.reviewType=this.options.reviewType,this.limitReached=!1,this.reviewsPerPage=this.options.reviewsPerPage||e.DEFAULT_REVIEWS_PER_PAGE,this.setDealerId(this.options.dealerId),this.setCurrentSortBy(this.options.sortByDefault),this.remoteServices=this.options.remoteServices},sync:function(b,c,d){var e,g=this.getDealerId(),h=Math.max(c.length,0),i=this.reviewsPerPage,j=this.reviewType,k=this.getCurrentSortBy(),l=$.Deferred();return this.limitReached?l.resolve([]):(e=this.remoteServices.getDealerReviews(g,h,i,j,k.sortField,k.sortOrder),d&&(e.done(a.bind(function(a){a.reviews.length<i&&(this.limitReached=!0,this.getEventAggregator().trigger(f.END_OF_RESULTS,j)),d.success&&d.success(a.reviews),l.resolve(a.reviews)},this)),e.fail(function(){d.error&&d.error(),l.reject()}))),l.promise()},loadMoreReviews:function(){return this.fetch({remove:!1})},setDealerId:function(a){this.dealerId=a},getDealerId:function(){return this.dealerId},setCurrentSortBy:function(a){this.sortBy=a},resetData:function(){var a={silent:!0};this.limitReached=!1,this.reset(null,a)},resetCollectionState:function(){this.resetData(),this.setCurrentSortBy(this.options.sortByDefault)},getCurrentSortBy:function(){return this.sortBy},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_236_SortByModel",["underscore","backbone","c_236_ModelConstants"],function(a,b,c){"use strict";var d=c.MODEL.SORT_BY.PROPERTIES;return b.Model.extend({defaults:{defaultOption:{sortField:void 0,sortOrder:void 0}},initialize:function(b){var c={isDefault:!0};this.options=b||{},this.options.options&&this.options.options.length&&this.options.options[0].sortField&&this.options.options[0].sortOrder&&this.set(d.DEFAULT_OPTION,a.findWhere(this.options.options,c)||this.options.options[0])}})}),define("c_236_AnalyticsController",["jquery","underscore","backbone","marionette","c_236_ApplicationConstants","trackingCodes"],function(a,b,c,d,e,f){"use strict";var g=e;return c.Marionette.Controller.extend({initialize:function(a){this.options=a,this.analyticsManager=a.analyticsManager,this._bindEvents()},_bindEvents:function(){this.getEventAggregator().on(g.APPLICATION.EVENTS.ANALYTICS.TOGGLE,this._trackToggle,this).on(g.APPLICATION.EVENTS.ANALYTICS.RANKING,this._trackRanking,this)},_trackToggle:function(a){var b=f.trackingVars.toggle,c={};c[b.componentId]=f.componentIds.C236_Reviews,c[b.toggleType]=g.APPLICATION.ANALYTICS.TOGGLE_TYPE,c[b.toggleValue]=a,c[b.parentComponent]=this.options.initiatingComponent,this.analyticsManager.tag(f.eventTypes.toggle,c)},_trackRanking:function(a){var b=f.trackingVars.ranking,c={};c[b.componentId]=f.componentIds.C236_Reviews,c[b.rankingType]=g.APPLICATION.ANALYTICS.RANKING_TYPE,c[b.rankingText]=a,c[b.parentComponent]=this.options.initiatingComponent,this.analyticsManager.tag(f.eventTypes.ranking,c)},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_236_MainController",["jquery","underscore","backbone","marionette","c_236_ApplicationConstants","c_236_ModelConstants","c_236_ReviewsController","c_236_HeaderController","c_236_SortByController","c_236_MainView","c_236_HeaderView","c_236_SortByView","c_236_ReviewsCollectionView","c_236_DealerModel","c_236_HeaderModel","c_236_ReviewsCollection","c_236_ReviewItemsModel","c_236_SortByModel","c_236_AnalyticsController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";var t=e.APPLICATION.REGIONS,u=(e.APPLICATION.EVENTS,e.APPLICATION.PROPERTIES),v=f.MODEL;return d.Object.extend({initialize:function(a){this.options=a||{},this.initMainView(),this.initModels(),this.initViews(),this.initSubControllers()},initMainView:function(){this.mainView=new j({window:this.options.window,activeReviewType:this.options.tab,eventAggregator:this.getEventAggregator()}),this.options.region.appRegion.show(this.mainView)},initModels:function(){this.initDealerModel(),this.initHeaderModel(),this.initSortByModel(),this.initSalesReviewsCollection(),this.initAfterSalesReviewsCollection()},initViews:function(){this.initHeaderView(),this.initSortByView(),this.initSalesReviewsView(),this.initAfterSalesReviewsView()},initSubControllers:function(){this.initAnalyticsSubController(),this.initReviewsController(),this.initHeaderController(),this.initSortByController()},initDealerModel:function(){this.dealerModel=new n(this.extendBaseInitObject()),this.dealerModel.updateDealerDetails(this.options.dealer)},initHeaderModel:function(){this.headerModel=new o(this.extendBaseInitObject({tabs:this.options.content,title:this.dealerModel.get(v.DEALER.PROPERTIES.NAME),activeTab:this.options.tab}))},initSortByModel:function(){this.sortByModel=new r(this.extendBaseInitObject({options:this.options.content.sortByOptions,content:this.options.content}))},initSalesReviewsCollection:function(){this.salesReviewsCollection=new p(!1,{dealerId:this.dealerModel.get(v.DEALER.PROPERTIES.ID),reviewType:u.REVIEW_TYPE.SALES,reviewsPerPage:this.options.content.reviewsPerPage,remoteServices:this.options.remoteServices,eventAggregator:this.getEventAggregator(),sortByDefault:this.sortByModel.get(v.SORT_BY.PROPERTIES.DEFAULT_OPTION)})},initAfterSalesReviewsCollection:function(){this.afterSalesReviewsCollection=new p(!1,{dealerId:this.dealerModel.get(v.DEALER.PROPERTIES.ID),reviewType:u.REVIEW_TYPE.AFTER_SALES,reviewsPerPage:this.options.content.reviewsPerPage,remoteServices:this.options.remoteServices,eventAggregator:this.getEventAggregator(),sortByDefault:this.sortByModel.get(v.SORT_BY.PROPERTIES.DEFAULT_OPTION)})},initHeaderView:function(){this.headerView=new k(this.extendBaseInitObject({model:this.headerModel})),this.mainView.showChildView(t.HEADER_VIEW,this.headerView)},initSortByView:function(){this.sortByView=new l(this.extendBaseInitObject({model:this.sortByModel})),this.mainView.showChildView(t.SORT_BY_VIEW,this.sortByView)},initSalesReviewsView:function(){this.salesReviewsCollectionView=new m({collection:this.salesReviewsCollection,content:this.options.content,eventAggregator:this.getEventAggregator(),model:new q({scrollLoadInactive:!0,dataRefreshing:!0,locked:!1})}),this.mainView.showChildView(t.SALES_REVIEWS_VIEW,this.salesReviewsCollectionView)},initAfterSalesReviewsView:function(){this.afterSalesReviewsCollectionView=new m({collection:this.afterSalesReviewsCollection,content:this.options.content,eventAggregator:this.getEventAggregator(),model:new q({scrollLoadInactive:!0,dataRefreshing:!0,locked:!1})}),this.mainView.showChildView(t.AFTER_SALES_REVIEWS_VIEW,this.afterSalesReviewsCollectionView)},initAnalyticsSubController:function(){this.analyticsController=new s(this.extendBaseInitObject({analyticsManager:this.options.analyticsManager}))},initReviewsController:function(){this.reviewsController=new g(this.extendBaseInitObject({headerModel:this.headerModel,salesReviewsCollection:this.salesReviewsCollection,afterSalesReviewsCollection:this.afterSalesReviewsCollection,salesReviewItemsModel:this.salesReviewsCollectionView.model,afterSalesReviewItemsModel:this.afterSalesReviewsCollectionView.model,mainView:this.mainView}))},initHeaderController:function(){this.headerController=new h(this.extendBaseInitObject({headerModel:this.headerModel}))},initSortByController:function(){this.sortByController=new i(this.extendBaseInitObject({sortByModel:this.sortByModel}))},resetStates:function(){this.sortByView.render(),this.salesReviewsCollection.resetCollectionState(),this.afterSalesReviewsCollection.resetCollectionState()},setDealerDetails:function(a){this.resetStates(),this.dealerModel.updateDealerDetails(a)},setActiveTab:function(a){this.headerModel.updateActiveTab(a)},loadMore:function(){this.reviewsController.loadMore(this.headerModel.get(v.HEADER.PROPERTIES.ACTIVE_TAB))},getEventAggregator:function(){return this.options.eventAggregator},extendBaseInitObject:function(a){return b.extend({},this.options,a,{app:this.options.app,eventAggregator:this.getEventAggregator(),window:this.options.window,CONSTANTS:e})}})}),define("c_236_MainRouter",["backbone","marionette"],function(a,b){"use strict";return b.AppRouter.extend({})}),define("c_236",["jquery","underscore","backbone","marionette","c_236_MainController","c_236_MainRouter","c_236_ApplicationConstants","remoteServices"],function(a,b,c,d,e,f,g,h){"use strict";var i,j={component:".c_236"},k=g.APPLICATION.ERRORS,l=g.APPLICATION.PROPERTIES;return i=function(b){this.settings=a.extend({},j,b),this.targetSelector=this.settings.targetSelector||this.settings.component,this.init()},i.TAB={SALES:l.REVIEW_TYPE.SALES,AFTER_SALES:l.REVIEW_TYPE.AFTER_SALES},i.prototype.init=function(){this.initContentObject(),this.setupApplication()},i.prototype.initContentObject=function(){var c,d=a(this.targetSelector+" script[data-content]");if(!d.length)throw new Error(k.NOT_DEFINED);try{c=JSON.parse(b.unescape(d[0].innerHTML))}catch(error){throw new Error(k.UNABLE_TO_PARSE)}this.settings.content=c},i.prototype.setupApplication=function(){var a=new d.Application,g=this.settings.content.ratingsReviewView||this.settings.content.dealerLocatorDialog.ratingsReviewView;a.name=l.NAME,a.version=l.VERSION,a.regionManager=new d.RegionManager,a.addRegions({appRegion:this.targetSelector+" .main-view"}),a.mainController=new e(b.extend(this.settings,{app:a,content:g,region:a.getRegions(),window:this.settings.window,eventAggregator:b.extend({},c.Events),remoteServices:h,analyticsManager:this.settings.analyticsManager})),a.mainRouter=new f({controller:a.mainController}),a.on("start",function(){c.History.started||c.history.start()}),this.application=a},i.prototype.show=function(a,b){this.application.mainController.setDealerDetails(a),this.application.mainController.setActiveTab(b)},i.prototype.loadMore=function(){this.application.mainController.loadMore()},i}),define("dealerDetailsController",["underscore","marionette","backbone","c_207_ApplicationConstants","c_207_Constants","c_207_ModelConstants","c_236","modal","trackingCodes","userAccountContext"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=a.extend({},e,d),l=f.c_207_2.MODEL.DEALER_DETAIL.PROPERTIES,m=f.DEALER_DETAILS.MODEL.ELEMENTS.OPTIONS;return b.Object.extend({initialize:function(a){this.options=a,this.content=this.options.content,this.eventAggregator=this.options.eventAggregator,this.dealerDetailsComponent=this.options.dealerDetails,this.dealerDetailsModel=this.options.dealerDetailsModel,this.filterGroupCollection=this.options.filterGroupCollection,this.dealerMainView=this.options.dealerMainView,this.analyticsManager=this.options.analyticsManager,this.reviewsEl=!1,this.isPreferredDealerByOwner=this.content.dealerLocatorSiteAdminSettings.isPreferredDealerByOwner,this.bindEvents()},bindEvents:function(){this.eventAggregator.on(k.APPLICATION.EVENTS.USER.USER_CONTEXT_UPDATE,this.onUserContextUpdate,this).on(k.APPLICATION.EVENTS.DEALER.DEALER_SELECT,this.onDealerSelect,this).on(k.APPLICATION.EVENTS.DEALER.SHOW_AFTERSALES_REVIEWS,this.onShowAfterSalesReviews,this).on(k.APPLICATION.EVENTS.DEALER.SHOW_SALES_REVIEWS,this.onShowSalesReviews,this).on(k.APPLICATION.EVENTS.PREFERRED_DEALER.ADD,this.onPreferredDealerAdd,this),this.dealerDetailsModel.on(k.DEALER_DETAILS.MODEL.EVENTS.DEALER_ID_CHANGED,this.onDealerDetailsUpdated,this),this.dealerDetailsModel.on(k.DEALER_DETAILS.MODEL.EVENTS.ERROR,this.onDealerDetailsError,this)},onUserContextUpdate:function(a){a.state===k.APPLICATION.PROPERTIES.USER.STATES.DEEP_LINK&&(this.dealerDetailsModel.setDealerModelById(a.dealerId),this.eventAggregator.trigger(k.APPLICATION.EVENTS.DEALER.DEALER_SELECT,this.dealerDetailsModel.getDealerModel(),!0))},onDealerDetailsError:function(){this.eventAggregator.trigger(k.APPLICATION.EVENTS.LOADED),this.eventAggregator.trigger(k.APPLICATION.EVENTS.USER.SET_USER_CONTEXT,k.APPLICATION.PROPERTIES.USER.STATES.AUTOMATIC_SEARCH)},onDealerDetailsUpdated:function(){var b={},c=this.content.dealerLocatorSiteAdminSettings;j.get().done(a.bind(function(d){var e=this.isPreferredDealerByOwner?new Array(d.dealers.getUserLevelPreferredDealer()):d.dealers.getPreferredDealers();b[m.PREFERRED_DEALER.IS_PREFERRED_DEALER]=a.contains(e,this.dealerDetailsModel.get(k.APPLICATION.PROPERTIES.DEALER.ID)),b[m.PREFERRED_DEALER.MANDATORY_SERVICES]=this.filterGroupCollection.getFiltersForRequestParam(c.dealerService),this.eventAggregator.trigger(k.APPLICATION.EVENTS.USER.LOGIN_SUCCESSFUL)},this)).always(a.bind(function(){
this.updateDealerDetailsView(b),this.dealerMainView.switchView(k.APPLICATION.REGIONS.DEALER_DETAILS),this.eventAggregator.trigger(k.APPLICATION.EVENTS.VIEWPORT.SET_ACTIVE_TAB,k.APPLICATION.PROPERTIES.VIEWPORT.LIST_PREFERRED),this.eventAggregator.trigger(k.APPLICATION.EVENTS.LOADED),this.eventAggregator.trigger(k.APPLICATION.EVENTS.DEALER.DEALER_DETAILS_CHANGE,this.dealerDetailsComponent.model)},this))},updateDealerDetailsView:function(b){var c={},d=this.content.dealerLocatorSiteAdminSettings;b[m.PREFERRED_DEALER.IS_ENABLED]=!d.disableSetPreferredDealer,c=a.extend(c,b),this.dealerDetailsComponent.model=this.dealerDetailsModel.getDealerModel(),this.dealerDetailsComponent.collection.set(this.dealerDetailsModel.getDetailsElements(c))},onDealerSelect:function(a){this.eventAggregator.trigger(k.APPLICATION.EVENTS.LOADING),this.dealerDetailsModel.clear({silent:!0}),this.dealerDetailsModel.getDetails(a)},onPreferredDealerAdd:function(a){var b={};a===this.dealerDetailsModel.getDealerId()&&(b[m.PREFERRED_DEALER.IS_PREFERRED_DEALER]=!0,b[m.PREFERRED_DEALER.ADDED_IN_CURRENT_SESSION]=!0,this.updateDealerDetailsView(b),this.eventAggregator.trigger(d.APPLICATION.EVENTS.ANALYTICS.DEALER_INTERACTION,i.componentIds.C207_2_Dealer_Details,this.dealerDetailsModel,d.APPLICATION.ANALYTICS.DEALER_ACTION.SET_AS_PREFERRED))},onShowSalesReviews:function(){this.showReviews(g.TAB.SALES)},onShowAfterSalesReviews:function(){this.showReviews(g.TAB.AFTER_SALES)},showReviews:function(b){var c={id:this.dealerDetailsModel.get(l.ID),name:this.dealerDetailsModel.get(l.NAME)};this.reviewsOverlay?(this.reviewsApp.show(c,b),this.reviewsOverlay.show()):(this.reviewsEl=document.createElement("div"),this.reviewsEl.id=k.APPLICATION.IDS.REVIEW_APP_CONTAINER,this.reviewsEl.innerHTML=document.querySelector(k.APPLICATION.SELECTORS.REVIEWS_APP_BASE).outerHTML,this.reviewsOverlay=new h({content:this.reviewsEl.outerHTML,customClass:k.APPLICATION.CSS_CLASSES.REVIEWS_OVERLAY,displayType:h.TYPE_CENTERED,customOverlayClass:k.APPLICATION.CSS_CLASSES.REVIEWS_OVERLAY_CUSTOM_CLASS,clearOnClose:!1,touchMoveEnabled:!0,onScrollToBottom:a.bind(function(a){this.reviewsApp.loadMore()},this)}),this.reviewsOverlay.open().done(a.bind(function(){this.reviewsApp=new g({window:this.options.window,analyticsManager:this.analyticsManager,targetSelector:"#"+k.APPLICATION.IDS.REVIEW_APP_CONTAINER,dealer:c,tab:b,initiatingComponent:i.componentIds.C207_2_Results_List})},this)))}})}),define("errorsController",["underscore","marionette","backbone","c_207_ApplicationConstants","c_207_Constants"],function(a,b,c,d,e){"use strict";var f=a.extend({},e,d);return b.Object.extend({initialize:function(a){this.options=a,this.eventAggregator=this.options.eventAggregator,this.mainView=this.options.mainView,this.errorsView=this.options.errorsView,this.dealerMainView=this.options.dealerMainView,this.mapMainView=this.options.mapMainView,this.bindEvents()},bindEvents:function(){var a=f.APPLICATION.EVENTS;this.eventAggregator.on(a.ERRORS.DEALERS_NOT_FOUND,this.dealerCollectionError,this).on(a.ERRORS.LOCATION_NOT_FOUND,this.userLocationError,this).on(a.LOCATION.SMART_LOCATION_NOT_FOUND,this._onSmartLocationNotFound,this)},dealerCollectionError:function(){this._showError(this.options.content.overview.noResults)},smartLocationNotFoundError:function(){this._showError(this.options.content.overview.weCanNotFindYouLocation)},userLocationError:function(){this._showError(this.options.content.overview.weCanNotFindYouLocation)},showErrorView:function(){this.dealerMainView.switchView(f.APPLICATION.REGIONS.ERRORS)},showMapOverlayView:function(){this.mapMainView.showMapOverlay()},hideTabsNavigation:function(){this.mainView.toggleTabsNavigationView(!0)},_onSmartLocationNotFound:function(){this.smartLocationNotFoundError(),this.showMapOverlayView(),this.hideTabsNavigation(),this.eventAggregator.trigger(f.APPLICATION.EVENTS.HIDE_ICON_KEYS)},_showError:function(a){this.errorsView.showError(a),this.showErrorView()}})}),define("scrollEventManager",["jquery","underscore"],function(a,b){"use strict";function c(){this.scrollListeners=[],this.scrolling=!1,b.bindAll(this,"_winScroll","_rafScroll","_startListening","_stopListening","addListener","removeListener")}return c.prototype._winScroll=function(a){this.scrolling||(this.scrolling=!0,requestAnimationFrame(this._rafScroll))},c.prototype._rafScroll=function(){for(var b=window&&a(window).scrollTop(),c=0;c<this.scrollListeners.length;c++)this.scrollListeners[c](b);this.scrolling=!1},c.prototype._startListening=function(b){a(window).on("scroll",this._winScroll)},c.prototype._stopListening=function(b){a(window).off("scroll",this._winScroll)},c.prototype.addListener=function(a){b.indexOf(this.scrollListeners,a)>-1||"function"!=typeof a||(0===this.scrollListeners.length&&this._startListening(),this.scrollListeners.push(a))},c.prototype.removeListener=function(a){var c=b.indexOf(this.scrollListeners,a);-1!==c&&"function"==typeof a&&(this.scrollListeners.splice(c,1),0===this.scrollListeners.length&&this._stopListening())},new c}),define("lockPage",["jquery","backbone","scrollEventManager","heliosObject","underscore"],function(a,b,c,d,e){"use strict";function f(){e.bindAll(this,"init","showHeader","hideHeader","_scrollToItem","_jumpToPosition","_windowScrollListener","_setlockedItemTopOffset","initAutoHide","autoHide","_setCookiesPosition","_isMobileCookiesEnabled")}return f.prototype.init=function(c){var f={scrollDuration:500,lockedClassName:"isLocked",$lockedClassTarget:a("html"),lockedItem:".c_cfg",cookieItem:".c_128",bufferPos:0,eventAggregator:d.vent||e.extend({},b.Events)};this.currentlyAnimating=!1,this.settings=a.extend({},f,c),this.settings.$lockedItem=a(this.settings.lockedItem),this.settings.$window=a(this.settings.window),this._setlockedItemTopOffset(),0!==this.settings.$lockedItem.length&&(a(f.cookieItem).length&&this._setCookiesPosition(),this.settings.eventAggregator.on(this.settings.showEvent,this.showHeader),this.settings.eventAggregator.on(this.settings.hideEvent,this.hideHeader),this._isMobileCookiesEnabled()||a("html, body").scrollTop(this.settings.$lockedItem.offset().top+a(window).scrollTop()-this.settings.bufferPos),this.initAutoHide())},f.prototype.showHeader=function(){var b=this.settings.eventAggregator;!this.currentlyAnimating&&this.settings.$lockedClassTarget.hasClass(this.settings.lockedClassName)&&(this.currentlyAnimating=!0,this.settings.$lockedClassTarget.removeClass(this.settings.lockedClassName),this._isMobileCookiesEnabled()||a("html, body").scrollTop(this.settings.$lockedItem.offset().top+this.settings.$window.scrollTop()-this.settings.bufferPos),this._scrollToItem("html",e.bind(function(){this.settings.$lockedItem.one("click",this.hideHeader),this.currentlyAnimating=!1,b&&b.trigger("lockPage:showHeaderComplete")},this)),this._setlockedItemTopOffset(),this.settings.$window.on("resize",this._setlockedItemTopOffset),c.addListener(this._windowScrollListener))},f.prototype.hideHeader=function(){var b=this.settings.$window.scrollTop()-this.settings.$lockedItem.offset().top;a(this.settings.cookieItem),this.settings.eventAggregator;this.currentlyAnimating||this.settings.$lockedClassTarget.hasClass(this.settings.lockedClassName)||(this.currentlyAnimating=!0,this.settings.$lockedItem.off("click",this.hideHeader),b>=0?this._jumpToPosition(b):this._isMobileCookiesEnabled()?this._jumpToPosition():this._scrollToItem(this.settings.lockedItem,this._jumpToPosition),this.settings.$window.off("resize",this._setlockedItemTopOffset),c.removeListener(this._windowScrollListener))},f.prototype.initAutoHide=function(){this._autoHideTriggered=!1,this.settings.eventAggregator.on(this.settings.autoHideEvent,function(){this._autoHideTriggered=!0},this),setTimeout(this.autoHide,this.settings.autoHideMinDelay)},f.prototype.autoHide=function(){this._autoHideTriggered?this.hideHeader():this.settings.eventAggregator.on(this.settings.autoHideEvent,this.hideHeader)},f.prototype._scrollToItem=function(b,c){var d=a(b).offset()&&a(b).offset().top;a("html, body").animate({scrollTop:d-this.settings.bufferPos},this.settings.scrollDuration).promise().done(c)},f.prototype._jumpToPosition=function(b){var c=this.settings.eventAggregator;b="number"==typeof b?b:0,this.settings.$lockedClassTarget.addClass(this.settings.lockedClassName),a("html, body").scrollTop(b),a(this.settings.lockedItem).hide().show(0),this.currentlyAnimating=!1,c&&c.trigger("lockPage:hideHeaderComplete")},f.prototype._windowScrollListener=function(b){"number"!=typeof b&&(b=this.settings.$window.scrollTop()),a(this.settings.cookieItem).length&&(b=b+a(this.settings.cookieItem).innerHeight()+50),b>=this.settings.lockedItemTopOffset&&this.hideHeader()},f.prototype._setlockedItemTopOffset=function(){this.settings.lockedItemTopOffset=this.settings.$lockedItem.offset().top},f.prototype._setCookiesPosition=function(){var b,c=a(this.settings.cookieItem),f=a("body");window.matchMedia(d.config.common.mediaQuery.is.large).matches&&"t201"===d.config.siteTemplate&&(b=a(this.settings.cookieItem).innerHeight(),this.settings.bufferPos=b,c.css({position:"fixed",top:0}),c.addClass("set-cookie-left"),f.css("padding-top",b)),c.on("cookies.removed",e.bind(function(){this.settings.bufferPos="",f.css("padding-top",0)},this)),this.cookiesEnabled=!0},f.prototype._isMobileCookiesEnabled=function(){return this.cookiesEnabled&&window.matchMedia(d.config.common.mediaQuery.is.small).matches},f}),define("lockPageSingleton",["lockPage"],function(a){"use strict";return new a}),define("navigationControllerDealerLocator",["jquery","underscore","waypoints","marionette","backbone","lockPageSingleton","c_207_ApplicationConstants","c_207_Constants"],function(a,b,c,d,e,f,g,h){"use strict";var i=b.extend({},h,g);return d.Object.extend({initialize:function(b){this.options=b,this.content=b.content,this.eventAggregator=this.options.eventAggregator,this.tabsNavigationComponent=b.tabsNavigationComponent,this.mainView=b.mainView,this.dealerMainView=b.dealerMainView,this.bindEvents(),this.$hideShowButton=a("."+i.APPLICATION.CSS_CLASSES.C_207_EXIT_BUTTON),this.$root=a(i.APPLICATION.SELECTORS.ROOT),this.initialiseAutoHideSiteHeader()},bindEvents:function(){this.eventAggregator.on(i.APPLICATION.EVENTS.APPLICATION_READY,this.onApplicationReady,this),this.eventAggregator.on(i.APPLICATION.EVENTS.VIEWPORT.SET_ACTIVE_TAB,this.onActiveTabChange,this),this.eventAggregator.on(i.APPLICATION.EVENTS.LOADING,this.onLoading,this),this.eventAggregator.on(i.APPLICATION.EVENTS.LOADED,this.onLoaded,this)},initialiseAutoHideSiteHeader:function(){f.init({lockedClassName:i.APPLICATION.CSS_CLASSES.IS_LOCKED,$lockedClassTarget:a(i.APPLICATION.SELECTORS.HTML),lockedItem:"."+i.APPLICATION.CSS_CLASSES.C_207,eventAggregator:this.eventAggregator,hideEvent:i.APPLICATION.EVENTS.FIXED_HEADER.HIDE_HEADER,showEvent:i.APPLICATION.EVENTS.FIXED_HEADER.SHOW_HEADER,autoHideEvent:i.APPLICATION.EVENTS.FIXED_HEADER.AUTO_HIDE,autoHideMinDelay:2e3}),this.mainView.showHeaderBar(),this.toggleHeader(),this.content.dealerLocatorDialog.overview.autoHideSiteHeader?this.eventAggregator.trigger(i.APPLICATION.EVENTS.FIXED_HEADER.AUTO_HIDE):this.$root.waypoint({handler:b.bind(function(a){a===i.APPLICATION.EVENTS.FIXED_HEADER.DIRECTION.DOWN&&this.eventAggregator.trigger(i.APPLICATION.EVENTS.FIXED_HEADER.AUTO_HIDE)},this),offset:0})},toggleHeader:function(){this.$hideShowButton.on(i.APPLICATION.EVENTS.FIXED_HEADER.CLICK,b.bind(function(){a(i.APPLICATION.SELECTORS.HTML).hasClass(i.APPLICATION.CSS_CLASSES.IS_LOCKED)?this.eventAggregator.trigger(i.APPLICATION.EVENTS.FIXED_HEADER.SHOW_HEADER):this.eventAggregator.trigger(i.APPLICATION.EVENTS.FIXED_HEADER.HIDE_HEADER)},this))},onApplicationReady:function(){this.mainView.setActiveTab(this.content.dealerLocatorDialog.overview.defaultViewOnMobile),this.options.content.dealerLocatorDialog.overview.enableSearchViaLocation||this.mainView.setSearchboxDisabledLayout(),this.mainView.initializeViewportResizing(),b.bind(this.mainView.versionPrint,this.mainView),this.mainView.versionPrint()},onActiveTabChange:function(a){this.mainView.setActiveTab(a)},onLoading:function(){this.dealerMainView.showLoader()},onLoaded:function(){this.dealerMainView.hideLoader()}})}),define("hbars!/components/c_207/html/headerBarView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="";return g+="<h1>"+(0,this.escapeExpression)((f=b&&b.content,f=null==f||!1===f?f:f.title,"function"==typeof f?f.apply(b):f))+"</h1>\n"})}),define("headerBarViewDealerLocator",["jquery","marionette","hbars!/components/c_207/html/headerBarView"],function(a,b,c){"use strict";return b.ItemView.extend({template:c})}),define("hbars!/components/c_207/scripts/app/modules/c_207-7/html/c_207-7-details-confirmPreferredDealer",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="confirm-box">\n    <h3>'+i((f=b&&b.content,f=null==f||!1===f?f:f.confirmModalTitle,typeof f===h?f.apply(b):f))+'</h3>\n    <p class="description">\n        '+i((f=b&&b.content,f=null==f||!1===f?f:f.confirmModalBody,typeof f===h?f.apply(b):f))+'\n    </p>\n    <div class="cta-row confirm">\n        <button type="button" class="confirm-set-preferred" data-dealer-action="preferred" data-adobe-tagging="S.preferredDealer" data-action="'+i((f=b&&b.content,f=null==f||!1===f?f:f.setDealerEndpoint,typeof f===h?f.apply(b):f))+'">'+i((f=b&&b.content,f=null==f||!1===f?f:f.confirmModalConfirmCTA,typeof f===h?f.apply(b):f))+'</button>\n        <button type="button" class="cancel-set-preferred">'+i((f=b&&b.content,f=null==f||!1===f?f:f.confirmModalCancelCTA,typeof f===h?f.apply(b):f))+'</button>\n    </div>\n    <div class="error-box hidden">'+i((f=b&&b.content,f=null==f||!1===f?f:f.settingError,typeof f===h?f.apply(b):f))+"</div>\n</div>\n"})}),define("c_207_7ConfirmPreferredDealerView",["marionette","c_207_Constants","hbars!/components/c_207/scripts/app/modules/c_207-7/html/c_207-7-details-confirmPreferredDealer"],function(a,b,c){"use strict";var d=_.extend({},b.c_207_7);return a.ItemView.extend({template:c,initialize:function(a){this.options=a,this.ui={confirmPreferredDealerCta:d.VIEW.SELECTORS.CONFIRM_PREFERRED_DEALER_CTA,cancelPreferredDealerCta:d.VIEW.SELECTORS.CANCEL_PREFERRED_DEALER_CTA,errorMessage:d.VIEW.SELECTORS.ERROR_BLOCK}},events:{"click @ui.confirmPreferredDealerCta":"onClickConfirm","click @ui.cancelPreferredDealerCta":"onClickCancel"},reset:function(){this.ui.confirmPreferredDealerCta.toggleClass(d.VIEW.CSS_CLASSES.LOADER,!1),this.ui.errorMessage.toggleClass(d.VIEW.CSS_CLASSES.HIDE,!0)},showLoader:function(){this.ui.errorMessage.toggleClass(d.VIEW.CSS_CLASSES.HIDE,!0),this.ui.confirmPreferredDealerCta.toggleClass(d.VIEW.CSS_CLASSES.LOADER,!0)},showError:function(){this.ui.confirmPreferredDealerCta.toggleClass(d.VIEW.CSS_CLASSES.LOADER,!1),this.ui.errorMessage.toggleClass(d.VIEW.CSS_CLASSES.HIDE,!1)},onClickConfirm:function(){this.trigger(d.VIEW.EVENTS.CONFIRM_SET_REQUEST_PREFERRED_DEALER)},onClickCancel:function(){this.trigger(d.VIEW.EVENTS.CANCEL_SET_REQUEST_PREFERRED_DEALER)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-7/html/c_207-7-details-successPreferredDealer",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="success-box">\n    <h3>'+i((f=b&&b.content,f=null==f||!1===f?f:f.successModalTitle,typeof f===h?f.apply(b):f))+'</h3>\n    <p class="description">\n        ',f=b&&b.content,f=null==f||!1===f?f:f.successModalBody,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+='\n    </p>\n    <div class="cta-row success">\n        <button type="button" class="btn-alpha ok-set-preferred">'+i((f=b&&b.content,f=null==f||!1===f?f:f.successModalConfirmCTA,typeof f===h?f.apply(b):f))+"</button>\n    </div>\n</div>\n"})}),define("c_207_7SuccessPreferredDealerView",["marionette","c_207_Constants","hbars!/components/c_207/scripts/app/modules/c_207-7/html/c_207-7-details-successPreferredDealer"],function(a,b,c){"use strict";var d=_.extend({},b.c_207_7);return a.ItemView.extend({template:c,ui:{okPreferredDealerCta:d.VIEW.SELECTORS.OK_PREFERRED_DEALER_CTA},events:{"click @ui.okPreferredDealerCta":"onClickOk"},onClickOk:function(){this.trigger(d.VIEW.EVENTS.OK_SET_REQUEST_PREFERRED_DEALER)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-7/html/c_207-7-setPreferredDealerContainer",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="c_207_7 dealer-modal-container"></div>\n'})}),define("c_207_7SetPreferredDealerContainerView",["marionette","c_207_Constants","c_207_ApplicationConstants","c_207_7ConfirmPreferredDealerView","c_207_7SuccessPreferredDealerView","hbars!/components/c_207/scripts/app/modules/c_207-7/html/c_207-7-setPreferredDealerContainer"],function(a,b,c,d,e,f){"use strict";var g=_.extend({},b.c_207_7,c);return a.LayoutView.extend({template:f,initialize:function(a){this.content=a.content,this.initRegions(),this.initViews()},initRegions:function(){var a={},b=g.APPLICATION.REGIONS,c=g.APPLICATION.REGIONS_SELECTORS;a[b.DEALER_OVERLAY]=c.DEALER_OVERLAY,this.addRegions(a)},initViews:function(){this.confirmPreferredDealerView=new d({model:new Backbone.Model({content:this.content})}),this.successPreferredDealerView=new e({model:new Backbone.Model({content:this.content})})},showConfirmationView:function(){this.showChildView(g.APPLICATION.REGIONS.DEALER_OVERLAY,this.confirmPreferredDealerView),this.confirmPreferredDealerView.reset()},showLoadingView:function(){this.showChildView(g.APPLICATION.REGIONS.DEALER_OVERLAY,this.confirmPreferredDealerView),this.confirmPreferredDealerView.showLoader()},showSuccessView:function(){this.showChildView(g.APPLICATION.REGIONS.DEALER_OVERLAY,this.successPreferredDealerView)},showErrorView:function(){this.showChildView(g.APPLICATION.REGIONS.DEALER_OVERLAY,this.confirmPreferredDealerView),this.confirmPreferredDealerView.showError()}})}),define("c_207_SetPreferredDealerController",["jquery","underscore","marionette","backbone","c_207_ApplicationConstants","c_207_Constants","c_207_ModelConstants","modal","trackingCodes","userAccountContext","heliosUserAccountDealer","c_207_7SetPreferredDealerContainerView"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=b.extend({},f.c_207_7,e);return c.Object.extend({initialize:function(a){this.options=a,this.content=this.options.content,this.eventAggregator=this.options.eventAggregator,this.dealerMainView=this.options.dealerMainView,this.analyticsManager=this.options.analyticsManager,this.isPreferredDealerByOwner=this.content.dealerLocatorSiteAdminSettings.isPreferredDealerByOwner,this.bindEvents()},bindEvents:function(){this.eventAggregator.on(m.APPLICATION.EVENTS.PREFERRED_DEALER.REQUEST_NEW,this.onRequestNewPreferredDealer,this).on(m.APPLICATION.EVENTS.DEALER.DEALER_DETAILS_CHANGE,this.onDealerDetailsChange,this)},onRequestNewPreferredDealer:function(){this.modal?this.onRequestConfirmModal():(this.modal=new h({displayType:h.TYPE_CENTERED,customClass:m.VIEW.CSS_CLASSES.SET_PREFERRED_DEALER_OVERLAY,customOverlayClass:m.APPLICATION.CSS_CLASSES.OVERLAY_CUSTOM_CLASS,clearOnClose:!1,initiatingComponent:i.componentIds.C207_2_Results_List}),this.onRequestConfirmModal())},onRequestConfirmModal:function(){this.modal.open().done(b.bind(function(){this.setPreferredDealerModalView=new l({content:this.content.dealerLocatorDialog.preferredDealerView}),this.setPreferredDealerModalView.confirmPreferredDealerView.on(m.VIEW.EVENTS.CONFIRM_SET_REQUEST_PREFERRED_DEALER,this.onConfirmSetRequestPreferredDealer,this).on(m.VIEW.EVENTS.CANCEL_SET_REQUEST_PREFERRED_DEALER,this.modalClose,this),this.setPreferredDealerModalView.successPreferredDealerView.on(m.VIEW.EVENTS.OK_SET_REQUEST_PREFERRED_DEALER,this.modalClose,this),this.setPreferredDealerModalView.render(),this.modal.setContent(this.setPreferredDealerModalView.$el),this.setPreferredDealerModalView.showConfirmationView()},this))},onDealerDetailsChange:function(a){this.activeDealerModel=a},onConfirmSetRequestPreferredDealer:function(){var a;b.isUndefined(this.activeDealerModel)?this.setPreferredDealerModalView.showErrorView():(a=this.activeDealerModel.get(g.DEALERS.MODEL.PROPERTIES.DEALER_ID).toString(),this.setPreferredDealerModalView.showLoadingView(),this.setPreferredDealer(a))},modalClose:function(){this.modal.close()},setPreferredDealer:function(a){(new k).setUserLevelPreferredDealer(a,this.isPreferredDealerByOwner).done(b.bind(function(){this.setPreferredDealerModalView.showSuccessView(),this.eventAggregator.trigger(m.APPLICATION.EVENTS.PREFERRED_DEALER.ADD,a)},this)).fail(b.bind(function(){this.setPreferredDealerModalView.showErrorView()},this))}})}),define("c_207AbstractModel",["backbone"],function(a){"use strict";return a.Model.extend({initialize:function(a,b){if(this.options=b||{},!this.options.CONSTANTS)throw new Error("No Constants defined for Model");if(!this.options.eventAggregator)throw new Error(this.getConstants().ERROR.MODEL.NO_EVENT_AGGREGATOR)},addBroadcastListener:function(a,b){this.on(a,function(a,c){this.getEventAggregator().trigger(b,c)})},getConstants:function(){return this.options.CONSTANTS},getEventAggregator:function(){return this.options.eventAggregator},getContent:function(a){return a?this.options.content[a]:this.options.content}})}),define("c_207_1Model",["underscore","backbone","c_207AbstractModel"],function(a,b,c){"use strict";return c.extend({defaults:{userQuery:"",placePredictions:[],selectedPlace:null},initialize:function(){c.prototype.initialize.apply(this,arguments),this.addBroadcastListener(this.getConstants().MODEL.EVENTS.PRIOR_PLACE_CHANGE,this.getConstants().APPLICATION.EVENTS.SEARCH.PRIOR_PLACE_CHANGED)},setSmartLocation:function(a){this.options.smartLocationContext.set(a),this.set(this.getConstants().MODEL.PROPERTIES.HELIOS_LOCATION,a)},getSmartLocation:function(){return this.options.smartLocationContext.get().done(a.bind(function(b){a.isUndefined(this.get(this.getConstants().MODEL.PROPERTIES.HELIOS_LOCATION))&&this.set(this.getConstants().MODEL.PROPERTIES.HELIOS_LOCATION,b)},this))},getCurrentLocationLabel:function(){return this.options.content&&this.options.content.currentLocationText}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-1/html/c_207-1",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="c_207_1">\n    <div class="form-group">\n        <div class="query-box">\n            <input name="query-input-field" class="places-search-box" type="text" placeholder="'+i((f=b&&b.content,f=null==f||!1===f?f:f.placeholderText,typeof f===h?f.apply(b):f))+'" />\n            <button type="button" class="search-cta"><span>'+i((f=b&&b.content,f=null==f||!1===f?f:f.searchButtonLabel,typeof f===h?f.apply(b):f))+'</span></button>\n        </div>\n        <div class="places-predictions">\n            <span class="predictions-list autocomplete-suggestions pac-container">\n                <script type="text/x-handlebars-template" id="new-autocomplete-ctx">\n                    {{#each this}}\n                        <button type="button" class="pac-item" data-address-name="{{location.address}}">{{location.address}}</button>\n                    {{/each}}\n                <\/script>\n            </span>\n            <button type="button" class="detect-location-cta">'+i((f=b&&b.content,f=null==f||!1===f?f:f.useMyCurrentLocation,typeof f===h?f.apply(b):f))+"</button>\n        </div>\n    </div>\n</div>\n"})}),define("c_207_1View",["jquery","underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-1/html/c_207-1","keyCodeConstants","heliosLocation"],function(a,b,c,d,e,f){"use strict";return d.ItemView.extend({template:e,events:{"click @ui.searchPlaceBtn":"onSearchPlaceBtnClick","click @ui.detectLocationCta":"onDetectLocationClick","keyup @ui.locationTextBox":"selectFirstSearchResult"},modelEvents:function(){var a={};return a[this.CONSTANTS.MODEL.EVENTS.DISPLAYED_PLACE_NAME_CHANGE]="loadSmartLocation",a},childViewOptions:function(){return{CONSTANTS:this.model.getConstants()}},emptyViewOptions:function(){return{noMatches:this.model.getContent(this.CONSTANTS.MODEL.PROPERTIES.NO_MATCH_FOUND)}},initialize:function(a){this.eventAggregator=this.model.getEventAggregator(),this.options=a,this.CONSTANTS=this.model.getConstants(),this.TRACKING_CODES=this.model.options.TRACKING_CODES,this.initUI(),this.bindEvents(),this.setIsCurrentLocationActive(!1)},bindEvents:function(){this.eventAggregator.on(this.CONSTANTS.VIEW.EVENTS.GET_POSTAL_CODE_BY_ADDRESS_NAME,this.setSmartLocation,this)},setSmartLocation:function(b){var c;this.model.setSmartLocation(b.heliosLocation),b.userQuery&&b.userQuery.length?this.setUserQuery(b.userQuery):(c=a(this.ui.locationTextBox).val(),this.setUserQuery(c)),this.setPriorPlace(b.heliosLocation)},setUserQuery:function(a){this.model.set(this.CONSTANTS.MODEL.PROPERTIES.USER_QUERY,a)},loadSmartLocation:function(){this.getIsCurrentLocationActive()||this.model.getSmartLocation().done(b.bind(function(a){this.setLocationSearchElementValue(a.location.address),""!==this.model.get(this.CONSTANTS.MODEL.PROPERTIES.DISPLAYED_PLACE_NAME)&&this.setLocationSearchElementValue(this.model.get(this.CONSTANTS.MODEL.PROPERTIES.DISPLAYED_PLACE_NAME))},this))},initUI:function(){this.ui={searchPlaceBtn:this.CONSTANTS.VIEW.SELECTORS.SEARCH_CTA,detectLocationCta:this.CONSTANTS.VIEW.SELECTORS.DETECT_LOCATION_CTA,locationTextBox:this.CONSTANTS.VIEW.SELECTORS.INPUT}},selectFirstSearchResult:function(a){13===a.keyCode&&b.delay(b.bind(function(){this.onSearchPlaceBtnClick()},this),100)},onSearchPlaceBtnClick:function(){this.setIsCurrentLocationActive(!1),this.autocompleteEventHandler&&this.autocompleteEventHandler.manuallySelectFirstItem()},setPriorPlace:function(a){this.model.set(this.CONSTANTS.MODEL.PROPERTIES.PRIOR_PLACE,a,{silent:!0}),this.model.trigger("change:"+this.CONSTANTS.MODEL.PROPERTIES.PRIOR_PLACE,this.model,a),this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.SEARCH,this.TRACKING_CODES.trackingVars.search.searchTermType.userSearch,a,this.model.get(this.CONSTANTS.MODEL.PROPERTIES.USER_QUERY))},setLocationSearchElementValue:function(a){return this.ui.locationTextBox.val(a),this},setAutocompleteEventHandler:function(a){this.autocompleteEventHandler=a},setIsCurrentLocationActive:function(a){return this.isCurrentLocationActive=!!a,this},getIsCurrentLocationActive:function(){return this.isCurrentLocationActive},onDetectLocationClick:function(){this.model.getCurrentLocationLabel()&&this.setIsCurrentLocationActive(!0).setLocationSearchElementValue(this.model.getCurrentLocationLabel()),this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.SEARCH.USE_CURRENT_LOCATION_CHANGED)}})}),define("c_207_2DealerDetailsModel",["backbone","c_207AbstractModel"],function(a,b){"use strict";return b.extend({initialize:function(a,b){this.options=b||{},this.CONSTANTS=this.options.CONSTANTS||{},this.MODEL_PROPERTIES=this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES||{}},initTooltip:function(){this.set(this.MODEL_PROPERTIES.TOOLTIP,{tooltipID:this.cid,tooltipHeadline:this.get(this.MODEL_PROPERTIES.TITLE),tooltipContent:this.get(this.MODEL_PROPERTIES.DESCRIPTION),tooltipContainer:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_SERVICES_ACCORDION,tooltipViewport:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_SERVICES_ACCORDION})}})}),define("c_207_2GenericDealerDetailsView",["jquery","underscore","backbone","marionette"],function(a,b,c,d){"use strict";return d.ItemView.extend({template:!1,events:{"click @ui.analyticsTargetDealerInteraction":"onAnalyticsTargetDealerInteractionClick","click @ui.analyticsTargetGenericClick":"onAnalyticsTargetGenericClick"},initialize:function(a){this.options=a,this.CONSTANTS=a.CONSTANTS,this.MODEL_PROPERTIES=this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES,this.initUI(),this.initTooltip()},onRender:function(){var c=this.model.get(this.CONSTANTS.VIEW.PROPERTIES.TYPE);c===this.CONSTANTS.VIEW.PROPERTIES.CONTACT&&b.defer(b.bind(function(){a(this.CONSTANTS.VIEW.SELECTORS.BODY).trigger(this.CONSTANTS.VIEW.EVENTS.DEALERS_PHONE_UPDATE)},this)),c===this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.GENERAL_SERVICES_TYPE&&b.defer(b.bind(function(){this.isRendered&&this.ui.tooltip.each(b.bind(function(b,c){this.options.tooltip.createToolTip(a(c))},this))},this)),c===this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.GENERAL_SALES_TYPE&&b.defer(b.bind(function(){this.isRendered&&this.ui.tooltip.each(b.bind(function(b,c){this.options.tooltip.createToolTip(a(c))},this))},this)),c===this.CONSTANTS.VIEW.PROPERTIES.GENERAL_DETAILS&&b.defer(b.bind(function(){this.isRendered&&this.ui.tooltip.each(b.bind(function(b,c){this.options.tooltip.createToolTip(a(c))},this))},this)),this.options.window.picturefill(b.first(this.ui.pictureElement))},initUI:function(){this.ui={analyticsTargetDealerInteraction:this.options.CONSTANTS.VIEW.SELECTORS.ANALYTICS_TARGET_DEALER_INTERACTION,analyticsTargetGenericClick:this.options.CONSTANTS.VIEW.SELECTORS.ANALYTICS_TARGET_GENERIC_CLICK,pictureElement:this.options.CONSTANTS.VIEW.SELECTORS.PICTURE_ELEMENT,tooltip:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP}},initTooltip:function(){var a=this.model.get(this.CONSTANTS.VIEW.PROPERTIES.TYPE);if(this.model.get(this.MODEL_PROPERTIES.DATA)&&this.model.get(this.MODEL_PROPERTIES.DATA).services&&b.each(this.model.get(this.MODEL_PROPERTIES.DATA).services,b.bind(function(a){"string"!=typeof a&&(a[this.MODEL_PROPERTIES.TOOLTIP]={tooltipID:b.uniqueId(),tooltipHeadline:this.model.get(this.MODEL_PROPERTIES.TITLE),tooltipContent:this.model.get(this.MODEL_PROPERTIES.DESCRIPTION),tooltipContainer:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_SERVICES_LIST,tooltipViewport:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_SERVICES_LIST})},this)),this.model.get(this.MODEL_PROPERTIES.DATA)&&this.model.get(this.MODEL_PROPERTIES.DATA).sales&&b.each(this.model.get(this.MODEL_PROPERTIES.DATA).sales,b.bind(function(a){a[this.MODEL_PROPERTIES.TOOLTIP]={tooltipID:b.uniqueId(),tooltipHeadline:this.model.get(this.MODEL_PROPERTIES.TITLE),tooltipContent:this.model.get(this.MODEL_PROPERTIES.DESCRIPTION),tooltipContainer:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_SALES_LIST,tooltipViewport:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_SALES_LIST}},this)),a===this.CONSTANTS.VIEW.PROPERTIES.GENERAL_DETAILS){if(this.model.get("data").sponsoredAward)var c={tooltipID:this.model.cid,tooltipHeadline:this.model.get("data").sponsoredAward.title,tooltipContent:this.model.get("data").sponsoredAward.description,tooltipContainer:".dealer-item",tooltipViewport:".dealer-item"};this.model.set("tooltip",c)}},onAnalyticsTargetGenericClick:function(b){var c=a(b.currentTarget),d=c.data("analytics-location-on-page");this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.GENERIC_CLICK,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,d,c)},onAnalyticsTargetDealerInteractionClick:function(b){var c=a(b.currentTarget),d=c.data(this.options.CONSTANTS.VIEW.DATA_ATTRIBUTES.DEALER_ACTION),e=c.text().trim();c.data(this.options.CONSTANTS.VIEW.DATA_ATTRIBUTES.SITE_NAME)||(e=""),this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.DEALER_INTERACTION,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.options.dealerModel,d,e)}})}),define("c_207_2CtaDealerDetailsView",["c_207_2GenericDealerDetailsView","heliosLocation"],function(a,b){"use strict";return a.extend({events:{"click @ui.cta":"onCtaClick"},initialize:function(){a.prototype.initialize.apply(this,arguments),this.initUI()},initUI:function(){this.ui={
cta:this.options.CONSTANTS.VIEW.SELECTORS.CTA}},onCtaClick:function(a){var c,d=this.model.get(this.options.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES.DATA),e=d&&d.dealerId;e&&(c=(new b).setDealerId(e)),c&&this.options.eventAggregator.trigger(this.options.CONSTANTS.APPLICATION.EVENTS.LOCATION.SET_SMART_LOCATION,c),this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.GENERIC_CLICK,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.ACTION_PANEL,a.target)}})}),define("c_207_2SetPreferredDealerCtaView",["marionette","c_207_ApplicationConstants"],function(a,b){"use strict";return a.ItemView.extend({initialize:function(a){this.options=a,this.ui={setPreferredDealerCta:this.options.CONSTANTS.VIEW.SELECTORS.SET_PREFERRED_DEALER_CTA}},events:{"click @ui.setPreferredDealerCta":"onClickSetPreferredDealer"},onClickSetPreferredDealer:function(){this.options.eventAggregator.trigger(b.APPLICATION.EVENTS.PREFERRED_DEALER.REQUEST_NEW,this.options.dealerModel)}})}),define("c_207_2BackLinkView",["c_207_2GenericDealerDetailsView"],function(a){"use strict";return a.extend({events:{"click @ui.backToLinkCta":"onBackToLinkCtaClick","click @ui.backToResultsButton":"onBackToResultsButtonClick"},initialize:function(){a.prototype.initialize.apply(this,arguments),this.initUI()},initUI:function(){this.ui={backToLinkCta:this.options.CONSTANTS.VIEW.SELECTORS.BACK_TO_LINK_CTA,backToResultsButton:this.options.CONSTANTS.VIEW.SELECTORS.BACK_TO_RESULTS_BUTTON}},onBackToLinkCtaClick:function(a){this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.GENERIC_CLICK,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.PREFERRED_DEALER_DETAILS,a.target)},onBackToResultsButtonClick:function(a){this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.TOGGLE,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.CONSTANTS.APPLICATION.ANALYTICS.TOGGLE_TYPE.DEALER_DETAILS,a.target),this.options.eventAggregator.trigger(this.options.CONSTANTS.APPLICATION.EVENTS.DEALER.BACK_TO_RESULTS)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-awardItem",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='<span data-src="'+m((c=a&&a.picture,c=null==c||!1===c?c:c.mobileStandard,typeof c===l?c.apply(a):c))+'"></span>'}function g(a,b){var c,d="";return d+='<span data-src="'+m((c=a&&a.picture,c=null==c||!1===c?c:c.tabletStandard,typeof c===l?c.apply(a):c))+'" data-media="(min-width: 36.3125em)"></span>'}function h(a,b){var c,d="";return d+='<span data-src="'+m((c=a&&a.picture,c=null==c||!1===c?c:c.desktopStandard,typeof c===l?c.apply(a):c))+'" data-media="(min-width: 62.5em)"></span>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this;return k+='<span class="c_207_tooltip">\n    <a  href="#"\n        class="has-tooltip"\n        data-tooltip-id="'+m((i=b&&b.tooltip,i=null==i||!1===i?i:i.tooltipID,typeof i===l?i.apply(b):i))+'"\n        data-tooltip-my="'+m((i=b&&b.tooltip,i=null==i||!1===i?i:i.tooltipMy,typeof i===l?i.apply(b):i))+'"\n        data-tooltip-at="'+m((i=b&&b.tooltip,i=null==i||!1===i?i:i.tooltipAt,typeof i===l?i.apply(b):i))+'"\n        data-tooltip-container="'+m((i=b&&b.tooltip,i=null==i||!1===i?i:i.tooltipContainer,typeof i===l?i.apply(b):i))+'"\n        data-tooltip-viewport="'+m((i=b&&b.tooltip,i=null==i||!1===i?i:i.tooltipViewport,typeof i===l?i.apply(b):i))+'"\n        tabindex="0">\n\n        <span class="picture-element" data-alt="',(j=c.title)?i=j.call(b,{hash:{},data:e}):(j=b&&b.title,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+'">\n            ',i=c.if.call(b,(i=b&&b.picture,null==i||!1===i?i:i.mobileStandard),{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+="\n            ",i=c.if.call(b,(i=b&&b.picture,null==i||!1===i?i:i.tabletStandard),{hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e}),(i||0===i)&&(k+=i),k+="\n            ",i=c.if.call(b,(i=b&&b.picture,null==i||!1===i?i:i.desktopStandard),{hash:{},inverse:n.noop,fn:n.program(5,h,e),data:e}),(i||0===i)&&(k+=i),k+='\n            <noscript>\n                <img alt="',(j=c.title)?i=j.call(b,{hash:{},data:e}):(j=b&&b.title,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+'" src="'+m((i=b&&b.picture,i=null==i||!1===i?i:i.desktopStandard,typeof i===l?i.apply(b):i))+'" />\n            </noscript>\n        </span>\n    </a>\n\n    <div class="tooltip-panel" data-tooltip-id="',(j=c.tooltipID)?i=j.call(b,{hash:{},data:e}):(j=b&&b.tooltipID,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+'">\n        <span class="tooltip-heading">',(j=c.title)?i=j.call(b,{hash:{},data:e}):(j=b&&b.title,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+"</span>\n        <p>",(j=c.description)?i=j.call(b,{hash:{},data:e}):(j=b&&b.description,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+"</p>\n    </div>\n</span>\n"})}),define("c_207_2AwardItemDealerDetailsView",["jquery","underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-awardItem"],function(a,b,c,d,e){"use strict";return d.ItemView.extend({template:e,tagName:"li",className:"award-item",initialize:function(a){this.options=a,this.CONSTANTS=a.CONSTANTS,this.MODEL_PROPERTIES=this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES,this.initUI(),this.initTooltip()},initUI:function(){this.ui={tooltip:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP}},initTooltip:function(){this.model.set(this.MODEL_PROPERTIES.TOOLTIP,{tooltipID:this.model.cid,tooltipHeadline:this.model.get(this.MODEL_PROPERTIES.TITLE),tooltipContent:this.model.get(this.MODEL_PROPERTIES.DESCRIPTION),tooltipContainer:this.CONSTANTS.VIEW.SELECTORS.DEALER_AWARDS,tooltipViewport:this.CONSTANTS.VIEW.SELECTORS.DEALER_AWARDS})},onRender:function(){b.defer(b.bind(function(){this.options.tooltip.createToolTip(this.ui.tooltip)},this)),this.options.window.picturefill(b.first(this.ui.tooltip))}})}),define("c_207_2AwardsDealerDetailsView",["c_207_2AwardItemDealerDetailsView"],function(a){"use strict";return Marionette.CompositeView.extend({template:!1,childView:a,childViewContainer:"ul.award-items",childViewOptions:function(){return{window:this.options.window,tooltip:this.options.tooltip,CONSTANTS:this.options.CONSTANTS}}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-ratings",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n            <li>\n                <div class="rating">\n                    <p class="rating__title">'+m((d=a&&a.content,d=null==d||!1===d?d:d.ratings,d=null==d||!1===d?d:d.salesLabel,typeof d===l?d.apply(a):d))+'</p>\n                    <div class="rating__stars" aria-hidden="true">\n                        <div class="rating__stars-inactive">\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                        </div>\n                        <div class="rating__stars-active">\n                            ',d=c.each.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.averageStarRating,d=null==d||!1===d?d:d.sales,null==d||!1===d?d:d.starsList),{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+='\n                        </div>\n                    </div>\n\n                    <span class="rating__total-value">'+m((d=a&&a.data,d=null==d||!1===d?d:d.averageStarRating,d=null==d||!1===d?d:d.sales,d=null==d||!1===d?d:d.displayScore,typeof d===l?d.apply(a):d))+'</span>\n                    <span class="rating__review-count">(<a href="#" class="view-sales-reviews">'+m((d=a&&a.data,d=null==d||!1===d?d:d.averageStarRating,d=null==d||!1===d?d:d.sales,d=null==d||!1===d?d:d.numberOfReviews,typeof d===l?d.apply(a):d))+"</a>)</span>\n                </div>\n            </li>\n        "}function g(a,b){var c="";return c+='\n                                <span class="rating__star-container"><span class="rating__star rating__star_active" style="width:'+m(typeof a===l?a.apply(a):a)+'%"></span></span>\n                            '}function h(a,b){var d,e="";return e+='\n            <li>\n                <div class="rating">\n                    <p class="rating__title">'+m((d=a&&a.content,d=null==d||!1===d?d:d.ratings,d=null==d||!1===d?d:d.afterSalesLabel,typeof d===l?d.apply(a):d))+'</p>\n                    <div class="rating__stars" aria-hidden="true">\n                        <div class="rating__stars-inactive">\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                            <span class="rating__star-container"><span class="rating__star rating__star_inactive"></span></span>\n                        </div>\n                        <div class="rating__stars-active">\n                            ',d=c.each.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.averageStarRating,d=null==d||!1===d?d:d.afterSales,null==d||!1===d?d:d.starsList),{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+='\n                        </div>\n                    </div>\n\n                    <span class="rating__total-value">'+m((d=a&&a.data,d=null==d||!1===d?d:d.averageStarRating,d=null==d||!1===d?d:d.afterSales,d=null==d||!1===d?d:d.displayScore,typeof d===l?d.apply(a):d))+'</span>\n                    <span class="rating__review-count">(<a href="#" class="view-aftersales-reviews">'+m((d=a&&a.data,d=null==d||!1===d?d:d.averageStarRating,d=null==d||!1===d?d:d.afterSales,d=null==d||!1===d?d:d.numberOfReviews,typeof d===l?d.apply(a):d))+"</a>)</span>\n                </div>\n            </li>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this;return k+='<div class="dealer-ratings">\n    <h3>',(j=c.label)?i=j.call(b,{hash:{},data:e}):(j=b&&b.label,i=typeof j===l?j.call(b,{hash:{},data:e}):j),k+=m(i)+"</h3>\n\n    <ul>\n        ",i=c.if.call(b,(i=b&&b.data,i=null==i||!1===i?i:i.averageStarRating,null==i||!1===i?i:i.sales),{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+="\n\n        ",i=c.if.call(b,(i=b&&b.data,i=null==i||!1===i?i:i.averageStarRating,null==i||!1===i?i:i.afterSales),{hash:{},inverse:n.noop,fn:n.program(4,h,e),data:e}),(i||0===i)&&(k+=i),k+="\n    </ul>\n</div>\n"})}),define("c_207_2RatingsDealerDetailsView",["jquery","jqueryUtilityPlugins","marionette","c_207_Constants","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-ratings"],function(a,b,c,d,e){"use strict";function f(a){var b=[],c=0;for(c=0;c<Math.floor(a);c++)b.push(100);return a%1>0&&b.push(Math.floor(a%1*100)),b}return c.ItemView.extend({template:e,initialize:function(b){var c=this.model.get(d.c_207_2.VIEW.PROPERTIES.DATA);this.options=b,a.isNestedProp(c,["averageStarRating","afterSales","displayScore"])&&c.averageStarRating.afterSales.displayScore&&(c.averageStarRating.afterSales.starsList=f(c.averageStarRating.afterSales.displayScore)),a.isNestedProp(c,["averageStarRating","sales","displayScore"])&&c.averageStarRating.sales.displayScore&&(c.averageStarRating.sales.starsList=f(c.averageStarRating.sales.displayScore)),this.model.set(d.c_207_2.VIEW.PROPERTIES.DATA,c),this.ui={viewAftersalesReviewsLink:this.options.CONSTANTS.VIEW.SELECTORS.VIEW_AFTERSALES_REVIEWS,viewSalesReviewsLink:this.options.CONSTANTS.VIEW.SELECTORS.VIEW_SALES_REVIEWS}},events:{"click @ui.viewAftersalesReviewsLink":"onClickAftersalesReviews","click @ui.viewSalesReviewsLink":"onClickSalesReviews"},onClickAftersalesReviews:function(a){a.preventDefault(),this.options.eventAggregator.trigger(this.options.CONSTANTS.APPLICATION.EVENTS.DEALER.SHOW_AFTERSALES_REVIEWS,this.options.dealerModel),this.triggerAnalytics(this.options.CONSTANTS.APPLICATION.ANALYTICS.REVIEWS_ACTION.TYPE_AFTERSALES)},onClickSalesReviews:function(a){a.preventDefault(),this.options.eventAggregator.trigger(this.options.CONSTANTS.APPLICATION.EVENTS.DEALER.SHOW_SALES_REVIEWS,this.options.dealerModel),this.triggerAnalytics(this.options.CONSTANTS.APPLICATION.ANALYTICS.REVIEWS_ACTION.TYPE_SALES)},triggerAnalytics:function(a){this.options.eventAggregator.trigger(this.options.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.DEALER_INTERACTION,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.options.dealerModel,a)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-salesAccordionCompositeView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n         ",d=c.if.call(a,a&&a.showFinalLabelResult,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+='\n        <div class="accordion">\n            <div class="sales-group">\n            </div>\n        </div>\n    '}function g(a,b){var d,e,f="";return f+="\n            <h3>",(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"</h3>\n         "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="dealer-services services-details sales-list">\n    ',h=c.if.call(b,(h=b&&b.data,null==h||!1===h?h:h.sales),{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-salesAccordionItemView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return"no-service-detail"}function g(a,b){var d,e,f="";return f+='\n            <span class="c_207_tooltip">\n                <a  href="#"\n                    class="has-tooltip"\n                    data-tooltip-id="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===fa?d.apply(a):d))+'"\n                    data-tooltip-my="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===fa?d.apply(a):d))+'"\n                    data-tooltip-at="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===fa?d.apply(a):d))+'"\n                    data-tooltip-container="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===fa?d.apply(a):d))+'"\n                    data-tooltip-viewport="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===fa?d.apply(a):d))+'"\n                    tabindex="0">\n                    <span class="hidden">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+'</span>\n                </a>\n                <div class="tooltip-panel" data-tooltip-id="',(e=c.tooltipID)?d=e.call(a,{hash:{},data:b}):(e=a&&a.tooltipID,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+'">\n                    <span class="tooltip-heading">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"</span>\n                    <p>",(e=c.description)?d=e.call(a,{hash:{},data:b}):(e=a&&a.description,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"</p>\n                </div>\n            </span>\n        "}function h(a,b){var d,e,f="";return f+='\n            <div class="dealer-link">\n                <a class="service-link analytics-dealer-interaction" href="',(e=c.link)?d=e.call(a,{hash:{},data:b}):(e=a&&a.link,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+'" ',d=c.if.call(a,a&&a.openNewTab,{hash:{},inverse:ha.noop,fn:ha.program(6,i,b),data:b}),(d||0===d)&&(f+=d),f+=">\n                    ",(e=c.linkLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.linkLabel,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                </a>\n            </div>\n        "}function i(a,b){return'target="_blank"'}function j(a,b){var c,d="";return d+='\n            <div class="opening-hours">\n                    <p>'+ga((c=a&&a.openingHours,c=null==c||!1===c?c:c.openingHoursText,typeof c===fa?c.apply(a):c))+"</p>\n            </div>\n        "}function k(a,b,d){var e,f="";return f+='\n            <div class="dealer-hours">\n                <h3>'+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerOpeningHours,typeof e===fa?e.apply(a):e))+'</h3>\n                <div class="dealer-regular-hours">\n                    ',e=c.if.call(a,(e=a&&a.openingHours,null==e||!1===e?e:e.regularOpeningHours),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(11,l,b,a),data:b}),(e||0===e)&&(f+=e),f+="\n                </div>\n            "}function l(a,b,d){var e,f,g,h="";return h+='\n                        <table>\n                            <tbody>\n                                <tr class="opening-label">\n                                    ',f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ha.noop,fn:ha.programWithDepth(12,m,b,a),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):ia.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                </tr>\n                                ",e=c.each.call(a,(e=a&&a.openingHours,null==e||!1===e?e:e.regularOpeningHours),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(14,n,b,a),data:b}),(e||0===e)&&(h+=e),h+="\n                            </tbody>\n                        </table>\n                    "}function m(a,b,c){var d,e="";return e+="\n                                        <td> </td>\n                                        <td>"+ga((d=c&&c.content,d=null==d||!1===d?d:d.morningHours,typeof d===fa?d.apply(a):d))+"</td>\n                                        <td>"+ga((d=c&&c.content,d=null==d||!1===d?d:d.afternoonHours,typeof d===fa?d.apply(a):d))+"</td>\n                                    "}function n(a,b,d){var e,f,g="";return g+='\n                                    <tr class="opening-day">\n                                        <td class="weekday">',(f=c.weekDay)?e=f.call(a,{hash:{},data:b}):(f=a&&a.weekDay,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"</td>\n                                        ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.programWithDepth(21,s,b,a,d),fn:ha.programWithDepth(15,o,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n                                    </tr>\n                                "}function o(a,b,d){var e,f,g,h="";return h+="\n                                            ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ha.programWithDepth(19,r,b,d),fn:ha.programWithDepth(16,p,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):ia.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                        "}function p(a,b,d){var e,f="";return f+="\n                                                <td>\n                                                    <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                        "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                    </span>\n                                                </td>\n                                                <td>\n                                                    <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                        "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                    </span>\n                                                </td>\n                                            "}function q(a,b){return'class="close"'}function r(a,b,d){var e,f="";return f+="\n                                                <td>\n                                                    <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                        "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                    </span>\n                                                </td>\n                                                <td> </td>\n                                            "}function s(a,b,d,e){var f,g,h,i="";return i+="\n                                            ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ha.noop,fn:ha.programWithDepth(22,t,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h):ia.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h),(f||0===f)&&(i+=f),i+="\n                                            ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ha.noop,fn:ha.programWithDepth(31,z,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h):ia.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h),(f||0===f)&&(i+=f),i+="\n                                        "}function t(a,b,d){var e,f="";return f+="\n                                                ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ha.programWithDepth(29,y,b,d),fn:ha.programWithDepth(23,u,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function u(a,b,d){var e,f="";return f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(24,v,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(24,v,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function v(a,b,d){var e,f="";return f+="\n                                                        <td>\n                                                            ",e=c.if.call(a,a&&a.showAsClosed,{hash:{},inverse:ha.program(27,x,b),fn:ha.programWithDepth(25,w,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                        </td>\n                                                    "}function w(a,b,c){var d,e="";return e+='\n                                                                <span class="close">\n                                                                    '+ga((d=c&&c.content,d=null==d||!1===d?d:d.dealerClosed,typeof d===fa?d.apply(a):d))+"\n                                                                </span>\n                                                            "}function x(a,b){var d,e,f="";return f+="\n                                                                ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                                                            "}function y(a,b,d){var e,f="";return f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(24,v,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(24,v,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function z(a,b,d){var e,f,g,h="";return h+="\n                                                ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ha.program(39,F,b),fn:ha.programWithDepth(32,A,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):ia.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                            "}function A(a,b,d){var e,f="";return f+="\n                                                    ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ha.programWithDepth(36,D,b,d),fn:ha.programWithDepth(33,B,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function B(a,b,d){var e,f="";return f+="\n                                                        ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(34,C,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    "}function C(a,b,d){var e,f,g="";return g+="\n                                                            <td>\n                                                                ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"\n                                                            </td>\n                                                            <td>\n                                                                "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                            </td>\n                                                        "}function D(a,b,d){var e,f="";return f+="\n                                                        ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(37,E,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    "}function E(a,b,d){var e,f,g="";return g+="\n                                                            <td>\n                                                                "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                            </td>\n                                                            <td>\n                                                                ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"\n                                                            </td>\n                                                        "}function F(a,b){var d,e="";return e+="\n                                                    ",d=c.with.call(a,(d=a&&a.openIntervals,null==d||!1===d?d:d[0]),{hash:{},inverse:ha.noop,fn:ha.program(40,G,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                                "}function G(a,b){var d,e,f="";return f+="\n                                                        <td>\n                                                            ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                                                        </td>\n                                                        <td> </td>\n                                                    "}function H(a,b){var d,e="";return e+="\n                <h3>"+ga((d=a&&a.content,d=null==d||!1===d?d:d.specialOpeningHours,typeof d===fa?d.apply(a):d))+'</h3>\n                <div class="dealer-special-hours">\n                    <table>\n                        <tbody>\n                            ',d=c.each.call(a,(d=a&&a.openingHours,null==d||!1===d?d:d.specialOpeningHours),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(43,I,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        "}function I(a,b,d){var e,f,g="";return g+='\n                                <tr class="opening-day">\n                                    <td class="weekday">',(f=c.weekDay)?e=f.call(a,{hash:{},data:b}):(f=a&&a.weekDay,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"</td>\n                                    ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.programWithDepth(49,M,b,a,d),fn:ha.programWithDepth(44,J,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n                                </tr>\n                            "}function J(a,b,d){var e,f,g,h="";return h+="\n                                        ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ha.programWithDepth(47,L,b,d),fn:ha.programWithDepth(45,K,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):ia.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                    "}function K(a,b,d){var e,f="";return f+="\n                                            <td>\n                                                <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                    "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                </span>\n                                            </td>\n                                            <td>\n                                                <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                    "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                </span>\n                                            </td>\n                                        "}function L(a,b,d){var e,f="";return f+="\n                                            <td>\n                                                <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),
(e||0===e)&&(f+=e),f+=">\n                                                    "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                </span>\n                                            </td>\n                                            <td> </td>\n                                        "}function M(a,b,d,e){var f,g,h,i="";return i+="\n                                        ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ha.noop,fn:ha.programWithDepth(50,N,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h):ia.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h),(f||0===f)&&(i+=f),i+="\n                                        ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ha.noop,fn:ha.programWithDepth(59,T,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h):ia.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h),(f||0===f)&&(i+=f),i+="\n                                    "}function N(a,b,d){var e,f="";return f+="\n                                            ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ha.programWithDepth(57,S,b,d),fn:ha.programWithDepth(51,O,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function O(a,b,d){var e,f="";return f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(52,P,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(52,P,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function P(a,b,d){var e,f="";return f+="\n                                                    <td>\n                                                        ",e=c.if.call(a,a&&a.showAsClosed,{hash:{},inverse:ha.program(55,R,b),fn:ha.programWithDepth(53,Q,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    </td>\n                                                "}function Q(a,b,c){var d,e="";return e+='\n                                                            <span class="close">\n                                                                '+ga((d=c&&c.content,d=null==d||!1===d?d:d.dealerClosed,typeof d===fa?d.apply(a):d))+"\n                                                            </span>\n                                                        "}function R(a,b){var d,e,f="";return f+="\n                                                            ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                                                        "}function S(a,b,d){var e,f="";return f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(52,P,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(52,P,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function T(a,b,d){var e,f="";return f+="\n                                            ",e=c.if.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),{hash:{},inverse:ha.program(67,Z,b),fn:ha.programWithDepth(60,U,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function U(a,b,d){var e,f="";return f+="\n                                                ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ha.programWithDepth(64,X,b,d),fn:ha.programWithDepth(61,V,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function V(a,b,d){var e,f="";return f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(62,W,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function W(a,b,d){var e,f,g="";return g+="\n                                                        <td>\n                                                            ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"\n                                                        </td>\n                                                        <td>\n                                                            "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                        </td>\n                                                    "}function X(a,b,d){var e,f="";return f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(65,Y,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function Y(a,b,d){var e,f,g="";return g+="\n                                                        <td>\n                                                            "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                        </td>\n                                                        <td>\n                                                            ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"\n                                                        </td>\n                                                    "}function Z(a,b){var d,e="";return e+="\n                                                ",d=c.with.call(a,(d=a&&a.openIntervals,null==d||!1===d?d:d[0]),{hash:{},inverse:ha.noop,fn:ha.program(68,$,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                            "}function $(a,b){var d,e,f="";return f+="\n                                                    <td>\n                                                        ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                                                    </td>\n                                                    <td> </td>\n                                                "}function _(a,b){var d,e="";return e+='\n        <div class="dealer-contact">\n            <p class="contact-us">\n                ',d=c.each.call(a,a&&a.phones,{hash:{},inverse:ha.noop,fn:ha.programWithDepth(71,aa,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n            </p>\n        </div>\n        "}function aa(a,b,d){var e,f="";return f+="\n                    ",e=c.if.call(a,null==b||!1===b?b:b.first,{hash:{},inverse:ha.noop,fn:ha.programWithDepth(72,ba,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                "}function ba(a,b,d){var e,f,g="";return g+='\n                        <a data-dealer-action="call" href="tel:',(f=c.number)?e=f.call(a,{hash:{},data:b}):(f=a&&a.number,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+'" class="external-phone analytics-dealer-interaction" data-tld55="internal" data-dealer-action="call">\n                            <span class="label">'+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerServicePhoneNumber,typeof e===fa?e.apply(a):e))+'</span>\n                            <span class="tel">',(f=c.number)?e=f.call(a,{hash:{},data:b}):(f=a&&a.number,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"</span>\n                        </a>\n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var ca,da,ea="",fa="function",ga=this.escapeExpression,ha=this,ia=c.helperMissing;return ea+='<div class="accordion-group">\n    <h3 class="accordion-header ',ca=c.unless.call(b,b&&b.showTooltip,{hash:{},inverse:ha.noop,fn:ha.program(1,f,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+='">',(da=c.name)?ca=da.call(b,{hash:{},data:e}):(da=b&&b.name,ca=typeof da===fa?da.call(b,{hash:{},data:e}):da),ea+=ga(ca)+"\n        ",ca=c.if.call(b,b&&b.showTooltip,{hash:{},inverse:ha.noop,fn:ha.program(3,g,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+='\n    </h3>\n    <div class="accordion-panel">\n        ',ca=c.if.call(b,b&&b.showLink,{hash:{},inverse:ha.noop,fn:ha.program(5,h,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n\n        ",ca=c.if.call(b,(ca=b&&b.openingHours,null==ca||!1===ca?ca:ca.showOpeningHoursText),{hash:{},inverse:ha.noop,fn:ha.program(8,j,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n\n        ",ca=c.if.call(b,(ca=b&&b.openingHours,null==ca||!1===ca?ca:ca.showRegularOpeningHours),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(10,k,e,b),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n            ",ca=c.if.call(b,(ca=b&&b.openingHours,null==ca||!1===ca?ca:ca.showSpecialOpeningHours),{hash:{},inverse:ha.noop,fn:ha.program(42,H,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n        ",ca=c.if.call(b,b&&b.showPhones,{hash:{},inverse:ha.noop,fn:ha.program(70,_,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n    </div>\n</div>\n"})}),define("c_207_2SalesAccordionItemView",["underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-salesAccordionItemView","accordionItem","storageManager"],function(a,b,c,d,e,f){"use strict";return c.ItemView.extend({template:d,events:{"click @ui.analyticsTarget":"onAnalyticsTargetClick"},initialize:function(a){this.options=a,this.CONSTANTS=a.CONSTANTS,this.eventAggregator=a.eventAggregator,this.MODEL_PROPERTIES=this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES,this.initUI(),this.model.initTooltip()},initUI:function(){this.ui={accordion:this.CONSTANTS.VIEW.SELECTORS.ACCORDION,accordionHeader:this.CONSTANTS.VIEW.SELECTORS.ACCORDION_HEADER,accordionPanel:this.CONSTANTS.VIEW.SELECTORS.ACCORDION_PANEL,analyticsTarget:this.options.CONSTANTS.VIEW.SELECTORS.ANALYTICS_TARGET_DEALER_INTERACTION,tooltip:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP}},onRender:function(){this.renderAccordion()},onShow:function(){this.options.tooltip.createToolTip(this.ui.tooltip)},renderAccordion:function(){this.options.accordionItems.push(new e({$contentElement:this.ui.accordionPanel,$headerElement:this.ui.accordionHeader,isOpen:this.accodionItemOnOpen(),onOpen:a.bind(this.onAccordionItemOpen,this),onClose:a.bind(this.onAccordionItemClose,this),isDisabled:!1,transitionToClose:"toggle"}))},accodionItemOnOpen:function(){var a=this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES,b=this.options.model.get(a.OPENING_HOURS),c=this.options.model.get(a.SHOW_EXPAND_ACCORDION),d=this.options.model.get(a.SHOW_EXCLUDE_SERVICE_DETAIL),e=b&&(b.showRegularOpeningHours||b.showSpecialOpeningHours||b.showOpeningHoursText)||this.options.model.get(a.SHOW_PHONES)||this.options.model.get(a.SHOW_LINK);return d?(this.ui.accordionHeader.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.HIDE,!e),this.ui.accordionPanel.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.HIDE,!e)):(this.ui.accordionHeader.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.DISABLE_CONTENT,!e),this.ui.accordionPanel.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.HIDE,!e)),c},onAccordionItemOpen:function(a){a.settings.$contentElement.show(),this.model.get(this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES.ACCORDION_CLOSE)&&(this.model.set(this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES.ACCORDION_CLOSE,!1),this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.ACCORDION_EXPANSION,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.SERVICES,this.ui.accordionHeader))},onAccordionItemClose:function(a){a.settings.$contentElement.hide(),this.model.set(this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES.ACCORDION_CLOSE,!0)},onAnalyticsTargetClick:function(a){this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.GENERIC_CLICK,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.SERVICES,a.target)}})}),define("c_207_2SalesAccordionCompositeView",["backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-salesAccordionCompositeView","c_207_2SalesAccordionItemView","accordion"],function(a,b,c,d,e){"use strict";return b.CompositeView.extend({template:c,childView:d,childViewContainer:".sales-group",initialize:function(a){var b={showTooltip:this.model.get(this.options.CONSTANTS.VIEW.PROPERTIES.DATA).showTooltip};this.options=a,this.TRACKING_CODES=this.options.TRACKING_CODES,this.CONSTANTS=a.CONSTANTS,this.eventAggregator=a.eventAggregator,this.templateHelpers=_.extend(this.options.templateHelpers,b),this.accordionItems=[],this.initUI()},initUI:function(){this.ui={accordion:this.CONSTANTS.VIEW.SELECTORS.ACCORDION}},childViewOptions:function(a){if(a)return{CONSTANTS:this.CONSTANTS,TRACKING_CODES:this.TRACKING_CODES,eventAggregator:this.eventAggregator,templateHelpers:this.templateHelpers,accordionItems:this.accordionItems,tooltip:this.options.tooltip}},onRenderCollection:function(){this.accordion=new e({$container:this.ui.accordion,isScrollOnOpenEnabled:!1,items:this.accordionItems})}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-servicesAccordionCompositeView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n        ",d=c.if.call(a,a&&a.showFinalLabelResult,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+='\n        <div class="accordion">\n            <div class="services-group">\n            </div>\n        </div>\n    '}function g(a,b){var d,e,f="";return f+="\n            <h3>",(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"</h3>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="dealer-services services-details services-list">\n    ',h=c.if.call(b,(h=b&&b.data,null==h||!1===h?h:h.services),{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-servicesAccordionItemView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return"no-service-detail"}function g(a,b){var d,e,f="";return f+='\n            <span class="c_207_tooltip">\n                <a  href="#"\n                    class="has-tooltip"\n                    data-tooltip-id="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===fa?d.apply(a):d))+'"\n                    data-tooltip-my="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===fa?d.apply(a):d))+'"\n                    data-tooltip-at="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===fa?d.apply(a):d))+'"\n                    data-tooltip-container="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===fa?d.apply(a):d))+'"\n                    data-tooltip-viewport="'+ga((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===fa?d.apply(a):d))+'"\n                    tabindex="0">\n                    <span class="hidden">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+'</span>\n                </a>\n                <div class="tooltip-panel" data-tooltip-id="',(e=c.tooltipID)?d=e.call(a,{hash:{},data:b}):(e=a&&a.tooltipID,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+'">\n                    <span class="tooltip-heading">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"</span>\n                    <p>",(e=c.description)?d=e.call(a,{hash:{},data:b}):(e=a&&a.description,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"</p>\n                </div>\n            </span>\n        "}function h(a,b){var d,e,f="";return f+='\n            <div class="dealer-link">\n                <a class="service-link analytics-dealer-interaction" href="',(e=c.link)?d=e.call(a,{hash:{},data:b}):(e=a&&a.link,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+'" ',d=c.if.call(a,a&&a.openNewTab,{hash:{},inverse:ha.noop,fn:ha.program(6,i,b),data:b}),(d||0===d)&&(f+=d),f+=">\n                    ",(e=c.linkLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.linkLabel,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                </a>\n            </div>\n        "}function i(a,b){return'target="_blank"'}function j(a,b){var c,d="";return d+='\n            <div class="opening-hours">\n                <p>'+ga((c=a&&a.openingHours,c=null==c||!1===c?c:c.openingHoursText,typeof c===fa?c.apply(a):c))+"</p>\n            </div>\n        "}function k(a,b,d){var e,f="";return f+='\n            <div class="dealer-hours">\n                <h3>'+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerOpeningHours,typeof e===fa?e.apply(a):e))+'</h3>\n                <div class="dealer-regular-hours">\n                    ',e=c.if.call(a,(e=a&&a.openingHours,null==e||!1===e?e:e.regularOpeningHours),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(11,l,b,a),data:b}),(e||0===e)&&(f+=e),f+="\n                </div>\n            "}function l(a,b,d){var e,f,g,h="";return h+='\n                        <table>\n                            <tbody>\n                                <tr class="opening-label">\n                                    ',f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ha.noop,fn:ha.programWithDepth(12,m,b,a),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):ia.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                </tr>\n                                ",e=c.each.call(a,(e=a&&a.openingHours,null==e||!1===e?e:e.regularOpeningHours),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(14,n,b,a),data:b}),(e||0===e)&&(h+=e),h+="\n                            </tbody>\n                        </table>\n                    "}function m(a,b,c){var d,e="";return e+="\n                                        <td> </td>\n                                        <td>"+ga((d=c&&c.content,d=null==d||!1===d?d:d.morningHours,typeof d===fa?d.apply(a):d))+"</td>\n                                        <td>"+ga((d=c&&c.content,d=null==d||!1===d?d:d.afternoonHours,typeof d===fa?d.apply(a):d))+"</td>\n                                    "}function n(a,b,d){var e,f,g="";return g+='\n                                    <tr class="opening-day">\n                                        <td class="weekday">',(f=c.weekDay)?e=f.call(a,{hash:{},data:b}):(f=a&&a.weekDay,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"</td>\n                                        ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.programWithDepth(21,s,b,a,d),fn:ha.programWithDepth(15,o,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n                                    </tr>\n                                "}function o(a,b,d){var e,f,g,h="";return h+="\n                                            ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ha.programWithDepth(19,r,b,d),fn:ha.programWithDepth(16,p,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):ia.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                        "}function p(a,b,d){var e,f="";return f+="\n                                                <td>\n                                                    <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                        "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                    </span>\n                                                </td>\n                                                <td>\n                                                    <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                        "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                    </span>\n                                                </td>\n                                            "}function q(a,b){return'class="close"'}function r(a,b,d){var e,f="";return f+="\n                                                <td>\n                                                    <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                        "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                    </span>\n                                                </td>\n                                                <td> </td>\n                                            "}function s(a,b,d,e){var f,g,h,i="";return i+="\n                                            ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ha.noop,fn:ha.programWithDepth(22,t,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h):ia.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h),(f||0===f)&&(i+=f),i+="\n                                            ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ha.noop,fn:ha.programWithDepth(31,z,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h):ia.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h),(f||0===f)&&(i+=f),i+="\n                                        "}function t(a,b,d){var e,f="";return f+="\n                                                ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ha.programWithDepth(29,y,b,d),fn:ha.programWithDepth(23,u,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function u(a,b,d){var e,f="";return f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(24,v,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(24,v,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function v(a,b,d){var e,f="";return f+="\n                                                        <td>\n                                                            ",e=c.if.call(a,a&&a.showAsClosed,{hash:{},inverse:ha.program(27,x,b),fn:ha.programWithDepth(25,w,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                        </td>\n                                                    "}function w(a,b,c){var d,e="";return e+='\n                                                                <span class="close">\n                                                                    '+ga((d=c&&c.content,d=null==d||!1===d?d:d.dealerClosed,typeof d===fa?d.apply(a):d))+"\n                                                                </span>\n                                                            "}function x(a,b){var d,e,f="";return f+="\n                                                                ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                                                            "}function y(a,b,d){var e,f="";return f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(24,v,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(24,v,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function z(a,b,d){var e,f,g,h="";return h+="\n                                                ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ha.program(39,F,b),fn:ha.programWithDepth(32,A,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):ia.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                            "}function A(a,b,d){var e,f="";return f+="\n                                                    ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ha.programWithDepth(36,D,b,d),fn:ha.programWithDepth(33,B,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function B(a,b,d){var e,f="";return f+="\n                                                        ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(34,C,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    "}function C(a,b,d){var e,f,g="";return g+="\n                                                            <td>\n                                                                ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"\n                                                            </td>\n                                                            <td>\n                                                                "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                            </td>\n                                                        "}function D(a,b,d){var e,f="";return f+="\n                                                        ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(37,E,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    "}function E(a,b,d){var e,f,g="";return g+="\n                                                            <td>\n                                                                "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                            </td>\n                                                            <td>\n                                                                ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"\n                                                            </td>\n                                                        "}function F(a,b){var d,e="";return e+="\n                                                    ",d=c.with.call(a,(d=a&&a.openIntervals,null==d||!1===d?d:d[0]),{hash:{},inverse:ha.noop,fn:ha.program(40,G,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                                "}function G(a,b){var d,e,f="";return f+="\n                                                        <td>\n                                                            ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                                                        </td>\n                                                        <td> </td>\n                                                    "}function H(a,b){var d,e="";return e+="\n                <h3>"+ga((d=a&&a.content,d=null==d||!1===d?d:d.specialOpeningHours,typeof d===fa?d.apply(a):d))+'</h3>\n                <div class="dealer-special-hours">\n                    <table>\n                        <tbody>\n                            ',d=c.each.call(a,(d=a&&a.openingHours,null==d||!1===d?d:d.specialOpeningHours),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(43,I,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        "}function I(a,b,d){var e,f,g="";return g+='\n                                <tr class="opening-day">\n                                    <td class="weekday">',(f=c.weekDay)?e=f.call(a,{hash:{},data:b}):(f=a&&a.weekDay,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"</td>\n                                    ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.programWithDepth(49,M,b,a,d),fn:ha.programWithDepth(44,J,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n                                </tr>\n                            "}function J(a,b,d){var e,f,g,h="";return h+="\n                                        ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ha.programWithDepth(47,L,b,d),fn:ha.programWithDepth(45,K,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):ia.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                    "}function K(a,b,d){var e,f="";return f+="\n                                            <td>\n                                                <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                    "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                </span>\n                                            </td>\n                                            <td>\n                                                <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,
fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                    "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                </span>\n                                            </td>\n                                        "}function L(a,b,d){var e,f="";return f+="\n                                            <td>\n                                                <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ha.noop,fn:ha.program(17,q,b),data:b}),(e||0===e)&&(f+=e),f+=">\n                                                    "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                </span>\n                                            </td>\n                                            <td> </td>\n                                        "}function M(a,b,d,e){var f,g,h,i="";return i+="\n                                        ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ha.noop,fn:ha.programWithDepth(50,N,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h):ia.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h),(f||0===f)&&(i+=f),i+="\n                                        ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ha.noop,fn:ha.programWithDepth(59,T,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h):ia.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h),(f||0===f)&&(i+=f),i+="\n                                    "}function N(a,b,d){var e,f="";return f+="\n                                            ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ha.programWithDepth(57,S,b,d),fn:ha.programWithDepth(51,O,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function O(a,b,d){var e,f="";return f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(52,P,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(52,P,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function P(a,b,d){var e,f="";return f+="\n                                                    <td>\n                                                        ",e=c.if.call(a,a&&a.showAsClosed,{hash:{},inverse:ha.program(55,R,b),fn:ha.programWithDepth(53,Q,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                    </td>\n                                                "}function Q(a,b,c){var d,e="";return e+='\n                                                            <span class="close">\n                                                                '+ga((d=c&&c.content,d=null==d||!1===d?d:d.dealerClosed,typeof d===fa?d.apply(a):d))+"\n                                                            </span>\n                                                        "}function R(a,b){var d,e,f="";return f+="\n                                                            ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                                                        "}function S(a,b,d){var e,f="";return f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(52,P,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(52,P,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function T(a,b,d){var e,f="";return f+="\n                                            ",e=c.if.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),{hash:{},inverse:ha.program(67,Z,b),fn:ha.programWithDepth(60,U,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function U(a,b,d){var e,f="";return f+="\n                                                ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ha.programWithDepth(64,X,b,d),fn:ha.programWithDepth(61,V,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function V(a,b,d){var e,f="";return f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(62,W,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function W(a,b,d){var e,f,g="";return g+="\n                                                        <td>\n                                                            ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"\n                                                        </td>\n                                                        <td>\n                                                            "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                        </td>\n                                                    "}function X(a,b,d){var e,f="";return f+="\n                                                    ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(65,Y,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                "}function Y(a,b,d){var e,f,g="";return g+="\n                                                        <td>\n                                                            "+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===fa?e.apply(a):e))+"\n                                                        </td>\n                                                        <td>\n                                                            ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"\n                                                        </td>\n                                                    "}function Z(a,b){var d,e="";return e+="\n                                                ",d=c.with.call(a,(d=a&&a.openIntervals,null==d||!1===d?d:d[0]),{hash:{},inverse:ha.noop,fn:ha.program(68,$,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                            "}function $(a,b){var d,e,f="";return f+="\n                                                    <td>\n                                                        ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===fa?e.call(a,{hash:{},data:b}):e),f+=ga(d)+"\n                                                    </td>\n                                                    <td> </td>\n                                                "}function _(a,b){var d,e="";return e+='\n        <div class="dealer-contact">\n            <p class="contact-us">\n                ',d=c.each.call(a,a&&a.phones,{hash:{},inverse:ha.noop,fn:ha.programWithDepth(71,aa,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n            </p>\n        </div>\n        "}function aa(a,b,d){var e,f="";return f+="\n                    ",e=c.if.call(a,null==b||!1===b?b:b.first,{hash:{},inverse:ha.noop,fn:ha.programWithDepth(72,ba,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                "}function ba(a,b,d){var e,f,g="";return g+='\n                        <a data-dealer-action="call" href="tel:',(f=c.number)?e=f.call(a,{hash:{},data:b}):(f=a&&a.number,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+'" class="external-phone analytics-dealer-interaction" data-tld55="internal" data-dealer-action="call">\n                            <span class="label">'+ga((e=d&&d.content,e=null==e||!1===e?e:e.dealerServicePhoneNumber,typeof e===fa?e.apply(a):e))+'</span>\n                            <span class="tel">',(f=c.number)?e=f.call(a,{hash:{},data:b}):(f=a&&a.number,e=typeof f===fa?f.call(a,{hash:{},data:b}):f),g+=ga(e)+"</span>\n                        </a>\n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var ca,da,ea="",fa="function",ga=this.escapeExpression,ha=this,ia=c.helperMissing;return ea+='<div class="accordion-group">\n    <h3 class="accordion-header ',ca=c.unless.call(b,b&&b.showTooltip,{hash:{},inverse:ha.noop,fn:ha.program(1,f,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+='">',(da=c.name)?ca=da.call(b,{hash:{},data:e}):(da=b&&b.name,ca=typeof da===fa?da.call(b,{hash:{},data:e}):da),ea+=ga(ca)+"\n        ",ca=c.if.call(b,b&&b.showTooltip,{hash:{},inverse:ha.noop,fn:ha.program(3,g,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+='\n    </h3>\n    <div class="accordion-panel">\n        ',ca=c.if.call(b,b&&b.showLink,{hash:{},inverse:ha.noop,fn:ha.program(5,h,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n\n        ",ca=c.if.call(b,(ca=b&&b.openingHours,null==ca||!1===ca?ca:ca.showOpeningHoursText),{hash:{},inverse:ha.noop,fn:ha.program(8,j,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n\n        ",ca=c.if.call(b,(ca=b&&b.openingHours,null==ca||!1===ca?ca:ca.showRegularOpeningHours),{hash:{},inverse:ha.noop,fn:ha.programWithDepth(10,k,e,b),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n            ",ca=c.if.call(b,(ca=b&&b.openingHours,null==ca||!1===ca?ca:ca.showSpecialOpeningHours),{hash:{},inverse:ha.noop,fn:ha.program(42,H,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n        ",ca=c.if.call(b,b&&b.showPhones,{hash:{},inverse:ha.noop,fn:ha.program(70,_,e),data:e}),(ca||0===ca)&&(ea+=ca),ea+="\n    </div>\n</div>\n"})}),define("c_207_2ServicesAccordionItemView",["underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-servicesAccordionItemView","accordionItem","storageManager"],function(a,b,c,d,e,f){"use strict";return c.ItemView.extend({template:d,events:{"click @ui.analyticsTarget":"onAnalyticsTargetClick"},initialize:function(a){this.options=a,this.CONSTANTS=a.CONSTANTS,this.eventAggregator=a.eventAggregator,this.MODEL_PROPERTIES=this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES,this.initUI(),this.model.initTooltip()},initUI:function(){this.ui={accordion:this.CONSTANTS.VIEW.SELECTORS.ACCORDION,accordionHeader:this.CONSTANTS.VIEW.SELECTORS.ACCORDION_HEADER,accordionPanel:this.CONSTANTS.VIEW.SELECTORS.ACCORDION_PANEL,analyticsTarget:this.options.CONSTANTS.VIEW.SELECTORS.ANALYTICS_TARGET_DEALER_INTERACTION,tooltip:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP}},onRender:function(){this.renderAccordion()},onShow:function(){this.options.tooltip.createToolTip(this.ui.tooltip)},renderAccordion:function(){this.options.accordionItems.push(new e({$contentElement:this.ui.accordionPanel,$headerElement:this.ui.accordionHeader,isOpen:this.accodionItemOnOpen(),onOpen:a.bind(this.onAccordionItemOpen,this),onClose:a.bind(this.onAccordionItemClose,this),isDisabled:!1,transitionToClose:"toggle"}))},accodionItemOnOpen:function(){var a=this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES,b=this.options.model.get(a.OPENING_HOURS),c=this.options.model.get(a.SHOW_EXPAND_ACCORDION),d=this.options.model.get(a.SHOW_EXCLUDE_SERVICE_DETAIL),e=b&&(b.showRegularOpeningHours||b.showSpecialOpeningHours||b.showOpeningHoursText)||this.options.model.get(a.SHOW_PHONES)||this.options.model.get(a.SHOW_LINK);return d?(this.ui.accordionHeader.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.HIDE,!e),this.ui.accordionPanel.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.HIDE,!e)):(this.ui.accordionHeader.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.DISABLE_CONTENT,!e),this.ui.accordionPanel.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.HIDE,!e)),c},itemDisabled:function(){var a=this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES,b=this.options.model.get(a.OPENING_HOURS),c=b&&(b.showRegularOpeningHours||b.showSpecialOpeningHours)||this.options.model.get(a.SHOW_PHONES)||this.options.model.get(a.SHOW_LINK);return this.ui.accordionHeader.toggleClass(this.CONSTANTS.VIEW.CSS_CLASSES.DISABLE_CONTENT,!c),!c},onAccordionItemOpen:function(a){a.settings.$contentElement.show(),this.model.get(this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES.ACCORDION_CLOSE)&&(this.model.set(this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES.ACCORDION_CLOSE,!1),this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.ACCORDION_EXPANSION,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.SERVICES,this.ui.accordionHeader))},onAccordionItemClose:function(a){a.settings.$contentElement.hide(),this.model.set(this.CONSTANTS.MODEL.DEALER_DETAIL.PROPERTIES.ACCORDION_CLOSE,!0)},onAnalyticsTargetClick:function(a){this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.GENERIC_CLICK,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.SERVICES,a.target)}})}),define("c_207_2ServicesAccordionCompositeView",["backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-servicesAccordionCompositeView","c_207_2ServicesAccordionItemView","accordion"],function(a,b,c,d,e){"use strict";return b.CompositeView.extend({template:c,childView:d,childViewContainer:".services-group",initialize:function(a){var b={showTooltip:this.model.get(this.options.CONSTANTS.VIEW.PROPERTIES.DATA).showTooltip};this.options=a,this.TRACKING_CODES=this.options.TRACKING_CODES,this.CONSTANTS=a.CONSTANTS,this.eventAggregator=a.eventAggregator,this.templateHelpers=_.extend(this.options.templateHelpers,b),this.accordionItems=[],this.initUI()},initUI:function(){this.ui={accordion:this.CONSTANTS.VIEW.SELECTORS.ACCORDION}},childViewOptions:function(a){if(a)return{CONSTANTS:this.CONSTANTS,TRACKING_CODES:this.TRACKING_CODES,eventAggregator:this.eventAggregator,templateHelpers:this.templateHelpers,accordionItems:this.accordionItems,tooltip:this.options.tooltip}},onRenderCollection:function(){this.accordion=new e({$container:this.ui.accordion,isScrollOnOpenEnabled:!1,items:this.accordionItems})}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerDetails",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="details">\n</div>\n'})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-general",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='\n            <p class="distance-units">('+M((c=a&&a.data,c=null==c||!1===c?c:c.dealerDistance,typeof c===L?c.apply(a):c))+")</p>\n        "}function g(a,b){var d,e="";return e+="\n            ",d=c.each.call(a,(d=a&&a.data,null==d||!1===d?d:d.salesServiceLabel),{hash:{},inverse:N.noop,fn:N.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function h(a,b){var d,e="";return e+="\n                ",d=c.if.call(a,a&&a.length,{hash:{},inverse:N.noop,fn:N.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function i(a,b){var d,e="";return e+='\n                    <ul class="labels-types-update">\n                        ',d=c.each.call(a,a,{hash:{},inverse:N.noop,fn:N.program(6,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    </ul>\n                "}function j(a,b){var d,e="";return e+="\n                            ",d=c.if.call(a,a&&a.name,{hash:{},inverse:N.noop,fn:N.program(7,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n                        "}function k(a,b){var c,d="";return d+="\n                                <li>"+M((c=a&&a.name,typeof c===L?c.apply(a):c))+"</li>\n                            "}function l(a,b){var d,e="";return e+="\n        ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.showSponsoredAwardDetailView),{hash:{},inverse:N.noop,fn:N.program(10,m,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function m(a,b){var d,e,f,g="";return g+='\n        <div class="sponsored-award-wrapper\n            ',d=c.unless.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(11,n,b),data:b}),(d||0===d)&&(g+=d),g+='">\n            ',e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:N.noop,fn:N.program(14,p,b),data:b},d=e?e.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImageLabel",f):O.call(a,"ifCond",(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImageLabel",f),(d||0===d)&&(g+=d),g+="\n            ",e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:N.noop,fn:N.program(33,B,b),data:b},d=e?e.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImage",f):O.call(a,"ifCond",(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImage",f),(d||0===d)&&(g+=d),g+="\n            ",e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:N.noop,fn:N.program(39,F,b),data:b},d=e?e.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","iconLabel",f):O.call(a,"ifCond",(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","iconLabel",f),(d||0===d)&&(g+=d),g+="\n            </div>\n        "}function n(a,b){var d,e,f,g="";return g+="\n            ",e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:N.noop,fn:N.program(12,o,b),data:b},d=e?e.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImageLabel",f):O.call(a,"ifCond",(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImageLabel",f),(d||0===d)&&(g+=d),g+=" show-icon"}function o(a,b){return"no-image"}function p(a,b){var d,e="";return e+="\n                ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.program(28,y,b),fn:N.program(15,q,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function q(a,b){var d,e="";return e+="\n                    ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.showSponsoredAwardTooltip),{hash:{},inverse:N.program(25,w,b),fn:N.program(16,r,b),data:b}),(d||0===d)&&(e+=d),e+="\n                "}function r(a,b){var d,e="";return e+='\n                        <span class="c_207_tooltip">\n                            <a href="#"\n                                class="has-tooltip"\n                                data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-my="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-at="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-container="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-viewport="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===L?d.apply(a):d))+'"\n                                tabindex="0">\n                                <span class="picture-element" data-alt="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'">\n                                    ',d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.mobileImage),{hash:{},inverse:N.noop,fn:N.program(17,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                    ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.tabletImage),{hash:{},inverse:N.noop,fn:N.program(19,t,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                    ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(21,u,b),data:b}),(d||0===d)&&(e+=d),e+='\n                                    <noscript>\n                                        <img alt="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'" src="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.desktopImage,typeof d===L?d.apply(a):d))+'" />\n                                    </noscript>\n                                </span>\n                                ',d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(23,v,b),data:b}),(d||0===d)&&(e+=d),e+='\n                            </a>\n                            <div class="tooltip-panel" data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'">\n                                <span class="tooltip-heading">'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.title,typeof d===L?d.apply(a):d))+"</span>\n                                <p>"+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.description,typeof d===L?d.apply(a):d))+"</p>\n                            </div>\n                        </span>\n                    "}function s(a,b){var c,d="";return d+='<span data-src="'+M((c=a&&a.data,c=null==c||!1===c?c:c.sponsoredAward,c=null==c||!1===c?c:c.mobileImage,typeof c===L?c.apply(a):c))+'"></span>'}function t(a,b){var c,d="";return d+='<span data-src="'+M((c=a&&a.data,c=null==c||!1===c?c:c.sponsoredAward,c=null==c||!1===c?c:c.tabletImage,typeof c===L?c.apply(a):c))+'" data-media="(min-width: 36.3125em)"></span>'}function u(a,b){var c,d="";return d+='<span data-src="'+M((c=a&&a.data,c=null==c||!1===c?c:c.sponsoredAward,c=null==c||!1===c?c:c.desktopImage,typeof c===L?c.apply(a):c))+'" data-media="(min-width: 62.5em)"></span>'}function v(a,b){var c,d="";return d+='\n                                    <p class="sponsored-award">'+M((c=a&&a.data,c=null==c||!1===c?c:c.sponsoredAward,c=null==c||!1===c?c:c.label,typeof c===L?c.apply(a):c))+"</p>\n                                "}function w(a,b){var d,e="";return e+='\n                        <span class="picture-element" data-alt="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'">\n                            ',d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.mobileImage),{hash:{},inverse:N.noop,fn:N.program(17,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.tabletImage),{hash:{},inverse:N.noop,fn:N.program(19,t,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(21,u,b),data:b}),(d||0===d)&&(e+=d),e+='\n                            <noscript>\n                                <img alt="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'" src="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.desktopImage,typeof d===L?d.apply(a):d))+'" />\n                            </noscript>\n                        </span>\n                        ',d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(26,x,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    "}function x(a,b){var c,d="";return d+='\n                            <p class="sponsored-award">'+M((c=a&&a.data,c=null==c||!1===c?c:c.sponsoredAward,c=null==c||!1===c?c:c.label,typeof c===L?c.apply(a):c))+"</p>\n                        "}function y(a,b){var d,e="";return e+="\n                    ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.showSponsoredAwardTooltip),{hash:{},inverse:N.program(31,A,b),fn:N.program(29,z,b),data:b}),(d||0===d)&&(e+=d),e+="\n                "}function z(a,b){var d,e="";return e+='\n                        <span class="c_207_tooltip">\n                            <a href="#"\n                                class="has-tooltip"\n                                data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-my="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-at="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-container="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-viewport="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===L?d.apply(a):d))+'"\n                                tabindex="0">\n                                ',d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(23,v,b),data:b}),(d||0===d)&&(e+=d),e+='\n                            </a>\n                            <div class="tooltip-panel" data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'">\n                                <span class="tooltip-heading">'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.title,typeof d===L?d.apply(a):d))+"</span>\n                                <p>"+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.description,typeof d===L?d.apply(a):d))+"</p>\n                            </div>\n                        </span>\n                    "}function A(a,b){var d,e="";return e+="\n                        ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(26,x,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    "}function B(a,b){var d,e="";return e+="\n                ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.program(28,y,b),fn:N.program(34,C,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function C(a,b){var d,e="";return e+="\n                    ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.showSponsoredAwardTooltip),{hash:{},inverse:N.program(37,E,b),fn:N.program(35,D,b),data:b}),(d||0===d)&&(e+=d),e+="\n                "}function D(a,b){var d,e="";return e+='\n                        <span class="c_207_tooltip">\n                            <a href="#"\n                                class="has-tooltip"\n                                data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-my="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-at="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-container="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===L?d.apply(a):d))+'"\n                                data-tooltip-viewport="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===L?d.apply(a):d))+'"\n                                tabindex="0">\n                                <span class="picture-element" data-alt="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'">\n                                    ',d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.mobileImage),{hash:{},inverse:N.noop,fn:N.program(17,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                    ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.tabletImage),{hash:{},inverse:N.noop,fn:N.program(19,t,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                    ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(21,u,b),data:b}),(d||0===d)&&(e+=d),e+='\n                                    <noscript>\n                                        <img alt="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'" src="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.desktopImage,typeof d===L?d.apply(a):d))+'" />\n                                    </noscript>\n                                </span>\n                            </a>\n                            <div class="tooltip-panel" data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'">\n                                <span class="tooltip-heading">'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.title,typeof d===L?d.apply(a):d))+"</span>\n                                <p>"+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.description,typeof d===L?d.apply(a):d))+"</p>\n                            </div>\n                        </span>\n                    "}function E(a,b){var d,e="";return e+='\n                        <span class="picture-element" data-alt="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'">\n                            ',d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.mobileImage),{hash:{},inverse:N.noop,fn:N.program(17,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.tabletImage),{hash:{},inverse:N.noop,fn:N.program(19,t,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(21,u,b),data:b}),(d||0===d)&&(e+=d),e+='\n                            <noscript>\n                                <img alt="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'" src="'+M((d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,d=null==d||!1===d?d:d.desktopImage,typeof d===L?d.apply(a):d))+'" />\n                            </noscript>\n                        </span>\n                    '}function F(a,b){var d,e="";return e+="\n                ",d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.sponsoredAward,
null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(40,G,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function G(a,b){var c,d="";return d+='\n                    <p class="sponsored-award">'+M((c=a&&a.data,c=null==c||!1===c?c:c.sponsoredAward,c=null==c||!1===c?c:c.label,typeof c===L?c.apply(a):c))+"</p>\n                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var H,I,J,K="",L="function",M=this.escapeExpression,N=this,O=c.helperMissing;return K+='<div class="dealer-item">\n    <div class="dealer-type"><span class="'+M((H=b&&b.data,H=null==H||!1===H?H:H.markerStyle,typeof H===L?H.apply(b):H))+'">'+M((H=b&&b.data,H=null==H||!1===H?H:H.letter,typeof H===L?H.apply(b):H))+'</span></div>\n    <div class="dealer-info">\n        <h3>'+M((H=b&&b.data,H=null==H||!1===H?H:H.name,typeof H===L?H.apply(b):H))+'</h3>\n        <p class="description">\n            ',H=b&&b.data,H=null==H||!1===H?H:H.formattedAddress,H=typeof H===L?H.apply(b):H,(H||0===H)&&(K+=H),K+="\n        </p>\n        ",H=c.if.call(b,(H=b&&b.data,null==H||!1===H?H:H.dealerDistance),{hash:{},inverse:N.noop,fn:N.program(1,f,e),data:e}),(H||0===H)&&(K+=H),K+="\n        ",H=c.if.call(b,(H=b&&b.data,null==H||!1===H?H:H.salesServiceLabel),{hash:{},inverse:N.noop,fn:N.program(3,g,e),data:e}),(H||0===H)&&(K+=H),K+="\n    </div>\n    ",I=c.ifCond||b&&b.ifCond,J={hash:{},inverse:N.noop,fn:N.program(9,l,e),data:e},H=I?I.call(b,(H=b&&b.data,null==H||!1===H?H:H.sponsoredAward),"&&",(H=b&&b.data,H=null==H||!1===H?H:H.sponsoredAward,null==H||!1===H?H:H.sponsoredAwardRender),J):O.call(b,"ifCond",(H=b&&b.data,null==H||!1===H?H:H.sponsoredAward),"&&",(H=b&&b.data,H=null==H||!1===H?H:H.sponsoredAward,null==H||!1===H?H:H.sponsoredAwardRender),J),(H||0===H)&&(K+=H),K+="\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-backLink",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='\n        <button type="button">'+k((c=a&&a.data,c=null==c||!1===c?c:c.text,typeof c===j?c.apply(a):c))+"</button>\n    "}function g(a,b){var c,d="";return d+='\n        <a href="'+k((c=a&&a.data,c=null==c||!1===c?c:c.link,typeof c===j?c.apply(a):c))+'">'+k((c=a&&a.data,c=null==c||!1===c?c:c.text,typeof c===j?c.apply(a):c))+"</a>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="back-to-results">\n    ',h=c.if.call(b,(h=b&&b.data,null==h||!1===h?h:h.results),{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n</div>"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-preferredDealer",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='\n        <div class="dealers-account-link">\n            <a href="'+j((c=a&&a.data,c=null==c||!1===c?c:c.myAccountButton,c=null==c||!1===c?c:c.path,typeof c===i?c.apply(a):c))+'" data-analytics-location-on-page="'+j((c=a&&a.data,c=null==c||!1===c?c:c.myAccountButton,c=null==c||!1===c?c:c.analyticsLocationOnPage,typeof c===i?c.apply(a):c))+'" class="analytics-generic-click">'+j((c=a&&a.data,c=null==c||!1===c?c:c.myAccountButton,c=null==c||!1===c?c:c.label,typeof c===i?c.apply(a):c))+"</a>\n        </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<div class="preferred-dealer-indicator">\n    <span class="preferred-dealer-icon"></span>\n    <span class="preferred-dealer-text">'+j((g=b&&b.data,g=null==g||!1===g?g:g.indicatorText,typeof g===i?g.apply(b):g))+"</span>\n    ",g=c.if.call(b,(g=b&&b.data,null==g||!1===g?g:g.myAccountButton),{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-setPreferredDealer",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="";return g+='<div class="preferred-dealer-cta">\n    <button type="button" class="set-preferred-dealer-cta">\n        <span class="preferred-dealer-text">'+(0,this.escapeExpression)((f=b&&b.data,f=null==f||!1===f?f:f.setCTAText,"function"==typeof f?f.apply(b):f))+"</span>\n    </button>\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-contact",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n        <p class="contact-us">\n            ',d=c.each.call(a,(d=a&&a.data,null==d||!1===d?d:d.phones),{hash:{},inverse:t.noop,fn:t.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n        </p>\n    "}function g(a,b){var d,e,f="";return f+='\n                <a data-dealer-action="call" href="tel:',(e=c.number)?d=e.call(a,{hash:{},data:b}):(e=a&&a.number,d=typeof e===r?e.call(a,{hash:{},data:b}):e),f+=s(d)+'" class="external-phone analytics-dealer-interaction" data-tld55="internal" data-dealer-action="call">\n                    <span class="label">',(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===r?e.call(a,{hash:{},data:b}):e),f+=s(d)+'</span>\n                    <span class="tel">',(e=c.number)?d=e.call(a,{hash:{},data:b}):(e=a&&a.number,d=typeof e===r?e.call(a,{hash:{},data:b}):e),f+=s(d)+"</span>\n                </a>\n            "}function h(a,b){var d,e="";return e+="\n        ",d=c.if.call(a,a&&a.siteName,{hash:{},inverse:t.noop,fn:t.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function i(a,b){var d,e,f="";return f+='\n            <p class="contact-us">\n                <a href="',(e=c.url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.url,d=typeof e===r?e.call(a,{hash:{},data:b}):e),f+=s(d)+'" class="external-link analytics-dealer-interaction" data-tld55="internal" data-dealer-action="discover dealer" data-site-name="true"\n                   target="',d=c.if.call(a,null==b||!1===b?b:b.index,{hash:{},inverse:t.program(8,k,b),fn:t.program(6,j,b),data:b}),(d||0===d)&&(f+=d),f+='">\n                    ',(e=c.siteName)?d=e.call(a,{hash:{},data:b}):(e=a&&a.siteName,d=typeof e===r?e.call(a,{hash:{},data:b}):e),f+=s(d)+"\n                </a>\n            </p>\n        "}function j(a,b){return"_blank"}function k(a,b){return"_self"}function l(a,b){var d,e="";return e+='\n        <p class="contact-us">\n            <a href="mailto:'+s((d=a&&a.data,d=null==d||!1===d?d:d.email,d=null==d||!1===d?d:d.value,typeof d===r?d.apply(a):d))+'" class="external-mail analytics-dealer-interaction" data-tld55="internal" data-dealer-action="email">\n                ',d=c.if.call(a,(d=a&&a.data,d=null==d||!1===d?d:d.email,null==d||!1===d?d:d.label),{hash:{},inverse:t.program(13,n,b),fn:t.program(11,m,b),data:b}),(d||0===d)&&(e+=d),e+="\n            </a>\n        </p>\n    "}function m(a,b){var c,d="";return d+=" "+s((c=a&&a.data,c=null==c||!1===c?c:c.email,c=null==c||!1===c?c:c.label,typeof c===r?c.apply(a):c))+" "}function n(a,b){var c,d="";return d+=" "+s((c=a&&a.data,c=null==c||!1===c?c:c.email,c=null==c||!1===c?c:c.value,typeof c===r?c.apply(a):c))+" "}function o(a,b){var c,d="";return d+='\n        <p class="contact-us">\n            <a href="'+s((c=a&&a.data,c=null==c||!1===c?c:c.getDirections,c=null==c||!1===c?c:c.url,typeof c===r?c.apply(a):c))+'"\n               class="get-directions analytics-dealer-interaction"\n               data-tld55="external"\n               data-dealer-action="get directions"\n               target="_blank">\n                '+s((c=a&&a.data,c=null==c||!1===c?c:c.getDirections,c=null==c||!1===c?c:c.label,typeof c===r?c.apply(a):c))+"\n            </a>\n        </p>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var p,q="",r="function",s=this.escapeExpression,t=this;return q+='<div class="dealer-contact">\n    ',p=c.if.call(b,(p=b&&b.data,null==p||!1===p?p:p.phones),{hash:{},inverse:t.noop,fn:t.program(1,f,e),data:e}),(p||0===p)&&(q+=p),q+="\n\n    ",p=c.each.call(b,(p=b&&b.data,null==p||!1===p?p:p.websites),{hash:{},inverse:t.noop,fn:t.program(4,h,e),data:e}),(p||0===p)&&(q+=p),q+="\n\n    ",p=c.if.call(b,(p=b&&b.data,p=null==p||!1===p?p:p.email,null==p||!1===p?p:p.value),{hash:{},inverse:t.noop,fn:t.program(10,l,e),data:e}),(p||0===p)&&(q+=p),q+="\n\n    ",p=c.if.call(b,(p=b&&b.data,null==p||!1===p?p:p.getDirections),{hash:{},inverse:t.noop,fn:t.program(15,o,e),data:e}),(p||0===p)&&(q+=p),q+="\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-primary-ctas",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n    <div class="dealer-cta-book">\n        <ul>\n          ',d=c.each.call(a,(d=a&&a.data,null==d||!1===d?d:d.ctas),{hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n        </ul>\n    </div>\n"}function g(a,b){var d,e,f="";return f+='\n             <li class="primary">\n                <a class="button btn-alpha-right" href="',(e=c.link)?d=e.call(a,{hash:{},data:b}):(e=a&&a.link,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'" data-type-cta="',(e=c.type)?d=e.call(a,{hash:{},data:b}):(e=a&&a.type,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'"\n                   ',d=c.if.call(a,a&&a.openNewTab,{hash:{},inverse:m.noop,fn:m.program(3,h,b),data:b}),(d||0===d)&&(f+=d),f+=">",(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</a>\n             </li>\n          "}function h(a,b){return'target="_blank"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return i=c.if.call(b,(i=b&&b.data,null==i||!1===i?i:i.ctas),{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+="\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-secondary-ctas",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n            <li>\n                <a class="button btn-alpha-right" href="',(e=c.link)?d=e.call(a,{hash:{},data:b}):(e=a&&a.link,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'" data-type-cta="',(e=c.type)?d=e.call(a,{hash:{},data:b}):(e=a&&a.type,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'" ',d=c.if.call(a,a&&a.openNewTab,{hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+=">",(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</a>\n            </li>\n        "}function g(a,b){return'target="_blank"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div class="dealer-cta-book ',(i=c.borderClass)?h=i.call(b,{hash:{},data:e}):(i=b&&b.borderClass,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'">\n    <ul>\n        ',h=c.each.call(b,(h=b&&b.data,null==h||!1===h?h:h.ctas),{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+="\n    </ul>\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-openingHours",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return" hidden"}function g(a,b){var d,e="";return e+='\n        <div class="dealer-regular-hours">\n            <h3>'+ba((d=a&&a.content,d=null==d||!1===d?d:d.dealerOpeningHours,typeof d===aa?d.apply(a):d))+"</h3>\n            ",d=c.if.call(a,(d=a&&a.data,null==d||!1===d?d:d.regularOpeningHours),{hash:{},inverse:ca.program(35,D,b),fn:ca.programWithDepth(4,h,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n        </div>\n    "}function h(a,b,d){var e,f,g,h="";return h+='\n                <table>\n                    <tbody>\n                        <tr class="opening-label">\n                            ',f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ca.noop,fn:ca.programWithDepth(5,i,b,a),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):da.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                        </tr>\n                        ",e=c.each.call(a,(e=a&&a.data,null==e||!1===e?e:e.regularOpeningHours),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(7,j,b,a),data:b}),(e||0===e)&&(h+=e),h+="\n                    </tbody>\n                </table>\n            "}function i(a,b,c){var d,e="";return e+="\n                                <td> </td>\n                                <td>"+ba((d=c&&c.content,d=null==d||!1===d?d:d.morningHours,typeof d===aa?d.apply(a):d))+"</td>\n                                <td>"+ba((d=c&&c.content,d=null==d||!1===d?d:d.afternoonHours,typeof d===aa?d.apply(a):d))+"</td>\n                            "}function j(a,b,d){var e,f,g="";return g+='\n                            <tr class="opening-day">\n                                <td class="weekday">',(f=c.weekDay)?e=f.call(a,{hash:{},data:b}):(f=a&&a.weekDay,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+"</td>\n                                ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ca.programWithDepth(14,o,b,a,d),fn:ca.programWithDepth(8,k,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n                            </tr>\n                        "}function k(a,b,d){var e,f,g,h="";return h+="\n                                    ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ca.programWithDepth(12,n,b,d),fn:ca.programWithDepth(9,l,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):da.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                "}function l(a,b,d){var e,f="";return f+="\n                                        <td>\n                                            <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ca.noop,fn:ca.program(10,m,b),data:b}),(e||0===e)&&(f+=e),f+=" >\n                                                    "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                            </span>\n                                        </td>\n                                        <td>\n                                            <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ca.noop,fn:ca.program(10,m,b),data:b}),(e||0===e)&&(f+=e),f+=" >\n                                                    "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                            </span>\n                                        </td>\n                                    "}function m(a,b){return'class="close"'}function n(a,b,d){var e,f="";return f+="\n                                        <td>\n                                            <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ca.noop,fn:ca.program(10,m,b),data:b}),(e||0===e)&&(f+=e),f+=" >\n                                                    "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                            </span>\n                                        </td>\n                                        <td> </td>\n                                    "}function o(a,b,d,e){var f,g,h,i="";return i+="\n                                    ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ca.noop,fn:ca.programWithDepth(15,p,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h):da.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h),(f||0===f)&&(i+=f),i+="\n                                    ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ca.noop,fn:ca.programWithDepth(24,v,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h):da.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h),(f||0===f)&&(i+=f),i+="\n                                "}function p(a,b,d){var e,f="";return f+="\n                                        ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ca.programWithDepth(22,u,b,d),fn:ca.programWithDepth(16,q,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                    "}function q(a,b,d){var e,f="";return f+="\n                                            ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(17,r,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(17,r,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function r(a,b,d){var e,f="";return f+="\n                                                <td>\n                                                    ",e=c.if.call(a,a&&a.showAsClosed,{hash:{},inverse:ca.program(20,t,b),fn:ca.programWithDepth(18,s,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                                </td>\n                                            "}function s(a,b,c){var d,e="";return e+='\n                                                        <span class="close">\n                                                            '+ba((d=c&&c.content,d=null==d||!1===d?d:d.dealerClosed,typeof d===aa?d.apply(a):d))+"\n                                                        </span>\n                                                    "}function t(a,b){var d,e,f="";return f+="\n                                                        ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===aa?e.call(a,{hash:{},data:b}):e),f+=ba(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===aa?e.call(a,{hash:{},data:b}):e),f+=ba(d)+"\n                                                    "}function u(a,b,d){var e,f="";return f+="\n                                            ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(17,r,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(17,r,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function v(a,b,d){var e,f,g,h="";return h+="\n                                        ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ca.program(32,B,b),fn:ca.programWithDepth(25,w,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):da.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                    "}function w(a,b,d){var e,f="";return f+="\n                                            ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ca.programWithDepth(29,z,b,d),fn:ca.programWithDepth(26,x,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function x(a,b,d){var e,f="";return f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(27,y,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function y(a,b,d){var e,f,g="";return g+="\n                                                    <td>\n                                                        ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+"\n                                                    </td>\n                                                    <td>\n                                                        "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                                    </td>\n                                                "}function z(a,b,d){var e,f="";return f+="\n                                                ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(30,A,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            "}function A(a,b,d){var e,f,g="";return g+="\n                                                    <td>\n                                                        "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                                    </td>\n                                                      <td>\n                                                        ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+"\n                                                    </td>\n                                                "}function B(a,b){var d,e="";return e+="\n                                            ",d=c.with.call(a,(d=a&&a.openIntervals,null==d||!1===d?d:d[0]),{hash:{},inverse:ca.noop,fn:ca.program(33,C,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                        "}function C(a,b){var d,e,f="";return f+="\n                                                <td>\n                                                    ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===aa?e.call(a,{hash:{},data:b}):e),f+=ba(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===aa?e.call(a,{hash:{},data:b}):e),f+=ba(d)+"\n                                                </td>\n                                                <td> </td>\n                                            "}function D(a,b){var c,d="";return d+='\n                <p class="dealer-hours-feed">'+ba((c=a&&a.data,c=null==c||!1===c?c:c.openingHoursText,typeof c===aa?c.apply(a):c))+"</p>\n            "}function E(a,b){var d,e="";return e+='\n        <div class="dealer-special-hours">\n            <h3>'+ba((d=a&&a.content,d=null==d||!1===d?d:d.specialOpeningHours,typeof d===aa?d.apply(a):d))+"</h3>\n            <table>\n                <tbody>\n                    ",d=c.each.call(a,(d=a&&a.data,null==d||!1===d?d:d.specialOpeningHours),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(38,F,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n                </tbody>\n            </table>\n        </div>\n    "}function F(a,b,d){var e,f,g="";return g+='\n                        <tr class="opening-day">\n                            <td class="weekday">',(f=c.weekDay)?e=f.call(a,{hash:{},data:b}):(f=a&&a.weekDay,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+"</td>\n                            ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ca.programWithDepth(44,J,b,a,d),fn:ca.programWithDepth(39,G,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n                        </tr>\n                    "}function G(a,b,d){var e,f,g,h="";return h+="\n                                ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ca.programWithDepth(42,I,b,d),fn:ca.programWithDepth(40,H,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):da.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                            "}function H(a,b,d){var e,f="";return f+="\n                                    <td>\n                                        <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ca.noop,fn:ca.program(10,m,b),data:b}),(e||0===e)&&(f+=e),f+=" >\n                                                "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                        </span>\n                                    </td>\n                                    <td>\n                                        <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ca.noop,fn:ca.program(10,m,b),data:b}),(e||0===e)&&(f+=e),f+=" >\n                                                "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                        </span>\n                                    </td>\n                                "}function I(a,b,d){var e,f="";return f+="\n                                    <td>\n                                        <span ",e=c.if.call(a,a&&a.closed,{hash:{},inverse:ca.noop,fn:ca.program(10,m,b),data:b}),(e||0===e)&&(f+=e),f+=" >\n                                                "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                        </span>\n                                    </td>\n                                    <td> </td>\n                                "}function J(a,b,d,e){var f,g,h,i="";return i+="\n                                ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ca.noop,fn:ca.programWithDepth(45,K,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h):da.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"==",2,h),(f||0===f)&&(i+=f),i+="\n                                ",g=c.ifCond||d&&d.ifCond,h={hash:{},inverse:ca.noop,fn:ca.programWithDepth(54,Q,b,e),data:b},f=g?g.call(a,(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h):da.call(a,"ifCond",(f=d&&d.openIntervals,null==f||!1===f?f:f.length),"<",2,h),(f||0===f)&&(i+=f),i+="\n                            "}function K(a,b,d){var e,f="";return f+="\n                                    ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ca.programWithDepth(52,P,b,d),fn:ca.programWithDepth(46,L,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                "}function L(a,b,d){var e,f="";return f+="\n                                        ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(47,M,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(47,M,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                    "}function M(a,b,d){var e,f="";return f+="\n                                            <td>\n                                                ",e=c.if.call(a,a&&a.showAsClosed,{hash:{},inverse:ca.program(50,O,b),fn:ca.programWithDepth(48,N,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                            </td>\n                                        "}function N(a,b,c){var d,e="";return e+='\n                                                    <span class="close">\n                                                        '+ba((d=c&&c.content,d=null==d||!1===d?d:d.dealerClosed,typeof d===aa?d.apply(a):d))+"\n                                                    </span>\n                                                "}function O(a,b){var d,e,f="";return f+="\n                                                    ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===aa?e.call(a,{hash:{},data:b}):e),f+=ba(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===aa?e.call(a,{hash:{},data:b}):e),f+=ba(d)+"\n                                                "}function P(a,b,d){var e,f="";return f+="\n                                        ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[1]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(47,M,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(47,M,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                    "}function Q(a,b,d){var e,f,g,h="";return h+="\n                                    ",f=c.ifCond||d&&d.ifCond,g={hash:{},inverse:ca.program(62,W,b),fn:ca.programWithDepth(55,R,b,d),data:b},e=f?f.call(a,(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g):da.call(a,"ifCond",(e=d&&d.content,null==e||!1===e?e:e.morningHours),"&&",(e=d&&d.content,null==e||!1===e?e:e.afternoonHours),g),(e||0===e)&&(h+=e),h+="\n                                "}function R(a,b,d){var e,f="";return f+="\n                                        ",e=c.if.call(a,(e=a&&a.openIntervals,e=null==e||!1===e?e:e[0],null==e||!1===e?e:e.morning),{hash:{},inverse:ca.programWithDepth(59,U,b,d),fn:ca.programWithDepth(56,S,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                    "}function S(a,b,d){var e,f="";return f+="\n                                            ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(57,T,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function T(a,b,d){var e,f,g="";return g+="\n                                                <td>\n                                                    ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+"\n                                                </td>\n                                                <td>\n                                                    "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                                </td>\n                                            "}function U(a,b,d){var e,f="";return f+="\n                                            ",e=c.with.call(a,(e=a&&a.openIntervals,null==e||!1===e?e:e[0]),{hash:{},inverse:ca.noop,fn:ca.programWithDepth(60,V,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                                        "}function V(a,b,d){var e,f,g="";return g+="\n                                                <td>\n                                                    "+ba((e=d&&d.content,e=null==e||!1===e?e:e.dealerClosed,typeof e===aa?e.apply(a):e))+"\n                                                </td>\n                                                <td>\n                                                    ",(f=c.openFrom)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openFrom,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+" - ",(f=c.openUntil)?e=f.call(a,{hash:{},data:b}):(f=a&&a.openUntil,e=typeof f===aa?f.call(a,{hash:{},data:b}):f),g+=ba(e)+"\n                                                </td>\n                                            "}function W(a,b){var d,e="";return e+="\n                                        ",d=c.with.call(a,(d=a&&a.openIntervals,null==d||!1===d?d:d[0]),{hash:{},inverse:ca.noop,fn:ca.program(63,X,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                    "}
function X(a,b){var d,e,f="";return f+="\n                                            <td>\n                                                ",(e=c.openFrom)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openFrom,d=typeof e===aa?e.call(a,{hash:{},data:b}):e),f+=ba(d)+" - ",(e=c.openUntil)?d=e.call(a,{hash:{},data:b}):(e=a&&a.openUntil,d=typeof e===aa?e.call(a,{hash:{},data:b}):e),f+=ba(d)+"\n                                            </td>\n                                            <td> </td>\n                                        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var Y,Z,$,_="",aa="function",ba=this.escapeExpression,ca=this,da=c.helperMissing;return _+='<div class="dealer-hours',Y=c.if.call(b,(Y=b&&b.data,null==Y||!1===Y?Y:Y.hidden),{hash:{},inverse:ca.noop,fn:ca.program(1,f,e),data:e}),(Y||0===Y)&&(_+=Y),_+='">\n    ',Z=c.ifCond||b&&b.ifCond,$={hash:{},inverse:ca.noop,fn:ca.program(3,g,e),data:e},Y=Z?Z.call(b,(Y=b&&b.data,null==Y||!1===Y?Y:Y.regularOpeningHours),"||",(Y=b&&b.data,null==Y||!1===Y?Y:Y.openingHoursText),$):da.call(b,"ifCond",(Y=b&&b.data,null==Y||!1===Y?Y:Y.regularOpeningHours),"||",(Y=b&&b.data,null==Y||!1===Y?Y:Y.openingHoursText),$),(Y||0===Y)&&(_+=Y),_+="\n    ",Y=c.if.call(b,(Y=b&&b.data,null==Y||!1===Y?Y:Y.specialOpeningHours),{hash:{},inverse:ca.noop,fn:ca.program(37,E,e),data:e}),(Y||0===Y)&&(_+=Y),_+="\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-servicesList",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b,d){var e,f,h="";return h+="\n        <h3>",(f=c.label)?e=f.call(a,{hash:{},data:b}):(f=a&&a.label,e=typeof f===n?f.call(a,{hash:{},data:b}):f),h+=o(e)+'</h3>\n        <ul class="services-list-tooltip-related">\n            ',e=c.each.call(a,(e=a&&a.data,null==e||!1===e?e:e.services),{hash:{},inverse:p.noop,fn:p.programWithDepth(2,g,b,a,d),data:b}),(e||0===e)&&(h+=e),h+="\n        </ul>\n    "}function g(a,b,d,e){var f,g="";return g+="\n                <li>\n                ",f=c.if.call(a,a&&a.link,{hash:{},inverse:p.program(6,j,b),fn:p.programWithDepth(3,h,b,d),data:b}),(f||0===f)&&(g+=f),g+="\n                ",f=c.if.call(a,(f=e&&e.data,null==f||!1===f?f:f.showTooltip),{hash:{},inverse:p.noop,fn:p.program(8,k,b),data:b}),(f||0===f)&&(g+=f),g+="\n                </li>\n            "}function h(a,b,d){var e,f,g="";return g+='\n                    <a class="service-item analytics-generic-click" data-analytics-location-on-page="'+o((e=d&&d.analyticsLocationOnPage,typeof e===n?e.apply(a):e))+'" href="',(f=c.link)?e=f.call(a,{hash:{},data:b}):(f=a&&a.link,e=typeof f===n?f.call(a,{hash:{},data:b}):f),g+=o(e)+'" ',e=c.if.call(a,a&&a.openNewTab,{hash:{},inverse:p.noop,fn:p.program(4,i,b),data:b}),(e||0===e)&&(g+=e),g+=">",(f=c.name)?e=f.call(a,{hash:{},data:b}):(f=a&&a.name,e=typeof f===n?f.call(a,{hash:{},data:b}):f),g+=o(e)+"</a>\n                "}function i(a,b){return'target="_blank"'}function j(a,b){var d,e,f="";return f+="\n                    ",(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"\n                "}function k(a,b){var d,e,f="";return f+='\n                    <span class="c_207_tooltip">\n                        <a  href="#"\n                            class="has-tooltip"\n                            data-tooltip-id="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===n?d.apply(a):d))+'"\n                            data-tooltip-my="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===n?d.apply(a):d))+'"\n                            data-tooltip-at="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===n?d.apply(a):d))+'"\n                            data-tooltip-container="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===n?d.apply(a):d))+'"\n                            data-tooltip-viewport="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===n?d.apply(a):d))+'"\n                            tabindex="0">\n                            <span class="hidden">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'</span>\n                        </a>\n                        <div class="tooltip-panel" data-tooltip-id="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===n?d.apply(a):d))+'">\n                            <span class="tooltip-heading">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"</span>\n                            <p>",(e=c.description)?d=e.call(a,{hash:{},data:b}):(e=a&&a.description,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"</p>\n                        </div>\n                    </span>\n                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m="",n="function",o=this.escapeExpression,p=this;return m+='<div class="dealer-services services-list list-view">\n    ',l=c.if.call(b,(l=b&&b.data,null==l||!1===l?l:l.services),{hash:{},inverse:p.noop,fn:p.programWithDepth(1,f,e,b),data:e}),(l||0===l)&&(m+=l),m+="\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-salesList",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b,d){var e,f,h="";return h+="\n        <h3>",(f=c.label)?e=f.call(a,{hash:{},data:b}):(f=a&&a.label,e=typeof f===n?f.call(a,{hash:{},data:b}):f),h+=o(e)+'</h3>\n        <ul class="sales-list-tooltip-related">\n            ',e=c.each.call(a,(e=a&&a.data,null==e||!1===e?e:e.sales),{hash:{},inverse:p.noop,fn:p.programWithDepth(2,g,b,a,d),data:b}),(e||0===e)&&(h+=e),h+="\n        </ul>\n    "}function g(a,b,d,e){var f,g="";return g+="\n                <li>\n                ",f=c.if.call(a,a&&a.link,{hash:{},inverse:p.program(6,j,b),fn:p.programWithDepth(3,h,b,d),data:b}),(f||0===f)&&(g+=f),g+="\n                ",f=c.if.call(a,(f=e&&e.data,null==f||!1===f?f:f.showTooltip),{hash:{},inverse:p.noop,fn:p.program(8,k,b),data:b}),(f||0===f)&&(g+=f),g+="\n                </li>\n            "}function h(a,b,d){var e,f,g="";return g+='\n                    <a class="service-item analytics-generic-click" data-analytics-location-on-page="'+o((e=d&&d.analyticsLocationOnPage,typeof e===n?e.apply(a):e))+'" href="',(f=c.link)?e=f.call(a,{hash:{},data:b}):(f=a&&a.link,e=typeof f===n?f.call(a,{hash:{},data:b}):f),g+=o(e)+'" ',e=c.if.call(a,a&&a.openNewTab,{hash:{},inverse:p.noop,fn:p.program(4,i,b),data:b}),(e||0===e)&&(g+=e),g+=">",(f=c.name)?e=f.call(a,{hash:{},data:b}):(f=a&&a.name,e=typeof f===n?f.call(a,{hash:{},data:b}):f),g+=o(e)+"</a>\n                "}function i(a,b){return'target="_blank"'}function j(a,b){var d,e,f="";return f+="\n                    ",(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"\n                "}function k(a,b){var d,e,f="";return f+='\n                    <span class="c_207_tooltip">\n                        <a  href="#"\n                            class="has-tooltip"\n                            data-tooltip-id="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===n?d.apply(a):d))+'"\n                            data-tooltip-my="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===n?d.apply(a):d))+'"\n                            data-tooltip-at="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===n?d.apply(a):d))+'"\n                            data-tooltip-container="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===n?d.apply(a):d))+'"\n                            data-tooltip-viewport="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===n?d.apply(a):d))+'"\n                            tabindex="0">\n                            <span class="hidden">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'</span>\n                        </a>\n                        <div class="tooltip-panel" data-tooltip-id="'+o((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===n?d.apply(a):d))+'">\n                            <span class="tooltip-heading">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"</span>\n                            <p>",(e=c.description)?d=e.call(a,{hash:{},data:b}):(e=a&&a.description,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"</p>\n                        </div>\n                    </span>\n                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m="",n="function",o=this.escapeExpression,p=this;return m+='<div class="dealer-services sales-list list-view">\n    ',l=c.if.call(b,(l=b&&b.data,null==l||!1===l?l:l.sales),{hash:{},inverse:p.noop,fn:p.programWithDepth(1,f,e,b),data:e}),(l||0===l)&&(m+=l),m+="\n</div>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-holidayCalender",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <div class="holiday-calender">\n        <a data-analytics-location-on-page="',(e=c.analyticsLocationOnPage)?d=e.call(a,{hash:{},data:b}):(e=a&&a.analyticsLocationOnPage,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'" href='+l((d=a&&a.data,d=null==d||!1===d?d:d.openingHoursUrl,typeof d===k?d.apply(a):d))+' class= "analytics-generic-click" target="_blank">',(e=c.holidayCalenderLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.holidayCalenderLabel,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</a>\n    </div>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k="function",l=this.escapeExpression,m=this,n=c.helperMissing;return h=c.ifCond||b&&b.ifCond,i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},g=h?h.call(b,(g=b&&b.data,null==g||!1===g?g:g.openingHoursUrl),"&&",b&&b.holidayCalenderLabel,i):n.call(b,"ifCond",(g=b&&b.data,null==g||!1===g?g:g.openingHoursUrl),"&&",b&&b.holidayCalenderLabel,i),(g||0===g)&&(j+=g),j+="\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-awards",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<div class="dealer-awards">\n    <h3>',(g=c.label)?f=g.call(b,{hash:{},data:e}):(g=b&&b.label,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h+=i(f)+'</h3>\n    <ul class="award-items"></ul>\n</div>\n'})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-spokenLanguages",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n        <p>\n            <span>",d=c.each.call(a,(d=a&&a.data,null==d||!1===d?d:d.spokenLanguages),{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="</span>\n        </p>\n    "}function g(a,b){var d,e,f="";return d=c.unless.call(a,null==b||!1===b?b:b.first,{hash:{},inverse:l.noop,fn:l.program(3,h,b),data:b}),(d||0===d)&&(f+=d),(e=c.language)?d=e.call(a,{hash:{},data:b}):(e=a&&a.language,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)}function h(a,b){return", "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l=this,m="function",n=this.escapeExpression;return k+='<div class="dealer-spoken-languages">\n    <h3>',(j=c.label)?i=j.call(b,{hash:{},data:e}):(j=b&&b.label,i=typeof j===m?j.call(b,{hash:{},data:e}):j),k+=n(i)+"</h3>\n    ",i=c.if.call(b,(i=b&&b.data,null==i||!1===i?i:i.spokenLanguages),{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+="\n</div>\n"})}),define("c_207_DealerDetailsCollection",["underscore","backbone","c_207_2DealerDetailsModel"],function(a,b,c){"use strict";return b.Collection.extend({model:c,initialize:function(a,b){this.options=b,this.CONSTANTS=this.options.CONSTANTS,this.eventAggregator=this.options.eventAggregator,this.content=this.options.content}})}),define("c_207_2DealerDetailsView",["jquery","backbone","marionette","handlebars","handlebarsHelpersLogic","c_207_2CtaDealerDetailsView","c_207_2SetPreferredDealerCtaView","c_207_2BackLinkView","c_207_2AwardsDealerDetailsView","c_207_2RatingsDealerDetailsView","c_207_2SalesAccordionCompositeView","c_207_2ServicesAccordionCompositeView","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerDetails","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-general","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-backLink","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-preferredDealer","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-setPreferredDealer","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-contact","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-primary-ctas","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-secondary-ctas","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-openingHours","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-servicesList","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-salesList","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-holidayCalender","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-salesAccordionCompositeView","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-servicesAccordionCompositeView","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-awards","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-spokenLanguages","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-details-ratings","c_207_2GenericDealerDetailsView","c_207_DealerDetailsCollection"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){"use strict";return b.Marionette.CompositeView.extend({childView:D,childViewContainer:".details",template:m,className:"dealer-details",initialize:function(a){this.options=a,this.DEALER_PROPERTIES=this.options.CONSTANTS.APPLICATION.PROPERTIES.DEALER,this.DEALER_DETAIL=this.options.CONSTANTS.MODEL.DEALER_DETAIL,this.eventAggregator=this.options.eventAggregator,this.templateHelpers=this.options.templateHelpers},childViewOptions:function(a){var c=a.get(this.DEALER_DETAIL.PROPERTIES.TYPE),d={window:this.options.window,CONSTANTS:this.options.CONSTANTS,eventAggregator:this.options.eventAggregator,templateHelpers:this.templateHelpers,TRACKING_CODES:this.options.TRACKING_CODES,dealerModel:this.model,tooltip:this.options.tooltip};switch(d.templateHelpers.borderClass="",c){case this.DEALER_PROPERTIES.GENERAL_AWARDS_TYPE:d.collection=new b.Collection(a.get(this.DEALER_DETAIL.PROPERTIES.DATA).awards);break;case this.DEALER_PROPERTIES.GENERAL_SALES_TYPE:var e=_.each(a.get(this.DEALER_DETAIL.PROPERTIES.DATA).sales,function(a){delete a.id});d.collection=new E(e,{CONSTANTS:this.options.CONSTANTS,eventAggregator:this.options.eventAggregator,tooltip:this.options.tooltip});break;case this.DEALER_PROPERTIES.GENERAL_SERVICES_TYPE:var f=_.each(a.get(this.DEALER_DETAIL.PROPERTIES.DATA).services,function(a){delete a.id});d.collection=new E(f,{CONSTANTS:this.options.CONSTANTS,eventAggregator:this.options.eventAggregator,tooltip:this.options.tooltip});break;case this.DEALER_PROPERTIES.GENERAL_SECONDARY_CTAS_TYPE:d.templateHelpers.borderClass=this.getBorderClass(a)}return d},getBorderClass:function(a){var b=a.collection.indexOf(a),c=a.collection.at(b-1);if(c&&c.get(this.DEALER_DETAIL.PROPERTIES.TYPE)===this.DEALER_PROPERTIES.GENERAL_PRIMARY_CTA_TYPE)return this.options.CONSTANTS.VIEW.CSS_CLASSES.NEXT_SIBLING_RELATED},getChildView:function(a){var b,c,d,e,f=a.get(this.DEALER_PROPERTIES.TYPE),g=this.DEALER_DETAIL.PROPERTIES.GET_SERVICES,h=this.DEALER_DETAIL.PROPERTIES.GET_SALES,i=a.get(this.DEALER_DETAIL.PROPERTIES.SHOW_PHONES),j=a.get(this.DEALER_DETAIL.PROPERTIES.SHOW_STRUCTURED_OPENING_HOURS),k=a.get(this.DEALER_DETAIL.PROPERTIES.SHOW_OPENING_HOURS_TEXT);if(f===h&&(j||i||k)&&(d=!0),f===g&&(j||i||k)&&(c=!0),!f)throw new Error("type is a mandatory value");return e=this.getChildViewConstructor(f,c,d),b=this.getChildViewTemplate(f,c,d),e&&b&&(e=e.extend({template:b})),e},getChildViewConstructor:function(a,b,c){var d;switch(a){case this.DEALER_PROPERTIES.GENERAL_PRIMARY_CTA_TYPE:case this.DEALER_PROPERTIES.GENERAL_SECONDARY_CTAS_TYPE:d=f;break;case this.DEALER_PROPERTIES.GENERAL_AWARDS_TYPE:d=i;break;case this.DEALER_PROPERTIES.GENERAL_BACK_LINK:d=h;break;case this.DEALER_PROPERTIES.GENERAL_AVERAGE_RATINGS_TYPE:d=j;break;case this.DEALER_PROPERTIES.GENERAL_SALES_TYPE:d=c?k:D;break;case this.DEALER_PROPERTIES.GENERAL_HOLIDAY_CALENDER:d=D;break;case this.DEALER_PROPERTIES.GENERAL_SERVICES_TYPE:d=!0===b?l:D;break;case this.DEALER_PROPERTIES.GENERAL_SET_PREFERRED_DEALER_CTA:d=g;break;case this.DEALER_PROPERTIES.GENERAL_DETAILS_TYPE:case this.DEALER_PROPERTIES.GENERAL_PREFERRED_DEALER:case this.DEALER_PROPERTIES.GENERAL_CONTACT_TYPE:case this.DEALER_PROPERTIES.GENERAL_OPENING_HOURS_TYPE:case this.DEALER_PROPERTIES.GENERAL_SPOKEN_LANGUAGES_TYPE:d=D}return d},getChildViewTemplate:function(a,b,c){var d;switch(a){case this.DEALER_PROPERTIES.GENERAL_PRIMARY_CTA_TYPE:d=s;break;case this.DEALER_PROPERTIES.GENERAL_SECONDARY_CTAS_TYPE:d=t;break;case this.DEALER_PROPERTIES.GENERAL_DETAILS_TYPE:d=n;break;case this.DEALER_PROPERTIES.GENERAL_BACK_LINK:d=o;break;case this.DEALER_PROPERTIES.GENERAL_PREFERRED_DEALER:d=p;break;case this.DEALER_PROPERTIES.GENERAL_SET_PREFERRED_DEALER_CTA:d=q;break;case this.DEALER_PROPERTIES.GENERAL_CONTACT_TYPE:d=r;break;case this.DEALER_PROPERTIES.GENERAL_OPENING_HOURS_TYPE:d=u;break;case this.DEALER_PROPERTIES.GENERAL_SALES_TYPE:d=c?y:w;break;case this.DEALER_PROPERTIES.GENERAL_HOLIDAY_CALENDER:d=x;break;case this.DEALER_PROPERTIES.GENERAL_SERVICES_TYPE:d=!0===b?z:v;break;case this.DEALER_PROPERTIES.GENERAL_AWARDS_TYPE:d=A;break;case this.DEALER_PROPERTIES.GENERAL_SPOKEN_LANGUAGES_TYPE:d=B;break;case this.DEALER_PROPERTIES.GENERAL_AVERAGE_RATINGS_TYPE:d=C}return d}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerItem",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='\n        <p class="dealer-list-phone">\n            <a class="analytics-dealer-interaction" href="tel:'+M((c=a&&a.contact,c=null==c||!1===c?c:c.phoneNoSpace,typeof c===L?c.apply(a):c))+'" data-dealer-action="call">'+M((c=a&&a.contact,c=null==c||!1===c?c:c.phone,typeof c===L?c.apply(a):c))+"</a>\n        </p>\n\t"}function g(a,b){return" hidden"}function h(a,b){var d,e="";return e+="\n            ",d=c.each.call(a,a&&a.labels,{hash:{},inverse:N.noop,fn:N.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function i(a,b){var d,e="";return e+="\n                ",d=c.if.call(a,a&&a.length,{hash:{},inverse:N.noop,fn:N.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function j(a,b){var d,e="";return e+='\n                    <ul class="labels-types-update">\n                        ',d=c.each.call(a,a,{hash:{},inverse:N.noop,fn:N.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    </ul>\n                "}function k(a,b){var c="";return c+="\n                            <li>"+M(typeof a===L?a.apply(a):a)+"</li>\n                        "}function l(a,b){var d,e,f,g="";return g+='\n    <div class="sponsored-award-wrapper',d=c.unless.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(11,m,b),data:b}),(d||0===d)&&(g+=d),g+='">\n    ',e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:N.noop,fn:N.program(14,o,b),data:b},d=e?e.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImageLabel",f):O.call(a,"ifCond",(d=a&&a.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImageLabel",f),(d||0===d)&&(g+=d),g+="\n    ",e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:N.noop,fn:N.program(33,A,b),data:b},d=e?e.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImage",f):O.call(a,"ifCond",(d=a&&a.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImage",f),(d||0===d)&&(g+=d),g+="\n    ",e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:N.noop,fn:N.program(39,E,b),data:b},d=e?e.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","iconLabel",f):O.call(a,"ifCond",(d=a&&a.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","iconLabel",f),(d||0===d)&&(g+=d),g+="\n    </div>\n"}function m(a,b){var d,e,f,g="";return g+="\n    ",e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:N.noop,fn:N.program(12,n,b),data:b},d=e?e.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImageLabel",f):O.call(a,"ifCond",(d=a&&a.sponsoredAward,null==d||!1===d?d:d.sponsoredAwardVisibility),"===","awardImageLabel",f),(d||0===d)&&(g+=d),g+=" show-icon"}function n(a,b){return"no-image"}function o(a,b){var d,e="";return e+="\n        ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.program(28,x,b),fn:N.program(15,p,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function p(a,b){var d,e="";return e+="\n            ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.showSponsoredAwardTooltip),{hash:{},inverse:N.program(25,v,b),fn:N.program(16,q,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function q(a,b){var d,e="";return e+='\n                <span class="c_207_tooltip">\n                    <a href="#"\n                        class="has-tooltip"\n                        data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-my="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-at="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-container="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-viewport="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===L?d.apply(a):d))+'"\n                        tabindex="0">\n                        <span class="picture-element" data-alt="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'">\n                            ',d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.mobileImage),{hash:{},inverse:N.noop,fn:N.program(17,r,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.tabletImage),{hash:{},inverse:N.noop,fn:N.program(19,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(21,t,b),data:b}),(d||0===d)&&(e+=d),e+='\n                            <noscript>\n                                <img alt="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'" src="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.desktopImage,typeof d===L?d.apply(a):d))+'" />\n                            </noscript>\n                        </span>\n                        ',d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(23,u,b),data:b}),(d||0===d)&&(e+=d),e+='\n                    </a>\n                    <div class="tooltip-panel" data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'">\n                        <span class="tooltip-heading">'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.title,typeof d===L?d.apply(a):d))+"</span>\n                        <p>"+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.description,typeof d===L?d.apply(a):d))+"</p>\n                    </div>\n                </span>\n            "}function r(a,b){var c,d="";return d+='<span data-src="'+M((c=a&&a.sponsoredAward,c=null==c||!1===c?c:c.mobileImage,typeof c===L?c.apply(a):c))+'"></span>'}function s(a,b){var c,d="";return d+='<span data-src="'+M((c=a&&a.sponsoredAward,c=null==c||!1===c?c:c.tabletImage,typeof c===L?c.apply(a):c))+'" data-media="(min-width: 36.3125em)"></span>'}function t(a,b){var c,d="";return d+='<span data-src="'+M((c=a&&a.sponsoredAward,c=null==c||!1===c?c:c.desktopImage,typeof c===L?c.apply(a):c))+'" data-media="(min-width: 62.5em)"></span>'}function u(a,b){var c,d="";return d+='\n                            <p class="sponsored-award">'+M((c=a&&a.sponsoredAward,c=null==c||!1===c?c:c.label,typeof c===L?c.apply(a):c))+"</p>\n                        "}function v(a,b){var d,e="";return e+='\n                <span class="picture-element" data-alt="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'">\n                    ',d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.mobileImage),{hash:{},inverse:N.noop,fn:N.program(17,r,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.tabletImage),{hash:{},inverse:N.noop,fn:N.program(19,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(21,t,b),data:b}),(d||0===d)&&(e+=d),e+='\n                    <noscript>\n                        <img alt="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'" src="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.desktopImage,typeof d===L?d.apply(a):d))+'" />\n                    </noscript>\n                </span>\n                ',d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(26,w,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function w(a,b){var c,d="";return d+='\n                    <p class="sponsored-award">'+M((c=a&&a.sponsoredAward,c=null==c||!1===c?c:c.label,typeof c===L?c.apply(a):c))+"</p>\n                "}function x(a,b){var d,e="";return e+="\n            ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.showSponsoredAwardTooltip),{hash:{},inverse:N.program(31,z,b),fn:N.program(29,y,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function y(a,b){var d,e="";return e+='\n                <span class="c_207_tooltip">\n                    <a href="#"\n                        class="has-tooltip"\n                        data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-my="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-at="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-container="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-viewport="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===L?d.apply(a):d))+'"\n                        tabindex="0">\n                        ',d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(23,u,b),data:b}),(d||0===d)&&(e+=d),e+='\n                    </a>\n                    <div class="tooltip-panel" data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'">\n                        <span class="tooltip-heading">'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.title,typeof d===L?d.apply(a):d))+"</span>\n                        <p>"+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.description,typeof d===L?d.apply(a):d))+"</p>\n                    </div>\n                </span>\n            "}function z(a,b){var d,e="";return e+="\n                ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(26,w,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function A(a,b){var d,e="";return e+="\n        ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.program(28,x,b),fn:N.program(34,B,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function B(a,b){var d,e="";return e+="\n            ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.showSponsoredAwardTooltip),{hash:{},inverse:N.program(37,D,b),fn:N.program(35,C,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function C(a,b){var d,e="";return e+='\n                <span class="c_207_tooltip">\n                    <a href="#"\n                        class="has-tooltip"\n                        data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-my="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipMy,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-at="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipAt,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-container="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipContainer,typeof d===L?d.apply(a):d))+'"\n                        data-tooltip-viewport="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipViewport,typeof d===L?d.apply(a):d))+'"\n                        tabindex="0">\n                        <span class="picture-element" data-alt="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'">\n                            ',d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.mobileImage),{hash:{},inverse:N.noop,fn:N.program(17,r,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.tabletImage),{hash:{},inverse:N.noop,fn:N.program(19,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(21,t,b),data:b}),(d||0===d)&&(e+=d),e+='\n                            <noscript>\n                                <img alt="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'" src="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.desktopImage,typeof d===L?d.apply(a):d))+'" />\n                            </noscript>\n                        </span>\n                    </a>\n                    <div class="tooltip-panel" data-tooltip-id="'+M((d=a&&a.tooltip,d=null==d||!1===d?d:d.tooltipID,typeof d===L?d.apply(a):d))+'">\n                        <span class="tooltip-heading">'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.title,typeof d===L?d.apply(a):d))+"</span>\n                        <p>"+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.description,typeof d===L?d.apply(a):d))+"</p>\n                    </div>\n                </span>\n            "}function D(a,b){var d,e="";return e+='\n                <span class="picture-element" data-alt="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'">\n                    ',d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.mobileImage),{hash:{},inverse:N.noop,fn:N.program(17,r,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.tabletImage),{hash:{},inverse:N.noop,fn:N.program(19,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.desktopImage),{hash:{},inverse:N.noop,fn:N.program(21,t,b),data:b}),(d||0===d)&&(e+=d),
e+='\n                    <noscript>\n                        <img alt="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.label,typeof d===L?d.apply(a):d))+'" src="'+M((d=a&&a.sponsoredAward,d=null==d||!1===d?d:d.desktopImage,typeof d===L?d.apply(a):d))+'" />\n                    </noscript>\n                </span>\n            '}function E(a,b){var d,e="";return e+="\n        ",d=c.if.call(a,(d=a&&a.sponsoredAward,null==d||!1===d?d:d.label),{hash:{},inverse:N.noop,fn:N.program(40,F,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function F(a,b){var c,d="";return d+='\n            <p class="sponsored-award">'+M((c=a&&a.sponsoredAward,c=null==c||!1===c?c:c.label,typeof c===L?c.apply(a):c))+"</p>\n        "}function G(a,b){return'\n    <span class="preferred-dealer-icon"></span>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var H,I,J,K="",L="function",M=this.escapeExpression,N=this,O=c.helperMissing;return K+='<div class="dealer-type"><span class="',(I=c.iconStyle)?H=I.call(b,{hash:{},data:e}):(I=b&&b.iconStyle,H=typeof I===L?I.call(b,{hash:{},data:e}):I),K+=M(H)+'">',(I=c.letter)?H=I.call(b,{hash:{},data:e}):(I=b&&b.letter,H=typeof I===L?I.call(b,{hash:{},data:e}):I),K+=M(H)+'</span></div>\n<div class="dealer-info">\n\t<h3 class="dealer-info-name">',(I=c.name)?H=I.call(b,{hash:{},data:e}):(I=b&&b.name,H=typeof I===L?I.call(b,{hash:{},data:e}):I),K+=M(H)+"</h3>\n    ",H=c.if.call(b,b&&b.showPhone,{hash:{},inverse:N.noop,fn:N.program(1,f,e),data:e}),(H||0===H)&&(K+=H),K+='\n    <p class="description">\n        ',(I=c.formattedAddress)?H=I.call(b,{hash:{},data:e}):(I=b&&b.formattedAddress,H=typeof I===L?I.call(b,{hash:{},data:e}):I),(H||0===H)&&(K+=H),K+='\n    </p>\n    <p class="distance-units',H=c.if.call(b,b&&b.distanceHidden,{hash:{},inverse:N.noop,fn:N.program(3,g,e),data:e}),(H||0===H)&&(K+=H),K+='">(',(I=c.distanceSelected)?H=I.call(b,{hash:{},data:e}):(I=b&&b.distanceSelected,H=typeof I===L?I.call(b,{hash:{},data:e}):I),K+=M(H)+" ",(I=c.distanceUnitsName)?H=I.call(b,{hash:{},data:e}):(I=b&&b.distanceUnitsName,H=typeof I===L?I.call(b,{hash:{},data:e}):I),K+=M(H)+')</p>\n    <div class="labels-types-container">\n        ',H=c.if.call(b,b&&b.labels,{hash:{},inverse:N.noop,fn:N.program(5,h,e),data:e}),(H||0===H)&&(K+=H),K+="\n    </div>\n\n</div>\n",I=c.ifCond||b&&b.ifCond,J={hash:{},inverse:N.noop,fn:N.program(10,l,e),data:e},H=I?I.call(b,b&&b.sponsoredAward,"&&",(H=b&&b.sponsoredAward,null==H||!1===H?H:H.sponsoredAwardRender),J):O.call(b,"ifCond",b&&b.sponsoredAward,"&&",(H=b&&b.sponsoredAward,null==H||!1===H?H:H.sponsoredAwardRender),J),(H||0===H)&&(K+=H),K+="\n",H=c.if.call(b,b&&b.isPreferredDealer,{hash:{},inverse:N.noop,fn:N.program(42,G,e),data:e}),(H||0===H)&&(K+=H),K+="\n"})}),define("c_207_2DealerItemView",["jquery","underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerItem"],function(a,b,c,d,e){"use strict";return d.ItemView.extend({template:e,tagName:"li",className:"dealer-item",initialize:function(a){this.options=a,this.eventAggregator=a.eventAggregator,this.CONSTANTS=a.CONSTANTS,this.TRACKING_CODES=a.TRACKING_CODES,this.initUI(),this.initTooltip()},initUI:function(){this.ui={dealerInfo:this.CONSTANTS.VIEW.SELECTORS.DEALER_INFO,tooltip:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP,dealerInfoName:this.CONSTANTS.VIEW.SELECTORS.DEALER_INFO_NAME,analyticsTargetPhoneInteraction:this.options.CONSTANTS.VIEW.SELECTORS.ANALYTICS_TARGET_DEALER_INTERACTION}},onShow:function(){this.options.tooltip.createToolTip(this.ui.tooltip)},events:function(){var a={};return a[this.CONSTANTS.VIEW.EVENTS.ANALYTICS_TARGET_PHONE_INTERACTION]="onAnalyticsTargetPhoneNumberClick",this.options&&this.options.templateHelpers&&this.options.templateHelpers.content.enableDealerNumber?a[this.CONSTANTS.VIEW.EVENTS.DEALER_INFO_NAME]="onSelectedDealerClick":a[this.CONSTANTS.VIEW.EVENTS.DEALER_INFO]="onSelectedDealerClick",a},initTooltip:function(){var a={tooltipID:this.model.cid,tooltipHeadline:this.model.get("sponsoredAward").title,tooltipContent:this.model.get("sponsoredAward").description,tooltipContainer:".dealer-item",tooltipViewport:".dealer-item"};this.model.set("tooltip",a)},onSelectedDealerClick:function(){this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.DEALER.DEALER_SELECT,this.model,!0),this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.DEALER_INTERACTION,this.TRACKING_CODES.componentIds.C207_2_Results_List,this.model,this.CONSTANTS.APPLICATION.ANALYTICS.DEALER_ACTION.LIST)},onAnalyticsTargetPhoneNumberClick:function(b){var c=a(b.currentTarget),d=c.data(this.options.CONSTANTS.VIEW.DATA_ATTRIBUTES.DEALER_ACTION);this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.DEALER_INTERACTION,this.options.TRACKING_CODES.componentIds.C207_2_Results_List,this.options.model,d)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2NoResultsMessage",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return(e=c.noResults)?d=e.call(a,{hash:{},data:b}):(e=a&&a.noResults,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<span class="no-results-filter">\n    ',g=c.if.call(b,b&&b.isRendered,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="</span>"})}),define("c_207_2NoResultsMessageView",["jquery","underscore","backbone","marionette","c_207_Constants","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2NoResultsMessage"],function(a,b,c,d,e,f){"use strict";return d.ItemView.extend({template:f,tagName:"li",initialize:function(a){this.templateHelpers=a}})});define("c_207_2DealerCollectionView",["jquery","underscore","backbone","marionette","c_207_ModelConstants","c_207_2DealerItemView","c_207_2NoResultsMessageView"],function(a,b,c,d,e,f,g){"use strict";return d.CollectionView.extend({tagName:"ul",className:"result-dealers-items",childView:f,emptyView:g,childViewOptions:function(){return{CONSTANTS:this.options.CONSTANTS,TRACKING_CODES:this.options.TRACKING_CODES,eventAggregator:this.options.eventAggregator,tooltip:this.options.tooltip,templateHelpers:{content:this.options.templateHelpers.content.dealerLocatorDialog.resultDetails||{}}}},emptyViewOptions:function(){return{noResults:this.options.templateHelpers.content.dealerLocatorDialog.overview.noResults,isRendered:this.isRendered,CONSTANTS:this.options.CONSTANTS}},initialize:function(a){this.options=a},onDomRefresh:function(){b.defer(b.bind(function(){a("body").trigger(this.options.CONSTANTS.VIEW.EVENTS.DEALERS_PHONE_UPDATE)},this))}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerMain",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="loader hide"></div>\n<div class="c_207_2">\n    <div class="dealers-list-panel hide"></div>\n    <div class="dealer-details-panel hide"></div>\n    <div class="dealer-errors hide"></div>\n    <div class="footer"></div>\n</div>\n'})}),define("c_207_2DealerMainView",["jquery","marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerMain"],function(a,b,c){"use strict";return b.LayoutView.extend({template:c,initialize:function(){this.CONSTANTS=this.model.getConstants(),this.initRegions(),this.initUI()},initUI:function(){this.ui={activeLoader:this.CONSTANTS.APPLICATION.SELECTORS.LOADER}},initRegions:function(){var a={},b=this.CONSTANTS.APPLICATION.REGIONS,c=this.CONSTANTS.APPLICATION.REGIONS_SELECTORS;a[b.DEALERS_LIST_PANEL]=c.DEALERS_LIST_PANEL,a[b.DEALER_DETAILS]=c.DEALER_DETAILS,a[b.FOOTER]=c.FOOTER,a[b.ERRORS]=c.ERRORS,this.addRegions(a)},switchView:function(a){var b=this.CONSTANTS.VIEW.CSS_CLASSES.HIDE,c=this.getRegion(a).$el;this.$currentView&&this.$currentView.addClass(b),c.removeClass(b),this.$el.find(this.CONSTANTS.VIEW.SELECTORS.ROOT).animate({scrollTop:this.CONSTANTS.VIEW.OPTIONS.SCROLL_TOP}),this.$currentView=c,this.handleAccessibility(a)},setRegionsMinHeight:function(a){this.dealerListPanel.$el.css("min-height",a),this.dealerDetails.$el.css("min-height",a),this.errors.$el.css("min-height",a)},showLoader:function(){this.ui.activeLoader.removeClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.HIDE)},hideLoader:function(){this.ui.activeLoader.addClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.HIDE)},showImages:function(){this.options.window.picturefill(this.$currentView)},handleAccessibility:function(b){var c=a(this.CONSTANTS.VIEW.SELECTORS.DEALER_INFO_NAME),d=a(this.CONSTANTS.VIEW.SELECTORS.DEALER_LIST_LINKS),e=a(this.CONSTANTS.VIEW.SELECTORS.DEALER_DETAILS).find(this.CONSTANTS.VIEW.SELECTORS.DEALER_TITLE),f=a(this.CONSTANTS.VIEW.SELECTORS.DEALERS_LIST_PANEL).find(this.CONSTANTS.VIEW.SELECTORS.ACCORDION_HEADER),g=a(this.CONSTANTS.VIEW.SELECTORS.ACCORDION_PANEL_CHECKBOX),h=a(this.CONSTANTS.VIEW.SELECTORS.DEALERS_DETAILS).find(this.CONSTANTS.VIEW.SELECTORS.ACCORDION_HEADER),i=a(this.CONSTANTS.VIEW.SELECTORS.DEALER_DETAILS_LINKS);b===this.CONSTANTS.APPLICATION.REGIONS.DEALERS_LIST_PANEL?(this.setTabIndex(c,0),this.setTabIndex(d,0),this.setTabIndex(f,0),this.setTabIndex(e,-1),this.setTabIndex(h,-1),this.setTabIndex(i,-1),this.handleEnterKeyEvent(c),this.handleEnterKeyEvent(g)):b===this.CONSTANTS.APPLICATION.REGIONS.DEALER_DETAILS&&(this.setTabIndex(c,-1),this.setTabIndex(d,-1),this.setTabIndex(f,-1),this.setTabIndex(h,0),this.setTabIndex(i,0),this.setTabIndex(e,0))},setTabIndex:function(b,c){b&&b.each(function(){a(this).attr("tabindex",c)})},handleEnterKeyEvent:function(b){b&&b.each(function(){var b=a(this);b.off("keypress").on("keypress",function(a){13==a.keyCode&&b.trigger("click")})})}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerListPanel",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="dealers-origin-link"></div>\n<div class="filters"></div>\n<div class="dealers-results-instruction"></div>\n<div class="dealers-list"></div>\n'})}),define("c_207_2DealerListPanelView",["jquery","marionette","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerListPanel"],function(a,b,c){"use strict";return b.LayoutView.extend({template:c,initialize:function(a){this.CONSTANTS=a.CONSTANTS,this.initRegions()},initRegions:function(){var a={},b=this.CONSTANTS.APPLICATION.REGIONS,c=this.CONSTANTS.APPLICATION.REGIONS_SELECTORS;a[b.FILTERS]=c.FILTERS,a[b.DEALERS_ORIGIN_LINK]=c.DEALERS_ORIGIN_LINK,a[b.DEALERS_LIST]=c.DEALERS_LIST,a[b.DEALERS_RESULTS_INSTRUCTION]=c.DEALERS_RESULTS_INSTRUCTION,this.addRegions(a)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerErrors",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<p class="error-message">',(g=c.currentError)?f=g.call(b,{hash:{},data:e}):(g=b&&b.currentError,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h+=i(f)+"</p>\n"})}),define("c_207_2DealerErrorsView",["jquery","underscore","backbone","marionette","c_207_ApplicationConstants","c_207_Constants","hbars!/components/c_207/scripts/app/modules/c_207-2/html/c_207-2-dealerErrors"],function(a,b,c,d,e,f,g){"use strict";return d.ItemView.extend({template:g,initialize:function(a){this.CONSTANTS=this.model.getConstants(),this.options=a,this.templateHelpers=this.options.templateHelpers,this.bindEvents(),this.initUI()},initUI:function(){this.ui={errorMessage:this.CONSTANTS.VIEW.SELECTORS.ERROR_MESSAGE}},bindEvents:function(){this.model.on(this.CONSTANTS.MODEL.ERRORS.EVENTS.CURRENT_ERROR_CHANGE,this.render)},showError:function(a,b){this.model.set(this.CONSTANTS.MODEL.ERRORS.PROPERTIES.CURRENT_ERROR,a),this.resetView(),b&&this.ui.errorMessage.addClass(b)},resetView:function(){this.ui.errorMessage.attr("class",this.CONSTANTS.VIEW.CSS_CLASSES.ERROR_MESSAGE)}})}),define("c_207_3Model",["jquery","underscore","backbone","marionette","c_207AbstractModel"],function(a,b,c,d,e){"use strict";var f;return e.extend({defaults:{mapReady:!1},initialize:function(){e.prototype.initialize.apply(this,arguments),f=this.getConstants(),this.addBroadcastListener(f.MODEL.EVENTS.VIEWPORT_DIMENSIONS_CHANGE,f.APPLICATION.EVENTS.VIEWPORT.DIMENSIONS_UPDATED)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-3/html/c_207-3",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="c_207_3"></div>\n'})}),define("c_207_3View",["jquery","underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-3/html/c_207-3"],function(a,b,c,d,e){"use strict";var f;return d.ItemView.extend({template:e,events:{},triggers:{},initialize:function(a){f=this.model.getConstants(),this.options=a,this.initUI()},initUI:function(){this.ui={map:f.VIEW.SELECTORS.ROOT}},updateMapViewport:function(){this.fitViewportBounds(),a(this.options.window).on(f.MODEL.PROPERTIES.RESIZE,b.throttle(b.bind(function(){this.fitViewportBounds()},this),100))},fitViewportBounds:function(){var b=a(this.options.window),c={width:b.width(),height:b.height()};this.model.set(f.MODEL.PROPERTIES.VIEWPORT_DIMENSIONS,c)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-3/html/c_207-3MapMainView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="map-view">\n    <div class="map-overlay hide"></div>\n    <div class="map"></div>\n    <div class="icon-keys hide"></div>\n</div>\n'})}),define("c_207_3MapMainView",["underscore","jquery","marionette","hbars!/components/c_207/scripts/app/modules/c_207-3/html/c_207-3MapMainView"],function(a,b,c,d){"use strict";return c.LayoutView.extend({template:d,initialize:function(a){this.options=a,this.eventAggregator=a.eventAggregator,this.CONSTANTS=a.CONSTANTS,this.initRegions()},initRegions:function(){var a={},b=this.CONSTANTS.APPLICATION.REGIONS,c=this.CONSTANTS.APPLICATION.REGIONS_SELECTORS;a[b.MAP_OVERLAY]=c.MAP_OVERLAY,a[b.MAP]=c.MAP,a[b.ICON_KEYS]=c.ICON_KEYS,this.addRegions(a)},showIconKeys:function(){this.iconKeys.$el.removeClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.HIDE)},hideIconKeys:function(){this.iconKeys.$el.addClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.HIDE)},showMapOverlay:function(){this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.VIEWPORT.SET_ACTIVE_TAB,this.CONSTANTS.APPLICATION.PROPERTIES.VIEWPORT.LIST_PREFERRED),this.mapOverlay.$el.removeClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.HIDE)},hideMapOverlay:function(){this.mapOverlay.$el.addClass(this.CONSTANTS.APPLICATION.CSS_CLASSES.HIDE)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-3/html/c_207-3MapOverlayView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="<h2>"+i((f=b&&b.content,f=null==f||!1===f?f:f.titleHelpingBox,typeof f===h?f.apply(b):f))+"</h2>\n<p>"+i((f=b&&b.content,f=null==f||!1===f?f:f.subTitleHelpingBox,typeof f===h?f.apply(b):f))+"</p>\n"})}),define("c_207_3MapOverlayView",["underscore","jquery","marionette","hbars!/components/c_207/scripts/app/modules/c_207-3/html/c_207-3MapOverlayView"],function(a,b,c,d){"use strict";return c.ItemView.extend({template:d,className:"helper-dialog-box"})}),define("c_207_4Model",["underscore","backbone","c_207AbstractModel"],function(a,b,c){"use strict";var d;return c.extend({defaults:{markers:[]},setMarkers:function(a){d=this.getConstants(),this.set(d.MODEL.PROPERTIES.MARKERS,a)}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-4/html/c_207-4",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n            <li>\n                <img src="',(e=c.path)?d=e.call(a,{hash:{},data:b}):(e=a&&a.path,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'">\n                <p>',(e=c.legendLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.legendLabel,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"</p>\n            </li>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<div class="c_207_4">\n    <ul>\n        ',g=c.each.call(b,b&&b.markers,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n    </ul>\n</div>"})}),define("c_207_4View",["marionette","hbars!/components/c_207/scripts/app/modules/c_207-4/html/c_207-4"],function(a,b){"use strict";var c;return a.ItemView.extend({template:b,initialize:function(){c=this.model.options.CONSTANTS},modelEvents:function(){var a={};return a[c.MODEL.EVENTS.MARKERS_CHANGE]="renderView",a},renderView:function(){this.render()}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-5/html/c_207-5Item",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n    ",d=c.if.call(a,a&&a.link,{hash:{},inverse:m.program(4,h,b),fn:m.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function g(a,b){var d,e,f="";return f+='\n        <a href="',(e=c.link)?d=e.call(a,{hash:{},data:b}):(e=a&&a.link,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'">',(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</a>\n    "}function h(a,b){var d,e,f="";return f+="\n        <span>",(e=c.label)?d=e.call(a,{hash:{},data:b}):(e=a&&a.label,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</span>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return i=c.if.call(b,b&&b.label,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+="\n"})}),define("c_207_5ItemView",["jquery","underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-5/html/c_207-5Item"],function(a,b,c,d,e){"use strict";return d.ItemView.extend({template:e,tagName:"li",events:{"click @ui.link":"onButtonClick"},initialize:function(a){this.eventAggregator=a.eventAggregator,this.CONSTANTS=a.CONSTANTS,this.TRACKING_CODES=a.TRACKING_CODES,this.initUI()},initUI:function(){this.ui={link:this.CONSTANTS.VIEW.SELECTORS.LINK}},onButtonClick:function(a){this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.GENERIC_CLICK,this.TRACKING_CODES.componentIds.C207_5_Legal_Footer,this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.FOOTER,a.target)}})}),define("c_207_5CollectionView",["jquery","underscore","backbone","marionette","c_207_ModelConstants","c_207_5ItemView"],function(a,b,c,d,e,f){"use strict";return c.Marionette.CollectionView.extend({tagName:"ul",className:"c_207_5",childView:f,childViewOptions:function(){return{CONSTANTS:this.options.CONSTANTS,TRACKING_CODES:this.options.TRACKING_CODES,eventAggregator:this.options.eventAggregator}}})}),define("hbars!/components/c_207/scripts/app/modules/c_207-6/html/c_207-6FiltersCompositeView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<ul class="accordion">\n    <li class="accordion-group">\n        <h2 class="accordion-header" data-default="true"><span class="filters-title"></span> (<span class="filters-number">',(g=c.activeVisibleFilters)?f=g.call(b,{hash:{},data:e}):(g=b&&b.activeVisibleFilters,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</span>)</h2>\n        <div class="accordion-panel">\n            <div class="filter-group"></div>\n            <button class="reset-button" type="button">'+j((f=b&&b.content,f=null==f||!1===f?f:f.labelResetFilter,typeof f===i?f.apply(b):f))+"</button>\n        </div>\n    </li>\n</ul>\n"})}),define("hbars!/components/c_207/scripts/app/modules/c_207-6/html/c_207-6FilterGroupCompositeView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<h3 class="hide">',(g=c.filterGroupName)?f=g.call(b,{hash:{},data:e}):(g=b&&b.filterGroupName,f="function"==typeof g?g.call(b,{hash:{},data:e}):g),h+=i(f)+'</h3>\n<ul class="filter-group-items"></ul>\n'})}),define("hbars!/components/c_207/scripts/app/modules/c_207-6/html/c_207-6FilterItemView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return'checked="checked"'}function g(a,b){var e,f="";return f+=" ",e=k.invokePartial(d.c_207_tooltip,"c_207_tooltip",a&&a.tooltip,c,d,b),(e||0===e)&&(f+=e),f+=" "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var h,i,j="",k=this,l="function",m=this.escapeExpression;return j+='<input id="',(i=c.requestParamValue)?h=i.call(b,{hash:{},data:e}):(i=b&&b.requestParamValue,h=typeof i===l?i.call(b,{hash:{},data:e}):i),j+=m(h)+'" type="checkbox" ',h=c.if.call(b,b&&b.active,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+='/>\n<label for="',(i=c.requestParamValue)?h=i.call(b,{hash:{},data:e}):(i=b&&b.requestParamValue,h=typeof i===l?i.call(b,{hash:{},data:e}):i),j+=m(h)+'">',(i=c.name)?h=i.call(b,{hash:{},data:e}):(i=b&&b.name,h=typeof i===l?i.call(b,{hash:{},data:e}):i),j+=m(h)+" ",h=c.if.call(b,b&&b.tooltip,{hash:{},inverse:k.noop,fn:k.program(3,g,e),data:e}),(h||0===h)&&(j+=h),j+="</label>\n"})}),define("hbars!/components/c_207/html/tooltip",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return" tooltip-label-central"}function g(a,b){return" tooltip-label-hidden"}function h(a,b){var d,e,f="";return f+=" tooltip-icon-",(e=c.tooltipIcon)?d=e.call(a,{hash:{},data:b}):(e=a&&a.tooltipIcon,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)}function i(a,b){var d,e,f="";return f+='\n            <span class="tooltip-heading">',(e=c.tooltipHeadline)?d=e.call(a,{hash:{},data:b}):(e=a&&a.tooltipHeadline,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</span>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this;return l+='<span class="c_207_tooltip">\n    <a href="#" data-parent-component="',(k=c.parentComponent)?j=k.call(b,{hash:{},data:e}):(k=b&&b.parentComponent,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n       class="has-tooltip',j=c.if.call(b,b&&b.labelCenter,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),l+="\n           ",j=c.if.call(b,b&&b.tooltipLabelHidden,{hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e}),(j||0===j)&&(l+=j),l+="\n           ",j=c.if.call(b,b&&b.tooltipIcon,{hash:{},inverse:o.noop,fn:o.program(5,h,e),data:e}),(j||0===j)&&(l+=j),l+='"\n       data-tooltip-id="',(k=c.tooltipID)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipID,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n       data-tooltip-my="',(k=c.tooltipMy)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipMy,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n       data-tooltip-at="',(k=c.tooltipAt)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipAt,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n       data-tooltip-container="',(k=c.tooltipContainer)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipContainer,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n       data-tooltip-viewport="',(k=c.tooltipViewport)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipViewport,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'"\n       tabindex="0"><span>',(k=c.tooltipLabel)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipLabel,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'</span></a>\n    <div class="tooltip-panel" data-tooltip-id="',(k=c.tooltipID)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipID,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'">\n        ',j=c.if.call(b,b&&b.tooltipHeadline,{hash:{},inverse:o.noop,fn:o.program(7,i,e),data:e}),(j||0===j)&&(l+=j),l+="\n        <p>",(k=c.tooltipContent)?j=k.call(b,{hash:{},data:e}):(k=b&&b.tooltipContent,j=typeof k===m?k.call(b,{hash:{},data:e}):k),(j||0===j)&&(l+=j),l+="</p>\n    </div>\n</span>\n"})}),define("c_207_6FilterItemView",["jquery","underscore","backbone","marionette","handlebars","hbars!/components/c_207/scripts/app/modules/c_207-6/html/c_207-6FilterItemView","hbars!/components/c_207/html/tooltip"],function(a,b,c,d,e,f,g){"use strict";return d.ItemView.extend({template:f,className:"filter-item checkbox",tagName:"li",events:{"change @ui.filterCheckbox":"toggleActive"},initialize:function(a){this.options=a,this.CONSTANTS=a.CONSTANTS,this.eventAggregator=a.eventAggregator,this.TRACKING_CODES=a.TRACKING_CODES,this.MODEL_PROPERTIES=this.CONSTANTS.MODEL.PROPERTIES,this.initUI(),this.initTooltip()},initUI:function(){this.ui={filterCheckbox:this.CONSTANTS.VIEW.SELECTORS.FILTER_CHECKBOX,tooltip:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP}},initTooltip:function(){this.model.get(this.MODEL_PROPERTIES.DESCRIPTION)&&(this.model.set(this.MODEL_PROPERTIES.TOOLTIP,{tooltipID:this.model.get(this.MODEL_PROPERTIES.REQUEST_PARAM_VALUE),tooltipHeadline:this.model.get(this.MODEL_PROPERTIES.NAME),tooltipContent:this.model.get(this.MODEL_PROPERTIES.DESCRIPTION),tooltipContainer:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_CONTAINER,tooltipViewport:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_VIEWPORT}),e.registerPartial(this.CONSTANTS.VIEW.PROPERTIES.TOOLTIP_PARTIALS,g))},onRender:function(){this.model.get(this.MODEL_PROPERTIES.DESCRIPTION)&&this.options.tooltip.createToolTip(this.ui.tooltip)},toggleActive:function(){this.model.get(this.MODEL_PROPERTIES.USER_SELECTED)||this.model.set(this.MODEL_PROPERTIES.USER_SELECTED,!0,{silent:!0}),this.model.set(this.MODEL_PROPERTIES.ACTIVE,!this.model.get(this.MODEL_PROPERTIES.ACTIVE)),this.model.get(this.MODEL_PROPERTIES.ACTIVE)&&this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.SEARCH)}})}),define("c_207_6FilterGroupCompositeView",["jquery","underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-6/html/c_207-6FilterGroupCompositeView","c_207_6FilterItemView"],function(a,b,c,d,e,f){"use strict";return d.CompositeView.extend({template:e,childView:f,childViewContainer:"ul.filter-group-items",childViewOptions:function(){return{CONSTANTS:this.CONSTANTS,tooltip:this.options.tooltip,TRACKING_CODES:this.options.TRACKING_CODES,eventAggregator:this.eventAggregator}},filter:function(a){return!0===a.get(a.CONSTANTS.OPTIONS.PROPERTIES.VISIBLE)},onRender:function(){this.options.filterGroupsNumber>1&&this.ui.header.removeClass(this.CONSTANTS.VIEW.CSS_CLASSES.HIDE)},initialize:function(a){this.options=a,this.eventAggregator=a.eventAggregator,this.CONSTANTS=a.CONSTANTS,this.initUI()},initUI:function(){this.ui={header:this.CONSTANTS.VIEW.SELECTORS.HEADER}}})}),define("c_207_6FiltersCompositeView",["jquery","underscore","backbone","marionette","hbars!/components/c_207/scripts/app/modules/c_207-6/html/c_207-6FiltersCompositeView","c_207_6FilterGroupCompositeView","accordion","accordionItem"],function(a,b,c,d,e,f,g,h){"use strict";return d.CompositeView.extend({template:e,childView:f,className:"c_207_6",childViewContainer:"div.filter-group",events:{"click @ui.resetButton":"onResetButtonClick"},collectionEvents:function(){var a={};return a[this.collection.CONSTANTS.GROUPS.EVENTS.FILTERS_CLEARED]="render",a},modelEvents:function(){var a={};return a[this.CONSTANTS.COLLECTION.EVENTS.CHANGE_ACTIVE_VISIBLE_FILTERS]="updateAccordionHeader",a},childViewOptions:function(a){if(a)return{CONSTANTS:this.CONSTANTS,TRACKING_CODES:this.options.TRACKING_CODES,eventAggregator:this.eventAggregator,collection:a.get(a.options.CONSTANTS.GROUPS.PROPERTIES.FILTERS),filterGroupsNumber:this.options.collection.length,tooltip:this.options.tooltip}},filter:function(a){var b=a.getConstants();return a.get(b.GROUPS.PROPERTIES.FILTERS).some(function(a){return a.get(b.OPTIONS.PROPERTIES.VISIBLE)})},initialize:function(a){this.options=a,this.CONSTANTS=a.CONSTANTS,this.eventAggregator=a.eventAggregator,this.initUI(),this.content=a.content,this.accordionIsOpen=!1},onRender:function(){b.defer(b.bind(this.renderAccordion,this),this.accordionIsOpen),this.model.set(this.CONSTANTS.COLLECTION.PROPERTIES.ACTIVE_VISIBLE_FILTERS,this.collection.getActiveVisibleFilterCount())},updateAccordionHeader:function(){this.showFiltersNumber(this.model.get(this.CONSTANTS.COLLECTION.PROPERTIES.ACTIVE_VISIBLE_FILTERS))},initUI:function(){this.ui={accordion:this.CONSTANTS.VIEW.SELECTORS.ACCORDION,accordionHeader:this.CONSTANTS.VIEW.SELECTORS.ACCORDION_HEADER,accordionPanel:this.CONSTANTS.VIEW.SELECTORS.ACCORDION_PANEL,filtersTitle:this.CONSTANTS.VIEW.SELECTORS.FILTERS_TITLE,filtersNumber:this.CONSTANTS.VIEW.SELECTORS.FILTERS_NUMBER,resetButton:this.CONSTANTS.VIEW.SELECTORS.RESET_BUTTON}},renderAccordion:function(a){var c=[];c.push(new h({$contentElement:this.ui.accordionPanel.eq(0),$headerElement:this.ui.accordionHeader.eq(0),isDisabled:!1,isOpen:a,transitionToClose:"toggle",onOpen:b.bind(this.onAccordionItemOpen,this),onClose:b.bind(this.onAccordionItemClose,this)})),this.accordion=new g({$container:this.ui.accordion,isScrollOnOpenEnabled:!1,isMultipleOpenItemsEnabled:!1,items:c})},onAccordionItemOpen:function(){this.accordionIsOpen=!0,this.ui.filtersTitle.html(this.content.headingInOpenState)},onAccordionItemClose:function(){this.accordionIsOpen=!1,this.ui.filtersTitle.html(this.content.headingInClosedState)},showFiltersNumber:function(a){this.ui.filtersNumber.html(a)},onResetButtonClick:function(){this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.FILTERS.CLEAR_FILTERS)}})}),define("c_207_FilterOptionModel",["underscore","backbone","c_207AbstractModel"],function(a,b,c){"use strict";return c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments),this.CONSTANTS=this.getConstants(),this.eventAggregator=this.getEventAggregator(),this.content=this.getContent(),this.set(this.CONSTANTS.OPTIONS.PROPERTIES.USER_SELECTED,!1),this.set(this.CONSTANTS.OPTIONS.PROPERTIES.ACTIVE,this.get(this.CONSTANTS.OPTIONS.PROPERTIES.APPLY_ON_LOAD))}})}),define("c_207_FilterOptionCollection",["underscore","backbone","c_207_FilterOptionModel"],function(a,b,c){"use strict";return b.Collection.extend({model:c,initialize:function(a,b){this.options=b,this.CONSTANTS=this.options.CONSTANTS,this.eventAggregator=this.options.eventAggregator,this.content=this.options.content}})}),define("c_207_FilterGroupModel",["underscore","backbone","c_207AbstractModel","c_207_FilterOptionCollection"],function(a,b,c,d){"use strict";return c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments),this.CONSTANTS=this.getConstants(),this.bindEvents()},bindEvents:function(){this.listenTo(this.get(this.CONSTANTS.GROUPS.PROPERTIES.FILTERS),this.CONSTANTS.GROUPS.EVENTS.CHANGE,this.onFiltersChange)},parse:function(a,b){return a[b.CONSTANTS.GROUPS.PROPERTIES.FILTERS]=new d(a[b.CONSTANTS.GROUPS.PROPERTIES.FILTERS]||[],b),a},onFiltersChange:function(a){this.trigger(this.CONSTANTS.GROUPS.EVENTS.CHANGE,a)},getActiveFilters:function(){var b=[],c=this.get(this.CONSTANTS.GROUPS.PROPERTIES.FILTERS);return c&&(b=a(c.filter(function(a){return a.get(this.CONSTANTS.OPTIONS.PROPERTIES.ACTIVE)&&a.get(this.CONSTANTS.OPTIONS.PROPERTIES.SERVICES_IDS)},this)).chain().pluck(this.CONSTANTS.OPTIONS.PROPERTIES.ATTRIBUTES).pluck(this.CONSTANTS.OPTIONS.PROPERTIES.SERVICES_IDS).flatten().uniq().value()),b},getActiveSelectedGroupFilters:function(){if(this.getActiveSelectedFiltersValue().length)return this.get(this.CONSTANTS.GROUPS.PROPERTIES.FILTER_GROUP_NAME)},
getActiveSelectedFiltersValue:function(){var b=[],c=this.get(this.CONSTANTS.GROUPS.PROPERTIES.FILTERS);return c&&(b=a(c.filter(function(a){return a.get(this.CONSTANTS.OPTIONS.PROPERTIES.ACTIVE)&&a.get(this.CONSTANTS.OPTIONS.PROPERTIES.USER_SELECTED)},this)).chain().pluck(this.CONSTANTS.OPTIONS.PROPERTIES.ATTRIBUTES).pluck(this.CONSTANTS.OPTIONS.PROPERTIES.NAME).flatten().uniq().value()),b},getFiltersForRequestParam:function(b){var c=[],d=this.get(this.CONSTANTS.GROUPS.PROPERTIES.FILTERS);return d&&(c=a(d.filter(function(a){return a.get(this.CONSTANTS.OPTIONS.PROPERTIES.REQUEST_PARAM_VALUE)===b},this)).chain().pluck(this.CONSTANTS.OPTIONS.PROPERTIES.ATTRIBUTES).pluck(this.CONSTANTS.OPTIONS.PROPERTIES.SERVICES_IDS).flatten().uniq().value()),c},getActiveVisibleFilterCount:function(){var a=this.get(this.CONSTANTS.GROUPS.PROPERTIES.FILTERS);if(a)return a.reduce(function(a,b){var c=b.CONSTANTS.OPTIONS;return a+(b.get(c.PROPERTIES.ACTIVE)&&b.get(c.PROPERTIES.VISIBLE))},0)},getVisibleFilterCount:function(){var a=this.get(this.CONSTANTS.GROUPS.PROPERTIES.FILTERS);if(a)return a.reduce(function(a,b){var c=b.CONSTANTS.OPTIONS;return a+b.get(c.PROPERTIES.VISIBLE)},0)},resetFilters:function(){var a=this.get(this.CONSTANTS.GROUPS.PROPERTIES.FILTERS);a&&a.each(function(a){a.get(a.options.CONSTANTS.OPTIONS.PROPERTIES.VISIBLE)&&a.set(a.options.CONSTANTS.OPTIONS.PROPERTIES.ACTIVE,!1,{silent:!0})},this)}})}),define("c_207_FilterGroupCollection",["underscore","backbone","c_207_FilterGroupModel"],function(a,b,c){"use strict";return b.Collection.extend({model:c,initialize:function(a,b){this.options=b,this.CONSTANTS=this.options.CONSTANTS,this.content=this.options.content,this.options.parse=!0,this.eventAggregator=this.options.eventAggregator},getActiveFilters:function(){var b=[];return this.each(function(c){b=a.union(b,c.getActiveFilters())}),b},getActiveSelectedGroupFilters:function(){var b=[];return this.each(function(c){var d=c.getActiveSelectedGroupFilters();d&&(b=a.union(b,[d]))}),b},getActiveSelectedFiltersValue:function(){var b=[];return this.each(function(c){b=a.union(b,c.getActiveSelectedFiltersValue())}),b},getFiltersForRequestParam:function(b){var c=[];return this.each(function(d){c=a.union(c,d.getFiltersForRequestParam(b))}),c},resetFilters:function(){this.invoke(this.CONSTANTS.GROUPS.METHODS.RESET_FILTERS),this.trigger(this.CONSTANTS.GROUPS.EVENTS.FILTERS_CLEARED)},getActiveVisibleFilterCount:function(){return this.reduce(function(a,b){return a+b.getActiveVisibleFilterCount()},0)},getVisibleFilterCount:function(){return this.reduce(function(a,b){return a+b.getVisibleFilterCount()},0)}})}),define("markerSpiderfier",["jquery","underscore"],function(a,b){var c;return c=function(a){if(this.options=a||{},!Object.keys(this.options).length)return!1;this.map={},this.markers=[],this.spiderfiedMarkers=[],this.twoPi=2*Math.PI,this.degree=Math.PI/180,this.gm=google.maps,this.ge=this.gm.event,this.mt=this.gm.MapTypeId,this.spiderZoomLevel=18,this.spiderEvent="idle",this.circleFootSeparation=23,this.circleFootSeparationLarge=80,this.circleFootSeparationSmall=60,this.angleStepCount=9,this.spiderfiedZIndex=this.gm.Marker.MAX_ZINDEX+2e4,this.usualLegZIndex=this.gm.Marker.MAX_ZINDEX+1,this.legWeight=2.3,this.redDotWeight=5,this.dotRadius=.1,this.opacity=1,this.scale=4,this.whiteDotColor="#fff",this.legColor="#000",this.callSpiderfier=!0,this.callSpiderfierExternal=!0,b.each(this.options,b.bind(function(a,b){this[b]&&(this[b]=a)},this)),this.ProjHelper=function(a){return this.setMap(a)},this.ProjHelper.prototype=new this.gm.OverlayView,this.ProjHelper.prototype.draw=function(){},this.projHelper=new this.ProjHelper(this.map),this.callSpiderfierExternal&&(this.callSpiderfierExternally=function(){this.unSpiderfy(),setTimeout(b.bind(this.handleZoomSpiderify,this),0)})},c.prototype.addMarkers=function(a){a.length&&(this.markers=a)},c.prototype.handleZoomSpiderify=function(){if(this.map.getZoom()>=this.spiderZoomLevel&&this.markers.length){var a=b.groupBy(this.markers,function(a){return a.getPosition().lat()+"|"+a.getPosition().lng()});b.each(a,b.bind(function(a){var c=[];if(b.each(a,b.bind(function(a){c.push({marker:a,markerPt:this.llToPt(a.position)})},this)),c.length>1){switch(c.length){case 2:this.circleStartAngle=60*this.degree;break;case 3:this.circleStartAngle=30*this.degree;break;case 4:this.circleStartAngle=45*this.degree;break;case 5:this.circleStartAngle=54*this.degree;break;default:this.circleStartAngle=0}this.circleFootSeparation=c.length>6?this.circleFootSeparationLarge:this.circleFootSeparationSmall,this.spiderfy(c)}},this))}},c.prototype.generatePtsCircle=function(a,b){var c,d,e,f,g=a,h=this.circleFootSeparation*(2+g),i=h/this.twoPi,j=[];switch(g){case 2:f=90*this.degree;break;case 3:f=120*this.degree;break;case 4:f=90*this.degree;break;case 5:f=72*this.degree;break;case 6:f=60*this.degree;break;default:f=this.twoPi/g}for(d=e=0;0<=g?e<g:e>g;d=0<=g?++e:--e)c=this.circleStartAngle+d*f,j.push(new this.gm.Point(b.x+i*Math.cos(c),b.y+i*Math.sin(c)));return j},c.prototype.spiderfy=function(a){var c=this.generatePtsCircle(a.length,this.ptAverage(this.getMarkerPoints(a)));b.each(c,b.bind(function(b){var c,d,e;e=this.ptToLl(b),c=this.minExtract(a,b),d=c.marker,d.originalPosition=d.getPosition(),d.leg=new this.gm.Polyline({map:this.map,path:[d.position,e],strokeColor:this.legColor,strokeWeight:this.legWeight,strokeOpacity:this.opacity,zIndex:this.usualLegZIndex}),d.redDot=new this.gm.Marker({position:d.position,icon:{path:this.gm.SymbolPath.CIRCLE,scale:this.scale,fillOpacity:this.opacity,fillColor:this.whiteDotColor,strokeOpacity:this.opacity,strokeColor:this.legColor,strokeWeight:this.legWeight},draggable:!1,map:this.map}),d.setPosition(e),d.setZIndex(Math.round(this.spiderfiedZIndex+b.y)),this.spiderfiedMarkers.push(d)},this))},c.prototype.getMarkerPoints=function(a){var c=[];return b.each(a,b.bind(function(a){c.push(a.markerPt)},this)),c},c.prototype.unSpiderfy=function(){this.spiderfiedMarkers.length&&(b.each(this.spiderfiedMarkers,function(a){a.originalPosition&&a.setPosition(a.originalPosition),a.leg&&a.leg.setMap(null),a.redDot&&a.redDot.setMap(null)}),this.spiderfiedMarkers=[])},c.prototype.ptDistanceSq=function(a,b){var c,d;return c=a.x-b.x,d=a.y-b.y,c*c+d*d},c.prototype.ptAverage=function(a){var c=0,d=0;return b.each(a,b.bind(function(a){c+=a.x,d+=a.y},this)),new this.gm.Point(c/a.length,d/a.length)},c.prototype.llToPt=function(a){return this.projHelper.getProjection().fromLatLngToDivPixel(a)},c.prototype.ptToLl=function(a){return this.projHelper.getProjection().fromDivPixelToLatLng(a)},c.prototype.minExtract=function(a,c){var d,e,f;return b.each(a,b.bind(function(a,b){f=this.ptDistanceSq(a.markerPt,c),(!d||f<e)&&(e=f,d=b)},this)),a.splice(d,1)[0]},c}),define("googleMapsLocationModel",["underscore","jquery","jqueryUtilityPlugins","backbone","googleMapsSingleton","objectFactory","heliosLocation","autocompleteContext","markerclusterer","markerSpiderfier"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k;return k=d.Model.extend({defaults:{title:"googleMapsLocationModel",countryGeolocationData:null,countryLatLng:null,markers:[],dealerMarkers:[],mapOptions:{draggable:!0,scrollwheel:!0,zoom:12,disableDefaultUI:!0,zoomControl:!0,streetViewControl:!0},defaultMapStyle:{styles:[],image:{url:""}},defaultMarkerProperties:{draggable:!1,raiseOnDrag:!1}},getHeliosLocationByAddress:function(a){return this.autocompleteContext.getPostalCodeByAddressName(a)},getHeliosLocationByLatLng:function(a,b){return this.autocompleteContext.getPostalCodeByCoordinatesAndCountry(a,b)},initialize:function(a){if(!google)throw new Error(this.CONSTANTS.APPLICATION.ERRORS.MAP_INTERFACE.NOT_AVAILABLE);this.content=a.content,this.CONSTANTS=a.CONSTANTS,this.TRACKING_CODES=a.TRACKING_CODES,this.SETTINGS=a.SETTINGS,this.COUNTRY_CODE=a.COUNTRY_CODE,this.eventAggregator=a.eventAggregator,this.set(this.CONSTANTS.MODEL.PROPERTIES.MARKERS,[]),this.bindEvents(),this.initializeZoomLevels(),this.initializeMarkerSettings(),this.autocompleteContext=new h({COUNTRY_CODE:this.COUNTRY_CODE,window:a.window,heliosObject:a.heliosObject})},bindEvents:function(){var b=this.CONSTANTS.MODEL,c=a.throttle(this.renderMap,b.VALUES.MAP_RENDER_THROTTLE_DELAY,{trailing:!0});this.on(b.EVENTS.MAP_API_INSTANCE_CHANGE,c),this.on(b.EVENTS.UPDATE_MAP,c)},initializeZoomLevels:function(){var a=b.isNestedProp(this,["content","dealerLocatorDialog","overview","automaticZoomLevel"])?this.content.dealerLocatorDialog.overview.automaticZoomLevel:this.CONSTANTS.MODEL.VALUES.ZOOM_LOGIC.DEFAULT_AUTOMATIC_ZOOM_LEVEL;this.set(this.CONSTANTS.MODEL.PROPERTIES.AUTOMATIC_ZOOM_LEVEL,a)},initializeMarkerSettings:function(){this.markerStateSettings=this.generateMarkerStateSettings(this.SETTINGS.markers.states,this.CONSTANTS.MODEL.OPERATORS.MIDDLE_DIVIDER),this.markerTemplates=this.generateMarkerTemplates(this.SETTINGS.markers.types,this.markerStateSettings,this.CONSTANTS.MODEL.MARKER_FILE_TYPE)},generateMarkerStateSettings:function(b,c){return a.mapObject(b,function(a){return{size:new google.maps.Size(a.width,a.height),labelAnchor:new google.maps.Point(Math.ceil(a.width/c),a.height)}})},generateMarkerTemplates:function(b,c,d){return a.mapObject(b,function(b){return a.mapObject(b,function(a,b){var e=c[b];return{icon:{url:a+d,origin:new google.maps.Point(0,0),scaledSize:e.size,size:e.size},labelAnchor:e.labelAnchor}})})},createMapInstance:function(){var b,c=this.get(this.CONSTANTS.MODEL.PROPERTIES.SELECTOR),d=this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_OPTIONS),e=new google.maps.Map(c,d);b=this.instantiateSpiderfier(e),this.set(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE,e),this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.MAP.API_READY),e.addListener(this.CONSTANTS.MODEL.EVENTS.IDLE,a.bind(function(){window.HELIOS.components.c_207=window.HELIOS.components.c_207||{},window.HELIOS.components.c_207.mapCurrentZoom=e.getZoom(),b.callSpiderfierExternally(),a.once(a.bind(this.renderMap,this))},this))},instantiateSpiderfier:function(a){var b,c;return b=this.SETTINGS.markers.spiderify?this.SETTINGS.markers.spiderify.strokeColor:this.CONSTANTS.MODEL.VALUES.CLUSTERING.SPIDER_DEFAULT_STROKE_COLOR,c=new j({map:a,spiderEvent:this.CONSTANTS.MODEL.VALUES.CLUSTERING.SPIDER_EVENT,spiderZoomLevel:this.CONSTANTS.MODEL.VALUES.CLUSTERING.MAX_ZOOM+1,legColor:b,callSpiderfierExternal:!0}),this.set(this.CONSTANTS.MODEL.PROPERTIES.SPIDERFIER,c),c},setCurrentLocationWithCoordinates:function(b,c){this.getHeliosLocationByLatLng(b,c).done(a.bind(function(a){this.set(this.CONSTANTS.MODEL.PROPERTIES.CURRENT_PLACE,a,{silent:!0}),this.trigger(this.CONSTANTS.MODEL.EVENTS.CURRENT_PLACE_CHANGE,this,a),this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.SEARCH,this.TRACKING_CODES.trackingVars.search.searchTermType.geolocation,a)},this)).fail(a.bind(function(){this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ERRORS.LOCATION_NOT_FOUND)},this))},updateCountryGeolocationData:function(){(new google.maps.Geocoder).geocode({componentRestrictions:{country:this.COUNTRY_CODE}},a.bind(function(a,b){b===google.maps.GeocoderStatus.OK&&this.set(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_GEOLOCATION_DATA,a)},this))},initMapOptions:function(){var b,c;(b=this.get(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_GEOLOCATION_DATA))&&(c=a.first(b).geometry,this.set(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_BOUNDS,c.bounds),this.set(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_LAT_LNG,new google.maps.LatLng(c.location.lat(),c.location.lng())),this.set(this.CONSTANTS.MODEL.PROPERTIES.MAP_OPTIONS,a.extend({},this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_OPTIONS),{center:this.get(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_LAT_LNG),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_STYLES),minZoom:this.getCountryZoomLevel()})))},setCountryZoomLevel:function(){var b,c=this.get(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_GEOLOCATION_DATA);c&&(this.updateMapOptions({minZoom:this.CONSTANTS.MODEL.VALUES.DEFAULT_INITIAL_MIN_ZOOM,maxZoom:this.CONSTANTS.MODEL.VALUES.DEFAULT_MAX_ZOOM}),b=this.getZoomLevelForBounds(a.first(c).geometry.bounds),this.set(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_ZOOM_LEVEL,b))},getCountryZoomLevel:function(){return this.get(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_ZOOM_LEVEL)||this.CONSTANTS.MODEL.VALUES.DEFAULT_INITIAL_MIN_ZOOM},setMapStyles:function(){this.SETTINGS.styles?this.set(this.CONSTANTS.MODEL.PROPERTIES.MAP_STYLES,this.SETTINGS.styles):this.set(this.CONSTANTS.MODEL.PROPERTIES.MAP_STYLES,this.get(this.CONSTANTS.MODEL.PROPERTIES.DEFAULT_MAP_STYLE))},initializeMap:function(a){a&&(this.set(this.CONSTANTS.MODEL.PROPERTIES.SELECTOR,a),this.setMapStyles())},updateMapOptions:function(b){var c=this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE),d=a.chain(this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_OPTIONS)).clone().extend(b).value();c&&(c.setOptions(d),this.set(this.CONSTANTS.MODEL.PROPERTIES.MAP_OPTIONS,d))},getViewportBounds:function(){var a,b=this.get(this.CONSTANTS.MODEL.PROPERTIES.SEARCH_LOCATION),c=this.get(this.CONSTANTS.MODEL.PROPERTIES.ACTIVE_DEALER);return b?a=this.getDealerMarkerBoundsForPosition(this.get(this.CONSTANTS.MODEL.PROPERTIES.SEARCH_LOCATION)):c&&(a=new google.maps.LatLngBounds(new google.maps.LatLng(c.get(this.CONSTANTS.MODEL.PROPERTIES.GEOLOCATION).latitude,c.get(this.CONSTANTS.MODEL.PROPERTIES.GEOLOCATION).longitude))),a},getDealerMarkerBoundsForPosition:function(b){var c=new google.maps.LatLngBounds,d=this.get(this.CONSTANTS.MODEL.PROPERTIES.AUTOMATIC_ZOOM_LEVEL),e=b,f=b,g=0;return c.extend(b),a.chain(this.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS)).first(this.content.dealerLocatorDialog.overview.preferredNumberOfDealers).each(function(a){var b;c.extend(a.marker.getPosition()),((b=this.getZoomLevelForBounds(c))>=d||g<this.CONSTANTS.MODEL.VALUES.ZOOM_LOGIC.MINIMUM_VISIBLE_DEALERS_REQUIRED)&&(e=c.getSouthWest(),f=c.getNorthEast(),g++)},this),new google.maps.LatLngBounds(e,f)},getZoomLevelForBounds:function(a){var b,c,d=this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE);return d?(b=d.getBounds(),d.fitBounds(a),c=d.getZoom(),b&&d.fitBounds(b)):c=this.CONSTANTS.MODEL.VALUES.ZOOM_LOGIC.DEFAULT_AUTOMATIC_ZOOM_LEVEL,c},setSearchLocation:function(b){var c,d=this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE);d?(c=f.getObject(google.maps.places.PlacesService,d),c.getDetails({placeId:b},a.bind(function(a,b){b===google.maps.places.PlacesServiceStatus.OK&&this.set(this.CONSTANTS.MODEL.PROPERTIES.SEARCH_LOCATION,a.geometry.location)},this))):this.once(this.CONSTANTS.MODEL.EVENTS.MAP_API_INSTANCE_CHANGE,function(){this.setSearchLocation(b)},this)},createMarkerDefinition:function(b,c,d){var e=this.get(this.CONSTANTS.MODEL.PROPERTIES.DEFAULT_MARKER_PROPERTIES);return b=a.extend({},e,b),{marker:null,properties:b,clickCallback:c||null,zIndex:d||this.CONSTANTS.MODEL.VALUES.DEFAULT_Z_INDEX}},renderMap:function(){this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE)&&(this.renderMarkers(),this.updateViewport(),this.redrawWhenIdle(),this.content.dealerLocatorDialog.mapView.enableClustering&&this.renderClusters())},renderMarkers:function(){var b,c=[],d=this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE),e=this.get(this.CONSTANTS.MODEL.PROPERTIES.USER_MARKER),f=this.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS),g=this.get(this.CONSTANTS.MODEL.PROPERTIES.ACTIVE_DEALER),h=this.get(this.CONSTANTS.MODEL.PROPERTIES.SPIDERFIER);this.removeAllMarkers(),b=f?a.clone(f):[],e&&b.push(e),c=a.map(b,function(a){return a.properties.map=d,a.marker=new MarkerWithLabel(a.properties),a.marker.setZIndex(a.zIndex),a.clickCallback&&google.maps.event.addListener(a.marker,"mousedown",a.clickCallback),g&&a.properties.id===g.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_ID)&&this.renderActiveDealerMarker(a,g.get(this.CONSTANTS.MODEL.PROPERTIES.ICON_STYLE)),a.marker}.bind(this)),h&&h.addMarkers(c),this.set(this.CONSTANTS.MODEL.PROPERTIES.MARKERS,c)},renderClusters:function(){var b=this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE),c=a.pluck(this.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS),"marker"),d=this.get(this.CONSTANTS.MODEL.PROPERTIES.MARKER_CLUSTER);d?(d.clearMarkers(),d.addMarkers(c)):c&&c.length>0&&(d=new i(b,c,{gridSize:this.SETTINGS.markers.clusterLevel,maxZoom:this.CONSTANTS.MODEL.VALUES.CLUSTERING.MAX_ZOOM,minimumClusterSize:this.CONSTANTS.MODEL.VALUES.CLUSTERING.MINIMUM_CLUSTER_SIZE,styles:this.SETTINGS.markers.clusters,ignoreHidden:!0}),this.set(this.CONSTANTS.MODEL.PROPERTIES.MARKER_CLUSTER,d))},updateViewport:function(){var b,c,d=this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE),e=this.get(this.CONSTANTS.MODEL.PROPERTIES.COUNTRY_BOUNDS),f=this.content.dealerLocatorDialog.overview.mapZoomLevel,g=this.content.dealerLocatorDialog.overview.dealerDeeplinkedMapZoomLevel;b=this.getViewportBounds(),this.setCountryZoomLevel(),c=this.getCountryZoomLevel(),a.isEmpty(b)||(this._setZoomLock(!this._boundsEqual(b,e)),d.fitBounds(b)),this.get(this.CONSTANTS.MODEL.PROPERTIES.SEARCH_LOCATION)?this._coordsEqual(b.getNorthEast(),b.getSouthWest())&&d.setZoom(c):this.get(this.CONSTANTS.MODEL.PROPERTIES.ACTIVE_DEALER)?d.setZoom(g||c):d.setZoom(f||c)},redrawWhenIdle:function(){var b;this.redrawHandlerRef||(b=this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_API_INSTANCE),this.redrawHandlerRef=google.maps.event.addListenerOnce(b,this.CONSTANTS.MODEL.EVENTS.IDLE,a.bind(function(){b.panBy(0,0),delete this.redrawHandlerRef},this)))},updateUserMarker:function(){var a=this.get(this.CONSTANTS.MODEL.PROPERTIES.SEARCH_LOCATION);this.set(this.CONSTANTS.MODEL.PROPERTIES.USER_MARKER,this.createMarkerDefinition({clickable:!1,title:this.content.dealerLocatorDialog.mapView.yourLocation,icon:this.markerTemplates.geoMarker.default.icon,position:a}))},setDealersMarkers:function(a){var b=a.map(function(a,b,c){var d=c.length-b,e=this.createDealerMarkerDefinition(a,d);return a.set(this.CONSTANTS.MODEL.PROPERTIES.MARKER,e),e},this);this.set(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS,b)},addDealerMarker:function(a){var b=this.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS)||[],c=b.length||1,d=this.createDealerMarkerDefinition(a,c);return a.set(this.CONSTANTS.MODEL.PROPERTIES.MARKER,d),b.push(d),this.set(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS,b),d},getMarkerByDealerId:function(b){var c=this.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS)||[];return a.find(c,function(a){return a.properties.id===b})},resetAllMarkers:function(){this.resetUserMarker(),this.resetDealersMarkers()},resetUserMarker:function(){this.unset(this.CONSTANTS.MODEL.PROPERTIES.USER_MARKER)},resetDealersMarkers:function(){this.unset(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS)},createDealerMarkerDefinition:function(b,c){var d={lat:b.get(this.CONSTANTS.MODEL.PROPERTIES.GEOLOCATION).latitude,lng:b.get(this.CONSTANTS.MODEL.PROPERTIES.GEOLOCATION).longitude},e=b.get(this.CONSTANTS.MODEL.PROPERTIES.ICON_STYLE),f=this.markerTemplates[e][b.get(this.CONSTANTS.MODEL.VALUES.DEALER.CURRENT_STATE)],g={id:b.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_ID),clickable:!0,position:new google.maps.LatLng(d.lat,d.lng),title:b.get(this.CONSTANTS.MODEL.PROPERTIES.NAME),icon:f.icon,labelContent:b.get(this.CONSTANTS.MODEL.PROPERTIES.LETTER),labelAnchor:f.labelAnchor,labelClass:this.CONSTANTS.MODEL.CSS_CLASSES.INACTIVE_LABEL+"-"+e},h=a.bind(function(){this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.DEALER_INTERACTION,this.TRACKING_CODES.componentIds.C207_3_Map,b,this.CONSTANTS.APPLICATION.ANALYTICS.DEALER_ACTION.MAP),this.setActiveDealer(b)!==this.CONSTANTS.MODEL.ERRORS.ACTIVE_DEALER_NOT_CHANGED&&this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.DEALER.DEALER_SELECT,b)},this);return this.createMarkerDefinition(g,h,c)},setActiveDealer:function(a){var b,c=this.get(this.CONSTANTS.MODEL.PROPERTIES.ACTIVE_DEALER),d=a&&a.get(this.CONSTANTS.MODEL.PROPERTIES.ICON_STYLE);if(a.get(this.CONSTANTS.MODEL.PROPERTIES.GEOLOCATION)&&a.get(this.CONSTANTS.MODEL.PROPERTIES.ICON_STYLE)&&a.get(this.CONSTANTS.MODEL.VALUES.DEALER.CURRENT_STATE)){if(c&&c.cid===a.cid)return this.CONSTANTS.MODEL.ERRORS.ACTIVE_DEALER_NOT_CHANGED;c&&c.cid!==a.cid&&this.disableActiveDealer(),b=a.get(this.CONSTANTS.MODEL.PROPERTIES.MARKER)||this.getMarkerByDealerId(a.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_ID))||this.addDealerMarker(a),this.renderActiveDealerMarker(b,d),a.set(this.CONSTANTS.MODEL.PROPERTIES.MARKER,b),this.set(this.CONSTANTS.MODEL.PROPERTIES.ACTIVE_DEALER,a)}},renderActiveDealerMarker:function(a,b){var c=this.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS)?this.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_MARKERS).length+1:1,d=this.markerTemplates[b].active;a&&a.marker&&(a.marker.setZIndex(c),a.marker.set(this.CONSTANTS.MODEL.PROPERTIES.LABEL_CLASS,this.CONSTANTS.MODEL.CSS_CLASSES.ACTIVE_LABEL+"-"+b),a.marker.set(this.CONSTANTS.MODEL.PROPERTIES.LABEL_ANCHOR,d.labelAnchor),a.marker.setIcon(d.icon))},disableActiveDealer:function(){var a=this.get(this.CONSTANTS.MODEL.PROPERTIES.ACTIVE_DEALER),b=a&&a.get(this.CONSTANTS.MODEL.PROPERTIES.ICON_STYLE),c=a&&a.get(this.CONSTANTS.MODEL.PROPERTIES.MARKER),d=b&&this.markerTemplates[b][a.get(this.CONSTANTS.MODEL.VALUES.DEALER.INITIAL_STATE)];c&&(c.marker.setZIndex(c.zIndex),c.marker.set(this.CONSTANTS.MODEL.PROPERTIES.LABEL_CLASS,this.CONSTANTS.MODEL.CSS_CLASSES.INACTIVE_LABEL+"-"+b),c.marker.set(this.CONSTANTS.MODEL.PROPERTIES.LABEL_ANCHOR,d.labelAnchor),c.marker.setIcon(d.icon),this.set(this.CONSTANTS.MODEL.PROPERTIES.ACTIVE_DEALER,null))},removeAllMarkers:function(){var b=this.get(this.CONSTANTS.MODEL.PROPERTIES.MARKERS)||[];a.invoke(b,"setMap",null),this.set(this.CONSTANTS.MODEL.PROPERTIES.MARKERS,[])},_getPlacePredictions:function(a,b){f.getObject(google.maps.places.AutocompleteService).getPlacePredictions({input:a,componentRestrictions:{country:this.COUNTRY_CODE},types:["geocode"]},b)},_geocoderResultToHeliosLocation:function(b){var c,d;return b&&(c=a.chain(b.address_components).find(function(b){return a.contains(b.types,"postal_code")}).value(),d=f.getObject(g,{location:{address:b.formatted_address,lat:b.geometry.location.lat(),lng:b.geometry.location.lng(),locationId:b.place_id},postalCode:c&&c.long_name})),d},_coordsEqual:function(b,c){return a.isEqual(b.toJSON(),c.toJSON())},_boundsEqual:function(a,b){return this._coordsEqual(a.getNorthEast(),b.getNorthEast())&&this._coordsEqual(a.getSouthWest(),b.getSouthWest())},_setZoomLock:function(a){var b=a?this.getCountryZoomLevel():0;this.get(this.CONSTANTS.MODEL.PROPERTIES.MAP_OPTIONS).minZoom!==b&&this.updateMapOptions({minZoom:b})}}),k.resolveDependencies=function(b){e.getDeferred().done(a.bind(function(){b.apply()},this))},k}),define("dealerCollection",["underscore","backbone","remoteServices"],function(a,b,c){"use strict";return b.Collection.extend({defaults:{},initialize:function(a,b){this.options=b,this.options.locationChange=!1,this.CONSTANTS=this.options.CONSTANTS,this.content=this.options.content,this.comparator=this.options.CONSTANTS.MODEL.OPTIONS.DISTANCE_COMPARATOR,this.eventAggregator=this.options.eventAggregator,this.options.location=null},sync:function(a,b,d){var e=this.options.location,f=this.content.dealerLocatorDialog.overview.maximumNumberOfDealersAllowedInAPI,g=this.options.filters,h=this.content.dealerLocatorSiteAdminSettings.serviceFilterType,i=c.getDealers(f,{lat:e.lat,long:e.long,serviceId:g,filterConditionType:h});d&&(i.fail(d.error),i.done(d.success))},parse:function(b){var c=b.dealers||JSON.parse(b).dealers,d=this.CONSTANTS.MODEL,e=this.content.dealerLocatorSiteAdminSettings;if(this._status=this.CONSTANTS.BACKBONE.EVENTS.COLLECTION.CHANGE,c&&c.length)return a.each(c,function(a){a.distance&&(a[d.OPTIONS.DISTANCE_COMPARATOR]=parseFloat(a.distance.km.toFixed(d.OPTIONS.DECIMAL_POINTS)),a[d.OPTIONS.DISTANCE_SELECTED]=parseFloat(a.distance[e.distanceUnit].toFixed(d.OPTIONS.DECIMAL_POINTS)),a[d.OPTIONS.DISTANCE_UNITS_NAME]=e.distanceUnitName,a[d.PROPERTIES.FORMATTED_ADDRESS]=this.getFormattedAddress(a)),a.contact.phone&&(a.contact.phoneNoSpace=a.contact.phone.replace(/ /g,"")),a.contact.phone&&this.content.dealerLocatorDialog.resultDetails.enableDealerNumber?a.showPhone=!0:a.showPhone=!1,a.distanceHidden=!a.distance,a.sponsoredAward=this.getConstructedSponsoredAward(a),a[d.OPTIONS.ICON_STYLE]=this.getIconStyle(a.type)||this.getIconStyle(d.OPTIONS.DEALER_TYPE_DEFAULT),a.labels=this.getLabels(a)},this),c},getFormattedAddress:function(a){return this.options.heliosAddressFormat.formatAddressAsHtml(a.address)},getIconStyle:function(b){var c=this.content.dealerLocatorSiteAdminSettings.dealerIconKeys,d="";return a.each(c,function(c){-1!==a.indexOf(c.dealerTypes,b)&&(d=c.iconStyle)},this),d},setQuery:function(a){this.options.locationChange=!0,this.options.location=a,this.fetch()},fetch:function(){this.options.location&&(this._status=this.CONSTANTS.BACKBONE.EVENTS.COLLECTION.SYNC,this.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.LOADING),b.Collection.prototype.fetch.apply(this,[{reset:!0,error:a.bind(this.onErrorHandler,this)}]))},setFilters:function(a){this.options.locationChange=!1,this.options.filters=a,this.fetch()},updateDealersLetter:function(){var a=this.CONSTANTS.MODEL.PROPERTIES.DEALER_LETTERS;this.chain().first(this.content.dealerLocatorDialog.resultDetails.maximumNumberOfItemsInResult).each(function(b,c){b.set(this.CONSTANTS.MODEL.PROPERTIES.LETTER,a.charAt(c%a.length),{silent:!0})},this)},updateState:function(){this.each(function(a,b){var c=b<this.content.dealerLocatorDialog.resultDetails.maximumNumberOfItemsInResult?this.CONSTANTS.MODEL.VALUES.STATES.DEFAULT:this.CONSTANTS.MODEL.VALUES.STATES.SECONDARY;a.set(this.CONSTANTS.MODEL.PROPERTIES.INITIAL_STATE,c),a.set(this.CONSTANTS.MODEL.PROPERTIES.CURRENT_STATE,c)},this)},sort:function(){b.Collection.prototype.sort.apply(this),this.updateDealersLetter(),this.updateState()},onErrorHandler:function(){this._status=this.CONSTANTS.BACKBONE.EVENTS.COLLECTION.ERROR,this.reset()},getPrimaryDealers:function(){return this.first(this.content.dealerLocatorDialog.resultDetails.maximumNumberOfItemsInResult)},getSecondaryDealers:function(){return this.rest(this.content.dealerLocatorDialog.resultDetails.maximumNumberOfItemsInResult)},getLabels:function(b){var c,d,e,f=this.content.dealerLocatorSiteAdminSettings.sales,g=this.content.dealerLocatorSiteAdminSettings.services,h=this.content.dealerLocatorDialog.resultDetails.informationGroupOrder,i=this.CONSTANTS.MODEL.PROPERTIES.SALES_TYPE_UPDATE,j=this.CONSTANTS.MODEL.PROPERTIES.SERVICES_TYPE_UPDATE,k=[],l=[];return a.each(b.services,function(a,b){k.push(a.id)}),a.each(h,function(b,h){var m=[];b.group!==i&&b.group!==j||!b.includeServiceLabelIcon||(e=b.group===i?f:g,a.filter(e,function(b){c=$.map(b.services,$.trim),d=a.intersection(k,c),d.length>0&&m.push(b.serviceName)}),l.push(m))}),l},getSponsoredAward:function(b){var c=this.content.dealerLocatorSiteAdminSettings.sponsoredAwards.sponsoredAward,d=a.findWhere(b.awards,{id:c.id});if(d)return d.sponsoredAwardRender=b.awards,a.extend(c,d)},getAltSponsoredAward:function(b){var c=this.content.dealerLocatorSiteAdminSettings.sponsoredAwards.altSponsoredAward,d=a.findWhere(b.awards,{id:c.id});if(d)return a.extend(c,d)},selectSponsoredAward:function(a){var b=this.getSponsoredAward(a),c=this.getAltSponsoredAward(a);return b||c||{}},setSponsoredAwardTooltip:function(b){var c=this.content.dealerLocatorDialog.resultDetails,d={showSponsoredAwardTooltip:c.showSponsoredAwardTooltip};return a.isEmpty(b.description)||a.isEmpty(b.title)?b:a.extend(b,d)},setSponsoredAwardDetailView:function(b){var c=this.content.dealerLocatorDialog.resultDetails,d={showSponsoredAwardDetailView:"listDetail"===c.sponsoredAwardListDisplay};return a.extend(b,d)},setSponsoredAwardVisibility:function(a){var b=this.content.dealerLocatorDialog.resultDetails.sponsoredAwardVisibility;return b===this.CONSTANTS.MODEL.AWARDS_VISIBILITY.ICON_LABEL?(delete a.desktopImage,a.sponsoredAwardVisibility=this.CONSTANTS.MODEL.AWARDS_VISIBILITY.ICON_LABEL):b===this.CONSTANTS.MODEL.AWARDS_VISIBILITY.AWARD_IMAGE?(delete a.label,a.sponsoredAwardVisibility=this.CONSTANTS.MODEL.AWARDS_VISIBILITY.AWARD_IMAGE):b===this.CONSTANTS.MODEL.AWARDS_VISIBILITY.AWARD_IMAGE_LABEL&&(a.sponsoredAwardVisibility=this.CONSTANTS.MODEL.AWARDS_VISIBILITY.AWARD_IMAGE_LABEL),a},getConstructedSponsoredAward:function(a){var b=this.selectSponsoredAward(a);return b&&(b=this.setSponsoredAwardTooltip(b),b=this.setSponsoredAwardDetailView(b),b=this.setSponsoredAwardVisibility(b)),b}})}),define("dealerDetailsModel",["underscore","backbone","jquery","c_207AbstractModel","storageManager"],function(a,b,c,d,e){"use strict";return d.extend({initialize:function(){d.prototype.initialize.apply(this,arguments),this.CONSTANTS=this.getConstants(),this.DEALER_PROPERTIES=this.CONSTANTS.APPLICATION.PROPERTIES.DEALER},getDetailsElements:function(b){var c=[],d=a.union(this.getDefaultSections(),this.getDetailsSections());return b=b||{},a.each(d,function(d){var e;a.isFunction(this[d.method])&&(e=this[d.method](b,d)),e&&e.data&&(e.label=d.label||"",c.push(e))},this),c},getDefaultSections:function(){return this.getConstants().MODEL.DEFAULT_SECTIONS},getDetailsSections:function(){var b=c.extend(!0,{},this.getContent().resultDetails&&this.getContent().resultDetails.informationGroupOrder);return a.filter(b,function(a){return a.method=this.getMethod(a),a.method},this)},getMethod:function(b){var c=this.getConstants().MODEL.DETAILS_SECTIONS,d=a.findWhere(c,{group:b.group});return d&&d.method},getGeneralDealerDetails:function(){var a=this.get(this.DEALER_PROPERTIES.ID),b=this.get(this.DEALER_PROPERTIES.DEALER_ID);if(a&&b)return{type:this.DEALER_PROPERTIES.GENERAL_DETAILS_TYPE,data:{id:a,dealerId:b,siteId:this.get(this.DEALER_PROPERTIES.SITE_ID),urlId:this.get(this.DEALER_PROPERTIES.URL_ID),name:this.get(this.DEALER_PROPERTIES.NAME),group:this.get(this.DEALER_PROPERTIES.GROUP),type:this.get(this.DEALER_PROPERTIES.TYPE),markerStyle:this.get(this.DEALER_PROPERTIES.MARKER_STYLE)||this.getContent().defaultIconStyle,geolocation:this.get(this.DEALER_PROPERTIES.GEOLOCATION),formattedAddress:this.formattedAddress||this.get(this.CONSTANTS.MODEL.PROPERTIES.FORMATTED_ADDRESS),letter:this.dealerModelLetter,dealerDistance:this.dealerDistance,sponsoredAward:this.dealerModel.get(this.CONSTANTS.MODEL.PROPERTIES.SPONSORED_AWARD),salesServiceLabel:this.dealerModel.get(this.CONSTANTS.MODEL.PROPERTIES.LABELS_UPDATE)}}},getBackLinkDetails:function(){var a=this.options.userModel.get(this.CONSTANTS.APPLICATION.PROPERTIES.USER.USER_CONTEXT)||{},b=c.getDataFromObject(a,[this.CONSTANTS.APPLICATION.PROPERTIES.USER.ORIGINS,this.CONSTANTS.APPLICATION.REGIONS.DEALER_DETAILS]);if(b&&b.type!==this.CONSTANTS.APPLICATION.PROPERTIES.USER.NONE)return{type:this.DEALER_PROPERTIES.GENERAL_BACK_LINK,data:{results:b.type===this.CONSTANTS.APPLICATION.PROPERTIES.USER.RESULTS,link:b.link,text:b.text}}},getPreferredDealer:function(b){var c=this.CONSTANTS.MODEL.ELEMENTS.OPTIONS.PREFERRED_DEALER,d={mode:"cookie"},f=this.getContent(),g=a.pluck(this.get(this.DEALER_PROPERTIES.GENERAL_SERVICES_TYPE),this.DEALER_PROPERTIES.ID),h=a.chain(b[c.MANDATORY_SERVICES]||[]).difference(g).isEmpty().value();return b[c.IS_PREFERRED_DEALER]?{type:this.DEALER_PROPERTIES.GENERAL_PREFERRED_DEALER,data:{indicatorText:f.preferredDealerView.preferredDealerIndicatorText,myAccountButton:b[c.ADDED_IN_CURRENT_SESSION]?{label:f.resultDetails.backToAccountLabel,path:f.resultDetails.backToAccountPath,analyticsLocationOnPage:this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.PREFERRED_DEALER_DETAILS}:null}}:b[c.IS_ENABLED]&&h&&e.loadItem("OwnerServicesLoggedInName",d)?{type:this.DEALER_PROPERTIES.GENERAL_SET_PREFERRED_DEALER_CTA,data:{setCTAText:f.preferredDealerView.preferredDealerSetCTAText}}:void 0},getDealerContact:function(){var a=this.get(this.DEALER_PROPERTIES.GENERAL_CONTACT_TYPE);if(a)return{
type:this.DEALER_PROPERTIES.GENERAL_CONTACT_TYPE,data:a}},getOpeningHours:function(){var b,c=this.get(this.DEALER_PROPERTIES.GENERAL_OPENING_HOURS_TYPE),d=this.getContent(this.DEALER_PROPERTIES.WEEK_DAYS_LABELS),e=this.options.window.HELIOS.config.common.locale;if(c)return a.each(c.regularOpeningHours,function(a){a.weekDay=d[a.weekDay-1]},this),a.each(c.specialOpeningHours,function(a){b=new Date(a.startDate),a.weekDay=b.toLocaleDateString(e,{month:"short",day:"numeric"}),a.startDate!==a.endDate&&(b=new Date(a.endDate),a.weekDay+=" - "+b.toLocaleDateString(e,{month:"short",day:"numeric"}))},this),c.regularOpeningHours||c.specialOpeningHours||c.openingHoursText||(c.hidden=!0),{type:this.DEALER_PROPERTIES.GENERAL_OPENING_HOURS_TYPE,data:c}},getAwards:function(){var a=this.get(this.DEALER_PROPERTIES.GENERAL_AWARDS_TYPE);if(a&&a.length)return{type:this.DEALER_PROPERTIES.GENERAL_AWARDS_TYPE,data:{awards:a}}},getRatings:function(){var a=this.get(this.DEALER_PROPERTIES.GENERAL_AVERAGE_RATINGS_TYPE);if(a)return{type:this.DEALER_PROPERTIES.GENERAL_AVERAGE_RATINGS_TYPE,data:{averageStarRating:a}}},getSpokenLanguages:function(){var a=this.get(this.DEALER_PROPERTIES.GENERAL_SPOKEN_LANGUAGES_TYPE);if(a&&a.length)return{type:this.DEALER_PROPERTIES.GENERAL_SPOKEN_LANGUAGES_TYPE,data:{spokenLanguages:a}}},getSales:function(b,d){var e,f=c.extend(!0,[],this.get(this.DEALER_PROPERTIES.GENERAL_SALES_TYPE)),g=(this.getContent().resultDetails.informationGroupOrder,this.getContent(this.DEALER_PROPERTIES.WEEK_DAYS_LABELS)),h=this.options.window.HELIOS.config.common.locale,i=this.DEALER_PROPERTIES.SHORT,j=this.DEALER_PROPERTIES.NUMERIC;if(d.group===this.DEALER_PROPERTIES.GENERAL_SALES_TYPE&&(e=d),f&&f.length){var k,l,m,n,o,p,q=e.includeServiceDetail,r=e.includeServicePhone,s=e.includeOpeningHoursText,t=e.excludeServiceDetail,u=e.expandAccordion;return a.each(f,function(b){var c,d;b.phones=a.reject(b.phones,function(b){return a.isEmpty(b)}),t&&!k&&r&&(k=Boolean(b.phones&&b.phones.length)),t&&!l&&s&&(l=Boolean(b.openingHours&&b.openingHours.openingHoursText)),t&&!n&&(n=Boolean(b.link&&b.linkLabel)),b.showPhones=Boolean(b.phones&&b.phones.length&&r),b.showLink=Boolean(b.link&&b.linkLabel),b.showOpeningHoursText=Boolean(s),b.showExpandAccordion=Boolean(u),b.showExcludeServiceDetail=Boolean(t),b.openingHours&&b.openingHours.openingHoursText&&s&&(b.openingHours.showOpeningHoursText=Boolean(b.openingHours&&b.openingHours.openingHoursText)),b.openingHours&&b.openingHours.regularOpeningHours&&q&&(c=b.openingHours&&b.openingHours.regularOpeningHours,d=b.openingHours&&b.openingHours.specialOpeningHours,b.openingHours.showRegularOpeningHours=Boolean(c&&c.length),b.openingHours.showSpecialOpeningHours=Boolean(d&&d.length),t&&!m&&(m=b.openingHours.showRegularOpeningHours),t&&!p&&(p=b.openingHours.showSpecialOpeningHours),a.each(b.openingHours.regularOpeningHours,function(a){a.weekDay=g[a.weekDay-1]})),b.openingHours&&b.openingHours.specialOpeningHours&&q&&(d=b.openingHours&&b.openingHours.specialOpeningHours,b.openingHours.showSpecialOpeningHours=Boolean(d&&d.length),a.each(b.openingHours.specialOpeningHours,function(a){var b=new Date(a.startDate);a.weekDay=b.toLocaleDateString(h,{month:i,day:j}),a.startDate!==a.endDate&&(b=new Date(a.endDate),a.weekDay+=" - "+b.toLocaleDateString(h,{month:i,day:j}))}))}),(l||k||m||!t||n||p)&&(o=!0),{type:this.DEALER_PROPERTIES.GENERAL_SALES_TYPE,showStructuredOpeningHours:q,showPhones:r,showOpeningHoursText:e.includeOpeningHoursText,showFinalLabelResult:o,analyticsLocationOnPage:this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.SERVICES,data:{sales:f,showStructuredOpeningHours:q||!1,showPhones:r||!1,showOpeningHoursText:e.includeOpeningHoursText||!1,showTooltip:e.showTooltip||!1}}}},getHolidayCalendarUrl:function(a,b){var c,d=this.get(this.DEALER_PROPERTIES.GENERAL_OPENING_HOURS_URL);this.getContent().resultDetails.informationGroupOrder;if(b.group===this.DEALER_PROPERTIES.GENERAL_HOLIDAY_CALENDER&&(c=b),d&&d.length)return{type:this.DEALER_PROPERTIES.GENERAL_HOLIDAY_CALENDER,holidayCalenderLabel:c.holidayCalendarLink,analyticsLocationOnPage:this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.HOLIDAY_CALENDAR,data:{openingHoursUrl:d}}},getServices:function(b,d){var e,f=c.extend(!0,[],this.get(this.DEALER_PROPERTIES.GENERAL_SERVICES_TYPE)),g=(this.getContent().resultDetails.informationGroupOrder,this.getContent(this.DEALER_PROPERTIES.WEEK_DAYS_LABELS)),h=this.options.window.HELIOS.config.common.locale,i=this.DEALER_PROPERTIES.SHORT,j=this.DEALER_PROPERTIES.NUMERIC;if(d.group===this.DEALER_PROPERTIES.GENERAL_SERVICES_TYPE&&(e=d),f&&f.length){var k,l,m,n,o,p,q=e.includeServiceDetail,r=e.includeServicePhone,s=e.includeOpeningHoursText,t=e.excludeServiceDetail,u=e.expandAccordion;return a.each(f,function(b){var c,d;b.phones=a.reject(b.phones,function(b){return a.isEmpty(b)}),t&&!k&&r&&(k=Boolean(b.phones&&b.phones.length)),t&&!l&&s&&!a.isUndefined(b.openingHours)&&(l=Boolean(b.openingHours.openingHoursText)),t&&!n&&(n=Boolean(b.link&&b.linkLabel)),b.showPhones=Boolean(b.phones&&b.phones.length&&r),b.showLink=Boolean(b.link&&b.linkLabel),b.showOpeningHoursText=Boolean(s),b.showExpandAccordion=Boolean(u),b.showExcludeServiceDetail=Boolean(t),b.openingHours&&b.openingHours.openingHoursText&&s&&(b.openingHours.showOpeningHoursText=Boolean(b.openingHours&&b.openingHours.openingHoursText)),b.openingHours&&b.openingHours.regularOpeningHours&&q&&(c=b.openingHours&&b.openingHours.regularOpeningHours,d=b.openingHours&&b.openingHours.specialOpeningHours,b.openingHours.showRegularOpeningHours=Boolean(c&&c.length),b.openingHours.showSpecialOpeningHours=Boolean(d&&d.length),t&&!m&&(m=b.openingHours.showRegularOpeningHours),t&&!p&&(p=b.openingHours.showSpecialOpeningHours),a.each(b.openingHours.regularOpeningHours,function(a){a.weekDay=g[a.weekDay-1]})),b.openingHours&&b.openingHours.specialOpeningHours&&q&&(d=b.openingHours&&b.openingHours.specialOpeningHours,b.openingHours.showSpecialOpeningHours=Boolean(d&&d.length),a.each(b.openingHours.specialOpeningHours,function(a){var b=new Date(a.startDate);a.weekDay=b.toLocaleDateString(h,{month:i,day:j}),a.startDate!==a.endDate&&(b=new Date(a.endDate),a.weekDay+=" - "+b.toLocaleDateString(h,{month:i,day:j}))}))}),(l||k||m||!t||n||p)&&(o=!0),{type:this.DEALER_PROPERTIES.GENERAL_SERVICES_TYPE,showStructuredOpeningHours:q,showPhones:r,showOpeningHoursText:e.includeOpeningHoursText,showFinalLabelResult:o,analyticsLocationOnPage:this.CONSTANTS.APPLICATION.ANALYTICS.LOCATION_IN_PAGE.SERVICES,data:{services:f,showStructuredOpeningHours:q||!1,showPhones:r||!1,showOpeningHoursText:e.includeOpeningHoursText||!1,showTooltip:e.showTooltip||!1}}}},getPrimaryCtas:function(){var a,b=this.get(this.DEALER_PROPERTIES.GENERAL_CTAS_TYPE),c=this.get(this.DEALER_PROPERTIES.DEALER_ID);if(b&&b.length&&(a=this.parseCtas(b.filter(this.checkPrimaryCta.bind(this,!0)))))return{type:this.DEALER_PROPERTIES.GENERAL_PRIMARY_CTA_TYPE,data:{ctas:a,dealerId:c}}},getSecondaryCtas:function(){var a,b=this.get(this.DEALER_PROPERTIES.GENERAL_CTAS_TYPE),c=this.get(this.DEALER_PROPERTIES.DEALER_ID);if(b&&(a=this.parseCtas(b.filter(this.checkPrimaryCta.bind(this,!1))),a.length))return{type:this.DEALER_PROPERTIES.GENERAL_SECONDARY_CTAS_TYPE,data:{ctas:a,dealerId:c}}},getDetails:function(a){this.fetch({url:this.url(a.get(this.CONSTANTS.MODEL.PROPERTIES.DEALER_ID))},this),this.dealerModel=a,this.dealerModelLetter=a.get(this.CONSTANTS.MODEL.PROPERTIES.LETTER),this.dealerDistance=a.get(this.CONSTANTS.MODEL.PROPERTIES.DISTANCE_SELECTED)+a.get(this.CONSTANTS.MODEL.PROPERTIES.DISTANCE_UNIT_NAME),this.formattedAddress=a.get(this.CONSTANTS.MODEL.PROPERTIES.FORMATTED_ADDRESS),this.sponsoredAward=a.get(this.CONSTANTS.MODEL.PROPERTIES.SPONSORED_AWARD)},setDealerModelById:function(a){this.dealerModel=this.dealerModel||new b.Model,this.dealerModel.set(this.CONSTANTS.MODEL.PROPERTIES.DEALER_ID,a)},getDealerModel:function(){return this.dealerModel},url:function(a){return this.getContent(this.CONSTANTS.MODEL.PROPERTIES.BASE_URL).replace(this.CONSTANTS.MODEL.PROPERTIES.DEALER_ID_TOKEN,a)},parse:function(a){var b=this.getConstants().MODEL;return a.contact.websites=this.updateWebsiteLabels(a.contact.websites),a.contact.email=this.updateEmailLabel(a.contact.email),a.contact.phones=this.updatePhoneLabel(a.contact.phones),a.spokenLanguages=this.updateSpokenLanguages(a.spokenLanguages),a.contact.getDirections=this.updateGetDirectionsObject(a.geolocation),a[b.PROPERTIES.ICON_STYLE]=this.getIconStyle(a.type)||this.getIconStyle(b.PROPERTIES.DEALER_TYPE_DEFAULT),a[b.PROPERTIES.INITIAL_STATE]=b.VALUES.STATES.DEFAULT,a[b.PROPERTIES.CURRENT_STATE]=b.VALUES.STATES.DEFAULT,a[b.PROPERTIES.FORMATTED_ADDRESS]=this.getFormattedAddress(a),a[b.PROPERTIES.SALES_TYPE_UPDATE]=a.sales,a[b.PROPERTIES.SERVICES_UPDATE]=a.services,this.updateDealerModel(a),a},updateDealerModel:function(b){var c=this.getConstants().MODEL,d=this.getContent().resultDetails.informationGroupOrder,e=b[c.PROPERTIES.SALES_TYPE_UPDATE],f=b[c.PROPERTIES.SERVICES_UPDATE],g=this.CONSTANTS.MODEL.PROPERTIES.SALES_TYPE_UPDATE,h=this.CONSTANTS.MODEL.PROPERTIES.SERVICES_UPDATE,i=[];a.each(d,function(a,b){a.group!==g&&a.group!==h||!a.includeServiceLabelIcon||(a.group===g?i.push(e):i.push(f))}),this.dealerModel&&(this.dealerModel.get(this.CONSTANTS.MODEL.PROPERTIES.LABELS_UPDATE)||this.dealerModel.set(this.CONSTANTS.MODEL.PROPERTIES.LABELS_UPDATE,i),this.dealerModel.get(c.PROPERTIES.ICON_STYLE)||this.dealerModel.set(c.PROPERTIES.ICON_STYLE,b[c.PROPERTIES.ICON_STYLE]),this.dealerModel.get(c.PROPERTIES.INITIAL_STATE)||this.dealerModel.set(c.PROPERTIES.INITIAL_STATE,b[c.PROPERTIES.INITIAL_STATE]),this.dealerModel.get(c.PROPERTIES.CURRENT_STATE)||this.dealerModel.set(c.PROPERTIES.CURRENT_STATE,b[c.PROPERTIES.CURRENT_STATE]),this.dealerModel.get(c.PROPERTIES.GEOLOCATION)||this.dealerModel.set(c.PROPERTIES.GEOLOCATION,b[c.PROPERTIES.GEOLOCATION]),this.dealerModel.get(c.PROPERTIES.FORMATTED_ADDRESS)||this.dealerModel.set(c.PROPERTIES.FORMATTED_ADDRESS,b[c.PROPERTIES.FORMATTED_ADDRESS]),this.dealerModel.get(this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.ADDRESS)||this.dealerModel.set(this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.ADDRESS,b[this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.ADDRESS]),this.dealerModel.get(this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.ID)||this.dealerModel.set(this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.ID,b[this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.ID]),this.dealerModel.get(this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.NAME)||this.dealerModel.set(this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.NAME,b[this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.NAME]),this.dealerModel.get(this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.TYPE)||this.dealerModel.set(this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.TYPE,b[this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.TYPE]))},getDealerId:function(){return this.get(this.getConstants().MODEL.PROPERTIES.DEALER_ID)},getFormattedAddress:function(a){return this.options.heliosAddressFormat.formatAddressAsHtml(a[this.CONSTANTS.APPLICATION.PROPERTIES.DEALER.ADDRESS])},getIconStyle:function(b){var c=this.getContent().dealerIconKeys,d="";return a.each(c,function(c){a.contains(c.dealerTypes,b)&&(d=c.iconStyle)}),d},updateWebsiteLabels:function(b){var c,d=this.getContent().resultDetails;return a.each(b,function(a,b){c=this.DEALER_PROPERTIES.DEALER_WEBSITE+(b+1),a.siteName=d[c]||"",delete a.identifier},this),b},updateEmailLabel:function(a){var b=this.getContent().resultDetails;return{label:b[this.DEALER_PROPERTIES.DEALER_EMAIL],value:a}},updateSpokenLanguages:function(b){var c=this.getContent().spokenLanguages;return a.filter(c,function(c){return a.contains(b,c.code)})},updatePhoneLabel:function(b){var c=this.getContent().resultDetails[this.DEALER_PROPERTIES.DEALER_PHONES];return a.filter(b,function(b,d){return b.label=c[d],!a.isUndefined(b.label)},this)},updateGetDirectionsObject:function(a){var b=this.getContent().resultDetails,c=b[this.DEALER_PROPERTIES.DEALER_GET_DIRECTIONS_URL];if(c)return c=c.replace("^LAT^",a.latitude||"").replace("^LON^",a.longitude||""),{label:b[this.DEALER_PROPERTIES.DEALER_GET_DIRECTIONS],url:c}},parseCtas:function(b){return a.chain(b).map(function(b){return a.each(this.CONSTANTS.MODEL.CTAS.MODEL_MAPPINGS,function(a){b.link=this.options.window.decodeURI(b.link).replace(this.CONSTANTS.MODEL.CTAS.URL_PARAM_TOKEN+a.PLACEHOLDER+this.CONSTANTS.MODEL.CTAS.URL_PARAM_TOKEN,this.options.window.encodeURIComponent(this.get(a.PROPERTY)))},this),b},this).value()},checkPrimaryCta:function(a,b){return b.isPrimaryCTA===a}})}),define("userModel",["underscore","backbone"],function(a,b){"use strict";return b.Model.extend({defaults:{currentLocation:null,userContext:null},initialize:function(b){this.CONSTANTS=b.CONSTANTS,this.content=b.content,this.originParams=this._buildOriginParams(),this.noOrigin=a.findWhere(this.originParams,{type:this.CONSTANTS.APPLICATION.PROPERTIES.USER.NONE}),this.dealerListViewOrigin=a.findWhere(this.originParams,{type:this.CONSTANTS.APPLICATION.PROPERTIES.USER.RESULTS})},setCurrentLocation:function(a){this.set(this.CONSTANTS.MODEL.PROPERTIES.CURRENT_LOCATION,a)},setUserContext:function(a,b){switch(a){case this.CONSTANTS.APPLICATION.PROPERTIES.USER.STATES.DEEP_LINK:this.set(this.CONSTANTS.MODEL.PROPERTIES.USER_CONTEXT,this._buildDeepLinkUserContext(b));break;case this.CONSTANTS.APPLICATION.PROPERTIES.USER.STATES.AUTOMATIC_SEARCH:this.set(this.CONSTANTS.MODEL.PROPERTIES.USER_CONTEXT,this._buildAutoSearchUserContext(b));break;case this.CONSTANTS.APPLICATION.PROPERTIES.USER.STATES.MANUAL_SEARCH:this.set(this.CONSTANTS.MODEL.PROPERTIES.USER_CONTEXT,this._buildManualSearchUserContext(b))}},_buildDeepLinkUserContext:function(b){var c=b.dealerId,d=a.findWhere(this.originParams,{type:b.origin||""});return{state:this.CONSTANTS.APPLICATION.PROPERTIES.USER.STATES.DEEP_LINK,dealerId:c,origins:{dealerList:d,dealerDetails:c&&d?d:this.noOrigin},showYourLocationIcon:!1}},_buildAutoSearchUserContext:function(a){return this._buildUserContext(this.CONSTANTS.APPLICATION.PROPERTIES.USER.STATES.AUTOMATIC_SEARCH,a)},_buildManualSearchUserContext:function(a){return this._buildUserContext(this.CONSTANTS.APPLICATION.PROPERTIES.USER.STATES.MANUAL_SEARCH,a)},_buildUserContext:function(b,c){var d;return c=c||{},d=a.findWhere(this.originParams,{type:c.origin||""}),{state:b,origins:{dealerList:d,dealerDetails:this.dealerListViewOrigin},showYourLocationIcon:!0}},_buildOriginParams:function(){var b=[],c=this.content.dealerLocatorBackLinks;return a.each(c,function(a){b.push({type:a.originParameterValue,link:a.backLinkPath,text:a.backLinkText})}),b.push({type:this.CONSTANTS.APPLICATION.PROPERTIES.USER.NONE}),b.push({type:this.CONSTANTS.APPLICATION.PROPERTIES.USER.RESULTS,text:this.content.backToResults}),b}})}),define("c_207_ToolTip",["jquery","marionette","qTip","trackingCodes"],function(a,b,c,d){"use strict";return b.ItemView.extend({template:!1,initialize:function(a){this.options=a,this.CONSTANTS=a.model.getConstants(),this.PROPERTIES=this.CONSTANTS.OPTIONS.PROPERTIES,this.SELECTORS=this.CONSTANTS.VIEW.SELECTORS,this.CSS_CLASSES=this.CONSTANTS.VIEW.CSS_CLASSES,this.EVENTS=this.CONSTANTS.VIEW.EVENTS,this.initUI(),this.closeTooltipsOnResize()},initUI:function(){this.ui={tooltip:this.CONSTANTS.VIEW.SELECTORS.TOOLTIP_TRIGGER}},createToolTip:function(a){this.setupTooltip(a)},setupTooltip:function(a){var b={$trigger:a,tooltipID:a.attr(this.SELECTORS.TOOLTIP_DATA_ID),tooltipMy:a.data(this.SELECTORS.TOOLTIP_DATA_MY_POSITION)||this.PROPERTIES.MY_POSITION,tooltipContainer:a.data(this.SELECTORS.TOOLTIP_DATA_CONTAINER),tooltipViewPort:a.data(this.SELECTORS.TOOLTIP_DATA_VIEWPORT)};this.addQtip(b)},addQtip:function(a){a.$trigger.qtip({content:this.getContent(a),position:this.getPositionConfiguration(a),events:this.getTooltipEvents(a),show:this.getShowConfiguration(),hide:this.getHideConfiguration()}).on(this.CONSTANTS.VIEW.EVENTS.TOOLTIP_EVENT,_.bind(this.onClickQTip,this))},onClickQTip:function(a){a.stopPropagation(),a.preventDefault()},trackAnalytics:function(a){this.options.eventAggregator.trigger(this.CONSTANTS.APPLICATION.EVENTS.ANALYTICS.TOOLTIP_DISPLAY,d.componentIds.C207_2_Results_List,a.currentTarget)},getContent:function(b){var c="["+this.SELECTORS.TOOLTIP_DATA_ID+'="'+b.tooltipID+'"]';return{text:b.$trigger.parent().find(c).next().clone(),button:a("<a />").attr("href","#").addClass(this.CSS_CLASSES.TOOLTIP_CLOSE)}},getPositionConfiguration:function(a){var b=a.$trigger.parent(),c=a.$trigger.parent();return a.tooltipContainer&&(b=a.$trigger.closest(a.tooltipContainer)),a.tooltipViewPort&&(c=a.$trigger.closest(a.tooltipViewPort)),{my:a.tooltipMy,target:a.$trigger,at:this.PROPERTIES.AT_TARGET,container:b,viewport:c,adjust:{method:this.PROPERTIES.VIEWPORT_FLIP_METHOD,y:this.PROPERTIES.Y_OFFSET_TOP,x:this.PROPERTIES.X_OFFSET_CENTRAL}}},getTooltipEvents:function(a){return{toggle:_.bind(this.toggleTooltipEvent,this,a),show:_.bind(this.showTooltipEvent,this),hidden:_.bind(this.hideTooltipEvent,this),render:_.bind(this.fixPositionTooltip,this)}},toggleTooltipEvent:function(a,b){a.$trigger.toggleClass(this.CSS_CLASSES.TOOLTIP_TRIGGER_ACTIVE,b.type!==this.EVENTS.TOOLTIP_HIDE)},showTooltipEvent:function(a,b){this.fixPositionTooltip(a,b),this.trackAnalytics(a.originalEvent)},closeTooltipsOnResize:function(){var b=this.CONSTANTS.VIEW.SELECTORS.ROOT,c=this.CONSTANTS.VIEW.SELECTORS.OPEN_QTIP,d=this.CONSTANTS.VIEW.EVENTS.HIDE;a(this.options.window).on(this.CONSTANTS.VIEW.EVENTS.VIEWPORT_RESIZE,_.debounce(function(){a(b).find(c).qtip(d)},this.CONSTANTS.VIEW.OPTIONS.DEBOUNCE_TIME))},hideTooltipEvent:function(a,b){b.target.isElementVisible()&&b.target.focus()},fixPositionTooltip:function(a,b){var c=b.target.offsetParent()[0].offsetTop+b.target.position().top+a.originalEvent.target.offsetHeight,d=b.target.offsetParent()[0].offsetLeft+b.target.position().left+a.originalEvent.target.offsetWidth/2,e=[d,c];b.set(this.PROPERTIES.POSITION_TARGET,e)},getShowConfiguration:function(){return{event:this.EVENTS.TOOLTIP_EVENT,solo:!0}},getHideConfiguration:function(){return{event:this.PROPERTIES.HIDE_EVENT,fixed:!1}}})}),define("heliosAddressFormat",["jquery","underscore","handlebars"],function(a,b,c){"use strict";var d,e={ADDRESS_FIELDS:{SPECIAL_FIELDS:{ITEM_SEPARATOR:{EXPRESSION:"{{commaAndSpace}}",HTML:", ",ID:"commaAndSpace"},NEW_LINE:{EXPRESSION:"{{{nextLine}}}",HTML:"<br />",ID:"nextLine"}}},OPTION_KEYS:{ADDRESS_FIELD_ORDER:"addressFieldOrder"}};return d=function(b){b=b||{},this.settings=a.extend({},e,b)},d.prototype._getAddressFieldOrder=function(){return this.settings[this.settings.OPTION_KEYS.ADDRESS_FIELD_ORDER]},d.prototype.formatAddressAsHtml=function(a){var d,e=a||{},f=this.settings.ADDRESS_FIELDS.SPECIAL_FIELDS,g=b.pluck(f,"ID"),h=b.chain(this._getAddressFieldOrder()).pluck("id").filter(function(a){return e[a]||b.contains(g,a)}).map(function(a){return b.contains(g,a)?b.findWhere(f,{ID:a}).EXPRESSION:"{{"+a+"}} "}).value().join("").trim();return h=h.replace(new RegExp("( "+f.ITEM_SEPARATOR.EXPRESSION+")","g"),f.ITEM_SEPARATOR.EXPRESSION),h=h.replace(new RegExp("( "+f.NEW_LINE.EXPRESSION+")","g"),f.NEW_LINE.EXPRESSION),h=h.replace(new RegExp("("+f.ITEM_SEPARATOR.EXPRESSION+"){2,}","g"),f.ITEM_SEPARATOR.EXPRESSION),h=h.replace(new RegExp("(^("+f.ITEM_SEPARATOR.EXPRESSION+")*|("+f.ITEM_SEPARATOR.EXPRESSION+")*$)","g"),""),h=h.replace(new RegExp(f.NEW_LINE.EXPRESSION+f.ITEM_SEPARATOR.EXPRESSION,"g"),f.NEW_LINE.EXPRESSION),h=h.replace(new RegExp("("+f.NEW_LINE.EXPRESSION+"){2,}","g"),f.NEW_LINE.EXPRESSION),h=h.replace(new RegExp("(^"+f.NEW_LINE.EXPRESSION+"|"+f.NEW_LINE.EXPRESSION+"$)","g"),""),h=h.replace(new RegExp("("+f.ITEM_SEPARATOR.EXPRESSION+f.NEW_LINE.EXPRESSION+")","g"),f.NEW_LINE.EXPRESSION),d=c.compile(h),d(b.extend({},e,b.object(g,b.pluck(f,"HTML"))))},d}),define("mainControllerDealerLocator",["underscore","jquery","locationControllerDealerLocator","marionette","backbone","mainViewDealerLocator","objectFactory","profileManager","c_207_tabsNavigationView","userControllerDealerLocator","analyticsControllerDealerLocator","mapControllerDealerLocator","dealersController","dealerDetailsController","errorsController","navigationControllerDealerLocator","headerBarViewDealerLocator","c_207_SetPreferredDealerController","c_207_1Model","c_207_1View","c_207_2DealerDetailsModel","c_207_2DealerDetailsView","c_207_2DealerCollectionView","c_207_2DealerMainView","c_207_2DealerListPanelView","c_207_2DealerErrorsView","c_207_3Model","c_207_3View","c_207_3MapMainView","c_207_3MapOverlayView","c_207_4Model","c_207_4View","c_207_5CollectionView","c_207_6FiltersCompositeView","c_207_FilterGroupCollection","c_207_Constants","c_207_ApplicationConstants","trackingCodes","googleMapsLocationModel","dealerCollection","dealerDetailsModel","userModel","c_207AbstractModel","c_207_ToolTip","autocompleteEventHandler","heliosAddressFormat","urlParameterDecoder","c_207_DealerDetailsCollection"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V){"use strict";return e.Marionette.Controller.extend({initialize:function(b){this.options=b,this._resolveDependencies().done(a.bind(function(){this._initMainView(),this._initModels(),this._initComponents(),this._initSubControllers(),this.options.eventAggregator.trigger(K.APPLICATION.EVENTS.APPLICATION_READY)},this))},_resolveDependencies:function(){var c=b.Deferred();return this.heliosAddressFormat=new T({addressFieldOrder:this.options.content.dealerLocatorDialog.resultDetails.address||{}}),U.init(),this.componentSettings=a.extend({},this.options.window.HELIOS.components.c_207.settings,this.options.window.HELIOS.config.common.mapStyles),this.MapInterfaceClass=M,this.MapInterfaceClass.resolveDependencies(function(){c.resolve()}),c},_initMainView:function(){this.mainView=new f({CONSTANTS:a.extend({},J,K),window:this.options.window,document:this.options.document,VIEWPORT_MATCHERS:{IS_SMALL:this.options.window.HELIOS.config.common.mediaQuery.is.small,IS_MEDIUM:this.options.window.HELIOS.config.common.mediaQuery.is.medium,IS_LARGE:this.options.window.HELIOS.config.common.mediaQuery.is.large}}),this.options.region.appRegion.show(this.mainView)},_initModels:function(){this._initMapInterface(),this._initFilterGroupCollection(),this._initDealersCollection(),this._initUserModel(),this._initDealerDetailsModel()},_initMapInterface:function(){this.mapsInterface=new this.MapInterfaceClass(this._extendBaseInitObject({CONSTANTS:a.extend({},J.MAPS_INTERFACE,K),TRACKING_CODES:L,COUNTRY_CODE:this.options.window.HELIOS.config.common.countryCode,content:this.options.content,heliosObject:this.options.window.HELIOS}))},_initFilterGroupCollection:function(){this.filterGroupCollection=new I(this.options.content.dealerLocatorDialog.filtersView.dealerFilterGroups,this._extendBaseInitObject({CONSTANTS:a.extend({},J.FILTERS,K),content:this.options.content}))},_initDealersCollection:function(){this.dealerCollection=new N(null,this._extendBaseInitObject({CONSTANTS:a.extend({},J.DEALERS,K),content:this.options.content,filters:this.filterGroupCollection.getActiveFilters(),heliosAddressFormat:this.heliosAddressFormat}))},_initDealerDetailsModel:function(){this.dealerDetailsModel=new O({},this._extendBaseInitObject({CONSTANTS:a.extend({},J.DEALER_DETAILS,K),content:{baseURL:this.options.content.dealerLocatorURLs.details,weekDaysLabels:this.options.content.dealerLocatorSiteAdminSettings.weekDaysLabels,resultDetails:this.options.content.dealerLocatorDialog.resultDetails,preferredDealerView:this.options.content.dealerLocatorDialog.preferredDealerView,sponsoredAwards:this.options.content.dealerLocatorSiteAdminSettings.sponsoredAwards,defaultIconStyle:a.first(this.options.content.dealerLocatorSiteAdminSettings.dealerIconKeys).iconStyle,spokenLanguages:this.options.content.dealerLocatorSiteAdminSettings.spokenLanguages,dealerIconKeys:this.options.content.dealerLocatorSiteAdminSettings.dealerIconKeys},userModel:this.userModel,heliosAddressFormat:this.heliosAddressFormat}))},_initUserModel:function(){this.userModel=new P(this._extendBaseInitObject({CONSTANTS:a.extend({},J.USER_MODEL,K),content:{backToResults:this.options.content.dealerLocatorDialog.resultDetails.backToResults,dealerLocatorBackLinks:this.options.content.dealerLocatorSiteAdminSettings.dealerLocatorBackLinks}}))},_initComponents:function(){this._initHeaderBarViewComponent(),this._initToolTipComponent(),this._initSearchBoxComponent(),this._initTabsNavigationComponent(),this._initMapComponent(),this._initMapOverlayComponent(),this._initIconKeysComponent(),this._initDealerListPanelComponent(),this._initDealerListComponent(),this._initDealerDetailsComponent(),this._initFiltersComponent(),this._initFooterComponent(),this._initErrorsComponent()},_initHeaderBarViewComponent:function(){this.headerBarViewComponent=this._createComponent(q,Q,J,this.options.content.dealerLocatorDialog.overview),this.mainView.showChildView(K.APPLICATION.REGIONS.HEADER_BAR,this.headerBarViewComponent)},_initSearchBoxComponent:function(){var b,c,d=t;this.options.content.dealerLocatorDialog.overview.enableSearchViaLocation||(d=e.View),b=new s({},this._extendBaseInitObject({CONSTANTS:a.extend({},J.c_207_1,K),TRACKING_CODES:L,content:this.options.content.dealerLocatorDialog.locationInput,smartLocationContext:this.options.smartLocationContext})),this.searchBox=new d({model:b,window:this.options.window,templateHelpers:{content:this.options.content.dealerLocatorDialog.locationInput}}),this.mainView.showChildView(K.APPLICATION.REGIONS.SEARCH_BOX,this.searchBox),this.options.content.dealerLocatorDialog.overview.enableSearchViaLocation&&(c=new S({COUNTRY_CODE:this.options.window.HELIOS.config.common.countryCode,window:this.options.window,inputElement:b.getConstants().VIEW.SELECTORS.INPUT,selectors:b.getConstants().VIEW.SELECTORS,eventAggregator:this.options.eventAggregator,heliosObject:this.options.window.HELIOS})),this.searchBox.setAutocompleteEventHandler&&this.searchBox.setAutocompleteEventHandler(c)},_initTabsNavigationComponent:function(){this.tabsNavigationComponent=this._createComponent(i,Q,J.TABS_VIEW,this.options.content.dealerLocatorDialog.overview),this.mainView.showChildView(K.APPLICATION.REGIONS.TABS_NAVIGATION,this.tabsNavigationComponent)},_initDealerListPanelComponent:function(){this.dealerMainView=this._createComponent(x,Q,J.c_207_2),this.dealerListPanelView=new y({CONSTANTS:a.extend({},J,K)}),this.mainView.showChildView(K.APPLICATION.REGIONS.DEALERS_VIEW,this.dealerMainView),this.dealerMainView.showChildView(K.APPLICATION.REGIONS.DEALERS_LIST_PANEL,this.dealerListPanelView)},_initDealerListComponent:function(){this.dealerList=this._createComponent(w,e.Collection,J.c_207_2,this.options.content,null,{tooltip:this.tooltip,TRACKING_CODES:L}),this.dealerListPanelView.showChildView(K.APPLICATION.REGIONS.DEALERS_LIST,this.dealerList)},_initDealerDetailsComponent:function(){var a=this.options.content.dealerLocatorDialog&&this.options.content.dealerLocatorDialog.resultDetails;a&&!a.dealerWebsite1&&a.dealerWebsite2&&(a.dealerWebsite1=a.dealerWebsite2),this.dealerDetails=this._createComponent(v,e.Collection,J.c_207_2,a,null,{tooltip:this.tooltip,TRACKING_CODES:L}),this.dealerMainView.showChildView(K.APPLICATION.REGIONS.DEALER_DETAILS,this.dealerDetails)},_initToolTipComponent:function(){this.tooltip=this._createComponent(R,Q,J.TOOLTIP)},_initFiltersComponent:function(){var b=H;!this.options.content.dealerLocatorDialog.filtersView.hideFilterComponent&&this.filterGroupCollection.getVisibleFilterCount()||(b=e.View),this.filters=new b({window:this.options.window,CONSTANTS:a.extend({},J.c_207_6,K),TRACKING_CODES:L,eventAggregator:this.options.eventAggregator,collection:this.filterGroupCollection,model:new e.Model,content:this.options.content.dealerLocatorDialog.filtersView,templateHelpers:{content:this.options.content.dealerLocatorDialog.filtersView},tooltip:this.tooltip}),this.dealerListPanelView.showChildView(K.APPLICATION.REGIONS.FILTERS,this.filters)},_initMapComponent:function(){this.mapMainView=new C({CONSTANTS:a.extend({},J,K),eventAggregator:this.options.eventAggregator}),this.map=this._createComponent(B,A,J.c_207_3,{},{isSmall:this.options.window.HELIOS.config.common.mediaQuery.is.small,isMedium:this.options.window.HELIOS.config.common.mediaQuery.is.medium,isLarge:this.options.window.HELIOS.config.common.mediaQuery.is.large}),this.mainView.showChildView(K.APPLICATION.REGIONS.MAP_MAIN,this.mapMainView),this.mapMainView.showChildView(K.APPLICATION.REGIONS.MAP,this.map)},_initMapOverlayComponent:function(){this.mapOverlay=this._createComponent(D,Q,J.c_207_3,this.options.content.dealerLocatorDialog.overview),this.mapMainView.showChildView(K.APPLICATION.REGIONS.MAP_OVERLAY,this.mapOverlay)},_initIconKeysComponent:function(){this.iconKeys=this._createComponent(F,E,J.c_207_4,this.options.content),this.mapMainView.showChildView(K.APPLICATION.REGIONS.ICON_KEYS,this.iconKeys)},_initFooterComponent:function(){var b,c=G,d=this.options.content.dealerLocatorDialog.footerView;b=a.any(d,function(b){return!a.isEmpty(b)&&b.label}),b||(c=e.View),this.footer=this._createComponent(c,e.Collection,J.c_207_5,d,d,{TRACKING_CODES:L}),this.dealerMainView.showChildView(K.APPLICATION.REGIONS.FOOTER,this.footer)},_initErrorsComponent:function(){this.errors=this._createComponent(z,Q,J.c_207_2),this.dealerMainView.showChildView(K.APPLICATION.REGIONS.ERRORS,this.errors)},_initSubControllers:function(){this._initUserSubController(),this._initMapSubController(),this._initNavigationSubController(),this._initAnalyticsSubController(),this._initDealersSubController(),this._initDealerDetailsSubController(),this._initErrorsSubController(),this._initLocationController(),this._initSetPreferredDealerController()},_initUserSubController:function(){this.userController=new j(this._extendBaseInitObject({userModel:this.userModel,searchBoxComponent:this.searchBox,mapsInterface:this.mapsInterface,enableSmartLocation:this.options.content.dealerLocatorDialog.overview.enableSmartLocation,navigator:this.options.window.navigator}))},_initMapSubController:function(){this.mapController=new l(this._extendBaseInitObject({mapsInterface:this.mapsInterface,mapComponent:this.map,searchBoxComponent:this.searchBox,iconKeysComponent:this.iconKeys,dealerCollection:this.dealerCollection,mapMainView:this.mapMainView}))},_initNavigationSubController:function(){this.navigationController=new p(this._extendBaseInitObject({content:this.options.content,tabsNavigationComponent:this.tabsNavigationComponent,filtersComponent:this.filters,mainView:this.mainView,dealerMainView:this.dealerMainView}))},_initAnalyticsSubController:function(){this.analyticsController=new k(this._extendBaseInitObject({analyticsManager:this.options.analyticsManager,TRACKING_CODES:L,filterGroupCollection:this.filterGroupCollection}))},_initDealersSubController:function(){this.dealersController=new m(this._extendBaseInitObject({mapsInterface:this.mapsInterface,mapComponent:this.map,searchBoxComponent:this.searchBox,dealerListPanel:this.dealerListPanelView,dealerListComponent:this.dealerList,dealerCollection:this.dealerCollection,mainView:this.mainView,dealerMainView:this.dealerMainView,mapMainView:this.mapMainView,filterGroupCollection:this.filterGroupCollection,filtersComponent:this.filters,content:this.options.content}))},_initDealerDetailsSubController:function(){this.dealerDetailsController=new n(this._extendBaseInitObject({dealerDetailsModel:this.dealerDetailsModel,filterGroupCollection:this.filterGroupCollection,dealerDetails:this.dealerDetails,dealerMainView:this.dealerMainView,analyticsManager:this.options.analyticsManager,content:this.options.content}))},_initErrorsSubController:function(){this.errorsController=new o(this._extendBaseInitObject({mainView:this.mainView,errorsView:this.errors,dealerMainView:this.dealerMainView,mapMainView:this.mapMainView,content:this.options.content.dealerLocatorDialog}))},
_initLocationController:function(){g.getObject(c,this._extendBaseInitObject({mapsInterface:this.mapsInterface,smartLocationContext:this.options.smartLocationContext,TRACKING_CODES:L}))},_initSetPreferredDealerController:function(){this.setPreferredDealerController=new r(this._extendBaseInitObject({dealerMainView:this.dealerMainView,analyticsManager:this.options.analyticsManager,content:this.options.content}))},_extendBaseInitObject:function(b){return a.extend({},b,{app:this.options.app,eventAggregator:this.options.eventAggregator,window:this.options.window,SETTINGS:this.componentSettings})},_createComponent:function(b,c,d,f,g,h){var i=a.extend({},d,K),j=new c(g,this._extendBaseInitObject({CONSTANTS:i,content:f||{}})),k=a.extend({},{window:this.options.window,templateHelpers:{content:f||{}}},h);return k.eventAggregator=this.options.eventAggregator,j instanceof e.Collection||j instanceof V?(k.CONSTANTS=i,k.collection=j):k.model=j,new b(k)}})}),define("mainRouterDealerLocator",["backbone","marionette"],function(a,b){"use strict";return b.AppRouter.extend({})}),define("c_207",["jquery","underscore","backbone","marionette","objectFactory","mainControllerDealerLocator","mainViewDealerLocator","c_207_ApplicationConstants","mainRouterDealerLocator","storageManager"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b){var c;return c=a(n.app),!!c.length&&new m(b)}var l,m,n={app:".c_207"},o=null;return m=function(b){o=a.extend({},n,b),this.init()},m.prototype.init=function(){if(l=a(o.app),1!==l.length)throw new Error(h.APPLICATION.ERRORS.INIT.MULTIPLE_INSTANCES);this._initContentObject(),this._setupApplication()},m.prototype._activateFiltersByRequestParamValue=function(a,c){c&&c.length&&b.each(a,function(a){b.each(a.filters,function(a){!a.applyOnLoad&&b.contains(c,a.requestParamValue)&&(a.applyOnLoad=!0)})})},m.prototype._getDeepLinkedFilterRequestParamValues=function(){var a=[],b=h.APPLICATION.PROPERTIES.DEALER.DEALER_FILTERS,c=new RegExp("[?&]"+b+"="),d=j.loadItem("queryParamsData",{mode:"sessionStorage"});return d&&d.dealerFilters&&c.test(o.window.location.search)&&(a=d[b].split(",")),a},m.prototype._initContentObject=function(){var c,d=a(o.app+" script[data-content]");if(!d.length)throw new Error(h.APPLICATION.ERRORS.CONFIG.NOT_DEFINED);try{c=JSON.parse(b.unescape(d[0].innerHTML))}catch(error){throw new Error(h.APPLICATION.ERRORS.CONFIG.UNABLE_TO_PARSE)}this._activateFiltersByRequestParamValue(c.dealerLocatorDialog.filtersView.dealerFilterGroups,this._getDeepLinkedFilterRequestParamValues()),o.content=c},m.prototype._setupApplication=function(){var a=new d.Application;a.name=h.APPLICATION.PROPERTIES.NAME,a.model=h.APPLICATION.PROPERTIES.MODEL,a.regionManager=new d.RegionManager,a.el=l.get(0),a.addRegions({appRegion:".main-view"}),this._setUpController(a),a.mainRouter=new i({controller:a.mainController}),a.on("start",function(){c.History.started||c.history.start()})},m.prototype._setUpController=function(a){a.mainController=new f({app:a,content:o.content,region:a.getRegions(),smartLocationContext:o.smartLocationContext,window:o.window,eventAggregator:b.extend({},c.Events),analyticsManager:o.analyticsManager})},{C_207:m,init:k}}),define("c_208_0",["jquery","contentCarousel","trackingCodes"],function(a,b,c){"use strict";var d,e={events:{click:"click",focus:"focus"},classes:{currentSlide:"current-slide",currentContent:"current-item",trackedSlide:"tracked-slide",verticalCenter:"vertical-center"},selectors:{root:".c_208-0",carousel:".slick-carousel",slide:".slick-slide",slideNoImage:".slide-inner.no-image",currentSlideCaption:".slide-caption p",content:".content-block-wrapper",currentContent:".current-item",c_28_6:".c_028-6",contentItem:".grid-row"},slick:{cssEase:"ease-in-out",dots:!1,speed:400,infinite:!1,rtl:!1,slidesToShow:5,slidesToScroll:1,variableWidth:!1,responsive:[{breakpoint:{},settings:{slidesToShow:4,slidesToScroll:1}},{breakPoint:{},settings:{slidesToShow:2,slidesToScroll:1}}]},quotientFactor:1.4};return d=function(a,b){this.settings=this.initSettings(b),this.$el=a,this.settings.slick.onSetPosition=this.applyHeight.bind(this),this.setRtl(),this.initCarousel(),this.bindEvents(),this.checkVideoSlide(0)},d.prototype.initSettings=function(b){var c=a.extend(!0,{},e);return c.slick.responsive[0].breakpoint=b.HELIOS.config.common.mediaQuery.breakpointsPx.large,c.slick.responsive[1].breakpoint=b.HELIOS.config.common.mediaQuery.breakpointsPx.mediumMin,a.extend({},c,b)},d.prototype.bindEvents=function(){this.$el.find(this.settings.selectors.slide).each(this.trackSingleSlide.bind(this))},d.prototype.trackSingleSlide=function(b,c){a(c).on(this.settings.events.click+" "+this.settings.events.focus,this.trackContent.bind(this))},d.prototype.setRtl=function(){"rtl"===a("html").attr("dir")&&(this.settings.slick.rtl=!0)},d.prototype.initCarousel=function(){b.init(this.$el.find(this.settings.selectors.carousel),this.settings)},d.prototype.applyHeight=function(){this.$el.find(this.settings.selectors.slideNoImage).each(this.calculateHeight.bind(this))},d.prototype.calculateHeight=function(b,c){var d=a(c).find(this.settings.selectors.currentSlideCaption);d.height()<=d.parent().height()/this.settings.quotientFactor&&d.addClass(this.settings.classes.verticalCenter)},d.prototype.trackContent=function(a){this.changeContent(a),this.trackingChangeContent(a)},d.prototype.pauseVideos=function(){this.$el.find(this.settings.selectors.c_28_6).each(function(b,c){a(c).find(".video")[0].pause()})},d.prototype.checkVideoSlide=function(b){var c=this.$el.find(this.settings.selectors.content).children(this.settings.selectors.contentItem);c.eq(b).find(this.settings.selectors.c_28_6).each(_.bind(function(b,d){if(a(d).data("autoplay")){var e=a(d).find(".video")[0];!a(d).attr("data-pause")&&this._isElementInViewport(c[0])?e.play():e.pause()}},this))},d.prototype._isElementInViewport=function(a){var b=a.getBoundingClientRect();return b.top<=(window.innerHeight||document.documentElement.clientHeight)&&b.left>=0&&b.right<=(window.innerWidth||document.documentElement.clientWidth)&&b.bottom>=0},d.prototype.changeContent=function(b){var c=a(b.currentTarget),d=c.index(),e=this.$el.find(this.settings.selectors.slide),f=this.$el.find(this.settings.selectors.content).children(this.settings.selectors.contentItem),g=f.eq(d);e.removeClass(this.settings.classes.currentSlide),f.removeClass(this.settings.classes.currentContent),c.addClass(this.settings.classes.currentSlide),g.addClass(this.settings.classes.currentContent),this.pauseVideos(),this.checkVideoSlide(d)},d.prototype.trackingChangeContent=function(b){var d=a(b.currentTarget),e=d.hasClass(this.settings.classes.trackedSlide),f=this.settings.analyticsManager,g=d.find(this.settings.selectors.currentSlideCaption).html(),h={componentId:c.componentIds.C208_Content_Caption,pageName:document.title+"|"+g};if(e)return!1;d.addClass(this.settings.classes.trackedSlide).siblings().removeClass(this.settings.classes.trackedSlide),f.tag(f.trackingVars.virtualPage,h)},d}),function(a){"function"==typeof define&&define.amd?define("eventMove",["jquery"],a):a(jQuery)}(function(a,b){function c(a){function b(a){d?(c(),M(b),e=!0,d=!1):e=!1}var c=a,d=!1,e=!1;this.kick=function(a){d=!0,e||b()},this.end=function(a){var b=c;a&&(e?(c=d?function(){b(),a()}:a,d=!0):a())}}function d(){return!0}function e(){return!1}function f(a){a.preventDefault()}function g(a){N[a.target.tagName.toLowerCase()]||a.preventDefault()}function h(a){return 1===a.which&&!a.ctrlKey&&!a.altKey}function i(a,b){var c,d;if(a.identifiedTouch)return a.identifiedTouch(b);for(c=-1,d=a.length;++c<d;)if(a[c].identifier===b)return a[c]}function j(a,b){var c=i(a.changedTouches,b.identifier);if(c&&(c.pageX!==b.pageX||c.pageY!==b.pageY))return c}function k(a){var b;h(a)&&(b={target:a.target,startX:a.pageX,startY:a.pageY,timeStamp:a.timeStamp},J(document,O.move,l,b),J(document,O.cancel,m,b))}function l(a){s(a,a.data,a,n)}function m(a){n()}function n(){K(document,O.move,l),K(document,O.cancel,m)}function o(a){var b,c;N[a.target.tagName.toLowerCase()]||(b=a.changedTouches[0],c={target:b.target,startX:b.pageX,startY:b.pageY,timeStamp:a.timeStamp,identifier:b.identifier},J(document,P.move+"."+b.identifier,p,c),J(document,P.cancel+"."+b.identifier,q,c))}function p(a){var b=a.data,c=j(a,b);c&&s(a,b,c,r)}function q(a){var b=a.data;i(a.changedTouches,b.identifier)&&r(b.identifier)}function r(a){K(document,"."+a,p),K(document,"."+a,q)}function s(a,b,c,d){var e=c.pageX-b.startX,f=c.pageY-b.startY;e*e+f*f<I*I||v(a,b,c,e,f,d)}function t(){return this._handled=d,!1}function u(a){a._handled()}function v(a,b,c,d,e,f){var g,h;b.target;g=a.targetTouches,h=a.timeStamp-b.timeStamp,b.type="movestart",b.distX=d,b.distY=e,b.deltaX=d,b.deltaY=e,b.pageX=c.pageX,b.pageY=c.pageY,b.velocityX=d/h,b.velocityY=e/h,b.targetTouches=g,b.finger=g?g.length:1,b._handled=t,b._preventTouchmoveDefault=function(){a.preventDefault()},L(b.target,b),f(b.identifier)}function w(a){var b=a.data.timer;a.data.touch=a,a.data.timeStamp=a.timeStamp,b.kick()}function x(a){var b=a.data.event,c=a.data.timer;y(),D(b,c,function(){setTimeout(function(){K(b.target,"click",e)},0)})}function y(a){K(document,O.move,w),K(document,O.end,x)}function z(a){var b=a.data.event,c=a.data.timer,d=j(a,b);d&&(a.preventDefault(),b.targetTouches=a.targetTouches,a.data.touch=d,a.data.timeStamp=a.timeStamp,c.kick())}function A(a){var b=a.data.event,c=a.data.timer;i(a.changedTouches,b.identifier)&&(B(b),D(b,c))}function B(a){K(document,"."+a.identifier,z),K(document,"."+a.identifier,A)}function C(a,b,c,d){var e=c-a.timeStamp;a.type="move",a.distX=b.pageX-a.startX,a.distY=b.pageY-a.startY,a.deltaX=b.pageX-a.pageX,a.deltaY=b.pageY-a.pageY,a.velocityX=.3*a.velocityX+.7*a.deltaX/e,a.velocityY=.3*a.velocityY+.7*a.deltaY/e,a.pageX=b.pageX,a.pageY=b.pageY}function D(a,b,c){b.end(function(){return a.type="moveend",L(a.target,a),c&&c()})}function E(a,b,c){return J(this,"movestart.move",u),!0}function F(a){return K(this,"dragstart drag",f),K(this,"mousedown touchstart",g),K(this,"movestart",u),!0}function G(a){"move"!==a.namespace&&"moveend"!==a.namespace&&(J(this,"dragstart."+a.guid+" drag."+a.guid,f,b,a.selector),J(this,"mousedown."+a.guid,g,b,a.selector))}function H(a){"move"!==a.namespace&&"moveend"!==a.namespace&&(K(this,"dragstart."+a.guid+" drag."+a.guid),K(this,"mousedown."+a.guid))}var I=6,J=a.event.add,K=a.event.remove,L=function(b,c,d){a.event.trigger(c,d,b)},M=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){return window.setTimeout(function(){a()},25)}}(),N={textarea:!0,input:!0,select:!0,button:!0},O={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},P={move:"touchmove",cancel:"touchend",end:"touchend"};a.event.special.movestart={setup:E,teardown:F,add:G,remove:H,_default:function(a){function d(b){C(f,g.touch,g.timeStamp),L(a.target,f)}var f,g;a._handled()&&(f={target:a.target,startX:a.startX,startY:a.startY,pageX:a.pageX,pageY:a.pageY,distX:a.distX,distY:a.distY,deltaX:a.deltaX,deltaY:a.deltaY,velocityX:a.velocityX,velocityY:a.velocityY,timeStamp:a.timeStamp,identifier:a.identifier,targetTouches:a.targetTouches,finger:a.finger},g={event:f,timer:new c(d),touch:b,timeStamp:b},a.identifier===b?(J(a.target,"click",e),J(document,O.move,w,g),J(document,O.end,x,g)):(a._preventTouchmoveDefault(),J(document,P.move+"."+a.identifier,z,g),J(document,P.end+"."+a.identifier,A,g)))}},a.event.special.move={setup:function(){J(this,"movestart.move",a.noop)},teardown:function(){K(this,"movestart.move",a.noop)}},a.event.special.moveend={setup:function(){J(this,"movestart.moveend",a.noop)},teardown:function(){K(this,"movestart.moveend",a.noop)}},J(document,"mousedown.move",k),J(document,"touchstart.move",o),"function"==typeof Array.prototype.indexOf&&function(a,b){for(var c=["changedTouches","targetTouches"],d=c.length;d--;)-1===a.event.props.indexOf(c[d])&&a.event.props.push(c[d])}(a)}),function(a){a.fn.twentytwenty=function(b){return b=a.extend({default_offset_pct:.5,orientation:"horizontal"},b),this.each(function(){var c=b.default_offset_pct,d=a(this),e=b.orientation,f="vertical"===e?"down":"left",g="vertical"===e?"up":"right",h=(d.parent(),"ltr"===a("html").attr("dir")?"left":"right");d.wrap("<div class='twentytwenty-wrapper twentytwenty-"+e+"'></div>"),d.append("<div class='twentytwenty-overlay'></div>");var i=d.find("img:first"),j=d.find("img:last");d.append("<div class='twentytwenty-handle' tabindex='0'></div>");var k=d.find(".twentytwenty-handle");k.append("<span class='twentytwenty-"+f+"-arrow'></span>"),k.append("<span class='twentytwenty-"+g+"-arrow'></span>"),d.addClass("twentytwenty-container"),i.addClass("twentytwenty-before"),j.addClass("twentytwenty-after");var l=d.find(".twentytwenty-overlay");l.append("<div class='twentytwenty-before-label'></div>"),l.append("<div class='twentytwenty-after-label'></div>");var m=function(a){var b=i.width(),c=i.height(),d=a*b,e=a*c;switch(h){case"left":d<22?d=22:d>b-18&&(d=b-18);break;case"right":d<=0?d=0:d>b-40&&(d=b-40)}return e<22?e=22:e>c-18&&(e=c-18),{w:b+"px",h:c+"px",cw:d+"px",ch:e+"px",numberW:b,numberH:c,numberCw:d,numberCh:e}},n=function(a){var b=a.numberW-a.numberCw-18+"px";"vertical"===e?(d.css("height",i.height()),d.css("width",""),d.css("width",i.width()),i.css("clip","rect(0,"+i.width()+"px,"+a.ch+",0)")):("left"===h?i.css("clip","rect(0,"+a.cw+","+a.h+",0)"):i.css("clip","rect(0,"+a.w+","+a.h+","+b+")"),d.css("height",i.height()))},o=function(a){var b=m(a);k.css("vertical"===e?"top":h,"vertical"===e?b.ch:b.cw),n(b)};a(window).on("resize.twentytwenty",function(a){o(c)});var p=0,q=0,r=0;k.on("movestart",function(b){d.removeClass("twentytwenty-active"),k.blur(),(b.distX>b.distY&&b.distX<-b.distY||b.distX<b.distY&&b.distX>-b.distY)&&"vertical"!==e?b.preventDefault():(b.distX<b.distY&&b.distX<-b.distY||b.distX>b.distY&&b.distX>-b.distY)&&"vertical"===e&&b.preventDefault(),d.addClass("active"),p=d.offset().left,r=a(window).width()-(d.offset().left+d.outerWidth()),offsetY=d.offset().top,q=i.width(),imgHeight=i.height(),d.trigger("analyticsEvent")}),k.on("moveend",function(a){d.removeClass("active")}),k.on("move",function(b){d.hasClass("active")&&(c="vertical"===e?(b.pageY-offsetY)/imgHeight:(b.pageX-p)/q,"right"===h&&"vertical"!==e&&(c=(a(window).width()-b.pageX-r)/q),c<0&&(c=0),c>1&&(c=1),o(c))}),d.find("img").on("mousedown",function(a){a.preventDefault()}),k.on("touchmove",function(a){a.preventDefault()}),a(window).trigger("resize.twentytwenty"),k.on("keydown",function(a){if("horizontal"!==e||37!==a.keyCode&&39!==a.keyCode)"vertical"!==e||38!==a.keyCode&&40!==a.keyCode||(a.preventDefault(),38==a.keyCode&&c>0?c-=.1:40==a.keyCode&&c<1&&(c+=.1),s(c));else{switch(a.preventDefault(),h){case"left":37===a.keyCode&&c>0?c-=.1:39==a.keyCode&&c<1&&(c+=.1);break;case"right":37===a.keyCode&&c<1?c+=.1:39==a.keyCode&&c>0&&(c-=.1)}s(c)}});var s=function(a){a=Math.round(100*a/10)/10,a<0&&(a=0),a>1&&(a=1),o(a),d.trigger("analyticsEvent")};k.focus(function(){d.addClass("twentytwenty-active")}).focusout(function(){d.removeClass("twentytwenty-active")})})}}(jQuery),define("twentyTwenty",function(){}),define("c_212",["jquery","eventMove","twentyTwenty","pictureFill","underscore"],function(a,b,c,d,e){"use strict";function f(b,c){var d=a.extend(!0,{},g);this.settings=a.extend({},d,c),this.$el=b,this.imageSlider()}var g={selectors:{root:".c_212",sliderContainer:".slider-container",img:".picture-element img"},data:{offset:"offset",orientation:"orientation"},analytics:{componentId:"C212_Image_Comparison_Slider",interactionCall:"panInteraction",interactionType:"comparison-slider"},events:{analytics:"analyticsEvent",load:"load"},properties:{componentId:"componentId",interationType:"interactionType"}};return f.prototype.imageSlider=function(){e.each(a(this.settings.selectors.sliderContainer,this.$el),this.setBindAnalyticsSlider,this)},f.prototype.setBindAnalyticsSlider=function(b){var c,d=a(b);d.on(this.settings.events.analytics,e.bind(this.analytics,this)),picturefill(d),c=a(b).find(this.settings.selectors.img),c.length&&c.get(0).complete?this.configureSlider(d):c.one(this.settings.events.load,e.bind(this.configureSlider,this,d))},f.prototype.configureSlider=function(a){a.twentytwenty(this.getSliderConfig(a))},f.prototype.getSliderConfig=function(a){return{default_offset_pct:a.closest(this.$el).data(this.settings.data.offset),orientation:a.closest(this.$el).data(this.settings.data.orientation)}},f.prototype.analytics=function(b){var c=a(b),d={};d[this.settings.properties.componentId]=this.settings.analytics.componentId,d[this.settings.properties.interationType]=this.settings.analytics.interactionType,this.settings.analyticsManager.tag(this.settings.analytics.interactionCall,d),c.off(this.settings.analytics.analyticsEvent)},f.prototype.destroy=function(){this.$el.remove(),delete this.settings},f}),define("c_211_0",["jquery","pictureFill","trackingCodes"],function(a,b,c){"use strict";function d(c){if(p=a.extend({},o,c),i=a(p.selectors.root),j=p.selectors.modelWrapper,k=p.selectors.modelTitle,l=p.selectors.modelPicture,m=p.selectors.fullModelName,n=a(p.selectors.analyticsTarget),!i.length)return!1;h(),b(i)}function e(b){var d,e=a(b.target).closest(j),h=a(b.target),i=g(e),k=a(m).html(),l="not found",n=q.genericClick,o={};d=p.analyticsManager.getTrackingObjectProperties(n),o[d.componentId]=c.componentIds.C211_split_model,o[d.destination]=h.attr("href")||"",o[d.locationInPage]="split-model-panel",o[d.buttonText]=f(h,i),o[d.vehicleModel]=HELIOS.adobe.tagging.vehicleModel||k,o[d.vehicleId]=i||l,o[d.vehicleCategory]=HELIOS.adobe.tagging.vehicleCategory||l,p.analyticsManager.tag(n,o)}function f(a,b){var c=p.classes.imageSuffix,d=p.classes.configCl;return a.closest(l).length?b+c:a.hasClass(d)?b+"-"+a.text():""}function g(a){return a.find(k).html()}function h(){n.on(p.events.click,e)}var i,j,k,l,m,n,o={events:{click:"click"},selectors:{root:".c_211-0",modelWrapper:".body-item",modelTitle:".type",modelPicture:".picture-element",description:".description",cta:".cta",fullModelName:".body-heading .name",analyticsTarget:".analytics-target"},classes:{imageSuffix:"-image",configCl:"cta"}},p=null,q=c.eventTypes;return{init:d}}),define("c_214",["jquery","tabbedContent"],function(a,b){"use strict";function c(c){h=a.extend({},f,c);var e=a(h.root);e.length&&e.each(function(){var c=a(this);g.push(new b(c,h)),d(c)})}function d(a){a.on("click",h.selectors.vehicleLink,e)}function e(b){var c=a(b.currentTarget),d=a.trim(c.find(h.selectors.vehicleNameWrapper).first().text()),e=c.attr("href"),f=h.analyticsManager.trackingVars.genericClick,g={componentId:h.analytics.componentId,destination:e,locationInPage:h.analytics.locationInPage,buttonText:d};h.analyticsManager.tag(f,g)}var f={root:".c_214",selectors:{vehicleLink:".vehicle-block",vehicleNameWrapper:".vehicle-in-category-name-inner"},analytics:{componentId:"C214_Homepage_Range_Selector",locationInPage:"model-picker",toggleType:"model-picker"}},g=[],h={};return{init:c}}),define("c_216",["jquery","underscore","trackingCodes","logger"],function(a,b,c,d){"use strict";function e(b,c){if(!b.length)return g.warn("$el was not found. Please check root selector."),!1;this.settings=a.extend({},f,c),this.$el=b,this._bindEvents()}var f={events:{click:"click.c_216"},selectors:{linkUrl:".link-title a"}},g=new d({prefix:"c_216"});return e.prototype._bindEvents=function(){this.$el.find(this.settings.selectors.linkUrl).on(this.settings.events.click,null,{analyticsManager:this.settings.analyticsManager},this._trackLinkClick)},e.prototype._unbindEvents=function(){this.$el.find(this.settings.selectors.linkUrl).off(this.settings.events.click)},e.prototype._trackLinkClick=function(b){var d=b.data.analyticsManager,e={componentId:c.componentIds.C216_Listed_Links,destination:a(b.target).attr("href"),buttonText:a(b.target).text(),locationInPage:"listed-links"};d&&d.tag(d.trackingVars.genericClick,e)},e.prototype.destroy=function(){this._unbindEvents(),delete this.settings},e}),define("c_215",["jquery","underscore","trackingCodes","c_001","c_001B","c_005","c_005_0B","c_015","c_027","c_028","c_029","c_036","c_212","c_208_0","c_216","logger"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function q(b){if(B=a.extend({},z,b),y=a(B.selectors.root),!y.length)return C.warn("c_215 selector was not found. Please check root selector"),!1;r()}function r(){var c=a(B.selectors.dropdowns),d=a(B.selectors.root);d.attr(B.type.activated)||(d.attr(B.type.activated,!0),b.each(c,function(b){a(b).change(t)}),a(B.selectors.trackedValue).on(B.events.change,s))}function s(b){var d=B.analyticsManager,e=a(b.currentTarget),f=e.parents(B.selectors.groupSelectBox).find(B.selectors.dropdownTitle).html(),g=e.parents(B.selectors.groupSelectBox).find(B.selectors.trackedSelectedValue).html(),h={componentId:c.componentIds.C215_Linked_Dropdowns,searchType:"linked-dropdown",searchFilter:f,searchFilterValue:g};d.tag(d.trackingVars.search,h)}function t(c){var d,e=a(c.target),f=e.parents(B.selectors.root),g=f.find(B.selectors.dropdowns),h=f.find(B.selectors.dropdownsContainer),i=f.find(B.selectors.content),j=parseInt(e.data(B.attributes.level)),k=parseInt(h.data(B.attributes.totalLevels)),l=e.val();c.stopPropagation(),b.each(g,function(b){if(j<a(b).data(B.attributes.level)){var c=a(b).find(B.tags.option).first().clone(),d=a(b).find(B.tags.option).first().html();a(b).empty().html(c),a(b).siblings(B.selectors.selectedValue).html(d),a(b).attr(B.attributes.disabled,!0),i.empty()}}),d=u(l,function(){i.addClass(B.classes.ajaxLoading),B.ajaxRequest=!0}),d.then(function(a){i.removeClass(B.classes.ajaxLoading),j===k?x(a,f):v(a,j,k,f)})}function u(b,c){return!(!b||B.ajaxRequest)&&a.ajax({url:b,beforeSend:c})}function v(a,b,c,d){b===c-1?w(a,B.type.html,b,d):w(a,B.type.json,b,d)}function w(a,c,d,e){var f=e.find(B.selectors.dropdowns),g=a;return b.each(g,function(a){f.eq(d).append('<option value="'+a[c]+'">'+a.label+"</option>")}),f.eq(d).removeAttr(B.attributes.disabled),B.ajaxRequest=!1,d}function x(c,d){var e=d.find(B.selectors.content),f=a(c).find(B.selectors.dropdownEditorial);return f.find("script").not('[type="text/template"]').remove(),e.html(f.html()),b.each(A,function(b){e.find(b.selector).length&&e.find(b.selector).each(function(c,d){new b.component(a(d),{HELIOS:B.HELIOS,analyticsManager:B.analyticsManager,window:B.window})}.bind(this))}),B.window.picturefill(),B.ajaxRequest=!1,d}var y,z={events:{change:"change"},tags:{option:"option"},selectors:{root:".c_215",dropdownTitle:".label-value",dropdownsContainer:".dropdowns-item",dropdownEditorial:".dropdownEditorial",dropdowns:".dropdown-level",content:".content-item",groupSelectBox:".group-selectbox",selectedValue:".selectedValue",trackedValue:".tracked-value",trackedSelectedValue:".tracked-value :selected"},classes:{ajaxLoading:"ajax-loading"},attributes:{disabled:"disabled",defaultText:"defaulttext",level:"level",totalLevels:"total-levels"},type:{dropdowns:"dropdowns",json:"jsonPath",html:"htmlPath",activated:"data-activated"},ajaxRequest:!1},A=[{selector:".c_001",component:d},{selector:".c_001B",component:e},{selector:".c_005",component:f},{selector:".c_005-0B",component:g},{selector:".c_015",component:h},{selector:".c_027",component:i},{selector:".c_028",component:j},{selector:".c_029",component:k},{selector:".c_036",component:l},{selector:".c_212",component:m},{selector:".c_208-0",component:n},{selector:".c_216",component:o}],B=null,C=new p({prefix:"c_215"});return{init:q}}),define("c_217",["jquery","storageManager","storageManagerKeys","trackingCodes"],function(a,b,c,d){"use strict";function e(c){if(l=a.extend({},k,c),i=a(l.selectors.root),j=a(l.selectors.mainFooter),!i.length)return!1;b.init(),g(),setTimeout(function(){f()},l.delay),j.length&&j.addClass("c_217-enabled")}function f(){"1"===(b.loadItem(c.stickyFooterOpen,l.storageManagerCookie)||i.data("initial-state-open").toString())&&i.addClass(l.classes.componentenabled),i.removeClass(l.classes.componentinitialized)}function g(){i.on("click",".inner-nav a",function(a){var d=i.hasClass(l.classes.componentenabled);a.preventDefault(),d?i.removeClass(l.classes.componentenabled):i.addClass(l.classes.componentenabled),b.saveItem(c.stickyFooterOpen,d?"0":"1",l.storageManagerCookie)}),i.find("a, button").on("click",h)}function h(b){var c=a(b.currentTarget),e="sticky-footer",f=!c.hasClass("show")&&!c.hasClass("hide"),g=!f&&c.hasClass("show"),h=c.attr("href")||"",i=a.trim(c.text()),j={},k=d.eventTypes;f?(j={componentId:m,destination:h,locationInPage:e,buttonText:i},l.analyticsManager.tag(k.navigationClick,j)):(j={componentId:m,contentAction:g?"expand":"reduce",locationInPage:e,buttonText:g?"show all":"hide all"},l.analyticsManager.tag(l.analyticsManager.trackingVars.buttonNoCookie,j))}var i,j,k={classes:{componentenabled:"enabled",componentinitialized:"init"},selectors:{root:".c_217",mainFooter:".c_025"},storageManagerCookie:{mode:"sessionStorage"},delay:3e3},l=null,m="C217_Sticky_Footer_Nav";return{init:e}}),define("c_218",["jquery","underscore","contentCarousel","heliosObject"],function(a,b,c,d){"use strict";function e(b){n=a.extend(!0,{HELIOS:d},m,b),i=a(n.html),void 0===b&&(b={}),"rtl"===i.attr("dir")&&(n.slick.rtl=!0),a(n.root).each(function(b,d){var e=a(d),g=e.find(n.el);j=e.data("grid"),j?e.addClass(n.selectors.gridView.substring(1)):g.length&&(f(),c.init(g,n),g.data(n.attr.currentPosition,0),g.on(n.events.afterChange,h))})}function f(){for(var b=a(n.selectors.carouselItem),c=0;c<b.length;c++){var d=['<ul class="'+n.classes.carPosition+'">',"<li>"+(c+1)+" / <span>"+b.length+"</span></li>","</ul>"].join("\n");a(d).insertBefore(b[c])}}function g(){return!!(!0===n.slick.autoplay||n.slick.responsive[0]&&!0===n.slick.responsive[0].settings.autoplay)}function h(b,c){var d=a(b.currentTarget),e=parseInt(c.options.slidesToScroll,10)||0,f=parseInt(c.currentSlide,10)/e+1,h=parseInt(c.slideCount,10),i=Math.ceil(h/e),j=g()?"autoplay":"normal",k=n.analyticsManager.trackingVars.carouselInteraction,l=n.analyticsManager.getTrackingObjectProperties(k),m={};parseInt(d.data(n.attr.currentPosition),10)!=c.currentSlide&&(m[l.componentId]=n.analytics.componentId,m[l.carouselType]=j,m[l.interactionType]=n.analytics.interactionType,m[l.itemNumber]=f+"/"+i,m[l.promoText]=n.analytics.interactionType,n.analyticsManager.track(k,m),d.data(n.attr.currentPosition,c.currentSlide))}var i,j,k=d.config.common.mediaQuery.breakpointsPx.small,l=d.config.common.mediaQuery.breakpointsPx.mediumMax,m={cDefaults:"c_218",root:".c_218",html:"html",el:".slick-carousel",slideLimit:!1,setItemHeight:!0,attr:{prefix:"data-prefix",separator:"data-separator",suffix:"data-suffix",currentPosition:"c-218-current-position"},selectors:{gridView:".c_218-grid-view",gridRow:".grid-flex-row",carouselSlide:".slick-slide",carouselItem:".c_218_1",contentSelect:".c_218_1-content",customPagingSelect:".slick-custom-paging"},classes:{carPosition:"car-position"},events:{resize:"resize",afterChange:"afterChange"},grid:{rowTotal:{large:3,medium:2,small:1}},addFiller:!0,slick:{dots:!0,infinite:!1,slidesToShow:3,slidesToScroll:3,onInit:c.onInstanceInit,onAfterChange:c.onAfterChangeHandler,rtl:!1,responsive:[{breakpoint:k,settings:{onInit:c.onInstanceInit,onAfterChange:c.onAfterChangeHandler,slidesToShow:1,slidesToScroll:1}},{breakpoint:l,settings:{onInit:c.onInstanceInit,onAfterChange:c.onAfterChangeHandler,slidesToShow:2,slidesToScroll:2}}]},device:{resolution:"standard",breakpoint:"large"},analytics:{componentId:"C218_Grade_Carousel",interactionType:"grade carousel"}},n=null;return{init:e}}),define("c_218_1",["jquery"],function(a){"use strict";function b(b){g=a.extend({},f,b),e=a(g.selectors.root),c()}function c(){a(g.selectors.ctaButton,e).on(g.events.click,d)}function d(b){var c=b.currentTarget,d=a(c),e=d.attr("href"),f=a.trim(d.text()),h=g.analyticsManager.trackingVars.genericClick,i=g.analyticsManager.getTrackingObjectProperties(h),j={};j[i.componentId]=g.analytics.componentId,j[i.destination]=e,j[i.locationInPage]=g.analytics.locationInPage,j[i.buttonText]=f,g.analyticsManager.track(h,j)}var e,f={selectors:{root:".c_218_1",mainContent:".c_13-content",priceSelector:".c_184",financeSelector:".c_133B",fullPrice:".full-price",carTitle:".car-title",ctaButton:"ul.cta a"},data:{priceTypeData:"force-display-type",priceCurrencyData:"price-currency",versionIdData:"model-version",gradeIdData:"model-grade",modelCode:"model-code"},analytics:{componentId:"C218_Grade_Carousel",locationInPage:"grade carousel"},events:{click:"click"}},g=null;return{init:b}}),define("c_223",["jquery"],function(a){"use strict";function b(b){if(k=a.extend({},i,b),f=a(k.selectors.root),g=f.find(k.selectors.moreDetailContainer),h=f.find(k.selectors.moreDetailBtn),!f.length)return!1;c()}function c(){a(k.selectors.moreDetailBtn).on(k.events.click,e),a(k.selectors.moreInfo).on(k.events.click,d)}function d(){var b=a(k.selectors.moreInfo).find("a"),c=b.attr("href"),d=b.text(),e=k.analyticsManager.trackingVars.genericClick,f={componentId:j,destination:c,locationInPage:"grade-equipment-list",buttonText:d};k.analyticsManager.tag(e,f)}function e(){var a,b=h.text(),c=k.analyticsManager.trackingVars.accordionExpansion,d={componentId:j,accordionType:"grade-equipment-list",accordionText:b};h.toggleClass(k.classes.expanded),g.toggleClass(k.classes.visible),h.hasClass(k.classes.expanded)?(a=h.data(k.attributes.closeText),k.analyticsManager.tag(c,d)):a=h.data(k.attributes.openText),h.html(a)}var f,g,h,i={events:{click:"click"},classes:{expanded:"expanded",visible:"visible"},attributes:{openText:"open-text",closeText:"close-text"},selectors:{root:".c_223",moreDetailBtn:".more-detail",moreDetailContainer:".more-detail-container",moreInfo:".more-info"}},j="C223_Dynamic_Grade_Equipment_List",k=null;return{init:b}}),function(a,b,c,d){c.swipebox=function(e,f){var g,h,i={useCSS:!0,useSVG:!0,initialIndexOnArray:0,removeBarsOnMobile:!0,hideCloseButtonOnMobile:!1,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,afterMedia:null,nextSlide:null,prevSlide:null,loopAtEnd:!1,autoplayVideos:!1,queryStringData:{},toggleClassOnLoad:""},j=this,k=[],l=e.selector,m=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),n=null!==m||b.createTouch!==d||"ontouchstart"in a||"onmsgesturechange"in a||navigator.msMaxTouchPoints,o=!!b.createElementNS&&!!b.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,p=a.innerWidth?a.innerWidth:c(a).width(),q=a.innerHeight?a.innerHeight:c(a).height(),r=0;j.settings={},c.swipebox.close=function(){g.closeSlide()},c.swipebox.extend=function(){return g},j.init=function(){j.settings=c.extend({},i,f),c.isArray(e)?(k=e,g.target=c(a),g.init(j.settings.initialIndexOnArray)):c(b).on("click",l,function(a){if("slide current"===a.target.parentNode.className)return!1;c.isArray(e)||(g.destroy(),h=c(l),g.actions()),k=[];var b,d,f;f||(d="data-rel",f=c(this).attr(d)),f||(d="rel",f=c(this).attr(d)),h=f&&""!==f&&"nofollow"!==f?c(l).filter("["+d+'="'+f+'"]'):c(l),h.each(function(){var a=null,b=null;c(this).attr("title")&&(a=c(this).attr("title")),c(this).attr("href")&&(b=c(this).attr("href")),k.push({href:b,title:a})}),b=h.index(c(this)),a.preventDefault(),a.stopPropagation(),g.target=c(a.target),g.init(b)})},g={init:function(a){j.settings.beforeOpen&&j.settings.beforeOpen(),this.target.trigger("swipebox-start"),c.swipebox.isOpen=!0,this.build(),this.openSlide(a),this.openMedia(a),this.preloadMedia(a+1),this.preloadMedia(a-1),j.settings.afterOpen&&j.settings.afterOpen(a)},build:function(){var a,b=this
;c("body").append('<div class="swipebox-overlay">\t\t\t\t\t<div class="swipebox-container">\t\t\t\t\t\t<div class="swipebox-slider"></div>\t\t\t\t\t\t<div class="swipebox-top-bar">\t\t\t\t\t\t\t<div class="swipebox-title"></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="swipebox-bottom-bar">\t\t\t\t\t\t\t<div class="swipebox-arrows">\t\t\t\t\t\t\t\t<a class="swipebox-prev"></a>\t\t\t\t\t\t\t\t<a class="swipebox-next"></a>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<a class="swipebox-close"></a>\t\t\t\t\t</div>\t\t\t</div>'),o&&!0===j.settings.useSVG&&(a=c(".swipebox-close").css("background-image"),a=a.replace("png","svg"),c(".swipebox-prev, .swipebox-next, .swipebox-close").css({"background-image":a})),m&&j.settings.removeBarsOnMobile&&c(".swipebox-bottom-bar, .swipebox-top-bar").remove(),c.each(k,function(){c(".swipebox-slider").append('<div class="slide"></div>')}),b.setDim(),b.actions(),n&&b.gesture(),b.keyboard(),b.animBars(),b.resize()},setDim:function(){var b,d,e={};"onorientationchange"in a?a.addEventListener("orientationchange",function(){0===a.orientation?(b=p,d=q):90!==a.orientation&&-90!==a.orientation||(b=q,d=p)},!1):(b=a.innerWidth?a.innerWidth:c(a).width(),d=a.innerHeight?a.innerHeight:c(a).height()),e={width:b,height:d},c(".swipebox-overlay").css(e)},resize:function(){var b=this;c(a).resize(function(){b.setDim()}).resize()},supportTransition:function(){var a,c="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" ");for(a=0;a<c.length;a++)if(b.createElement("div").style[c[a]]!==d)return c[a];return!1},doCssTrans:function(){if(j.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var a,b,d,e,f,g,h=this,i=!1,j=!1,l=10,m=50,n={},o={},q=c(".swipebox-top-bar, .swipebox-bottom-bar"),s=c(".swipebox-slider");q.addClass("visible-bars"),h.setTimeout(),c("body").bind("touchstart",function(h){return c(this).addClass("touching"),a=c(".swipebox-slider .slide").index(c(".swipebox-slider .slide.current")),o=h.originalEvent.targetTouches[0],n.pageX=h.originalEvent.targetTouches[0].pageX,n.pageY=h.originalEvent.targetTouches[0].pageY,c(".swipebox-slider").css({"-webkit-transform":"translate3d("+r+"%, 0, 0)",transform:"translate3d("+r+"%, 0, 0)"}),c(".touching").bind("touchmove",function(h){if(h.preventDefault(),h.stopPropagation(),o=h.originalEvent.targetTouches[0],!j&&(f=d,d=o.pageY-n.pageY,Math.abs(d)>=m||i)){var q=.75-Math.abs(d)/s.height();s.css({top:d+"px"}),s.css({opacity:q}),i=!0}e=b,b=o.pageX-n.pageX,g=100*b/p,!j&&!i&&Math.abs(b)>=l&&(c(".swipebox-slider").css({"-webkit-transition":"",transition:""}),j=!0),j&&(0<b?0===a?c(".swipebox-overlay").addClass("leftSpringTouch"):(c(".swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),c(".swipebox-slider").css({"-webkit-transform":"translate3d("+(r+g)+"%, 0, 0)",transform:"translate3d("+(r+g)+"%, 0, 0)"})):0>b&&(k.length===a+1?c(".swipebox-overlay").addClass("rightSpringTouch"):(c(".swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),c(".swipebox-slider").css({"-webkit-transform":"translate3d("+(r+g)+"%, 0, 0)",transform:"translate3d("+(r+g)+"%, 0, 0)"}))))}),!1}).bind("touchend",function(a){if(a.preventDefault(),a.stopPropagation(),c(".swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"}),d=o.pageY-n.pageY,b=o.pageX-n.pageX,g=100*b/p,i)if(i=!1,Math.abs(d)>=2*m&&Math.abs(d)>Math.abs(f)){var k=d>0?s.height():-s.height();s.animate({top:k+"px",opacity:0},300,function(){h.closeSlide()})}else s.animate({top:0,opacity:1},300);else j?(j=!1,b>=l&&b>=e?h.getPrev():b<=-l&&b<=e&&h.getNext()):q.hasClass("visible-bars")?(h.clearTimeout(),h.hideBars()):(h.showBars(),h.setTimeout());c(".swipebox-slider").css({"-webkit-transform":"translate3d("+r+"%, 0, 0)",transform:"translate3d("+r+"%, 0, 0)"}),c(".swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),c(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(j.settings.hideBarsDelay>0){var b=this;b.clearTimeout(),b.timeout=a.setTimeout(function(){b.hideBars()},j.settings.hideBarsDelay)}},clearTimeout:function(){a.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var a=c(".swipebox-top-bar, .swipebox-bottom-bar");this.doCssTrans()?a.addClass("visible-bars"):(c(".swipebox-top-bar").animate({top:0},500),c(".swipebox-bottom-bar").animate({bottom:0},500),setTimeout(function(){a.addClass("visible-bars")},1e3))},hideBars:function(){var a=c(".swipebox-top-bar, .swipebox-bottom-bar");this.doCssTrans()?a.removeClass("visible-bars"):(c(".swipebox-top-bar").animate({top:"-50px"},500),c(".swipebox-bottom-bar").animate({bottom:"-50px"},500),setTimeout(function(){a.removeClass("visible-bars")},1e3))},animBars:function(){var a=this,b=c(".swipebox-top-bar, .swipebox-bottom-bar");b.addClass("visible-bars"),a.setTimeout(),c(".swipebox-slider").click(function(){b.hasClass("visible-bars")||(a.showBars(),a.setTimeout())}),c(".swipebox-bottom-bar").hover(function(){a.showBars(),b.addClass("visible-bars"),a.clearTimeout()},function(){j.settings.hideBarsDelay>0&&(b.removeClass("visible-bars"),a.setTimeout())})},keyboard:function(){var b=this;c(a).bind("keyup",function(a){a.preventDefault(),a.stopPropagation(),37===a.keyCode?b.getPrev():39===a.keyCode?b.getNext():27===a.keyCode&&b.closeSlide()})},actions:function(){var a=this,b="touchend click";k.length<2?(c(".swipebox-bottom-bar").hide(),d===k[1]&&c(".swipebox-top-bar").hide()):(c(".swipebox-prev").bind(b,function(b){b.preventDefault(),b.stopPropagation(),a.getPrev(),a.setTimeout()}),c(".swipebox-next").bind(b,function(b){b.preventDefault(),b.stopPropagation(),a.getNext(),a.setTimeout()})),c(".swipebox-close").bind(b,function(){a.closeSlide()})},setSlide:function(a,b){b=b||!1;var d=c(".swipebox-slider"),e="ltr"===(c("html").attr("dir")||"ltr").toLowerCase();r=100*-a,this.doCssTrans()?d.css("transform","translate3d("+100*a*(e?-1:1)+"%, 0, 0)"):d.animate(e?"left":"right",-100*a+"%"),c(".swipebox-slider .slide").removeClass("current"),c(".swipebox-slider .slide").eq(a).addClass("current"),this.setTitle(a),b&&d.fadeIn(),c(".swipebox-prev, .swipebox-next").removeClass("disabled"),0===a?c(".swipebox-prev").addClass("disabled"):a===k.length-1&&!0!==j.settings.loopAtEnd&&c(".swipebox-next").addClass("disabled")},openSlide:function(b){c("html").addClass("swipebox-html"),n?(c("html").addClass("swipebox-touch"),j.settings.hideCloseButtonOnMobile&&c("html").addClass("swipebox-no-close-button")):c("html").addClass("swipebox-no-touch"),c(a).trigger("resize"),this.setSlide(b,!0)},preloadMedia:function(a){var b=this,c=null;k[a]!==d&&(c=k[a].href),b.isVideo(c)?b.openMedia(a):setTimeout(function(){b.openMedia(a)},1e3)},openMedia:function(a){var b,e,f=this;if(k[a]!==d&&(b=k[a].href),a<0||a>=k.length)return!1;e=c(".swipebox-slider .slide").eq(a),void 0===b&&(b="#"),f.isVideo(b)?(e.html(f.getVideo(b)),j.settings.afterMedia&&j.settings.afterMedia(a)):(e.addClass("slide-loading"),f.loadMedia(b,function(){e.removeClass("slide-loading"),e.html(this),j.settings.afterMedia&&j.settings.afterMedia(a)}))},setTitle:function(a){var b=null;c(".swipebox-title").empty(),k[a]!==d&&(b=k[a].title),b?(c(".swipebox-top-bar").show(),c(".swipebox-title").append(b)):c(".swipebox-top-bar").hide()},isVideo:function(a){if(a){if(a.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||a.match(/vimeo\.com\/([0-9]*)/)||a.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/))return!0;if(a.toLowerCase().indexOf("swipeboxvideo=1")>=0)return!0}},parseUri:function(a,d){var e=b.createElement("a"),f={};return e.href=decodeURIComponent(a),e.search&&(f=JSON.parse('{"'+e.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}')),c.isPlainObject(d)&&(f=c.extend(f,d,j.settings.queryStringData)),c.map(f,function(a,b){if(a&&a>"")return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&")},getVideo:function(a){var b="",c=a.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),d=a.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),e=a.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),f="";return c||d?(d&&(c=d),f=g.parseUri(a,{autoplay:j.settings.autoplayVideos?"1":"0",v:""}),b='<iframe width="560" height="315" src="//'+c[1]+"/embed/"+c[2]+"?"+f+'" frameborder="0" allowfullscreen></iframe>'):e?(f=g.parseUri(a,{autoplay:j.settings.autoplayVideos?"1":"0",byline:"0",portrait:"0",color:j.settings.vimeoColor}),b='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+e[1]+"?"+f+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):b='<iframe width="560" height="315" src="'+a+'" frameborder="0" allowfullscreen></iframe>','<div class="swipebox-video-container" style="max-width:'+i.videoMaxWidth+'px "><div class="swipebox-video">'+b+"</div></div>"},loadMedia:function(a,b){if(0===a.trim().indexOf("."))b.call(c("<div>",{class:"swipebox-inline-container"}).append(c(a).clone().toggleClass(j.settings.toggleClassOnLoad)));else if(!this.isVideo(a)){var d=c("<img>").on("load",function(){b.call(d)});d.attr("src",a)}},getNext:function(){var a,b=this,d=c(".swipebox-slider .slide").index(c(".swipebox-slider .slide.current"));d+1<k.length?(a=c(".swipebox-slider .slide").eq(d).contents().find("iframe").attr("src"),c(".swipebox-slider .slide").eq(d).contents().find("iframe").attr("src",a),d++,b.setSlide(d),b.preloadMedia(d+1),j.settings.nextSlide&&j.settings.nextSlide(d)):!0===j.settings.loopAtEnd?(a=c(".swipebox-slider .slide").eq(d).contents().find("iframe").attr("src"),c(".swipebox-slider .slide").eq(d).contents().find("iframe").attr("src",a),d=0,b.preloadMedia(d),b.setSlide(d),b.preloadMedia(d+1),j.settings.nextSlide&&j.settings.nextSlide(d)):(c(".swipebox-overlay").addClass("rightSpring"),setTimeout(function(){c(".swipebox-overlay").removeClass("rightSpring")},500))},getPrev:function(){var a,b=c(".swipebox-slider .slide").index(c(".swipebox-slider .slide.current"));b>0?(a=c(".swipebox-slider .slide").eq(b).contents().find("iframe").attr("src"),c(".swipebox-slider .slide").eq(b).contents().find("iframe").attr("src",a),b--,this.setSlide(b),this.preloadMedia(b-1),j.settings.prevSlide&&j.settings.prevSlide(b)):(c(".swipebox-overlay").addClass("leftSpring"),setTimeout(function(){c(".swipebox-overlay").removeClass("leftSpring")},500))},nextSlide:function(a){},prevSlide:function(a){},closeSlide:function(){c("html").removeClass("swipebox-html"),c("html").removeClass("swipebox-touch"),c(a).trigger("resize"),this.destroy()},destroy:function(){c(a).unbind("keyup"),c("body").unbind("touchstart"),c("body").unbind("touchmove"),c("body").unbind("touchend"),c(".swipebox-slider").unbind(),c(".swipebox-overlay").remove(),c.isArray(e)||e.removeData("_swipebox"),this.target&&this.target.trigger("swipebox-destroy"),c.swipebox.isOpen=!1,j.settings.afterClose&&j.settings.afterClose()}},j.init()},c.fn.swipebox=function(a){if(!c.data(this,"_swipebox")){var b=new c.swipebox(this,a);this.data("_swipebox",b)}return this.data("_swipebox")}}(window,document,jQuery),define("swipeBox",function(){}),define("c_222",["jquery","swipeBox","pictureFill"],function(a,b,c){"use strict";function d(b){if(i=a.extend({},h,b),g=a(i.selectors.root),!g.length)return!1;e(),c(g)}function e(){g.find(i.selectors.pictureElement).on(i.events.click,f)}function f(b){var c,d,e,f,h,k,l=g.find(i.selectors.pictureElement),m=[],n={},o={};l.length&&(l.each(function(b,g){var h=a(g);c=h.find("img").attr("src"),d=h.find(i.selectors.videoURL).attr("href"),f=h.parent().find(i.selectors.mediaCaption).html(),e=void 0!==d?d:c,n={href:e,title:"<h3>"+f+"</h3>",imageTitle:f},h.data("index",b),m.push(n)}),h=a(b.currentTarget).data("index"),a.swipebox(m,{initialIndexOnArray:h,afterOpen:function(){k=a(i.selectors.swipeboxOverlay),k.on(i.events.click,a.swipebox.close),o={locationInPage:i.analyticsValues.interactionType+":image"+(h+1)},j.track(i.analyticsValues.contentDisplayed,o)},nextSlide:function(a){o={promoText:m[a].imageTitle,itemNumber:a+1+"/"+m.length,interactionType:i.analyticsValues.interactionType},j.track(i.analyticsValues.carouselInteraction,o)},prevSlide:function(a){o={promoText:m[a].imageTitle,itemNumber:a+1+"/"+m.length,interactionType:i.analyticsValues.interactionType},j.track(i.analyticsValues.carouselInteraction,o)}})),b.preventDefault()}var g,h={events:{click:"click"},selectors:{root:".c_222",img:"img",pictureElement:".picture-element",mediaCaption:"figcaption span",videoURL:".swipebox-video-url",swipeboxOverlay:".swipebox-overlay"},analyticsValues:{componentId:"C222_Dynamic_Grade_Image",interactionType:"grade-image",contentDisplayed:{trackingVar:"contentDisplayed",defaults:{}},carouselInteraction:{trackingVar:"carouselInteraction",defaults:{carouselType:"normal"}}}},i=null,j={track:function(b,c){var d={componentId:i.analyticsValues.componentId};void 0===c&&(c={}),c=a.extend(d,b.defaults,c),i.analyticsManager.tag(b.trackingVar,c)}};return{init:d}}),define("s7DataController",["heliosObject"],function(a){function b(){var a=navigator.userAgent.toLowerCase();this.isComponentInitialized=!1,this.trim=null,this.selectedOption=null,this.loadedDataHash={},this.seqOrderHash={},this.initialImageRange=2,this.isIE=-1!==a.indexOf("msie")&&!this.isOpera&&-1===a.indexOf("webtv"),this.isIE8=-1!==a.indexOf("msie 8"),this.prevConfiguration=null,this.preservedFrameIdx=0,this.eventAggregator=c()}function c(){return a.vent=a.vent||_.extend({},Backbone.Events)}var d={events:{clearS7Frames:"clearS7Frames"}},e=null;return b.prototype.getFrameCount=function(){var a=-1;return this.isComponentInitialized?a=this.frameCount:this.log("WARNING: [getFrameCount] the frame count is not available.The component is not initialized yet."),a},b.prototype.setup=function(a){this.configObj=a,this.processConfig(a)},b.prototype.isExterior=function(){var a=!1;return this.exteriorDataUrl&&this.modelUrl===this.exteriorDataUrl?a=!0:this.modelImageList===this.exteriorImageList&&(a=!0),a},b.prototype.isVertical=function(){var a=!1;return(this.isExterior()&&"vertical"===this.fitImages.exterior||!this.isExterior()&&"vertical"===this.fitImages.interior)&&(a=this.getParentContainer().offsetHeight>0),a},b.prototype.saveModel=function(){this.prevConfiguration=null,(this.modelUrl||this.modelImageList)&&(this.prevConfiguration={},this.modelUrl?this.prevConfiguration.modelUrl=this.modelUrl:this.modelImageList&&(this.prevConfiguration.modelImageList=this.modelImageList))},b.prototype.saveConfig=function(){this.prevConfiguration&&(this.trim&&(this.prevConfiguration.trim=this.trim),this.selectedOption&&(this.prevConfiguration.selectedOption=this.selectedOption))},b.prototype.showExterior=function(){this.modelUrl=null,this.modelImageList=null,this.exteriorDataUrl?this.modelUrl=this.exteriorDataUrl:this.modelImageList=this.exteriorImageList,this.init()},b.prototype.showInterior=function(){this.modelUrl=null,this.modelImageList=null,this.interiorDataUrl?this.modelUrl=this.interiorDataUrl:this.modelImageList=this.interiorImageList,this.init()},b.prototype.restoreConfiguration=function(){this.prevConfiguration&&(this.prevConfiguration.modelUrl?this.modelUrl=this.prevConfiguration.modelUrl:this.prevConfiguration.modelImageList&&(this.modelImageList=this.prevConfiguration.modelImageList),this.loadedDataHash[this.modelUrl]&&(this.onDataLoaded(this.loadedDataHash[this.modelUrl]),this.populateSequenceLayerOrder()),this.trim=this.prevConfiguration.trim,this.selectedOption=this.prevConfiguration.selectedOption,"function"==typeof this.onConfigurationRestored&&this.onConfigurationRestored())},b.prototype.processConfig=function(a){var b,c,d,e;this.preserveViewAngle=!0;for(b in a)this[b]=a[b];if(a.server&&(this.serverUrl=a.server),this.serverUrl&&-1===this.serverUrl.indexOf("is/image")&&(this.serverUrl+="/is/image"),a.maxSpinFPS||(this.maxSpinFPS=7),this.container?(this.containerId=this.container,this.parentContainer=document.getElementById(this.containerId)):this.parentContainer=null,this.modelUrl=null,this.modelImageList=null,this.exteriorDataUrl?this.modelUrl=this.exteriorDataUrl:this.modelImageList=this.exteriorImageList,a.fitImages||(this.fitImages={interior:"vertical",exterior:"horizontal"}),this.spinSensitivity)for(c=this.spinSensitivity.split(","),this.sensitivityConf={default:c[c.length-1]},d=0;d<c.length-1;d++)e=c[d].split(":"),this.sensitivityConf[e[0]]=e[1];else this.sensitivityConf={default:2};this.validateConfiguration()},b.prototype.validateConfiguration=function(){var a,b={serverUrl:{type:"string",required:!0},spsCompany:{type:"string",required:!0},exteriorDataUrl:{type:"string",required:!1},exteriorImageList:{type:"object",required:!1},interiorDataUrl:{type:"string",required:!1},interiorImageList:{type:"object",required:!1},container:{type:"string",required:!0},breakpoints:{type:"array",required:!1},iscommand:{type:"string",required:!1},enableRetinaSupport:{type:"boolean",required:!1},description:{type:"string",required:!1},maxSpinFPS:{type:"number",required:!1},spinSensitivity:{type:"string",required:!1},fitImages:{type:"object",required:!1}};for(a in b){if(!this[a]&&b[a].required&&this.log("ERROR: the required configuration parameter ["+a+"] is not defined."),this[a]&&typeof this[a]!==b[a].type){if("array"===b[a].type&&"object"==typeof this[a]&&"number"==typeof this[a].length)continue;this.log("WARNING: the configuration parameter ["+a+"] type is not correct. Should be ["+b[a].type+"] istead of ["+typeof this[a]+"]")}this.fitImages&&(this.fitImages.interior?"vertical"!==this.fitImages.interior&&"horizontal"!==this.fitImages.interior&&this.log("ERROR: incorrect [interior] field in [fitImages]prameter. Should be either [vertical] or [horizontal]instead of ["+this.fitImages.interior+"]"):this.log("ERROR: incorrect [fitImages] parameter format.The [interior] fileld not available."),this.fitImages.exterior?"vertical"!==this.fitImages.exterior&&"horizontal"!==this.fitImages.exterior&&this.log("ERROR: incorrect [exterior] field in [fitImages]prameter. Should be either [vertical] or [horizontal] instead of ["+this.fitImages.exterior+"]"):this.log("ERROR: incorrect [fitImages] parameter format. The [exterior] fileld not available.")),this.exteriorDataUrl||this.exteriorImageList||this.log("ERROR: Neither required configuration parameter [exteriorDataUrl] nor [exteriorImageList] are not defined."),this.interiorDataUrl||this.interiorImageList||this.log("ERROR: Neither required configuration parameter [interiorDataUrl] nor [interiorImageList] are not defined.")}},b.prototype.setConfiguration=function(a,b){this.trim===a&&this.selectedOption===b||(this.saveConfig(),this.trim=a,this.selectedOption=b,"function"==typeof this.configurationChanged&&this.isComponentInitialized&&this.configurationChanged())},b.prototype.pad=function(a,b,c){return c=c||"0",a+="",a.length>=b?a:new Array(b-a.length+1).join(c)+a},b.prototype.init=function(){e=$.extend({},d),this.trim=null,this.currentFrameIdx=0,this.selectedOption=null,this.isComponentInitialized=!1,this.sequence=0,this.serverUrl=this.configObj.serverUrl+"/"+this.configObj.spsCompany+"/",this.iscommand=this.configObj.iscommand,this.currentOptions="","function"==typeof this.componentInitialize&&this.componentInitialize(),this.exteriorDataUrl&&!this.loadedDataHash[this.exteriorDataUrl]&&this.loadData(this.exteriorDataUrl),this.interiorDataUrl&&!this.loadedDataHash[this.interiorDataUrl]&&this.loadData(this.interiorDataUrl),this.checkAllDataLoaded()},b.prototype.continueInit=function(){if(this.populateSequenceLayerOrder(),!this.modelUrl)return"function"==typeof this.componentInitialize&&this.componentInitialize(),this.frameCount=this.modelImageList.length,this.currentFrameIdx=this.preservedFrameIdx,void this.notifyInitComplete();this.onDataLoaded(this.loadedDataHash[this.modelUrl]),this.currentFrameIdx=0,this.notifyInitComplete()},b.prototype.checkAllDataLoaded=function(){var a=!0,b=!0;this.exteriorDataUrl&&(b=!1,this.loadedDataHash[this.exteriorDataUrl]&&(b=!0)),this.interiorDataUrl&&(a=!1,this.loadedDataHash[this.interiorDataUrl]&&(a=!0)),a&&b&&this.continueInit()},b.prototype.loadData=function(a){var b=this;$.getJSON(a,function(c,d){"timeout"!==d&&"error"!==d&&"parsererror"!==d||b.log("ERROR: error loading URL: ["+this.modelUrl+"], status: ["+d+"]"),b.loadedDataHash[a]=c,b.checkAllDataLoaded()})},b.prototype.onDataLoaded=function(a){this.frameCount=a.frameCount,this.imageSize={width:a.imageSize.width,height:a.imageSize.height},this.options=a.optionSets,this.layers=a.layers,this.trims=a.trims},b.prototype.notifyInitComplete=function(){this.processBreakPoints(),this.isComponentInitialized=!0,"function"==typeof this.onComponentInitComplete&&this.onComponentInitComplete(),(this.trim&&this.selectedOption||this.modelImageList)&&this.configurationChanged()},b.prototype.populateSequenceLayerOrder=function(){var a=this.exteriorDataUrl?this.loadedDataHash[this.exteriorDataUrl].layers:null,b=this.interiorDataUrl?this.loadedDataHash[this.interiorDataUrl].layers:null;this.exteriorDataUrl&&!this.seqOrderHash[this.exteriorDataUrl]&&(this.seqOrderHash[this.exteriorDataUrl]=this.doPopulateSequenceLayerOrder(a,this.loadedDataHash[this.exteriorDataUrl].frameCount)),this.interiorDataUrl&&!this.seqOrderHash[this.interiorDataUrl]&&(this.seqOrderHash[this.interiorDataUrl]=this.doPopulateSequenceLayerOrder(b,this.loadedDataHash[this.interiorDataUrl].frameCount)),this.modelUrl&&(this.seqOrder=this.seqOrderHash[this.modelUrl])},b.prototype.doPopulateSequenceLayerOrder=function(a,b){function c(b){var c=[];$.each(a,function(a,d){c.push({frameIndex:void 0!==d.sameFrame?d.sameFrame:d.frames[b],i:d.i})}),e[b]=c.sort(function(a,b){var c=b.frameIndex-a.frameIndex;return 0===c&&(c=a.i-b.i),c})}var d,e=[];for(d=0;d<b;d++)c(d);return e},b.prototype.sendIncorrectEIMEvent=function(){$("#"+this.getParentContainer().id).trigger("incorrectEIM"),this.restoreConfiguration()},b.prototype.configurationChanged=function(){return this.modelImageList?void("function"==typeof this.onConfigurationChanged&&this.onConfigurationChanged()):(this.selectedTrim=this.trims[this.trim],void 0===this.selectedTrim?(this.log("WARNING: the selected trim ["+this.trim+"] not available for current data URL: ["+this.modelUrl+"]"),void this.sendIncorrectEIMEvent()):("string"==typeof this.selectedTrim&&(this.selectedTrim=this.trims[this.selectedTrim=this.trims[this.trim]]),this.selectedLayers=this.getLayers(this.selectedTrim,this.sequence),this.options[this.selectedOption]?(this.saveModel(),this.saveConfig(),void("function"==typeof this.onConfigurationChanged&&this.onConfigurationChanged())):(this.log("WARNING: the selected option ["+this.selectedOption+"] not available for current data URL: ["+this.modelUrl+"]"),void this.eventAggregator.trigger(e.events.clearS7Frames))))},b.prototype.getLayers=function(a,b){var c,d,e=a.layers.split(","),f={},g=[];for(c=0;c<e.length;c++)f[e[c]]=!0;for(c=0;c<this.seqOrder[b].length;c++)d=this.seqOrder[b][c].i,f.hasOwnProperty(String(d))&&g.push(d);return g},b.prototype.getLayersForSequenceOrder=function(a,b,c){var d,e,f=a.layers.split(","),g={},h=[];for(d=0;d<f.length;d++)g[f[d]]=!0;for(d=0;d<c[b].length;d++)e=c[b][d].i,g.hasOwnProperty(String(e))&&h.push(e);return h},b.prototype.getPreviewFrameUrl=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o=2e3;if("exterior"===a?this.exteriorImageList?(i=this.exteriorImageList,j=i.length):this.loadedDataHash[this.exteriorDataUrl]&&(h=this.loadedDataHash[this.exteriorDataUrl],j=h.frameCount):this.interiorImageList?(i=this.interiorImageList,j=i.length):this.loadedDataHash[this.interiorDataUrl]&&(h=this.loadedDataHash[this.interiorDataUrl],j=h.frameCount),c&&h&&(h.trims[c.trim]?h.optionSets[c.option]||(this.log("WARNING: Unable to get "+a+" preview URL for the current configuration[trim: "+c.trim+", option: "+c.option+"]"),c=null):(this.log("WARNING: Unable to get "+a+" preview URL for the current configuration [trim: "+c.trim+", option: "+c.option+"]"),c=null)),b>=j)return void this.log("WARNING: the frame index: ["+b+"] is out of range. Please enter value between: [0 - "+(j-1)+"]");if(i)g=i[b];else{for(l=c||this.getInitialConfiguration(h),n=h.trims[l.trim],"string"==typeof n&&(l.trim=h.trims[l.trim],n=h.trims[l.trim]),k=this.getLayersForSequenceOrder(n,this.sequence,"exterior"===a?this.seqOrderHash[this.exteriorDataUrl]:this.seqOrderHash[this.interiorDataUrl]),g=this.serverUrl+"?",f=0;f<k.length;f++)d=h.layers[k[f]],e=d.name,"no"!==d.options&&(e+="_"+h.optionSets[l.option][d.options]),e+="_"+this.pad(b+1,3),g+="layer="+f+"&src="+e+"&";m=Math.round(this.getBreakpointWidth()*(this.enableRetinaSupport&&window.devicePixelRatio?window.devicePixelRatio:1)),m>o&&(m=o),g+="layer=COMP&&wid="+m+(this.iscommand?"&"+this.iscommand:"")}return g},b.prototype.getInitialConfiguration=function(a){var b,c,d={};for(b in a.trims){d.trim=b,c=a.trims[d.trim],"string"==typeof c&&(d.trim=a.trims[d.trim],c=a.trims[d.trim]);break}if(c.options)if("*"===c.options)for(b in a.optionSets){d.option=b;break}else d.option=c.options.split(",")[0];return d},b.prototype.getFrameUrl=function(a){var b,c,d,e,f=2e3;if(a>=this.frameCount)return void this.log("WARNING: the frame index: ["+a+"] is out of range. Please enter value between: [0 - "+(this.frameCount-1)+"]");if(this.modelImageList)e=this.modelImageList[a];else{if(e=this.serverUrl+"?",this.selectedLayers)for(d=0;d<this.selectedLayers.length;d++)b=this.layers[this.selectedLayers[d]],c=b.name,"no"!==b.options&&(c+="_"+this.options[this.selectedOption][b.options]),c+="_"+this.pad(a+1,3),e+="layer="+d+"&src="+c+"&";this.currentBreakPointWidth=Math.round(this.getBreakpointWidth()*(this.enableRetinaSupport&&window.devicePixelRatio?window.devicePixelRatio:1)),this.currentBreakPointWidth>f&&(this.currentBreakPointWidth=f),e+="layer=COMP&&wid="+this.currentBreakPointWidth+(this.iscommand?"&"+this.iscommand:"")}return e},b.prototype.getSensitivity=function(){var a;return this.modelImageList||(a=this.getBreakpointWidth()),this.sensitivityConf[a]?this.sensitivityConf[a]:this.sensitivityConf.default},b.prototype.processBreakPoints=function(){var a;if(this.processedBreakpoints=[],!this.breakpoints)return void(this.processedBreakpoints=[this.getParentContainer().offsetWidth]);var b=document.createElement("div");for(this.getParentContainer().appendChild(b),a=0;a<this.breakpoints.length;a++)this.breakpoints[a]===parseInt(this.breakpoints[a])?this.processedBreakpoints.push(this.breakpoints[a]):(b.style.width=this.breakpoints[a],this.processedBreakpoints.push(b.offsetWidth));this.getParentContainer().removeChild(b)},b.prototype.getBreakpointWidth=function(){var a,b,c,d,e=!1;for(this.processedBreakpoints||this.processBreakPoints(),d=this.currentViewSize,this.isVertical()&&(d={w:this.imageSize.width*(this.currentViewSize.h/this.imageSize.height),h:this.currentViewSize.h}),b=this.processedBreakpoints,c=b[0],a=1;a<b.length;a++)if(d.w>b[a-1]&&d.w<=b[a]){c=b[a],e=!0;break}return e||d.w>b[b.length-1]&&(c=b[b.length-1]),c},b.prototype.getParentContainer=function(){return this.parentContainer||(document.getElementById(this.containerId)?this.parentContainer=document.getElementById(this.containerId):this.log("ERROR: the container with id ["+this.containerId+"] not available in DOM")),this.parentContainer},b.prototype.log=function(a){window.console.log(a)},b}),define("s7MouseController",[],function(){function a(){this.isComponentEnabled=!1,this.doPreventDefault=!1,this.lastTouchPos=null,this.direction=0,this.fps=0,this.lastMouseMoveTime=0,this.MOUSE_MOVE_UP_DELAY=100,this.eventType="none"}return a.prototype.setup=function(a){this.config=a,this.container=this.config.container,this.framesCount=0,this.dc=this.config.dc,this.startTime=null,this.setupMouseEvents()},a.prototype.setLoadedFramesCount=function(a){this.framesCount=a},a.prototype.setEnabled=function(a){this.isComponentEnabled=a},a.prototype.setupMouseEvents=function(){function a(c){if("mouse"===b.eventType)b.eventType="none";else if("touch"===b.eventType)return;window.removeEventListener("mouseup",a,!1),b.onMouseUp(c)}var b=this;void 0!==window.ontouchstart&&(this.container.addEventListener("touchstart",function(a){if("none"===b.eventType)b.eventType="touch";else if("mouse"===b.eventType)return;void 0!==a.touches&&a.touches[0],b.onMouseDown(a)},!1),document.body.addEventListener("touchend",function(a){if("touch"===b.eventType)b.eventType="none";else if("mouse"===b.eventType)return;b.onMouseUp(a)},!1),document.body.addEventListener("touchmove",function(a){"touch"===b.eventType&&1===a.touches.length&&b.onMouseMove(a)},!1)),window.addEventListener?(this.container.addEventListener("mousedown",function(c){if("none"===b.eventType)b.eventType="mouse";else if("touch"===b.eventType)return;window.addEventListener("mouseup",a,!1),b.onMouseDown(c)},!1),document.body.addEventListener("mousemove",function(a){"mouse"===b.eventType&&b.onMouseMove(a)},!1),"onwheel"in document?this.container.addEventListener("wheel",function(a){b.onMouseWheel(a)},!1):"onmousewheel"in document&&this.container.addEventListener("mousewheel",function(a){b.onMouseWheel(a)},!1)):window.attachEvent&&(this.container.attachEvent("onmousedown",function(){b.onMouseDown(window.event)},!1),document.documentElement?(document.documentElement.attachEvent("onmouseup",function(){b.onMouseUp(window.event)},!1),document.documentElement.attachEvent("onmousemove",function(){b.onMouseMove(window.event)},!1)):(document.body.attachEvent("onmouseup",function(){b.onMouseUp(window.event)},!1),document.body.attachEvent("onmousemove",function(){b.onMouseMove(window.event)},!1)),this.container.attachEvent("onmousewheel",function(){b.onMouseWheel(window.event)},!1))},a.prototype.onMouseWheel=function(a){var b,c=(new Date).getTime(),d=!0,e=a.deltaX||-a.wheelDeltaX;e&&(this.config.maxSpinFPS>0&&(this.startTime?(b=c-this.startTime,b>=1e3/this.config.maxSpinFPS?(d=!0,this.startTime=c):d=!1):(this.startTime=c,d=!0)),this.isComponentEnabled&&d&&(e>0?this.spinTo(1):e<0&&this.spinTo(-1),a.preventDefault()))},a.prototype.onMouseDown=function(a){var b=null;this.isComponentEnabled&&(this.doPreventDefault=!1,this.stopAnimationSpin(),void 0!==window.ontouchstart&&void 0!==a.touches?(b=a.touches[0],this.startX=b.clientX,this.startY=b.clientY,this.lastTouchPos={x:b.clientX,y:b.clientY}):(this.startX=a.clientX,this.startY=a.clientY),this.isMouseDown=!0,this.step=this.container.offsetWidth/this.framesCount/this.dc.getSensitivity())},a.prototype.onMouseUp=function(a){var b=this.framesCount;this.isMouseDown&&(this.isMouseDown=!1,this.isComponentEnabled&&((new Date).getTime()-this.lastMouseMoveTime<=this.MOUSE_MOVE_UP_DELAY&&0!==this.direction&&(this.config.maxSpinFPS>0?b=this.fps<this.config.maxSpinFPS&&0!==this.fps?this.fps:this.config.maxSpinFPS:this.fps>0&&(b=Math.min(this.fps,this.framesCount)),this.doAnimationSpin(b)),this.direction=0,this.doPreventDefault=!1))},a.prototype.stopAnimationSpin=function(){this.spinAnimationTick&&(clearInterval(this.spinAnimationTick),this.spinAnimationTick=null)},a.prototype.doAnimationSpin=function(a){function b(a){return a/=f,a--,e*(a*a*a+1)+d}var c=this,d=0,e=1,f=1e3;this.setAnimationProps({framesCount:a,direction:this.direction});var g=(new Date).getTime();this.stopAnimationSpin(),this.spinAnimationTick=setInterval(function(){var a,d=(new Date).getTime();a=d-g,c.isMouseDown||c.onAnimationSpinProgress(b(a)),(a>1e3||!c.isComponentEnabled)&&(clearInterval(c.spinAnimationTick),c.spinAnimationTick=null)},10)},a.prototype.onMouseMove=function(a){var b,c,d,e=(new Date).getTime();this.lastMouseMoveTime||(this.lastMouseMoveTime=e),this.isComponentEnabled&&this.isMouseDown&&("function"==typeof a.preventDefault&&this.doPreventDefault&&a.preventDefault(),void 0!==a.touches?(c=a.touches[0],this.lastTouchPos&&Math.abs(this.lastTouchPos.x-c.clientX)>Math.abs(this.lastTouchPos.y-c.clientY)&&(this.doPreventDefault=!0,a.preventDefault()),b=c.clientX,c.clientY,this.lastTouchPos={x:c.clientX,y:c.clientY}):(b=a.clientX,
a.clientY),Math.abs((b-this.startX)/this.step)>=1&&(this.direction=(b-this.startX)/Math.abs(b-this.startX),d=Math.min(Math.abs(Math.round((b-this.startX)/this.step)),Math.ceil(this.framesCount/4))*this.direction,"function"==typeof this.spinTo&&(this.startX=b,this.lastMouseMoveTime&&(this.fps=1e3*Math.abs(d/(e-this.lastMouseMoveTime))),this.spinTo(d),this.lastMouseMoveTime=(new Date).getTime())))},a}),define("s7ViewController",["underscore","s7MouseController","heliosObject"],function(a,b,c){function d(){this.framesList=[],this.createdFramesList=[],this.showSpinIcon=!0,this.s7ImageLoadFailed=!1,this.eventAggregator=e()}function e(){return c.vent=c.vent||a.extend({},Backbone.Events)}var f={events:{clearS7Frames:"clearS7Frames"}},g=null;return d.prototype.setDataController=function(a){this.dc=a,this.dc.currentFrameIdx=0,this.init()},d.prototype.init=function(){var a=this;g=$.extend({},f),this.keyDownStartTime=null,this.dc.onConfigurationChanged=function(){a.onConfigurationChanged(!0)},this.dc.componentInitialize=function(){a.showSpinIcon=!0,a.setShowSpinIcon(!1),a.setShowLoadingIcon(!0)},this.dc.onConfigurationRestored=function(){a.framesList.length>=Math.min(2*a.dc.initialImageRange+1,a.dc.frameCount)&&(a.setShowLoadingIcon(!1),a.setShowSpinIcon(!1))},this.createLayout(),this.setupMouseController(),this.eventAggregator.on(g.events.clearS7Frames,this.clearFramesContainer,this)},d.prototype.spinNext=function(){this.checkLoadFrames(),this.dc.currentFrameIdx+1>=this.framesList.length?this.setCurrentFrameIdx(0):this.setCurrentFrameIdx(this.dc.currentFrameIdx+1)},d.prototype.spinPrev=function(){this.checkLoadFrames(),this.dc.currentFrameIdx-1<0?this.setCurrentFrameIdx(this.framesList.length-1):this.setCurrentFrameIdx(this.dc.currentFrameIdx-1)},d.prototype.onSizeCheck=function(){this.dc.modelImageList||(!this.dc.isVertical()&&this.dc.currentViewSize&&this.dc.currentViewSize.w!==this.container.offsetWidth?(this.dc.currentViewSize={w:this.container.offsetWidth,h:this.container.offsetHeight},this.checkVerticalClassName(),this.dc.currentBreakPointWidth!==this.dc.getBreakpointWidth()&&this.onConfigurationChanged(!0)):this.dc.isVertical()&&this.dc.currentViewSize&&(this.dc.currentViewSize.w!==this.container.offsetWidth||this.dc.currentViewSize.h!==this.container.offsetHeight)&&(this.checkVerticalClassName(),this.dc.currentViewSize={w:this.container.offsetWidth,h:this.container.offsetHeight},this.dc.currentBreakPointWidth!==this.dc.getBreakpointWidth()&&(this.checkVerticalClassName(),this.onConfigurationChanged(!0))))},d.prototype.checkImageIsLoaded=function(a){var b,c=!1;for(b in this.framesList)if(this.framesList[b].idx===a){c=!0;break}return c},d.prototype.setCurrentFrameIdx=function(a,b){var c;if(this.framesList.length===this.dc.frameCount||this.checkImageIsLoaded(a))for(b||this.dc.currentFrameIdx===a||this.sendSpinEvent(),this.dc.currentFrameIdx=a,c=0;c<this.framesList.length;c++)this.framesList[c].idx!==a?this.framesList[c].img.className="s7-frame-image":(this.framesList[c].img.className="s7-frame-image active",this.dc.isIE8&&(this.framesList[c].img.style.marginLeft=(this.dc.getParentContainer().offsetWidth-this.framesList[c].img.offsetWidth)/2+"px",this.framesList[c].img.style.left="0px"),this.framesList[c].img.alt=this.dc.description?this.dc.description:"")},d.prototype.createLayout=function(){var a=this;this.container=document.createElement("div"),this.container.tabIndex="0",this.container.className="s7-spinview-container"+(this.dc.isIE8?" ie8":""),this.dc.getParentContainer().appendChild(this.container),this.container.ondragstart=function(){return!1},window.addEventListener?this.container.addEventListener("keydown",function(b){a.onKeyDownHandler(b)},!0):(window.attachEvent,this.container.attachEvent("onkeydown",function(){var b=window.event;a.onKeyDownHandler(b)})),this.framesContainer=document.createElement("div"),this.framesContainer.className="s7-frames-container",this.container.appendChild(this.framesContainer),this.loadingIcon=document.createElement("div"),this.loadingIcon.className="s7-loading-icon shown",this.container.appendChild(this.loadingIcon),this.spinIcon=document.createElement("div"),this.spinIcon.className="s7-spin-icon hidden",this.container.appendChild(this.spinIcon),this.dc.currentViewSize={w:this.container.offsetWidth,h:this.container.offsetHeight}},d.prototype.onKeyDownHandler=function(a){var b,c=(new Date).getTime(),d=!0;this.dc.maxSpinFPS>0&&(this.keyDownStartTime?(b=c-this.keyDownStartTime,b>=1e3/this.dc.maxSpinFPS?(this.keyDownStartTime=c,d=!0):d=!1):(this.keyDownStartTime=(new Date).getTime(),d=!0)),d&&(37===a.keyCode?this.spinPrev():39===a.keyCode&&this.spinNext())},d.prototype.onConfigurationChanged=function(a){var b=!1;this.showSpinIcon=!0,this.setShowSpinIcon(!1),this.setShowLoadingIcon(!0),a&&(b=a),this.createInitialFrame(b)},d.prototype.getInitialImagesList=function(a){var b,c,d=[],e=[];for(b=0;b<Math.min(this.dc.initialImageRange,this.dc.frameCount-1);b++)c=a+(b+1),c>=this.dc.frameCount&&(c=a+(b+1)-this.dc.frameCount),e.push(c),c=a-(b+1),c<0&&(c=this.dc.frameCount+c),d.push(c);return d.concat(e)},d.prototype.createInitialFrame=function(a){var b,c,d,e,f,g=this,h=!0;if(this.s7ImageLoadFailed&&this.createLayout(),(!this.tempFramesList||0===this.tempFramesList.length)&&(this.tempFramesList=[],this.createdFramesList.length>0))for(c in this.createdFramesList)this.tempFramesList.push(this.createdFramesList[c]);for(this.framesList=[],this.createdFramesList=[],this.framesHash={},this.mc.setEnabled(!1),this.mc.setLoadedFramesCount(0),d=a?this.dc.currentFrameIdx:0,b=document.createElement("img"),b.className="s7-frame-image",this.framesContainer.appendChild(b),this.createdFramesList.push({img:b,idx:d}),b.onload=function(a){var c,e,f=!1;for(c in g.createdFramesList)if(g.createdFramesList[c].img===b){f=!0;break}if(f){if(g.framesList.push({img:b,idx:d}),g.mc.setLoadedFramesCount(g.framesList.length),g.tempFramesList.length>0){for(c in g.tempFramesList)g.tempFramesList[c].img&&g.tempFramesList[c].img.parentNode&&(e=g.tempFramesList[c].img.parentNode,e.removeChild(g.tempFramesList[c].img));g.tempFramesList=[]}g.checkEnabeMouseEvents(),b===g.framesHash[d].img&&(g.dc.isIE8&&(b.style.marginLeft="0px",b.style.left="0px",b.style.marginLeft=(g.dc.getParentContainer().offsetWidth-b.offsetWidth)/2+"px",setTimeout(function(){g.setCurrentFrameIdx(g.dc.currentFrameIdx,!0)},250)),b.className="s7-frame-image active",b.alt=g.dc.description?g.dc.description:""),h&&(h=!1,g.sendReadyEvent()),g.checkVerticalClassName()}},b.src=this.dc.getFrameUrl(d),e=this.getInitialImagesList(d),f=0;f<e.length;f++)this.createFrame(e[f])},d.prototype.clearFramesContainer=function(){!a.isUndefined(this.framesContainer)&&this.framesContainer.children&&(this.framesContainer.innerHTML="")},d.prototype.checkVerticalClassName=function(){this.dc.isVertical()?(this.container.setAttribute("data-s7visible","hidden"),this.framesContainer.className="s7-frames-container s7-vertical",this.dc.isVertical()||(this.framesContainer.className="s7-frames-container"),this.container.setAttribute("data-s7visible","visible")):this.framesContainer.className="s7-frames-container"},d.prototype.sendReadyEvent=function(){this.eventAggregator.trigger("onStageReady")},d.prototype.sendSpinEvent=function(){$("#"+this.dc.getParentContainer().id).trigger("spin")},d.prototype.createFrames=function(a){var b;if(a)for(b=0;b<this.dc.frameCount;b++)b!==this.dc.currentFrameIdx&&(this.createFrame(b),this.setCurrentFrameIdx(this.dc.currentFrameIdx));else{for(b=1;b<this.dc.frameCount;b++)this.createFrame(b);this.setCurrentFrameIdx(0)}},d.prototype.createFrame=function(a){var b,c=document.createElement("img"),d=this;return c.className="s7-frame-image",this.createdFramesList.push({img:c,idx:a}),b=this.dc.getFrameUrl(a),c.onload=function(){var b,e=!1;for(b in d.createdFramesList)if(d.createdFramesList[b].img===c){e=!0;break}e&&(d.framesContainer.appendChild(c),d.framesList.push({img:c,idx:a}),d.mc.setLoadedFramesCount(d.framesList.length),d.checkEnabeMouseEvents())},c.onerror=function(){d.dc.log("WARNING: unable to load image URL ["+this.src+"]")},c.src=b,c},d.prototype.checkLoadFrames=function(){var a,b,c,d,e=this.dc.currentFrameIdx,f=[],g=[];if(this.createdFramesList.length!==this.dc.frameCount){for(this.setShowSpinIcon(!1),d=Math.round(this.dc.frameCount/2),a=0;a<=d;a++)c=e-a,c<0&&(c=this.dc.frameCount+c),this.framesHash[c]||f.push(c);for(a=0;a<this.dc.frameCount-d;a++)b=e+a,b>=this.dc.frameCount&&(b-=this.dc.frameCount),this.framesHash[b]||g.push(b);for(a=0;a<Math.max(f.length,g.length);a++)a<f.length&&this.createFrame(f[a]),a<g.length&&this.createFrame(g[a])}},d.prototype.checkEnabeMouseEvents=function(){this.framesHash={},this.framesList.sort(function(a,b){return a.idx-b.idx}),this.createdFramesList.sort(function(a,b){return a.idx-b.idx});for(var a=0;a<this.framesList.length;a++)this.framesHash[this.framesList[a].idx]={img:this.framesList[a].img,idx:this.framesList[a].idx,framesListIdx:a};this.framesList.length===Math.min(2*this.dc.initialImageRange+1,this.dc.frameCount)&&(this.setShowLoadingIcon(!1),this.showSpinIcon&&this.dc.frameCount>1&&(this.setShowSpinIcon(!0),this.showSpinIcon=!1),this.mc.setEnabled(!0))},d.prototype.setupMouseController=function(){var a=this,c={container:this.container,framesCount:this.dc.frameCount,maxSpinFPS:this.dc.maxSpinFPS,dc:this.dc};this.mc=new b,this.mc.setup(c),this.mc.spinTo=function(b){a.doSpinTo(b)},this.mc.setAnimationProps=function(b){a.animationFramesCount=b.framesCount,a.spinDirection=b.direction,a.initialFrameIdx=a.dc.currentFrameIdx},this.mc.onAnimationSpinProgress=function(b){var c=a.initialFrameIdx+Math.round(a.animationFramesCount*b)*a.spinDirection,d=null,e=a.framesList.length;c<0?(d=-1*Math.floor(Math.abs(c/e)),c=e+c-(a.dc.frameCount-1)*d):c>=e&&(d=Math.floor(c/e),c-=e*d),a.setCurrentFrameIdx(c)}},d.prototype.doSpinTo=function(a){var b=null,c=this.framesList.length,d=a;0!==d&&Math.abs(d);d-=c*Math.floor(d/c),b=this.framesHash[this.dc.currentFrameIdx].framesListIdx+d,b>=c?b-=c:this.dc.currentFrameIdx+d<0&&(b=c+b),this.checkLoadFrames(),this.setCurrentFrameIdx(this.framesList[b].idx)},d.prototype.setShowLoadingIcon=function(a){this.loadingIcon.className="s7-loading-icon"+(a?" shown":" hidden")},d.prototype.setShowSpinIcon=function(a){this.spinIcon.className="s7-spin-icon"+(a?" shown":" hidden")},d}),define("s7ViewerWrapper",["underscore","s7DataController","s7ViewController"],function(a,b,c){function d(){this.drawPending=!1}return d.prototype.setup=function(c){var d=this;this.dataController=new b,this.dataController.setup(c),this.dataController.init(),this.dataController.onComponentInitComplete=function(){d.drawPending&&(d.drawPending=!1,d.draw())},window.addEventListener("resize",a.throttle(this.onSizeCheck.bind(this),200,{leading:!1})),this.onSizeCheck()},d.prototype.spinNext=function(a){this.vc&&this.vc.spinNext()},d.prototype.spinPrev=function(a){this.vc&&this.vc.spinPrev()},d.prototype.getFrameCount=function(){return this.dataController.getFrameCount()},d.prototype.getInteriorPreviewUrl=function(a,b,c){var d=b?{trim:b,option:c}:null;return this.dataController.isComponentInitialized||this.dataController.log("WARNING: [getInteriorPreviewUrl] method can not provide preview URL, cause the component is not initialized yet"),this.dataController.getPreviewFrameUrl("interior",a,d)},d.prototype.getExteriorPreviewUrl=function(a,b,c){var d=b?{trim:b,option:c}:null;return this.dataController.isComponentInitialized||this.dataController.log("WARNING: [getExteriorPreviewUrl] methodcan not provide preview URL, cause the component is not initialized yet"),this.dataController.getPreviewFrameUrl("exterior",a,d)},d.prototype.showExterior=function(){if(this.dataController.exteriorImageList)return void this.dataController.log("WARNING: Can not use the [showExterior] API method, cause [exteriorImageList] is defined. Use [loadExteriorImageList] API method instead.");this.dataController.modelUrl!==this.dataController.exteriorDataUrl&&(this.dataController.showExterior(),this.draw())},d.prototype.showInterior=function(){if(this.dataController.interiorImageList)return void this.dataController.log("WARNING: Can not use the [showInterior] API method, cause [interiorImageList] is defined. Use [loadInteriorImageList] API method instead.");this.dataController.modelUrl!==this.dataController.interiorDataUrl&&(this.dataController.showInterior(),this.draw())},d.prototype.loadExteriorImageList=function(a){if(this.dataController.exteriorDataUrl)return void this.dataController.log("WARNING: Can not use [loadExteriorImageList] API method, cause the [exteriorDataUrl: "+this.dataController.exteriorDataUrl+"] is defined. Use [showExterior] API method instead.");this.dataController.preservedFrameIdx=0,this.dataController.preserveViewAngle&&this.dataController.isExterior()&&this.dataController.exteriorImageList&&a.length===this.dataController.exteriorImageList.length&&(this.dataController.preservedFrameIdx=this.dataController.currentFrameIdx),this.dataController.exteriorImageList=a,this.dataController.showExterior(),this.draw()},d.prototype.loadInteriorImageList=function(a){if(this.dataController.interiorDataUrl)return void this.dataController.log("WARNING: Can not use [loadInteriorImageList] API method, cause the [interiorDataUrl: "+this.dataController.interiorDataUrl+"] is defined. Use [showInterior] API method instead.");this.dataController.preservedFrameIdx=0,this.dataController.preserveViewAngle&&!this.dataController.isExterior()&&this.dataController.interiorImageList&&a.length===this.dataController.interiorImageList.length&&(this.dataController.preservedFrameIdx=this.dataController.currentFrameIdx),this.dataController.interiorImageList=a,this.dataController.showInterior(),this.draw()},d.prototype.setConfiguration=function(a,b){this.dataController.setConfiguration(a,b)},d.prototype.onSizeCheck=function(){void 0!==this.vc&&this.vc.onSizeCheck()},d.prototype.draw=function(){this.dataController.isComponentInitialized?this.vc||(this.vc=new c,this.vc.setDataController(this.dataController)):this.drawPending=!0},d}),define("c_220_querypayload",["jquery","underscore"],function(a,b){"use strict";return{get:function(a,c,d){var e;return a&&c&&a[c]?(e=d?a[c][d]:a[c],b.isUndefined(e)&&(e=""),e):""}}}),define("c_220_color_picker",["jquery","handlebars","underscore","s7ViewerWrapper","c_220_querypayload"],function(a,b,c,d,e){"use strict";var f,g,h,i,j,k,l,m,n,o={selectors:{root:".c_220",carImageHolder:".car-image-holder",colourPickerTemplate:".car-colour-picker-template",colourPickerHolder:".car-colour-picker",colourPickerButtons:".car-colour-picker li",colourPickerButtonElement:"li",colourName:".colour-name",colourPrice:".colour-price",spinner:"#grade-car-spinner",spinIcon:".s7-spin-icon"},attributes:{colourKey:"colourkey",colourName:"colour",spinnerEnabled:"s7-spinview-enabled",imageServletBaseURL:"image-servlet"},classes:{fadeOutClass:"fade-out",activeColourPickerButton:"active",spinnerEnabled:"s7-spinview-enabled",spinnerInteraction:"s7-spinview-interacted",loader:"loader",showPreloader:"show-loader",hideSpinIcon:"hidden"},events:{namespace:".c_220",click:"click",panInteractions:"mousedown touchstart",wheelInteraction:"wheel",resize:"resize",breakpointChanged:"breakpoint:changed"},device:{breakpoint:"large",imageDensity:{highResLowerBound:1.5,low:"low",high:"high"}},analyticsValues:{panInteraction:{trackingVar:"panInteraction",defaults:{interactionType:"grade-360"}},colourPicker:{trackingVar:"colourPicker",defaults:{interactionType:"colour-picker"}}},debounce:250},p=null;return m=new d,n={options:{initialised360DegreeViewer:!1},init:function(b){p=a.extend({},o,b),f=a(p.selectors.root),g=a(p.window),h=f.find(p.selectors.spinner),j=p.payload,k=p.isLocalMode,l=p.analyticsTracking,f.on(p.events.breakpointChanged,a.proxy(function(a){this.request360DegreeImages()},this))},setup:function(a){this.options.gradeKey=a,this.options.currentItem=0,this.options.trackSpinner=!0,this.options.ready=!1,this.setDeviceBreakpoint(),this.buildHTML(),this.bindEvents(),this.setInitialColour()},buildHTML:function(){var d,g,i,k;this.$carImageHolder=f.find(p.selectors.carImageHolder),this.$colourPickerHolder=f.find(p.selectors.colourPickerHolder),d=f.find(p.selectors.colourPickerTemplate).html(),g=b.compile(d),i=g(e.get(j,this.options.gradeKey)),this.$colourPickerHolder.html(i),this.$colourName=this.$colourPickerHolder.find(p.selectors.colourName),this.$colourPrice=this.$colourPickerHolder.find(p.selectors.colourPrice),this.$colourPickerButtons=f.find(p.selectors.colourPickerButtons),c.isUndefined(this.$loader)&&(k=document.createElement("div"),k.className=p.classes.loader,this.$loader=a(k),this.$loader.insertAfter(h))},bindEvents:function(){var b,d;this.$colourPickerButtons.length&&f.find(p.selectors.colourPickerHolder).off().on(p.events.click,p.selectors.colourPickerButtonElement,a.proxy(function(a){this.changeColour(a)},this)),g.on(p.events.resize+p.events.namespace,c.debounce(this.setDeviceBreakpoint,p.debounce).bind(this)),h.on(p.events.panInteractions,a.proxy(function(a){this.options.trackSpinner&&d()},this)).on(p.events.wheelInteraction,a.proxy(function(a){var b=a.originalEvent;Math.abs(b.wheelDeltaY)<10&&Math.abs(b.wheelDeltaX)>2&&(a.preventDefault(),this.options.trackSpinner&&d())},this)),d=function(){b={vehicleGrade:this.options.gradeKey},l(p.analyticsValues.panInteraction,b),this.options.trackSpinner=!1}.bind(this)},buildURL:function(){var a;return a=[f.data(p.attributes.imageServletBaseURL),this.options.gradeKey,"."+this.options.selectedColour.key,"."+p.device.breakpoint,"."+this.selectImageDensity(),".json"].join(""),a=encodeURI(a)},selectImageDensity:function(){var a=p.device.imageDensity.low;return p.window.devicePixelRatio>p.device.imageDensity.highResLowerBound&&(a=p.device.imageDensity.high),a},enable360DegreeViewer:function(a){a?(f.addClass(p.classes.spinnerEnabled),i=!0):(f.removeClass(p.classes.spinnerEnabled),i=!1)},setInitialColour:function(){this.$colourPickerButtons.eq(this.options.currentItem).trigger(p.events.click)},changeColour:function(b){var c,d=a(b.currentTarget),e=d.index();e===this.options.currentItem&&this.options.ready||(this.showLoader(!0),this.$colourPickerButtons.eq(this.options.currentItem).removeClass(p.classes.activeColourPickerButton),d.addClass(p.classes.activeColourPickerButton),this.options.selectedColour={key:d.data(p.attributes.colourKey),name:d.data(p.attributes.colourName)},this.options.currentItem=e,this.request360DegreeImages(),this.options.ready&&(c={vehicleGrade:this.options.gradeKey,colour:this.options.selectedColour.name},l(p.analyticsValues.colourPicker,c)),this.options.ready=!0,b.preventDefault())},updateColourText:function(){this.$colourName.html(this.options.selectedColour.name),this.$colourPrice.html(this.options.selectedColour.price)},request360DegreeImages:function(){var b,d=this.buildURL();k?c.isUndefined(p.HELIOS.components.c220_local_data)?(this.enable360DegreeViewer(!1),p.C_220.changeStaticImage(this.options.gradeKey)):(b=p.HELIOS.components.c220_local_data.grades,b=e.get(b,this.options.gradeKey,this.options.selectedColour.key),this.options.selectedColour.price=b.price,this.update360DegreeViewer(b),this.updateColourText()):a.ajax({context:this,url:d,type:"GET",success:function(a){b=a.grades,c.isUndefined(this.update360DegreeViewer)||(b=e.get(b,this.options.gradeKey,this.options.selectedColour.key),this.update360DegreeViewer(b),this.options.selectedColour.price=b.price,this.updateColourText())},error:function(){c.isUndefined(this.enable360DegreeViewer)||(this.enable360DegreeViewer(!1),p.C_220.changeStaticImage(this.options.gradeKey))}})},update360DegreeViewer:function(a){this.$loader.hasClass(p.classes.showPreloader);if(c.isUndefined(a)||c.isUndefined(a.images))this.enable360DegreeViewer(!1),p.C_220.changeStaticImage(this.options.gradeKey);else if(this.options.initialised360DegreeViewer){var b=this.$carImageHolder.find(p.selectors.spinIcon);b.hasClass(p.classes.hideSpinIcon)&&f.addClass(p.classes.spinnerInteraction),m.loadExteriorImageList(a.images)}else m.setup({serverUrl:h.data("s7-server-url"),spsCompany:h.data("s7-sps-company"),exteriorImageList:a.images,container:h.attr("id"),description:"360 car spinner",interiorImageList:[],spinIcon:!0}),m.draw(),m.setConfiguration(),this.options.initialised360DegreeViewer=!0;this.showLoader(!1)},showLoader:function(a){a?(h.addClass(p.classes.fadeOutClass),this.$loader.addClass(p.classes.showPreloader)):(h.removeClass(p.classes.fadeOutClass),this.$loader.removeClass(p.classes.showPreloader))},setDeviceBreakpoint:function(){var a,b,c=p.device.breakpoint;p.window.matchMedia&&(a=p.window.matchMedia(p.HELIOS.config.common.mediaQuery.is.large),b=p.window.matchMedia(p.HELIOS.config.common.mediaQuery.is.medium),a.matches?p.device.breakpoint="large":b.matches?p.device.breakpoint="medium":p.device.breakpoint="small",c!==p.device.breakpoint&&n.options.ready&&f.trigger(p.events.breakpointChanged))}}}),define("c_220",["jquery","handlebars","pictureFill","c_184B","c_184","c_220_color_picker","c_220_querypayload"],function(a,b,c,d,e,f,g){"use strict";function h(a){var b,c,d;_.isUndefined(n)||(b=n.find(s.selectors.headingGroup),c=n.find(s.selectors.pricingComponent),c.length&&(d=new e.UniversalPricing({$element:c,manualPriceFormatting:c.data("manualPriceFormatting"),priceUrl:c.data("priceUrl"),dataPath:c.data("modelPath"),modelKey:c.data("modelCode"),gradeKey:g.get(o,a,"gradeKey"),versionKey:g.get(o,a,"versionKey"),priceCode:c.data("priceCode")||"default",extraInfoPathPrefix:c.data("extraInfoPathPrefix"),extraInfoPathSuffix:g.get(o,a,"gradePath")}),a===g.get(o,a,"gradeKey")&&(b.find("h1").text(g.get(o,a,"name")),d.refreshPrice(),q?f.setup(a):j(a))))}function i(){a(s.selectors.controller).find(s.selectors.ajaxContentDiv).hasClass(s.classes.fadeOutClass)?n.addClass(s.classes.fadeOutClass):n.removeClass(s.classes.fadeOutClass)}function j(a){var d,e,f,h=n.find(s.selectors.carImageHolder);d=n.find(s.selectors.carImageTemplate).html(),e=b.compile(d),f=e(g.get(o,a)),h.html(f),c(h)}function k(b,c){var d={componentId:s.analyticsValues.componentId};_.isUndefined(c)&&(c={}),c=a.extend(d,b.defaults,c),s.analyticsManager.tag(b.trackingVar,c)}function l(b){if(s=a.extend({},r,b),n=a(s.selectors.root),p=n.data(s.attributes.isLocalMode),q=n.data(s.attributes.spinnerEnabled),!n.length)return!1;_.isUndefined(s.HELIOS.components.c221)||(o=s.HELIOS.components.c221.grades),f.init({C_220:m,payload:o,isLocalMode:p,analyticsTracking:k,window:s.window,HELIOS:s.HELIOS}),!0===q?f.enable360DegreeViewer(!0):f.enable360DegreeViewer(!1)}var m,n,o,p,q,r={selectors:{root:".c_220",controller:".c_221",pricingComponent:".c_184",headingGroup:".heading-group",carImageTemplate:".car-image-template",carImageHolder:".car-image-holder",ajaxContentDiv:".c_221-ajax-target"},attributes:{spinnerEnabled:"s7-spinview-enabled",isLocalMode:"localmode"},classes:{fadeOutClass:"fade-out"},analyticsValues:{componentId:"C220_Dynamic_Grade_Hero"}},s=null;return m={init:l,changeGrade:h,changeStaticImage:j,toggleContentVisibility:i}}),define("rciProxyHelper",["jquery","underscore"],function(a,b){var c=function(a){if(b.isUndefined(a))throw"No options passed into RciProxyHelper constructor.";if(b.isUndefined(a.HELIOS))throw"No options.HELIOS object passed in.";if(b.isUndefined(a.window))throw"No options.window object passed in.";this.options=a};return c.prototype.getDeferred=function(){return this._deferred||(this._deferred=a.Deferred())},c.prototype.getConstructor=function(){return this.ensureScriptInjected(),this.getDeferred()},c.prototype.ensureScriptInjected=function(){if(!(this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing&&b.isString(this.options.HELIOS.config.common.pricing.rciProxyScriptUrl)))throw"Error with HELIOS.config.common.pricing.rciProxyScriptUrl";this._isScriptInjected||(a.getScript(this.options.HELIOS.config.common.pricing.rciProxyScriptUrl).done(b.bind(function(){this.getDeferred().resolve(this.options.window.RCIProxy)},this)),this._isScriptInjected=!0)},c}),define("rciProxyHelperSingleton",["rciProxyHelper"],function(a){"use strict";return new a({HELIOS:HELIOS,window:window})}),define("rciProxyConstants_",[],function(){"use strict";return{PROXY_PARAM_KEYS:{AGE:"age",BRAND:"Brand",CITY:"City",COUNTRY:"Country",CALC_CURRENCY:"CalcCurrency",CURRENCY:"Currency",DEALER:"Dealer",ENGINE:"Engine",ID_VEHICLE:"IdVehicle",KM:"km",LANG:"Lang",MODEL:"Model",MODEL_C:"ModelC",MODEL_SPEC_CODE:"ModelSpecCode",POWER:"Power",POWER_WO_OPTIONS:"Powerwooptions",PRICE:"Price",PRICE_WO_OPTIONS:"PriceWoOptions",PRICE_TYPE:"PriceType",SEG:"Seg",STATE:"State",STYLE:"Style",TYPE:"Type",VEHICLE_BRAND:"VehicleBrand",VERSION:"Version",VERSION_C:"VersionC",VH_ID:"vhid",RCI_PROXY_DEALER:"rciProxyDealer",RCI_PROXY_TYPE:"rciProxyType",RCI_PROXY_STYLE:"rciProxyStyle"},PROXY_PARAM_VALUES:{DEALER:"HELIOS",STYLE:"helios",TYPE:{NEW_VEHICLE:"NV",USED_VEHICLE:"UV"},PRICE_TYPE:{INCLUDES_TAX:"TTC",EXCLUDES_TAX:"HT"}},EVENTS:{FINANCIAL_OFFER_RELOADED:"financialOfferReloaded",PROXY_READY:"proxyReady",SIMULATOR_RENDER_COMPLETED:"simulatorRenderCompleted"}}}),define("priceManager",["jquery","underscore","pricingConstants","rciProxyHelperSingleton","objectFactory","rciProxyConstants_","priceManagerConstants","storageManagerKeys"],function(a,b,c,d,e,f,g,h){var i=function(a){this.options=a||{}};return i.prototype.getPreferredDealerCity=function(){var a;return this.options.storageManager&&(a=this.options.storageManager.loadItem(h.preferredDealerCity.itemKey)),a},i.prototype.getPreferredDealerState=function(){var a;return this.options.storageManager&&(a=this.options.storageManager.loadItem(h.preferredDealerState.itemKey)),a},i.prototype.isCityAndStateRequiredForRci=function(){var a=/in/i;return!!(this.options.HELIOS&&this.options.HELIOS.config&&this.options.HELIOS.config.common&&a.test(this.options.HELIOS.config.common.countryCode))},i.prototype.isPreferredDealerCitySet=function(){return b.isString(this.getPreferredDealerCity())},i.prototype.isPreferredDealerStateSet=function(){return b.isString(this.getPreferredDealerState())},i.prototype.isVehicleNci=function(a){return a&&a.vehicleType===f.PROXY_PARAM_VALUES.TYPE.NEW_VEHICLE},i.prototype.isVehicleUci=function(a){return a&&a.vehicleType===f.PROXY_PARAM_VALUES.TYPE.USED_VEHICLE},i.prototype.onRemoteServicesFinanceOfferPromiseDone=function(a,b){var c={};a?(c[g.PRICE_KEYS.HEADING_ONE]=a.heading,c[g.PRICE_KEYS.HEADING_TWO]=a.subHeading,c[g.PRICE_KEYS.LABEL]=a.label,c[g.PRICE_KEYS.LEGAL_ONE]=a.warning,c[g.PRICE_KEYS.LEGAL_TWO]=a.legalText,c[g.PRICE_KEYS.MONTHLY_PRICE]=a.monthlyPayment,c[g.PRICE_KEYS.TEXT]=a.text,b.resolve(c)):b.reject("remoteServices failed")},i.prototype.onRemoteServicesFinanceOfferPromiseFail=function(a,b,c){c.reject("remoteServices failed with: "+b)},i.prototype.requestFinancePriceFromRemoteServices=function(a,c){var d,e,f=this.getRemoteServices();f?(d={},c.currencyCode&&(d.currency=c.currencyCode),c.gradeKey&&(d.gradeId=c.gradeKey),c.priceCode&&(d.priceCode=c.priceCode),c.totalPrice&&(d.price=c.totalPrice),c.versionKey&&(d.versionId=c.versionKey),e=this.functionInvoker(f,"getFinanceOffer",[c.modelKey,c.modelPath,c.priceRepresentedAs,d]),e?e.done(b.partial(this.onRemoteServicesFinanceOfferPromiseDone,b,a)).fail(b.partial(this.onRemoteServicesFinanceOfferPromiseFail,b,b,a)):a.reject("remoteServices failed")):a.reject("remoteServices is undefined")},i.prototype.requestPrice=function(c){var d=a.Deferred(),e=!1;return b.isUndefined(c)&&(e=!0,d.reject("priceParams is undefined")),!e&&b.isUndefined(c.priceCode)&&(e=!0,d.reject("priceCode is undefined")),!e&&b.isUndefined(c.modelPath)&&(e=!0,d.reject("modelPath is undefined")),!e&&b.isUndefined(c.modelKey)&&(e=!0,d.reject("modelKey is undefined")),e||(b.isUndefined(c.totalPrice)?this.requestTotalPrice(d,c):this.requestFinancePrice(d,c)),d},i.prototype.requestFinancePrice=function(a,b){if(this.options.HELIOS&&this.options.HELIOS.config&&this.options.HELIOS.config.common&&this.options.HELIOS.config.common.pricing)switch(this.options.HELIOS.config.common.pricing.financeProvider){case c.FINANCE_PROVIDERS.OTHER:this.requestFinancePriceFromRemoteServices(a,b);break;case c.FINANCE_PROVIDERS.RCI:b.priceRepresentedAs===c.REPRESENTED_AS.BEST_MONTHLY?this.requestFinancePriceFromRci(a,b):b.priceRepresentedAs===c.REPRESENTED_AS.FINANCE||b.priceRepresentedAs===c.REPRESENTED_AS.LEASE?this.requestFinancePriceFromRemoteServices(a,b):a.reject('Invalid "represented as" value ('+b.priceRepresentedAs+") for RCI market");break;default:a.reject("Attempt to request finance price with finance provider: "+this.options.HELIOS.config.common.pricing.financeProvider)}},i.prototype.requestFinancePriceFromRci=function(a,c){d.getConstructor().done(b.bind(function(d){var g,h,i,j={},k=e.getObject(d);k.addListener(f.EVENTS.PROXY_READY,b.bind(this.onRciProxyReady,this,k,a)),k.addListener(f.EVENTS.FINANCIAL_OFFER_RELOADED,b.bind(this.onRciFinancialOfferReloaded,this,k,a)),this.isVehicleNci(c)&&(g=h=c.vehicleModelSemiClair),this.isVehicleUci(c)&&(g=h=c.vehicleElectricModelKey),!0===c.priceIncludesTax&&(i=f.PROXY_PARAM_VALUES.PRICE_TYPE.INCLUDES_TAX),!1===c.priceIncludesTax&&(i=f.PROXY_PARAM_VALUES.PRICE_TYPE.EXCLUDES_TAX),k.setProxyParam(f.PROXY_PARAM_KEYS.AGE,c.age),k.setProxyParam(f.PROXY_PARAM_KEYS.CALC_CURRENCY,this.options.HELIOS.config.common.currencyCode),k.setProxyParam(f.PROXY_PARAM_KEYS.CURRENCY,this.options.HELIOS.config.common.formatting.currency.symbol),k.setProxyParam(f.PROXY_PARAM_KEYS.DEALER,f.PROXY_PARAM_VALUES.DEALER),k.setProxyParam(f.PROXY_PARAM_KEYS.ENGINE,c.vehicleFuelType),k.setProxyParam(f.PROXY_PARAM_KEYS.ID_VEHICLE,g),k.setProxyParam(f.PROXY_PARAM_KEYS.KM,c.km),k.setProxyParam(f.PROXY_PARAM_KEYS.LANG,this.options.HELIOS.config.common.locale.split("-")[0]),k.setProxyParam(f.PROXY_PARAM_KEYS.MODEL,c.vehicleModelCode),k.setProxyParam(f.PROXY_PARAM_KEYS.MODEL_C,c.vehicleModelName),k.setProxyParam(f.PROXY_PARAM_KEYS.MODEL_SPEC_CODE,h),k.setProxyParam(f.PROXY_PARAM_KEYS.POWER,c.vehicleFiscalHorsepower),k.setProxyParam(f.PROXY_PARAM_KEYS.POWER_WO_OPTIONS,c.Powerwooptions),k.setProxyParam(f.PROXY_PARAM_KEYS.PRICE,c.totalPrice),k.setProxyParam(f.PROXY_PARAM_KEYS.PRICE_TYPE,i),k.setProxyParam(f.PROXY_PARAM_KEYS.SEG,c.vehicleSeg),k.setProxyParam(f.PROXY_PARAM_KEYS.STYLE,f.PROXY_PARAM_VALUES.STYLE),k.setProxyParam(f.PROXY_PARAM_KEYS.TYPE,c.vehicleType),k.setProxyParam(f.PROXY_PARAM_KEYS.VEHICLE_BRAND,c.vehicleBrand),k.setProxyParam(f.PROXY_PARAM_KEYS.VERSION,c.vehicleVersionCode),k.setProxyParam(f.PROXY_PARAM_KEYS.VERSION_C,c.vehicleVersionName),k.setProxyParam(f.PROXY_PARAM_KEYS.VH_ID,c.vhid),this.isCityAndStateRequiredForRci()&&this.isPreferredDealerCitySet()&&this.isPreferredDealerStateSet()&&(k.setProxyParam(f.PROXY_PARAM_KEYS.CITY,this.getPreferredDealerCity()),k.setProxyParam(f.PROXY_PARAM_KEYS.STATE,this.getPreferredDealerState())),j[f.PROXY_PARAM_KEYS.BRAND]=this.options.HELIOS.config.brand,j[f.PROXY_PARAM_KEYS.COUNTRY]=this.options.HELIOS.config.common.countryCode,k.setProxyParams(j)},this))},i.prototype.onRciProxyReady=function(a,b){a.calculateFinancialOffer()},i.prototype.onRciFinancialOfferReloaded=function(a,c){var d=a.getFinancialOffer(),e={},f=d.getParams();parseInt(d.getErrorCode(),10)>0?c.reject(d.getErrorCode()+" - "+d.getErrorDisplayMessage()):b.isUndefined(f.detailedOffer)?c.reject(d.getParam("errorMessage")):(e[g.PRICE_KEYS.MONTHLY_PRICE]=f.monthlyPayment,e[g.PRICE_KEYS.LABEL]=d.getShortOfferBody(),e[g.PRICE_KEYS.LEGAL_ONE]=d.getTeachingSentence(),e[g.PRICE_KEYS.SIMULATOR_LABEL]=d.getShortOfferSimulatorLink(),e[g.PRICE_KEYS.HEADING_ONE]=d.getDetailedOfferH1(),e[g.PRICE_KEYS.HEADING_TWO]=d.getDetailedOfferH2(),e[g.PRICE_KEYS.TEXT]=d.getDetailedOfferText(),e[g.PRICE_KEYS.LEGAL_TWO]=d.getDetailedOfferLegalText(),e[g.PRICE_KEYS.IS_FINANCE_CALCULATOR_ENABLED]=!!d.getShortOfferSimulatorLink(),c.resolve(e))},
i.prototype.requestTotalPrice=function(a,c){var d,e=this.getRemoteServices(),f=!1;b.isUndefined(e)&&(f=!0,a.reject("remoteServices is undefined")),f||(d=b.isEmpty(c.versionKey)||b.isEmpty(c.gradeKey)?b.isEmpty(c.gradeKey)?this.functionInvoker(e,"getModelPrice",[c.modelKey,c.modelPath,c.priceCode]):this.functionInvoker(e,"getGradePrice",[c.modelKey,c.modelPath,c.gradeKey,c.priceCode]):this.functionInvoker(e,"getVersionPrice",[c.modelKey,c.modelPath,c.gradeKey,c.versionKey,c.priceCode]),d?d.done(b.partial(this.onRemoteServicesTotalPricePromiseDone,b,a)).fail(b.partial(this.onRemoteServicesTotalPricePromiseFail,b,b,a)):a.reject("remoteServices failed"))},i.prototype.onRemoteServicesTotalPricePromiseDone=function(a,b){a?b.resolve(a):b.reject("remoteServices failed")},i.prototype.onRemoteServicesTotalPricePromiseFail=function(a,b,c){c.reject("remoteServices failed with: "+b)},i.prototype.functionInvoker=function(a,b,c){return a[b].apply(a,c)},i.prototype.getRemoteServices=function(){return this.options.remoteServices},i}),define("c_221",["jquery","handlebars","waypoints","contentCarousel","pictureFill","underscore","c_220","heliosObject","analyticsManager"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(b){l(b),m(b),r.find(E.selectors.slickArrows).on(E.events.click,a.proxy(function(){o.prototype.arrowAnalytics()},o))}function k(a){l(a),m(a)}function l(a){if(void 0!==a){var b=a.$slider.parents(E.selectors.carSelector);b.removeClass(E.classes.hideLeftEdge),b.removeClass(E.classes.hideRightEdge),a.$prevArrow&&a.$nextArrow&&(a.$prevArrow.hasClass(E.classes.slickDisabled)?b.addClass(E.classes.hideLeftEdge):a.$nextArrow.hasClass(E.classes.slickDisabled)&&b.addClass(E.classes.hideRightEdge))}}function m(a){var b;void 0!==a&&(b=a.$slider.parents(E.selectors.carSelector),a.slideCount<=a.options.slidesToShow?b.addClass(E.classes.notScrollable):b.removeClass(E.classes.notScrollable))}function n(a){return new o(a)}var o,p,q,r,s,t,u,v,w,x,y,z=h.config.common.mediaQuery.breakpointsPx.small,A=h.config.common.mediaQuery.breakpointsPx.mediumMax,B=600,C={events:{namespace:".c_221",click:"click",scroll:"scroll",resize:"resize",popstate:"popstate",transitionend:"transitionend webkitTransitionEnd oTransitionEnd",orientationchange:"orientationchange"},history:{fileExtension:".html",gradeDir:"/vehicle-grade/"},classes:{activeCarButton:"active",stickyCarSelector:"c_221-with-sticky-car-selector",ajaxContentDiv:"c_221-ajax-target",ajaxPreloaderDiv:"ajax-preloader",showPreloader:"show-preloader",slickDisabled:"slick-disabled",hideLeftEdge:"hide-left-edge",hideRightEdge:"hide-right-edge",blurredEdgeLeft:"blurred-edge-left",blurredEdgeRight:"blurred-edge-right",fadeOutClass:"fade-out",notScrollable:"car-selector-no-scroll",slickInitialised:"slick-initialized"},selectors:{html:"html",body:"body",root:".c_221",carSelectorTemplate:".car-selector-template",slickCarousels:".slick-carousel",slickSlides:".slick-slide",slickArrows:".slick-next, .slick-prev",slickArrowPrev:".slick-prev",slickArrowNext:".slick-next",carSelector:".car-selector",carButtons:".car-button",carName:".car-name",dockedNav:".c_046B",fixedAnchorLinksContainer:".c_023-2",fixedAnchorLinks:".c_023-2 .docked-nav-wrapper",heroPanel:".c_220",fragments:[".c_002"]},attributes:{ajaxURL:"ajax-url"},ajaxLoadedComponents:["c_222","c_223","c_224","c_225","c_023_2"],postLoadRequestComponents:[".c_225"],cars:{activeIndex:0},slick:{dots:!1,infinite:!1,draggable:!1,slidesToShow:5,slidesToScroll:2,initialSlide:0,onInit:j,onAfterChange:k,rtl:!1,responsive:[{breakpoint:A,settings:{onInit:j,onAfterChange:k,slidesToShow:3,slidesToScroll:2}},{breakpoint:z,settings:{onInit:j,onAfterChange:k,slidesToShow:1,slidesToScroll:1}}]},device:{breakpoint:"large"},scrollSpeed:800},D="C221_Dynamic_Grade_Picker",E=null;return o=function(b){if(E=a.extend({},C,b),q=a(E.selectors.body),r=a(E.selectors.root),s=a(E.window),y=E.history.gradeDir,"rtl"===a("html").attr("dir")&&(E.slick.rtl=!0),void 0!==E.HELIOS.components.c221&&(t=E.HELIOS.components.c221.grades),!r.length||void 0===t)return!1;p=a(E.html),"rtl"===p.attr("dir")&&(E.slick.rtl=!0),this.eventsBound=!1,this.initialLoadComplete=!1,this.buildHTML(),this.ajaxPreloader.init(),this.setDeviceBreakpoint(),this.setup()},o.prototype.setup=function(){this.initialLoadComplete||(this.eventsBound||this.bindEvents(),this.setInitialCar(),this.toggleStickyPositioning(),this.initialiseCarousel())},o.prototype.initialiseCarousel=function(){r.each(function(b,c){var e=a(c).find(E.selectors.slickCarousels);e.length&&!e.hasClass(E.classes.slickInitialised)&&d.init(e,E)})},o.prototype.buildHTML=function(){var c,d,f;c=r.find(E.selectors.carSelectorTemplate).html(),d=b.compile(c),a.each(t,function(a,b){f=d(b),r.find(E.selectors.slickCarousels).append(f)}),e(r)},o.prototype.bindEvents=function(){var b="."+E.classes.blurredEdgeLeft+" , ."+E.classes.blurredEdgeRight;s.on(E.events.scroll+E.events.namespace,a.proxy(function(){this.toggleStickyPositioning()},this)).on(E.events.resize+E.events.namespace,a.proxy(function(){s.trigger(E.events.scroll),this.setDeviceBreakpoint()},this)).on(E.events.orientationchange+E.events.namespace,a.proxy(function(){this.toggleStickyPositioning()},this)),E.window.onpopstate=function(a){this.initialLoadComplete=!1,this.setup()}.bind(this),r.find(b).on(E.events.click,function(a){var b,c,d=a.currentTarget.className;d===E.classes.blurredEdgeLeft?(b=r.find(E.selectors.slickArrowPrev),b.trigger(E.events.click)):d===E.classes.blurredEdgeRight&&(c=r.find(E.selectors.slickArrowNext),c.trigger(E.events.click))}),r.find(E.selectors.carButtons).off().on(E.events.click,a.proxy(function(a){a.preventDefault(),this.carClickEvent(a.currentTarget)},this)),this.eventsBound=!0},o.prototype.carClickEvent=function(b){var c,d=a(b),e=d.attr("href"),f=d.data("grade"),h=v+y+f+E.history.fileExtension;d.hasClass(E.classes.activeCarButton)||(void 0!==g&&(g.changeGrade(f),this.sendAnalyticsObj(f,d)),c={gradeKey:f},E.window.history.replaceState(c," ",h),u=d,this.toggleCarActiveState(u),this.loadAJAXFragments(e)),this.initialLoadComplete=!0},o.prototype.setInitialCar=function(){var a,b,c;x=location.hash,w=E.window.location.pathname.replace(x,"").replace("#",""),b=w.indexOf(y),-1!==b?(v=w.substring(0,b),a=w.substring(b+y.length).replace(E.history.fileExtension,"")):(v=w,a=r.data("grade"),u=r.find(E.selectors.carButtons).eq(0),c=0),u=r.find(E.selectors.carButtons+'[data-grade="'+a+'"]'),c=u.parents(E.selectors.slickSlides).index(),u.trigger(E.events.click,!0),this.setInitialCarouselSlide(c)},o.prototype.setInitialCarouselSlide=function(a){var b,c=r.find(E.selectors.slickSlides).length,d=f.find(E.slick.responsive,function(a){return a.breakpoint==this[E.device.breakpoint]}.bind(this));b=void 0!==d?d.settings.slidesToShow:E.slick.slidesToShow,c>b&&(E.slick.initialSlide=a)},o.prototype.toggleStickyPositioning=function(){var a=E.window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,b=s.scrollTop(),c=a>=B;this.setStickyTopPositions(),!c||r.offset().top>=b?q.removeClass(E.classes.stickyCarSelector):c&&q.addClass(E.classes.stickyCarSelector)},o.prototype.setStickyTopPositions=function(){var b,c=a(E.selectors.fixedAnchorLinksContainer),d=a(E.selectors.fixedAnchorLinks),e=a(E.selectors.dockedNav),f=a(E.selectors.carSelector),g=e.outerHeight(),h=f.outerHeight(!0),i=g;b=h+i,f.css("top",i+"px"),c.css("height","auto"),d.css("top",b+"px")},o.prototype.toggleCarActiveState=function(b){r.find(E.selectors.carButtons).each(function(b,c){a(c).removeClass(E.classes.activeCarButton)}),void 0!==b&&b.addClass(E.classes.activeCarButton)},o.prototype.ajaxPreloader={init:function(){var b=this,c=document.createElement("div");c.className=E.classes.ajaxPreloaderDiv,b.$loader=a(c),b.$loader.insertAfter("."+C.classes.ajaxContentDiv)},show:function(){var b=this,c=r.find("."+E.classes.ajaxContentDiv),d=a(E.selectors.heroPanel),e=!1;c.off().one(E.events.transitionend,function(f){e||a("html, body").animate({scrollTop:0},E.scrollSpeed).promise().done(function(){c.removeClass(E.classes.fadeOutClass),void 0!==g&&d.length&&g.toggleContentVisibility(),e=!0,b.hide()})}),b.$loader.addClass(E.classes.showPreloader),c.addClass(E.classes.fadeOutClass),void 0!==g&&d.length&&g.toggleContentVisibility()},hide:function(){this.$loader.removeClass(E.classes.showPreloader)}},o.prototype.loadAJAXFragments=function(b){void 0!==b?(this.ajaxPreloader.show(),a.ajax({context:this,url:b,type:"GET",success:function(b){var c=a(b);void 0!==this.processFragmentHTML&&this.processFragmentHTML(c)},error:function(){this.ajaxPreloader.hide()}})):this.ajaxPreloader.hide()},o.prototype.processFragmentHTML=function(b){var c,d;for(a("."+C.classes.ajaxContentDiv).html(""),d=0;d<C.selectors.fragments.length;d++)c=b.find(C.selectors.fragments[d]),b.find(C.selectors.fragments[d]).length&&this.appendHTML(c)},o.prototype.appendHTML=function(b){var c;b.each(function(b,d){c=a(d)[0].outerHTML,a("."+C.classes.ajaxContentDiv).append(c)}),this.requestAdditionalHTML()},o.prototype.requestAdditionalHTML=function(){var b,c,d=a("."+C.classes.ajaxContentDiv).find(E.postLoadRequestComponents.join(",")),e=[];d.each(function(d,f){b=a(f),void 0!==(c=b.data(E.attributes.ajaxURL))&&""!==c&&e.push({$componentInstance:b,request:a.ajax({context:this,url:c,type:"GET"})})});var f=a.map(e,function(a){return a.request});a.when(f).always(function(b){a.each(b,function(b,c){c.then(function(c,d,f){var g=a(c);g=g.find(E.selectors.body).html(),e[b].$componentInstance.html(g)},function(a,c,d){e[b].$componentInstance.remove()})}),this.initialiseAjaxLoadedComponents()}.bind(this))},o.prototype.sendAnalyticsObj=function(a,b){var c=E.analyticsManager.trackingVars.toggle,d=b.find(E.selectors.carName).text(),e={componentId:D,toggleType:"grade-picker",toggleText:d,vehicleGrade:a};E.analyticsManager.tag(c,e)},o.prototype.arrowAnalytics=function(){var a=E.analyticsManager.trackingVars.carouselInteraction,b={componentId:D,carouselType:"normal",interactionType:"grade-picker"};E.analyticsManager.tag(a,b)},o.prototype.initialiseAjaxLoadedComponents=function(){var a,b;"require"!==E.ajaxLoadedComponents[0]&&E.ajaxLoadedComponents.splice(0,0,"require"),require(E.ajaxLoadedComponents,function(c){for(a=0;a<E.ajaxLoadedComponents.length;a++)b=c(E.ajaxLoadedComponents[a]+""),void 0!==b.init&&b.init({HELIOS:E.HELIOS,window:E.window,analyticsManager:new i({HELIOS:E.HELIOS,window:E.window,_satellite:E.window._satellite})})})},o.prototype.setDeviceBreakpoint=function(){var a,b;E.window.matchMedia&&(a=E.window.matchMedia(E.HELIOS.config.common.mediaQuery.is.large),b=E.window.matchMedia(E.HELIOS.config.common.mediaQuery.is.medium),a.matches?E.device.breakpoint="largeBreakPoint":b.matches?(E.device.breakpoint="mediumBreakPoint",this.mediumBreakPoint=A):(E.device.breakpoint="smallBreakPoint",this.smallBreakPoint=z))},{init:n}}),define("c_224",["jquery","underscore"],function(a,b){"use strict";function c(c){if(p=a.extend({},o,c),i=a(p.selectors.root),!i.length)return!1;m=a(p.selectors.html),"rtl"===m.attr("dir")&&(q=!0),j=i.find("table").first(),l=i.find(p.selectors.engineSpecLink),k=j.parent(),n=a(window),n.on(p.events.resize,b.debounce(f,150)),f(),l.on(p.events.click,g),k.on(p.events.scroll,h),d(),e(l)}function d(){function b(b,e){c=a(e),(d=parseInt(b+1,10)%2==0)&&c.addClass(p.classes.evenGraphRow)}var c,d,e=j.find(p.selectors.tableRow+":not(."+p.classes.graphImage+")"),f=j.find("."+p.classes.graphImage);f&&(j.addClass(p.classes.graphTable),f.each(function(a,c){b(a,c)}),e.each(function(a,c){b(a,c)}))}function e(b){b.each(function(b,c){var d=a(c),e=d.attr(p.attributes.href),f=d.data(p.data.gradeCode),g=d.data(p.data.versionCode);e&&f&&g&&(p.regex.deeplinkUrl.test(e)||d.attr(p.attributes.href,e.replace(".html","."+f+"."+g+".html")))})}function f(){parseInt(j.width(),10)>parseInt(k.width(),10)?i.addClass(p.classes.enabled).removeClass(p.classes.disabled):i.addClass(p.classes.disabled).removeClass(p.classes.enabled)}function g(b){var c=a(b.currentTarget),d=p.analyticsManager.trackingVars.genericClick,e=c.attr("href"),f=c.html(),g={componentId:"C224_Dynamic_Grade_Version_Table",locationInPage:"grade-version-table",destination:e,buttonText:f};p.analyticsManager.tag(d,g)}function h(b){var c,d,e=parseInt(k.width(),10),f=j.outerWidth();q?(c=a(b.currentTarget).scrollLeft(),d=100-c/f*100):(c=a(b.currentTarget).scrollLeft(),d=Math.round(c/(f-e)*100)),d>80?i.addClass(p.classes.hideRightEdge):i.removeClass(p.classes.hideRightEdge)}var i,j,k,l,m,n,o={events:{resize:"resize.c_224",scroll:"scroll.c_224",click:"click",swipe:"click.c_224 touchend.c_224 mousedown.c_224"},classes:{enabled:"scroll-enabled",disabled:"scroll-disabled",hideRightEdge:"hide-right-edge",graphImage:"graph-image",graphTable:"graph-table",evenGraphRow:"even-row"},selectors:{html:"html",root:".c_224",swipeMask:".swipe-mask",engineSpecLink:".engine-spec-link",tableRow:"tr"},data:{gradeCode:"grade-key",versionCode:"version-key"},attributes:{href:"href"},regex:{deeplinkUrl:/(\.{1,1}[\w]+\.{1,1}[\w]+\.html)/}},p=null,q=!1;return{init:c}}),define("c_225",["jquery","underscore","swipeBox","accordion","accordionItem","pictureFill"],function(a,b,c,d,e,f){"use strict";function g(b){var c,d,e,f,g,h,i=b.data.$rootInstance,j=i.find(l.selectors.subTextComponents),k=[],n={},o=i.find(l.selectors.sectionTitle).text(),p={};j.length&&(j.each(function(b,g){var h=a(g);d=h.find("img").attr("src"),e=h.find(l.selectors.imageTitle).html(),f=a(g).find(l.selectors.imageDescription).html(),c=["<h3>"+e+"</h3>"],void 0!==f&&c.push("<p>"+f+"</p>"),c.join("\n"),n={href:d,title:c,imageTitle:e},h.data("index",b),k.push(n)}),g=a(b.currentTarget).parents(l.selectors.subTextComponents).data("index"),a.swipebox(k,{initialIndexOnArray:g,afterOpen:function(){h=a(l.selectors.swipeboxOverlay),h.on(l.events.click,a.swipebox.close),p={locationInPage:l.analyticsValues.interactionType+":"+o.toLowerCase()+":image"+(g+1)},m.track(l.analyticsValues.contentDisplayed,p)},nextSlide:function(a){p={promoText:k[a].imageTitle,itemNumber:a+1+"/"+k.length,interactionType:l.analyticsValues.interactionType},m.track(l.analyticsValues.carouselInteraction,p)},prevSlide:function(a){p={promoText:k[a].imageTitle,itemNumber:a+1+"/"+k.length,interactionType:l.analyticsValues.interactionType},m.track(l.analyticsValues.carouselInteraction,p)}})),b.preventDefault()}function h(a){return new j(a)}var i,j,k={events:{resize:"resize",click:"click"},classes:{clickToViewMoreClass:"view-more-trigger",viewMoreItemsIsVisible:"view-more-items-visible",viewMoreHiddenItem:"view-more-hidden-item",accordion:"accordion",openModalClass:"modal-window-click"},selectors:{root:".c_225",subTextComponents:".c_225-2",subTextComponentsPicElem:".picture-element a",accordion:".accordion",accordionPanel:".accordion-panel",accordionHeader:".accordion-header",sectionTitle:"h3",imageTitle:"figcaption span",imageDescription:".content-group .description",swipeboxOverlay:".swipebox-overlay",carSelectorCarousel:".c_221-with-sticky-car-selector .c_221 .slick-carousel",fixedNaBar:".c_046B",fixedAnchorLinks:".c_023"},device:{resolution:"standard"},viewMore:{visibleItems:{large:3,medium:1,small:1},clickableIndex:""},accordion:{scrollOnOpenEnabled:!0,multipleOpenEnabled:!0,defaultOpen:-1},analyticsValues:{componentId:"C225_Dynamic_Grade_Options_Highlight",interactionType:"grade-options-highlight",contentDisplayed:{trackingVar:"contentDisplayed",defaults:{}},carouselInteraction:{trackingVar:"carouselInteraction",defaults:{carouselType:"normal"}}},debounce:250},l=null;j=function(b){if(l=a.extend({},k,b),i=a(l.selectors.root),!i.length)return!1;this.setup()},j.prototype.setup=function(){var b,c;this.setDeviceBreakpoint(),this.bindEvents(),this.viewMoreItems.init(),i.each(function(d,e){b=a(e),c=b.find("."+l.classes.accordion),c.length&&this.accordion.init(c)}.bind(this)),f(i)},j.prototype.bindEvents=function(){window.addEventListener(l.events.resize,b.debounce(this.checkForBreakpointChange,l.debounce).bind(this),!1)},j.prototype.accordion={init:function(c){var f,g,h=a(l.selectors.accordionPanel,c),i=a(l.selectors.accordionHeader,c),j=[],k=[],m=i.parent(),n=i.filter('[data-state="open"]').parent();for(n.length&&n.each(function(){k.push(m.index(a(this)))}),g=0,f=i.length;g<f;g++)j.push(new e({$contentElement:h.eq(g),$headerElement:i.eq(g),isDisabled:!1,isOpen:b.contains(k,g),multipleOpenEnabled:l.accordion.multipleOpenEnabled,transitionToClose:"slideUp"}));new d({$container:c,isScrollOnOpenEnabled:l.accordion.scrollOnOpenEnabled,isMultipleOpenItemsEnabled:l.accordion.multipleOpenEnabled,items:j,transitionToClose:"slideUp",fixedComponentsToOffset:[l.selectors.carSelectorCarousel,l.selectors.fixedNaBar,l.selectors.fixedAnchorLinks]})}};var m={track:function(b,c){var d={componentId:l.analyticsValues.componentId};void 0===c&&(c={}),c=a.extend(d,b.defaults,c),l.analyticsManager.tag(b.trackingVar,c)}};return j.prototype.viewMoreItems={init:function(){this.setClickableItem()},setClickableItem:function(){var b=this;i.each(function(c,d){var e,f=a(d),h=f.find(l.selectors.subTextComponents),i=h.find(l.selectors.subTextComponentsPicElem),j=l.classes.viewMoreHiddenItem,k=l.classes.clickToViewMoreClass;h.length&&i.length&&(h.removeClass(k),h.removeClass(l.classes.openModalClass),h.removeClass(j),h.off(),e=h.length-l.viewMore.clickableIndex,h.each(function(c,d){var h=a(d),i=h.find(l.selectors.subTextComponentsPicElem);c!==l.viewMore.clickableIndex||f.hasClass(l.classes.viewMoreItemsIsVisible)?(h.addClass(l.classes.openModalClass),i.off().on(l.events.click,{$rootInstance:f},g)):(h.addClass(k),i.off().on(l.events.click,{$rootInstance:f,self:b},b.toggle),b.setClickToViewMoreText(f,e)),c>l.viewMore.clickableIndex&&h.addClass(j)}))})},setClickToViewMoreText:function(a,b){a.find("."+l.classes.clickToViewMoreClass).find(l.selectors.subTextComponentsPicElem).attr("data-content","+ "+b)},toggle:function(b){var c=b.data.self,d=b.data.$rootInstance,e=d.find(l.selectors.subTextComponents);d.hasClass(l.classes.viewMoreItemsIsVisible)?(e.removeClass(l.classes.openModalClass),c.hide(d)):(e.addClass(l.classes.openModalClass),c.show(d)),a(this).off().on(l.events.click,{$rootInstance:d},g),b.preventDefault()},show:function(a){a.addClass(l.classes.viewMoreItemsIsVisible)},hide:function(a){a.removeClass(l.classes.viewMoreItemsIsVisible)}},j.prototype.checkForBreakpointChange=function(){var a=l.device.breakpoint;this.setDeviceBreakpoint(),a!==l.device.breakpoint&&this.viewMoreItems.setClickableItem()},j.prototype.setDeviceBreakpoint=function(){var a,b;window.matchMedia&&(a=window.matchMedia(l.HELIOS.config.common.mediaQuery.is.large),b=window.matchMedia(l.HELIOS.config.common.mediaQuery.is.medium),a.matches?(l.device.breakpoint="large",l.viewMore.clickableIndex=l.viewMore.visibleItems.large):b.matches?(l.device.breakpoint="medium",l.viewMore.clickableIndex=l.viewMore.visibleItems.medium):(l.device.breakpoint="small",l.viewMore.clickableIndex=l.viewMore.visibleItems.small))},{init:h}}),define("financeManagerConstants",[],function(){"use strict";return{PARAMS:{CUSTOM:"custom"},DATA:{RCI_PROXY_INSTANCE:"rciProxyInstance"},EVENTS:{PRICE_CHANGE:"priceChange",SIMULATOR_RENDERED:"simulatorRendered"}}}),define("financeManager",["jquery","underscore","rciProxyHelperSingleton","objectFactory","rciProxyConstants_","remoteServices","financeManagerConstants"],function(a,b,c,d,e,f,g){var h=function(a){this.options=a};return h.prototype.isVehicleNci=function(a){return a&&a.vehicleType===e.PROXY_PARAM_VALUES.TYPE.NEW_VEHICLE},h.prototype.isVehicleUci=function(a){return a&&a.vehicleType===e.PROXY_PARAM_VALUES.TYPE.USED_VEHICLE},h.prototype.getPriceType=function(a){return a.priceIncludesTax?e.PROXY_PARAM_VALUES.PRICE_TYPE.INCLUDES_TAX:e.PROXY_PARAM_VALUES.PRICE_TYPE.EXCLUDES_TAX},h.prototype.showCalculator=function(f,g,i){var j,k=a.Deferred();return c.getConstructor().done(b.bind(function(a){var c,l,m=this.getPriceType(g),n={};j=d.getObject(a),this.isVehicleNci(g)&&(c=l=g.vehicleModelSemiClair),this.isVehicleUci(g)&&(c=l=g.vehicleElectricModelKey),j.setProxyParam(e.PROXY_PARAM_KEYS.AGE,g.age),j.setProxyParam(e.PROXY_PARAM_KEYS.CALC_CURRENCY,g.currencyCode||this.options.HELIOS.config.common.currencyCode),j.setProxyParam(e.PROXY_PARAM_KEYS.CURRENCY,this.options.HELIOS.config.common.formatting.currency.symbol),j.setProxyParam(e.PROXY_PARAM_KEYS.DEALER,e.PROXY_PARAM_VALUES.DEALER),j.setProxyParam(e.PROXY_PARAM_KEYS.ENGINE,g.vehicleFuelType),j.setProxyParam(e.PROXY_PARAM_KEYS.ID_VEHICLE,c),j.setProxyParam(e.PROXY_PARAM_KEYS.KM,g.km),j.setProxyParam(e.PROXY_PARAM_KEYS.LANG,this.options.HELIOS.config.common.locale.split("-")[0]),j.setProxyParam(e.PROXY_PARAM_KEYS.MODEL,g.vehicleModelCode),j.setProxyParam(e.PROXY_PARAM_KEYS.MODEL_C,g.vehicleModelName),j.setProxyParam(e.PROXY_PARAM_KEYS.MODEL_SPEC_CODE,l),j.setProxyParam(e.PROXY_PARAM_KEYS.POWER,g.vehicleFiscalHorsepower),j.setProxyParam(e.PROXY_PARAM_KEYS.POWER_WO_OPTIONS,g.Powerwooptions),j.setProxyParam(e.PROXY_PARAM_KEYS.PRICE,g.totalPrice),j.setProxyParam(e.PROXY_PARAM_KEYS.PRICE_WO_OPTIONS,g.priceWoOptions),j.setProxyParam(e.PROXY_PARAM_KEYS.PRICE_TYPE,m),j.setProxyParam(e.PROXY_PARAM_KEYS.SEG,g.vehicleSeg),j.setProxyParam(e.PROXY_PARAM_KEYS.STYLE,e.PROXY_PARAM_VALUES.STYLE),j.setProxyParam(e.PROXY_PARAM_KEYS.TYPE,g.vehicleType),j.setProxyParam(e.PROXY_PARAM_KEYS.VEHICLE_BRAND,g.vehicleBrand),j.setProxyParam(e.PROXY_PARAM_KEYS.VERSION,g.vehicleVersionCode),j.setProxyParam(e.PROXY_PARAM_KEYS.VERSION_C,g.vehicleVersionName),j.setProxyParam(e.PROXY_PARAM_KEYS.VH_ID,g.vhid),n[e.PROXY_PARAM_KEYS.BRAND]=this.options.HELIOS.config.brand,n[e.PROXY_PARAM_KEYS.COUNTRY]=this.options.HELIOS.config.common.countryCode,j.setProxyParams(n),j.addListener(e.EVENTS.PROXY_READY,b.bind(this.onRciProxyReady,this,f,j)),j.addListener(e.EVENTS.FINANCIAL_OFFER_RELOADED,b.bind(this.onRciFinancialOfferReloaded,this,j,i)),j.addListener(e.EVENTS.SIMULATOR_RENDER_COMPLETED,b.bind(this.onSimulatorRenderCompleted,this,j,i)),h.prototype.RciProxyInstance=j,k.resolve()},this)).fail(b.bind(function(){k.reject()},this)),k},h.prototype.getRciProxyInstance=function(){return h.prototype.RciProxyInstance},h.prototype.onRciProxyReady=function(b,c){c.isSimulatorExist()?c.refreshSimulator(!0):(a(b).empty(),c.createSimulator(b))},h.prototype.onRciFinancialOfferReloaded=function(a,b){var c=a.getFinancialOffer(g.PARAMS.CUSTOM);b.data(g.DATA.RCI_PROXY_INSTANCE,a),b.trigger(g.EVENTS.PRICE_CHANGE,c)},h.prototype.onSimulatorRenderCompleted=function(a,b){b.trigger(g.EVENTS.SIMULATOR_RENDERED,a)},h.prototype.apigeeExternalCalculatorRequest=function(a,b,c,d,e,g,h,i){return f.getExternalFinanceLink(a,b,c,d,e,g,h,i)},h.prototype.refreshSimulator=function(a){var c=this.getRciProxyInstance();b.isEmpty(a)||c.setProxyParam(e.PROXY_PARAM_KEYS.PRICE,a.totalPrice),c.refreshSimulator(!0)},h}),define("c_219",["jquery","handlebars","storageManager","underscore","disclaimers"],function(a,b,c,d,e){"use strict";function f(b){if(N=a.extend({},O,b),D=a(N.selectors.root),!D.length)return!1;E=D.find(N.selectors.modelListSelect),F=D.find(N.selectors.yearListSelect),G=D.find(N.selectors.searchData),H=D.find(N.selectors.showingResultTxt),I=D.find(N.selectors.selectedModelTxt),J=D.find(N.selectors.selectedYearTxt),K=D.find(N.selectors.searchDropDownSection),L=D.find(N.selectors.ajaxLoader),A().done(B).fail(function(){C()})}function g(){E.on(N.events.change,k),F.on(N.events.change,i),G.on(N.events.click,N.selectors.fileDownload,h)}function h(b){var c,d=a(b.target),e=d.text(),f=d.attr("href"),g=D.find(N.selectors.modelSelectedLabel).text(),h=D.find(N.selectors.yearSelectedLabel).text();c={componentId:N.analyticsValue.componentId,destination:f,vehicleModel:g,vehicleYear:h,locationInPage:N.analyticsValue.locationInPage,buttonText:e},N.analyticsManager.tag(N.analyticsManager.trackingVars.genericClick,c)}function i(){var a=E.val(),b=F.val(),c=F.data(N.data.selectDefaultTxt);a&&b&&c!==b&&o(a,b)}function j(b){var c,e=a("<option />").prop(N.props.disabled,!0).text(E.data(N.data.selectDefaultTxt)),f=!1;d.each(M,function(c){e=e.add(a("<option />").attr("value",c.title).text(c.title)),d.isUndefined(b)||c.title!==b||(f=!0)}),c=e.find("option:not(["+N.props.disabled+"])").length,f?(E.empty().append(e).prop(N.props.disabled,c),E.val(b),D.find(N.selectors.modelSelectedLabel).text(b)):(E.empty().append(e).prop(N.props.selectedIndex,-1).prop(N.props.disabled,c),D.find(N.selectors.modelSelectedLabel).text(E.data(N.data.selectDefaultTxt)),D.find(N.selectors.yearSelectedLabel).text(F.data(N.data.selectDefaultTxt)))}function k(b){var c,e,f=E.val(),g=E.data(N.data.selectDefaultTxt),h=a("<option />").prop(N.props.disabled,!0).text(F.data(N.data.selectDefaultTxt));x(),f&&f!==g&&d.each(M,function(b){b.title===f&&(c=b.years.sort(),d.each(c,function(b){h=h.add(a("<option />").attr("value",b).text(b))}))}),e=h.find("option:not(["+N.props.disabled+"])").length,f&&d.isString(b)?(F.empty().append(h).prop(N.props.disabled,e),F.val(b),D.find(N.selectors.yearSelectedLabel).text(b)):(F.empty().append(h).prop(N.props.selectedIndex,-1).prop(N.props.disabled,e),D.find(N.selectors.yearSelectedLabel).text(F.data(N.data.selectDefaultTxt)))}function l(){var b=a("<option />").prop(N.props.disabled,!0).text(F.data(N.data.selectDefaultTxt));D.find(N.selectors.modelSelectedLabel).text(E.data(N.data.selectDefaultTxt)),D.find(N.selectors.yearSelectedLabel).text(F.data(N.data.selectDefaultTxt)),a(N.selectors.modelListSelect+" option:eq(0)").prop(N.props.selected,!0),F.empty().append(b).prop(N.props.selectedIndex,-1).prop(N.props.disabled,!0)}function m(){var a=G.data(N.data.errorTxt);x(),N.window.location&&N.window.location.hash&&G.append('<p class="'+N.classes.contentCopy+'">'+a+"</p>")}function n(b){return a.ajax({url:b,type:"GET"})}function o(a,b){var c,e,f=K.data(N.data.manualsGuidesUrl);d.isUndefined(a)||d.isUndefined(b)||d.isUndefined(f)||(L.addClass(N.classes.isActive),x(),e=f.replace(N.CONSTANT_VALUES.YEAR,b).replace(N.CONSTANT_VALUES.MODEL,a),c=n(e),c.done(function(c){p(c,a,b)}).fail(q))}function p(a,c,f){var g,h,i,j;if(L.removeClass(N.classes.isActive),!d.isEmpty(a))try{j="object"==typeof a?a:JSON.parse(a)}catch(e){j={}}!d.isUndefined(j)&&j.totalResults?(h=b.compile(D.find(N.selectors.searchTemplate).html()),g={getSearchManuals:v(j)},i={componentId:N.analyticsValue.componentId,vehicleModel:c,vehicleYear:f,searchType:N.analyticsValue.searchType,searchFilter:N.analyticsValue.searchFilter,searchResults:j.totalResults,searchFilterValue:c+":"+f},y(c,f),G.html(h(g)),z(i),e.renderDisclaimers()):C()}function q(){L.removeClass(N.classes.isActive),C()}function r(){var a,b,e,f;N.window.location&&N.window.location.hash?(a=decodeURIComponent(N.window.location.hash),b=a.split(N.CONSTANT_VALUES.AMPERSAND),d.each(b,function(a){a.indexOf(N.CONSTANT_VALUES.SPLIT_MODEL)>-1&&(e=a.split(N.CONSTANT_VALUES.EQUAL_TO)[1]),a.indexOf(N.CONSTANT_VALUES.SPLIT_YEAR)>-1&&(f=a.split(N.CONSTANT_VALUES.EQUAL_TO)[1])}),w(e,f)):c.loadItem("OwnerServicesLoggedInName",{mode:"cookie"})?s():j()}function s(){var a,b=K.data(N.data.ownerServiceUrl);L.addClass(N.classes.isActive),a=n(b),a.done(t).fail(u)}function t(b){var e=b.owned,f=!1,g=c.loadItem("c_141");L.removeClass(N.classes.isActive),d.isEmpty(e)?j():(a.each(e,function(a){d.isNull(g)||e[a].vin!==g.vin||(f=!0,w(e[a].vehicleName,e[a].modelYear))}),f||w(e[0].vehicleName,e[0].modelYear))}function u(){L.removeClass(N.classes.isActive),C()}function v(b){var c=b.results,e=[],f=[],g=N.props.sortByDate,h=N.props.sortByRank;return a.each(c,function(a){c[a].rank?e.push(c[a]):c[a].lastModifiedDate&&f.push(c[a])}),e=d.chain(e).sortBy(g).reverse().sortBy(h).compact().value(),f=d.sortBy(f,g).reverse(),e.concat(f)}function w(a,b){var c=!0;j(),d.each(M,function(e){e.title===a&&(c=!1,j(a),d.contains(e.years,b)?(k(b),o(a,b)):C())}),c&&m()}function x(){G.empty(),H.hide()}function y(a,b){I.text(a),J.text(b),H.show()}function z(a){N.analyticsManager.tag(N.analyticsManager.trackingVars.search,a)}function A(){return n(K.data(N.data.tagSearchUrl))}function B(b){var e,f=[];if(!d.isEmpty(b))try{e="object"==typeof b?b:JSON.parse(b)}catch(e){e={}}d.isUndefined(e)||d.isUndefined(e.applicableVehicles)?C():(a.each(e.applicableVehicles,function(a){f.push(e.applicableVehicles[a])}),M=d.sortBy(f,N.props.title),c.init(),g(),r())}function C(){l(),m()}var D,E,F,G,H,I,J,K,L,M,N,O={events:{change:"change",click:"click"},classes:{isActive:"active",contentCopy:"content-copy"},selectors:{root:".c_219",modelListSelect:".model-list",yearListSelect:".year-list",searchTemplate:"script[data-template=c_219_search_data]",searchData:".search-data",modelSelectedLabel:".model-select-val",yearSelectedLabel:".year-select-val",searchDropDownSection:".search-dropdown-section",splitTextModel:".model-",splitTextYear:".year-",ajaxLoader:".ajax-loading",showingResultTxt:".showing-result-text",selectedModelTxt:".selectedModel",selectedYearTxt:".selectedYear",fileDownload:".file-download"},data:{ownerServiceUrl:"ownerServiceUrl",tagSearchUrl:"tagSearchUrl",errorTxt:"errorTxt",selectDefaultTxt:"defaultText",manualsGuidesUrl:"manualsGuidesUrl"},props:{sortByDate:"lastModifiedDate",sortByRank:"rank",disabled:"disabled",selected:"selected",selectedIndex:"selectedIndex",title:"title"},analyticsValue:{componentId:"C219_Search_Manual_Guides",locationInPage:"owner-services:manual-guides",searchType:"owner-services",searchFilter:"manual-guides"},CONSTANT_VALUES:{SPLIT_MODEL:"model=",SPLIT_YEAR:"year=",EQUAL_TO:"=",AMPERSAND:"&",YEAR:"{year}",MODEL:"{model}"}};return{init:f,authenicatedUserCarModelYear:t,renderSearchResults:p,updateApplicableVehicles:B,checkValidModelYear:w}}),define("c_211C_0",["jquery","pictureFill","trackingCodes"],function(a,b,c){"use strict";function d(c){if(p=a.extend({},o,c),i=a(p.selectors.root),j=p.selectors.modelWrapper,k=p.selectors.modelTitle,l=p.selectors.modelPicture,m=p.selectors.fullModelName,n=a(p.selectors.analyticsTarget),!i.length)return!1;h(),b(i)}function e(b){var d,e=a(b.target).closest(j),h=a(b.target),i=g(e),k=a(m).html(),l="not found",n=q.genericClick,o={};d=p.analyticsManager.getTrackingObjectProperties(n),o[d.componentId]=c.componentIds.C211_split_model,o[d.destination]=h.attr("href")||"",o[d.locationInPage]="split-model-panel",o[d.buttonText]=f(h,i),o[d.vehicleModel]=HELIOS.adobe.tagging.vehicleModel||k,o[d.vehicleId]=i||l,o[d.vehicleCategory]=HELIOS.adobe.tagging.vehicleCategory||l,p.analyticsManager.tag(n,o)}function f(a,b){var c=p.classes.imageSuffix,d=p.classes.configCl;return a.closest(l).length?b+c:a.hasClass(d)?b+"-"+a.text():""}function g(a){return a.find(k).html()}function h(){n.on(p.events.click,e)}var i,j,k,l,m,n,o={events:{click:"click"},selectors:{root:".c_211C-0",modelWrapper:".body-item",modelTitle:".type",modelPicture:".picture-element",description:".description",cta:".cta",fullModelName:".body-heading .name",analyticsTarget:".analytics-target"},classes:{imageSuffix:"-image",configCl:"cta"}},p=null,q=c.eventTypes;return{init:d}}),define("c_232",["jquery","handlebars","heliosObject","underscore","disclaimers","keyCodeConstants"],function(a,b,c,d,e,f){"use strict";function g(){return d.uniqueId()}function h(a){return a.replace(/<\/?[^>]+(>|$)/g,"")}function i(a,b){return-1!==h(a.question).toLowerCase().indexOf(b.toLowerCase())||-1!==h(a.answer).toLowerCase().indexOf(b.toLowerCase())}function j(b){return a(b).html()}function k(a){return b.compile(j(a))}function l(){var b=H.find(E.selectors.categoryAccordionHead+E.dot+E.classes.active),c=[];return d.each(b,function(b){c.push(a(b).data(E.data.categoryTitle))}),c}function m(b){var c,d,e,f,g=E.analyticsManager.trackingVars.accordionExpansion,h=a(b).closest(E.selectors.faqResults);b.hasClass(E.classes.faqAccordionHead)?(f=b.closest(E.selectors.faqs).data(E.data.isSearch),d=f?E.analytics.faqSearch+E.colon+b.data(E.data.faqTitle):h.data(E.data.categoryAccordionText)+E.colon+b.data(E.data.faqTitle)):(c=l(),d=c.join(E.colon)),e={componentId:E.analytics.componentIdListing,
accordionType:E.analytics.type,accordionText:d},E.analyticsManager.tag(g,e)}function n(b){var c,d=a(b.target),e=d.text(),f=d.attr("href"),g=E.analyticsManager.trackingVars.genericClick;c={componentId:E.analytics.componentIdListing,buttonText:e,destination:f,locationInPage:E.analytics.type},E.analyticsManager.tag(g,c)}function o(b){var c,d=a(E.selectors.SearchInput),e=E.analyticsManager.trackingVars.search;c={componentId:E.analytics.componentIdSearch,action:E.analytics.action,searchType:E.analytics.type,searchTerm:d.val(),searchResults:b.length},E.analyticsManager.tag(e,c)}function p(){a(E.selectors.categoriesContainer).find(E.selectors.active).next(E.selectors.category).removeClass(E.classes.current).slideUp(),a(E.selectors.categoriesContainer).find(E.selectors.active).removeClass(E.classes.active)}function q(b,c){var d=c||a(E.selectors.faqContainer).find(E.selectors.faqResults),f=l();a(E.selectors.faqDefault).addClass(E.classes.hidden),a(E.selectors.faqNoResults).addClass(E.classes.hidden),d.removeClass(E.classes.hidden),f&&d.data(E.data.categoryAccordionText,f.join(E.colon)),d.html(I(b)),e.renderDisclaimers()}function r(b){var c=a(E.selectors.faqResults).data(E.data.searchResultsHeading),d={};d.title=c,d.search=!0,d.faq=b,q(d)}function s(b){J.matches&&(b===E.CONSTANTS.ADD?(a(E.selectors.categoryCol).addClass(E.classes.hidden),a(E.selectors.faqCol).addClass(E.classes.show)):(a(E.selectors.categoryCol).removeClass(E.classes.hidden),a(E.selectors.faqCol).removeClass(E.classes.show)))}function t(){var b,c=a.trim(a(E.selectors.searchFaqInput).val())||"";c?(d.each(L,function(a){b=d.union(b,d.filter(a.faq,function(a){return i(a,c)}))}),b=d.uniq(b,function(a){return a.question}),b.length?r(b):(a(E.selectors.faqResults).addClass(E.classes.hidden),a(E.selectors.faqDefault).addClass(E.classes.hidden),a(E.selectors.faqNoResults).removeClass(E.classes.hidden)),s(E.CONSTANTS.ADD),p(),o(b)):s(E.CONSTANTS.REMOVE)}function u(b){var c=a(E.selectors.searchTextParent);b.val()?c.addClass(E.classes.notEmpty):c.removeClass(E.classes.notEmpty)}function v(b){var c=a(b.target);u(c),b.which!==f.ENTER&&(b.which!==f.DELETE&&b.which!==f.BACKSPACE||c.val()||!J.matches)||t()}function w(){var b=a(E.selectors.searchFaqInput),c=a(E.selectors.searchTextParent);b.val(""),c.removeClass(E.classes.notEmpty),J.matches&&t()}function x(){var b=F[0];b.faq.length&&!J.matches?(a(E.selectors.categoriesFirstChildHeader).addClass(E.classes.active),q(b)):a(E.selectors.faqDefault).removeClass(E.classes.hidden)}function y(b){var c=a(E.selectors.dockedNav),d=0;c.length&&(d=c.outerHeight(!0)),a(E.selectors.htmlBody).animate({scrollTop:b.offset().top-d},E.transitionDuration)}function z(b){var c,d,e,f,g=a(b.currentTarget),h=g.data(E.data.hasFaq);g.next(E.selectors.faqResults);h&&!J.matches&&g.closest(E.selectors.categoriesContainer).find(E.selectors.hasFaq).removeClass(E.classes.active),c=g.closest(E.selectors.categoriesContainer).find(E.selectors.categoryAccordionHead+E.dot+E.classes.active),d=c.not(g.parents(E.selectors.category).find(E.selectors.categoryAccordionHead)).not(g.parents(E.selectors.category).prev(E.selectors.categoryAccordionHead)).not(g),d.removeClass(E.classes.active),d.next(E.selectors.category).is(E.selectors.isVisible)&&d.next(E.selectors.category).removeClass(E.classes.current).slideUp(E.transitionDuration),e=g.closest(E.selectors.category+E.dot+E.classes.current).find(E.selectors.category),e.length>1&&(e.not(g.next(E.selectors.category)).slideUp(E.transitionDuration),e.not(g.next(E.selectors.category)).prev(E.selectors.categoryAccordionHead).removeClass(E.classes.active)),J.matches&&(f=g.closest(E.selectors.categoriesContainer).find(E.selectors.faqResults+E.selectors.isVisible).not(g.next(E.selectors.faqResults)),f.prev(E.selectors.categoryAccordionHead).removeClass(E.classes.active),f.slideUp(E.transitionDuration).html("")),g.next(E.selectors.category).addClass(E.classes.current).slideToggle(E.transitionDuration,function(){y(g)}),g.toggleClass(E.classes.active),h&&(J.matches?q(L[g.data(E.data.category)],g.next(E.selectors.faqResults)):(q(L[g.data(E.data.category)]),y(a(E.selectors.faqContainer)))),J.matches&&g.next(E.selectors.faqResults).slideToggle(E.transitionDuration,function(){y(g)}),g.hasClass(E.classes.active)&&m(g)}function A(b){var c=a(b.currentTarget);c.closest(E.selectors.faqs).find(E.selectors.answers).not(c.next()).slideUp(),c.next().slideToggle(E.transitionDuration,function(){y(c)}),c.closest(E.selectors.faqs).find(E.selectors.faqAccordionHead).not(c).removeClass(E.classes.active),c.toggleClass(E.classes.active),c.hasClass(E.classes.active)&&m(c)}function B(){D.on(E.events.click,E.selectors.searchFaqBtn,t),D.on(E.events.click,E.selectors.categoryAccordionHead,z),D.on(E.events.click,E.selectors.faqAccordionHead,A),D.on(E.events.click,E.selectors.linksInAnswers,n),D.on(E.events.keyup,E.selectors.SearchInput,d.debounce(v,E.debounceDuration)),D.on(E.events.click,E.selectors.clearSearchTextBtn,w)}function C(e){if(E=a.extend({},K,e),D=a(E.selectors.root),H=a(E.selectors.categoriesContainer),J=E.window.matchMedia(c.config.common.mediaQuery.is.small),!D.length)return!1;F=c.components.c_232||{},d.isUndefined(F.faqListingJson)||(F=JSON.parse(F.faqListingJson)),d.isUndefined(F.faqListing)||(F=F.faqListing),G=k(E.selectors.categoryTemplate),b.registerPartial(E.handlebars.categoryPartialName,j(E.selectors.categoryPartial)),H.append(G({category:F})),I=k(E.selectors.faqTemplate),x(),B()}var D,E,F,G,H,I,J,K={events:{click:"click",keyup:"keyup"},classes:{hidden:"hidden",active:"active",current:"current",show:"show",faqAccordionHead:"faq-accordion-head",notEmpty:"not-empty"},selectors:{root:".c_232",categoryTemplate:"script[data-template-name=c-232-category-template]",categoryPartial:"script[data-template-name=c-232-category-partial]",categoriesContainer:".c_232 .categories",faqDefault:".c_232 .faq-default",faqNoResults:".c_232 .faq-no-results",faqTemplate:"script[data-template-name=c-232-faqs-template]",faqContainer:".c_232 .faq-container",faqResults:".faq-results",searchFaqInput:".input-search-faq",searchFaqBtn:".btn-search-faq",categoryAccordionHead:".category-accordion-head",category:".category",faqAccordionHead:".faq-accordion-head",faqs:".faqs",answers:".answers",htmlBody:"html, body",dockedNav:".docked-nav-outer",categoryCol:".col-4",faqCol:".col-8",linksInAnswers:".faq-results .answers a",SearchInput:".input-search-faq",categoriesFirstChildHeader:".categories > .has-faq:first-child",active:".active",searchTextParent:".c_232 .search-fields .fields",clearSearchTextBtn:".search-fields .btn-clear-search",isVisible:":visible",hasFaq:".has-faq"},handlebars:{categoryPartialName:"c_232_renderCategoryList"},data:{searchResultsHeading:"search-results-heading",hasFaq:"has-faq",category:"category",categoryTitle:"category-title",faqTitle:"faq-title",categoryAccordionText:"category-accordion-text",isSearch:"is-search"},analytics:{componentIdListing:"C232_Faq_Content_Driven",componentIdSearch:"C232_FAQ_Search",type:"faq",action:"search",faqSearch:"faq-search"},CONSTANTS:{ADD:"add",REMOVE:"remove"},emptySpace:" ",dot:".",colon:":",underscore:"_",transitionDuration:500,debounceDuration:300},L={};return b.registerHelper("storeFaqData",function(a,b){return L[a]&&(a+=g()),L[a]=b,a}),{init:C}}),define("c_233",["jquery","underscore","keyCodeConstants"],function(a,b,c){"use strict";function d(b){var c;if(l=a.extend({},k,b),c=a(l.selectors.root),!c.length)return!1;e()}function e(){a(l.selectors.accordionTitle).on(l.events.click,f),a(l.selectors.faqQuestion).on(l.events.click,g),a(l.selectors.linksInAnswers).on(l.events.click,h)}function f(b){var c=a(b.currentTarget),d=c.parent();d.hasClass(l.classes.active)?c.next().slideUp(l.transitionDuration,function(){d.removeClass(l.classes.active)}):(a(l.selectors.activeAnswer).removeClass(l.classes.active).slideUp(),a(l.selectors.activeQuestion).removeClass(l.classes.active),a(l.selectors.headerRow).removeClass(l.classes.active).find(l.selectors.queries).slideUp(),c.next().slideDown(l.transitionDuration,function(){d.addClass(l.classes.active)}),j(c))}function g(b){var c=a(b.currentTarget);c.hasClass(l.classes.active)?(c.next().toggleClass(l.classes.active).slideUp(l.transitionDuration),c.toggleClass(l.classes.active)):(c.closest(l.selectors.queries).find(l.selectors.activeAnswer).removeClass(l.classes.active).slideUp(),c.closest(l.selectors.queries).find(l.selectors.activeQuestion).removeClass(l.classes.active),c.next().toggleClass(l.classes.active).slideDown(l.transitionDuration),c.toggleClass(l.classes.active),i(c))}function h(b){var c=a(b.currentTarget),d=(c.parents(l.selectors.headerRow).find(l.selectors.accordionTitle).text(),c.parents(l.selectors.activeAnswer).prev().text(),{componentId:l.analytics.componentId,destination:c.attr("href"),locationInPage:l.analytics.accordionType,buttonText:c.text()}),e=l.analyticsManager.trackingVars.genericClick;l.analyticsManager.tag(e,d)}function i(a){var b={componentId:l.analytics.componentId,accordionText:a.parents(l.selectors.headerRow).find(l.selectors.accordionTitle).text()+":"+a.text(),accordionType:l.analytics.accordionType},c=l.analyticsManager.trackingVars.accordionExpansion;l.analyticsManager.tag(c,b)}function j(a){var b={componentId:l.analytics.componentId,accordionText:a.text(),accordionType:l.analytics.accordionType},c=l.analyticsManager.trackingVars.accordionExpansion;l.analyticsManager.tag(c,b)}var k={events:{click:"click"},classes:{active:"active"},selectors:{root:".c_233",htmlBody:"html, body",dockedNav:".docked-nav-outer",headerRow:".category",accordionTitle:".category-header",queries:".faqs",faqQuestion:".question",activeQuestion:".question.active",activeAnswer:".answer.active",linksInAnswers:".answer a"},analytics:{componentId:"C233_Faq_Lite",accordionType:"faq-lite"},transitionDuration:500,debounceDuration:300},l=null;return{init:d}}),define("c_238",["jquery"],function(a){"use strict";function b(b){var d;if(k=a.extend({},l,b),d=a(k.selectors.root),!d.length)return!1;h()&&g(d),c(d),d.find(k.selectors.videoControls).removeClass(k.classes.hidden)}function c(b){a(k.selectors.cta_link).on("click",d),f(),j(b),a(k.window).on(k.events.orientationchange,f)}function d(b){var c={componentId:k.analytics.componentId,destination:a(b.currentTarget).attr("href"),locationInPage:k.analytics.locationInPage,buttonText:a(b.currentTarget).text()},d=k.analyticsManager.trackingVars.genericClick;k.analyticsManager.tag(d,c)}function e(){var a=k.analyticsManager,b=k.analyticsManager.trackingVars.buttonNoCookie,c={componentId:k.analytics.componentId,contentAction:k.analytics.contentAction};a.tag(b,c)}function f(){a(k.selectors.root).toggleClass(k.classes.videoLandscape,i())}function g(a){a.find(k.selectors.posterImage).show()}function h(){return window.matchMedia&&window.matchMedia(k.HELIOS.config.common.mediaQuery.is.small).matches}function i(){return window.matchMedia&&window.matchMedia(k.HELIOS.config.common.mediaQuery.is.large).matches}function j(b){var c;b.each(function(){c=a(this).data("trkref"),window.afterReevooMarkLoaded=[function(){ReevooApi.load(c,function(a){a.observe("click",function(a){e()})})}]})}var k,l={events:{orientationchange:"orientationchange"},classes:{noVideo:"no-video",videoLandscape:"video-landscape",hidden:"hidden"},selectors:{root:".c_238",cta_link:".cta-link",video:"video",source:"source",posterImage:".c_028-6 .poster-image",videoControls:".video-controls",c28:".c_028-6"},analytics:{componentId:"C238_Video",locationInPage:"embedded_header_video",contentAction:"reevoo reviews"}};return{init:b}}),define("c_240",["jquery","scrollLock","modal","c_008"],function(a,b,c,d){"use strict";function e(b){if(o=a.extend({},n,b),j=a(o.selectors.root),l=a("body"),!j.length)return!1;g(),f()}function f(){k=new c({openSelector:o.selectors.openModal,customClass:"modal-without-margins",customOverlayClass:"modal-overlay"})}function g(){a(o.selectors.openModal).on(o.events.click,h),l.on("modal.animateIn",k,function(){var c;m=a(o.selectors.tooltipTriggers,k.$content),d.createTooltips(m),c=k.$content.find(o.selectors.root).data(o.dataAttributes.closeLabel),i()||(l.addClass(o.classes.noScroll),b.enableGlobalScrolling()),void 0!==c&&k.$closeButton.find(o.selectors.closeSpan).text(c)}),l.on("modal.close",k,function(){i()||(l.removeClass(o.classes.noScroll),b.enableGlobalScrolling(),a(o.window).scrollTop(k.currentScrollPos))})}function h(b){var c=o.analyticsManager,d=a(b.currentTarget).closest(o.selectors.slideInOverlay),e=d.data("component-id")+"_Slide-In_overlay",f=d.data("component-name")+"_overlay_CTA",g={componentId:e,locationInPage:f};c.tag("contentDisplayed",g)}function i(){return o.window.matchMedia&&window.matchMedia(o.HELIOS.config.common.mediaQuery.is.large).matches}var j,k,l,m,n={selectors:{root:".c_240",modal:".c_129",cta:".cta",openModal:".slide-in",slideInOverlay:".slide-in-overlay",closeSpan:"span",tooltipTriggers:".has-tooltip"},classes:{noScroll:"no-scroll"},dataAttributes:{closeLabel:"close-label"},events:{click:"click"}},o=null;return{init:e}}),define("c_240-1",["jquery","vjs","underscore","vjs_youtube"],function(a,b,c,d){"use strict";function e(b){if(o=a.extend({},s,b),!a(o.selectors.slideInContainer).length)return!1;f()}function f(){a(o.selectors.openModal).on(o.events.click,g)}function g(b){var c=a(b.currentTarget).closest(o.selectors.slideInOverlay);h(),i(),a(o.selectors.videoPosters).hide(),r=c.data("component-id")+"_Slide-In_overlay"}function h(){a(o.selectors.videoJs).show(),a(o.selectors.vjsPlayButton).show(),n=a(o.selectors.root),b.players=[],n.each(function(){j(this)})}function i(){a(o.selectors.videoWrapper).height(a(o.selectors.videoPosters).height())}function j(d){var e="video"+a(d).data("videoid")+c.uniqueId(),f=(a(d).data("loop"),a(d).data("autoplay"),a(d).data("poster")),g="#"+e+"_youtube_api",h=a.extend({},o.videoDefaults,{src:"http://www.youtube.com/watch?v="+a(d).data("videoid"),poster:a(o.selectors.videoPosters).find("img").attr("src"),autoplay:!1,loop:!1,ytcontrols:!0,controls:!1}),i=a("video",a(d)).attr("id",e);i.length&&(Modernizr.touchevents&&(h.ytcontrols=!0),b(e,h,function(){var b=this;a("#"+b.el_.id);b.on("waiting",function(){i.trigger("playVideo")}),b.on("play",function(){i.trigger("playVideo"),a(g).css("top",0),""!==f&&(b.bigPlayButton.hide(),b.posterImage.hide()),b.loadingSpinner.hide(),m(p,"play"),k(b)}),b.on("timeupdate",function(){k(b)}),b.on("pause",function(){b.loadingSpinner.hide(),s.deviceCheck?a(g).css("top","-1000px"):a(g).css("top",0),""!==f&&l()&&(b.posterImage.show(),b.bigPlayButton.show()),b.loadingSpinner.hide(),m(p,"pause")}),b.on("ended",function(){m(p,"complete")})}),f&&(q=a("<div/>"),q.css("background-image","url("+f+")").addClass(o.classes.posterImage).attr("tabindex","-1"),a(d).find(o.selectors.vjsPoster).after(q)))}function k(a){var b=a.currentTime()/a.duration()*100;b>=25&&b<50&&!t.first?(m(p,"25%"),t.first=!0):b>=50&&b<75&&!t.middle?(m(p,"50%"),t.middle=!0):b>=75&&b<99&&!t.almost?(m(p,"75%"),t.almost=!0):b>=90&&!t.done&&(m(p,"complete"),t.done=!0)}function l(){return window.matchMedia&&window.matchMedia(o.HELIOS.config.common.mediaQuery.is.large).matches}function m(a,b){var c=o.analyticsManager,d=c.trackingVars.videoInteraction,e=c.getTrackingObjectProperties(d),f={};a=n.find("meta[itemprop=name]").attr("content"),f[e.componentId]=r,f[e.videoName]=a,f[e.videoInteraction]=b,c.track(d,f)}var n,o,p,q,r,s={videoDefaults:{techOrder:["youtube"],forceSSL:!0,forceHTML5:!0,playsInline:!0,allowsInlineMediaPlayback:!0},selectors:{root:".c_129 .slide-in-video",videoWrapper:".yt-video-wrapper",videoJs:".c_129 .c_240-1 .video-js",openModal:".slide-in",slideInOverlay:".slide-in-overlay",slideInContainer:".c_240-1",vjsPoster:".vjs-poster",videoPosters:".c_129 .c_240-1 figure > button",vjsposterImage:".vjs-poster-image",vjsPlayButton:".vjs-big-play-button"},classes:{video:"video-js vjs-default-skin vjs-big-play-centered",posterImage:"vjs-poster vjs-poster-image"},events:{click:"click"}},t={first:!1,middle:!1,almost:!1,done:!1};return{init:e}}),define("c_240-2",["jquery","logger","storageManager","scrollLock"],function(a,b,c,d){"use strict";function e(c){if(q=a("body"),r=a.extend({},v,c),p=a(r.selectors.root),!p.length)return!1;s=r.selectors.slideriqiyivideo,log=new b({prefix:"c_240-2"}),u=m(c),i(u)}function f(){a(document).off(r.events.click,r.selectors.openModal).on(r.events.click,r.selectors.openModal,function(){a(r.selectors.videoPosters).show()}),a(document).on(r.events.click,r.selectors.videoPosters,function(){g(),h(),a(r.selectors.videoPosters).hide()})}function g(){a(r.selectors.video).height(a(r.selectors.videoPosters).height())}function h(){n()}function i(a){var b=c.loadItem("c240_2_expires_in");!b||b<0?j(a).done(function(b){l(b,a)}).fail(function(){k()}):f()}function j(b){return a.ajax({url:b,data:{client_id:a(r.selectors.slideInVideo).data("client-id"),client_secret:a(r.selectors.slideInVideo).data("client-secret")}})}function k(){log.warn("Returned null")}function l(b,d){var e;try{e=JSON.parse(b)}catch(e){throw new error("Cannot parse c_240-2 JSON")}a.isNestedProp(e,["data","expires_in"])?(c.init(),c.saveItem("c240_2_expires_in",e.data.expires_in),c.saveItem("c240_2_access_token",e.data.access_token),i(d)):log.warn("Response returned malformed data")}function m(b){if(a.isNestedProp(r.HELIOS,["config","common","api","scripts","iqiyi","url"]))return b.HELIOS.config.common.api.scripts.iqiyi.url}function n(){var b,d=a(r.selectors.slideriqiyivideo);t=o(),r.iqiyiConfig={accessToken:c.loadItem("c240_2_access_token"),vid:d.data("vid"),tvid:d.data("tvid"),autoplay:d.data("autoplay")?1:0,loop:d.data("loop")?1:0},b=a('<iframe id="iqiyiFrame" src="'+t+"?vid="+r.iqiyiConfig.vid+"&tvId="+r.iqiyiConfig.tvid+"&accessToken="+r.iqiyiConfig.accessToken+"&autoplay="+r.iqiyiConfig.autoplay+"&chainAutoplay="+r.iqiyiConfig.loop+'&bd=1&showRecommend=0" frameborder="0" width="100%" height="100%" allowfullscreen="true"></iframe>'),a(r.selectors.video).append(b)}function o(){return a(r.selectors.slideriqiyivideo).parent().find('meta[itemprop="embedURL"]').attr("content")}var p,q,r,s,t,u,v={config:{readyInterval:500,maxAttempts:60},selectors:{root:".c_240-2",openModal:".slide-in",slideriqiyivideo:".c_129 .slide-in-video",videoWrapper:".video-wrapper",video:".c_129 #video",videoPosters:".c_129 .c_240-2 figure > button",slideInVideo:".c_240-2.slide-in-video"},events:{click:"click"},iqiyiConfig:{chainAutoPlay:!0,autoplay:1}};return{init:e}}),define("c_243",["jquery"],function(a){"use strict";function b(b,d){this.settings=a.extend({},c,d),this.$body=a("body"),this.$root=a(b),this.$imageContainer=this.$root.find(this.settings.selectors.imageContainer),this.$component=a(this.settings.selectors.component),this.setComponentHeight(),this.bindEvents()}var c={events:{resize:"resize",orientationchange:"orientationchange",click:"click"},classes:{fooItemClass:"foo-item",fooEmptyClass:"foo-empty"},selectors:{root:".c_243",imageContainer:".image-container",component:".component",button:".button",link:".link",imgLink:".img-link",headingGroup:".heading-group"},analytics:{componentId:"C243_Editorial_Banner",locationInPage:"editorial-banner"}};return b.prototype.setComponentHeight=function(){var a=this.$imageContainer.find("img").height();this.$root.find(this.settings.selectors.component).css("height",a)},b.prototype.trackClick=function(b,c){var d={componentId:this.settings.analytics.componentId,destination:a(b.currentTarget).attr("href"),locationInPage:this.settings.analytics.locationInPage+"-"+this.$root.find(this.settings.selectors.headingGroup+" p").text().trim(),buttonText:c?this.$root.find(this.settings.selectors.button).text().trim()+"-"+c:a(b.currentTarget).text().trim()},e=this.settings.analyticsManager.trackingVars.genericClick;this.settings.analyticsManager.tag(e,d)},b.prototype.bindEvents=function(){a(this.settings.window).on(this.settings.events.resize,_.bind(function(){setTimeout(this.setComponentHeight.bind(this),100)},this)),a(this.settings.window).on(this.settings.events.orientationchange,_.bind(function(){setTimeout(this.setComponentHeight.bind(this),100)},this)),this.$root.find(this.settings.selectors.button).on(this.settings.events.click,_.bind(function(a){this.trackClick(a)},this)),this.$root.find(this.settings.selectors.link).on(this.settings.events.click,_.bind(function(a){this.trackClick(a)},this)),this.$root.find(this.settings.selectors.imgLink).on(this.settings.events.click,_.bind(function(a){this.trackClick(a,"image")},this))},b}),define("c_239",["jquery","handlebars","contentCarousel"],function(a,b,c){"use strict";function d(b,c){this.settings=a.extend({},e,c),this.settings.slick={cssEase:"ease-in-out",speed:400,infinite:!0,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,onInit:this.onInitSlide.bind(this),onAfterChange:this.updateSlideInfo.bind(this),onBeforeChange:this.onBeforeChange.bind(this),accessibility:!0},this.$body=a("body"),this.$root=a(b),this.$showMoreBtn=this.$root.find(this.settings.selectors.showMoreBtn),this.galleryMode=a(this.$root).data(this.settings.dataAttributes.gallery),this.defaultTrayVisible=a(this.$root).data(this.settings.dataAttributes.tray),this.spacing=a(this.$root).data(this.settings.dataAttributes.spacing),this.galleryJson=[],this.$mosaicGallery=this.$root.find(this.settings.selectors.mosaicGallery),this.$galleryContainer=this.$root.find(this.settings.selectors.galleryContainer),this.galleryCreated=!1,this.trackNav=!1,this.galleryFired=!1,this.hover=!1,this.scrollTop=0,this.init()}var e={events:{click:"click",touchstart:"touchstart",touchmove:"touchmove",touchend:"touchend",touchmouse:"touchend mouseup",orientationchange:"orientationchange",blur:"blur"},classes:{hiddenItem:"hidden-item",hidden:"hidden",visibilityHidden:"visibility-hidden",galleryOpen:"gallery-open",traySlideIn:"tray-slide-in",trayOpen:"tray-open",active:"active",fixed:"fixed",translucent:"translucent",landscapeClass:"in-landscape-mode",portraitClass:"in-portrait-mode",hoverState:"hover-state",noTray:"no-tray",slickList:"slick-list"},dataAttributes:{gallery:"gallery",tray:"tray",spacing:"spacing",index:"index",trayContent:"tray-content",trayHeadline:"tray-headline",alt:"alt",type:"type",srcDesktop:"src-desktop",srcTablet:"src-tablet",srcMobile:"src-mobile",vid:"vid",tvid:"tvid",autoplay:"autoplay",title:"title",clientId:"clientId",clientSecret:"clientSecret",slideType:"slide-type",elementIndex:"element-index"},selectors:{root:".c_239",body:"body",html:"html",showMoreBtn:".show-more button",item:".item",mosaicGallery:".mosaic-gallery",galleryContainer:".gallery-container",imageContainer:".image-container",closeGallery:".close-gallery",carouselElement:".carousel",galleryTemplate:"#c_239-galleryTemplate",carouselPagination:".carousel-pagination .current-page",slickInitialized:".slick-initialized",infoBtn:".info-btn",slickNext:".slick-next",slickPrev:".slick-prev",trayContainer:".tray-container",galleryCta:".gallery-cta",ctaContainer:".ctas-container",youtubeButton:"figure > a",iqiyiButton:"figure > button",activeSlide:".slick-active",gallerySlide:".gallery-slide",iqiyiPlay:".iqiyi-play",shadow:".shadow",youTubePlay:".youtube-play",galleryImage:"img",slickSlide:".slick-slide",videoWrapper:".video-wrapper",slickCloned:".slick-cloned",videoImage:"picture img",videoVolume:".vjs-mute-control.vjs-control",slickList:".slick-list"},videoDefaults:{techOrder:["youtube"],forceSSL:!0,forceHTML5:!0,playsInline:!0,allowsInlineMediaPlayback:!0},analytics:{componentId:{gallery:"C239_Mosaic_Gallery",image:"C239.2_Mosaic_Image",video:"C239.3_Mosaic_Video"},locationInPage:"mosaic-gallery",infoText:"Information-tray",carouselType:"normal",interactionType:"mosaic-content"}};return d.prototype.init=function(){if(!this.$root.length)return!1;this.bindEvents(),this.setMobileOrientationMode(),this.BrowserDetect()},d.prototype.BrowserDetect=function(){null!==window.navigator.userAgent.toLowerCase().match(/chrome|firefox/gi)&&this.isLargeScreen()&&(this.desktopChromeFirefox=!0)},d.prototype.isLargeScreen=function(){return this.settings.window.matchMedia&&this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.large).matches},d.prototype.getGalleryJson=function(){var b,c,d=this.settings.dataAttributes,e=[];return _.each(this.$mosaicGallery,function(f){var g,h,i={};b=a(f),c=b.data(d.type),i.type=c,i.index=b.closest(this.settings.selectors.item).data(d.index),i.overlayImages=[{src:b.data(d.srcDesktop),media:"(min-width: 60em)"},{src:b.data(d.srcTablet),media:"(min-width: 36.3125em)"},{src:b.data(d.srcMobile),media:"(min-width: 1em)"}],"image"===c?(i.trayContent=b.data(d.trayContent),i.trayHeadline=b.data(d.trayHeadline),i.alt=b.data(d.alt)):"video"===c&&(g=b.find(this.settings.selectors.youtubeButton).length?"youtube":"iqiyi",i.videoType=g,i.alt=b.data(d.alt),i.title=b.data(d.title),"youtube"===g?i.vid=b.find(this.settings.selectors.youtubeButton).data(d.vid):(h=b.find(this.settings.selectors.iqiyiButton),i.vid=h.data(d.vid),i.tvid=h.data(d.tvid),i.autoPlay=h.data(d.autoplay),i.iqiyiUrl=h.parent().parent().find('meta[itemprop="embedURL"]').attr("content"),i.clientid=h.data(d.clientId),i.clientsecret=h.data(d.clientSecret))),e.push(i)},this),e},d.prototype.showMoreTiles=function(){this.$root.find(this.settings.selectors.item).each(_.bind(function(b,c){a(c).hasClass(this.settings.classes.hiddenItem)&&a(c).removeClass(this.settings.classes.hiddenItem)},this))},d.prototype.showGallery=function(){var d,e={};this.defaultTrayVisible=!!this.defaultTrayVisible&&this.defaultTrayVisible,this.trayOpened=this.defaultTrayVisible,this.galleryCreated?this.$galleryContainer.find(this.settings.selectors.slickInitialized).length&&(this.$galleryContainer.addClass(this.settings.classes.galleryOpen),this.onCarouselInit(),this.galleryOpened=!0,this.trackNav=!0):(this.galleryJson=this.getGalleryJson(),e.mediaList=this.galleryJson,e.defaultTrayVisible=this.defaultTrayVisible,this.galleryJson.length&&(d=b.compile(a(this.settings.selectors.galleryTemplate).html()),this.$galleryContainer.html(d(e)).addClass(this.settings.classes.galleryOpen),c.init(this.$root.find(this.settings.selectors.carouselElement),this.settings).then(_.bind(this.onCarouselInit,this)),this.bindCarouselEvents()),this.galleryCreated=!0),this.scrollTop=a(document).scrollTop(),a(this.settings.selectors.body).addClass(this.settings.classes.fixed),a(this.settings.selectors.html).addClass(this.settings.classes.fixed),this.$body.trigger("gallery.initiated"),this.$root.find(this.settings.selectors.carouselElement).length&&this.$root.find(this.settings.selectors.carouselElement)[0].slick&&this.$root.find(this.settings.selectors.carouselElement)[0].slick.setPosition()},d.prototype.onCarouselInit=function(){"image"===this.galleryJson[this.currentSlideIndex].type?(this.toggleTray(this.defaultTrayVisible),this.$body.trigger("gallery.open.image",[this.$galleryContainer.find(".gallery-slide[index="+this.currentSlideIndex+"]"),!0])):"video"===this.galleryJson[this.currentSlideIndex].type&&this.$body.trigger("gallery.open.video",[this.$galleryContainer.find(".gallery-slide[index="+this.currentSlideIndex+"]"),!0]),c.goTo(this.$root.find(this.settings.selectors.carouselElement),this.currentSlideIndex,!0),1===this.$galleryContainer.find(this.settings.selectors.gallerySlide).length&&this.updateSlideInfo({$slider:this.$root.find(this.settings.selectors.carouselElement),$slides:this.$galleryContainer.find(this.settings.selectors.gallerySlide)},0),this.$root.find(this.settings.selectors.slickList).attr("tabindex",-1).focus(),this.$root.find(this.settings.selectors.carouselElement).length&&this.$root.find(this.settings.selectors.carouselElement)[0].slick&&this.$root.find(this.settings.selectors.carouselElement)[0].slick.setPosition()},d.prototype.onInitSlide=function(b,c){var d=this.$galleryContainer.find(this.settings.selectors.infoBtn),e=b.$slides[this.currentSlideIndex],f=a(e).data(this.settings.dataAttributes.slideType);this.toggleTray(this.defaultTrayVisible),this.isSmallScreen()?(this.$galleryContainer.find(".slick-prev").insertAfter(d),this.$galleryContainer.find(".slick-next").insertBefore(d)):(this.$galleryContainer.find(".slick-prev").attr("tabindex",4).insertAfter(d),this.$galleryContainer.find(".slick-next").attr("tabindex",3).insertAfter(d)),0===this.currentSlideIndex&&(this.trackNav=!0),"video"===f&&this.$body.trigger("gallery.open.video",[a(e),!0])},d.prototype.updateSlideInfo=function(b,c){var d=(c||0)+1,e=b.$slides[c],f=a(e),g=this.galleryJson[c],h=a(e).data("slide-type");this.currentSlideIndex=c,"video"===h?(this.$galleryContainer.find(this.settings.selectors.infoBtn).addClass(this.settings.classes.visibilityHidden),Modernizr.touchevents&&!this.desktopChromeFirefox&&this.$body.trigger("gallery.open.video",[f,!1])):(g.trayHeadline||g.trayContent?this.$galleryContainer.find(this.settings.selectors.infoBtn).removeClass(this.settings.classes.visibilityHidden):(this.$galleryContainer.find(this.settings.selectors.activeSlide).addClass(this.settings.classes.noTray),this.$galleryContainer.find(this.settings.selectors.infoBtn).addClass(this.settings.classes.visibilityHidden)),this.$body.trigger("gallery.open.image",[f,!1])),b.$slides.length>=1&&this.$galleryContainer.find(this.settings.selectors.carouselPagination).text(d)},d.prototype.onBeforeChange=function(b,c,d){var e=b.$slides[c],f=(c||0)+1,g=a(e),h=a(e).data(this.settings.dataAttributes.slideType),i=b.$slides[d],j=a(i),k=j.data(this.settings.dataAttributes.slideType),l=a(this.settings.selectors.slickSlide).length-3,m=j.data(this.settings.dataAttributes.elementIndex);"video"===h&&(g.find(".vjs-playing").length||g.find("iframe").length)&&(this.$body.trigger("gallery.pause.video",[g]),g.find(this.settings.selectors.youTubePlay).length&&(a.contains(g.find(".vjs-control-bar")[0],document.activeElement)||a(document.activeElement).hasClass(this.settings.classes.slickList))&&g.find(this.settings.selectors.videoVolume).focus()),"video"!==k||0!==d&&d!==l||(j.find(this.settings.selectors.videoWrapper).length?a(this.settings.selectors.slickCloned+'[data-element-index="'+m+'"]').find(this.settings.selectors.videoImage).addClass(this.settings.classes.visibilityHidden):a(this.settings.selectors.slickCloned+'[data-element-index="'+m+'"]').find(this.settings.selectors.videoImage).removeClass(this.settings.classes.visibilityHidden)),this.trackNav?this.trackCarouselNavigation(b,f):this.trackNav=!0},d.prototype.bindEvents=function(){var b,c=!1;this.$showMoreBtn.off(this.settings.events.click).on(this.settings.events.click,_.bind(function(){this.showMoreTiles(),this.$showMoreBtn.hide()},this)),this.galleryMode?"ontouchstart"in document?(this.$mosaicGallery.off(this.settings.events.touchstart).on(this.settings.events.touchstart,_.bind(function(b){c=!1,"image"===a(b.currentTarget).data(this.settings.dataAttributes.type)&&this.$body.trigger("gallery.hover",[b])},this)),this.$mosaicGallery.off(this.settings.events.touchmove).on(this.settings.events.touchmove,_.bind(function(a){c=!0},this)),this.$mosaicGallery.off(this.settings.events.touchmouse).on(this.settings.events.touchmouse,_.bind(function(d){(b=3==d.which)||(d.stopPropagation(),d.preventDefault(),this.galleryFired||c||(this.currentSlideIndex=this.$mosaicGallery.index(d.currentTarget),this.showGallery(),this.trackOpenGallery(a(d.currentTarget).data(this.settings.dataAttributes.type)),this.galleryFired=!0))},this)),this.$mosaicGallery.find(this.settings.selectors.galleryCta).off(this.settings.events.touchmouse).on(this.settings.events.touchmouse,_.bind(function(c){(b=3==c.which)||(c.stopPropagation(),c.preventDefault(),this.galleryFired||(this.currentSlideIndex=this.$mosaicGallery.index(a(c.currentTarget).closest(this.settings.selectors.mosaicGallery)),this.showGallery(),this.galleryFired=!0))},this))):this.$mosaicGallery.off(this.settings.events.click).on(this.settings.events.click,_.bind(function(b){this.currentSlideIndex=this.$mosaicGallery.index(b.currentTarget),this.showGallery(),
this.trackOpenGallery(a(b.currentTarget).data(this.settings.dataAttributes.type))},this)):this.$root.find(".c_239-2").find("a").off(this.settings.events.click).on(this.settings.events.click,_.bind(function(a){this.trackImageOnContentNavigation(a.target)},this)),a(this.settings.window).on(this.settings.events.orientationchange,_.bind(function(){this.setMobileOrientationMode(),this.$galleryContainer.hasClass(this.settings.classes.galleryOpen)||(this.$galleryContainer.html(""),this.galleryCreated=!1)},this))},d.prototype.trackImageOnContentNavigation=function(b){var c=this.settings.analyticsManager,d=c.trackingVars.genericClick,e=c.getTrackingObjectProperties(d),f=a(b).parent().attr("href")||a(b).parents("a").attr("href"),g=a(b).text().trim()||a(b).parents(".c_239-2").find(".cta-link").text().trim(),h={};h[e.componentId]=this.settings.analytics.componentId.image,h[e.destination]=f,h[e.locationInPage]="mosaic-grid",h[e.buttonText]=g,c.track(d,h)},d.prototype.closeGallery=function(){var b=this.$galleryContainer.find(this.settings.selectors.activeSlide);this.$galleryContainer.removeClass(this.settings.classes.galleryOpen),("video"===b.data(this.settings.dataAttributes.slideType)||this.$galleryContainer.find(".video-wrapper").length)&&this.$body.trigger("gallery.stop.video",[b]),a(this.settings.selectors.body).removeClass(this.settings.classes.fixed),a(this.settings.selectors.html).removeClass(this.settings.classes.fixed),a(document).scrollTop(this.scrollTop),this.$galleryContainer.removeClass(this.settings.classes.translucent),this.trackNav=!1,this.galleryFired=!1},d.prototype.bindCarouselEvents=function(){var b,c,d=!1;this.$galleryContainer.find(this.settings.selectors.closeGallery).off(this.settings.events.click).on(this.settings.events.click,_.bind(function(){this.closeGallery()},this)),this.$galleryContainer.on(this.settings.events.click,this.settings.selectors.slickNext,_.bind(function(){this.$galleryContainer.find(this.settings.selectors.slickNext).addClass(this.settings.classes.hoverState),setTimeout(function(){this.$galleryContainer.find(this.settings.selectors.slickNext).removeClass(this.settings.classes.hoverState)}.bind(this),800)},this)),this.$galleryContainer.on(this.settings.events.click,this.settings.selectors.slickPrev,_.bind(function(){this.$galleryContainer.find(this.settings.selectors.slickPrev).addClass(this.settings.classes.hoverState),setTimeout(function(){this.$galleryContainer.find(this.settings.selectors.slickPrev).removeClass(this.settings.classes.hoverState)}.bind(this),800)},this)),this.$galleryContainer.find(this.settings.selectors.infoBtn).off(this.settings.events.click).on(this.settings.events.click,_.bind(function(b){this.$galleryContainer.find(this.settings.selectors.infoBtn).addClass(this.settings.classes.hoverState),setTimeout(function(){this.$galleryContainer.find(this.settings.selectors.infoBtn).removeClass(this.settings.classes.hoverState)}.bind(this),800),this.toggleTray(),a(b.currentTarget).hasClass(this.settings.classes.active)||this.trackInfoBtn()},this)),this.$galleryContainer.find(this.settings.selectors.iqiyiPlay).off(this.settings.events.click).on(this.settings.events.click,_.bind(function(b){this.$body.trigger("gallery.open.video",[a(b.currentTarget).closest(".gallery-slide"),!0])},this)),this.$galleryContainer.find(this.settings.selectors.youTubePlay).off(this.settings.events.click).on(this.settings.events.click,_.bind(function(b){b.preventDefault(),b.stopPropagation(),this.$body.trigger("gallery.open.video",[a(b.currentTarget).closest(".gallery-slide"),!0])},this)),"ontouchstart"in document?(this.$galleryContainer.off(this.settings.events.touchstart).on(this.settings.events.touchstart,this.settings.selectors.imageContainer,_.bind(function(a){a.preventDefault(),d=!1,b=a.changedTouches[0].pageY},this)),this.$galleryContainer.off(this.settings.events.touchmove).on(this.settings.events.touchmove,this.settings.selectors.imageContainer,_.bind(function(a){a.preventDefault(),d=!0,c=a.changedTouches[0].pageY-b,this.$galleryContainer.css("top",c+"px"),this.$galleryContainer.addClass(this.settings.classes.translucent)},this)),this.$galleryContainer.off(this.settings.events.touchend).on(this.settings.events.touchend,this.settings.selectors.imageContainer,_.bind(function(a){a.preventDefault(),d?(this.$galleryContainer.css("top","0px"),Math.abs(c)>window.innerHeight/4&&this.closeGallery()):this.toggleTray()},this)),a(this.settings.selectors.gallerySlide).scroll(function(b){a(b.currentTarget).scrollTop()+a(window).height()>a(document).height()&&a(this.settings.selectors.shadow).hide()}.bind(this))):(this.$galleryContainer.on(this.settings.events.click,this.settings.selectors.imageContainer,_.bind(function(){this.isSmallScreen()&&!this.isSmallScreenLandscape()&&this.toggleTray()},this)),this.$galleryContainer.off("keydown.mosaicgallery").on("keydown.mosaicgallery",_.bind(function(a){this.$galleryContainer.children.length&&this.$galleryContainer.hasClass(this.settings.classes.galleryOpen)&&(37===a.keyCode?this.$galleryContainer.find(this.settings.selectors.slickPrev).trigger("click"):39===a.keyCode&&this.$galleryContainer.find(this.settings.selectors.slickNext).trigger("click"),32===a.keyCode&&(a.preventDefault(),"video"===this.galleryJson[this.currentSlideIndex].type&&this.$galleryContainer.find(".gallery-slide[index*="+this.currentSlideIndex+"]").find(this.settings.selectors.youTubePlay).length&&this.$body.trigger("gallery.toggle.video",[this.$galleryContainer.find(".gallery-slide[index*="+this.currentSlideIndex+"]"),!0])))},this)),this.$galleryContainer.off(this.settings.events.blur).on(this.settings.events.blur,this.settings.selectors.videoVolume,_.bind(function(a){this.$galleryContainer.find(".close-gallery").focus()},this)))},d.prototype.toggleTray=function(b){_.isUndefined(b)?this.trayOpened=!this.trayOpened:this.trayOpened=b,this.$galleryContainer.find(this.settings.selectors.gallerySlide).toggleClass(this.settings.classes.traySlideIn,this.trayOpened),this.$galleryContainer.toggleClass(this.settings.classes.trayOpen,this.trayOpened),a(this.settings.selectors.trayContainer+" div").hide(),setTimeout(function(){a(this.settings.selectors.trayContainer+" div").show(),this.$galleryContainer.find(this.settings.selectors.infoBtn).toggleClass(this.settings.classes.active,this.trayOpened)}.bind(this),800)},d.prototype.isSmallScreen=function(){return this.settings.window.matchMedia&&this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.small).matches},d.prototype.isSmallScreenLandscape=function(){return this.settings.window.matchMedia&&this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.small).matches&&matchMedia("(orientation: landscape)").matches},d.prototype.isMediumScreenLandscape=function(){return this.settings.window.matchMedia&&this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.medium).matches&&matchMedia("(orientation: landscape)").matches},d.prototype.isSmallScreenPortrait=function(){return this.settings.window.matchMedia&&this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.small).matches&&matchMedia("(orientation: portrait)").matches},d.prototype.isMediumScreenPortrait=function(){return this.settings.window.matchMedia&&this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.medium).matches&&matchMedia("(orientation: portrait)").matches},d.prototype.setMobileOrientationMode=function(){this.$body.removeClass(this.settings.classes.landscapeClass),this.$body.removeClass(this.settings.classes.portraitClass),this.isSmallScreenPortrait()||this.isMediumScreenPortrait()?this.$body.addClass(this.settings.classes.portraitClass):(this.isSmallScreenLandscape()||this.isMediumScreenLandscape())&&this.$body.addClass(this.settings.classes.landscapeClass)},d.prototype.trackOpenGallery=function(a){var b=this.settings.analyticsManager,c=b.trackingVars.contentDisplayed,d=b.getTrackingObjectProperties(c),e={};e[d.componentId]=this.settings.analytics.componentId[a],e[d.locationInPage]=this.settings.analytics.locationInPage,b.track(c,e)},d.prototype.trackInfoBtn=function(){var a=this.settings.analyticsManager,b=a.trackingVars.toggle,c=a.getTrackingObjectProperties(b),d={};d[c.componentId]=this.settings.analytics.componentId.gallery,d[c.toggleType]=this.settings.analytics.infoText,d[c.toggleValue]=this.galleryJson[this.currentSlideIndex].trayHeadline,a.track(b,d)},d.prototype.trackCarouselNavigation=function(a,b){var c,d=this.$galleryContainer.find(this.settings.selectors.activeSlide),e=this.settings.analyticsManager,f=e.trackingVars.carouselInteraction,g=e.getTrackingObjectProperties(f),h={};c="video"===d.data(this.settings.dataAttributes.slideType)?d.find('meta[itemprop="name"]').attr("content"):d.find(this.settings.selectors.galleryImage).attr("alt"),h[g.componentId]=this.settings.analytics.componentId.gallery,h[g.carouselType]=this.settings.analytics.carouselType,h[g.itemNumber]=b+"/"+this.galleryJson.length,h[g.interactionType]=this.settings.analytics.interactionType,h[g.promoText]=c,e.track(f,h)},d}),define("c_239_1",["jquery"],function(a){"use strict";function b(b){if(e=a.extend({},d,b),c=a(e.selectors.root),!c.length)return!1}var c,d={selectors:{root:".c_239-1"}},e=null;return{init:b}}),define("c_239_2",["jquery"],function(a){"use strict";function b(b){var c=b.currentTarget;a(c).find("div").addClass(j.classes.showOverlay)}function c(b){var c=b.currentTarget;a(c).find("img").addClass(j.classes.zoomIn),setTimeout(function(){a(c).find("div").addClass(j.classes.showOverlay)},700)}function d(b){var c=b.currentTarget;setTimeout(function(){a(c).find("div").removeClass(j.classes.showOverlay)},100)}function e(b){var c=b.currentTarget;a(c).find("img").removeClass(j.classes.zoomIn),setTimeout(function(){a(c).find("img").removeClass(j.classes.zoomIn),a(c).find("div").removeClass(j.classes.showOverlay)},700)}function f(){a(j.selectors.root).hasClass(j.classes.mosaicGallery)||"ontouchstart"in document&&(h.off(j.events.touchstart).on(j.events.touchstart,b),h.off(j.events.touchend).on(j.events.touchend,d)),h.hover(c,e),a("body").on("gallery.hover",function(a,c){b(c),setTimeout(function(){d(c)},3e3)}),a("body").on("gallery.open.image",function(a,b){var c=b.find(".image-container img");c.prop("naturalWidth")<=c.prop("naturalHeight")?b.addClass("portrait-image"):b.addClass("landscape-image")})}function g(b){if(j=a.extend({},i,b),h=a(j.selectors.root),!h.length)return!1;f()}var h,i={events:{click:"click",touchstart:"touchstart",touchend:"touchend",mouseOver:"mouseover"},selectors:{root:".c_239-2",galleryCta:".gallery-cta"},classes:{zoomIn:"zoomIn",showOverlay:"showOverlay",mosaicGallery:"mosaic-gallery"}},j=null;return{init:g}}),define("c_239_3",["jquery","logger","underscore","disclaimers","scrollLock","vjs","storageManager"],function(a,b,c,d,e,f,g){"use strict";function h(c,d){this.settings=a.extend({},i,d),this.$body=a("body"),this.$root=a(c),this.$youtubeTriggers=this.$root.find(this.settings.selectors.youTubePlayBtn),this.$iqiyiTrigger=this.$root.find(this.settings.selectors.iqiyiPlayBtn),this.$posterImage=this.$root.find(this.settings.selectors.image),this.progressFlags={first:!1,middle:!1,almost:!1,done:!1},this.log=new b({prefix:"c_239_3"}),this.init()}var i={events:{click:"click",keyup:"keyup",contextmenu:"contextmenu",load:"load",touchmove:"touchmove"},classes:{youtubePlay:"youtube-play",iqiyiPlay:"iqiyi-play",noButton:"no-button",hidden:"hidden",mosaicGallery:"mosaic-gallery"},selectors:{root:".c_239-3",youTubePlayBtn:"figure .youtube-play",iqiyiPlayBtn:"figure .iqiyi-play",iqiyiVideo:"#iqiyi-video",youtubeLightboxSelect:".c_239_3_youtube_lightbox",iqiyiLightboxSelect:".c_239_3_iqiyi_lightbox",closeSelect:".close, .veil",video:"video",image:"figure img",videoWrapper:".video-wrapper",videoContainer:".video-container",carouselContainer:".carousel-container",videoPlay:"figure>a"},videoDefaults:{techOrder:["youtube"],forceSSL:!0,forceHTML5:!0,playsInline:!0,allowsInlineMediaPlayback:!0}};return h.prototype.init=function(){if(!this.$root.length)return!1;this.bindEvents(),this.BrowserDetect()},h.prototype.BrowserDetect=function(){null!==window.navigator.userAgent.toLowerCase().match(/chrome|firefox/gi)&&this.isLargeScreen()&&(this.desktopChromeFirefox=!0)},h.prototype.isLargeScreen=function(){return this.settings.window.matchMedia&&this.settings.window.matchMedia(this.settings.HELIOS.config.common.mediaQuery.is.large).matches},h.prototype.togglePlay=function(){this.youtubePlayer.paused()?this.youtubePlayer.play():this.youtubePlayer.pause()},h.prototype.progressBinding=function(a,b){var c=a.currentTime()/a.duration()*100,d=b?b[0].videoName:this.videoName,e=b?b[0].progressFlags:this.progressFlags;c>=25&&c<50&&!e.first?(this.videoAnalyticsTracking(d,"25%"),e.first=!0):c>=50&&c<75&&!e.middle?(this.videoAnalyticsTracking(d,"50%"),e.middle=!0):c>=75&&c<99&&!e.almost?(this.videoAnalyticsTracking(d,"75%"),e.almost=!0):c>=90&&!e.done&&(this.videoAnalyticsTracking(d,"complete"),e.done=!0)},h.prototype.runYoutube=function(a,b){f("video-holder",b,function(){a.youtubePlayer=this,Modernizr.touchevents&&!this.desktopChromeFirefox&&a.youtubePlayer.loadingSpinner.hide(),a.youtubePlayer.on("play",function(){a.youtubePlayer.bigPlayButton.hide(),a.youtubePlayer.loadingSpinner.hide(),a.videoAnalyticsTracking(a.videoName,"play"),a.progressBinding(a.youtubePlayer)}),a.youtubePlayer.on("timeupdate",function(){a.progressBinding(a.youtubePlayer)}),a.youtubePlayer.on("pause",function(){a.youtubePlayer.bigPlayButton.show(),a.youtubePlayer.loadingSpinner.hide(),a.videoAnalyticsTracking(a.videoName,"pause")}),a.youtubePlayer.on("ended",function(){a.youtubePlayer.bigPlayButton.show(),a.youtubePlayer.currentTime(0),a.youtubePlayer.pause()}),d.renderDisclaimers(a.$youtubeLightbox)})},h.prototype.restrictFocus=function(b){var c;this.youtubePlayer.userActive(!0),a(b.target).closest(this.settings.selectors.youtubeLightboxSelect).length||(c=a("div.vjs-big-play-button"),c.is(":visible")?c.focus():a("div.vjs-playing").focus())},h.prototype.keyboardHandler=function(a){switch(a.keyCode){case 9:this.restrictFocus(a);break;case 27:this.closeYoutubeVideo();break;case 32:this.togglePlay()}},h.prototype.attachKeyboardHandler=function(){a(document).keyup(this.keyboardHandler.bind(this))},h.prototype.detachKeyboardHandler=function(){a(document).unbind(this.settings.events.keyup,this.keyboardHandler.bind(this))},h.prototype.showYoutubeVideo=function(b,c){var d=a.extend({},this.settings.videoDefaults,{src:"http://www.youtube.com/watch?v="+c});return b.preventDefault(),this.closeYoutubeVideo(),this.$youtubeLightbox=this.appendYoutubeVideoContainer(),this.attachKeyboardHandler(),this.runYoutube(this,d),a(this.settings.selectors.video).on(this.settings.events.contextmenu,function(a){a.preventDefault()}),a(this.settings.selectors.youtubeLightboxSelect).on(this.settings.events.touchmove,function(a){a.preventDefault()}),!1},h.prototype.closeYoutubeVideo=function(){this.$youtubeLightbox&&(this.videoAnalyticsTracking(this.videoName,"close"),this.$youtubeLightbox.css("display","none")),this.youtubePlayer&&(this.youtubePlayer.pause(),this.youtubePlayer.dispose(),this.youtubePlayer=null),this.$youtubeLightbox&&(this.$youtubeLightbox.remove(),this.$youtubeLightbox=null,this.detachKeyboardHandler(),e.enableGlobalScrolling()),this.progressFlags={first:!1,middle:!1,almost:!1,done:!1}},h.prototype.videoAnalyticsTracking=function(a,b){var c={componentId:"C239_Mosaic_Gallery",videoName:a,videoInteraction:b};this.settings.analyticsManager.tag("videoInteraction",c)},h.prototype.appendYoutubeVideoContainer=function(){return e.disableGlobalScrolling(),a(this.youtubeLightboxTemplate).appendTo(this.$body).on(this.settings.events.click,this.settings.selectors.closeSelect,function(){return this.$youtubeLightbox=this.$youtubeLightbox||a(this.settings.selectors.youtubeLightboxSelect),this.closeYoutubeVideo(),!1}.bind(this))},h.prototype.getAuthInstance=function(b){if(a.isNestedProp(this.settings.HELIOS,["config","common","api","scripts","iqiyi","url"]))return b.HELIOS.config.common.api.scripts.iqiyi.url},h.prototype.authorizeIqiyi=function(a,b){var c=g.loadItem("c239_3_expires_in");(!c||c<0)&&this.getAccessToken(a,b).done(function(c){this.iqiyiSuccess(c,a,b)}.bind(this)).fail(function(){this.iqiyiError()}.bind(this))},h.prototype.getAccessToken=function(b,c){return a.ajax({url:b,data:{client_id:c.data("client-id"),client_secret:c.data("client-secret")}})},h.prototype.iqiyiError=function(){this.log.warn("iQIYI authorisation has failed")},h.prototype.iqiyiSuccess=function(b,c,d){var e;try{e=JSON.parse(b)}catch(e){throw this.log.error("Cannot parse the iQIYI JSON response"),new error("Cannot parse the iQIYI JSON response")}a.isNestedProp(e,["data","expires_in"])?(g.init(),g.saveItem("c239_3_expires_in",e.data.expires_in),g.saveItem("c239_3_access_token",e.data.access_token),this.authorizeIqiyi(c,d)):this.log.warn("iQIYI response returned malformed data")},h.prototype.initIqiyiPlayer=function(b){var c,d=a(b.currentTarget);this.iqiyiVideoUrl=this.trackActualVideo(b),this.settings.iqiyiConfig={accessToken:g.loadItem("c239_3_access_token"),vid:d.data("vid"),tvid:d.data("tvid"),autoplay:d.data("autoplay")?1:0,loop:d.data("loop")?1:0},c=a('<iframe src="'+this.iqiyiVideoUrl+"?vid="+this.settings.iqiyiConfig.vid+"&tvId="+this.settings.iqiyiConfig.tvid+"&accessToken="+this.settings.iqiyiConfig.accessToken+"&autoplay="+this.settings.iqiyiConfig.autoplay+"&chainAutoplay="+this.settings.iqiyiConfig.loop+'&bd=1&showRecommend=0" frameborder="0" width="100%" height="100%" allowfullscreen="true"></iframe>'),this.$iqiyiLightbox=this.appendIqiyiVideoContainer(),a(this.settings.selectors.iqiyiVideo).append(c),a(this.settings.selectors.iqiyiLightboxSelect).on(this.settings.events.touchmove,function(a){a.preventDefault()})},h.prototype.closeIqiyiPlayer=function(){this.$iqiyiLightbox=this.$iqiyiLightbox||a(this.settings.selectors.iqiyiLightboxSelect),this.$iqiyiLightbox&&(this.$iqiyiLightbox.remove(),this.$iqiyiLightbox=null,e.enableGlobalScrolling())},h.prototype.appendIqiyiVideoContainer=function(){return this.iqiyiLightboxTemplate=a("#lb_template_"+this.settings.iqiyiConfig.tvid).html(),e.disableGlobalScrolling(),a(this.iqiyiLightboxTemplate).appendTo(this.$body).on(this.settings.events.click,this.settings.selectors.closeSelect,this.closeIqiyiPlayer.bind(this))},h.prototype.bindEvents=function(){this.$posterImage.on(this.settings.events.load,c.bind(function(){this.$youtubeTriggers.removeClass(this.settings.classes.noButton),this.$iqiyiTrigger.removeClass(this.settings.classes.noButton)},this)).each(function(){this.complete&&a(this).load()}),this.$youtubeTriggers.off(this.settings.events.click).on(this.settings.events.click,c.bind(function(b){if(b.preventDefault(),!this.$root.hasClass(this.settings.classes.mosaicGallery)){b.stopPropagation(),this.videoName=this.trackActualVideo(b);var c=a(b.currentTarget).data("vid");return this.youtubeLightboxTemplate=a("#lb_template_"+c).html(),this.showYoutubeVideo(b,c)}},this)),this.$iqiyiTrigger.off(this.settings.events.click).on(this.settings.events.click,c.bind(function(b){if(b.preventDefault(),!this.$root.hasClass(this.settings.classes.mosaicGallery)){b.stopPropagation();var c=this.getAuthInstance(this.settings);this.authorizeIqiyi(c,this.$iqiyiTrigger),this.initIqiyiPlayer(b),a(b.target).blur()}},this)),a("body").off("gallery.open.video").on("gallery.open.video",c.bind(function(b,d,e){if(d.find(this.settings.selectors.youTubePlayBtn).length&&!d.find(".video-js.vjs-youtube").length){var f=d.find(this.settings.selectors.youTubePlayBtn),g=f.data("vid"),h="video-"+g+c.uniqueId(),i='<div class="video-wrapper"><video id="'+h+'" src="" class="video-js vjs-default-skin vjs-big-play-centered" controls autoplay preload="auto"> </video></div>';if(d[0].videoName=d.find('meta[itemprop="name"]').attr("content"),d[0].progressFlags={first:!1,middle:!1,almost:!1,done:!1},Modernizr.touchevents&&!this.desktopChromeFirefox){var j=d.find("picture img").attr("src"),k=a.extend({},this.settings.videoDefaults,{src:"http://www.youtube.com/watch?v="+g,poster:j,autoplay:!1});f.addClass(this.settings.classes.hidden),f.after(i)}else{var k=a.extend({},this.settings.videoDefaults,{src:"http://www.youtube.com/watch?v="+g,autoplay:e});f.addClass(this.settings.classes.hidden),d.find("figure").append(i)}this.runGalleryYoutube(h,this,k,d)}else if(d.find(this.settings.selectors.iqiyiPlayBtn).length&&!d.find("iframe").length&&e){var l=d.find(this.settings.selectors.iqiyiPlayBtn);this.authorizeIqiyi(this.getAuthInstance(this.settings),l),this.initGalleryIqiyiPlayer(d,l,e)}},this)),a("body").off("gallery.stop.video").on("gallery.stop.video",c.bind(function(b,d){d.find(this.settings.selectors.youTubePlayBtn).length&&d[0].videoInstance&&a(d[0]).find(this.settings.selectors.videoWrapper).length&&(d[0].videoInstance.pause(),d[0].videoInstance.dispose()),a(this.settings.selectors.carouselContainer).find(this.settings.selectors.videoContainer).each(c.bind(function(b,c){var d=a(c);d.find(this.settings.selectors.videoWrapper).remove(),d.find(this.settings.selectors.videoPlay).removeClass(this.settings.classes.hidden)},this))},this)),a("body").off("gallery.pause.video").on("gallery.pause.video",c.bind(function(a,b){b.find(this.settings.selectors.youTubePlayBtn).length?b[0].videoInstance.pause():(b.find(this.settings.selectors.videoWrapper).remove(),b.find(this.settings.selectors.iqiyiPlayBtn).removeClass(this.settings.classes.hidden))},this)),a("body").off("gallery.toggle.video").on("gallery.toggle.video",c.bind(function(a,b){b.find("iframe").length?b[0].videoInstance.paused()?b[0].videoInstance.play():b[0].videoInstance.pause():this.$body.trigger("gallery.open.video",[b,!0])},this))},h.prototype.runGalleryYoutube=function(a,b,c,d){d[0].videoInstance=f(a,c,function(){d.find("iframe").attr("tabindex","-1");var a=this;Modernizr.touchevents&&!this.desktopChromeFirefox&&(a.loadingSpinner.hide(),a.bigPlayButton.show()),a.on("play",function(){d.find(".vjs-big-play-button").attr("tabindex","-1"),a.bigPlayButton.hide(),a.loadingSpinner.hide(),b.videoAnalyticsTracking(d[0].videoName,"play"),b.progressBinding(a,d)}),a.on("timeupdate",function(){b.progressBinding(a,d)}),a.on("pause",function(){a.bigPlayButton.show(),a.loadingSpinner.hide(),b.videoAnalyticsTracking(d[0].videoName,"pause")}),a.on("ended",function(){a.bigPlayButton.show(),a.currentTime(0),a.pause()})})},h.prototype.initGalleryIqiyiPlayer=function(b,d,e){var f,h="iqiyi-video-"+c.uniqueId(),i='<div class="video-wrapper"><div id="'+h+'" class="video-js"></div></div>';b[0].iqiyiVideoUrl=b.find('meta[itemprop="embedURL"]').attr("content"),b[0].iqiyiConfig={accessToken:g.loadItem("c239_3_access_token"),vid:d.data("vid"),tvid:d.data("tvid"),autoplay:e?1:0,loop:d.data("loop")?1:0},f=a('<iframe src="'+b[0].iqiyiVideoUrl+"?vid="+b[0].iqiyiConfig.vid+"&tvId="+b[0].iqiyiConfig.tvid+"&accessToken="+b[0].iqiyiConfig.accessToken+"&autoplay="+b[0].iqiyiConfig.autoplay+"&chainAutoplay="+b[0].iqiyiConfig.loop+'&bd=1&showRecommend=0" frameborder="0" width="100%" height="100%" allowfullscreen="true" tabindex="-1"></iframe>'),d.addClass(this.settings.classes.hidden),d.after(i),b.find("#"+h).append(f)},h.prototype.trackActualVideo=function(b){var c,d=a(b.currentTarget);return d.hasClass(this.settings.classes.youtubePlay)?c=d.parent().parent().find('meta[itemprop="name"]').attr("content"):d.hasClass(this.settings.classes.iqiyiPlay)&&(c=d.parent().parent().find('meta[itemprop="embedURL"]').attr("content")),c},h}),define("c_242_ApplicationConstants",[],function(){"use strict";return{APPLICATION:{REGIONS:{FILTER_VIEW:"filterView",MAP_VIEW:"mapView",DEALERS_RESULT_VIEW:"dealersResultView",SEARCH_BOX_VIEW:"searchBoxView",DEALER_VIEW:"dealerView",HEADER_VIEW:"headerView",NOLOCATION_SEARCH_VIEW:"noLocationView"},PROPERTIES:{NAME:"Book A Test Drive - Inventory",VERSION:"0.1"},EVENTS:{FETCH_BATD_CARS:"fetch:batdCars",FETCH_DEALERS_AGGREGATIONS:"fetch:dealerAggregations",FETCH_DEALERS_RESULTS:"fetch:dealersResults",FETCH_MODELNAME:"fetch:modelName",FETCH_HEADER_TOTAL_COUNT:"fetch:headerTotalCount",FILTERVIEW_CHANGED:"change:filterView"},ANALYTICS:{COMPONENTID:"C242_BATD_Inventory_Search",ACTION:"search",PAGETYPE:"batd-inventory-search",LOCATIONINPAGE:"batd-inventory-card",ACCORDIANEVENT:"Show more",SEARCHTYPE:"batd-search",DEALERACTION:{PINCLICK:"map",SHOWMORE:"show more",PHONE:"call",DIRECTIONS:"get directions",WEBSITE:"Discover dealer"},COMPLETIONTYPE:{BOOKDRIVE:"testDriveBook",BOOKVIEW:"viewingBook"}}}}}),define("c_242_ModelConstants",[],function(){"use strict";return{MODEL:{ATTRIBUTES:{SEARCH_TYPE:"searchType",ALL_V2DEALERS:"allV2Dealers",ALL_DEALERS_RESULT:"allDealersResult",DEALER_AGGREGATIONS:"dealerAggregations",ACTIVE_MARKER:"activeMarker",ACTIVE_DEALER:"activeDealer",NEARBY_DEALER_SEARCH:"nearByDealerSearch"},EVENTS:{},CONSTANTS:{LOCATION:"location",DEALER:"dealer",COUNTRY_GEO_LOCATION:"countryGeoLocation"}}}}),define("c_242_ViewConstants",[],function(){"use strict";return{VIEW:{GENERAL:{CLASSES:{SELECTED:"selected",HIDDEN:"hidden",LOADING:"loading",STICK_HEADER:"stick-header",IS_ACTIVE:"is-active",DISPLAY_SECTION:"display-section",FILTER_ACTIVATED:"filter-is-activated",NOT_FIXED:"not-fixed",BTN_DISABLED:"btn-disabled"},SELECTORS:{HTML_BODY:"html,body",MAIN_HEADER:".c_010, .c_010B",VISIBLE:":visible",MAIN_VIEW:".c_242 .main-view",HEADER_VISIBLE:"header:visible",COOKIE_BANNER:".c_128"}},REGIONS:{SELECTORS:{FILTER:".filter-loader-group",DEALERS_LIST:".dealer-result-section",DEALER:".pan-dealer-section",SEARCH_FILTER_HEADER:".search-section",SEARCH_BOX:".tabs-navigation",HEADER:".header-info",MAP_SECTION:".map-section",NOLOCATION_BOX:".no-location-view"},ATTRIBUTES:{ARIA_HIDDEN:"aria-hidden"}},FILTER:{SELECTORS:{FILTER_LOADER:".filter-loader",FILTER_SECTION:".filter-section"}},EVENTS:{HIDE_FILTER_LOADER:"hide:filterLoader",SHOW_FILTER_LOADER:"filter:changed",HIDE_RESULT_LOADER:"hide:resultLoader",SHOW_RESULT_LOADER:"result:changed",START_FILTERSEARCH:"trigger:filterSearch",SYNC_SEARCHTABS:"syncSearchTabs",RENDER_MAP:"renderMap"}}}}),define("c_242_MainRouter",["backbone","marionette"],function(a,b){"use strict";return b.AppRouter.extend({})}),define("c_242_DeepLinkController",["jquery","underscore","backbone","marionette","c_242_ApplicationConstants","c_242_ModelConstants","c_242_ViewConstants"],function(a,b,c,d,e,f,g){"use strict";var h=e.APPLICATION,i=g.VIEW;return d.Object.extend({initialize:function(a){this.options=a||{},this.options.invalidDealerId="",this.locationHash=window.location.hash||"",this.hashIdentity="#/search!",this.hashParamsArray=[],this.fetchDeepLinkParams(),this.getEventAggregator().on("updateHashUrl",b.bind(function(a){this.updateHashParam(a)},this)),this.getEventAggregator().on(h.EVENTS.FETCH_MODELNAME,b.bind(function(a){this.getModelName(a)},this))},fetchDeepLinkParams:function(){var a="",c=[],d="",e=this;this.locationHash.length&&0===this.locationHash.indexOf(this.hashIdentity)&&(a=this.locationHash.substring(this.hashIdentity.length,this.locationHash.length),c=a.length?a.split("&"):[],c.length&&b.each(c,function(a,b){var c={},f=a.split("=");f[1].length&&("modelCode"===f[0]&&(d=decodeURIComponent(f[1])),c[f[0]]=decodeURIComponent(f[1]),e.hashParamsArray.push(c))})),d.length&&-1===this.locationHash.indexOf("modelName")?e.getEventAggregator().trigger(h.EVENTS.FETCH_BATD_CARS,{callType:"modelCode",modelCode:d}):this.validateHashParamsInAggregations()},getModelName:function(a){a?(!a.error&&a.aggregations.modelName.length&&this.hashParamsArray.push({modelName:decodeURIComponent(a.aggregations.modelName[0].value)}),this.validateHashParamsInAggregations()):this.validateHashParamsInAggregations(!0)},checkIfKeyAvailable:function(a,c){var d=!1;return"dealerId"===a?(d=this.options.allDealers[c])||(this.options.invalidDealerId=c,this.options.queryParams.invalidDealer=!d):"option"===a?b.each(this.options.content.configuration.filters.packsAndAccessories.options,function(a,b){if(a.value===c)return d=!0}):this.options.allAggregations[a]&&b.each(this.options.allAggregations[a].options,function(a,b){if(a.value===c)return d=!0}),d},validateHashParamsInAggregations:function(a){var c=this;b.each(this.hashParamsArray,function(a,d){b.each(a,function(a,b){c.checkIfKeyAvailable(b,a)&&("gradeType"===b?c.options.queryParams[b+"-"+a]=a:c.options.queryParams[b]=a)})}),a?this.getEventAggregator().trigger(h.EVENTS.FETCH_DEALERS_AGGREGATIONS):Object.keys(this.options.allDealers).length&&Object.keys(this.options.allAggregations).length?this.getEventAggregator().trigger(h.EVENTS.FETCH_BATD_CARS,{callType:"v2Dealers"}):(this.getEventAggregator().trigger(i.EVENTS.RENDER_MAP),this.options.noAggregations.noResults=!0,this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noResults))},updateHashParam:function(){var a="",c=[];this.hashParamsArray=[],b.each(this.options.queryParams,b.bind(function(a,b){var d={};a.length&&"geoBoundingBox"!==b&&(b.indexOf("gradeType-")>-1?(d.gradeType=decodeURIComponent(a),c.push("gradeType="+encodeURIComponent(a))):(d[b]=decodeURIComponent(a),c.push(b+"="+encodeURIComponent(a))),this.hashParamsArray.push(d))},this)),this.options.queryParams.invalidDealer&&this.options.invalidDealerId.length&&c.push("dealerId="+this.options.invalidDealerId),a=c.join("&"),a&&a.length?window.location.hash=this.hashIdentity+a:window.location.hash=""},getEventAggregator:function(){return this.options.eventAggregator}})}),define("hbars!/components/c_242/html/mainView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="filter-section">\n    <form class="form-filter">\n        <div class="filter-loader"></div>\n        <div class="filter-container">\n            <div class="header-bar">\n                <div>\n                    <button class="close-filter"></button>\n                    <h1 class="header-title">'+i((f=b&&b.mainViewData,f=null==f||!1===f?f:f.title,typeof f===h?f.apply(b):f))+'</h1>\n                    <p class="header-subtitle">'+i((f=b&&b.mainViewData,f=null==f||!1===f?f:f.subTitle,typeof f===h?f.apply(b):f))+'</p>\n                </div>\n            </div>\n            <div class="dealer-filter form-part edit-mode">\n                <div class="tabs-navigation search-box-tabs"></div>\n                <div class="form-group filter-loader-group"></div>\n            </div>\n        </div>\n        <div class="submit-section">\n            <button type="button" class="btn-alpha search filter-search">'+i((f=b&&b.mainViewData,f=null==f||!1===f?f:f.fvButton,typeof f===h?f.apply(b):f))+'</button>\n        </div>\n    </form>\n</div>\n<div class="result-section">\n    <div class="search-section stick-header">\n        <button type="button" class="search-btn">'+i((f=b&&b.mainViewData,f=null==f||!1===f?f:f.refineSearchButton,typeof f===h?f.apply(b):f))+'</button>\n        <button type="button" class="menu-btn">'+i((f=b&&b.mainViewData,f=null==f||!1===f?f:f.menuTitle,typeof f===h?f.apply(b):f))+'</button>\n    </div>\n    <div class="results">\n        <div class="map-section"></div>\n        <div class="header-info"></div>\n        <div class="batd-result-section">\n            <div class="no-location-view search-box-tabs hidden"></div>\n            <div class="dealer-result-section"></div>\n            <div class="pan-dealer-section hideView"></div>\n        </div>\n    </div>\n</div>\n'})}),define("c_242_MainView",["jquery","underscore","marionette","c_242_ApplicationConstants","c_242_ViewConstants","hbars!/components/c_242/html/mainView","customSelect"],function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=d.APPLICATION.REGIONS,p=(d.APPLICATION.EVENTS,e.VIEW),q=p.REGIONS.SELECTORS,r=(p.REGIONS.ATTRIBUTES,
p.GENERAL.CLASSES),s=p.GENERAL.SELECTORS,t=(a(window),0),u=0,v=".c_054-2, footer",w=0,x=2,y=0;return c.LayoutView.extend({template:f,ui:{searchBtn:".search-btn",menuBtn:".menu-btn",filterSection:".filter-section",resultSection:".result-section",searchSection:".search-section",dealersSection:".dealer-result-section",panDealerSection:".pan-dealer-section",filterSearch:".filter-search",hideFilter:".close-filter"},events:{"click @ui.searchBtn":"viewFilter","click @ui.menuBtn":"goToTop","click @ui.hideFilter":"hideFilter","click @ui.filterSearch":"triggerFilterSearch"},initialize:function(c){this.options=c||{},this.headerHeight=a(s.HEADER_VISIBLE).height(),this.initRegions(),m=a(s.COOKIE_BANNER),n=a(m).is(s.VISIBLE),m.length&&(y=m.outerHeight(),a(m).on("click","button",b.bind(this.hideCookieBanner,this))),b.each(a(v),function(b,c){u+=a(b).height()}),this.getEventAggregator().on("filterRenderComplete",this.afterRender,this)},hideFilter:function(b){b&&b.preventDefault&&b.preventDefault(),a(s.HTML_BODY).removeClass(r.FILTER_ACTIVATED),a(this.ui.filterSection).removeClass(r.IS_ACTIVE),a(this.ui.searchSection).removeClass(r.DISPLAY_SECTION)},hideCookieBanner:function(b){var c=a(b.target);y=0,n=!1,m.hide(),this.positionFilterSection(),a(this.ui.menuBtn).removeAttr("style"),a(this.ui.resultSection).removeClass(r.NOT_FIXED),c.off("click")},triggerFilterSearch:function(a){a&&a.preventDefault&&a.preventDefault(),this.getEventAggregator().trigger(p.EVENTS.START_FILTERSEARCH),b.delay(b.bind(function(){this.hideFilter(),this.getEventAggregator().trigger(p.EVENTS.HIDE_FILTER_LOADER)},this),1e3)},headerNavShowHide:function(c){var d=0;i=h.is(s.VISIBLE),k=a(q.SEARCH_FILTER_HEADER),i?(h.slideUp("slow").promise().then(b.bind(function(){j.removeClass(r.STICK_HEADER),k.addClass(r.STICK_HEADER),this.options.checkDeviceBreakPoint()&&a(this.ui.menuBtn).css({top:y+"px"})},this)),t=0,d=t+y,c||a(this.ui.filterSection).animate({top:d+"px"},"slow")):(d=this.headerHeight+y,k.removeClass(r.STICK_HEADER),j.addClass(r.STICK_HEADER),a(this.ui.filterSection).animate({top:d+"px"},"slow").scrollTop(0),h.slideDown("slow").promise().then(function(){t=h.height()}),a(this.ui.menuBtn).removeAttr("style"))},goToTop:function(){h.length&&a(s.HTML_BODY).animate({scrollTop:0},"slow").promise().then(b.bind(function(){this.headerNavShowHide()},this))},positionFilterSection:function(){(a(s.HEADER_VISIBLE).length||a(".c_128:visible").length)&&a(window).scrollTop()<t+y?w=t+y-a(window).scrollTop():this.options.checkDeviceBreakPoint()&&a(window).scrollTop()>=a(document).height()-a(window).height()-u?(w=a(document).height()-a(window).height()-u-a(window).scrollTop()-x,a(this.ui.filterSection).attr("style","top:"+w+"px;"),a(this.ui.filterSection).height(a(window).height())):a(this.ui.filterSection).removeAttr("style")},onRender:function(){return h=a(s.MAIN_HEADER),j=a(s.MAIN_VIEW),l="rtl"===a("html").attr("dir"),a(".loader").delay(300).fadeOut(),this.headerNavShowHide(),m.is(s.VISIBLE)&&(this.options.checkDeviceBreakPoint()?a(this.ui.menuBtn).css({top:y+"px"}):a(this.ui.resultSection).addClass(r.NOT_FIXED)),a(window).on("scroll",b.bind(this.onScrollEffect,this)),this},onScrollEffect:function(){var b=0;i=h.is(s.VISIBLE),this.options.checkDeviceBreakPoint()&&this.positionFilterSection(),h.length&&i&&a(window).scrollTop()>=this.headerHeight+y&&this.headerNavShowHide("scroll"),b=this.options.checkDeviceBreakPoint()&&n&&!i&&a(window).scrollTop()<y?y-a(window).scrollTop():0,a(this.ui.menuBtn).css({top:b+"px"})},viewFilter:function(c){c.preventDefault(),a(this.ui.filterSection).addClass(r.IS_ACTIVE).delay(300).queue(b.bind(function(b){a(this.ui.searchSection).addClass(r.DISPLAY_SECTION),b()},this)),this.options.checkDeviceBreakPoint()||a(s.HTML_BODY).addClass(r.FILTER_ACTIVATED)},initRegions:function(){var a={};a[o.FILTER_VIEW]=q.FILTER,a[o.DEALERS_RESULT_VIEW]=q.DEALERS_LIST,a[o.DEALER_VIEW]=q.DEALER,a[o.HEADER_VIEW]=q.HEADER,a[o.MAP_VIEW]=q.MAP_SECTION,a[o.SEARCH_BOX_VIEW]=q.SEARCH_BOX,a[o.NOLOCATION_SEARCH_VIEW]=q.NOLOCATION_BOX,this.addRegions(a)},afterRender:function(){var b=a(this.ui.filterSection).innerHeight();this.options.checkDeviceBreakPoint()||a(this.ui.filterSection).css({height:b+"px"}),g.init()},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_242_MainModel",["underscore","backbone","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d){"use strict";c.APPLICATION.EVENTS;return b.Model.extend({initialize:function(a){this.options=a||{}},getEventAggregator:function(){return this.options.eventAggregator}})}),define("hbars!/components/c_242/html/filterView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){return' disabled="disabled"'}function g(a,b){var d,e,f="";return f+='\n            <option value="',d=c.if.call(a,null==b||!1===b?b:b.index,{hash:{},inverse:u.program(6,i,b),fn:u.program(4,h,b),data:b}),(d||0===d)&&(f+=d),f+='">',(e=c.value)?d=e.call(a,{hash:{},data:b}):(e=a&&a.value,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</option>\n        "}function h(a,b){var d,e;return(e=c.value)?d=e.call(a,{hash:{},data:b}):(e=a&&a.value,d=typeof e===s?e.call(a,{hash:{},data:b}):e),t(d)}function i(a,b){var d,e;return(e=c.key)?d=e.call(a,{hash:{},data:b}):(e=a&&a.key,d=typeof e===s?e.call(a,{hash:{},data:b}):e),t(d)}function j(a,b){var d,e="";return e+='\n    <div class="grade-filter">\n        ',d=c.each.call(a,(d=a&&a.filterView,null==d||!1===d?d:d.gradeOptions),{hash:{},inverse:u.noop,fn:u.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </div>\n"}function k(a,b){var d,e,f="";return f+='\n            <div class="checkbox form-group">\n                <input id="'+t((d=null==b||!1===b?b:b.index,typeof d===s?d.apply(a):d))+'" data-storage="selectedGradeType" class="gradeType-',(e=c.key)?d=e.call(a,{hash:{},data:b}):(e=a&&a.key,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'" value="',(e=c.key)?d=e.call(a,{hash:{},data:b}):(e=a&&a.key,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'" ',d=c.if.call(a,a&&a.disabled,{hash:{},inverse:u.noop,fn:u.program(10,l,b),data:b}),(d||0===d)&&(f+=d),f+=' type="checkbox" data-defaulttext="',(e=c.selectedModel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.selectedModel,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'">\n                <label for="'+t((d=null==b||!1===b?b:b.index,typeof d===s?d.apply(a):d))+'" ',d=c.if.call(a,a&&a.disabled,{hash:{},inverse:u.noop,fn:u.program(12,m,b),data:b}),(d||0===d)&&(f+=d),f+=">",(e=c.value)?d=e.call(a,{hash:{},data:b}):(e=a&&a.value,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</label>\n            </div>\n        "}function l(a,b){return'disabled="disabled"'}function m(a,b){return'class="disabled-field"'}function n(a,b){var d,e,f="";return f+='\n            <option value="',(e=c.key)?d=e.call(a,{hash:{},data:b}):(e=a&&a.key,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'">',(e=c.value)?d=e.call(a,{hash:{},data:b}):(e=a&&a.value,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</option>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var o,p,q,r="",s="function",t=this.escapeExpression,u=this,v=c.helperMissing;return r+='<div class="model-filter custom-selectbox custom-selectbox-form ">\n    <label>'+t((o=b&&b.filterView,o=null==o||!1===o?o:o.modelLabel,typeof o===s?o.apply(b):o))+'</label>\n    <select class="modelName" data-storage="selectedModel" data-defaulttext="'+t((o=b&&b.filterView,o=null==o||!1===o?o:o.selectedModel,typeof o===s?o.apply(b):o))+'" ',p=c.ifCond||b&&b.ifCond,q={hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e},o=p?p.call(b,(o=b&&b.filterView,o=null==o||!1===o?o:o.modelOptions,null==o||!1===o?o:o.length),"<",2,q):v.call(b,"ifCond",(o=b&&b.filterView,o=null==o||!1===o?o:o.modelOptions,null==o||!1===o?o:o.length),"<",2,q),(o||0===o)&&(r+=o),r+=" >\n        ",o=c.each.call(b,(o=b&&b.filterView,null==o||!1===o?o:o.modelOptions),{hash:{},inverse:u.noop,fn:u.program(3,g,e),data:e}),(o||0===o)&&(r+=o),r+='\n    </select>\n    <span class="selectedValue">&nbsp;</span>\n</div>\n',o=c.if.call(b,(o=b&&b.filterView,null==o||!1===o?o:o.gradeOptions),{hash:{},inverse:u.noop,fn:u.program(8,j,e),data:e}),(o||0===o)&&(r+=o),r+='\n<div class="colour-filter custom-selectbox custom-selectbox-form ">\n    <label>'+t((o=b&&b.filterView,o=null==o||!1===o?o:o.colourLabel,typeof o===s?o.apply(b):o))+'</label>\n    <select class="filteringColour" data-storage="selectedColour" data-defaulttext="'+t((o=b&&b.filterView,o=null==o||!1===o?o:o.selectedColour,typeof o===s?o.apply(b):o))+'" ',p=c.ifCond||b&&b.ifCond,q={hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e},o=p?p.call(b,(o=b&&b.filterView,o=null==o||!1===o?o:o.colourOptions,null==o||!1===o?o:o.length),"<",2,q):v.call(b,"ifCond",(o=b&&b.filterView,o=null==o||!1===o?o:o.colourOptions,null==o||!1===o?o:o.length),"<",2,q),(o||0===o)&&(r+=o),r+=">\n        ",o=c.each.call(b,(o=b&&b.filterView,null==o||!1===o?o:o.colourOptions),{hash:{},inverse:u.noop,fn:u.program(14,n,e),data:e}),(o||0===o)&&(r+=o),r+='\n    </select>\n    <span class="selectedValue">&nbsp;</span>\n</div>\n<div class="accessories-filter custom-selectbox custom-selectbox-form">\n    <label>'+t((o=b&&b.filterView,o=null==o||!1===o?o:o.packsAndAccessoriesLabel,typeof o===s?o.apply(b):o))+'</label>\n    <select class="option" data-storage="selectedOption" data-defaulttext="'+t((o=b&&b.filterView,o=null==o||!1===o?o:o.selectedAccessory,typeof o===s?o.apply(b):o))+'" ',p=c.ifCond||b&&b.ifCond,q={hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e},o=p?p.call(b,(o=b&&b.filterView,o=null==o||!1===o?o:o.accessoryOptions,null==o||!1===o?o:o.length),"<",2,q):v.call(b,"ifCond",(o=b&&b.filterView,o=null==o||!1===o?o:o.accessoryOptions,null==o||!1===o?o:o.length),"<",2,q),(o||0===o)&&(r+=o),r+=">\n        ",o=c.each.call(b,(o=b&&b.filterView,null==o||!1===o?o:o.accessoryOptions),{hash:{},inverse:u.noop,fn:u.program(14,n,e),data:e}),(o||0===o)&&(r+=o),r+='\n    </select>\n    <span class="selectedValue">&nbsp;</span>\n</div>\n'})}),define("hbars!/components/c_242/html/searchBoxView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="search-box-view">\n    <ul role="tablist">\n        <li class="tab-title" data-tab-id="location-search"><a role="tab" href="#" class="location-tab active" aria-selected="true">'+i((f=b&&b.searchBoxModel,f=null==f||!1===f?f:f.locationTabLabel,typeof f===h?f.apply(b):f))+'</a></li>\n        <li class="tab-title" data-tab-id="dealer-search"><a role="tab" href="#" class="dealer-tab">'+i((f=b&&b.searchBoxModel,f=null==f||!1===f?f:f.dealerLabel,typeof f===h?f.apply(b):f))+'</a></li>\n    </ul>\n    <div class="search-container">\n        <div class="search-box hidden">\n            <input type="text" id="dealerName" data-no-results-text="" class="dealer-search hidden" placeholder="'+i((f=b&&b.searchBoxModel,f=null==f||!1===f?f:f.dealerPlaceholder,typeof f===h?f.apply(b):f))+'"/>\n            <button type="button" class="btn-alpha search" title="'+i((f=b&&b.searchBoxModel,f=null==f||!1===f?f:f.searchTooltip,typeof f===h?f.apply(b):f))+'"></button>\n            <div class="places-predictions">\n                <span class="predictions-list dealer-autocomplete-suggestions pac-container">\n                    <script type="text/x-handlebars-template" id="new-dealer-ctx">\n                        {{#each this}}\n                            <button type="button" class="dealer-pac-item" data-dealer-id="{{dealerId}}" data-address-name="{{name}}">{{name}}</button>\n                        {{/each}}\n                    <\/script>\n                    <script type="text/x-handlebars-template" id="noloc-new-dealer-ctx">\n                        {{#each this}}\n                            <button type="button" class="noloc-dealer-pac-item" data-dealer-id="{{dealerId}}" data-address-name="{{name}}">{{name}}</button>\n                        {{/each}}\n                    <\/script>\n                </span>\n            </div>\n        </div>\n        <div class="location-box">\n            <input type="text" id="location" data-no-results-text="" class="location-search" placeholder="'+i((f=b&&b.searchBoxModel,f=null==f||!1===f?f:f.locationPlaceholder,typeof f===h?f.apply(b):f))+'"/>\n            <button type="button" class="btn-alpha location " title="'+i((f=b&&b.searchBoxModel,f=null==f||!1===f?f:f.locationTooltip,typeof f===h?f.apply(b):f))+'"></button>\n            <div class="places-predictions">\n                <span class="predictions-list location-autocomplete-suggestions pac-container">\n                    <script type="text/x-handlebars-template" id="new-location-ctx">\n                        {{#each this}}\n                            <button type="button" class="location-pac-item" data-address-name="{{location.address}}">{{location.address}}</button>\n                        {{/each}}\n                    <\/script>\n                    <script type="text/x-handlebars-template" id="noloc-new-location-ctx">\n                        {{#each this}}\n                            <button type="button" class="noloc-location-pac-item" data-address-name="{{location.address}}">{{location.address}}</button>\n                        {{/each}}\n                    <\/script>\n                </span>\n            </div>\n        </div>\n    </div>\n    <button class="detect-location-cta get-geo-location">'+i((f=b&&b.searchBoxModel,f=null==f||!1===f?f:f.geopointLabel,typeof f===h?f.apply(b):f))+"</button>\n</div>\n"})}),define("c_242_SearchBoxView",["jquery","underscore","backbone","marionette","autocompleteEventHandler","hbars!/components/c_242/html/searchBoxView","keyCodeConstants","remoteServices","autocompleteContext","c_242_ViewConstants","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d,f,g,h,i,j,k,l,m){"use strict";var n,o=k.VIEW,p=l.APPLICATION,q=m.MODEL,r=d.ItemView.extend({template:g,ui:{detectLocationCta:".detect-location-cta",locationTextBox:".places-search-box",locationTab:".location-tab",locationSearch:".location-search",dealerTab:".dealer-tab",dealerSearch:".dealer-search",searchBoxTab:".search-box",locationBoxTab:".location-box",geoLocation:".get-geo-location"},events:{"click @ui.locationTab":"enableLocationTab","click @ui.dealerTab":"enableDealerTab","change @ui.dealerSearch":"dealerSearchResults","click @ui.geoLocation":"handleLocationFind","focus .dealer-search, .location-search":"selectSearchBox","blur .dealer-search, .location-search":"deSelectSearchBox"},initialize:function(a){n=this,this.autoCompleteSettings={ROOT:this.options.parentRegion+" .location-box",SEARCH_CTA:this.options.parentRegion+" .btn-alpha.location",OPTION_SELECTED:this.options.parentRegion+" .location-box .option-selected",template:".tabs-navigation"===this.options.parentRegion?"#new-location-ctx":"#noloc-new-location-ctx",INPUT:this.options.parentRegion+" .location-search",spanAutocomplete:this.options.parentRegion+" .location-autocomplete-suggestions",resultItem:this.options.locationSearchItem},this.autoCompleteSettingsDealer={ROOT:this.options.parentRegion+" .search-box",SEARCH_CTA:this.options.parentRegion+" .btn-alpha.search",OPTION_SELECTED:this.options.parentRegion+" .search-box .option-selected",template:".tabs-navigation"===this.options.parentRegion?"#new-dealer-ctx":"#noloc-new-dealer-ctx",INPUT:this.options.parentRegion+" .dealer-search",spanAutocomplete:this.options.parentRegion+" .dealer-autocomplete-suggestions",resultItem:this.options.dealerSearchItem,isDealerSearch:!0},this.options=a,this.geocoder=this.options.geocode,this.options.isNoLocation=!1,this.firstV2call=!0,this.bindEvents(),this.render(),this.getEventAggregator().on("change:searchBoxModel",b.bind(function(){if(this.render().initiateSmartLocation(),this.options.isFilterSearch)if(this.options.queryParams.dealerId)this.model.set({dealerSearchFlag:!0}),this.getEventAggregator().trigger(o.EVENTS.SYNC_SEARCHTABS);else if(b.isUndefined(this.model.getLocation()))this.getEventAggregator().trigger(o.EVENTS.HIDE_FILTER_LOADER),this.getUserLocation("firstLoad");else if(this.options.queryParams.lat&&this.options.queryParams.lng){var a=this.model.getLocation();this.options.autocompleteContext.getPostalCodeByCoordinatesAndCountry(a.location.lat,a.location.lng).done(b.bind(function(){this.options.checkDeviceBreakPoint()?this.setSmartLocation({heliosLocation:a}):(this.model.set({dealerSearchFlag:!1}),this.getEventAggregator().trigger(o.EVENTS.SYNC_SEARCHTABS),this.firstV2call&&(this.firstV2call=!1,this.fetchDealers()))},this)).fail(b.bind(function(){this.options.checkDeviceBreakPoint()||this.model.set({dealerSearchFlag:!1}),this.getEventAggregator().trigger(o.EVENTS.SYNC_SEARCHTABS),this.renderNoLocationView()},this))}},this))},bindEvents:function(){a("body").on("click",this.checkForUserClick.bind(this)),a(".no-location-view").on("click",this.checkNoLocationViewClickAction.bind(this)),this.getEventAggregator().on("getPostalCodeByAddressName",this.setSmartLocation,this).on("getFilteredDealerResult",this.setFilteredDealer,this).on(o.EVENTS.SYNC_SEARCHTABS,this.syncSearchTabs,this).on("triggerLocationSearch",this.triggerLocationSearch,this).on("triggerDealerSearch",this.performDealerSearch,this).on("closePredictionsList",this.closePredictionsList,this)},syncSearchTabs:function(){this.model.get("dealerSearchFlag")?(this.enableDealerTab(),this.prePopulateDealerSearchBox()):this.options.queryParams.locationNotShared||(this.enableLocationTab(),this.prePopulateLocationSearchBox(this.model.getLocation()))},triggerLocationSearch:function(){var a=this.model.getLocation();a&&this.options.autocompleteContext.getPostalCodeByCoordinatesAndCountry(a.location.lat,a.location.lng).done(b.bind(function(a){this.fetchDealers()},this)).fail(b.bind(function(){this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noLocation),this.getEventAggregator().trigger("returnToMainView"),this.getEventAggregator().trigger(o.EVENTS.RENDER_MAP)},this))},checkForUserClick:function(b){var c=a(b.target);c.hasClass("location-search")||c.hasClass("dealer-search")||c.hasClass("predictions-list")||this.closePredictionsList()},closePredictionsList:function(c){var d,e;d=a(this.autoCompleteSettings.spanAutocomplete),e=a(this.autoCompleteSettingsDealer.spanAutocomplete),b.each([d,e],function(a){a.empty(),a.removeClass("is-active")})},checkNoLocationViewClickAction:function(b){var c=a(b.target);(c.hasClass("noloc-location-pac-item")||c.hasClass("noloc-dealer-pac-item"))&&".no-location-view"===this.options.parentRegion?this.options.isNoLocation=!0:this.options.isNoLocation=!1},initiateSmartLocation:function(){return this.autocompleteEventHandler=new f({COUNTRY_CODE:this.options.countryCode,window:this.options.window,inputElement:this.autoCompleteSettings.INPUT,selectors:this.autoCompleteSettings,eventAggregator:this.getEventAggregator(),heliosObject:this.options.window.HELIOS}),this.autocompleteEventHandlerDealer=new f({COUNTRY_CODE:this.options.countryCode,window:this.options.window,inputElement:this.autoCompleteSettingsDealer.INPUT,selectors:this.autoCompleteSettingsDealer,eventAggregator:this.getEventAggregator(),heliosObject:this.options.window.HELIOS,isDealerSearch:!0,dealerSearchHandler:this.dealerSearchResults,getSelectedDealerObject:this.getSelectedDealerObject}),this},getSelectedDealerObject:function(a){var c=n.options.allDealers,d=[];return a=""+a||"",a&&(d=b.filter(c,function(b){return b.dealerId===a})),d.length?d[0]:{}},dealerSearchResults:function(c){var d=a.Deferred(),e=n.options.allDealers,f=[];return c&&c.length?(f=b.filter(e,function(a){return a.name.toLowerCase().indexOf(c.toLowerCase())>-1}).splice(0,5),f.length?d.resolve(f):d.reject(),n.options.analytics.dealerSearch.searchTerm=c):d.reject(),d.promise()},enableLocationTab:function(b){b&&b.preventDefault(),a(this.ui.locationTab).addClass("active"),a(this.ui.dealerTab).removeClass("active"),a(this.ui.locationTab).attr("aria-selected",!0),a(this.ui.dealerTab).removeAttr("aria-selected"),a(this.ui.locationSearch).removeClass("hidden"),a(this.ui.dealerSearch).addClass("hidden"),a(this.ui.locationBoxTab).removeClass("hidden"),a(this.ui.searchBoxTab).addClass("hidden"),a(this.ui.geoLocation).removeClass("hidden")},enableDealerTab:function(b){b&&b.preventDefault(),a(this.ui.locationTab).removeClass("active"),a(this.ui.dealerTab).addClass("active"),a(this.ui.dealerTab).attr("aria-selected",!0),a(this.ui.locationTab).removeAttr("aria-selected"),a(this.ui.locationSearch).addClass("hidden"),a(this.ui.dealerSearch).removeClass("hidden"),a(this.ui.locationBoxTab).addClass("hidden"),a(this.ui.searchBoxTab).removeClass("hidden"),a(this.ui.geoLocation).addClass("hidden")},selectSearchBox:function(){a(this.options.parentRegion+" .search-container").css({"z-index":100})},deSelectSearchBox:function(b){a(this.options.parentRegion+" .search-container").removeAttr("style")},handleLocationFind:function(a){a.preventDefault(),this.options.queryParams.invalidDealer=!1,this.options.dealerModel.set({searchType:"location"}),this.getUserLocation()},checkDealerAggregationsAvailable:function(){var a=this.options.dealerModel.get(q.ATTRIBUTES.DEALER_AGGREGATIONS)||{};return a.aggregations&&a.aggregations.dealerId&&a.aggregations.dealerId.length},fetchDealers:function(a){var c=this;this.checkDealerAggregationsAvailable()&&Object.keys(this.options.allDealers).length&&Object.keys(this.options.allAggregations).length?(this.options.mapParams.dealerDetailViewOpen=!1,this.getEventAggregator().trigger("returnToMainView"),this.options.queryParams.lat&&this.options.queryParams.lng&&this.getEventAggregator().trigger("map:zoomChange",{panToLocation:!0}),this.options.eventAggregator.trigger(p.EVENTS.FETCH_BATD_CARS,{noBounds:!0})):(b.delay(b.bind(function(){this.getEventAggregator().trigger(o.EVENTS.HIDE_FILTER_LOADER)},c),500),this.getEventAggregator().trigger(o.EVENTS.RENDER_MAP))},clearNearbyDealerData:function(){this.options.nearByDealer.status&&(this.options.nearByDealer.status=!1,delete this.options.nearByDealer.dealer)},setFilteredDealer:function(a){this.model.setFilteredDealer(a),this.model.unset("heliosLocation"),this.options.queryParams.lat=this.options.queryParams.lng=0,this.options.queryParams.dealerId=a.dealerId,this.options.queryParams.locationNotShared=!1,this.options.queryParams.invalidDealer=!1,this.options.dealerModel.set({searchType:"dealer"}),this.getEventAggregator().trigger("updateHashUrl"),this.clearNearbyDealerData(),this.options.analytics.dealerSearch.searchTerm+="|"+a.name,this.model.set({dealerSearchFlag:!0}),this.getEventAggregator().trigger(o.EVENTS.SYNC_SEARCHTABS),this.options.checkDeviceBreakPoint()&&this.getEventAggregator().trigger(o.EVENTS.SHOW_FILTER_LOADER),b.delay(b.bind(function(){(this.options.checkDeviceBreakPoint()||this.options.isNoLocation)&&this.performDealerSearch()},this),500)},performDealerSearch:function(){var a,c=this.model.getFilteredDealer();this.checkDealerAggregationsAvailable()&&Object.keys(this.options.allDealers).length&&Object.keys(this.options.allAggregations).length?this.getEventAggregator().trigger(p.EVENTS.FETCH_BATD_CARS,{dealerId:c.dealerId,callType:"dealerData"}):(a=this.options.allDealers[c.dealerId],a&&(this.options.queryParams.lat=a.geolocation.latitude,this.options.queryParams.lng=a.geolocation.longitude,this.options.queryParams.dealerId=""),b.delay(b.bind(function(){this.getEventAggregator().trigger(o.EVENTS.HIDE_FILTER_LOADER),this.getEventAggregator().trigger(o.EVENTS.RENDER_MAP)},this),500))},setSmartLocation:function(a){this.options.queryParams.lat=a.heliosLocation.location.lat,this.options.queryParams.lng=a.heliosLocation.location.lng,this.options.mapParams.userLocation={lat:a.heliosLocation.location.lat,lng:a.heliosLocation.location.lng},a.userQuery&&(this.options.queryParams.invalidDealer=!1,this.options.queryParams.locationNotShared=!1,this.options.analytics.locationSearch.searchTerm=a.userQuery+"|"+a.heliosLocation.location.address,this.setUserQuery(a.userQuery)),this.clearDealerSearch(),this.model.setSmartLocation(a.heliosLocation),this.model.set({dealerSearchFlag:!1}),this.getEventAggregator().trigger(o.EVENTS.SYNC_SEARCHTABS),this.options.checkDeviceBreakPoint()&&this.getEventAggregator().trigger(o.EVENTS.SHOW_FILTER_LOADER),(this.options.checkDeviceBreakPoint()||this.options.isNoLocation||this.firstLoad)&&this.fetchDealers(),this.firstLoad=void 0},clearDealerSearch:function(){this.options.dealerModel.set({searchType:"location"}),this.options.queryParams.dealerId="",this.getEventAggregator().trigger("updateHashUrl"),this.clearNearbyDealerData()},setUserQuery:function(a){this.model.set("userQuery",a)},locationFailCallBack:function(){this.renderNoLocationView(),this.firstLoad=void 0},checkCountryCode:function(a,c){var d=this.options.analytics;this.options.queryParams.lat=a,this.options.queryParams.lng=c,this.options.queryParams.locationNotShared=!1,this.model.set({isLocationBlocked:!1}),this.clearDealerSearch(),this.options.autocompleteContext.getPostalCodeByCoordinates(a,c).done(b.bind(function(e){this.options.isMaxMind?d.locationSearch.searchTerm="autoadjust|"+e.location.address:d.locationSearch.searchTerm="geolocation|"+e.location.address,b.delay(b.bind(function(){this.getEventAggregator().trigger(o.EVENTS.HIDE_FILTER_LOADER)},this),500),this.options.autocompleteContext.getPostalCodeByCoordinatesAndCountry(a,c).done(b.bind(function(b){b.location.lat=a,b.location.lng=c,this.setSmartLocation({heliosLocation:b})},this)).fail(b.bind(function(){d.filterSearchTracking.searchResults=0,d.filterSearchTracking.searchTerm=d.locationSearch.searchTerm,this.options.analyticsController.onSearch(!1,d.filterSearchTracking),this.model.setSmartLocation(e),this.model.set({dealerSearchFlag:!1}),this.getEventAggregator().trigger(o.EVENTS.SYNC_SEARCHTABS),this.locationFailCallBack()},this))},this)).fail(b.bind(function(a){b.delay(b.bind(function(){this.getEventAggregator().trigger(o.EVENTS.HIDE_FILTER_LOADER)},this),500),this.locationFailCallBack()},this))},getUserLocation:function(c){var d,f;c?this.firstLoad=!0:(this.getEventAggregator().trigger(o.EVENTS.SHOW_FILTER_LOADER),this.findMyLocationDisabled=!0),a(this.ui.geoLocation).addClass(o.GENERAL.CLASSES.BTN_DISABLED);try{this.options.window.navigator.geolocation.getCurrentPosition(b.bind(function(b){a(this.ui.geoLocation).removeClass(o.GENERAL.CLASSES.BTN_DISABLED),this.findMyLocationDisabled=!1,this.geoLocationSuccess(b),this.locationAllowed=!0},this),b.bind(function(c){c&&c.code&&3===c.code?(f=!1,this.getEventAggregator().trigger(o.EVENTS.HIDE_FILTER_LOADER),this.locationAllowed||this.locationBlocked?(a(this.ui.geoLocation).removeClass(o.GENERAL.CLASSES.BTN_DISABLED),this.findMyLocationDisabled=!1,this.callMaxMindLocation()):d=this.options.window.navigator.geolocation.watchPosition(b.bind(function(b){this.locationAllowed=!0,a(this.ui.geoLocation).removeClass(o.GENERAL.CLASSES.BTN_DISABLED),this.findMyLocationDisabled=!1,f||(this.geoLocationSuccess(b),f=!0),this.options.window.navigator.geolocation.clearWatch(d)},this),b.bind(function(b){this.locationBlocked=!0,a(this.ui.geoLocation).removeClass(o.GENERAL.CLASSES.BTN_DISABLED),this.findMyLocationDisabled=!1,f||(this.callMaxMindLocation(),f=!0),this.options.window.navigator.geolocation.clearWatch(d)},this))):(a(this.ui.geoLocation).removeClass(o.GENERAL.CLASSES.BTN_DISABLED),this.findMyLocationDisabled=!1,this.locationBlocked=!0,this.callMaxMindLocation())},this),{timeout:1e4})}catch(e){throw"GeoLocation Error: "+e}},geoLocationSuccess:function(a){this.options.isMaxMind=!1,this.checkCountryCode(a.coords.latitude,a.coords.longitude)},callMaxMindLocation:function(){i.getLocationByIP().done(b.bind(function(a){a&&a.latitude&&a.longitude?(this.options.isMaxMind=!0,this.checkCountryCode(a.latitude,a.longitude)):this.setLocationBlockedData()},this)).fail(b.bind(function(){this.setLocationBlockedData()},this))},setLocationBlockedData:function(){var a=this.options.analytics;this.getEventAggregator().trigger(o.EVENTS.HIDE_FILTER_LOADER),a.filterSearchTracking.searchResults=0,delete a.filterSearchTracking.searchTerm,this.options.analyticsController.onSearch(!1,a.filterSearchTracking),b.isUndefined(this.model.get("isLocationBlocked"))&&this.firstLoad&&(this.firstLoad=void 0,this.model.set({isLocationBlocked:!0}),this.options.queryParams.lat=this.options.queryParams.lng=0,this.options.queryParams.dealerId="",this.model.set({dealerSearchFlag:!1}),this.getEventAggregator().trigger(o.EVENTS.SYNC_SEARCHTABS),this.renderNoLocationView())},renderNoLocationView:function(){var a={};(this.firstV2call||this.options.checkDeviceBreakPoint())&&(this.firstV2call=!1,this.options.noAggregations.noResults||(a=this.options.noLocation,this.model.get("isLocationBlocked")&&(a.noLocation=!0),this.getEventAggregator().trigger("fetch:dealersResultView",a)),this.getEventAggregator().trigger("returnToMainView"),this.getEventAggregator().trigger(o.EVENTS.RENDER_MAP))},prePopulateLocationSearchBox:function(b){b&&b.location?a(this.ui.locationSearch).val(b.location.address):a(this.ui.locationSearch).val(""),a(this.ui.dealerSearch).val("")},prePopulateDealerSearchBox:function(){var b,c="";this.options.queryParams.dealerId?(b=this.options.allDealers[this.options.queryParams.dealerId],c=b.name,this.model.setFilteredDealer(b)):c=this.options.queryParams.dealerName,a(this.ui.dealerSearch).val(c),a(this.ui.locationSearch).val(""),this.enableDealerTab(),delete this.options.queryParams.dealerName},onRender:function(){return a(this.ui.geoLocation).toggleClass(o.GENERAL.CLASSES.BTN_DISABLED,this.findMyLocationDisabled),this},getEventAggregator:function(){return this.options.eventAggregator}});return r}),define("c_242_SearchBoxModel",["jquery","underscore","backbone"],function(a,b,c){"use strict";return c.Model.extend({defaults:{userQuery:"",placePredictions:[],selectedPlace:null,selectedDealer:{},dealerSearchFlag:!1},initialize:function(a){this.options=a||{},this.addBroadcastListener("change:priorPlace","priorPlaceChanged")},addBroadcastListener:function(a,b){this.on(a,function(a,c){this.options.eventAggregator.trigger(b,c)})},setFilteredDealer:function(a){this.set("selectedDealer",a)},setSmartLocation:function(a){this.set("heliosLocation",a)},getLocation:function(a){return this.get("heliosLocation")},getFilteredDealer:function(){if(!b.isUndefined(this.get("selectedDealer")))return this.get("selectedDealer")},getSmartLocation:function(){return this.options.smartLocationContext.get().done(b.bind(function(a){b.isUndefined(this.get("heliosLocation"))&&this.set("heliosLocation",a)},this))},getCurrentLocationLabel:function(){return this.options.content&&this.options.content.currentLocationText}})}),define("c_242_FilterView",["jquery","underscore","backbone","marionette","autocompleteEventHandler","hbars!/components/c_242/html/filterView","c_242_ViewConstants","c_242_ApplicationConstants","c_242_ModelConstants","c_242_SearchBoxView","c_242_SearchBoxModel"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=g.VIEW,m=h.APPLICATION,n=(i.MODEL,g.VIEW.REGIONS.SELECTORS,44);return c.Marionette.LayoutView.extend({template:f,initialize:function(c){this.options=c||{},this.firstV2call=!0,this.getEventAggregator().on(l.EVENTS.SHOW_FILTER_LOADER,this.showFilterLoading,this).on(l.EVENTS.HIDE_FILTER_LOADER,this.hideFilterLoading,this).on(l.EVENTS.START_FILTERSEARCH,this.triggerFilterSearch,this).on(m.EVENTS.FILTERVIEW_CHANGED,b.bind(function(){this.render().prePopulateFilter().updateLocalStorage()},this)),this.options.checkDeviceBreakPoint()||(a(".filter-section").css("height",a(window).height()+"px"),a(".filter-container").css("height",a(window).height()-n+"px"),a(window).resize(b.debounce(function(){a(".filter-section").css("height",a(window).height()+"px"),
a(".filter-container").css("height",a(window).height()-n+"px")},250)))},ui:{gradeType:".gradeType",filteringColour:".filteringColour",accessory:".accessories",modelName:".modelName"},events:{'change select, input[type="checkbox"]':"updateFilterModel","focus .modelName":"closePredictionList"},prePopulateFilter:function(){var c,d=this.options.deepLinkController.hashParamsArray,e=this.model.get("deepLinkParams"),f="";return b.each(d,function(c,d){b.each(c,function(b,c){"gradeType"===c?(f=c+"-"+b,a("."+f).length&&!a("."+f).is(":disabled")&&(a("."+f).prop("checked",!0),e[f]=b)):"dealerId"!==c&&a("."+c+' option[value="'+b+'"]').length&&(a("."+c).val(b),a("."+c+" + .selectedValue").text(b),e[c]=b)})}),this.model.set("deepLinkParams",e),this.firstLoad||(this.firstLoad=!0,Object.keys(e).length<2&&e.hasOwnProperty("dealerId")||(c=this.triggerAnalytics(e)),c.filterKeys.length&&(c.filterValues="autoselected|"+c.filterValues,this.options.analytics.filterSearchTracking=c)),this},closePredictionList:function(){a(".predictions-list button").length&&this.getEventAggregator().trigger("closePredictionsList")},showFilterLoading:function(){a(l.FILTER.SELECTORS.FILTER_LOADER).show(),a(l.FILTER.SELECTORS.FILTER_LOADER).css("top",a(l.FILTER.SELECTORS.FILTER_SECTION).scrollTop()),a(l.FILTER.SELECTORS.FILTER_SECTION).addClass("overflow-hide")},hideFilterLoading:function(){a(l.FILTER.SELECTORS.FILTER_LOADER).hide(),a(l.FILTER.SELECTORS.FILTER_LOADER).removeAttr("style"),a(l.FILTER.SELECTORS.FILTER_SECTION).removeClass("overflow-hide")},triggerAnalytics:function(a){var c,d=[],e={},f={};return this.searchFilters=a,b.each(a,b.bind(function(a,g){a.length&&"dealerId"!==g&&(g.indexOf("gradeType")>-1?d.push(a):(e[g]=a,"modelName"===g&&(f.vehicleModel=a,c=b.find(this.model.get("filterView").modelOptions,b.bind(function(b){return b.value===a},this)).key,f.vehicleId=c)))},this)),d.length&&(d.sort(b.bind(function(a,b){return a.localeCompare(b,this.options.language)},this)),e.gradeType=d.join(",")),f=b.extend(f,this.sortWithKey(e))},sortWithKey:function(a){var c=Object.keys(a),d=[];return c.length&&(c.sort(function(a,b){return a>b}),b.each(c,function(b){d.push(a[b])})),c=c.join(";"),d=d.join(";"),{filterKeys:c,filterValues:d}},updateFilterModel:function(b){var c,d=this.model.get("deepLinkParams");!a(b.currentTarget).is(":checkbox")||a(b.currentTarget).prop("checked")?(d[b.currentTarget.className]=a(b.currentTarget).val(),this.options.queryParams[b.currentTarget.className]=a(b.currentTarget).val()):(d[b.currentTarget.className]="",this.options.queryParams[b.currentTarget.className]=""),this.getEventAggregator().trigger("updateHashUrl"),this.options.mapParams.dealerDetailViewOpen&&this.getEventAggregator().trigger("returnToMainView"),c=this.triggerAnalytics(d),this.options.analytics.filterSearchTracking=c.filterKeys.length?c:{},this.getEventAggregator().trigger(l.EVENTS.SHOW_FILTER_LOADER),this.getEventAggregator().trigger(m.EVENTS.FETCH_BATD_CARS,{callType:"v2Dealers"}),this.updateLocalStorage(a(b.currentTarget))},updateLocalStorage:function(){b.each(a('select, input[type="checkbox"]',this.options.root),b.bind(function(b){var c,d;b=a(b),c=b.data("storage"),d=b.is(":checkbox")?a(".grade-filter :checked").map(function(){return this.value}).get().join(","):b.val(),d.length?this.options.storageManager.saveItem(c,d,{mode:"localStorage"}):this.options.storageManager.deleteItem(c,{mode:"localStorage"})},this))},triggerFilterSearch:function(a){a&&a.preventDefault&&a.preventDefault(),this.getEventAggregator().trigger(l.EVENTS.SHOW_FILTER_LOADER),this.fetchDealers()},fetchDealers:function(){this.options.queryParams.dealerId?this.getEventAggregator().trigger("triggerDealerSearch"):this.getEventAggregator().trigger("triggerLocationSearch")},onRender:function(){return this.getEventAggregator().trigger("filterRenderComplete",this),this.options.checkDeviceBreakPoint()&&!this.firstV2call||(this.firstV2call=!1,this.getEventAggregator().trigger(l.EVENTS.HIDE_FILTER_LOADER)),this},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_242_FilterController",["jquery","underscore","backbone","marionette","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d,e,f){"use strict";var g,h=e.APPLICATION;return d.Object.extend({initialize:function(a){if(this.options=a||{},this.filterModel=this.options.filterModel,this.searchBoxModel=this.options.searchBoxModel,this.authorValues=this.options.configData,this.bindEvents(),!Object.keys(this.options.allDealers).length||!Object.keys(this.options.allAggregations).length){try{g={modelFilter:this.options.allAggregations.modelName.options||[],gradeFilter:this.options.allAggregations.gradeType.options||[],colourFilter:this.options.allAggregations.filteringColour.options||[],optionFilter:this.options.allAggregations.option.options||[]}}catch(e){g={modelFilter:[],gradeFilter:[],colourFilter:[],optionFilter:[]}}this.getFilterSectionValues(g)}},bindEvents:function(){this.getEventAggregator().on("filterResults:rendered",b.bind(function(a){this.getFilterSectionValues(a)},this))},getFilterSectionValues:function(a){this.filterModel.set({filterView:this.renderFilterViewData(a)}),this.searchBoxModel.set({searchBoxModel:this.renderSearchBoxViewData()}),this.getEventAggregator().trigger(h.EVENTS.FILTERVIEW_CHANGED).trigger("change:searchBoxModel")},renderFilterViewData:function(a){var b=this.authorValues;return{title:b.configuration.labels.headingTitle||"",subTitle:b.configuration.labels.headingSubtitle||"",selectedModel:b.configuration.labels.modelAlloptionsLabel||"",selectedColour:b.configuration.labels.colourAlloptionsLabel||"",selectedGrade:b.configuration.labels.gradeSubtitle||"",selectedAccessory:b.configuration.labels.allPacksAndAccessories||"",modelOptions:[].concat({key:"",value:b.configuration.labels.modelAlloptionsLabel||""},this.authorSorting(a.modelFilter,b.configuration.sortOrder.modelName.options||"")),colourOptions:[].concat({key:"",value:b.configuration.labels.colourAlloptionsLabel||""},this.authorSorting(this._addKeysToObject(a.colourFilter),b.configuration.sortOrder.filteringColour.options||"")),gradeOptions:[].concat(this.displayGradeTypes(a.gradeFilter)),accessoryOptions:[].concat({key:"",value:b.configuration.labels.allPacksAndAccessories||""},this.reOrderOptions(this._addKeysToObject(this.authorValues.configuration.filters.packsAndAccessories.options||""),a.optionFilter)),modelLabel:b.configuration.labels.modelLabel||"",gradeLabel:b.configuration.labels.gradeLabel||"",colourLabel:b.configuration.labels.colourLabel||"",fvButton:b.configuration.labels.fvButton||"",packsAndAccessoriesLabel:b.configuration.labels.packsAndAccessoriesLabel||""}},displayGradeTypes:function(a){var c=0;return a&&Object.keys(this.options.allDealers).length&&Object.keys(this.options.allAggregations).length?(b.each(this.options.allAggregations.gradeType.options,function(b,d){delete b.disabled,-1===(c=a.findIndex(function(a){return a.value===b.value}))&&(b.disabled=!0)}),this.options.allAggregations.gradeType.options.sort(b.bind(function(a,b){return a.value.localeCompare(b.value,this.options.language)},this)),this.options.allAggregations.gradeType.options):[]},authorSorting:function(a,c){var d,e=[],f=[];return b.each(a,function(b,g){b.order=a.length,d=!1,c.every(function(a){return b.value!==a.value||(d=!0,b.order=a.order,e.push(b),!1)}),d||f.push(b)}),e.sort(function(a,b){return a.order<b.order?-1:a.order>b.order?1:0}),e.concat(f)},reOrderOptions:function(a,c){var d=[],e=0;return c&&b.each(a,function(a,b){(e=c.findIndex(function(b){return b.value===a.value}))>-1&&d.push(a)}),d},renderSearchBoxViewData:function(){var a=this.authorValues;return{locationTabLabel:a.configuration.labels.locationTabLabel||"",dealerLabel:a.configuration.labels.dealerLabel||"",geopointLabel:a.configuration.labels.geopointLabel||"",locationPlaceholder:a.configuration.labels.locationPlaceholder||"",dealerPlaceholder:a.configuration.labels.dealerSearchPlaceholder||"",searchTooltip:a.configuration.labels.dealerSearchTootip||"",locationTooltip:a.configuration.labels.locationTootip||""}},getEventAggregator:function(){return this.options.eventAggregator},_addKeysToObject:function(a){return b.each(a,function(a){a.key=a.value})}})}),define("c_242_FilterModel",["underscore","backbone","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d){"use strict";c.APPLICATION.EVENTS;return b.Model.extend({defaults:{location:"",dealer:"",lat:"35.6849297",long:"139.6621237",deepLinkParams:{}},initialize:function(a){this.options=a||{}},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_242_DealerModel",["underscore","backbone","c_242_ApplicationConstants","c_242_ModelConstants","remoteServices"],function(a,b,c,d,e){"use strict";var f,g=c.APPLICATION,h=d.MODEL;return b.Model.extend({defaults:{callOptions:{},queryParams:{},selectedDealerIdForShowAll:""},initialize:function(a){f=this,this.options=a||{},this.getEventAggregator().on("make:call",this.makeCall,this)},makeCall:function(a){this.set({callOptions:a.callOptions}),this.set({queryParams:a.queryParams}),this.fetch()},fetch:function(){b.Model.prototype.fetch.apply(this,[{reset:!0,error:a.bind(this.onErrorHandler,this)}])},sync:function(a,b,c){var d=this.options.remoteServices.getDealersForBATD(this.get("queryParams").replace(/[^=&]+=(&|$)/g,"").replace(/&$/,""));c&&(d.done(c.success),d.fail(c.error))},onErrorHandler:function(){var a=this.get("callOptions");switch(a&&a.callType||""){case"modelCode":this.getEventAggregator().trigger(g.EVENTS.FETCH_MODELNAME,{error:!0});break;case"v2Dealers":this.set({dealerAggregations:{total:0}}),this.getEventAggregator().trigger(g.EVENTS.FETCH_DEALERS_AGGREGATIONS,{error:!0});break;case"dealerData":this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noResults);break;default:this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noResults)}},renderDealerResponse:function(b,c){var d=this.options.analytics,e=this.options.allDealers[this.options.queryParams.dealerId]||("dealerPinClick"===c.callSource?c.dealerId:"");"dealerPinClick"!==c.callSource&&(this.options.nearByDealer.status=!1),this.set("callSource",c.callSource),"dealerPinClick"===c.callSource&&this.get(h.ATTRIBUTES.SEARCH_TYPE)===h.CONSTANTS.LOCATION?(b.dealerLabel=c.pin,b=a.extend({},b.aggregations.dealerId[0],b.dealerLabel),this.getEventAggregator().trigger("fetch:dealerViewData",b)):(d.filterSearchTracking.searchResults=b.total||0,d.dealerSearch.searchTerm.length||(d.dealerSearch.searchTerm="autoadjust|"+e.name),d.filterSearchTracking.searchTerm=d.dealerSearch.searchTerm,this.options.analyticsController.onSearch(!0,d.filterSearchTracking),b.aggregations.dealerId&&b.aggregations.dealerId.length&&b.aggregations.dealerId[0].models.length?(b.dealerLabel=c.pin,this.getEventAggregator().trigger(g.EVENTS.FETCH_DEALERS_RESULTS,a.extend({},b))):(this.set({nearByDealerSearch:!0}),e&&e.geolocation&&(this.options.nearByDealer.status=!0,this.options.nearByDealer.dealer=e,this.options.queryParams.lat=e.geolocation.latitude,this.options.queryParams.lng=e.geolocation.longitude,this.options.queryParams.dealerId="",this.getEventAggregator().trigger("map:zoomChange",{panToLocation:!0}),this.getEventAggregator().trigger(g.EVENTS.FETCH_BATD_CARS,{noBounds:!0}))))},parse:function(b){var c=this.get("callOptions");switch(c&&c.callType||""){case"v2Dealers":this.set("dealerAggregations",b),this.getEventAggregator().trigger(g.EVENTS.FETCH_DEALERS_AGGREGATIONS);break;case"modelCode":this.getEventAggregator().trigger(g.EVENTS.FETCH_MODELNAME,b);break;case"dealerPinClick":case"dealerData":this.renderDealerResponse(b,c);break;default:a.isUndefined(this.get(h.ATTRIBUTES.NEARBY_DEALER_SEARCH))?(this.options.mapParams.mapIdleTriggered||(this.options.nearByDealer.status=!1),this.set({allDealersResult:b})):(b=a.extend(b,{total:0,isDealerData:!0,nearByDealerCount:b.total}),this.set({allDealersResult:b}),this.unset(h.ATTRIBUTES.NEARBY_DEALER_SEARCH)),this.getEventAggregator().trigger(g.EVENTS.FETCH_DEALERS_RESULTS,b)}},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_242_DealerController",["jquery","underscore","backbone","marionette","c_242_ApplicationConstants","c_242_ModelConstants","c_242_ViewConstants","c_242_ModelConstants"],function(a,b,c,d,e,f,g){"use strict";var h=e.APPLICATION,i=g.VIEW,j=f.MODEL;return d.Object.extend({initialize:function(a){this.options=a||{},this.authorValues=this.options.content,this.model=this.options.model,this.firstV2call=!0,this.bindEvents()},bindEvents:function(){this.getEventAggregator().on(h.EVENTS.FETCH_BATD_CARS,b.bind(function(a){this.renderBatdCall(a)},this)).on(h.EVENTS.FETCH_DEALERS_RESULTS,b.bind(function(a){this.onDealersReady(a)},this)).on(h.EVENTS.FETCH_DEALERS_AGGREGATIONS,b.bind(function(a){this.onDealerAggregationsReady(a)},this)).on(h.EVENTS.FETCH_HEADER_TOTAL_COUNT,this.calculateHeaderCount,this)},calculateHeaderCount:function(a){var c,d=this.model.get(j.ATTRIBUTES.DEALER_AGGREGATIONS)||{},e=this.model.get(j.ATTRIBUTES.SEARCH_TYPE)||"",f=0,g={},h=a.dealersInMapBound||[],i=this.options.analytics;d.aggregations&&d.aggregations.dealerId&&!b.isEmpty(h)&&(c=d.aggregations.dealerId,c.length&&b.each(c,b.bind(function(a){h.indexOf(a.value)>-1&&(f+=parseInt(a.count))},this))),g.total=f,e.length&&e===j.CONSTANTS.DEALER?g.isDealerData=!0:this.options.nearByDealer.status?(g.isDealerData=!0,g.total=0,g.nearByDealerCount=f):this.options.queryParams.invalidDealer?(g.isInvalidDealer=!0,this.options.queryParams.lat&&this.options.queryParams.lng&&(g.nearbyDealersForBadDealer=!0)):e===j.CONSTANTS.LOCATION&&a.finalCall&&!this.options.mapParams.mapIdleTriggered&&(i.filterSearchTracking.searchResults=f,i.filterSearchTracking.searchTerm=i.locationSearch.searchTerm,this.options.analyticsController.onSearch(!1,i.filterSearchTracking)),this.getEventAggregator().trigger("fetch:headerInfo",g)},setQueryParams:function(b){var c=this.authorValues.configuration.labels.maxDealerSize||"",d=this.authorValues.configuration.labels.maxDealerSizeMobile||"";return a.param({modelName:this.options.queryParams.modelName,filteringColour:this.options.queryParams.filteringColour,option:this.options.queryParams.option,lat:this.options.queryParams.lat||this.options.mapParams.mapCenter.lat(),long:this.options.queryParams.lng||this.options.mapParams.mapCenter.lng(),geoBoundingBox:b?"":this.options.queryParams.geoBoundingBox,includeResults:"false",dealerSize:this.options.checkDeviceBreakPoint()?c:d,carsPerDealerSize:100,includeCarsByDealer:"true"})},setV2DealerParams:function(){return a.param({modelName:this.options.queryParams.modelName,filteringColour:this.options.queryParams.filteringColour,option:this.options.queryParams.option,includeResults:"false",dealerSize:"-1",carsPerDealerSize:"0",includeCarsByDealer:"true"})},getGradeTypes:function(){var a="";return b.each(this.options.queryParams,function(b,c){c.indexOf("gradeType-")>-1&&b.length&&(a+="gradeType="+b+"&")}),a},getAggregateBy:function(){return"aggregateBy=options&aggregateBy=modelName&aggregateBy=filteringColour&aggregateBy=gradeType&"},setModalCodeQueryParams:function(b){return a.param({modelCode:b.modelCode})},setDealerDataQueryParams:function(c,d){var e={includeResults:"false",includeCarsByDealer:"true",carsPerDealerSize:"100",dealerId:c||this.options.queryParams.dealerId,modelName:this.options.queryParams.modelName,filteringColour:this.options.queryParams.filteringColour,option:this.options.queryParams.option},f=d&&this.options.mapParams.userLocation.lat&&this.options.mapParams.userLocation.lng?{lat:this.options.mapParams.userLocation.lat||0,long:this.options.mapParams.userLocation.lng||0}:{};return a.param(b.extend(f,e))},renderBatdCall:function(b){var c={},d=b&&b.callType||"",e=b&&b.noBounds||!1;switch(d){case"modelCode":c="aggregateBy=modelName&includeResults=false&"+this.setModalCodeQueryParams(b);break;case"v2Dealers":c=this.getAggregateBy()+this.getGradeTypes()+this.setV2DealerParams();break;case"dealerPinClick":c=this.getGradeTypes()+this.setDealerDataQueryParams(b.dealerId,!0);break;case"dealerData":this.options.queryParams.lat=this.options.queryParams.lng=0,this.options.queryParams.dealerId=b.dealerId,c=this.getGradeTypes()+this.setDealerDataQueryParams(),this.options.mapParams.dealerDetailViewOpen&&this.getEventAggregator().trigger("returnToMainView");break;default:if(this.options.mapParams.dealerDetailViewOpen)return!1;this.model.set({searchType:"location"}),c=this.getGradeTypes()+this.setQueryParams(e)}if("dealerData"===d&&!this.options.queryParams.dealerId.length)return void this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noResults);a(window).scrollTop(0),this.getEventAggregator().trigger("make:call",{callOptions:b,queryParams:c})},onDealersReady:function(a){var c=a||{},d=c,e={dealers:c.aggregations.dealerId,total:c.total,dealerLabel:c.dealerLabel};c&&e.dealers&&e.dealers.length?(this.model.get(j.ATTRIBUTES.SEARCH_TYPE)===j.CONSTANTS.LOCATION?d.total=c.total:this.model.get(j.ATTRIBUTES.SEARCH_TYPE)===j.CONSTANTS.DEALER&&(e.isDealerData=!0),this.getEventAggregator().trigger("dealerResults:rendered",b.extend(e,a))):this.getEventAggregator().trigger("fetch:dealersResultView","back-to-results"===this.options.mapParams.resultCallSource||this.options.mapParams.mapIdleTriggered?this.options.noResultsForZoomMessage:this.options.noResults)},onDealerAggregationsReady:function(a){var c,d,e=this.model.get(j.ATTRIBUTES.DEALER_AGGREGATIONS)||{},f=e.aggregations||{};f.dealerId&&f.dealerId.length?(c={modelFilter:f.modelName||[],gradeFilter:f.gradeType||[],colourFilter:f.filteringColour||[],optionFilter:f.options||[]},this.model.set({allV2Dealers:f.dealerId}),this.options.noAggregations.noResults=!1,Object.keys(this.options.allDealers).length&&Object.keys(this.options.allAggregations).length?(this.firstV2call&&this.getEventAggregator().trigger("fetch:dealersResultView",b.extend({},this.options.noLocation,{noLocation:!0})),this.options.queryParams.dealerId.length&&(this.options.checkDeviceBreakPoint()||this.firstV2call)&&(this.model.set({searchType:"dealer"}),this.getEventAggregator().trigger(h.EVENTS.FETCH_BATD_CARS,{dealerId:this.options.queryParams.dealerId,callType:"dealerData"}))):(this.options.checkDeviceBreakPoint()||this.firstV2call)&&this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noResults)):(c=a&&a.error||!this.options.allAggregations?{modelFilter:[],gradeFilter:[],colourFilter:[],optionFilter:[]}:{modelFilter:f.modelName.length?f.modelName:this.getInventoryAggregations(this.options.allAggregations.modelName),gradeFilter:f.gradeType.length?f.gradeType:this.getInventoryAggregations(this.options.allAggregations.gradeType),colourFilter:f.filteringColour.length?f.filteringColour:this.getInventoryAggregations(this.options.allAggregations.filteringColour),optionFilter:f.options.length?f.options:this.getInventoryAggregations(this.options.allAggregations.option)},this.model.unset(j.ATTRIBUTES.ALL_V2DEALERS),this.options.queryParams.invalidDealer=!1,this.options.noAggregations.noResults=!0,(this.options.checkDeviceBreakPoint()||this.firstV2call)&&(this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noResults),(this.model.get(j.ATTRIBUTES.SEARCH_TYPE)===j.CONSTANTS.DEALER||this.options.queryParams.dealerId)&&(d=this.options.allDealers[this.options.queryParams.dealerId],d&&(this.options.queryParams.lat=d.geolocation.latitude,this.options.queryParams.lng=d.geolocation.longitude,this.options.queryParams.dealerName=d.name,this.options.queryParams.dealerId=""),this.model.get(j.ATTRIBUTES.SEARCH_TYPE)||this.model.set({searchType:"dealer"})))),this.firstV2call||this.options.checkDeviceBreakPoint()&&!this.options.queryParams.dealerId&&!this.options.queryParams.lat&&!this.options.queryParams.lng?(this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noLocation),this.getEventAggregator().trigger(i.EVENTS.RENDER_MAP),this.firstV2call=!1,this.options.queryParams.dealerId.length||this.model.unset(j.ATTRIBUTES.SEARCH_TYPE)):this.options.checkDeviceBreakPoint()&&b.isUndefined(this.model.get(j.ATTRIBUTES.SEARCH_TYPE))&&this.getEventAggregator().trigger("renderCluster"),this.getEventAggregator().trigger("filterResults:rendered",c)},getInventoryAggregations:function(a){return Object.keys(this.options.allAggregations).length&&a.options.length?a.options:[]},getEventAggregator:function(){return this.options.eventAggregator}})}),define("hbars!/components/c_242/html/dealersResultView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='\n    <div class="no-results">\n        <div class="no-results-heading">'+w((c=a&&a.dealersResultView,c=null==c||!1===c?c:c.noLocationTitle,typeof c===v?c.apply(a):c))+'</div>\n        <div class="no-results-description">'+w((c=a&&a.dealersResultView,c=null==c||!1===c?c:c.noLocationMessage,typeof c===v?c.apply(a):c))+"</div>\n    </div>\n"}function g(a,b){var d,e="";return e+="\n    ",d=c.if.call(a,(d=a&&a.dealersResultView,d=null==d||!1===d?d:d.dealerList,null==d||!1===d?d:d.length),{hash:{},inverse:x.noop,fn:x.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function h(a,b){var d,e="";return e+='\n        <div class="dealer-header-info">'+w((d=a&&a.dealersResultView,d=null==d||!1===d?d:d.resultTitle,typeof d===v?d.apply(a):d))+'</div>\n        <div class="results-section">\n             <div class="result-loader"></div>\n            ',d=c.each.call(a,(d=a&&a.dealersResultView,null==d||!1===d?d:d.dealerList),{hash:{},inverse:x.noop,fn:x.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n        </div>\n    "}function i(a,b){var d,e,f="";return f+='\n            <div class="dealer-list" data-dealer-id="',(e=c.dealerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.dealerId,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'">\n                <div class="dealer-header">\n                    <div class="dealer-name">\n                        <span class="dealer-type"><span class="label">',(e=c.pinKey)?d=e.call(a,{hash:{},data:b}):(e=a&&a.pinKey,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</span></span>\n                        <div class="dealer-name-details">\n                            <span class="name">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</span>\n                            <span class="dealer-count-message">',(e=c.countMessage)?d=e.call(a,{hash:{},data:b}):(e=a&&a.countMessage,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+"</span>\n                        </div>\n                        ",d=c.if.call(a,a&&a.distance,{hash:{},inverse:x.noop,fn:x.program(6,j,b),data:b}),(d||0===d)&&(f+=d),f+='\n                        <div class="dealer-address">',(e=c.address)?d=e.call(a,{hash:{},data:b}):(e=a&&a.address,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</div>\n                    </div>\n                    <span class="more-info">',(e=c.dealerDetailMoreLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.dealerDetailMoreLabel,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</span>\n                    <span class="less-info">',(e=c.dealerDetailsLessLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.dealerDetailsLessLabel,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</span>\n                    <div class="dealer-more-info">\n                        <a class="dealer-phone" href="tel:',(e=c.phone)?d=e.call(a,{hash:{},data:b}):(e=a&&a.phone,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'">',(e=c.phone)?d=e.call(a,{hash:{},data:b}):(e=a&&a.phone,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</a>\n                        <span class="dealer-website"><a href="',(e=c.dealerLink)?d=e.call(a,{hash:{},data:b}):(e=a&&a.dealerLink,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'" class="dealer-link" target="_blank">',(e=c.dealerSiteLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.dealerSiteLabel,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</a></span>\n                        <a href="',(e=c.directionLink)?d=e.call(a,{hash:{},data:b}):(e=a&&a.directionLink,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'" target="_blank" class="dealer-direction">',(e=c.directionLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.directionLabel,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</a>\n                    </div>\n                </div>\n                <div class="dealer-cars">\n                    ',d=c.each.call(a,a&&a.cars,{hash:{},inverse:x.noop,fn:x.programWithDepth(8,k,b,a),data:b}),(d||0===d)&&(f+=d),f+="\n\n                    ",d=c.if.call(a,a&&a.showAllClicked,{hash:{},inverse:x.program(20,r,b),fn:x.program(18,q,b),data:b}),(d||0===d)&&(f+=d),f+="\n                </div>\n            </div>\n            "}function j(a,b){var d,e,f="";return f+='\n                            <span class="dealer-km-distance">',(e=c.distance)?d=e.call(a,{hash:{},data:b}):(e=a&&a.distance,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d),(e=c.distanceUnits)?d=e.call(a,{hash:{},data:b}):(e=a&&a.distanceUnits,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+"</span>\n                        "}function k(a,b,d){var e,f,g="";return g+='\n                    <div class="cars-list ',e=c.if.call(a,a&&a.isHidden,{hash:{},inverse:x.noop,fn:x.program(9,l,b),data:b}),(e||0===e)&&(g+=e),g+='">\n                        <div class="car-container">\n                            <div tabindex="0" class="car-header">',(f=c.carName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carName,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+" ",(f=c.carGrade)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carGrade,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'\n                            </div>\n                            <div class="car-content">\n                                <div class="image-container">\n                                <img tabindex="0" class="small-image" alt="',(f=c.carName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carName,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+" ",(f=c.carGrade)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carGrade,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'" src="',(f=c.carMobileImage)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carMobileImage,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"></img>\n                                <img tabindex="0" class="large-image" alt="',(f=c.carName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carName,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+" ",(f=c.carGrade)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carGrade,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'" src="',(f=c.carDesktopImage)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carDesktopImage,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"></img>\n                                    <div class="car-details car-info">\n                                        <div class="helios-tooltip set-width">\n                                            <span class="tool-tip-title">',(f=c.details)?e=f.call(a,{hash:{},data:b}):(f=a&&a.details,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'</span>\n                                            <a class="tooltip-button"></a>\n                                            <div class="tooltip-content" data-open="false">\n                                                <span class="tooltip-close"></span>\n                                                <p>',(f=c.tooltipMessage)?e=f.call(a,{hash:{},data:b}):(f=a&&a.tooltipMessage,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+"</p>\n                                            </div>\n                                        </div>\n                                        ",e=c.if.call(a,a&&a.newVersionLabel,{hash:{},inverse:x.noop,fn:x.program(11,m,b),data:b}),(e||0===e)&&(g+=e),g+='\n                                    </div>\n                                </div>\n                                <div class="car-description">',(f=c.description)?e=f.call(a,{hash:{},data:b}):(f=a&&a.description,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'</div>\n                                <div class="car-details-container">\n                                    <div class="car-accessories">\n                                        ',e=c.each.call(a,a&&a.parts,{hash:{},inverse:x.noop,fn:x.program(13,n,b),data:b}),(e||0===e)&&(g+=e),g+="\n                                    </div>\n                                    ",e=c.if.call(a,(e=a&&a.packsAndAccessories,null==e||!1===e?e:e.length),{hash:{},inverse:x.noop,fn:x.program(15,o,b),data:b}),(e||0===e)&&(g+=e),g+='\n                                    <button class="btn-alpha submit-car"\n                                        data-dealer-id="'+w((e=d&&d.dealerId,typeof e===v?e.apply(a):e))+'"\n                                        data-dealer-name="'+w((e=d&&d.dealerName,typeof e===v?e.apply(a):e))+'"\n                                        data-model-code="',(f=c.modelCode)?e=f.call(a,{hash:{},data:b}):(f=a&&a.modelCode,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"\n                                        data-full-colour="',(f=c.fullColour)?e=f.call(a,{hash:{},data:b}):(f=a&&a.fullColour,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"\n                                        data-engine-name="',(f=c.engineName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.engineName,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"\n                                        data-grade-name="',(f=c.carGrade)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carGrade,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"\n                                        data-drive-train="',(f=c.driveTrain)?e=f.call(a,{hash:{},data:b}):(f=a&&a.driveTrain,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"\n                                        data-transmission-name="',(f=c.transmissionName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.transmissionName,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"\n                                        data-stock-type="',(f=c.stockType)?e=f.call(a,{hash:{},data:b}):(f=a&&a.stockType,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"\n                                        data-model-name="',(f=c.modelName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.modelName,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"\n                                        data-link="',(f=c.link)?e=f.call(a,{hash:{},data:b}):(f=a&&a.link,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'">',(f=c.button)?e=f.call(a,{hash:{},data:b}):(f=a&&a.button,e=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+"</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    "}function l(a,b){return"hidden"}function m(a,b){var d,e,f="";return f+='\n                                        <span class="new-version-label">',(e=c.newVersionLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.newVersionLabel,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+"</span>\n                                        "}function n(a,b){var c="";return c+='\n                                            <span class="accessories-item">'+w(typeof a===v?a.apply(a):a)+"</span>\n                                        "}function o(a,b){var d,e,f="";return f+='\n                                        <span class="packs-accessories" >',(e=c.accessoryLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.accessoryLabel,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'</span>\n                                        <div class="packs-accessories-container">\n                                            ',d=c.each.call(a,a&&a.packsAndAccessories,{hash:{},inverse:x.noop,fn:x.program(16,p,b),data:b}),(d||0===d)&&(f+=d),
f+="\n                                        </div>\n                                    "}function p(a,b){var d,e,f="";return f+='\n                                            <span class="packs-accessories-list" >',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+"</span>\n                                            "}function q(a,b){return""}function r(a,b){var d,e,f,g="";return g+="\n                        ",e=c.ifCond||a&&a.ifCond,f={hash:{},inverse:x.noop,fn:x.program(21,s,b),data:b},d=e?e.call(a,a&&a.authorCount,"<",a&&a.count,f):y.call(a,"ifCond",a&&a.authorCount,"<",a&&a.count,f),(d||0===d)&&(g+=d),g+="\n                    "}function s(a,b){var d,e,f="";return f+='\n                            <button class="show-all">\n                                <span class="show-all-label">',(e=c.showAll)?d=e.call(a,{hash:{},data:b}):(e=a&&a.showAll,d=typeof e===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+"</span>\n                            </button>\n                        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var t,u="",v="function",w=this.escapeExpression,x=this,y=c.helperMissing;return u+=" ",t=c.if.call(b,(t=b&&b.dealersResultView,null==t||!1===t?t:t.noResults),{hash:{},inverse:x.program(3,g,e),fn:x.program(1,f,e),data:e}),(t||0===t)&&(u+=t),u+="\n"})}),define("c_242_DealersResultView",["jquery","underscore","backbone","marionette","hbars!/components/c_242/html/dealersResultView","c_242_ViewConstants","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d,e,f,g,h){"use strict";var i=f.VIEW,j=g.APPLICATION,k=h.MODEL;return c.Marionette.LayoutView.extend({template:e,ui:{showAll:".show-all",moreInfo:".more-info",lessInfo:".less-info",accessories:".packs-accessories",showTip:".tooltip-button",hideTip:".tooltip-close",dealerPan:".dealer-type",submitCar:".submit-car",dealerPhone:".dealer-phone",dealerItems:".dealer-phone, .dealer-link, .dealer-direction"},events:{"click @ui.showAll":"showAllCarsForSelectedDealer","click @ui.moreInfo":"showInfo","click @ui.lessInfo":"hideInfo","click @ui.accessories":"showHideAccessories","click @ui.showTip":"showTooltip","click @ui.hideTip":"closeTooltip","click @ui.submitCar":"submitCar","click @ui.dealerItems":"callDealerActions"},initialize:function(c){var d,e;this.options=c||{},this.initRegions(),this.getEventAggregator().on("fetch:dealersResultView",b.bind(function(b){e=this.options.model.get("dealersResultView"),d=!1,b?(d=b.noLocation&&!this.options.checkDeviceBreakPoint()&&!this.options.mapParams.dealerDetailViewOpen&&!this.options.noAggregations.noResults,this.options.model.set({dealersResultView:b})):e.dealerLabel||(this.options.dealerModel.get(k.ATTRIBUTES.SEARCH_TYPE)===k.CONSTANTS.LOCATION?this.options.mapParams.mapIdleTriggered?this.getEventAggregator().trigger("renderCluster",{finalCall:!0}):this.getEventAggregator().trigger("renderCluster",{searchType:"location",finalCall:!0}):this.options.dealerModel.get(k.ATTRIBUTES.SEARCH_TYPE)===k.CONSTANTS.DEALER&&"dealerPinClick"!==this.options.dealerModel.get("callSource")?this.getEventAggregator().trigger(i.EVENTS.RENDER_MAP):this.getEventAggregator().trigger("getInBoundMarkers")),a(".header-info").toggle(this.options.checkDeviceBreakPoint()||!b||this.options.queryParams.invalidDealer),this.render().renderSearchBox(d),this.getEventAggregator().trigger(i.EVENTS.HIDE_RESULT_LOADER),this.options.checkDeviceBreakPoint()&&this.getEventAggregator().trigger(i.EVENTS.HIDE_FILTER_LOADER),this.options.nearByDealer.status&&this.options.nearByDealer.dealer.dealerId&&(this.options.queryParams.dealerId=this.options.nearByDealer.dealer.dealerId)},this)).on(i.EVENTS.SHOW_RESULT_LOADER,this.showResultLoading,this).on(i.EVENTS.HIDE_RESULT_LOADER,this.hideResultLoading,this)},callDealerActions:function(b){var c,d=a(b.target),e=d.parents(".dealer-list").data("dealer-id"),f=d.attr("class");switch(f){case"dealer-phone":c=j.ANALYTICS.DEALERACTION.PHONE;break;case"dealer-link":c=j.ANALYTICS.DEALERACTION.WEBSITE;break;case"dealer-direction":c=j.ANALYTICS.DEALERACTION.DIRECTIONS}this.options.analyticsController.onDealerInteraction(c,e)},submitCar:function(c){var d=a(c.target),e=["dealerId","modelName","link","stockType","modelCode"],f={};f.buttonText=d.text(),b.each(e,function(a){f[a]=d.data(a)}),c&&c.preventDefault&&c.preventDefault(),this.options.analyticsController.onBookTestDriveClick(f),this.getEventAggregator().trigger("updateStorageForForm",a(c.currentTarget))},showAllCarsForSelectedDealer:function(c){var d,e,f=a(c.target);"show-all"===f[0].className?(d=f.parent(),e=f.find(".show-all-label")):(e=f,d=f.parents(".dealer-cars"),f=f.parent()),this.options.analyticsController.onAccordionExpansion(f.text()),e.addClass("ajax-btn-loading").delay(1e3).queue(b.bind(function(a){d.find(".hidden").removeClass("hidden"),f.remove(),a()},this))},showTooltip:function(b){var c=a(b.target),d=c.parents(".car-details"),e=d.find(".helios-tooltip, .tooltip-button");e.toggleClass("active"),e.hasClass("active")?d.find(".tooltip-content").attr("data-open","true"):d.find(".tooltip-content").attr("data-open","false")},closeTooltip:function(b){a(b.target).parents(".car-details").find(".helios-tooltip, .tooltip-button").removeClass("active").find(".tooltip-content").attr("data-open","false")},showInfo:function(b){var c=a(b.target),d=c.parent().find(".dealer-more-info"),e=c.parents(".dealer-list").data("dealer-id");d.addClass("show"),c.addClass("hidden"),c.parent().find(".less-info").addClass("show"),this.options.analyticsController.onDealerInteraction(j.ANALYTICS.DEALERACTION.SHOWMORE,e),d[0].style.maxHeight||(d[0].style.maxHeight=d[0].scrollHeight+"px")},hideInfo:function(b){var c=a(b.target),d=c.parent().find(".dealer-more-info");d.removeClass("show"),c.removeClass("show"),c.parent().find(".more-info").removeClass("hidden"),d[0].style.maxHeight&&(d[0].style.maxHeight=null)},showResultLoading:function(){a(".result-loader").show()},hideResultLoading:function(){a(".result-loader").hide()},showHideAccessories:function(b){var c=a(b.target),d=c.next();c.toggleClass("expand"),c.next().toggleClass("show"),d[0].style.maxHeight=d[0].style.maxHeight?null:d[0].scrollHeight+"px",!this.options.checkDeviceBreakPoint()&&c.hasClass("expand")&&this.options.analyticsController.onAccordionExpansion(c.text())},initRegions:function(){this.addRegions({noLocationView:".no-location-view"})},renderSearchBox:function(b){b&&(a(".no-location-view").removeClass("hidden"),a(".dealer-result-section").addClass("hidden"))},onRender:function(){return a(window).trigger("scroll"),this.options.checkDeviceBreakPoint()?a(this.ui.dealerPhone).attr("tabindex","-1"):(a(".no-location-view").addClass("hidden"),a(".dealer-result-section").removeClass("hidden")),this},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_242_DealersResultController",["jquery","underscore","backbone","marionette","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d,e,f){"use strict";e.APPLICATION;return d.Object.extend({initialize:function(a){this.options=a||{},this.dealersResultModel=this.options.dealersResultModel,this.mainModel=this.options.mainModel,this.authorValues=this.options.configData,this.bindEvents()},bindEvents:function(){this.getEventAggregator().on("fetch:headerInfo",b.bind(function(a){this.mainModel.set({headerViewData:this.renderMainViewData(a)})},this)).on("dealerResults:rendered",b.bind(function(c){this.getdealersResultSectionValues(c),a(".large-image, .small-image").on("error",b.bind(this.loadPlaceholderImage,this))},this)).on("fetch:dealerViewData",b.bind(function(c){this.dealersResultModel.set({dealerViewData:this.renderDealerViewData(c)}),this.getEventAggregator().trigger("render:dealerViewData"),a(".large-image, .small-image").on("error",b.bind(this.loadPlaceholderImage,this))},this)).on("updateStorageForForm",this.handleCtaClick,this)},loadPlaceholderImage:function(b){var c=a(b.target),d=c.hasClass("large-image")?this.options.largePlaceholderImage:this.options.smallPlaceholderImage;c.attr("src",d.replace(/\{0\}/g,this.options.heliosObject.config.brand.toLowerCase())),c.off("error")},renderMainViewData:function(a){var b,c,d,e=this.authorValues,f=e.configuration.labels;return a.isInvalidDealer?(c=f.delearNotFoundLineOne,d=f.delearNotFoundLineTwo||""):a.isDealerData?(c=f.matchDelearLineOne,d=f.matchDelearLineTwo||""):(c=f.matchHeaderLineOne,d=f.matchHeaderLineTwo||""),b=f.positionOfmatches.split(",")[1].split("-"),b="text"===b[0]&&"left"===b[1],{total:{count:a.isInvalidDealer?"":a.total||0,textLabel1:c,textLabel2:d},leftPos:b,invalidDealerStatus:!!a.isInvalidDealer,status:a.isInvalidDealer||this.options.nearByDealer.status&&a.nearByDealerCount,nearByDealerCount:a.isInvalidDealer?a.total:a.nearByDealerCount,nearByDealerLineOne:a.isInvalidDealer?a.nearbyDealersForBadDealer?f.nearbyDealersMatchLineOne:f.matchHeaderLineOne:f.nearbyDealersMatchLineOne,nearByDealerLineTwo:a.isInvalidDealer?a.nearbyDealersForBadDealer?f.nearbyDealersMatchLineTwo||"":f.matchHeaderLineTwo||"":f.nearbyDealersMatchLineTwo||""}},renderDealerViewData:function(a){var b,c,d=this.authorValues,e=[],f={};return c=a,b=this.getDealerDetailfromConfig(c.value),b.dealerId&&(f.dealerId=c.value,f.dealerName=this.options.allDealers[c.value].name||"",f.backToResults=d.configuration.labels.backToResults||"",f.dealerLabel=a.dealerLabel,d.configuration.labels.dealerDetailsVehiclesLabel&&(f.countMessage="("+d.configuration.labels.dealerDetailsVehiclesLabel.replace(/\{0\}/g,c.count)+")"),f.count=parseInt(c.models.length),f.distanceUnits=d.distanceUnitsLabel||"",f.distance=this.options.mapParams.userLocation.lat&&this.options.mapParams.userLocation.lng||this.options.nearByDealer.status?this.roundOffPlaces(c.distance,1):null,f.authorCount=this.options.checkDeviceBreakPoint()?parseInt(d.configuration.labels.summaryMaxVehiclePerDealer||""):parseInt(d.configuration.labels.summaryMinVehiclePerDealer||""),f=this.getDealerContactDetails(f,b),e=this.renderCarInfo(c.models,d),f.cars=this.hideExtraCars(this.sortModelCars(e),f.authorCount)),f},getdealersResultSectionValues:function(a){this.dealersResultModel.set({dealersResultView:this.renderdealersResultViewData(a)}),this.getEventAggregator().trigger("fetch:dealersResultView")},renderdealersResultViewData:function(a){var c=this.authorValues,d=[],e={},f=this,g=!1,h=[];return h=b.filter(a.dealers,b.bind(function(a){return!b.isEmpty(f.getDealerDetailfromConfig(a.value))},this)),h.length?b.each(h,b.bind(function(b,f){var g={},h=[];g.count=b.models?parseInt(b.models.length):0,g.authorCount=this.options.checkDeviceBreakPoint()?parseInt(c.configuration.labels.summaryMaxVehiclePerDealer||""):parseInt(c.configuration.labels.summaryMinVehiclePerDealer||""),g.distance=this.options.mapParams.userLocation.lat&&this.options.mapParams.userLocation.lng||this.options.nearByDealer.status?this.roundOffPlaces(b.distance,1):null,g.distanceUnits=c.distanceUnitsLabel||"",g.showAll=c.configuration.labels.summaryShowAll||"",g.showAllClicked=!0,g.dealerId=b.value,g.dealerName=this.options.allDealers[b.value].name||"",g=this.getDealerContactDetails(g,this.getDealerDetailfromConfig(b.value)),g.pinKey=void 0!==a.dealerLabel?a.dealerLabel:this.options.mapPinKey[f],h=this.sortModelCars(this.renderCarInfo(b.models,c)),g.cars=h,c.configuration.labels.dealerDetailsVehiclesLabel&&(g.countMessage="("+c.configuration.labels.dealerDetailsVehiclesLabel.replace(/\{0\}/g,b.count)+")"),a.isDealerData&&!this.options.nearByDealer.status||(g.cars=this.hideExtraCars(h,g.authorCount),g.showAllClicked=!1),d.push(g),e[g.dealerId]=g.pinKey},this)):(g=!0,this.mainModel.set({headerViewData:this.options.noVehiclesTotal})),{resultTitle:c.configuration.labels.resultTitle?c.configuration.labels.resultTitle.replace(/\{0\}/g,d.length):"",dealerList:[].concat(d),resultsDealerArray:e,noResults:g,dealerLabel:a.dealerLabel,noLocationTitle:c.configuration.labels.noResultTitle||"",noLocationMessage:c.configuration.labels.noResultMessage||""}},roundOffPlaces:function(a,b){return+(Math.round(a+"e+"+b)+"e-"+b)},sortModelCars:function(c){if(c&&c.length){var d=a.map(a("select.modelName option"),function(a){return a.value});return""===d[0]&&d.splice(0,1),c.sort(b.bind(function(a,b){return d.indexOf(a.carName)>d.indexOf(b.carName)?1:d.indexOf(a.carName)<d.indexOf(b.carName)?-1:a.carGrade.localeCompare(b.carGrade,this.options.language)},this)),c}},hideExtraCars:function(a,c){return a&&a.length&&b.map(a,function(a,b){a.isHidden=b>=c}),a},getDealerContactDetails:function(a,b){var c=[],d=[];return a.name=b.name,b.address.addressLine1&&c.push(b.address.addressLine1),b.address.addressLine2&&c.push(b.address.addressLine2),b.address.city&&c.push(b.address.city),b.address.postalCode&&d.push(b.address.postalCode),b.address.country&&d.push(b.address.country),a.address=c.join(", ")+" "+d.join(", "),a.phone=b.contact.phone||"",a.dealerLink=b.contact.website||"",a.directionLink=this.options.dealersResultModel.get("googleMap")+[b.geolocation.latitude,b.geolocation.longitude].join(","),a.directionLabel=this.authorValues.configuration.labels.directionLabel||"",a.dealerSiteLabel=this.authorValues.configuration.labels.dealerSiteLabel||"",a.dealerDetailMoreLabel=this.authorValues.configuration.labels.dealerDetailMoreLabel||"",a.dealerDetailsLessLabel=this.authorValues.configuration.labels.dealerDetailsLessLabel||"",a},getDealerDetailfromConfig:function(a){return this.options.allDealers[a]||{}},renderCarInfo:function(a,c){var d=[];return a&&b.each(a,b.bind(function(a,e){var f,g={},h=[];g.carName=a.model.name,g.modelCode=a.model.modelCode,g.carGrade=a.grade.name,g.fullColour=a.fullColour.name,g.engineName=a.engineName,g.driveTrain=a.driveTrain,g.transmissionName=a.transmission,g.carDesktopImage=a.picturesOutside.desktopHiRes,g.carMobileImage=a.picturesOutside.mobileHiRes,g.newVersionLabel=a.activeModel?"":c.configuration.labels.newVersionAvailable||"",g.description=c.configuration.labels.summaryImage||"",g.isHidden=!1,g.modelName=a.model.name,g.stockType=a.stockType,g.packsAndAccessories=[],"testDrive"===a.stockType?(g.button=c.cta&&c.cta.bookATestDriveCTA?c.cta.bookATestDriveCTA.ctaLabel:"",g.link=c.cta&&c.cta.bookATestDriveCTA?c.cta.bookATestDriveCTA.ctaLink:"",g.tooltipMessage=c.configuration.labels.testDriveModelTooltip||"",g.details=c.configuration.labels.testDriveModel||""):(g.button=c.cta&&c.cta.bookAViewingCTA?c.cta.bookAViewingCTA.ctaLabel:"",g.link=c.cta&&c.cta.bookAViewingCTA?c.cta.bookAViewingCTA.ctaLink:"",g.tooltipMessage=c.configuration.labels.displayCarModelTooltip||"",g.details=c.configuration.labels.displayCarModel||""),f=a.options?[].concat(a.options).slice(0,5):[],f.length&&(g.packsAndAccessories=b.filter(f,function(a){return a.name.length>0}),g.accessoryLabel=c.configuration.labels.summaryPacksAndAccessoriesLabel||""),a.fullColour.name&&h.push(a.fullColour.name),a.bodyStyle&&h.push(a.bodyStyle),a.driveTrain&&h.push(a.driveTrain),a.transmission&&h.push(a.transmission),g.parts=h,d.push(g)},this)),d},handleCtaClick:function(a){var c=["dealerId","dealerName","modelCode","modelName","fullColour","engineName","gradeName","driveTrain","transmissionName"];b.each(c,b.bind(function(b,c){this.options.storageManager.saveItem(b,a.data(b)||"",{mode:"localStorage"})},this)),window.location.href=a.data("link")},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_242_DealersResultModel",["underscore","backbone","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d){"use strict";return b.Model.extend({defaults:{dealersResultView:{},dealerViewData:{},googleMap:"https://www.google.co.in/maps?q="},initialize:function(a){this.options=a||{}},getEventAggregator:function(){return this.options.eventAggregator}})}),define("hbars!/components/c_242/html/dealerView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n<div class="dealer-header-info">\n    <button class="return-cta">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.backToResults,typeof d===o?d.apply(a):d))+'</button>\n</div>\n<div class="dealer-list" data-dealer-id="'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.dealerId,typeof d===o?d.apply(a):d))+'">\n    <div class="dealer-header">\n        <div class="dealer-name">\n            <span class="dealer-type"><span class="label">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.dealerLabel,typeof d===o?d.apply(a):d))+'</span></span>\n            <div class="dealer-name-details">\n                <span class="name">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.name,typeof d===o?d.apply(a):d))+'</span>\n                <span class="dealer-count-message">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.countMessage,typeof d===o?d.apply(a):d))+"</span>\n            </div>\n            ",d=c.if.call(a,(d=a&&a.dealerViewData,null==d||!1===d?d:d.distance),{hash:{},inverse:q.noop,fn:q.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+='\n        </div>\n        <div class="dealer-address">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.address,typeof d===o?d.apply(a):d))+'</div>\n        <span class="more-info">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.dealerDetailMoreLabel,typeof d===o?d.apply(a):d))+'</span>\n        <span class="less-info">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.dealerDetailsLessLabel,typeof d===o?d.apply(a):d))+'</span>\n        <div class="dealer-more-info">\n            <a class="dealer-phone" href="tel:'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.phone,typeof d===o?d.apply(a):d))+'">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.phone,typeof d===o?d.apply(a):d))+'</a>\n            <span class="dealer-website"><a href="'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.dealerLink,typeof d===o?d.apply(a):d))+'" class="dealer-link" target="_blank">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.dealerSiteLabel,typeof d===o?d.apply(a):d))+'</a></span>\n            <a href="'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.directionLink,typeof d===o?d.apply(a):d))+'" target="_blank" class="dealer-direction">'+p((d=a&&a.dealerViewData,d=null==d||!1===d?d:d.directionLabel,typeof d===o?d.apply(a):d))+'</a>\n        </div>\n    </div>\n    <div class="dealer-cars">\n        ',d=c.each.call(a,(d=a&&a.dealerViewData,null==d||!1===d?d:d.cars),{hash:{},inverse:q.noop,fn:q.programWithDepth(4,h,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n    </div>\n</div>\n"}function g(a,b){var c,d="";return d+='\n                <span class="dealer-km-distance">'+p((c=a&&a.dealerViewData,c=null==c||!1===c?c:c.distance,typeof c===o?c.apply(a):c))+p((c=a&&a.dealerViewData,c=null==c||!1===c?c:c.distanceUnits,typeof c===o?c.apply(a):c))+"</span>\n            "}function h(a,b,d){var e,f,g="";return g+='\n        <div class="cars-list">\n            <div class="car-container">\n                <div class="car-header">',(f=c.carName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carName,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+" ",(f=c.carGrade)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carGrade,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'\n                </div>\n                <div class="car-content">\n                    <div class="image-container">\n                    <img class="small-image" alt="',(f=c.carName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carName,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+" ",(f=c.carGrade)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carGrade,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'" src="',(f=c.carMobileImage)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carMobileImage,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"></img>\n                    <img class="large-image" alt="',(f=c.carName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carName,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+" ",(f=c.carGrade)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carGrade,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'" src="',(f=c.carDesktopImage)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carDesktopImage,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"></img>\n                        <div class="car-details car-info">\n                            <div class="helios-tooltip set-width">\n                                <span class="tool-tip-title">',(f=c.details)?e=f.call(a,{hash:{},data:b}):(f=a&&a.details,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'</span>\n                                <a class="tooltip-button"></a>\n                                <div class="tooltip-content" data-open="false">\n                                    <span class="tooltip-close"></span>\n                                    <p>',(f=c.tooltipMessage)?e=f.call(a,{hash:{},data:b}):(f=a&&a.tooltipMessage,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+"</p>\n                                </div>\n                            </div>\n                            ",e=c.if.call(a,a&&a.newVersionLabel,{hash:{},inverse:q.noop,fn:q.program(5,i,b),data:b}),(e||0===e)&&(g+=e),g+='\n                        </div>\n                    </div>\n                    <div class="car-description">',(f=c.description)?e=f.call(a,{hash:{},data:b}):(f=a&&a.description,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'</div>\n                    <div class="car-details-container">\n                        <div class="car-accessories">\n                            ',e=c.each.call(a,a&&a.parts,{hash:{},inverse:q.noop,fn:q.program(7,j,b),data:b}),(e||0===e)&&(g+=e),g+="\n                        </div>\n                        ",e=c.if.call(a,(e=a&&a.packsAndAccessories,null==e||!1===e?e:e.length),{hash:{},inverse:q.noop,fn:q.program(9,k,b),data:b}),(e||0===e)&&(g+=e),g+='\n                        <button class="btn-alpha submit-car"\n                        data-dealer-id="'+p((e=d&&d.dealerViewData,e=null==e||!1===e?e:e.dealerId,typeof e===o?e.apply(a):e))+'"\n                        data-dealer-name="'+p((e=d&&d.dealerViewData,e=null==e||!1===e?e:e.dealerName,typeof e===o?e.apply(a):e))+'"\n                        data-model-code="',(f=c.modelCode)?e=f.call(a,{hash:{},data:b}):(f=a&&a.modelCode,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"\n                        data-full-colour="',(f=c.fullColour)?e=f.call(a,{hash:{},data:b}):(f=a&&a.fullColour,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"\n                        data-engine-name="',(f=c.engineName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.engineName,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"\n                        data-grade-name="',(f=c.carGrade)?e=f.call(a,{hash:{},data:b}):(f=a&&a.carGrade,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"\n                        data-drive-train="',(f=c.driveTrain)?e=f.call(a,{hash:{},data:b}):(f=a&&a.driveTrain,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"\n                        data-transmission-name="',(f=c.transmissionName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.transmissionName,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"\n                        data-stock-type="',(f=c.stockType)?e=f.call(a,{hash:{},data:b}):(f=a&&a.stockType,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"\n                        data-model-name="',(f=c.modelName)?e=f.call(a,{hash:{},data:b}):(f=a&&a.modelName,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'"\n                        data-link="',(f=c.link)?e=f.call(a,{hash:{},data:b}):(f=a&&a.link,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'">',(f=c.button)?e=f.call(a,{hash:{},data:b}):(f=a&&a.button,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+"</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        "}function i(a,b){var d,e,f="";return f+='\n                                <span class="new-version-label">',(e=c.newVersionLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.newVersionLabel,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</span>\n                            "}function j(a,b){var c="";return c+='\n                                <span class="accessories-item">'+p(typeof a===o?a.apply(a):a)+"</span>\n                            "}function k(a,b){var d,e,f="";return f+='\n                            <span class="packs-accessories" >',(e=c.accessoryLabel)?d=e.call(a,{hash:{},data:b}):(e=a&&a.accessoryLabel,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+'</span>\n                            <div class="packs-accessories-container">\n                                ',d=c.each.call(a,a&&a.packsAndAccessories,{hash:{},inverse:q.noop,fn:q.program(10,l,b),data:b}),(d||0===d)&&(f+=d),f+="\n                            </div>\n                        "}function l(a,b){var d,e,f="";return f+='\n                                <span class="packs-accessories-list" >',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</span>\n                                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n="",o="function",p=this.escapeExpression,q=this;return n+="\n",m=c.if.call(b,b&&b.dealerViewData,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(m||0===m)&&(n+=m),n+="\n"})}),define("c_242_DealerView",["jquery","underscore","backbone","marionette","hbars!/components/c_242/html/dealerView","c_242_ViewConstants","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d,e,f,g,h){"use strict";var i=(f.VIEW.FILTER,g.APPLICATION);h.MODEL;return c.Marionette.ItemView.extend({template:e,ui:{moreInfo:".more-info",lessInfo:".less-info",accessories:".packs-accessories",showTip:".tooltip-button",hideTip:".tooltip-close",backCta:".return-cta",submitCar:".submit-car",dealerItems:".dealer-phone, .dealer-link, .dealer-direction"},events:{"click @ui.moreInfo":"showInfo","click @ui.lessInfo":"hideInfo","click @ui.accessories":"showHideAccessories","click @ui.showTip":"showTooltip","click @ui.hideTip":"closeTooltip","click @ui.backCta":"returnToMainViewClicked","click @ui.submitCar":"submitCar","click @ui.dealerItems":"callDealerActions"},initialize:function(a){this.options=a||{},this.model=this.options.model,this.dealerModel=this.options.dealerModel,this.getEventAggregator().on("render:dealerViewData",b.bind(function(){this.render().displayDealerPanView()},this)).on("returnToMainView",this.returnToMainView,this).on("mapChanged",this.updateMapChangedStatus,this)},submitCar:function(c){var d=a(c.target),e=["dealerId","modelName","link","stockType","modelCode"],f={};f.buttonText=d.text(),b.each(e,function(a){f[a]=d.data(a)}),c&&c.preventDefault&&c.preventDefault(),this.options.analyticsController.onBookTestDriveClick(f),this.getEventAggregator().trigger("updateStorageForForm",a(c.currentTarget))},callDealerActions:function(b){var c,d=a(b.target),e=d.parents(".dealer-list").data("dealer-id"),f=d.attr("class");switch(f){case"dealer-phone":c=i.ANALYTICS.DEALERACTION.PHONE;break;case"dealer-link":c=i.ANALYTICS.DEALERACTION.WEBSITE;break;case"dealer-direction":c=i.ANALYTICS.DEALERACTION.DIRECTIONS}this.options.analyticsController.onDealerInteraction(c,e)},showTooltip:function(b){a(b.target).parents(".car-details").find(".helios-tooltip, .tooltip-button").addClass("active").find(".tooltip-content").attr("data-open","true")},closeTooltip:function(b){a(b.target).parents(".car-details").find(".helios-tooltip, .tooltip-button").removeClass("active").find(".tooltip-content").attr("data-open","false")},showInfo:function(b){var c=a(b.target),d=c.parent().find(".dealer-more-info");d.addClass("show"),c.addClass("hidden"),c.parent().find(".less-info").addClass("show"),d[0].style.maxHeight||(d[0].style.maxHeight=d[0].scrollHeight+"px")},hideInfo:function(b){var c=a(b.target),d=c.parent().find(".dealer-more-info");d.removeClass("show"),c.removeClass("show"),c.parent().find(".more-info").removeClass("hidden"),d[0].style.maxHeight&&(d[0].style.maxHeight=null)},showHideAccessories:function(b){var c=a(b.target),d=c.next();c.toggleClass("expand"),c.next().toggleClass("show"),d[0].style.maxHeight=d[0].style.maxHeight?null:d[0].scrollHeight+"px",!this.options.checkDeviceBreakPoint()&&c.hasClass("expand")&&this.options.analyticsController.onAccordionExpansion(c.text())},updateMapChangedStatus:function(){this.mapChanged=!0},returnToMainView:function(b){b&&b.preventDefault&&b.preventDefault(),a(".dealer-result-section").removeClass("hideView"),a(".pan-dealer-section").addClass("hideView"),a(".results").removeClass("dealer-show"),this.getEventAggregator().trigger("showDefaultPin"),this.options.mapParams.dealerDetailViewOpen&&(this.options.mapParams.dealerDetailViewOpen=!1,this.options.mapParams.resultCallSource="back-to-results"),setTimeout(function(){a(".header-info").show()},500)},returnToMainViewClicked:function(){this.returnToMainView(),this.mapChanged&&(this.getEventAggregator().trigger("zoomChangedOnIdle",{pinClicked:!0}),this.mapChanged=!1)},displayDealerPanView:function(){this.options.mapParams.dealerDetailViewOpen=!0,a(".pan-dealer-section").removeClass("hideView"),a(".dealer-result-section").addClass("hideView"),a(".results").addClass("dealer-show"),a(".header-info").toggle(this.options.checkDeviceBreakPoint())},onRender:function(){return a(window).trigger("scroll"),this},getEventAggregator:function(){return this.options.eventAggregator}})}),define("hbars!/components/c_242/html/headerInfoView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='\n    <div class="dealer-count">\n    <span class="total-count-info">\n        <span class="invalid-dealer">\n            <span class="total-label line1">'+m((c=a&&a.headerViewData,c=null==c||!1===c?c:c.total,c=null==c||!1===c?c:c.textLabel1,typeof c===l?c.apply(a):c))+'</span>\n            <span class="total-label line2">'+m((c=a&&a.headerViewData,c=null==c||!1===c?c:c.total,c=null==c||!1===c?c:c.textLabel2,typeof c===l?c.apply(a):c))+"</span>\n        </span>\n    </span>\n    </div>\n"}function g(a,b){var d,e="";return e+='\n    <div class="dealer-count">\n        <span class="total-count-info ',d=c.if.call(a,(d=a&&a.headerViewData,null==d||!1===d?d:d.leftPos),{hash:{},inverse:n.noop,fn:n.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+='">\n            <span class="total-count">'+m((d=a&&a.headerViewData,d=null==d||!1===d?d:d.total,d=null==d||!1===d?d:d.count,typeof d===l?d.apply(a):d))+'</span>\n            <span class="total-label-info">\n                <span class="total-label line1">'+m((d=a&&a.headerViewData,d=null==d||!1===d?d:d.total,d=null==d||!1===d?d:d.textLabel1,typeof d===l?d.apply(a):d))+'</span>\n                <span class="total-label line2">'+m((d=a&&a.headerViewData,d=null==d||!1===d?d:d.total,d=null==d||!1===d?d:d.textLabel2,typeof d===l?d.apply(a):d))+"</span>\n            </span>\n        </span>\n    </div>\n"}function h(a,b){return"left-position"}function i(a,b){var d,e="";return e+='\n<div class="nearby-dealers" >\n    <span class="total-count-info ',d=c.if.call(a,(d=a&&a.headerViewData,null==d||!1===d?d:d.leftPos),{hash:{},inverse:n.noop,fn:n.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+='">\n        <span class="total-count">'+m((d=a&&a.headerViewData,d=null==d||!1===d?d:d.nearByDealerCount,typeof d===l?d.apply(a):d))+'</span>\n        <span class="nearby-total-label">\n            <span class="total-label line1">'+m((d=a&&a.headerViewData,d=null==d||!1===d?d:d.nearByDealerLineOne,typeof d===l?d.apply(a):d))+'</span>\n            <span class="total-label line2">'+m((d=a&&a.headerViewData,d=null==d||!1===d?d:d.nearByDealerLineTwo,typeof d===l?d.apply(a):d))+"</span>\n        </span>\n    </span>\n</div>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l="function",m=this.escapeExpression,n=this;return j=c.if.call(b,(j=b&&b.headerViewData,null==j||!1===j?j:j.invalidDealerStatus),{hash:{},inverse:n.program(3,g,e),fn:n.program(1,f,e),data:e}),
(j||0===j)&&(k+=j),k+="\n",j=c.if.call(b,(j=b&&b.headerViewData,null==j||!1===j?j:j.status),{hash:{},inverse:n.noop,fn:n.program(6,i,e),data:e}),(j||0===j)&&(k+=j),k+="\n"})}),define("c_242_HeaderInfoView",["jquery","marionette","c_242_ApplicationConstants","c_242_ViewConstants","hbars!/components/c_242/html/headerInfoView","customSelect"],function(a,b,c,d,e,f){"use strict";return b.LayoutView.extend({template:e,initialize:function(a){this.options=a||{},this.listenTo(this.model,"change:headerViewData",this.render)},headerInfoRender:function(){var b,c=a(".total-label-info .line2").text(),d=a(".nearby-total-label .line2").text(),e=a(".invalid-dealer .line2").text();return""===c&&(a(".total-label-info .line2").addClass("hidden"),a(".total-label-info .line1").addClass("line2-hidden")),""===e&&a(".invalid-dealer").addClass("line2-hidden"),""===d&&(a(".nearby-total-label .line2").addClass("hidden"),a(".nearby-total-label .line1").addClass("line2-hidden")),b=a(".dealer-count .total-count").text(),a(".dealer-count .total-count").toggle(this.options.checkDeviceBreakPoint()||b.length>0),this},onRender:function(){this.headerInfoRender()}})}),define("hbars!/components/c_242/html/mapView",["handlebars"],function(a){return a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="map-view">\n    <div class="map-overlay hide"></div>\n    <div id="map" class="map"></div>\n    <div class="icon-keys hide"></div>\n</div>\n'})}),define("c_242_MapView",["jquery","marionette","hbars!/components/c_242/html/mapView","customSelect"],function(a,b,c,d){"use strict";return b.LayoutView.extend({template:c,initialize:function(a){this.options=a||{}}})}),define("c_242_MapController",["jquery","underscore","marionette","backbone","markerclusterer","markerSpiderfier","c_242_ApplicationConstants","c_242_ViewConstants","c_242_ModelConstants"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=g.APPLICATION,k=h.VIEW,l=i.MODEL;return c.Object.extend({initialize:function(c){google&&(this.options=c,this.maxClusterZoom=17,this.searchBoxModel=this.options.searchBoxModel,this.geocoder=this.options.geocode,this.model=this.options.model,this.countryDataPromise=null,this.triggerMapIdle=!0,this.mapSettings=this.options.mapSettings,this.options.mapParams.mapIdleTriggered=!0,this.map=new google.maps.Map(a(this.mapSettings.mapElement)[0],this.mapSettings.mapOptions),this.getCountryGeolocationData().done(b.bind(function(){var a=this.model.get(l.CONSTANTS.COUNTRY_GEO_LOCATION)||null;a.geometry&&(this.map.setCenter(a.geometry.location),this.countryBounds=a.geometry.bounds)},this)),this.spiderfier=new f({map:this.map,legColor:this.options.mapSettings.mapSpiderify.strokeColor,spiderZoomLevel:this.maxClusterZoom+1,callSpiderfierExternal:!0}),this.bindEvents())},preLoadMarkers:function(a){b.each(a,b.bind(function(a){var c=new MarkerWithLabel({position:new google.maps.LatLng(0,0),clickable:!1,icon:a,map:this.map||{},draggable:!1});b.delay(b.bind(function(){c.setMap(null)},this),100)},this))},bindEvents:function(){this.getEventAggregator().on(k.EVENTS.RENDER_MAP,b.bind(function(){this.getCountryGeolocationData().done(b.bind(function(){this.setMapOptions()},this))},this)).on("renderCluster",b.bind(function(a){this.model.unset(l.ATTRIBUTES.ACTIVE_DEALER),this.renderCluster(a)},this)).on("showDefaultPin",this.revertActivePin,this).on("zoomChangedOnIdle",this.mapZoomChanged,this).on("map:zoomChange",b.bind(function(a){this.options.mapParams.mapIdleTriggered=!1,this.options.mapParams.activeDealer="",this.options.nearByDealer.status||a&&a.panToLocation&&(this.panToLocation(),this.userMarker=this.createUserMarker())},this)).on("getInBoundMarkers",this.getMarkersInMapBounds,this),this.map.addListener("idle",this.onMapIdleChanges.bind(this))},onMapIdleChanges:function(){this.options.dealerModel.get(l.ATTRIBUTES.ALL_V2DEALERS)&&(this.triggerMapIdle&&(this.triggerMapIdle=!1,this.options.mapParams.dealerDetailViewOpen&&(this.getMarkersInMapBounds(),this.getEventAggregator().trigger("mapChanged"),this.spiderfier.callSpiderfierExternally()),this.options.dealerModel.get(l.ATTRIBUTES.SEARCH_TYPE)===l.CONSTANTS.DEALER?this.spiderfier.callSpiderfierExternally():this.options.mapParams.dealerDetailViewOpen||(this.options.mapParams.mapCenter=this.map.getCenter(),this.options.mapParams.mapIdleTriggered&&this.mapZoomChanged()),setTimeout(b.bind(function(){this.triggerMapIdle=!0},this),600)),window.HELIOS.components.c_242&&(window.HELIOS.components.c_242.mapCurrentZoom=this.map.getZoom()))},mapZoomChanged:function(a){var c=new google.maps.LatLng(this.options.queryParams.lat,this.options.queryParams.lng);if(a&&a.pinClicked&&this.options.queryParams.dealerId.length&&(this.options.nearByDealer.status=!0),this.getLatestMapBoundDetails(),this.options.queryParams.lat&&this.options.queryParams.lng&&(this.options.queryParams.locationNotShared=!1),!(this.map.getZoom()>=this.options.mapParams.mapZoomForResult))return this.options.mapParams.dealerDetailViewOpen||this.renderCluster({noLabels:!0}),this.options.noAggregations.noResults?this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noResults):this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noLocation),!1;this.countryBounds.contains(c)?this.fetchDealers():this.countryBounds.contains(this.map.getCenter())?(b.isUndefined(this.options.dealerModel.get(l.ATTRIBUTES.SEARCH_TYPE))&&(this.options.queryParams.locationNotShared=!0),this.fetchDealers()):this.getEventAggregator().trigger("fetch:dealersResultView",this.options.noResultsForZoomMessage)},fetchDealers:function(){this.options.mapParams.activeDealer.length||(this.getEventAggregator().trigger(k.EVENTS.SHOW_RESULT_LOADER),this.options.eventAggregator.trigger(j.EVENTS.FETCH_BATD_CARS),this.model.unset(l.ATTRIBUTES.ACTIVE_DEALER),this.model.unset(l.ATTRIBUTES.ACTIVE_MARKER))},getLatestMapBoundDetails:function(a){this.getMarkersInMapBounds(a),this.options.queryParams.geoBoundingBox=this.getMapBoundBox()},getMarkersInMapBounds:function(a){var c=this.model.get("dealerMakers"),d=[],e={},f=this.model.get(l.ATTRIBUTES.ACTIVE_DEALER)||null;!f&&!this.options.queryParams.dealerId||this.options.nearByDealer.status?this.options.mapParams.dealerDetailViewOpen&&this.options.mapParams.mapIdleTriggered?d=this.getAllDealersInBound(c):this.options.mapParams.userLocation.lat||this.options.mapParams.userLocation.lng||!this.options.mapParams.activeDealer.length?d=this.getAllDealersInBound(c):d.push(this.options.mapParams.activeDealer):(this.options.mapParams.activeDealer.length&&(f=this.options.mapParams.activeDealer),d.push(f)),e.dealersInMapBound=d,this.options.eventAggregator.trigger(j.EVENTS.FETCH_HEADER_TOTAL_COUNT,b.extend({},e,a))},getAllDealersInBound:function(a){var c=[];return a&&a.length&&b.each(a,b.bind(function(a){this.map.getBounds&&a.getPosition&&this.map.getBounds().contains(a.getPosition())&&a.dealerId&&c.push(a.dealerId)},this)),c},getMapBoundBox:function(){if(this.map){var a,b,c=this.map.getBounds(),d=c.getNorthEast(),e=c.getSouthWest();return a=new google.maps.LatLng(d.lat(),e.lng()),b=new google.maps.LatLng(e.lat(),d.lng()),[a.lat(),a.lng(),b.lat(),b.lng()].join(",")}return""},panToLocation:function(){this.map.setCenter(new google.maps.LatLng(this.options.queryParams.lat,this.options.queryParams.lng))},setMapOptions:function(a){var b;a=a||{},this.getEventAggregator().trigger("showDefaultPin"),this.options.queryParams.lat&&this.options.queryParams.lng?(this.map.setCenter(new google.maps.LatLng(this.options.queryParams.lat,this.options.queryParams.lng)),this.map.setZoom(this.mapSettings.locationZoom),this.model.unset(l.ATTRIBUTES.ACTIVE_DEALER)):this.options.queryParams.dealerId.length?(b=this.searchBoxModel.getFilteredDealer().geolocation,b||(b=this.options.allDealers[this.options.queryParams.dealerId].geolocation),this.map.setCenter(new google.maps.LatLng(b.latitude,b.longitude)),this.map.setZoom(this.mapSettings.dealerZoom),this.model.set({activeDealer:this.options.queryParams.dealerId})):(b=this.model.get(l.CONSTANTS.COUNTRY_GEO_LOCATION)||null,b.geometry.viewport&&(this.map.fitBounds(b.geometry.viewport),this.map.setZoom(this.mapSettings.countryZoom))),this.renderCluster()},renderCluster:function(a){var c,d=this.options.dealerModel.get(l.ATTRIBUTES.ALL_V2DEALERS),f=[],g=this.options.dealersResultModel.get("dealersResultView"),h=g.resultsDealerArray||{},i=[];a=a||{},this.options.queryParams.dealerId&&!d&&(i.push({value:this.options.queryParams.dealerId}),d=i),b.each(d,b.bind(function(a,b){var c=this.options.allDealers[a.value]||{};c.dealerId&&f.push(this.createMarkerDefinition(c,l.CONSTANTS.DEALER))},this)),c=f.map(b.bind(function(c,d){this.options.mapSettings.markerStyle.text=h[c.dealerId]||"";var e=new MarkerWithLabel({clickable:!0,position:new google.maps.LatLng(c.lat,c.lng),title:c.dealerId||"",labelContent:!a.noLabels&&h[c.dealerId]?h[c.dealerId]:"",dealerId:c.dealerId,draggable:!1});return c.dealerId===this.model.get(l.ATTRIBUTES.ACTIVE_DEALER)?this.activeIconStyle(e):this.defaultIconStyle(e),google.maps.event.addListener(e,"click",b.bind(function(a){this.preLoadMarkers([this.mapSettings.icons.spriteImage]),this.revertActivePin(),this.getDealerDataForMarker(e),this.activeIconStyle(e),this.options.analyticsController.onDealerInteraction(j.ANALYTICS.DEALERACTION.PINCLICK,e.getTitle())},this)),e},this)),this.clearOldUserMarker(),this.userMarker=this.createUserMarker(),this.options.nearByDealer.status?(this.userMarker&&c.push(this.userMarker),this.spiderfier.addMarkers(c)):this.spiderfier.addMarkers([].concat(c,this.userMarker?[this.userMarker]:[])),this.markerCluster?(this.markerCluster.clearMarkers(),this.markerCluster.addMarkers(c)):c&&c.length>0&&(this.markerCluster=new e(this.map,c,{gridSize:50,maxZoom:this.maxClusterZoom,minimumClusterSize:2,styles:this.options.mapSettings.mapClusters,ignoreHidden:!0})),this.model.set("dealerMakers",c),this.spiderfier.callSpiderfierExternally(),a&&a.searchType===l.CONSTANTS.LOCATION?this.zoomMapToBoundMarkers(a,c):this.getLatestMapBoundDetails(a)},zoomMapToBoundMarkers:function(a,c){var d=new google.maps.LatLngBounds,e=(this.map.getCenter(),this.options.dealerModel.get(l.ATTRIBUTES.ALL_DEALERS_RESULT));c=c||[],this.options.queryParams.lat&&this.options.queryParams.lng&&e&&e.aggregations.dealerId.length&&(this.labeledDealers=[],b.each(c,b.bind(function(a){a.labelContent.length&&(this.labeledDealers.push(a),d.extend(a.getPosition()))},this)),this.userMarker&&d.extend(this.userMarker.getPosition()),this.map.fitBounds(d),this.map.setCenter(d.getCenter()),this.map.getZoom()<this.options.mapParams.mapZoomForResult&&(this.options.mapParams.mapZoomForResult=this.map.getZoom()),this.getLatestMapBoundDetails(a)),b.delay(b.bind(function(){this.options.mapParams.mapIdleTriggered=!0},this),1500)},getDealerDataForMarker:function(a){var c,d,e=a.labelContent,f=a.getTitle(),g=this.options.dealerModel;a.labelContent.length&&g.get(l.ATTRIBUTES.SEARCH_TYPE)===l.CONSTANTS.LOCATION?(c=g.get(l.ATTRIBUTES.ALL_DEALERS_RESULT).aggregations.dealerId,c.length&&(d=b.find(c,function(a){return a.value===f}),d.dealerLabel=e,this.getEventAggregator().trigger("fetch:dealerViewData",d))):this.getEventAggregator().trigger(j.EVENTS.FETCH_BATD_CARS,{dealerId:f,pin:e||"",callType:"dealerPinClick",callSource:"dealerPinClick"})},revertActivePin:function(){var a=this.model.get(l.ATTRIBUTES.ACTIVE_MARKER);this.options.mapParams.activeDealer="",a&&(this.defaultIconStyle(a),this.model.unset(l.ATTRIBUTES.ACTIVE_MARKER))},activeIconStyle:function(a){a.setIcon({url:this.mapSettings.icons.spriteImage,size:new google.maps.Size(48,55),origin:new google.maps.Point(47,0)}),a.setZIndex(100),a.setClickable(!1),b.delay(b.bind(function(){a.set("labelClass","active-label-alpha"),a.set("labelAnchor",{x:10,y:50}),this.options.mapParams.activeDealer=a.dealerId,this.options.queryParams.lat||this.options.queryParams.lng||this.options.queryParams.locationNotShared||this.options.dealerModel.set({searchType:"dealer"}),this.model.set({activeMarker:a})},this),0)},defaultIconStyle:function(a){a.set("labelClass","inactive-label-alpha"),a.setZIndex(31),a.setIcon({url:this.mapSettings.icons.spriteImage,size:a.labelContent.length?this.mapSettings.labeledSize:this.mapSettings.unLabeledSize,origin:a.labelContent.length?new google.maps.Point(17,21):new google.maps.Point(0,32)}),a.set("labelAnchor",{x:8,y:34}),a.setClickable(!0)},createUserMarker:function(){return this.clearOldUserMarker(),this.options.queryParams.lat&&this.options.queryParams.lng&&!this.options.queryParams.locationNotShared?new MarkerWithLabel({position:new google.maps.LatLng(this.options.queryParams.lat,this.options.queryParams.lng),clickable:!1,title:"Your Location",zIndex:30,icon:this.mapSettings.icons.userIcon,map:this.map||{},draggable:!1}):void 0},clearOldUserMarker:function(){this.userMarker&&(this.userMarker.setMap(null),this.userMarker=null)},createMarkerDefinition:function(a,b){var c={};return b===l.CONSTANTS.DEALER&&(c.lat=a.geolocation.latitude,c.lng=a.geolocation.longitude,c.dealerId=a.dealerId,c.name=a.dealerName,c.label=""),c},getCountryGeolocationData:function(){var c=a.Deferred();return this.countryDataPromise||(this.geocoder.geocode({componentRestrictions:{country:this.options.countryCode}},b.bind(function(a,b){b==google.maps.GeocoderStatus.OK?(this.model.set(l.CONSTANTS.COUNTRY_GEO_LOCATION,a[0]),c.resolve()):c.reject()},this)),this.countryDataPromise=c.promise()),this.countryDataPromise},getEventAggregator:function(){return this.options.eventAggregator}})}),define("c_242_AnalyticsController",["jquery","underscore","backbone","marionette","c_242_ApplicationConstants","c_242_ModelConstants"],function(a,b,c,d,e,f){"use strict";var g=e.APPLICATION;return d.Object.extend({initialize:function(a){this.options=a,this.TRACKING_CODES=this.options.TRACKING_CODES,this.analyticsManager=a.analyticsManager},onLoad:function(){var a=this.TRACKING_CODES.trackingVars.pageLoad,b={};b[a.pageType]=g.ANALYTICS.PAGETYPE,this.analyticsManager.append(this.TRACKING_CODES.eventTypes.pageLoad,b)},onSearch:function(a,b){var c=this.TRACKING_CODES.trackingVars.search,d={};d[c.componentId]=g.ANALYTICS.COMPONENTID,d[c.action]=g.ANALYTICS.ACTION,d[c.searchType]=g.ANALYTICS.SEARCHTYPE,d[c.searchResults]=b.searchResults,b.searchTerm&&(a?d[c.dealerSearchTerm]=b.searchTerm:d[c.locationSearchTerm]=b.searchTerm),b.filterKeys&&(d[c.searchFilter]=b.filterKeys,d[c.searchFilterValue]=b.filterValues),b.vehicleId&&(d[c.vehicleId]=b.vehicleId,d[c.vehicleModel]=b.vehicleModel),this.getAnalyticsManagerTag(this.TRACKING_CODES.eventTypes.search,d)},onDealerInteraction:function(a,b){var c=this.TRACKING_CODES.trackingVars.dealerInteraction,d=this.options.allDealers[b],e={};e[c.componentId]=g.ANALYTICS.COMPONENTID,e[c.dealerAction]=a,e[c.dealerId]=d.dealerId,e[c.dealerName]=d.name,e[c.dealerAddress]=this.getDealerAddress(b),this.getAnalyticsManagerTag(this.TRACKING_CODES.eventTypes.dealerInteraction,e)},getDealerAddress:function(a){var c,d="",e=this.options.allDealers[a],f=[];return e&&(c=e.address,b.each(c,function(a){a&&f.push(a)}),d=f.join(",")),d},onBookTestDriveClick:function(a){var b=this.TRACKING_CODES.trackingVars.genericClick,c=a.dealerId,d=this.options.allDealers[c],e=(d.address,{});e[b.componentId]=g.ANALYTICS.COMPONENTID,e[b.destination]=a.link,e[b.locationInPage]=g.ANALYTICS.LOCATIONINPAGE,e[b.buttonText]=a.buttonText,e[b.dealerAddress]=this.getDealerAddress(c),e[b.dealerId]=c,e[b.dealerName]=d.name,e[b.vehicleId]=a.modelCode,e[b.vehicleModel]=a.modelName,"testDrive"===a.stockType?e[b.completionType]=g.ANALYTICS.COMPLETIONTYPE.BOOKDRIVE:e[b.completionType]=g.ANALYTICS.COMPLETIONTYPE.BOOKVIEW,this.getAnalyticsManagerTag(this.TRACKING_CODES.eventTypes.genericClick,e)},onAccordionExpansion:function(a){var b=this.TRACKING_CODES.trackingVars.buttonNoCookie,c={};c[b.componentId]=g.ANALYTICS.COMPONENTID,c[b.locationInPage]=g.ANALYTICS.LOCATIONINPAGE,c[b.buttonText]=a,c[b.contentAction]=g.ANALYTICS.ACCORDIANEVENT,this.getAnalyticsManagerTag(this.TRACKING_CODES.eventTypes.buttonNoCookie,c)},getAnalyticsManagerTag:function(a,b){this.analyticsManager.tag(a,b)}})}),define("c_242_MapModel",["underscore","jquery","jqueryUtilityPlugins","backbone","googleMapsSingleton","objectFactory","heliosLocation","autocompleteContext","markerclusterer"],function(a,b,c,d,e,f,g,h,i){"use strict";return d.Model.extend({initialize:function(a){if(!google)throw new Error("Map Interface Not Available");this.content=a.content,this.COUNTRY_CODE="JP"}})}),define("c_242_MainController",["jquery","underscore","backbone","marionette","googleMapsSingleton","autocompleteEventHandler","autocompleteContext","storageManager","c_242_ApplicationConstants","c_242_ModelConstants","c_242_ViewConstants","c_242_DeepLinkController","c_242_MainView","c_242_MainModel","c_242_FilterView","c_242_FilterController","c_242_FilterModel","c_242_DealerModel","c_242_DealerController","c_242_DealersResultView","c_242_DealersResultController","c_242_DealersResultModel","c_242_SearchBoxView","c_242_SearchBoxModel","c_242_DealerView","c_242_HeaderInfoView","c_242_MapView","c_242_MapController","c_242_AnalyticsController","c_242_MapModel","trackingCodes"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){"use strict";var F=i.APPLICATION.REGIONS;i.APPLICATION.EVENTS,j.MODEL;return d.Object.extend({initialize:function(a){this.options=a||{},h.init(),this.googleMap=e,this.googleMap.getDeferred().done(b.bind(function(){this.initAnalyticsController(),this.initDealerModel(),this.initDealerController(),this.initDeepLinkController(),this.initMainModel(),this.initMainView(),this.initModels(),this.initViews(),this.initSubControllers()},this))},initAnalyticsController:function(){this.analyticsController=new C(b.extend({},this.options,{TRACKING_CODES:E})),HELIOS.adobe.tagging.pageType&&this.analyticsController.onLoad()},initDeepLinkController:function(){this.deepLinkController=new l(this.extendBaseInitObject())},initMainView:function(){this.mainView=new m(this.extendBaseInitObject({model:this.mainModel,window:this.options.window,activeReviewType:this.options.tab,eventAggregator:this.getEventAggregator()})),this.options.region.appRegion.show(this.mainView)},initModels:function(){this.initSearchBoxModel(),this.initFilterModel(),this.initDealersResultModel(),this.initMapModel()},initViews:function(){this.initSearchBoxView(),this.initFilterView(),this.initDealersResultView(),this.initDealerView(),this.initHeaderInfoView(),this.initMapView(),this.checkDeviceBreakPoint.bind(this.options)||this.initNoLocationSearchBoxView()},initSubControllers:function(){this.initFilterController(),this.initDealersResultController(),this.initMapController()},initMainModel:function(){this.mainModel=new n(this.extendBaseInitObject({mainViewData:{menuTitle:this.options.content.configuration.labels.menuButton||"",refineSearchButton:this.options.content.configuration.labels.refineSearchButton||"",title:this.options.content.configuration.labels.headingTitle||"",subTitle:this.options.content.configuration.labels.headingSubtitle||"",fvButton:this.options.content.configuration.labels.fvButton||""}}))},initDealerModel:function(){this.dealerModel=new r(this.extendBaseInitObject())},initFilterModel:function(){this.filterModel=new q(this.extendBaseInitObject())},initDealersResultModel:function(){this.dealersResultModel=new v(this.extendBaseInitObject())},initSearchBoxModel:function(){this.searchBoxModel=new x(this.extendBaseInitObject({smartLocationContext:this.options.smartLocationContext}))},initMapModel:function(){this.mapModel=new D(this.extendBaseInitObject())},initFilterView:function(){this.filterView=new o(this.extendBaseInitObject({model:this.filterModel,dealerModel:this.dealerModel,searchBoxView:this.searchBoxView})),this.mainView.showChildView(F.FILTER_VIEW,this.filterView)},initDealersResultView:function(){this.dealersResultView=new t(this.extendBaseInitObject({model:this.dealersResultModel,dealerModel:this.dealerModel})),this.mainView.showChildView(F.DEALERS_RESULT_VIEW,this.dealersResultView)},initSearchBoxView:function(){this.searchBoxView=new w(this.extendBaseInitObject({model:this.searchBoxModel,window:this.options.window,dealerModel:this.dealerModel,isFilterSearch:!0,parentRegion:".tabs-navigation",locationSearchItem:".location-pac-item",dealerSearchItem:".dealer-pac-item"})),this.mainView.showChildView(F.SEARCH_BOX_VIEW,this.searchBoxView)},initNoLocationSearchBoxView:function(){this.noLocationSearchBoxView=new w(this.extendBaseInitObject({model:this.searchBoxModel,window:this.options.window,dealerModel:this.dealerModel,parentRegion:".no-location-view",locationSearchItem:".noloc-location-pac-item",dealerSearchItem:".noloc-dealer-pac-item"})),this.mainView.showChildView(F.NOLOCATION_SEARCH_VIEW,this.noLocationSearchBoxView)},initDealerView:function(){this.dealerView=new y(this.extendBaseInitObject({model:this.dealersResultModel,dealerModel:this.dealerModel})),this.mainView.showChildView(F.DEALER_VIEW,this.dealerView)},initHeaderInfoView:function(){this.headerInfoView=new z(this.extendBaseInitObject({model:this.mainModel})),this.mainView.showChildView(F.HEADER_VIEW,this.headerInfoView)},initMapView:function(){this.mapView=new A(this.extendBaseInitObject({model:this.mapModel})),this.mainView.showChildView(F.MAP_VIEW,this.mapView)},initDealerController:function(){this.dealerController=new s(this.extendBaseInitObject({model:this.dealerModel}))},initFilterController:function(){this.filterController=new p(this.extendBaseInitObject({filterModel:this.filterModel,configData:this.options.content,searchBoxModel:this.searchBoxModel}))},initDealersResultController:function(){this.dealersResultController=new u(this.extendBaseInitObject({dealersResultModel:this.dealersResultModel,mainModel:this.mainModel,configData:this.options.content}))},initMapController:function(){this.mapController=new B(this.extendBaseInitObject({model:this.mapModel,searchBoxModel:this.searchBoxModel,dealerModel:this.dealerModel,dealersResultModel:this.dealersResultModel}))},preLoadImages:function(c){c=c||[],b.each(c,function(b){a("<img/>").attr("src",b)})},getEventAggregator:function(){return this.options.eventAggregator},sortArray:function(a,b){return a.constructor===Array?a=a.sort(function(a,c){var d=a[b].toLowerCase(),e=c[b].toLowerCase();return d<e?-1:d>e?1:0}):a},extendBaseInitObject:function(a){return b.extend({},this.options,a,{app:this.options.app,eventAggregator:this.getEventAggregator(),window:this.options.window,remoteServices:this.options.remoteServices,CONSTANTS:i,sortArray:this.sortArray,deepLinkController:this.deepLinkController,storageManager:h,geocode:new google.maps.Geocoder,preLoadImages:this.preLoadImages,autocompleteContext:new g({COUNTRY_CODE:this.options.countryCode,window:this.options.window}),analyticsController:this.analyticsController,checkDeviceBreakPoint:this.checkDeviceBreakPoint})},checkDeviceBreakPoint:function(){var a=this.HELIOS.config.common.mediaQuery.is.large;return window.matchMedia(a).matches}})}),define("c_242",["jquery","underscore","backbone","marionette","objectFactory","remoteServices","handlebars","c_242_ApplicationConstants","c_242_ModelConstants","c_242_ViewConstants","c_242_MainRouter","c_242_MainController"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m,n,o=window.HELIOS.config.common.mapStyles||{},p={root:".c_242",maxCarsCount:100,mapCurrentZoom:"",countryCode:window.HELIOS.config.common.locale.split("-")[1]||"",language:window.HELIOS.config.common.locale.split("-")[0]||"",mapPinKey:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),queryParams:{modelName:"",filteringColour:"",dealerId:"",option:"",lat:0,lng:0,invalidDealer:!1,geoBoundingBox:""},smallPlaceholderImage:"/../img/batd/placeholder_image_small@2x.jpg",largePlaceholderImage:"/../img/batd/placeholder_image_large.jpg",noResults:{},nearByDealers:{},analytics:{locationSearch:{searchTerm:""},dealerSearch:{searchTerm:""},filterSearchTracking:{}}},q=h.APPLICATION.PROPERTIES;return n=function(a){this.init(a)},n.prototype.init=function(b){if(this.settings=a.extend({},p,b),m=a(p.root),!m.length||!Object.keys(this.settings.window.HELIOS.components.c_242.inventorySearchConfig).length)return a(".c_242 > .loader").hide(),!1;this.targetSelector=p.root,this.settings.smallPlaceholderImage=this.settings.window.HELIOS.config.common.scriptBaseUrl+this.settings.smallPlaceholderImage,this.settings.largePlaceholderImage=this.settings.window.HELIOS.config.common.scriptBaseUrl+this.settings.largePlaceholderImage,this.settings.mapParams={mapCurrentZoom:"",resultCallSource:"",mapZoomForResult:parseInt(this.settings.window.HELIOS.components.c_242.inventorySearchConfig.configuration.labels.dealerDetailsZoomLevel)||10,mapIdleTriggered:!1,mapCenter:"",userLocation:"",activeDealer:"",dealerDetailViewOpen:!1,triggerCallOnMainView:!1},this.settings.mapSettings={icons:{userIcon:o.markers.types.geoMarker.default+".png",spriteImage:o.markers.sprite.alpha+".png"},countryZoom:parseInt(this.settings.window.HELIOS.components.c_242.inventorySearchConfig.configuration.labels.mapZoomLevel)||4,dealerZoom:18,locationZoom:parseInt(this.settings.window.HELIOS.components.c_242.inventorySearchConfig.configuration.labels.mapZoomLevel)||4,mapElement:".c_242 #map",markerStyle:{text:"",textColor:"#FFF",fontFamily:"inherit",fontWeight:"normal",textDecoration:"inherit",textSize:"20",height:"43"},mapClusters:o.markers.clusters,mapSpiderify:o.markers.spiderify,labeledSize:{width:29,height:34,f:"px",b:"px"},unLabeledSize:{width:16,height:23,f:"px",b:"px"},mapOptions:{draggable:!0,scrollwheel:!1,zoom:parseInt(this.settings.window.HELIOS.components.c_242.inventorySearchConfig.configuration.labels.mapZoomLevel)||4,minZoom:4,maxZoom:21,disableDefaultUI:!0,zoomControl:!0,streetViewControl:!1,center:{lat:0,lng:0},mapTypeId:"roadmap",styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]}},this.rootElement=m,this.renderAuthorObject(),this.setupApplication()},n.prototype.renderAuthorObject=function(){this.settings.content=this.settings.window.HELIOS.components.c_242.inventorySearchConfig||{},this.settings.allAggregations=this.settings.window.HELIOS.components.c_242.allAggregations||{},this.settings.allDealers=this.settings.window.HELIOS.components.c_242.allDealers||{},this.settings.noResults={noResults:!0,noLocationTitle:this.settings.content.configuration.labels.noResultTitle||"",noLocationMessage:this.settings.content.configuration.labels.noResultMessage||""},this.settings.noLocation={noResults:!0,noLocationMessage:this.settings.content.configuration.labels.noLocationMessage||""},this.settings.noResultsForZoomMessage={noResults:!0,noLocationTitle:this.settings.content.configuration.labels.noResultTitle||"",noLocationMessage:this.settings.content.configuration.labels.noResultsForZoomMessage||""},this.settings.noAggregations={noResults:!1},this.settings.nearByDealer={status:!1},this.settings.noVehiclesTotal={total:{count:0,text:this.settings.content.configuration.labels.matchHeaderLineOne+" "+this.settings.content.configuration.labels.matchHeaderLineTwo}},b.each(this.settings.allDealers,function(a,b){a.dealerId=b}),b.each(this.settings.content.configuration.sortOrder.modelName.options,function(a,b){a.order=b+1}),b.each(this.settings.content.configuration.sortOrder.filteringColour.options,function(a,b){a.order=b+1})},n.prototype.setupApplication=function(){var a=new d.Application,e=this.settings.content,g=this.settings.allAggregations,h=this.settings.allDealers;a.name=q.NAME,a.version=q.VERSION,a.regionManager=new d.RegionManager,a.addRegions({appRegion:this.targetSelector+" .main-view"}),a.mainController=new l(b.extend(this.settings,{app:a,content:e,allAggregations:g,allDealers:h,region:a.getRegions(),window:this.settings.window,eventAggregator:b.extend({},c.Events),remoteServices:f,analyticsManager:this.settings.analyticsManager,heliosObject:this.settings.HELIOS})),this.application=a},n});var require=require||{};require(["jquery","backbone","underscore","underscoreContrib","heliosAppContext","jqueryUtilityPlugins","jqueryBbq","customSelect","customTooltip","priceCodes","profileManager","shimLoader","heliosObject","smartLocationContext","storageManager","storeLastInteraction","storeDealerReferrer","disclaimers","skiplinks","stateStoreFactory","queryStringStore","personalisation","analyticsManager","remoteServices","apigeeAuthoriser","c_001","c_004","c_005","c_005_0B","c_007","c_007B","c_007_2","c_008","c_009","c_010","c_010B","c_011","c_012","c_013","c_014","c_015","c_016","c_018_0","c_018B_0","c_018_1","c_018B_1","c_018_2","c_018B_2","c_019","c_019_20","c_019_22","c_019_23","c_019_25","c_019_26","c_019_27","c_019_29","c_019_timepicker","c_019_datepicker","c_020","c_021","c_023B","c_025","c_026","c_027","c_028","c_028_2","c_028_3","c_028_4","c_028_5","c_028_6","c_029","c_029B","c_029C","c_030_0","c_030_1","c_130","c_030B","c_031","c_033","c_034","c_035","c_036","c_039_0","c_040","c_040_1","c_042","c_044A","c_044C","c_046","c_046_2","c_046A","c_046B","c_049","c_053","c_054_2","c_054_3","c_056","c_058","c_059","c_059B","c_059C","c_059D","c_060","c_041","c_061","c_062","c_063_0","c_064","c_069_10","c_071","c_072","c_073","c_073_autocomplete","c_079_0","c_080","c_080B","c_080B_1","c_080B_2","c_080C","c_080_4","c_081_1","c_081_2","c_081_3","c_082","c_095","c_095A","c_095B","c_097","c_099_1","c_099_2","c_099_3","c_099_4","c_099_5","c_099_6","c_099B_1","c_099C_1","c_099C_2","c_099C_3","c_100","c_103","c_111","c_120_1","c_124","c_125","c_128","c_129","c_001B","c_023_2","c_024","c_057","c_131","c_031B","c_133","c_133B","c_136","c_137_0","c_151_1","c_132","c_142","c_142A_0","c_142A_1","c_142A_2","c_142A_3","c_142A_4","c_142A_5","c_142B_0","c_142B_1","c_142B_2","c_142B_5","c_154","c_157","c_160","c_170","c_180","c_185","c_184","c_184B","c_186_0","c_182_1","c_188_0","c_189","c_190_2","c_139","c_190_6","c_190_7","c_190_3","c_190_4","c_190_5","c_190_0","c_193_0","c_193B_0","c_193_1","c_193B_1","c_194_0","c_194B_0","c_194_0_analytics","c_194B_0_analytics","c_195_0_analytics","c_195B_0_analytics","c_196_0","c_196B_0","c_197_0","c_197B_0","c_206","c_207","c_208_0","c_212","c_211_0","c_214","c_215","c_216","c_217","c_218","c_218_1","c_223","c_222","c_220","numberFormat","priceManager","c_221","c_224","c_225","financeManager","c_219","c_211C_0","c_230","c_232","c_233","c_238","c_240","c_240-1","c_240-2","c_243","c_239","c_239_1","c_239_2","c_239_3","c_242"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Qc,Rc,Sc,Tc,Uc,Vc,Wc,Xc,Yc,Zc,$c,_c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd){"use strict";var wd={init:function(){k.init({HELIOS:m}),this.heliosAppContext=new e({HELIOS:m}),this.smartLocationContext=new n({countryCode:this.heliosAppContext.getCountryCode(),profileManager:k,window:window,heliosObject:m}),window.remoteServices=c.create(x),o.init(),this.analyticsManager=new w({HELIOS:m,window:window,_satellite:window._satellite}),this.financeManager=new gd({HELIOS:m}),this.numberFormat=new bd({HELIOS:m}),this.priceManager=new cd({HELIOS:m,remoteServices:window.remoteServices,storageManager:o}),this.analyticsManager.trackViewPortSize(),this.analyticsManager.trackFormCount(),h.init(),i.init(),l.init(),p.init(),q.init({window:window,HELIOS:m}),r.init({HELIOS:m}),s.init(),t.create({HELIOS:m}),u.init(),v.init(),this.priceCodes=new j(m&&m.config&&m.config.common&&m.config.common.pricing&&m.config.common.pricing.priceCodes),
this.loadComponents()},loadComponents:function(){var d=c.extend({},b.Events);a(".c_001").each(c.bind(function(b,c){new z(a(c),{window:window,analyticsManager:this.analyticsManager})},this)),A.init(),a(".c_005").each(c.bind(function(b,c){new B(a(c),{HELIOS:m,window:window,analyticsManager:this.analyticsManager})},this)),a(".c_005-0B").each(c.bind(function(b,c){new C(a(c),{HELIOS:m,analyticsManager:this.analyticsManager})},this)),D.init({window:window,analyticsManager:this.analyticsManager}),E.init({window:window,analyticsManager:this.analyticsManager}),F.init(),G.init({analyticsManager:this.analyticsManager}),H.init({analyticsManager:this.analyticsManager}),I.init({HELIOS:m,analyticsManager:this.analyticsManager,window:window}),J.init({HELIOS:m,analyticsManager:this.analyticsManager,window:window}),K.init(),L.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),M.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager});new N({HELIOS:m,analyticsManager:this.analyticsManager});Q.init({HELIOS:m,analyticsManager:this.analyticsManager,smartLocationContext:this.smartLocationContext,window:window}),R.init({HELIOS:m,analyticsManager:this.analyticsManager,smartLocationContext:this.smartLocationContext,window:window}),U.init({HELIOS:m}),V.init({HELIOS:m}),ha.init({analyticsManager:this.analyticsManager,HELIOS:m,window:window}),a(".c_028").each(c.bind(function(b,c){new ka(a(c),{window:window,analyticsManager:this.analyticsManager})},this)),la.init({analyticsManager:this.analyticsManager}),ma.init({analyticsManager:this.analyticsManager,HELIOS:m,window:window}),na.init({analyticsManager:this.analyticsManager,HELIOS:m,window:window}),oa.init({analyticsManager:this.analyticsManager,HELIOS:m,window:window}),a(".c_028-6").each(function(a,b){new pa(b,{analyticsManager:this.analyticsManager,HELIOS:m,window:window})}.bind(this)),a(".c_015").each(c.bind(function(b,c){new O(a(c),{analyticsManager:this.analyticsManager})},this)),P.init({HELIOS:m,analyticsManager:this.analyticsManager}),a(".c_019-25").each(c.bind(function(b,c){new $(a(c),{HELIOS:m,analyticsManager:this.analyticsManager,smartLocationContext:this.smartLocationContext,window:window,eventAggregator:d})},this)),a(".c_019").each(c.bind(function(b,c){this.form=new W(a(c),{HELIOS:m,analyticsManager:this.analyticsManager,smartLocationContext:this.smartLocationContext,window:window})},this)),a(".c_019-20").each(c.bind(function(b,c){new X(a(c),{HELIOS:m})},this)),a(".c_019-22").each(c.bind(function(b,c){new Y(a(c),{HELIOS:m,analyticsManager:this.analyticsManager,window:window})},this)),a(".c_019-23").each(c.bind(function(b,c){new Z(a(c),{HELIOS:m,analyticsManager:this.analyticsManager,window:window})},this)),a(".c_019-26").each(c.bind(function(b,c){new _(a(c),{HELIOS:m,analyticsManager:this.analyticsManager,window:window})},this)),a(".c_019-27").each(c.bind(function(b,c){new aa(a(c))},this)),a(".c_019-29").each(c.bind(function(b,c){new ba(a(c),{HELIOS:m,analyticsManager:this.analyticsManager,window:window})},this)),ea.init({HELIOS:m,analyticsManager:this.analyticsManager,eventAggregator:d}),fa.init({analyticsManager:this.analyticsManager}),ga.init({analyticsManager:this.analyticsManager}),a(".c_027").each(c.bind(function(b,c){new ja(a(c),{analyticsManager:this.analyticsManager,window:window})},this)),ia.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),a(".c_029").each(c.bind(function(b,c){new qa(a(c),{analyticsManager:this.analyticsManager,window:window})},this)),ra.init(),sa.init(),xa.init({analyticsManager:this.analyticsManager}),Rb.init({analyticsManager:this.analyticsManager}),ya.init({analyticsManager:this.analyticsManager}),za.init({HELIOS:m,analyticsManager:this.analyticsManager,window:window}),Aa.init({HELIOS:m,analyticsManager:this.analyticsManager,window:window}),a(".c_036").each(c.bind(function(b,c){new Ba(a(c),{HELIOS:m,analyticsManager:this.analyticsManager})},this)),Ca.init({analyticsManager:this.analyticsManager,HELIOS:m,window:window}),ta.init({HELIOS:m}),wa.init({analyticsManager:this.analyticsManager}),ua.init({analyticsManager:this.analyticsManager}),va.init({window:window,HELIOS:m,analyticsManager:this.analyticsManager}),Da.init({window:window,HELIOS:m,analyticsManager:this.analyticsManager}),Ea.init({HELIOS:m,analyticsManager:this.analyticsManager}),Fa.init({analyticsManager:this.analyticsManager}),Ga.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Ha.init({analyticsManager:this.analyticsManager}),Ia.init({HELIOS:m,analyticsManager:this.analyticsManager}),Ja.init({HELIOS:m,analyticsManager:this.analyticsManager,window:window,$window:a(window)}),Ka.init({HELIOS:m,analyticsManager:this.analyticsManager}),La.init({HELIOS:m,analyticsManager:this.analyticsManager}),Ma.init(),Na.init({HELIOS:m,analyticsManager:this.analyticsManager}),Oa.init({analyticsManager:this.analyticsManager,window:window}),Pa.init({analyticsManager:this.analyticsManager}),ic.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),nc.init({HELIOS:m,analyticsManager:this.analyticsManager}),oc.init({analyticsManager:this.analyticsManager,financeManager:this.financeManager,heliosAppContext:this.heliosAppContext,HELIOS:m,numberFormat:this.numberFormat,priceCodes:this.priceCodes,priceManager:this.priceManager,window:window}),Qa.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager,form:this.form}),Ra.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Sa.init({analyticsManager:this.analyticsManager,financeManager:this.financeManager,heliosAppContext:this.heliosAppContext,HELIOS:m,numberFormat:this.numberFormat,priceCodes:this.priceCodes,priceManager:this.priceManager,window:window}),Ta.init({analyticsManager:this.analyticsManager,financeManager:this.financeManager,heliosAppContext:this.heliosAppContext,HELIOS:m,numberFormat:this.numberFormat,priceCodes:this.priceCodes,priceManager:this.priceManager,window:window}),Ua.init({analyticsManager:this.analyticsManager,financeManager:this.financeManager,heliosAppContext:this.heliosAppContext,HELIOS:m,numberFormat:this.numberFormat,priceCodes:this.priceCodes,priceManager:this.priceManager,window:window}),Va.init({analyticsManager:this.analyticsManager,financeManager:this.financeManager,heliosAppContext:this.heliosAppContext,HELIOS:m,numberFormat:this.numberFormat,priceCodes:this.priceCodes,priceManager:this.priceManager,window:window}),Xa.init({analyticsManager:this.analyticsManager}),Wa.init({analyticsManager:this.analyticsManager}),Ya.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Za.init({analyticsManager:this.analyticsManager}),$a.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),_a.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),ab.init(),cb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),bb.init({analyticsManager:this.analyticsManager}),db.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager,smartLocationContext:this.smartLocationContext}),fb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),gb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),hb.init({HELIOS:m,window:window}),ib.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),jb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),kb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),lb.init({HELIOS:m,window:window}),mb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),nb.init({window:window,analyticsManager:this.analyticsManager}),ob.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),pb.init({HELIOS:m,analyticsManager:this.analyticsManager}),tb.init({HELIOS:m,analyticsManager:this.analyticsManager,window:window}),vb.init({analyticsManager:this.analyticsManager}),ub.init({analyticsManager:this.analyticsManager}),wb.init({analyticsManager:this.analyticsManager,window:window}),xb.init({analyticsManager:this.analyticsManager}),yb.init({HELIOS:m,analyticsManager:this.analyticsManager}),zb.init({analyticsManager:this.analyticsManager}),Ab.init({analyticsManager:this.analyticsManager,HELIOS:m,heliosAppContext:this.heliosAppContext,financeManager:this.financeManager,numberFormat:this.numberFormat,priceCodes:this.priceCodes,priceManager:this.priceManager,window:window}),Bb.init({analyticsManager:this.analyticsManager,HELIOS:m,heliosAppContext:this.heliosAppContext,financeManager:this.financeManager,numberFormat:this.numberFormat,priceCodes:this.priceCodes,priceManager:this.priceManager,window:window}),Cb.init({analyticsManager:this.analyticsManager,HELIOS:m,heliosAppContext:this.heliosAppContext,financeManager:this.financeManager,numberFormat:this.numberFormat,priceCodes:this.priceCodes,priceManager:this.priceManager,window:window}),Db.init({analyticsManager:this.analyticsManager,window:window}),qb.init({analyticsManager:this.analyticsManager}),rb.init({HELIOS:m,window:window}),sb.init({HELIOS:m,window:window}),Eb.init({HELIOS:m,window:window}),Fb.init({analyticsManager:this.analyticsManager,window:window}),Gb.init(),Hb.init({analyticsManager:this.analyticsManager}),Ib.init({analyticsManager:this.analyticsManager}),Jb.init({HELIOS:m,analyticsManager:this.analyticsManager}),Kb.init(),Lb.init(),a(".c_001B").each(c.bind(function(b,c){new Mb(a(c),{analyticsManager:this.analyticsManager})},this)),Nb.init({analyticsManager:this.analyticsManager,window:window}),Ob.init({analyticsManager:this.analyticsManager}),Pb.init({HELIOS:m,analyticsManager:this.analyticsManager}),Qb.init(),Sb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Tb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Ub.init({window:window,analyticsManager:this.analyticsManager}),Vb.init({analyticsManager:this.analyticsManager}),Wb.init({window:window,HELIOS:m,analyticsManager:this.analyticsManager}),Xb.init({HELIOS:m,window:window}),Yb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Zb.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),$b.init({HELIOS:m,analyticsManager:this.analyticsManager}),_b.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),ac.init({HELIOS:m,window:window}),bc.init(),cc.init({HELIOS:m,analyticsManager:this.analyticsManager}),dc.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),ec.init({HELIOS:m,analyticsManager:this.analyticsManager}),gc.init({HELIOS:m,analyticsManager:this.analyticsManager}),hc.init({analyticsManager:this.analyticsManager}),ic.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),jc.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),kc.init(),lc.init({HELIOS:m,window:window}),mc.init(),pc.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),qc.init(),rc.init({window:window}),sc.init(),tc.init(),uc.init({analyticsManager:this.analyticsManager}),xc.init(),yc.init(),zc.init(),vc.init(),wc.init({analyticsManager:this.analyticsManager}),Ac.init({HELIOS:m,window:window}),Dc.init({analyticsManager:this.analyticsManager}),Ec.init({analyticsManager:this.analyticsManager}),Fc.init({analyticsManager:this.analyticsManager,smartLocationContext:this.smartLocationContext}),Gc.init({analyticsManager:this.analyticsManager,smartLocationContext:this.smartLocationContext,window:window}),Hc.init({analyticsManager:this.analyticsManager}),Ic.init({analyticsManager:this.analyticsManager}),Jc.init({analyticsManager:this.analyticsManager}),Kc.init({analyticsManager:this.analyticsManager}),Nc.init({window:window,analyticsManager:this.analyticsManager}),Oc.init({window:window,analyticsManager:this.analyticsManager,smartLocationContext:this.smartLocationContext}),Pc.init({window:window,analyticsManager:this.analyticsManager}),a(".c_208-0").each(c.bind(function(b,c){new Rc(a(c),{HELIOS:m,analyticsManager:this.analyticsManager})},this)),Tc.init({analyticsManager:this.analyticsManager}),id.init({analyticsManager:this.analyticsManager}),this.dealerLocator=new Qc.init({smartLocationContext:this.smartLocationContext,window:window,analyticsManager:this.analyticsManager}),a(".c_212").each(c.bind(function(b,c){new Sc(a(c),{window:window,analyticsManager:this.analyticsManager})},this)),a(".c_216").each(c.bind(function(b,c){new Wc(a(c),{analyticsManager:this.analyticsManager})},this)),Xc.init({analyticsManager:this.analyticsManager}),Yc.init({analyticsManager:this.analyticsManager}),ad.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Zc.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),_c.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Uc.init({window:window,analyticsManager:this.analyticsManager}),$c.init({window:window,analyticsManager:this.analyticsManager}),dd.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),ed.init({HELIOS:m,analyticsManager:this.analyticsManager}),fd.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),Vc.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),hd.init({HELIOS:m,window:window,analyticsManager:this.analyticsManager}),a(".c_230").each(c.bind(function(b,c){new jd(a(c),{window:window,analyticsManager:this.analyticsManager,HELIOS:m})},this)),kd.init({window:window,analyticsManager:this.analyticsManager,HELIOS:m}),ld.init({window:window,analyticsManager:this.analyticsManager,HELIOS:m}),md.init({window:window,analyticsManager:this.analyticsManager,HELIOS:m}),nd.init({window:window,analyticsManager:this.analyticsManager,HELIOS:m}),od.init({window:window,analyticsManager:this.analyticsManager,HELIOS:m}),pd.init({window:window,analyticsManager:this.analyticsManager,HELIOS:m}),a(".c_243").each(function(a,b){new qd(b,{analyticsManager:this.analyticsManager,HELIOS:m,window:window})}.bind(this)),a(".c_239").each(function(a,b){new rd(b,{analyticsManager:this.analyticsManager,HELIOS:m,window:window})}.bind(this)),sd.init({window:window,analyticsManager:this.analyticsManager,HELIOS:m}),td.init({window:window,analyticsManager:this.analyticsManager,HELIOS:m}),a(".c_239-3").each(function(a,b){new ud(b,{window:window,HELIOS:m,analyticsManager:this.analyticsManager})}.bind(this)),this.inventorySearch=new vd({smartLocationContext:this.smartLocationContext,window:window,analyticsManager:this.analyticsManager,HELIOS:m})}};a(a.proxy(wd.init,wd))}),define("main.js",function(){})}();
//# sourceMappingURL=main.min.js.map/* global HELIOS */
/**
 * Helios Config overrides/additions - Nissan
 * Use this to supplement any brand specific settings you require
 */
(function() {
    HELIOS.config.brand = 'Nissan';
    HELIOS.config.logo = "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/logo/logo.png";
    HELIOS.config.logoHardGate = "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/logo/logo-transparent.png";

    var styles = [
        {
            "featureType": "landscape",
            "stylers": [
                {
					"saturation": -100
				},
                {
					"lightness": 25
				},
                {
					"visibility": "on"
				}
            ]
        },
        {
            "featureType": "poi",
            "stylers": [
                {
					"visibility": "off"
				}
            ]
        },
        {
            "featureType": "road.highway",
            "elementType": "geometry",
            "stylers": [
                {
					"saturation": -100
				},
                {
					"visibility": "simplified"
				}
            ]
        },
        {
            "featureType": "road.arterial",
            "stylers": [
                {
					"saturation": -100
				},
                {
					"lightness": 30
				},
                {
					"visibility": "on"
				}
            ]
        },
        {
            "featureType": "road.local",
            "stylers": [
                {
					"saturation": -100
				},
                {
					"lightness": 40
				},
                {
					"visibility": "on"
				}
            ]
        },
        {
            "featureType": "transit",
            "stylers": [
                {
					"saturation": -100
				},
                {
					"visibility": "simplified"
				}
            ]
        },
        {
            "featureType": "administrative.province",
            "stylers": [
                {
					"visibility": "off"
				}
            ]
        },
        {
            "featureType": "water",
            "elementType": "labels",
            "stylers": [
                {
					"visibility": "on"
				},
                {
					"lightness": -25
				},
                {
					"saturation": -100
				}
            ]
        },
        {
            "featureType": "water",
            "elementType": "geometry",
            "stylers": [
                {
					"hue": "#abc1d8"
				},
                {
					"lightness": 0
				},
                {
					"saturation": -50
				}
            ]
        }
    ];

    HELIOS.components.c_019_25 = HELIOS.components.c_019_25 || {};
    HELIOS.components.c_019_25.settings = {
        "analytics": {
            "shouldTrackDealerType": false
        },
        "dealerTypeIcons": { // add `imgUrl` property if icon requires an image
            "alpha": {
                "cssClass": "alpha"
            },
            "beta": {
                "cssClass": "beta"
            }
        }
    };

    HELIOS.components.c_022 = HELIOS.components.c_022 || {};
    HELIOS.components.c_022.settings = {
        "styles": styles,
        "geoMarker": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/geo.png",
        "markerStyles": {
            "alpha": {
                "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker-black",
                "inactive": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker"
            },
            "beta": {
                "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker-black",
                "inactive": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker"
            },
            "gamma": {
                "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker-black",
                "inactive": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker"
            },
            "delta": {
                "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker-black",
                "inactive": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker"
            },
            "epsilon": {
                "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker-black",
                "inactive": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker"
            }
        },
        "height": 54,
        "width": 48,
        "clusters":[
            {
                "textColor": "#fff",
                "fontFamily": "Nissan Bold",
                "textDecoration": "inherit",
                "textSize": "16",
                "height": "54",
                "width": "48",
                "url": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/marker.png",
                "anchorIcon": [50, 24]
            }
        ]
    };

    HELIOS.components.c_cfg = HELIOS.components.c_cfg || {
        settings: {
            "brand": "nissan",
            "isCommmandValue": "(238,238,238)"
        }
    };

    HELIOS.components.c_cfg_v2_linear = HELIOS.components.c_cfg_v2_linear || {};

    HELIOS.components.c_061 = HELIOS.components.c_061 || {};
    HELIOS.components.c_061.settings = {
        "styles": styles,
        "image": {
            "url": '/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/brand-marker.png',
            "width": 45,
            "height": 50
        }
    };

    HELIOS.components.c_207 = HELIOS.components.c_207 || {};
    HELIOS.components.c_207.settings = {
        "analytics": {
            "shouldTrackDealerType": false
        }
    };

    HELIOS.config.common.mapStyles = {
        "styles": styles,
        "markers": {
            "types": {
                "geoMarker": {
                    "default": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/user-location"
                },
                "alpha": {
                    "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-alpha-active",
                    "default": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-alpha-default",
                    "secondary": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-alpha-secondary"
                },
                "beta": {
                    "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-beta-active",
                    "default": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-beta-default",
                    "secondary": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-beta-secondary"
                },
                "gamma": {
                    "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-active",
                    "default": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker"
                },
                "delta": {
                    "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-active",
                    "default": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker"
                },
                "epsilon": {
                    "active": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-active",
                    "default": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker"
                }
            },
            "sprite": {
                "alpha": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-alpha-sprite"
             },
            "states": {
                "default": {
                    "width": 29,
                    "height": 34,
                },
                "active": {
                    "width": 48,
                    "height": 55,
                },
                "secondary": {
                    "width": 17,
                    "height": 21
                }
            },
            "clusters": [
                {
                    "textColor": "#FFF",
                    "fontFamily": "inherit",
                    "fontWeight": "normal",
                    "textDecoration": "inherit",
                    "textSize": "20",
                    "height": "43",
                    "width": "48",
                    "url": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-cluster.png",
                    "anchorIcon": [43, 24]
                },
                {
                    "textColor": "#FFF",
                    "fontFamily": "inherit",
                    "fontWeight": "normal",
                    "textDecoration": "inherit",
                    "textSize": "20",
                    "height": "43",
                    "width": "48",
                    "url": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-cluster.png",
                    "anchorIcon": [43, 24]
                },
                {
                    "textColor": "#FFF",
                    "fontFamily": "inherit",
                    "fontWeight": "normal",
                    "textDecoration": "inherit",
                    "textSize": "20",
                    "height": "43",
                    "width": "48",
                    "url": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-cluster.png",
                    "anchorIcon": [43, 24]
                },
                {
                    "textColor": "#FFF",
                    "fontFamily": "inherit",
                    "fontWeight": "normal",
                    "textDecoration": "inherit",
                    "textSize": "20",
                    "height": "43",
                    "width": "48",
                    "url": "/etc/designs/nissan/18.10.2.NISSAN-3/common-assets/img/map/dealer-marker-cluster.png",
                    "anchorIcon": [43, 24]
                }
            ],
            "clusterLevel": 50,
            "spiderify": {
                "strokeColor": "#c3002f"
            }
        }
    };
}());
